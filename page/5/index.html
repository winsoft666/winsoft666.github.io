<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Windows,Linux,C/C++,Golang,Qt,Node.js,Electron,Vue,WebRTC">
    <meta name="description" content="除注明转载以外，所有文章均为原创">
    <meta name="author" content="江雪桥">
    
    <title>
        
        代码派
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/favicon.png">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"jiangxueqiao.com","root":"/","language":"zh-CN","path":"search.xml"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"代码派","author":"江雪桥","avatar":"/images/avatar.png","logo":"/images/logo.png","favicon":"/images/favicon.png"},"menu":{"Archives":"/archives","Categories":"/categories","Tags":"/tags","About":"/about","Github":"https://github.com/winsoft666"},"first_screen":{"enable":false,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep writing and Keep loving.","hitokoto":false},"social_contact":{"enable":true,"links":{"github":"https://github.com/winsoft666","weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":true,"hide_header":true},"home":{"category":true,"tag":true,"announcement":null},"post":{"author_badge":{"enable":false,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":true,"reward":{"enable":false,"img_link":null,"text":null}},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":true,"preload":false},"comment":{"enable":true,"use":"twikoo","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":"https://twikoo.jiangxueqiao.com","region":"zh-CN","version":"1.6.21"},"waline":{"server_url":null,"reaction":false,"version":2},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":true},"lazyload":{"enable":true},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2017,"word_count":false,"icp":{"enable":true,"record_code":"鄂ICP备2020015399号-6","url":"https://beian.miit.gov.cn"},"site_deploy":{"enable":false,"provider":"github","url":null},"shields_style":{"enable":false,"custom":[{"link_url":null,"img_url":null}]}},"inject":{"enable":false,"css":[null,"/css/custom.css"],"js":[null]},"root":"","version":"4.0.7"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
  </script>
<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="CodeSilo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container border-box">

    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box is-home">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.png">
                </a>
            
            <a class="site-name border-box" href="/">
               代码派
            </a>
        </div>

        <div class="right border-box">
            <div class="pc">
                <ul class="menu-list">
                    <li class="menu-item">
                        <a class="active"
                           href="/"
                        >首页</a>
                    </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >归档</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >分类</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >标签</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >关于</a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               target="_blank" rel="noopener" href="https://github.com/winsoft666"
                            >GITHUB</a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            <li class="drawer-menu-item flex-center">
                <a class="active"
                   href="/"
                >首页</a>
            </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives"
                    >归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories"
                    >分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags"
                    >标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about"
                    >关于</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       target="_blank" rel="noopener" href="https://github.com/winsoft666"
                    >GITHUB</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    <div class="home-content-container fade-in-down-animation">
    
    <ul class="home-post-list border-box">
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/3406024791.html">
                            Qt静态库编译
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <blockquote>
<p>使用Qt静态库违背了Qt的免费使用协议！</p>
</blockquote>
<h1 id="1-编译"><a href="#1-编译" class="headerlink" title="1. 编译"></a>1. 编译</h1><p>编译Qt源码需要提前安装如下工具：</p>
<ul>
<li>nasm</li>
<li>perl</li>
<li>gperf</li>
<li>win_flex_bison</li>
<li>llvm</li>
<li>python2</li>
<li>openssl</li>
</ul>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 16:09:13 GMT+0800">2024-03-12 16:09:13</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/Qt/">Qt</a></li>
                        
                    
                </ul>
            </span>
        

        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/3406024791.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/3002178342.html">
                            Windows的DLL全局共享变量
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            同一个DLL文件可以被多个进程加载。当不同的进程将DLL映射到自己的内存空间时，系统会为DLL中的全局和静态变量创建不同的实例，而不会共享同一个变量实例。
那我们如何实现在进程间共享DLL全局变量呢？我们可以在DLL中使用如下语句来创建一个段，用来存...
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:48:38 GMT+0800">2024-03-12 15:48:38</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E4%B8%93%E6%A0%8F%E3%80%8AWindows%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B%E3%80%8B/">专栏《Windows核心编程》</a></li>
                        
                    
                </ul>
            </span>
        

        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/3002178342.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/3801212176.html">
                            批处理杂记
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <h1 id="1-exit"><a href="#1-exit" class="headerlink" title="1. exit"></a>1. exit</h1><p>exit命令用于退出当前的批处理脚本，并返回一个退出代码ExitCode（即返回值）。退出代码通常是一个整数，用于指示脚本执行的状态，例如成功（0）或失败（非零值）。</p>
<p><code>exit</code>命令的语法为：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit [/b] [exitCode]</span><br></pre></td></tr></tbody></table></figure>

<p>其中 <code>/b</code> 选项表示仅退出当前批处理脚本的执行，而不会影响调用脚本的父进程。如果不使用 <code>/b</code> 选项，则 exit 命令会终止当前整个的命令处理器进程（CMD.EXE），并返回退出代码给调用者。</p>
<p>exitCode 是一个可选参数，用于指定退出代码。如果未指定退出代码，则默认返回上一个命令的退出代码。</p>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:44:11 GMT+0800">2024-03-12 15:44:11</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/BATCH/">BATCH</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <i class="icon fas fa-tags"></i>&nbsp;
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E6%89%B9%E5%A4%84%E7%90%86/">批处理</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/3801212176.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/2402568381.html">
                            基于Qt的无边框窗体实现
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <p>Qt虽然提供了诸如<code>Qt::FramelessWindowHint</code>之类的属性可以移除窗体的边框，但是移除边框之后，窗体的一些默认行为同时也被移除了，如鼠标拖动改变大小、双击标题栏最大化等，这些行为需要开发者自己来实现。</p>
<p>本文主要介绍实现无边框窗体的几种方案，并在最后分享了作者实现的方案。</p>
<p>笔者认为，一个完美的无边框窗体解决方案需要支持如下功能：</p>
<ol>
<li>支持通过使用鼠标拖拽来改变窗体位置和大小；</li>
<li>支持双击标题栏最大化窗体和还原窗体；</li>
<li>支持<code>Windows Areo Snap</code>特性；</li>
<li>支持系统阴影；</li>
<li>支持跨不同DPI的屏幕拖拽；</li>
<li>适应分辨率和DPI改变；</li>
</ol>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:47:46 GMT+0800">2024-03-12 15:47:46</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/Qt/">Qt</a></li>
                        
                    
                </ul>
            </span>
        

        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/2402568381.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/2737986840.html">
                            基于Hexo搭建静态博客
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <p>Hexo是一个快速、简洁且高效的博客框架，使用Hexo可以快速地生成静态博客框架。在框架生成完成后，可以使用任意文本编辑器语法书写博客。我们可以使用Markdown语法书写博客，Hexo在生成博客时会自动将Markdown解析成Html静态页面。</p>
<blockquote>
<p>Hexo官网：<a class="link" target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/<i class="fas fa-external-link-alt"></i></a><br>Hexo中文文档：<a class="link" target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/<i class="fas fa-external-link-alt"></i></a></p>
</blockquote>
<h1 id="一、玩法说明"><a href="#一、玩法说明" class="headerlink" title="一、玩法说明"></a>一、玩法说明</h1><p>使用Hexo写博客的大致流程如下：</p>
<ol>
<li>生成博客框架</li>
<li>配置博客</li>
<li>选择自己喜欢的主题</li>
<li>配置博客和主题</li>
<li>写文章</li>
<li>生成博客</li>
<li>发布博客到服务器</li>
</ol>
<p>其中，<code>第1~4步</code>为前置操作，只需要执行一次。</p>
<p>Hexo只负责生成静态的HTML文件，不提供服务器。如需对外发布博客，我们还需将HTML文件部署到服务器上，可以选择如下的方式：</p>
<ul>
<li>Github Pages、GitLab Pages，免费，访问速度较慢。</li>
<li>Gitee Pages，收费。</li>
<li>对象存储服务，如阿里云OSS、腾讯云COS、七牛云OSS等。当访问量大时，需搭配CDN使用，避免因数据回源产生巨额流量费用。</li>
<li>自己购买服务器使用Nginx搭建Web服务器。当访问量大时，服务器出口带宽要求较高，此时仍然需要搭配对象存储服务和CDN使用。</li></ul>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:38:57 GMT+0800">2024-03-12 15:38:57</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E7%88%B1%E6%8A%98%E8%85%BE/">爱折腾</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <i class="icon fas fa-tags"></i>&nbsp;
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Hexo/">Hexo</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/2737986840.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/851648499.html">
                            Redis慢日志与BigKey
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <p><img lazyload="" alt="image" data-src="https://blog-static.jiangxueqiao.com/blog/img/redis.jpg"></p>
<h2 id="1-慢日志设置"><a href="#1-慢日志设置" class="headerlink" title="1. 慢日志设置"></a>1. 慢日志设置</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当命令耗时超过5毫秒时，记录慢日志</span></span><br><span class="line">CONFIG SET slowlog-log-slower-than 5000</span><br><span class="line"><span class="comment"># 只保留最近500条慢日志</span></span><br><span class="line">CONFIG SET slowlog-max-len 500</span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-查看慢日志"><a href="#2-查看慢日志" class="headerlink" title="2. 查看慢日志"></a>2. 查看慢日志</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SLOWLOG get 5</span><br><span class="line">1) 1) (<span class="built_in">integer</span>) 32693       <span class="comment"># 慢日志ID</span></span><br><span class="line">   2) (<span class="built_in">integer</span>) 1593763337  <span class="comment"># 执行时间戳</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 5299        <span class="comment"># 执行耗时(微秒)</span></span><br><span class="line">   4) 1) <span class="string">"LRANGE"</span>           <span class="comment"># 具体执行的命令和参数</span></span><br><span class="line">      2) <span class="string">"user_list:2000"</span></span><br><span class="line">      3) <span class="string">"0"</span></span><br><span class="line">      4) <span class="string">"-1"</span></span><br><span class="line">2) 1) (<span class="built_in">integer</span>) 32692</span><br><span class="line">   2) (<span class="built_in">integer</span>) 1593763337</span><br><span class="line">   3) (<span class="built_in">integer</span>) 5044</span><br><span class="line">   4) 1) <span class="string">"GET"</span></span><br><span class="line">      2) <span class="string">"user_info:1000"</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:42:35 GMT+0800">2024-03-12 15:42:35</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%8E%E9%83%A8%E7%BD%B2/">服务端开发与部署</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <i class="icon fas fa-tags"></i>&nbsp;
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Redis/">Redis</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/851648499.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/1404510687.html">
                            使用Watchtower自动更新Docker
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <p><img lazyload="" alt="image" data-src="https://blog-static.jiangxueqiao.com/blog/img/logo-450px.png"></p>
<p>Watch­tower 官网: <a class="link" target="_blank" rel="noopener" href="https://github.com/containrrr/watchtower">https://github.com/containrrr/watchtower<i class="fas fa-external-link-alt"></i></a></p>
<p>Watch­tower 可以用于自动更新 Docker 镜像与容器。Watch­tower 会监视正在运行的容器以及相关的镜像，当检测到 Reg­istry 中的镜像与本地的镜像有差异时，会拉取最新镜像并使用最初部署时相同的参数重新启动相应的容器。</p>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:42:36 GMT+0800">2024-03-12 15:42:36</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%8E%E9%83%A8%E7%BD%B2/">服务端开发与部署</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <i class="icon fas fa-tags"></i>&nbsp;
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Docker/">Docker</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Watch%C2%ADtower/">Watch­tower</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/1404510687.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
            <li class="home-post-item">

                

                <div class="home-post-item-bottom border-box">
                    
                    <h3 class="home-post-title border-box">
                        <a href="/post/44844734.html">
                            Redis常见异常及处理方案
                        </a>
                    </h3>

                    <div class="home-post-content keep-markdown-body">
                        
                            <p><img lazyload="" alt="image" data-src="https://blog-static.jiangxueqiao.com/blog/img/redis.jpg"></p>
<h2 id="1-缓存雪崩"><a href="#1-缓存雪崩" class="headerlink" title="1. 缓存雪崩"></a>1. 缓存雪崩</h2><p>在短时间内本应交由 Redis 处理的大量请求，都发送到了数据库进行处理，从而导致对数据库的压力迅速增大，严重时数据库可能崩溃，从而导致整个系统崩溃，就像雪崩一样，引发连锁效应，所以叫缓存雪崩。</p>
<p>出现上述情况的常见原因主要有以下两点：</p>
<ul>
<li>大量缓存数据同时过期，导致本应请求到缓存的需重新从数据库中获取数据。</li>
<li>redis 本身出现故障，无法处理请求，那自然会再请求到数据库那里。</li>
</ul>
<p><strong>针对大量缓存数据同时过期的情况：</strong></p>
<ul>
<li>实际设置过期时间时，应当尽量避免大量 key 同时过期的场景，如果真的有，那就通过<strong>随机、微调、均匀设置</strong>等方式设置过期时间，从而避免同一时间过期。</li>
<li>添加互斥锁，使得构建缓存的操作不会在同一时间进行。</li>
<li>双 key 策略，主 key 是原始缓存，备 key 为拷贝缓存，主 key 失效时，可以访问备 key，主 key 缓存失效时间设置为短期，备 key 设置为长期。</li>
<li>后台更新缓存策略，采用定时任务或者消息队列的方式进行 redis 缓存更新或移除等。</li>
</ul>
<p><strong>针对 Redis 本身出现故障的情况：</strong></p>
<ul>
<li>在预防层面，可以通过主从节点的方式构建高可用的集群，也就是实现主 Redis 实例挂掉后，能有其他从库快速切换为主库，继续提供服务。</li>
<li>如果事情已经发生了，那就要为了防止数据库被大量的请求搞崩溃，可以采用<strong>服务熔断或者请求限流</strong>的方法。当然服务熔断相对粗暴一些，停止服务直到 redis 服务恢复，请求限流相对温和一些，保证一些请求可以处理，不是一刀切，不过还是看具体业务情况选择合适的处理方案。</li>
</ul>
                        
                    </div>

                    

<div class="post-meta-info-container border-box home">
    <div class="post-meta-info border-box">
        
            <span class="meta-info-item border-box">
                <i class="icon fas fa-history"></i>&nbsp;<span class="home-post-history" data-updated="Tue Mar 12 2024 15:42:35 GMT+0800">2024-03-12 15:42:35</span>
            </span>
        

        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%8E%E9%83%A8%E7%BD%B2/">服务端开发与部署</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <i class="icon fas fa-tags"></i>&nbsp;
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Redis/">Redis</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
        <a class="home-read-more" href="/post/44844734.html">阅读全文&nbsp;<i class="icon fas fa-angle-right"></i></a>
    
</div>

                </div>
            </li>
        
    </ul>
    
    <div class="paginator border-box flex-center">
        <div class="btn-wrap allowed">
            <a class="jump-btn"
               href="/page/4/"
            ><i class="fa-solid fa-chevron-left"></i></a>
        </div>


        <div class="page-number-box border-box flex-center">
            <input class="page-number-input border-box base-color-size"
                   type="number"
                   value="5"
                   min="1"
                   max="21"
            ><span class="delimiter base-color-size">/</span><span class="base-color-size">21</span>
        </div>


        <div class="btn-wrap allowed">
            <a class="jump-btn"
               href="/page/6/"
            ><i class="fa-solid fa-chevron-right"></i></a>
        </div>
    </div>




</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="border-box website-info-box default">
        
            <div class="copyright-info info-item default">
                &copy;&nbsp;<span>2017</span>&nbsp;-&nbsp;2024
                
                    &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">江雪桥</a>
                
            </div>

            
                <div class="icp-info info-item default">
                    <a class=""
                       target="_blank"
                       href="https://beian.miit.gov.cn"
                    >
                        鄂ICP备2020015399号-6
                    </a>
                </div>
            

            
        

        <div class="count-item info-item default">
            

            

            
        </div>
    </div>
</footer>

        </div>
    </div>

    <!-- post tools -->
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box side-tools-show-handle">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
</main>




<!-- common -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local-search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->

    
<script src="/js/lazyload.js"></script>



<div class="">
    

    <!-- category-page -->
    

    <!-- links-page -->
    

    <!-- photos-page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
