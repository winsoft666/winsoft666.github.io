[{"title":"CentOS7æ›´æ–°å›½å†…é˜¿é‡Œæº","url":"/post/1822204079.html","content":"ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\nyum install -y wget\n\n# å¤‡ä»½å¹¶ä¸‹è½½é˜¿é‡Œäº‘çš„baseå’Œepelæºmv -f /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backupwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repomv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backupwget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n\nyum clean allyum makecacheyum -y update\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"]},{"title":"Linux GDBè°ƒè¯•å‘½ä»¤","url":"/post/2824175441.html","content":"å¯åŠ¨ GDBgdb -tuiï¼šåˆ†å±æ˜¾ç¤ºæºä»£ç gdb -qï¼šä¸æ˜¾ç¤ºå¼€å§‹çš„æç¤ºä¿¡æ¯\nå¯ä»¥åœ¨.bashrc ä¸­åŠ å…¥åˆ«åï¼š\nalias gdb=&quot;gdb -q -tui&quot;\n\n\n\nå¼€å§‹è°ƒè¯•æ‰§è¡Œ runï¼ˆéœ€è¦æå‰è®¾ç½®æ–­ç‚¹ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­é‡æ–°è¿è¡Œè°ƒè¯•çš„ç¨‹åºï¼Œrun åå¯ä»¥è·Ÿéšå‘ç»™è¯¥ç¨‹åºçš„ä»»ä½•å‚æ•°ã€‚\nå¸¸ç”¨å‘½ä»¤\n\n\nå‘½ä»¤\nåŠŸèƒ½\n\n\n\nlistï¼ˆç®€å†™ lï¼‰\næ˜¾ç¤ºå½“å‰è¡Œå‰é¢å’Œåé¢çš„ 10 è¡Œä»£ç \n\n\nlist n1 n2\næ˜¾ç¤º n1 åˆ°è¡Œå’Œ n2 è¡Œä¹‹é—´çš„ä»£ç \n\n\nlist main\næ˜¾ç¤º main å‡½æ•°ä»£ç \n\n\ninfo functions regex\nåˆ—å‡ºç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å‡½æ•°åç§°\n\n\ninfo breakpointsï¼ˆç®€å†™ info bï¼‰\næŸ¥çœ‹å½“å‰æ‰€æœ‰çš„æ–­ç‚¹ä¿¡æ¯ï¼ˆæ–­ç‚¹å·ï¼Œæ–­ç‚¹ç±»å‹ï¼Œæ–­ç‚¹ä½ç½®ï¼‰\n\n\nbreak func\nåœ¨å½“å‰æ–‡ä»¶çš„ func å‡½æ•°å¤„è®¾ç½®æ–­ç‚¹\n\n\nbreak fileName:N\nåœ¨æŸæ–‡ä»¶çš„ç¬¬ N è¡Œå¤„è®¾ç½®æ–­ç‚¹ï¼Œå½“å‰æ–‡ä»¶ç¬¬ N è¡Œè®¾ç½®æ–­ç‚¹å¯ä»¥å¿½ç•¥ fileName\n\n\nbreak func(æˆ– fileName:N) if exp\næ¡ä»¶æ–­ç‚¹ï¼Œexp æˆç«‹åˆ™æ–­ç‚¹\n\n\ndelete N\nåˆ é™¤ç¬¬ N å·æ–­ç‚¹\n\n\ndelete\nåˆ é™¤æ‰€æœ‰æ–­ç‚¹\n\n\nclear N\næ¸…é™¤ç¬¬ N è¡Œä¸Šçš„æ–­ç‚¹\n\n\nwatch exp\nexp æˆç«‹ç¨‹åºåœä½\n\n\nnextï¼ˆç®€å†™ nï¼‰\nå•æ­¥æ‰§è¡Œï¼Œé‡åˆ°å‡½æ•°ä¼šè·³è¿‡\n\n\nnext N\næ‰§è¡Œ N æ¬¡å•æ­¥æ‰§è¡Œ\n\n\nstepï¼ˆç®€å†™ s)\nå•æ­¥æ‰§è¡Œï¼Œé‡åˆ°å‡½æ•°ä¼šè¿›å…¥\n\n\nfinish\næ‰§è¡Œå®Œå½“å‰å‡½æ•°ï¼Œè¿”å›åˆ°è°ƒç”¨å®ƒçš„ä½ç½®\n\n\ncontinue\nè¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„\n\n\nuntilï¼ˆç®€å†™ uï¼‰\né¼ æ ‡æ”¾åˆ°ä»£ç è¡Œï¼Œè¿è¡Œåˆ°è¯¥ä»£ç è¡Œåœæ­¢\n\n\njump N\nè·³è½¬åˆ°ç¬¬ N è¡Œå¼€å§‹æ‰§è¡Œï¼Œä¸ä¼šä¸»åŠ¨åœ¨ N è¡Œåœä½\n\n\nrun\né‡æ–°è¿è¡Œè°ƒè¯•çš„ç¨‹åºï¼Œå¯ä»¥å¸¦å‚æ•°\n\n\n[Enter]\nç›´æ¥å›è½¦æ‰§è¡Œä¸Šæ¬¡æ‰§è¡Œçš„å‘½ä»¤\n\n\nprint varï¼ˆç®€å†™ pï¼‰\næŸ¥çœ‹å˜é‡ var çš„å€¼\n\n\nprint &#x2F;x var\næŒ‰ 16 è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡å€¼\n\n\nptype var\næŸ¥çœ‹å˜é‡ var çš„ç»“æ„æˆ–ç±»å‹\n\n\nbacktrach\næŸ¥çœ‹è°ƒç”¨å †æ ˆ\n\n\nå¤šè¿›ç¨‹è°ƒè¯•åœ¨è°ƒè¯•å¤šè¿›ç¨‹ç¨‹åºæ—¶ GDB é»˜è®¤åªä¼šè°ƒè¯•ä¸»è¿›ç¨‹ï¼Œä½†æ˜¯ GDBï¼ˆ&gt;V7.0ï¼‰æ”¯æŒå¯¹å¤šè¿›ç¨‹åˆ†åˆ«æˆ–åŒæ—¶è°ƒè¯•ã€‚æ¢å¥è¯è¯´ï¼ŒGDB å¯ä»¥åŒæ—¶è°ƒè¯•å¤šä¸ªç¨‹åºã€‚åªéœ€è¦è®¾ç½® follow-fork-mode(é»˜è®¤å€¼ï¼šparent)å’Œ detach-on-forkï¼ˆé»˜è®¤å€¼ï¼šonï¼‰å³å¯ã€‚\n\n\n\nfollow-fork-mode\ndetach-on-fork\nè¯´æ˜\n\n\n\nparent\non\nåªè°ƒè¯•ä¸»è¿›ç¨‹ï¼ˆGDB é»˜è®¤ï¼‰\n\n\nchild\non\nåªè°ƒè¯•å­è¿›ç¨‹\n\n\nparent\noff\nåŒæ—¶è°ƒè¯•ä¸¤ä¸ªè¿›ç¨‹ï¼Œgdb è·Ÿä¸»è¿›ç¨‹ï¼Œå­è¿›ç¨‹ block åœ¨ fork ä½ç½®\n\n\nchild\noff\nåŒæ—¶è°ƒè¯•ä¸¤ä¸ªè¿›ç¨‹ï¼Œgdb è·Ÿå­è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹ block åœ¨ fork ä½ç½®\n\n\nè®¾ç½®æ–¹æ³•ï¼šset follow-fork-mode [parent|child] set detach-on-fork [on|off]\n\næŸ¥è¯¢æ­£åœ¨è°ƒè¯•çš„è¿›ç¨‹ï¼šinfo inferiorsåˆ‡æ¢è°ƒè¯•çš„è¿›ç¨‹ï¼š inferior æ·»åŠ æ–°çš„è°ƒè¯•è¿›ç¨‹ï¼š add-inferior [-copies n] [-exec executable] ,å¯ä»¥ç”¨ file executable æ¥åˆ†é…ç»™ inferior å¯æ‰§è¡Œæ–‡ä»¶ã€‚å…¶ä»–ï¼šremove-inferiors infnoï¼Œ detach inferior\n\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"]},{"title":"CentOS7ç”³è¯·å…è´¹LetsEncryptè¯ä¹¦å¹¶ç»­æœŸ","url":"/post/2025031576.html","content":"æœ¬æ–‡ä»‹ç»åœ¨ CentOS7 ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ Certbot ç”³è¯·å…è´¹çš„ Lets Encrypt SSL è¯ä¹¦ï¼Œå¹¶è‡ªåŠ¨ç»­æœŸã€‚\n\n\nç¯å¢ƒå‡†å¤‡å®‰è£… Python3ï¼š\nyum install python3\n\nå®‰è£… Certbot å’Œ Python è™šæ‹Ÿç¯å¢ƒï¼š\n# å‡è®¾certbotå®‰è£…åˆ°/root/certbotmkdir -p /root/certbotcd /root/certbotpython3 -m venv venvsource venv/bin/activate# å‡çº§pippip install --upgrade pip\n\né˜¿é‡Œäº‘æ³¨å†Œå¹¶è§£æçš„åŸŸåï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n# å®‰è£…certbotpip install certbot certbot-nginx certbot-dns-aliyun -i https://pypi.tuna.tsinghua.edu.cn/simple\n\né˜¿é‡Œäº‘å­è´¦å·åˆ›å»ºé˜¿é‡Œäº‘å­è´¦å·ï¼ˆhttps://ram.console.aliyun.comï¼‰ï¼Œå¹¶åˆ†é… AliyunDNSFullAccess æƒé™ã€‚\nä¸ºå­è´¦å·ç”Ÿæˆ access_key å’Œ access_secretã€‚\n\nåˆ›å»º/root/certbot/aliyun.iniæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\ndns_aliyun_access_key = XXXXXdns_aliyun_access_key_secret = XXXXX\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹è¯¥æ–‡ä»¶æƒé™ï¼š\nchmod 600 /root/certbot/aliyun.ini\n\nç”³è¯·è¯ä¹¦ä»¥ç”³è¯· mytools123.com è¯ä¹¦ä¸ºä¾‹ï¼š\n/root/certbot/venv/bin/certbot certonly \\-a dns-aliyun \\--dns-aliyun-credentials /root/certbot/aliyun.ini \\-d mytools123.com \\-d &quot;*.mytools123.com&quot;\n\næ‰§è¡ŒæˆåŠŸåï¼Œç”Ÿæˆçš„è¯ä¹¦ä½äº/etc/letsencrypt/live/mytools123.comç›®å½•\næ‰‹åŠ¨ç»­æœŸLets Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰ 3 ä¸ªæœˆï¼Œåˆ°æœŸåéœ€è¦æ‰‹åŠ¨ç»­æœŸã€‚\n# --dry-run çš„æ˜¯æ¨¡æ‹Ÿæ›´æ–°è¯ä¹¦/root/certbot/venv/bin/certbot renew -a dns-aliyun --dns-aliyun-credentials /root/certbot/aliyun.ini --dry-run# æ­£å¼æ›´æ–°è¯ä¹¦/root/certbot/venv/bin/certbot renew -a dns-aliyun --dns-aliyun-credentials /root/certbot/aliyun.ini\n\n5. è‡ªåŠ¨ç»­æœŸå¯ä»¥åˆ›å»ºå®šæ—¶ç»­æœŸè„šæœ¬ï¼Œæ¥å®ç°è‡ªåŠ¨ç»­æœŸã€‚\nåˆ›å»ºè„šæœ¬æ–‡ä»¶/root/renew_cert.shï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n# æ›´æ–°è¯ä¹¦/root/certbot/venv/bin/certbot renew -a dns-aliyun --dns-aliyun-credentials /root/certbot/aliyun.ini\n\nä¸º sh æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š\nchmod +x /root/renew_cert.sh\n\næ–°å»ºå®šæ—¶ä»»åŠ¡ï¼š\ncrontab -e\n\næ–°å¢å¦‚ä¸‹å†…å®¹ï¼š\n0 0,12 * * * python -c &#x27;import random; import time; time.sleep(random.random() * 3600)&#x27; &amp;&amp; /root/renew_cert.sh\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"]},{"title":"Rediså¸¸è§å¼‚å¸¸åŠå¤„ç†æ–¹æ¡ˆ","url":"/post/44844734.html","content":"Redis æ˜¯é«˜æ€§èƒ½å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œæ”¯æŒå­—ç¬¦ä¸²ã€å“ˆå¸Œç­‰å¤šç»“æ„ï¼Œå…¼å…·ç¼“å­˜ä¸æŒä¹…åŒ–èƒ½åŠ›ï¼Œå¹¿æ³›ç”¨äºå®æ—¶æ•°æ®å¤„ç†åœºæ™¯ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» Redis å¸¸è§çš„å¼‚å¸¸åŠå¤„ç†æ–¹æ¡ˆã€‚\n\n\nç¼“å­˜é›ªå´©åœ¨çŸ­æ—¶é—´å†…æœ¬åº”äº¤ç”± Redis å¤„ç†çš„å¤§é‡è¯·æ±‚ï¼Œéƒ½å‘é€åˆ°äº†æ•°æ®åº“è¿›è¡Œå¤„ç†ï¼Œä»è€Œå¯¼è‡´å¯¹æ•°æ®åº“çš„å‹åŠ›è¿…é€Ÿå¢å¤§ï¼Œä¸¥é‡æ—¶æ•°æ®åº“å¯èƒ½å´©æºƒï¼Œä»è€Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒï¼Œå°±åƒé›ªå´©ä¸€æ ·ï¼Œå¼•å‘è¿é”æ•ˆåº”ï¼Œæ‰€ä»¥å«ç¼“å­˜é›ªå´©ã€‚\nå‡ºç°ä¸Šè¿°æƒ…å†µçš„å¸¸è§åŸå› ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š\n\nå¤§é‡ç¼“å­˜æ•°æ®åŒæ—¶è¿‡æœŸï¼Œå¯¼è‡´æœ¬åº”è¯·æ±‚åˆ°ç¼“å­˜çš„éœ€é‡æ–°ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚\nredis æœ¬èº«å‡ºç°æ•…éšœï¼Œæ— æ³•å¤„ç†è¯·æ±‚ï¼Œé‚£è‡ªç„¶ä¼šå†è¯·æ±‚åˆ°æ•°æ®åº“é‚£é‡Œã€‚\n\né’ˆå¯¹å¤§é‡ç¼“å­˜æ•°æ®åŒæ—¶è¿‡æœŸçš„æƒ…å†µï¼š\n\nå®é™…è®¾ç½®è¿‡æœŸæ—¶é—´æ—¶ï¼Œåº”å½“å°½é‡é¿å…å¤§é‡ key åŒæ—¶è¿‡æœŸçš„åœºæ™¯ï¼Œå¦‚æœçœŸçš„æœ‰ï¼Œé‚£å°±é€šè¿‡éšæœºã€å¾®è°ƒã€å‡åŒ€è®¾ç½®ç­‰æ–¹å¼è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä»è€Œé¿å…åŒä¸€æ—¶é—´è¿‡æœŸã€‚\næ·»åŠ äº’æ–¥é”ï¼Œä½¿å¾—æ„å»ºç¼“å­˜çš„æ“ä½œä¸ä¼šåœ¨åŒä¸€æ—¶é—´è¿›è¡Œã€‚\nåŒ key ç­–ç•¥ï¼Œä¸» key æ˜¯åŸå§‹ç¼“å­˜ï¼Œå¤‡ key ä¸ºæ‹·è´ç¼“å­˜ï¼Œä¸» key å¤±æ•ˆæ—¶ï¼Œå¯ä»¥è®¿é—®å¤‡ keyï¼Œä¸» key ç¼“å­˜å¤±æ•ˆæ—¶é—´è®¾ç½®ä¸ºçŸ­æœŸï¼Œå¤‡ key è®¾ç½®ä¸ºé•¿æœŸã€‚\nåå°æ›´æ–°ç¼“å­˜ç­–ç•¥ï¼Œé‡‡ç”¨å®šæ—¶ä»»åŠ¡æˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹å¼è¿›è¡Œ redis ç¼“å­˜æ›´æ–°æˆ–ç§»é™¤ç­‰ã€‚\n\né’ˆå¯¹ Redis æœ¬èº«å‡ºç°æ•…éšœçš„æƒ…å†µï¼š\n\nåœ¨é¢„é˜²å±‚é¢ï¼Œå¯ä»¥é€šè¿‡ä¸»ä»èŠ‚ç‚¹çš„æ–¹å¼æ„å»ºé«˜å¯ç”¨çš„é›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯å®ç°ä¸» Redis å®ä¾‹æŒ‚æ‰åï¼Œèƒ½æœ‰å…¶ä»–ä»åº“å¿«é€Ÿåˆ‡æ¢ä¸ºä¸»åº“ï¼Œç»§ç»­æä¾›æœåŠ¡ã€‚\nå¦‚æœäº‹æƒ…å·²ç»å‘ç”Ÿäº†ï¼Œé‚£å°±è¦ä¸ºäº†é˜²æ­¢æ•°æ®åº“è¢«å¤§é‡çš„è¯·æ±‚æå´©æºƒï¼Œå¯ä»¥é‡‡ç”¨æœåŠ¡ç†”æ–­æˆ–è€…è¯·æ±‚é™æµçš„æ–¹æ³•ã€‚å½“ç„¶æœåŠ¡ç†”æ–­ç›¸å¯¹ç²—æš´ä¸€äº›ï¼Œåœæ­¢æœåŠ¡ç›´åˆ° redis æœåŠ¡æ¢å¤ï¼Œè¯·æ±‚é™æµç›¸å¯¹æ¸©å’Œä¸€äº›ï¼Œä¿è¯ä¸€äº›è¯·æ±‚å¯ä»¥å¤„ç†ï¼Œä¸æ˜¯ä¸€åˆ€åˆ‡ï¼Œä¸è¿‡è¿˜æ˜¯çœ‹å…·ä½“ä¸šåŠ¡æƒ…å†µé€‰æ‹©åˆé€‚çš„å¤„ç†æ–¹æ¡ˆã€‚\n\nç¼“å­˜å‡»ç©¿ç¼“å­˜å‡»ç©¿ä¸€èˆ¬å‡ºç°åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œæ˜¯å¤§é‡ç”¨æˆ·åŒæ—¶å¹¶å‘è¯·æ±‚ç¼“å­˜ä¸­æ²¡æœ‰ä½†æ•°æ®åº“ä¸­æœ‰çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶è¯» Redis ç¼“å­˜ï¼Œä½†ç¼“å­˜ä¸­æ²¡è¯»åˆ°æ•°æ®ï¼ŒåˆåŒæ—¶å»æ•°æ®åº“å»å–æ•°æ®ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›ç¬é—´å¢å¤§ã€‚\n\nå’Œç¼“å­˜é›ªå´©ä¸åŒçš„æ˜¯ï¼Œç¼“å­˜å‡»ç©¿æŒ‡å¹¶å‘æŸ¥åŒä¸€æ¡æ•°æ®ï¼Œç¼“å­˜é›ªå´©æ˜¯ä¸åŒæ•°æ®éƒ½è¿‡æœŸäº†ï¼Œå¾ˆå¤šæ•°æ®éƒ½æŸ¥ä¸åˆ°ä»è€ŒæŸ¥æ•°æ®åº“ã€‚\nå‡ºç°è¿™ç§æƒ…å†µä¸€èˆ¬å› ä¸ºæŸä¸ªçƒ­ç‚¹æ•°æ®ç¼“å­˜è¿‡æœŸï¼Œç”±äºæ˜¯çƒ­ç‚¹æ•°æ®ï¼Œè¯·æ±‚å¹¶å‘é‡å¤§ï¼Œæ‰€ä»¥è¿‡æœŸçš„æ—¶å€™è¿˜æ˜¯ä¼šæœ‰å¤§é‡è¯·æ±‚åŒæ—¶è¿‡æ¥ï¼Œæ¥ä¸åŠæ›´æ–°ç¼“å­˜å°±å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“äº†ã€‚\né’ˆå¯¹è¿™ç§æƒ…å†µæœ‰ä¸¤ç§å¸¸è§çš„å¤„ç†æ–¹æ¡ˆï¼š\n\nç®€å•ç²—æš´çš„å¯¹çƒ­ç‚¹æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·ä¸ä¼šè¿‡æœŸï¼Œè‡ªç„¶ä¹Ÿå°±ä¸ä¼šå‡ºç°ä¸Šè¿°æƒ…å†µäº†ï¼Œå¦‚æœåç»­æƒ³æ¸…ç†ï¼Œå¯ä»¥é€šè¿‡åå°è¿›è¡Œæ¸…ç†ã€‚\næ·»åŠ äº’æ–¥é”ï¼Œå³å½“è¿‡æœŸä¹‹åï¼Œé™¤äº†è¯·æ±‚è¿‡æ¥çš„ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„è¯·æ±‚å¯ä»¥è·å–åˆ°é”è¯·æ±‚åˆ°æ•°æ®åº“ï¼Œå¹¶å†æ¬¡æ›´æ–°åˆ°ç¼“å­˜ä¸­ï¼Œå…¶ä»–çš„ä¼šè¢«é˜»å¡ä½ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ï¼ŒåŒæ—¶æ–°çš„ç¼“å­˜ä¹Ÿè¢«æ›´æ–°ä¸Šå»äº†ï¼Œåç»­è¯·æ±‚åˆä¼šè¯·æ±‚åˆ°ç¼“å­˜ä¸Šï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ç¼“å­˜å‡»ç©¿äº†ã€‚\n\nç¼“å­˜ç©¿é€ç¼“å­˜ç©¿é€æ˜¯æŒ‡æ•°æ®æ—¢ä¸åœ¨ Redis ä¸­ï¼Œä¹Ÿä¸åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™æ ·å°±å¯¼è‡´æ¯æ¬¡è¯·æ±‚è¿‡æ¥çš„æ—¶å€™ï¼Œåœ¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°å¯¹åº” key ä¹‹åï¼Œæ¯æ¬¡éƒ½è¿˜è¦å»æ•°æ®åº“å†æŸ¥è¯¢ä¸€éï¼Œå‘ç°æ•°æ®åº“ä¹Ÿæ²¡æœ‰ï¼Œç›¸å½“äºè¿›è¡Œäº†ä¸¤æ¬¡æ— ç”¨çš„æŸ¥è¯¢ã€‚\nè¿™æ ·è¯·æ±‚å°±å¯ä»¥ç»•è¿‡ç¼“å­˜ç›´æ¥æŸ¥æ•°æ®åº“ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æœ‰äººæƒ³æ¶æ„æ”»å‡»ç³»ç»Ÿï¼Œå°±å¯ä»¥æ•…æ„ä½¿ç”¨ç©ºå€¼æˆ–è€…å…¶ä»–ä¸å­˜åœ¨çš„å€¼è¿›è¡Œé¢‘ç¹è¯·æ±‚ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹æ•°æ®åº“é€ æˆæ¯”è¾ƒå¤§çš„å‹åŠ›ã€‚\né’ˆå¯¹ç¼“å­˜ç©¿é€ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸‰ç§å¤„ç†æ–¹æ¡ˆï¼š\n\néæ³•è¯·æ±‚çš„é™åˆ¶ï¼Œä¸»è¦æ˜¯æŒ‡å‚æ•°æ ¡éªŒã€é‰´æƒæ ¡éªŒç­‰ï¼Œä»è€Œä¸€å¼€å§‹å°±æŠŠå¤§é‡çš„éæ³•è¯·æ±‚æ‹¦æˆªåœ¨å¤–ï¼Œè¿™åœ¨å®é™…ä¸šåŠ¡å¼€å‘ä¸­æ˜¯å¿…è¦çš„æ‰‹æ®µã€‚\n\nç¼“å­˜ç©ºå€¼æˆ–è€…é»˜è®¤å€¼ï¼Œå¦‚æœä»ç¼“å­˜å–ä¸åˆ°çš„æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰å–åˆ°ï¼Œé‚£æˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼ŒåŒæ—¶è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ã€‚é€šè¿‡è¿™ä¸ªè®¾ç½®çš„é»˜è®¤å€¼å­˜æ”¾åˆ°ç¼“å­˜ï¼Œè¿™æ ·ç¬¬äºŒæ¬¡åˆ°ç¼“å­˜ä¸­è·å–å°±æœ‰å€¼äº†ï¼Œè€Œä¸ä¼šç»§ç»­è®¿é—®æ•°æ®åº“ï¼Œå¯ä»¥é˜²æ­¢æœ‰å¤§é‡æ¶æ„è¯·æ±‚æ˜¯åå¤ç”¨åŒä¸€ä¸ª key è¿›è¡Œæ”»å‡»ã€‚\n\nä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚\né‚£ä»€ä¹ˆæ˜¯å¸ƒéš†è¿‡æ»¤å™¨å‘¢ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯ä»¥å¼•å…¥äº†å¤šä¸ªç›¸äº’ç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼Œä¿è¯åœ¨ç»™å®šçš„ç©ºé—´å’Œè¯¯åˆ¤ç‡ä¸‹ï¼Œå®Œæˆå…ƒç´ åˆ¤é‡ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå­˜åœ¨ hash ç¢°æ’è¿™æ ·ä¸€ç§æƒ…å†µï¼Œé‚£å¦‚æœåªä½¿ç”¨ä¸€ä¸ª hash å‡½æ•°ï¼Œåˆ™ç¢°æ’å†²çªçš„æ¦‚ç‡æ˜æ˜¾ä¼šå˜å¤§ï¼Œé‚£ä¸ºäº†å‡å°‘è¿™ç§å†²çªï¼Œæˆ‘ä»¬å¯ä»¥å¤šå¼•å…¥å‡ ä¸ª hash å‡½æ•°ï¼Œè€Œå¸ƒéš†è¿‡æ»¤å™¨ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯åˆ©ç”¨å¤šä¸ªä¸åŒçš„ hash å‡½æ•°æ¥è§£å†³è¿™æ ·ä¸€ç§å†²çªã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡é«˜ï¼ŒæŸ¥è¯¢æ—¶é—´çŸ­ï¼Œè¿œè¶…å…¶ä»–ç®—æ³•ï¼Œè€Œå®ƒçš„ç¼ºç‚¹å°±æ˜¯ä¼šå­˜åœ¨ä¸€å®šçš„è¯¯è¯†åˆ«ç‡ï¼Œå®ƒä¸èƒ½å®Œå…¨ä¿è¯è¯·æ±‚è¿‡æ¥çš„ key é€šè¿‡å¸ƒéš†è¿‡æ»¤å™¨çš„æ ¡éªŒå°±ä¸€å®šæœ‰è¿™ä¸ªæ•°æ®ï¼Œæ¯•ç«Ÿç†è®ºä¸Šè¿˜æ˜¯ä¼šå­˜åœ¨å†²çªæƒ…å†µï¼Œæ— è®ºæ¦‚ç‡å¤šå°ã€‚ä½†æ˜¯ï¼Œåªè¦æ²¡æœ‰é€šè¿‡å¸ƒéš†è¿‡æ»¤å™¨çš„æ ¡éªŒï¼Œé‚£ä¹ˆè¿™ä¸ª key å°±ä¸€å®šä¸å­˜åœ¨ï¼Œåªè¦åˆ©ç”¨è¿™ä¸€ç‚¹å…¶å®å°±å·²ç»å¯ä»¥è¿‡æ»¤æ‰å¤§éƒ¨åˆ†ä¸å­˜åœ¨çš„ key çš„è¯·æ±‚äº†ï¼Œåœ¨æ­£å¸¸åœºæ™¯ä¸‹å·²ç„¶è¶³å¤Ÿäº†ã€‚\n\n\nç¼“å­˜é¢„çƒ­ç¼“å­˜é¢„çƒ­å°±æ˜¯ç³»ç»Ÿä¸Šçº¿å‰åï¼Œå°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿä¸­å»ï¼Œè€Œä¸ä¾èµ–ç”¨æˆ·è§¦å‘è¯·æ±‚æ—¶æ‰åŠ å…¥ã€‚è¿™æ ·å°±å¯ä»¥é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“å†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ã€‚ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ï¼Œè¿™æ ·å¯ä»¥é¿å…é‚£ä¹ˆç³»ç»Ÿä¸Šçº¿åˆæœŸï¼Œå¯¹äºé«˜å¹¶å‘çš„æµé‡ï¼Œéƒ½ä¼šè®¿é—®åˆ°æ•°æ®åº“ä¸­ï¼Œå¯¹æ•°æ®åº“é€ æˆæµé‡çš„å‹åŠ›ã€‚\næ ¹æ®æ•°æ®ä¸åŒé‡çº§ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§åšæ³•ï¼š\n\næ•°æ®é‡ä¸å¤§ï¼šé¡¹ç›®å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨è¿›è¡ŒåŠ è½½ã€‚\næ•°æ®é‡è¾ƒå¤§ï¼šåå°å®šæ—¶åˆ·æ–°ç¼“å­˜ã€‚\næ•°æ®é‡æå¤§ï¼šåªé’ˆå¯¹çƒ­ç‚¹æ•°æ®è¿›è¡Œé¢„åŠ è½½ç¼“å­˜æ“ä½œã€‚\n\nç¼“å­˜é™çº§å½“ç¼“å­˜å¤±æ•ˆæˆ–ç¼“å­˜æœåŠ¡å‡ºç°æ•…éšœæ—¶ï¼Œæˆ‘ä»¬ä¸ºäº†é˜²æ­¢æ•°æ®åº“å‘ç”Ÿé›ªå´©è€Œä¸å»è®¿é—®æ•°æ®åº“ï¼Œä½†æ­¤æ—¶ä»ç„¶æƒ³è¦ä¿è¯æœåŠ¡çš„ä¸»ä½“åŠŸèƒ½æ˜¯åŸºæœ¬å¯ç”¨çš„ã€‚å› æ­¤å¯¹äºä¸é‡è¦çš„ç¼“å­˜æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–æœåŠ¡é™çº§ç­–ç•¥ã€‚\nä¸€èˆ¬åšæ³•æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š\n\nç›´æ¥è®¿é—®å†…å­˜éƒ¨åˆ†çš„æ•°æ®ç¼“å­˜ã€‚\nç›´æ¥è¿”å›ç³»ç»Ÿè®¾ç½®çš„é»˜è®¤å€¼ã€‚\n\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"],"tags":["Redis"]},{"title":"ä¸€ä¸ªDockerfileåŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹","url":"/post/2409581593.html","content":"Docker å®¹å™¨çš„å“²å­¦æ˜¯ä¸€ä¸ª Docker å®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚\nä½†å¦‚æœéœ€è¦åœ¨ä¸€ä¸ªå®¹å™¨å†…è¿è¡Œå¤šä¸ªè¿›ç¨‹æˆ–æœåŠ¡ï¼Œå¯ä»¥é‡‡å–å°†å…¥å£æ–‡ä»¶è®¾ç½®ä¸º Bash Shell è„šæœ¬ï¼Œåœ¨è„šæœ¬å†…è¿è¡Œå¤šä¸ªç¨‹åºçš„æ–¹å¼ã€‚\n\n\n#!/bin/bash# start 1start1  &gt; /var/log/start1.log 2&gt;&amp;1 &amp;# start 2start2 &gt; /var/log/start2.log 2&gt;&amp;1 &amp;# just keep this script runningwhile [[ true ]]; do    sleep 1done\n\nåœ¨ Dockerfile çš„å…¥å£ä¸­è¿è¡Œ run.shï¼š\nFROM ubuntu:latest...COPY ./run.sh /ENTRYPOINT  [&quot;run.sh&quot;]\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"],"tags":["Docker"]},{"title":"Electronåˆ¤æ–­ç¨‹åºè¿è¡Œç¯å¢ƒ","url":"/post/612028078.html","content":"Electron å®˜æ–¹æœªæä¾›åˆ¤æ–­å½“å‰ç¨‹åºè¿è¡Œç¯å¢ƒçš„æ–¹æ³•ã€‚æˆ‘è®¤ä¸ºå®˜æ–¹ä¸æä¾›è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯è¯´çš„è¿‡å»çš„ï¼Œå› ä¸º Electron æ‰®æ¼”çš„æ˜¯åº”ç”¨å¼€å‘æ¡†æ¶çš„è§’è‰²ï¼Œè€Œè¿è¡Œç¯å¢ƒè¿™äº›ä¸œè¥¿æœ¬èº«å±äºå¼€å‘è€…è‡ªå·±çš„äº‹æƒ…ï¼Œæœ‰çš„å¼€å‘è€…å–œæ¬¢å®šä¹‰â€œå¼€å‘ã€æµ‹è¯•ã€é¢„ç”Ÿäº§ã€ç”Ÿæˆâ€å››ä¸ªç¯å¢ƒï¼Œè€Œæœ‰çš„å¼€å‘è€…å´åªå®šä¹‰äº†ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒï¼Œè¿™äº›éƒ½ä¸æ˜¯æ¡†æ¶éœ€è¦å‚ä¸çš„äº‹æƒ…ã€‚\n\n\næœ¬æ–‡æä¾›äº†å‡ ä¸ªå®šä¹‰å’Œåˆ¤æ–­ç¨‹åºè¿è¡Œç¯å¢ƒçš„æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰å–ç›¸åº”çš„æ–¹æ³•ã€‚\napp.isPackagedElectron å®˜æ–¹æä¾›äº†app.isPackagedå±æ€§æ¥åˆ¤æ–­åº”ç”¨æ˜¯å¦æ˜¯ç»è¿‡æ‰“åŒ…çš„ã€‚\napp.isPackaged çš„åŸç†æ˜¯åˆ¤æ–­è¿›ç¨‹åç§°æ˜¯å¦ä¸º electron æˆ– electron.exeï¼Œå¦‚æœåç§°åŒ¹é…ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰åˆ™æ˜¯æ‰“åŒ…ç¯å¢ƒã€‚\né€šå¸¸å°†æ‰“åŒ…ç¯å¢ƒå½“ä½œç”Ÿäº§ç¯å¢ƒï¼Œä½†è¿™å¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„è§„åˆ™ã€‚\næˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±é€šè¿‡ä»£ç å®ç°åˆ¤æ–­ç¨‹åºè¿›ç¨‹åï¼š\nfunction isProduction() &#123;  if (!process.versions.electron) &#123;    // Node.js process    return false;  &#125;  if (process.platform === &quot;darwin&quot;) &#123;    return !/\\/Electron\\.app\\//.test(process.execPath);  &#125;  if (process.platform === &quot;win32&quot;) &#123;    return !/\\\\electron\\.exe$/.test(process.execPath);  &#125;  if (process.platform === &quot;linux&quot;) &#123;    return !/\\/electron$/.test(process.execPath);  &#125;&#125;\n\næ ¹æ®å‘½ä»¤è¡Œå‚æ•°åˆ¤æ–­é€šè¿‡åœ¨ä¸åŒç¯å¢ƒä¸­ä¸ºç¨‹åºæ·»åŠ ä¸åŒçš„å¯åŠ¨å‚æ•°ï¼Œç„¶ååœ¨è¿è¡Œæ—¶æ ¡éªŒè¿™äº›å‘½ä»¤è¡Œå‚æ•°æ¥åˆ¤æ–­å½“å‰çš„è¿è¡Œç¯å¢ƒã€‚\nåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸æ·»åŠ ä»»ä½•å¯åŠ¨å‚æ•°ï¼Œå› æ­¤æ²¡æœ‰å¯åŠ¨å‚æ•°çš„å°±ä¸ºç”Ÿäº§ç¯å¢ƒï¼›å¦‚æœæœ‰å¯åŠ¨å‚æ•°ï¼Œå†æ ¹æ®å‚æ•°åˆ¤æ–­æ˜¯å¦ä¸ºæµ‹è¯•æˆ–é¢„å‘å¸ƒç­‰ç¯å¢ƒã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ä¸åŒçš„ç¯å¢ƒæ·»åŠ å¯åŠ¨å‚æ•°çš„æ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒä¸éœ€è¦æ‰“åŒ…ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼æ·»åŠ ï¼š\nelectron . --env=development\n\nè€Œéå¼€å‘ç¯å¢ƒå¾€å¾€éœ€è¦æ‰“åŒ…ï¼Œéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æ‰‹åŠ¨æ·»åŠ ï¼Œå¦‚ï¼š\nDemo.exe --env=test\n\nåˆ¤æ–­æ–¹æ³•å¦‚ä¸‹ï¼š\nfunction isProduction() &#123;  if (!process.versions.electron) &#123;    // Node.js process    return false;  &#125;  for (const v of process.argv) &#123;    if (      v === &quot;--env=development&quot; || // å¼€å‘ç¯å¢ƒ      v === &quot;--env=test&quot; // æµ‹è¯•ç¯å¢ƒ    ) &#123;      return false;    &#125;  &#125;  return true;&#125;\n\né€šè¿‡ç¯å¢ƒå˜é‡åˆ¤æ–­è¿™ä¸ªåˆ¤æ–­æ–¹æ³•ä¸æ–¹æ³• 2 ç±»ä¼¼ï¼Œä¸åšè¿‡å¤šä»‹ç»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒWindows å’Œ Unix ä¸Šæ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹å¼ç•¥æœ‰ä¸åŒã€‚\nWindows:\nset APP_ENV=dev &amp;&amp; electron .\n\nUnix:\nAPP_ENV=dev electron .\n\nåœ¨ Electron ä¸­é€šè¿‡process.env.APP_ENVæ–¹å¼å°±å¯ä»¥è·å–åˆ°APP_ENVç¯å¢ƒå˜é‡ã€‚\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"],"tags":["Electron"]},{"title":"NPMå’ŒYarnè®¾ç½®å›½å†…æº","url":"/post/908211703.html","content":"\næ·˜å®é•œåƒæºçš„åŸŸåå·²ç”±ä¹‹å‰çš„npm.taobao.orgå˜æ›´ä¸ºnpmmirror.comï¼Œè§é˜¿é‡Œäº‘å…¬å‘Šã€‚ç›®å‰è€åŸŸåï¼ˆnpm.taobao.orgï¼‰çš„è¯ä¹¦å·²è¿‡æœŸï¼Œè‹¥ç»§ç»­ä½¿ç”¨è€åŸŸåä¼šå‡ºç°certificate has expiredçš„é”™è¯¯æç¤ºã€‚\n\nYarn è®¾ç½®æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„é•œåƒæºï¼š\nyarn config get registry\n\n\n\nå…¨å±€ä¿®æ”¹ï¼š\nyarn config set registry https://registry.npmmirror.comyarn config set disturl https://npmmirror.com/mirrors/nodeyarn config set sass_binary_site https://npmmirror.com/mirrors/node-sassyarn config set puppeteer_download_host https://npmmirror.com/mirrorsyarn config set chromedriver_cdnurl https://npmmirror.com/mirrors/chromedriveryarn config set operadriver_cdnurl https://npmmirror.com/mirrors/operadriveryarn config set phantomjs_cdnurl https://npmmirror.com/mirrors/phantomjsyarn config set selenium_cdnurl https://npmmirror.com/mirrors/seleniumyarn config set node_inspector_cdnurl https://npmmirror.com/mirrors/node-inspectoryarn config set sentrycli_cdnurl https://npmmirror.com/mirrors/sentry-cliyarn config set electron_mirror https://npmmirror.com/mirrors/electron/yarn cache clean\n\nä¸´æ—¶ä¿®æ”¹æºï¼š\nyarn save è½¯ä»¶å --registry https://registry.npmmirror.com/\n\n\nå¦‚éœ€è¿˜åŸåˆ°é»˜è®¤æºï¼Œå°†ä¸Šè¿°å‘½ä»¤ä¸­çš„ npmmirror.com æ›¿æ¢ä¸º yarnpkg.comã€‚\n\nNPM è®¾ç½®å…¨å±€è®¾ç½®ï¼š\nnpm set registry https://registry.npmmirror.comnpm cache clean --force\n\n\nå¦‚éœ€è¿˜åŸåˆ°é»˜è®¤æºï¼Œå°†ä¸Šè¿°å‘½ä»¤ä¸­çš„ npmmirror.com æ›¿æ¢ä¸º npmjs.orgã€‚\n\nNPM v8 ç‰ˆæœ¬ä¹‹å‰æ”¯æŒçš„ä¸€äº›é…ç½®å‚æ•°ï¼Œå¦‚ electron_mirrorã€disturl ç­‰ï¼Œåœ¨ v9 åŠåé¢çš„ç‰ˆæœ¬éƒ½ä¸å†æ”¯æŒï¼Œå¯ä»¥åœ¨ https://docs.npmjs.com/cli/v11/using-npm/config#config-settings é¡µé¢æŸ¥çœ‹ npm æ”¯æŒçš„æ‰€æœ‰é…ç½®å‚æ•°ã€‚\nå…¶ä»–å¸¸ç”¨å‘½ä»¤ï¼š\n# æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„é•œåƒæºnpm get registry# è¾“å‡ºå½“å‰é…ç½®npm config list# è¾“å‡ºconfigå‘½ä»¤çš„å¸®åŠ©npm help config\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"]},{"title":"ä½¿ç”¨Watchtowerè‡ªåŠ¨æ›´æ–°Docker","url":"/post/1404510687.html","content":"\nWatchÂ­tower å®˜ç½‘: https://github.com/containrrr/watchtower\nWatchÂ­tower å¯ä»¥ç”¨äºè‡ªåŠ¨æ›´æ–° Docker é•œåƒä¸å®¹å™¨ã€‚WatchÂ­tower ä¼šç›‘è§†æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä»¥åŠç›¸å…³çš„é•œåƒï¼Œå½“æ£€æµ‹åˆ° RegÂ­istry ä¸­çš„é•œåƒä¸æœ¬åœ°çš„é•œåƒæœ‰å·®å¼‚æ—¶ï¼Œä¼šæ‹‰å–æœ€æ–°é•œåƒå¹¶ä½¿ç”¨æœ€åˆéƒ¨ç½²æ—¶ç›¸åŒçš„å‚æ•°é‡æ–°å¯åŠ¨ç›¸åº”çš„å®¹å™¨ã€‚\n\n\nå®‰è£…è¿è¡ŒWatchÂ­tower æœ¬èº«è¢«æ‰“åŒ…ä¸º Docker é•œåƒï¼Œå› æ­¤å¯ä»¥åƒè¿è¡Œå…¶ä»–å®¹å™¨ä¸€æ ·è¿è¡Œå®ƒï¼š\ndocker run -d \\    --name watchtower \\    --restart unless-stopped \\    -v /var/run/docker.sock:/var/run/docker.sock \\    containrrr/watchtower \\    --cleanup \\    --interval 60\n\nè¿è¡Œ WatchÂ­tower åï¼Œæ‰€æœ‰å®¹å™¨éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä¹ŸåŒ…æ‹¬ WatchÂ­tower æœ¬èº«ã€‚\né»˜è®¤æƒ…å†µä¸‹ WatchÂ­tower æ¯ 5 åˆ†é’Ÿä¼šè½®è¯¢ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨--intervalå‚æ•°æŒ‡å®šï¼ˆå•ä½ç§’ï¼‰ã€‚\næŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼š\ndocker run --rm containrrr/watchtower -h\n\næ‰‹åŠ¨æ›´æ–°å‰é¢çš„ä½¿ç”¨æ–¹å¼æ˜¯è®© WatchÂ­tower ä»¥ detachedï¼ˆåå°ï¼‰æ¨¡å¼åœ¨è¿è¡Œå¹¶è‡ªåŠ¨æ›´æ–°å®¹å™¨ï¼Œè€Œ WatchÂ­tower ä¹Ÿæ”¯æŒä»¥ foregroundï¼ˆå‰å°ï¼‰æ¨¡å¼æ¥ä½¿ç”¨ï¼Œå³è¿è¡Œä¸€æ¬¡é€€å‡ºå¹¶åˆ æ‰å®¹å™¨ï¼Œæ¥å®ç°æ‰‹åŠ¨æ›´æ–°å®¹å™¨ã€‚è¿™å¯¹äºå¶å°”æ›´æ–°ä¸€æ¬¡é‚£äº›ä¸åœ¨è‡ªåŠ¨æ›´æ–°åˆ—è¡¨ä¸­çš„å®¹å™¨éå¸¸æœ‰ç”¨ã€‚\nå¯¹äº foreground æ¨¡å¼ï¼Œéœ€è¦åŠ ä¸Š --run-once ï¼ˆ--run-once å¯ä»¥ç®€å†™ä¸º -Rï¼‰è¿™ä¸ªä¸“ç”¨çš„é€‰é¡¹ã€‚ä¸‹é¢çš„ä¾‹å­ Docker ä¼šè¿è¡Œä¸€æ¬¡ WatchÂ­tower å¹¶æ£€æŸ¥ aria2-pro å®¹å™¨çš„åŸºç¡€é•œåƒæ›´æ–°ï¼Œæœ€ååˆ æ‰æœ¬æ¬¡è¿è¡Œåˆ›å»ºçš„ WatchÂ­tower å®¹å™¨ã€‚\ndocker run --rm \\    -v /var/run/docker.sock:/var/run/docker.sock \\    containrrr/watchtower --cleanup \\    --run-once \\    aria2-pro\n\næ›´æ–°ç§æœ‰é•œåƒå¦‚æœæ˜¯ä»ç§æœ‰ Docker ä»“åº“è·å–é•œåƒï¼Œåˆ™éœ€æä¾›èº«ä»½éªŒè¯å‡­æ®å’Œç¯å¢ƒå˜é‡ REPO_USER å’Œ REPO_PASSï¼Œæˆ–è€…é€šè¿‡å°†å®¿ä¸»æœºçš„ docker é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨çš„æ ¹ç›®å½•ä¸‹ã€‚\né€šè¿‡æ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼š\ndocker run -d \\   --name watchtower \\   -e REPO_USER=username \\   -e REPO_PASS=password \\   -v /var/run/docker.sock:/var/run/docker.sock \\       containrrr/watchtower container_to_watch --debug\n\né€šè¿‡æŒ‚è½½å®¿ä¸»æœº docker é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼š\ndocker run -d \\    --name watchtower \\    -v /home/&lt;user&gt;/.docker/config.json:/config.json \\    -v /var/run/docker.sock:/var/run/docker.sock \\        containrrr/watchtower container_to_watch --debug\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"],"tags":["Docker"]},{"title":"Nodeæ’ä»¶å¼€å‘(2)-è°ƒç”¨æ–¹å¼","url":"/post/235943795.html","content":"æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•åœ¨ Node-API ä¸­å®ç°ä¸åŒç±»å‹çš„æ¥å£ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ç§ç±»å‹ï¼š\n\nåŒæ­¥è°ƒç”¨\nåŸºäº Napi::AsyncWorker çš„å¼‚æ­¥è°ƒç”¨ï¼Œé€šè¿‡å›è°ƒå‡½æ•°è¿”å›\nå¼‚æ­¥è°ƒç”¨ï¼Œè¿”å› Promise\nåŸºäº Napi::ThreadSafeFunction çš„å¼‚æ­¥è°ƒç”¨ï¼Œé€šè¿‡å›è°ƒå‡½æ•°è¿”å›\n\n\n\nåŒæ­¥è°ƒç”¨åŒæ­¥è°ƒç”¨ä¼šé˜»å¡ Node.js çš„ä¸»è¿›ç¨‹ï¼Œé€‚åˆæ¥å£èƒ½å¿«é€Ÿè¿”å›çš„åœºæ™¯ã€‚\nNapi::Number Add(const Napi::CallbackInfo&amp; info) &#123;    Napi::Env env = info.Env();    if (info.Length() != 2)        throw Napi::TypeError::New(env, &quot;Wrong number of arguments&quot;);    if (!info[0].IsNumber() || !info[1].IsNumber())        throw Napi::TypeError::New(env, &quot;Wrong arguments&quot;);    const int ret = info[0].ToNumber().Int32Value() + info[1].ToNumber().Int32Value();    return Napi::Number::New(env, ret);&#125;\n\nå¼‚æ­¥å›è°ƒåœ¨ Node-API ä¸­ï¼Œä¸èƒ½åœ¨ç³»ç»Ÿå­çº¿ç¨‹ä¸­ç›´æ¥è°ƒç”¨ JavaScript å‡½æ•°ï¼Œä½†å¯ä»¥å€ŸåŠ© Napi::AsyncWorker ç±»æ¥å®ç°å¼‚æ­¥æ‰§è¡Œä»»åŠ¡ï¼Œåœ¨ Napi::AsyncWorker ç±»çš„ Execute è™šå‡½æ•°ä¸­æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡ï¼Œå¹¶åœ¨å…¶ OnOK æˆ– OnError è™šå‡½æ•°ä¸­æ‰§è¡Œ JavaScript å›è°ƒå‡½æ•°ï¼Œé€šè¿‡å›è°ƒçš„æ–¹å¼æ¥è¿”å›ç»“æœåˆ° JavaScriptã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¦‚æœåœ¨ Execute å‡½æ•°ä¸­éœ€è¦è¿”å›é”™è¯¯ï¼Œå¯ä»¥è°ƒç”¨ SetError å‡½æ•°æ¥è®¾ç½®é”™è¯¯ä¿¡æ¯ï¼Œè°ƒç”¨ SetError å‡½æ•°åï¼ŒOnError å‡½æ•°å°±ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSetError å‡½æ•°ä¸ä¼šç»ˆæ­¢ Execute å‡½æ•°çš„æ‰§è¡Œæµç¨‹ï¼Œé€šå¸¸ä¼šåœ¨ SetError è°ƒç”¨ä¹‹åç´§æ¥ return è¯­å¥ã€‚\nå½“ Execute å‡½æ•°æ‰§è¡Œå®Œä»¥åï¼Œå¦‚æœæœŸé—´æ²¡æœ‰è°ƒç”¨ SetError å‡½æ•°ï¼Œåˆ™ OnOK å‡½æ•°ä¹Ÿä¼šè¢«è‡ªåŠ¨æ‰§è¡Œã€‚\næˆ‘ä»¬éœ€è¦åœ¨ OnOK æˆ– OnError ä¸­è°ƒç”¨å›è°ƒå‡½æ•°æ¥å°†ç»“æœè¿”å›åˆ° JavaScriptï¼Œé€šå¸¸ä¿æŒä¸ Node.js å®˜æ–¹æ¨¡å—çš„æ¥å£ä¸€æ ·ï¼ˆå½“ä¸æ˜¯å¼ºåˆ¶çš„ï¼‰ï¼Œå›è°ƒå‡½æ•°æœ‰ 2 ä¸ªå‚æ•° callback(err, result)ï¼Œå¤±è´¥æ—¶ err ä¸ä¸º Nullï¼ŒæˆåŠŸæ—¶ err ä¸º Nullã€‚\nä¸‹é¢ç¤ºä¾‹ä»¥å¼‚æ­¥æ–¹å¼è®¡ç®—æ­£æ•´æ•° N çš„ 10 æ¬¡æ–¹ä¸ºä¾‹ï¼Œé€šè¿‡å›è°ƒæ–¹å¼è¿”å›è®¡ç®—ç»“æœã€‚\nclass Power10AsyncWorker : public Napi::AsyncWorker &#123;   public:    Power10AsyncWorker(const Napi::Function&amp; callback, int32_t n) :        Napi::AsyncWorker(callback),        n_(n) &#123;    &#125;    void Execute() override &#123;        if (n_ &lt;= 0) &#123;            // Nå°äº0åˆ™è¿”å›é”™è¯¯            SetError(&quot;N must larger than 0&quot;);            return;        &#125;        result_ = 1;        for (int i = 0; i &lt; 10; i++) &#123;            // ç”±äºCPUè®¡ç®—10æ¬¡æ–¹å¤ªå¿«äº†ï¼Œè¿™é‡Œæ¯æ¬¡æš‚åœ10msï¼Œæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ            std::this_thread::sleep_for(std::chrono::milliseconds(10));            result_ *= n_;        &#125;    &#125;    void OnOK() override &#123;        Callback().Call(&#123;Env().Null(), Napi::Value::From(Env(), result_)&#125;);    &#125;    void OnError(const Napi::Error&amp; e) override &#123;        Callback().Call(&#123;e.Value(), Env().Null()&#125;);    &#125;   private:    int32_t n_ = 0;    int32_t result_ = 0; // å­˜å‚¨ç»“æœ&#125;;\n\nå®šä¹‰æ¥å£GetPower10ï¼Œæ”¯æŒ 2 ä¸ªå‚æ•°ï¼šæ•´æ•° N å’Œå›è°ƒå‡½æ•°ã€‚\nvoid GetPower10(const Napi::CallbackInfo&amp; info) &#123;    Napi::Env env = info.Env();    if (info.Length() != 2)        throw Napi::TypeError::New(env, &quot;Wrong number of arguments&quot;);    if (!info[0].IsNumber() || !info[1].IsFunction())        throw Napi::TypeError::New(env, &quot;Wrong arguments&quot;);    int32_t n = info[0].ToNumber().Int32Value();    Napi::Function callback = info[1].As&lt;Napi::Function&gt;();    (new Power10AsyncWorker(callback, n))-&gt;Queue();&#125;\n\nè¿”å› Promise å¯¹è±¡ä¸‹é¢ç¤ºä¾‹ä»¥å¼‚æ­¥è®¡ç®—æ­£æ•´æ•° N çš„ 20 æ¬¡æ–¹ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•è¿”å› Promise å¯¹è±¡ã€‚å½“ N å°äº 0 æ—¶ï¼ŒPromise è®¾ç½®ä¸º reject çŠ¶æ€ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nclass Power20AsyncWorker : public Napi::AsyncWorker &#123;   public:    Power20AsyncWorker(const Napi::Env&amp; env, const Napi::Promise::Deferred&amp; deferred, int32_t n) :        Napi::AsyncWorker(env),        deferred_(deferred),        n_(n) &#123;    &#125;    void Execute() override &#123;        if (n_ &lt;= 0) &#123;            // å°äº0æ—¶è¿”å›é”™è¯¯            SetError(&quot;N must larger than 0&quot;);            return;        &#125;        result_ = 1;        for (int i = 0; i &lt; 20; i++) &#123;            // ç”±äºCPUè®¡ç®—20æ¬¡æ–¹å¤ªå¿«äº†ï¼Œæ¯æ¬¡æš‚åœ10msï¼Œæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ            std::this_thread::sleep_for(std::chrono::milliseconds(10));            result_ *= n_;        &#125;    &#125;    void OnOK() override &#123;        deferred_.Resolve(Napi::Number::New(Env(), result_));    &#125;    void OnError(const Napi::Error&amp; e) override &#123;        deferred_.Reject(e.Value());    &#125;   private:    Napi::Promise::Deferred deferred_;    int32_t n_ = 0;    int32_t result_ = 0; // å­˜å‚¨ç»“æœ&#125;;\n\nNapi::Value GetPower20(const Napi::CallbackInfo&amp; info) &#123;    Napi::Env env = info.Env();    if (info.Length() != 1)        throw Napi::TypeError::New(env, &quot;Wrong number of arguments&quot;);    if (!info[0].IsNumber())        throw Napi::TypeError::New(env, &quot;Wrong arguments&quot;);    int32_t n = info[0].ToNumber().Int32Value();    Napi::Function callback = info[1].As&lt;Napi::Function&gt;();    Napi::Promise::Deferred deferred = Napi::Promise::Deferred::New(env);    (new Power20AsyncWorker(env, deferred, n))-&gt;Queue();    return deferred.Promise();&#125;\n\nThreadSafeFunctionå‰é¢çš„ç¤ºä¾‹éƒ½æ²¡æœ‰è‡ªå·±å¯åŠ¨ç³»ç»Ÿå­çº¿ç¨‹ï¼Œè€Œæ˜¯é€šè¿‡ Napi::AsyncWorker å®ç°çš„å¼‚æ­¥è°ƒç”¨ï¼Œåœ¨æœ¬ç¤ºä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨ C++ 11 çš„ std::thread å¼€å¯ç³»ç»Ÿå­çº¿ç¨‹ï¼Œåœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡å¹¶è°ƒç”¨å›è°ƒå‡½æ•°è¿”å›ç»“æœã€‚\nè¦å®ç°åœ¨ç³»ç»Ÿå­çº¿ç¨‹ä¸­è°ƒç”¨ JavaScript å›è°ƒå‡½æ•°ï¼Œéœ€è¦å€ŸåŠ©äº Napi::ThreadSafeFunction ç±»æ¥å®ç°ã€‚\nä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†åœ¨ç³»ç»Ÿå­çº¿ç¨‹ä¸­è®¡ç®—æ­£æ•´æ•° N çš„ 30 æ¬¡æ–¹ï¼Œå¹¶é€šè¿‡å›è°ƒæ–¹å¼è¿”å›è®¡ç®—ç»“æœã€‚\nvoid GetPower30(const Napi::CallbackInfo&amp; info) &#123;    Napi::Env env = info.Env();    if (info.Length() != 2)        throw Napi::TypeError::New(env, &quot;Wrong number of arguments&quot;);    if (!info[0].IsNumber() || !info[1].IsFunction())        throw Napi::TypeError::New(env, &quot;Wrong arguments&quot;);    int32_t n = info[0].ToNumber().Int32Value();    Napi::Function callback = info[1].As&lt;Napi::Function&gt;();    std::thread* nativeThread = nullptr;    Napi::ThreadSafeFunction tsfn = Napi::ThreadSafeFunction::New(        env,        callback,        &quot;Resource Name&quot;,             // Name        0,                           // Unlimited queue        1,                           // Only one thread will use this initially        [nativeThread](Napi::Env) &#123;  // Finalizer used to clean threads up            if (nativeThread &amp;&amp; nativeThread-&gt;joinable()) &#123;                nativeThread-&gt;join();            &#125;        &#125;);    nativeThread = new std::thread([n, tsfn]() &#123;        struct CallParam &#123;            std::string error;            int32_t result = 0;        &#125;;        CallParam* param = new CallParam();        if (n &gt; 0) &#123;            param-&gt;result = 1;            for (int i = 0; i &lt; 30; i++) &#123;                param-&gt;result *= n;            &#125;        &#125;        else &#123;            param-&gt;error = &quot;N must larger than 0&quot;;        &#125;        auto callback = [](Napi::Env env, Napi::Function jsCallback, CallParam* param) &#123;            if (jsCallback &amp;&amp; param) &#123;                try &#123;                    if (param-&gt;error.empty()) &#123;                        jsCallback.Call(&#123;env.Null(), Napi::Number::New(env, param-&gt;result)&#125;);                    &#125;                    else &#123;                        Napi::Error err = Napi::Error::New(env, param-&gt;error);                        jsCallback.Call(&#123;err.Value(), env.Null()&#125;);                    &#125;                &#125; catch (std::exception&amp; e) &#123;#if (defined _WIN32 || defined WIN32)                    OutputDebugStringA(e.what());#endif                &#125;            &#125;            if (param) &#123;                delete param;            &#125;        &#125;;        napi_status status = tsfn.BlockingCall(param, callback);        if (status != napi_ok) &#123;            // TODO How to handle error        &#125;        tsfn.Release();    &#125;);&#125;\n\nğŸ“Œé™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"],"tags":["Electron"]},{"title":"Redisæ…¢æ—¥å¿—ä¸BigKey","url":"/post/851648499.html","content":"æ…¢æ—¥å¿—è®¾ç½®# å½“å‘½ä»¤è€—æ—¶è¶…è¿‡5æ¯«ç§’æ—¶ï¼Œè®°å½•æ…¢æ—¥å¿—CONFIG SET slowlog-log-slower-than 5000# åªä¿ç•™æœ€è¿‘500æ¡æ…¢æ—¥å¿—CONFIG SET slowlog-max-len 500\n\n\n\næŸ¥çœ‹æ…¢æ—¥å¿—127.0.0.1:6379&gt; SLOWLOG get 51) 1) (integer) 32693       # æ…¢æ—¥å¿—ID   2) (integer) 1593763337  # æ‰§è¡Œæ—¶é—´æˆ³   3) (integer) 5299        # æ‰§è¡Œè€—æ—¶(å¾®ç§’)   4) 1) &quot;LRANGE&quot;           # å…·ä½“æ‰§è¡Œçš„å‘½ä»¤å’Œå‚æ•°      2) &quot;user_list:2000&quot;      3) &quot;0&quot;      4) &quot;-1&quot;2) 1) (integer) 32692   2) (integer) 1593763337   3) (integer) 5044   4) 1) &quot;GET&quot;      2) &quot;user_info:1000&quot;...\n\nBigKeyå¦‚æœæŸ¥è¯¢æ…¢æ—¥å¿—å‘ç°ï¼Œå¹¶ä¸æ˜¯å¤æ‚åº¦è¿‡é«˜çš„å‘½ä»¤å¯¼è‡´çš„ï¼Œè€Œéƒ½æ˜¯ SET &#x2F; DEL è¿™ç§ç®€å•å‘½ä»¤å‡ºç°åœ¨æ…¢æ—¥å¿—ä¸­ï¼Œæ­¤æ—¶éœ€è¦è€ƒè™‘å®ä¾‹å¦å†™å…¥äº† BigKeyã€‚\nBigKey ä¿—ç§°â€œå¤§ keyâ€ï¼ŒRedis æ˜¯ key-value çš„å­˜å‚¨æ–¹å¼ï¼Œå½“ä¸€ä¸ª Key æ‰€å¯¹åº”çš„å­˜å‚¨æ•°å€¼è¿‡é•¿æ—¶ï¼Œå°±ä¼šå‡ºç°å¤§ key çš„æƒ…å†µã€‚\nRedis åœ¨å†™å…¥æ•°æ®æ—¶ï¼Œéœ€è¦ä¸ºæ–°çš„æ•°æ®åˆ†é…å†…å­˜ï¼Œç›¸å¯¹åº”çš„å½“ä» Redis ä¸­åˆ é™¤æ•°æ®æ—¶ï¼Œä¹Ÿä¼šé‡Šæ”¾å¯¹åº”çš„å†…å­˜ç©ºé—´ã€‚BigKey ä¼šå¯¼è‡´åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„è€—æ—¶éƒ½æ¯”è¾ƒé•¿ã€‚\nå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ‰«æ Redis ä¸­çš„ BigKeyï¼š\n$ redis-cli -h 127.0.0.1 -p 6379 --bigkeys -i 0.01...-------- summary -------Sampled 829675 keys in the keyspace!Total key length in bytes is 10059825 (avg len 12.13)Biggest string found &#x27;key:291880&#x27; has 10 bytesBiggest   list found &#x27;mylist:004&#x27; has 40 itemsBiggest    set found &#x27;myset:2386&#x27; has 38 membersBiggest   hash found &#x27;myhash:3574&#x27; has 37 fieldsBiggest   zset found &#x27;myzset:2704&#x27; has 42 members36313 strings with 363130 bytes (04.38% of keys, avg size 10.00)787393 lists with 896540 items (94.90% of keys, avg size 1.14)1994 sets with 40052 members (00.24% of keys, avg size 20.09)1990 hashs with 39632 fields (00.24% of keys, avg size 19.92)1985 zsets with 39750 members (00.24% of keys, avg size 20.03)\n\nå¯¹çº¿ä¸Šå®ä¾‹è¿›è¡Œ bigkey æ‰«ææ—¶ï¼ŒRedis çš„ OPS ä¼šçªå¢ï¼Œä¸ºäº†é™ä½æ‰«æè¿‡ç¨‹ä¸­å¯¹ Redis çš„å½±å“ï¼Œéœ€è¦æ§åˆ¶æ‰«æçš„é¢‘ç‡ï¼ŒæŒ‡å®š -i å‚æ•°å³å¯ï¼Œå®ƒè¡¨ç¤ºæ‰«æè¿‡ç¨‹ä¸­æ¯æ¬¡æ‰«æåä¼‘æ¯çš„æ—¶é—´é—´éš”ï¼Œå•ä½æ˜¯ç§’ã€‚\n","categories":["â‘§Linuxè¿ç»´ä¸å¼€å‘"],"tags":["Redis"]},{"title":"Nodeæ’ä»¶å¼€å‘(1)-å¿«é€Ÿå…¥é—¨","url":"/post/819381949.html","content":"åœ¨ä½¿ç”¨ Electron å¼€å‘å®¢æˆ·ç«¯æ—¶ï¼Œå¦‚æœç°æœ‰ Node æ¨¡å—æ‰€æä¾›çš„åŠŸèƒ½æ— æ³•æ»¡è¶³éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ C++ å¼€å‘è‡ªå®šä¹‰çš„ Node æ¨¡å—ï¼Œä¹Ÿç§°æ’ä»¶ï¼ˆaddonï¼‰ã€‚\nNode.js æ’ä»¶çš„æ‰©å±•åä¸º .nodeï¼Œæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯é€šè¿‡åŠ¨æ€é“¾æ¥åº“ï¼ˆ.dll æˆ– .soï¼‰é‡å‘½åè€Œæ¥ã€‚\n\n\né€‰æ‹© Node-APIå¼€å‘ Node.js æ‰©å±•çš„æ–¹å¼æœ‰ä¸‰ç§ï¼š\n\nNode-APIï¼ˆä»¥å‰å« N-APIï¼‰\nnan\nç›´æ¥ä½¿ç”¨ v8ã€libuv ç­‰åº“è¿›è¡Œå¼€å‘\n\né™¤éæ˜¯ä¸ºäº†ä½¿ç”¨ Node-API æœªå…¬å¼€çš„æ¥å£ï¼Œå¦åˆ™å»ºè®®ä½¿ç”¨ Node-API è¿›è¡Œå¼€å‘ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å› ä¸º Node-API æ˜¯äºŒè¿›åˆ¶ï¼ˆABIï¼‰å…¼å®¹çš„ï¼Œå®ƒå°†åº•å±‚ JavaScript å¼•æ“ä¸ä¸Šå±‚æ’ä»¶éš”ç¦»å¼€äº†ï¼ŒJavaScripty å¼•æ“çš„ä¿®æ”¹ä¸ä¼šå½±å“æˆ‘ä»¬å¼€å‘çš„ä¸Šå±‚æ’ä»¶ï¼Œæˆ‘ä»¬åŸºäºæŸä¸ªç‰ˆæœ¬ç¼–è¯‘çš„æ’ä»¶åœ¨ä¸éœ€è¦é‡æ–°ç¼–è¯‘çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è¿è¡Œåœ¨å…¶ä»–ç‰ˆæœ¬çš„ Node.js ä¸­ã€‚\nå®‰è£…ç¼–è¯‘ç¯å¢ƒNode æ’ä»¶ä½¿ç”¨ C++å¼€å‘ï¼Œå› æ­¤åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šé‡‡ç”¨ä¸åŒçš„ç¼–è¯‘ç¯å¢ƒã€‚åœ¨ Linux ç¯å¢ƒé€šå¸¸ä½¿ç”¨ GCC å’Œ LLVMï¼›\nMac ç¯å¢ƒé€šå¸¸ä½¿ç”¨ Xcodeï¼›\nWindows ç¯å¢ƒé€šå¸¸ä½¿ç”¨ Visual Studioï¼Œå¦‚æœä¸æƒ³å®‰è£…å®Œæ•´çš„ Visual Studioï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä»…å®‰è£…å¿…è¦çš„å·¥å…·é“¾ï¼š\nnpm install --global windows-build-tools\n\nNode æ’ä»¶é€šå¸¸ä½¿ç”¨ node-gyp è¿›è¡Œç¼–è¯‘ï¼Œnode-gyp åŸºäº Google çš„ gyp-next æ„å»ºç³»ç»Ÿï¼Œnode-gyp å·²ç»ä¸ npm æ†ç»‘åœ¨ä¸€èµ·ï¼Œä½†æˆ‘ä»¬åœ¨ä½¿ç”¨ node-gyp ä¹‹å‰è¿˜éœ€è¦å…ˆå®‰è£… Pythonã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;è‡³æ­¤ Node æ’ä»¶å¼€å‘çš„ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆã€‚\næ­å»ºå·¥ç¨‹\næœ¬æ–‡ä»¥åœ¨ Windows ä¸‹å¼€å‘ Node æ’ä»¶ä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿç¯å¢ƒåœ¨ç¼–è¯‘é€‰é¡¹æ–¹é¢ç•¥æœ‰ä¸åŒ\n\npackage.json&#123;  &quot;name&quot;: &quot;node-addson-sample&quot;,  &quot;version&quot;: &quot;1.0.0&quot;,  &quot;private&quot;: true,  &quot;description&quot;: &quot;A sample node addson sample&quot;,  &quot;dependencies&quot;: &#123;    &quot;bindings&quot;: &quot;^1.5.0&quot;,    &quot;node-addon-api&quot;: &quot;^7.1.0&quot;  &#125;,  &quot;scripts&quot;: &#123;    &quot;build-debug&quot;: &quot;node-gyp --debug --arch=x64 configure rebuild&quot;,    &quot;build-release&quot;: &quot;node-gyp --release --arch=x64 configure rebuild&quot;,    &quot;test&quot;: &quot;node test.js&quot;  &#125;&#125;\n\n\nä½¿ç”¨npm installå®‰è£…ä¾èµ–é¡¹ã€‚\n\nå„ä¸ªä¾èµ–é¡¹çš„ä½œç”¨å¦‚ä¸‹ï¼š\n\nnode-addon-apiç”¨äºæä¾›äº† Node-API ç›¸å…³çš„å¤´æ–‡ä»¶ï¼›\n\nbindingsç”¨äºå¸®åŠ©æ’ä»¶å¼€å‘è€…å¿«é€Ÿå¯¼å…¥ç¼–è¯‘åçš„.node æ’ä»¶ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œè¿™ä¸ªä¾èµ–æ˜¯éå¿…é¡»ï¼›\n\n\nbuild-debugå’Œbuild-releaseè„šæœ¬åˆ†åˆ«ç”¨äºç¼–è¯‘ Debug å’Œ Release ç‰ˆæœ¬çš„æ’ä»¶ï¼›\ntestè„šæœ¬ç”¨äºæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼›\n32 ä½æ’ä»¶æŒ‡å®š arch ä¸º ia32ï¼ˆ--arch=ia32ï¼‰å°±å¯ä»¥ç¼–è¯‘ 32 ä½ç‰ˆæœ¬çš„ Node æ’ä»¶ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;éœ€è¦æ³¨æ„ï¼š64 ä½ç‰ˆæœ¬ Node.js åªèƒ½åŠ è½½ 64 ä½çš„ Node æ’ä»¶ï¼Œ32 ä½ç‰ˆæœ¬çš„ Node.js ä¹Ÿåªèƒ½åŠ è½½ 32 ä½çš„ Node æ’ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š\nError: \\\\?\\D:\\node-addon-sample\\build\\Debug\\node-addon-sample.node is not a valid Win32 application.\n\nç¼–è¯‘è„šæœ¬Node-API æ”¯æŒ GYP å’Œ CMake.js ä¸¤ç§ç¼–è¯‘æ–¹å¼ï¼Œè¿™é‡Œé€‰æ‹©ä½¿ç”¨ GYP æ–¹å¼ã€‚\næ–°å»ºbinding.gypæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n&#123;  &quot;targets&quot;: [    &#123;      &quot;target_name&quot;: &quot;node-addson-sample&quot;, # ***.node      &quot;cflags!&quot;: [ &quot;-fno-exceptions&quot; ],      &quot;cflags_cc!&quot;: [ &quot;-fno-exceptions&quot; ],      # æŒ‡å®šéœ€è¦ç¼–è¯‘çš„æºæ–‡ä»¶      &quot;sources&quot;: [ &quot;main.cpp&quot; ],      &quot;include_dirs&quot;: [        &quot;&lt;!@(node -p \\&quot;require(&#x27;node-addon-api&#x27;).include\\&quot;)&quot;      ],      # é¢„ç¼–è¯‘å®      &quot;defines&quot;: [        &quot;NAPI_CPP_EXCEPTIONS&quot;, # åœ¨Node-APIä¸­å¯ç”¨C++å¼‚å¸¸      ],      &quot;conditions&quot;: [        [          # Windowså¹³å°ç¼–è¯‘é€‰é¡¹          &quot;OS == &#x27;win&#x27;&quot;, &#123;            &quot;configurations&quot;: &#123;              # Debugç¼–è¯‘é€‰é¡¹              &quot;Debug&quot;: &#123;                # é¢„ç¼–è¯‘å®                &quot;defines&quot;: [ &quot;DEBUG&quot;, &quot;_DEBUG&quot; ],                &quot;cflags&quot;: [ &quot;-g&quot;, &quot;-O0&quot; ],                &quot;conditions&quot;: [                  [                    &quot;target_arch==&#x27;x64&#x27;&quot;, &#123;                      &quot;msvs_configuration_platform&quot;: &quot;x64&quot;,                    &#125;                  ],                ],                &quot;msvs_settings&quot;: &#123;                  &quot;VCCLCompilerTool&quot;: &#123;                    # 0 - MultiThreaded (/MT)                    # 1 - MultiThreadedDebug (/MTd)                    # 2 - MultiThreadedDLL (/MD)                    # 3 - MultiThreadedDebugDLL (/MDd)                    &quot;RuntimeLibrary&quot;: 1, # /MTd                    &quot;Optimization&quot;: 0, # /Od, no optimization                    &quot;MinimalRebuild&quot;: &quot;false&quot;,                    &quot;OmitFramePointers&quot;: &quot;false&quot;,                    &quot;BasicRuntimeChecks&quot;: 3, # /RTC1                    &quot;AdditionalOptions&quot;: [                      &quot;/EHsc&quot;                    ],                  &#125;,                  &quot;VCLinkerTool&quot;: &#123;                    &quot;LinkIncremental&quot;: 2, # Enable incremental linking                    # é™„åŠ ä¾èµ–åº“                    &quot;AdditionalDependencies&quot;: [                    ],                  &#125;,                &#125;,                # é™„åŠ åŒ…å«ç›®å½•                &quot;include_dirs&quot;: [                ],              &#125;,              # Debugç¼–è¯‘é€‰é¡¹              &quot;Release&quot;: &#123;                # é¢„ç¼–è¯‘å®                &quot;defines&quot;: [ &quot;NDEBUG&quot; ],                &quot;msvs_settings&quot;: &#123;                  &quot;VCCLCompilerTool&quot;: &#123;                    &quot;RuntimeLibrary&quot;: 0, # /MT                    &quot;Optimization&quot;: 3, # /Ox, full optimization                    &quot;FavorSizeOrSpeed&quot;: 1, # /Ot, favour speed over size                    &quot;InlineFunctionExpansion&quot;: 2, # /Ob2, inline anything eligible                    &quot;WholeProgramOptimization&quot;: &quot;false&quot;, # Dsiable /GL, whole program optimization, needed for LTCG                    &quot;OmitFramePointers&quot;: &quot;true&quot;,                    &quot;EnableFunctionLevelLinking&quot;: &quot;true&quot;,                    &quot;EnableIntrinsicFunctions&quot;: &quot;true&quot;,                    &quot;RuntimeTypeInfo&quot;: &quot;false&quot;,                    &quot;ExceptionHandling&quot;: &quot;2&quot;, # /EHsc                    &quot;AdditionalOptions&quot;: [                      &quot;/MP&quot;, # compile across multiple CPUs                    ],                    &quot;DebugInformationFormat&quot;: 3,                    &quot;AdditionalOptions&quot;: [                    ],                  &#125;,                  &quot;VCLibrarianTool&quot;: &#123;                    &quot;AdditionalOptions&quot;: [                      &quot;/LTCG&quot;, # link time code generation                    ],                  &#125;,                  &quot;VCLinkerTool&quot;: &#123;                    &quot;LinkTimeCodeGeneration&quot;: 1, # link-time code generation                    &quot;OptimizeReferences&quot;: 2, # /OPT:REF                    &quot;EnableCOMDATFolding&quot;: 2, # /OPT:ICF                    &quot;LinkIncremental&quot;: 1, # disable incremental linking                    # é™„åŠ ä¾èµ–åº“                    &quot;AdditionalDependencies&quot;: [                    ],                  &#125;,                &#125;,                # é™„åŠ åŒ…å«ç›®å½•                &quot;include_dirs&quot;: [                ],              &#125;            &#125;          &#125;,        ]      ]    &#125;  ]&#125;\n\nbinding.gyp ä¸­çš„ç¼–è¯‘é€‰é¡¹å¤§å¤šä¸ç‰¹å®šå¹³å°çš„ç¼–è¯‘å™¨æœ‰å…³ï¼Œå…·ä½“å¯ä»¥æŸ¥é˜…ç›¸å…³ç¼–è¯‘å™¨æ–‡æ¡£ï¼Œå¦‚ Windows å¹³å°å¯ä»¥æŸ¥è¯¢MSVC æ–‡æ¡£ã€‚\nå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŒ‡å®šéœ€è¦ä½¿ç”¨çš„ Visual Stuido ç‰ˆæœ¬ï¼š\nnpm config set msvs_version 20xx\n\nnode-gyp å®˜æ–¹æä¾›äº†ä¸€äº›ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™äº›ç¤ºä¾‹ä¸­è·å–ä¸å°‘çµæ„Ÿï¼š\nbinding.gyp-files-in-the-wild\nGYP å®˜æ–¹æ–‡æ¡£ï¼š\nhttps://gyp.gsrc.io/docs/UserDocumentation.md\nç¬¬ä¸€ä¸ª APIç°åœ¨æ–°å»ºmain.cppï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª APIï¼ŒAPI åä¸ºAddï¼Œæ”¯æŒä¼ å…¥ 2 ä¸ªæ•´æ•°å‚æ•°ï¼Œè¿”å›æ•´æ•°ç›¸åŠ çš„å’Œã€‚\n#include &lt;napi.h&gt;// åŒæ­¥è°ƒç”¨// è®¡ç®—ä¸¤ä¸ªæ•´æ•°ç›¸åŠ ç»“æœå¹¶è¿”å›Napi::Number Add(const Napi::CallbackInfo&amp; info) &#123;    Napi::Env env = info.Env();    if (info.Length() != 2)        throw Napi::TypeError::New(env, &quot;Wrong number of arguments&quot;);    if (!info[0].IsNumber() || !info[1].IsNumber())        throw Napi::TypeError::New(env, &quot;Wrong arguments&quot;);    const int ret = info[0].ToNumber().Int32Value() + info[1].ToNumber().Int32Value();    return Napi::Number::New(env, ret);&#125;\n\nåœ¨å®šä¹‰å®Œ API ä¹‹åï¼Œè¿˜éœ€è¦å°† API å¯¼å‡ºï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\n// å¯¼å‡ºå‡½æ•°Napi::Object Init(Napi::Env env, Napi::Object exports) &#123;    exports.Set(Napi::String::New(env, &quot;Add&quot;), Napi::Function::New(env, Add));    return exports;&#125;NODE_API_MODULE(addon, Init)\n\nå¦‚æœå¿˜è®°å¯¼å‡º APIï¼ŒåŠ è½½ Node æ’ä»¶æ—¶ä¼šæŠ¥é”™ï¼š\nError: Module did not self-register: &#x27;\\\\?\\D:\\node-addson-sample\\build\\Debug\\node-addson-sample.node&#x27;.\n\nç°åœ¨æ‰§è¡Œnpm run build-debugç¼–è¯‘ Debug ç‰ˆæœ¬æ’ä»¶ï¼Œç¼–è¯‘ç”Ÿæˆçš„ node æ’ä»¶è·¯å¾„ä¸ºbuild\\Debug\\node-addson-sample.nodeã€‚\næµ‹è¯•ç”¨ä¾‹æ–°å»ºtest.jsï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\nconst sample = require(&quot;bindings&quot;)(&quot;node-addson-sample.node&quot;);console.log(sample.Add(100, 200)); // è¾“å‡º300\n\nä½¿ç”¨bindingsæ¨¡å—å¯ä»¥ä¸ç”¨è€ƒè™‘æ’ä»¶çš„å…·ä½“ä½ç½®ï¼Œè¯¥æ¨¡å—ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹éå†æŸ¥æ‰¾ã€‚\næ•°æ®ç±»å‹åœ¨napi.hå¤´æ–‡ä»¶ä¸­æœ‰å¾ˆå¤šç»§æ‰¿è‡ªNapi::Valueçš„å­ç±»ï¼Œè¿™äº›ç±»åˆ†åˆ«å¯¹åº” JavaScript ä¸­çš„æ•°æ®ç±»å‹ï¼Œå¦‚ï¼š\n\nNapi::Boolean -&gt; Boolean\nNapi::Number -&gt; Number\nNapi::String -&gt; String\nNapi::Function -&gt; Function\nNapi::Symbol -&gt; Symbol\nNapi::Array -&gt; Array\nNapi::Object -&gt; Object\n\nNode-Api è¿˜å®šä¹‰ Promiseã€Dateã€Buffer ç­‰æ•°æ®ç±»å‹ã€‚\nNull å’Œ UndefinedNull å’Œ Undefined æ¯”è¾ƒç‰¹æ®Šï¼Œæ²¡æœ‰å®šä¹‰ä¸“é—¨çš„ç±»ï¼Œç”±Envç±»çš„æˆå‘˜å‡½æ•°è¿”å›ã€‚\nenv.Null()env.Undefined()\n\nåˆ›å»ºå¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”¨æ¥åˆ›å»ºæŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œä»¥åˆ›å»º Boolean ç±»å‹ä¸ºä¾‹ï¼š\nNapi::Boolean::New(env, true)Napi::Value::From(env, false)\n\nä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ•°ç»„ä¸ºä¾‹ä»‹ç»å¯¹è±¡å’Œæ•°ç»„çš„ä½¿ç”¨æ–¹æ³•ï¼š\nNapi::Array result = Napi::Array::New(env);for (size_t i = 0; i &lt; 3; i++) &#123;    Napi::Object obj = Napi::Object::New(env);    obj.Set(Napi::String::New(env, &quot;filePath&quot;), Napi::String::New(env, &quot;/root/&quot; + std::to_string(i) + &quot;.txt&quot;));    obj.Set(Napi::String::New(env, &quot;fileSize&quot;), Napi::Number::New(env, i * 100));    result.Set(Napi::Number::New(env, i), obj);&#125;\n\nç±»å‹æ ¡éªŒNapi::Valueæä¾›äº†è‹¥å¹²æ–¹æ³•ç”¨äºåˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»å‹ï¼Œå¦‚ï¼š\n\nIsUndefined\nIsNull\nIsBoolean\nIsNumber\nIsString\nIsSymbol\nIsArray\nIsObject\nIsFunction\nIsPromise\nIsBuffer\n\nå¼‚å¸¸å¯ä»¥åœ¨ç¼–è¯‘è„šæœ¬binding.gypä¸­é€šè¿‡é¢„ç¼–è¯‘å®æŒ‡å®šæ˜¯å¦å¯ç”¨ C++å¼‚å¸¸ï¼š\nNAPI_CPP_EXCEPTIONSNAPI_DISABLE_CPP_EXCEPTIONS\n\nå¦‚æœå¯ç”¨ C++å¼‚å¸¸ï¼Œåˆ™Napi::Errorä¼šç»§æ‰¿è‡ª std::exceptionã€‚\nclass Error : public ObjectReference#ifdef NAPI_CPP_EXCEPTIONS    ,              public std::exception#endif  // NAPI_CPP_EXCEPTIONS...\n\nåœ¨å¯åŠ¨ C++å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œä» Node æ’ä»¶æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼å¦‚ä¸‹ï¼š\nthrow Napi::TypeError::New(env, &quot;Wrong number of arguments&quot;);\n\nå°†ä¼šä¸­æ–­å½“å‰å‡½æ•° throw åé¢ä»£ç çš„æ‰§è¡Œã€‚\nTypeError ç»§æ‰¿è‡ª Errorï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºä¸ç±»å‹é”™è¯¯ç›¸å…³çš„å¼‚å¸¸ã€‚ç±»ä¼¼çš„é”™è¯¯ç±»å‹è¿˜æœ‰RangeErrorç­‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŠ›å‡ºErrorç±»å‹çš„é”™è¯¯ï¼š\nthrow Napi::Error::New(env, &quot;Wrong number of arguments&quot;);\n\nåœ¨æ²¡æœ‰å¯ç”¨ C++ å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨å¦‚ä¸‹æ–¹å¼ä» Node æ’ä»¶æŠ›å‡ºå¼‚å¸¸ï¼š\nNapi::TypeError::New(env, &quot;Wrong number of arguments&quot;).ThrowAsJavaScriptException();return;\n\næŠ›å‡ºå¼‚å¸¸åéœ€è¦ä½¿ç”¨ return è¯­å¥ç»ˆæ­¢ä¸‹é¢æµç¨‹çš„æ‰§è¡Œã€‚\n\nNode-API å®˜æ–¹æ–‡æ¡£ï¼šnode-addon-api docNode.js å®˜æ–¹ addon ç¤ºä¾‹ï¼šnode-addon-examples\n\nğŸ“Œé™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"],"tags":["Electron"]},{"title":"Electronå¯åŠ¨å’Œç¦ç”¨è°ƒè¯•å·¥å…·çš„æ–¹æ³•","url":"/post/2191045165.html","content":"å¯ç”¨è°ƒè¯•å·¥å…·Electron ä¸­æ‰“å¼€è°ƒè¯•çª—å£çš„æ–¹æ³•æœ‰å¤šç§ï¼Œä½†å‰æéƒ½éœ€è¦åœ¨åˆ›å»º Browser Window æ—¶å¯ç”¨ devTools ç‰¹æ€§ï¼Œå¦‚ï¼š\nconst win = new BrowserWindow(&#123;  width: 1080,  height: 768,  title: &quot;test window&quot;,  webPreferences: &#123;    devTools: true,  &#125;,&#125;);\n\n\n\nå¯ç”¨ devTools ç‰¹æ€§åï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‡ ç§æ–¹å¼æ‰“å¼€è°ƒè¯•çª—å£ï¼š\næ–¹å¼ 1åœ¨ä»£ç ä¸­ä½¿ç”¨BrowserWindow.webContents.openDevTools()æ‰“å¼€è°ƒè¯•çª—å£ã€‚\næ–¹å¼ 2é€šè¿‡å¿«æ·é”®Ctrl+Shift+Iæ‰“å¼€è°ƒè¯•çª—å£ã€‚\næ–¹å¼ 3åœ¨ç¨‹åºçš„å¯åŠ¨å‘½ä»¤è¡Œä¸­æ·»åŠ --remote-debugging-port=8888å‚æ•°ï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨æ‰“å¼€è°ƒè¯•é¡µé¢http://127.0.0.1:8888å³å¯è¿›è¡Œè°ƒè¯•ã€‚\nè¿™ç§æ–¹å¼é»˜è®¤è°ƒè¯•çš„æ˜¯æ¸²æŸ“è¿›ç¨‹ï¼Œå¦‚éœ€è°ƒè¯•ä¸»è¿›ç¨‹åˆ™éœ€è¦ä½¿ç”¨--inspect=8888å‚æ•°ã€‚\nå¦å¤–ï¼Œå¦‚æœæ‰“å¼€è°ƒè¯•é¡µé¢æ—¶æç¤ºWebSockets request was expectedè€Œæ— æ³•æ˜¾ç¤ºè°ƒè¯•å·¥å…·ï¼Œéœ€è¦ä½¿ç”¨è®¿é—®chrome://inspect/æ‰“å¼€ inspect é¡µé¢ï¼Œé…ç½®å¯¹åº”çš„å‘ç° ip å’Œç«¯å£ï¼Œå¦‚localhost:8888ï¼š\né…ç½®å®Œæˆåï¼Œåˆ·æ–° inspect é¡µé¢ååœ¨Remote Targetä¸­é€‰æ‹©å¯¹åº”çš„è°ƒè¯•ç›®æ ‡è¿›è¡Œè°ƒè¯•ã€‚\nç¦ç”¨è°ƒè¯•å·¥å…·åœ¨è½¯ä»¶ä¸Šçº¿å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒå®Œå…¨ç¦ç”¨è°ƒè¯•å·¥å…·ï¼Œæ­¤æ—¶åªéœ€è¦å°†devToolså±æ€§è®¾ç½®ä¸º false å³å¯ï¼Œå¦‚ï¼š\nconst win = new BrowserWindow(&#123;  width: 1080,  height: 768,  title: &quot;test window&quot;,  webPreferences: &#123;    devTools: false,  &#125;,&#125;);\n\nä¸Šé¢çš„ä»£ç è™½ç„¶å¯ä»¥ç¦ç”¨è°ƒè¯•å·¥å…·ï¼Œä½†åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œå› æ­¤åœ¨æ¯æ¬¡â€œå¼€å‘-&gt;å‘å¸ƒç‰ˆæœ¬â€æ—¶éƒ½éœ€è¦æ¥å›ä¿®æ”¹ devToolsï¼Œå®¹æ˜“å‡ºç°æ¼æ”¹çš„æƒ…å†µã€‚\nå¯ä»¥ä½¿ç”¨Electronåˆ¤æ–­ç¨‹åºè¿è¡Œç¯å¢ƒä»‹ç»çš„æ–¹æ³•æ¥åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒï¼Œå¯ç”¨&#x2F;ç¦ç”¨ devTools çš„ä»£ç å¯ä»¥ä¼˜åŒ–ä¸ºï¼š\nconst win = new BrowserWindow(&#123;  width: 1080,  height: 768,  title: &quot;test window&quot;,  webPreferences: &#123;    devTools: !isProduction(),  &#125;,&#125;);\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"],"tags":["Electron"]},{"title":"å‰åç«¯å¸¸ç”¨æ¦‚å¿µæ‰«ç›²","url":"/post/1162897275.html","content":"æœ¬æ–‡ä¸»è¦ä»‹ç»å‰åç«¯åŠå®¢æˆ·ç«¯å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›å¸¸ç”¨çš„æŠ€æœ¯æ¦‚å¿µï¼Œæœ¬æ–‡ä¸ä¼šæ¶‰åŠå¤ªæ·±å¥¥çš„æŠ€æœ¯ç»†èŠ‚ã€‚\n\n\næµè§ˆå™¨å†…æ ¸åœ¨ Web å¤§è¡Œå…¶é“çš„æ—¶ä»£ï¼Œç½‘æ°‘éœ€è¦ä¸Šç½‘æµè§ˆç½‘é¡µå°±éœ€è¦ä¾èµ–æµè§ˆå™¨è¿™ä¸ªè½¯ä»¶ï¼ŒæŒæ¡äº†æµè§ˆå™¨å°±æŒæ¡äº†æµé‡çš„å…¥å£ï¼Œäºæ˜¯å„å¤§è½¯ä»¶å…¬å¸å¼€å§‹ç ”å‘è‡ªå·±å“ç‰Œçš„æµè§ˆå™¨ï¼Œä¸åŒå“ç‰Œçš„æµè§ˆå™¨å…¶å®ç°åŸç†å½“ç„¶æ˜¯æœ‰åŒºåˆ«çš„ï¼Œè¿™ä¸ªå®ç°åŸç†å°±æ˜¯æµè§ˆå™¨çš„æ ¸å¿ƒï¼Œæˆ‘ä»¬ç§°å…¶æµè§ˆå™¨å†…æ ¸ã€‚\nç°åœ¨å¸‚é¢ä¸Šæœ‰è¿™ä¹ˆå¤šçš„æµè§ˆå™¨ï¼Œå¦‚ Chromeï¼ŒQQ æµè§ˆå™¨ï¼Œæœç‹—æµè§ˆå™¨ï¼Œè¿™äº›æµè§ˆå™¨å‚å•†æ˜¯ä¸æ˜¯éƒ½æ˜¯è‡ªå·±ç ”å‘æµè§ˆå™¨å†…æ ¸äº†ï¼Ÿä¸æ˜¯çš„ï¼\nå› ä¸ºæœ‰äº›å…¬å¸æˆ–è€…å›¢ä½“å°†æµè§ˆå™¨å†…æ ¸è¿›è¡Œäº†å¼€æºï¼Œæ–¹ä¾¿å…¶ä»–äººåŸºäºè¯¥å†…æ ¸è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¸¸è§çš„å¼€æºæµè§ˆå™¨å†…æ ¸æœ‰ Chromiumã€WebKitã€Geckoã€‚\næ­£å› ä¸ºæœ‰äº†è¿™äº›å¼€æºå†…æ ¸çš„å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨è‡ªå·±å¼€å‘å†…æ ¸ä¹Ÿå¯ä»¥å¼€å‘å±äºè‡ªå·±å“ç‰Œçš„æµè§ˆå™¨ï¼Œæ¯”å¦‚ QQ æµè§ˆå™¨ï¼Œæœç‹—æµè§ˆå™¨ï¼Œ360 æµè§ˆå™¨éƒ½æ˜¯åŸºäº IE å†…æ ¸å’Œ Chromium å†…æ ¸äºŒæ¬¡å°è£…è€Œæˆï¼Œç¾å…¶åæ›°åŒå¼•æ“ï¼ˆåŒå†…æ ¸ï¼‰ã€‚\nç›®å‰å¸‚é¢ä¸Šæµè¡Œçš„æ‹¥æœ‰è‡ªä¸»å†…æ ¸çš„æµè§ˆå™¨ï¼š\n\n\n\næµè§ˆå™¨\nå†…æ ¸\n\n\n\nChrome\nChromium\n\n\nSafari\nWebKit\n\n\nFirefox\nGecko\n\n\nIE\nIE å†…æ ¸\n\n\nJavaScript, ECMAScript, ES6, TypeScriptJavaScriptæ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€çš„åç§°ï¼Œç±»ä¼¼ Javaï¼ŒC++ï¼ŒPHPï¼Œæ˜¯ç”± Netscape å…¬å¸å¼€å‘çš„ä¸€ç§è§£é‡Šæ€§ç¼–ç¨‹è¯­è¨€ï¼Œå…¶è¿è¡Œçš„å®¿ä¸»ç¯å¢ƒå¤§å¤šæ˜¯æµè§ˆå™¨ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç¯å¢ƒï¼Œå¦‚ Nodeã€‚\nå› ä¸º Netscape å…¬å¸å¸Œæœ›JavaScriptæˆä¸ºä¸€ç§æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„æ ‡å‡†è§„èŒƒï¼Œäºæ˜¯åœ¨ 1996 å¹´å°† JavaScript æäº¤ç»™æ ‡å‡†åŒ–ç»„ç»‡ ECMAã€‚æ¬¡å¹´ï¼ŒECMA å°±å‘å¸ƒäº†æ ‡å‡†æ–‡ä»¶ï¼ˆECMA-262ï¼‰çš„ç¬¬ä¸€ç‰ˆï¼Œè§„å®šäº†æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„æ ‡å‡†ï¼Œå¹¶å°†è¿™ç§æ ‡å‡†ç§°ä¸º ECMAScriptã€‚\næ‰€ä»¥è¯´ï¼ŒECMAScriptæ˜¯ä¸€ä¸ªçš„æµè§ˆå™¨è„šæœ¬è¯­è¨€çš„æ ‡å‡†è§„èŒƒã€‚\nä¸åŒçš„æµè§ˆå™¨å†…æ ¸åŠä¸åŒçš„ç‰ˆæœ¬å¯¹ECMAScriptè§„èŒƒçš„æ”¯æŒæƒ…å†µä¸åŒï¼Œ æˆªè‡³ 2012 å¹´ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½å®Œæ•´çš„æ”¯æŒECMAScript 5.1ï¼›\nä»ECMAScript 6å¼€å§‹ï¼Œæ ‡å‡†åˆ¶å®šè€…å†³å®šä¸å†ç”¨è¯¸å¦‚â€3.1, 5.0â€è¿™æ ·çš„ç‰ˆæœ¬å·æ¥å‘½åï¼Œè€Œæ˜¯æ¯å¹´ 6 æœˆå‘å¸ƒä¸€ä¸ª ECMAScript çš„æ­£å¼ç‰ˆï¼Œå¹¶ä¸”ä»¥å½“å¹´çš„å¹´ä»½æ¥å‘½åï¼Œ å¦‚ 2015 å¹´ 6 æœˆ 17 æ—¥ ECMA å›½é™…ç»„ç»‡å‘å¸ƒäº† ECMAScript çš„ç¬¬å…­ç‰ˆï¼Œè¯¥ç‰ˆæœ¬æ­£å¼åç§°ä¸ºECMAScript 2015ã€‚\nES6åªæ˜¯ECMAScript 6ç‰ˆæœ¬çš„ç®€ç§°ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨ECMAScript 6æ¥ç»Ÿç§°ECMAScript 2015åŠå…¶ä»¥åçš„ç‰ˆæœ¬ã€‚\nTypeScriptæ˜¯ç”±å¾®è½¯å¼€å‘çš„ä¸€ç§å¼€æºçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªä¸¥æ ¼è¶…é›†ï¼Œå¹¶æ·»åŠ äº†é™æ€ç±»å‹åŠå…¶ä»–ç‰¹æ€§ã€‚TypeScriptç›®å‰å·²ç»æ”¯æŒECMAScript 2015ã€‚\nCSS, CSS3CSSå³Cascading Style Sheetså±‚å æ ·å¼è¡¨çš„ç®€ç§°ï¼Œåœ¨ Web å¼€å‘ä¸­ç”¨æ¥å®šä¹‰å…ƒç´ æ ·å¼çš„ä¸€ç§æ ‡è®°å‹è¯­è¨€ã€‚CSS3æ˜¯ CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰çš„å‡çº§ç‰ˆæœ¬ï¼Œ2001 å¹´ 5 æœˆ 23 æ—¥ W3C å®Œæˆäº† CSS3 çš„å·¥ä½œè‰æ¡ˆã€‚\nV8, Node, Node.js, npm, YarnV8ï¼Œæˆ‘ä»¬é€šå¸¸å«åš V8 å¼•æ“ï¼Œç„¶è€Œå…¶å¹¶ä¸æ˜¯æ±½è½¦å‘åŠ¨æœºçš„ V8 å¼•æ“ï¼Œè€Œæ˜¯ç”± Google å¼€å‘å¹¶å¼€æºçš„ä¸€ä¸ªé¡¹ç›®ï¼Œå¯ä»¥è§£é‡Šå’Œæ‰§è¡Œ JavaScriptï¼Œå› ä¸ºå…¶æ€§èƒ½éå¸¸é«˜ï¼Œç›®å‰å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œå¦‚ Node.js å°±æ˜¯åŸºäºè¯¥å¼•æ“è€Œå¼€å‘ã€‚\nNode.js å’Œ Node æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼ŒNode æ˜¯ Node.js çš„ç®€ç§°ã€‚\nnpmï¼ˆnode package managementï¼‰æ˜¯ Node.js çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œç›®å‰å·²ç»å†…ç½®åˆ°äº† Node.js ä¸­ï¼Œä¸éœ€è¦å†å•ç‹¬å®‰è£…ã€‚\nyarnä¹Ÿæ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œç”± Facebookã€Googleã€Exponent å’Œ Tilde è”åˆæ¨å‡ºï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†å¼¥è¡¥ npm çš„ä¸€äº›ç¼ºé™·ã€‚\nReact, Vue, Angularè¿™ 3 ä¸ªè¯´ç™½äº†éƒ½æ˜¯ Javascript åº“ã€‚\næˆ‘ä»¬æœ€åˆå¼€å‘ Web çš„æ—¶å€™ç”¨çš„æ˜¯HTML+CSS+JavaScriptï¼Œåæ¥æœ‰äººè§‰å¾—ç”¨çº¯ js æ’¸å¤ªç¹çäº†ï¼Œå°±æœ‰äº†åæ¥çš„ jQuery è¿™æ ·çš„ JavaScript åº“ï¼Œä½†éšç€ä¸šåŠ¡çš„æ‰©å¢ï¼Œæ•°æ®äº¤äº’è¶Šæ¥è¶Šå¤æ‚ï¼Œä½¿ç”¨ jQuery ä¹Ÿå¤ªç¹çäº†ï¼Œäºæ—¶åˆæœ‰äº† React, Vue, Angular è¿™æ ·çš„åº“ã€‚\næ€»ä¹‹ï¼Œå‰ç«¯ç”Ÿæ€çœŸç¹è£ã€‚ã€‚ã€‚ã€‚\nAnt Design, Element UIå‰é¢è¯´åˆ°äº† React, Vue, Angularï¼Œè™½ç„¶åˆäº†è¿™äº›åº“ï¼Œæ•°æ®äº¤äº’æ–¹é¢å˜å¾—ç®€å•äº†ï¼Œä½†é¡µé¢æ•ˆæœè¿˜æ˜¯éœ€è¦ CSS å’Œ JS ä¸€è¡Œè¡Œä»£ç æ¥å®ç°çš„ï¼Œæ¯”å¦‚è¦å®ç°ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨ï¼ŒåŠ¨æ€æŒ‰é’®ç­‰ã€‚äºæ—¶ç°åœ¨åˆå‡ºç°äº†ä¸€äº›åŸºäº React, Vue å’Œ Angular è¿™äº›åº“çš„ UI ç»„ä»¶åº“ï¼Œè¿™äº› UI åº“å°†å¸¸ç”¨çš„ç»„ä»¶å°è£…å¥½äº†ï¼Œåœ¨å¼€å‘ä¸­ç›´æ¥å¼•å…¥ä½¿ç”¨ï¼Œæ”¹æ”¹å±æ€§ï¼Œè®¾ç½®ä¸‹å‚æ•°å³å¯ã€‚\nScaffold(è„šæ‰‹æ¶)é€šä¿—çš„è®²å°±æ˜¯å°†ä¸€äº›é‡å¤æ€§çš„äº‹æƒ…æ•´åˆæˆä¸€ä¸ªå·¥å…·ï¼Œè¿™ä¸ªå·¥å…·å°±å¯ä»¥å«è„šæ‰‹æ¶ã€‚\nMySQL, Redis, MongoDB, Oracle, PostgreSQL, NoSQLæ•°æ®åº“ç›®å‰åˆ†ä¸ºå…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®ï¼ˆå³ NoSQLï¼‰ï¼Œä¸åŒç±»å‹çš„æ•°æ®å„æœ‰å…¶ç‰¹ç‚¹ã€‚åŒæ ·ï¼ŒåŒä¸€ç±»å‹ä½†ä¸åŒå“ç‰Œçš„æ•°æ®åº“ä¹Ÿå„æœ‰å…¶ç‰¹ç‚¹å’Œåº”ç”¨é¢†åŸŸ ã€‚\nä¸èƒ½å•çº¯çš„è¯„åˆ¤å“ªç§æ•°æ®åº“çš„å¥½åï¼Œä¸€ä¸ªé¡¹ç›®ä¸­å¯èƒ½åŒæ—¶ç”¨åˆ°å¤šä¸ªä¸åŒç§ç±»çš„æ•°æ®åº“ã€‚\n1ã€å…³ç³»æ•°æ®åº“MySQLã€MariaDBã€PostgreSQLã€Microsoft Accessã€Microsoft SQL Serverã€Oracleã€Sybase ç­‰ç­‰ã€‚\n2ã€éå…³ç³»å‹æ•°æ®åº“ï¼ˆNoSQLï¼‰BigTableï¼ˆGoogleï¼‰ã€Cassandraã€MongoDBã€CouchDBã€Redis ç­‰ç­‰ã€‚\nNginx, Apacheéƒ½æ˜¯ Web æœåŠ¡å™¨ï¼Œä¸åŒçš„å›¢é˜Ÿç ”å‘ï¼Œå„æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚\nåå‘ä»£ç†åå‘ä»£ç†å•çº¯ä»åå­—ä¸Šç†è§£å°±æ˜¯æ­£å‘ä»£ç†çš„åæ–¹å‘ã€‚\né‚£ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†ï¼Ÿä»£ç†å†…éƒ¨ç½‘ç»œè®¿é—®å¤–éƒ¨ç½‘ç»œçš„ä»£ç†å°±æ˜¯æ­£å‘ä»£ç†ï¼Œæ¯”å¦‚ä½ éœ€è¦ä»å…¬å¸å±€åŸŸç½‘ä¸­çš„ç”µè„‘ A ç»è¿‡ä»£ç†æœåŠ¡å™¨ B è®¿é—®ç½‘ç«™ Cï¼š\nA --&gt; B --&gt; C\n\nå¦‚æœä½ è®¤ä¸º A æ˜¯å†…éƒ¨ç½‘ç»œï¼ŒC æ˜¯å¤–éƒ¨ç½‘ç»œï¼Œé‚£ B å°±æ˜¯æ­£å‘ä»£ç†ï¼›\nå¦‚æœä½ è®¤ä¸º A æ˜¯å¤–éƒ¨ç½‘ç»œï¼ŒC æ˜¯å†…éƒ¨ç½‘ç»œï¼ˆå½“ç„¶æˆ‘ä»¬ä¸€èˆ¬ä¸è¿™ä¹ˆè®¤ä¸ºï¼‰ï¼Œé‚£ä¹ˆ B å°±æ˜¯åå‘ä»£ç†ã€‚\nRESTfulä¸€åˆ‡å…·æœ‰ REST ç‰¹æ€§çš„æœåŠ¡éƒ½å¯ä»¥æˆä¸º RESTful æœåŠ¡ï¼Œé‚£ä¹ˆ REST ç‰¹æ€§æ˜¯ä»€ä¹ˆäº†ï¼Ÿ\nREST æ˜¯Representational state transferçš„ç¼©å†™ï¼Œç»´åŸºç™¾ç§‘ä¸Šçš„è§£é‡Šä¸ºï¼š\nRepresentational State Transfer (REST) is a software architecture style consisting of guidelines and best practices for creating scalable web services. REST is a coordinated set of constraints applied to the design of components in a distributed hypermedia system that can lead to a more performant and maintainable architecture.\n\nREST æ˜¯ä¸€ç§æ¶æ„é£æ ¼, åªæœ‰æ»¡è¶³è¿™äº›çº¦æŸï¼Œæ‰èƒ½ç§°ä¹‹ä¸ºç¬¦åˆ REST æ¶æ„é£æ ¼ã€‚REST çš„çº¦æŸå¤§è‡´åŒ…æ‹¬ï¼š\n\nå®¢æˆ·ç«¯-æœåŠ¡å™¨ç»“æ„\næ— çŠ¶æ€\nå¯ç¼“å­˜\næŒ‰éœ€ä»£ç ï¼ˆå¯é€‰ï¼‰\nç»Ÿä¸€æ¥å£\n\n\næŒç»­æ›´æ–°ä¸­â€¦.\n\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"]},{"title":"Qtå¼€å‘è·¯ä¸Šçš„â€œç»Šè„šçŸ³â€ä¸â€œå«è„šçŸ³â€","url":"/post/2202762022.html","content":"æœ¬æ–‡æ•´ç†äº†ä¸€äº›åœ¨ä½¿ç”¨ Qt æ¡†æ¶è¿‡ç¨‹ä¸­é‡åˆ°çš„å®é™…é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚å†…å®¹æºè‡ªæ—¥å¸¸å¼€å‘ç¬”è®°ï¼Œåé‡å®ç”¨ï¼Œè™½æœªåˆ»æ„è¿½æ±‚ç³»ç»Ÿæ€§çš„ç¯‡ç« ç»“æ„ï¼Œä½†å¸Œæœ›èƒ½ä¸ºé‡åˆ°ç±»ä¼¼æƒ…å†µçš„å¼€å‘è€…æä¾›å‚è€ƒã€‚\n\n\nè·¯å¾„ç›¸å…³\nå½“å‰ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶çš„æ®å¯¹è·¯å¾„ QCoreApplication::applicationFilePath()\nå½“å‰ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½• QCoreApplication::applicationDirPath()\nå½“å‰è¿›ç¨‹çš„å·¥ä½œç›®å½• QDir::currentPath()ï¼Œåœ¨è°ƒç”¨ CreateProcess å‡½æ•°æ—¶é€šè¿‡ lpCurrentDirectory å‚æ•°æŒ‡å®šè¿›ç¨‹å·¥ä½œç›®å½•\né€šè¿‡æ–‡ä»¶è·¯å¾„è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯QFileInfo fi(&quot;D:/1/2/3 4.txt&quot;);qDebug() &lt;&lt; fi.dir().path(); // D:/1/2qDebug() &lt;&lt; fi.fileName(); // 3 4.txtqDebug() &lt;&lt; fi.suffix(); // txt\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n\nQEnum è½¬å­—ç¬¦ä¸²template &lt;typename QEnum&gt;inline const char* QEnumToStr(const QEnum value) &#123;    return QMetaEnum::fromType&lt;QEnum&gt;().valueToKey(value);&#125;\n\nç§»é™¤ Qt æ§ä»¶è™šçº¿æ¡†æ–¹å¼ä¸€ï¼šä½¿ç”¨ StyleSheetQWidget:focus &#123;  outline: none; /* å»æ‰å¾—åˆ°ç„¦ç‚¹æ—¶çš„è™šçº¿æ¡† */&#125;\n\næ–¹å¼äºŒï¼šç»§æ‰¿ QProxyStyleç»§æ‰¿ QProxyStyleï¼ŒPrimitiveElement ä¸º QStyle::PE_FrameFocusRect æ—¶ä¸ç»˜åˆ¶è™šçº¿æ¡†ï¼Œç„¶ååœ¨ main() å‡½æ•°é‡Œè°ƒç”¨ QApplication::setStyle() ä½¿ç”¨æ–°çš„æ ·å¼ã€‚\n// æ–‡ä»¶å: NoFocusRectStyle.h#ifndef NOFOCUSRECTSTYLE_H#define NOFOCUSRECTSTYLE_H#include &lt;QProxyStyle&gt;class NoFocusRectStyle : public QProxyStyle&#123;public:    NoFocusRectStyle(QStyle *baseStyle) : QProxyStyle(baseStyle) &#123;&#125;    void drawPrimitive(PrimitiveElement element,                       const QStyleOption *option,                       QPainter *painter,                       const QWidget *widget = 0) const&#123;        if (element == QStyle::PE_FrameFocusRect)        &#123;            return;        &#125;        QProxyStyle::drawPrimitive(element, option, painter, widget);    &#125;&#125;;#endif // NOFOCUSRECTSTYLE_H\n\n// æ–‡ä»¶å: main.cpp#include &quot;Widget.h&quot;#include &quot;NoFocusRectStyle.h&quot;#include &lt;QApplication&gt;int main(int argc, char *argv[])&#123;    QApplication app(argc, argv);    NoFocusRectStyle *style = new NoFocusRectStyle(app.style());    app.setStyle(style); // Ownership of the style object is transferred to QApplication    Widget w;    w.show();    return app.exec();&#125;\n\næ— æ³•æ‹–å…¥æ–‡ä»¶åˆ° QListWidgetä¸€èˆ¬è€Œè¨€ï¼Œåªéœ€è¦åšå¦‚ä¸‹æ“ä½œï¼ŒQWidget å³å¯æ”¯æŒæ‹–å…¥æ–‡ä»¶ï¼š\nsetDragDropMode(QAbstractItemView::DropOnly); // ä»…æ”¯æŒæ‹–å…¥æ–‡ä»¶// é‡å†™dragEnterEventï¼Œå½“æ‹–å…¥æ–‡ä»¶è¿›å…¥æ—¶è¢«è°ƒç”¨ï¼Œå¯ä»¥åœ¨è¯¥å‡½æ•°ä¸­å–æ¶ˆæ‹–å…¥æ“ä½œvoid dragEnterEvent(QDragEnterEvent* e) override;// é‡å†™dropEventï¼Œå½“æ‹–å…¥æ–‡ä»¶å¹¶é‡Šæ”¾é¼ æ ‡æ—¶è¢«è°ƒç”¨void dropEvent(QDropEvent* e) override;\n\nä½†åœ¨æ‰§è¡Œä¸Šè¿°æ“ä½œåï¼Œæˆ‘ä»¬æ‹–å…¥æ–‡ä»¶åˆ° QListWidget æ—¶ï¼Œå´åªèƒ½æ”¶åˆ° dragEnterEvent äº‹ä»¶ï¼Œå´æ— æ³•æ”¶åˆ° dropEvent äº‹ä»¶ã€‚\n\n\nå› ä¸ºè¿˜éœ€è¦é‡å†™ dragMoveEvent æ–¹æ³•ï¼Œå¦‚ï¼š\nvoid dragMoveEvent(QDragMoveEvent* e) &#123;    e-&gt;acceptProposedAction();&#125;\n\nä½¿ QListWidgetItem è‡ªé€‚åº”å°ºå¯¸QListWidget æ·»åŠ  item çš„æ–¹æ³•å¦‚ä¸‹ï¼š\nQListWidget* list = new QListWidget();// ...QListWidgetItem* item = new QListWidgetItem();list-&gt;addItem(item);\n\nå¦‚éœ€è¦è‡ªå®šä¹‰ Item çš„å¸ƒå±€ï¼Œè¿˜å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Widget æ¥å®ç°ï¼Œå¦‚ï¼š\nQListWidget* list = new QListWidget();// ...QListWidgetItem* item = new QListWidgetItem();list-&gt;addItem(item);CustomWidget * customWidget = new CustomWidget();list-&gt;setItemWidget(item, customWidget);  // è®¾ç½®Itemçš„è‡ªå®šä¹‰Widget\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸º item è®¾ç½® size hintï¼Œitem ä¼šè‡ªåŠ¨æ ¹æ® item çš„æ•°æ®ï¼ˆå¦‚ textï¼‰è®¡ç®— size hintã€‚ä½†å¦‚æœæ˜¯è‡ªå®šä¹‰çš„ Widgetï¼Œåˆ™æ— æ³•è‡ªåŠ¨è®¡ç®— size hintï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½® size hintï¼Œå¦‚ï¼š\nint vScrollbarWidth = 0;if (verticalScrollBar())    vScrollbarWidth = verticalScrollBar()-&gt;width();// å‡å»çºµåæ ‡çš„å®½åº¦item-&gt;setSizeHint(QSize(list-&gt;width() - vScrollbarWidth, widget-&gt;height()));\n\nQListWidget çš„æ»šåŠ¨æ¡é»˜è®¤æ˜¾ç¤ºç­–ç•¥æ˜¯ScrollBarAsNeededï¼Œå½“å®½åº¦ä¸å¤Ÿæ˜¾ç¤º Item æ—¶ï¼Œæ»šåŠ¨æ¡å°±ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæ­¤æ—¶è™½ç„¶ QListWidget å®½åº¦æ”¹å˜äº†ï¼Œä½† Item çš„å®½åº¦å´ä¸ä¼šæ”¹å˜ï¼ŒItem ä¸ä¼šæ”¶åˆ° ResizeEvent äº‹ä»¶ã€‚å¦‚éœ€ Item çš„å®½åº¦è·Ÿéš QListWidget å®½åº¦è€Œæ”¹å˜ï¼Œåˆ™éœ€è¦å…³é—­æ»šåŠ¨æ¡æ˜¾ç¤ºï¼Œå¹¶åœ¨ QListWidget çš„ ResizeEvent äº‹ä»¶ä¸­å®æ—¶è®¾ç½®æ¯ä¸ª Item çš„ size hintï¼Œä»£ç å¦‚ä¸‹ï¼š\n// å…³é—­æ»šåŠ¨æ¡list-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\n\nvoid FileList::resizeEvent(QResizeEvent* e) &#123;    int vScrollbarWidth = 0;    if (verticalScrollBar())        vScrollbarWidth = verticalScrollBar()-&gt;width();    int w = width();    int cnt = count();    for (int i = 0; i &lt; cnt; i++) &#123;        QListWidgetItem* it = item(i);        if (it) &#123;            CustomWidget* customWidget = dynamic_cast&lt;CustomWidget*&gt;(itemWidget(it));            if (customWidget) &#123;                it-&gt;setSizeHint(QSize(w - vScrollbarWidth, customWidget-&gt;height()));            &#125;        &#125;    &#125;    QListWidget::resizeEvent(e);&#125;\n\nå­çº¿ç¨‹ä¸­æ›´æ–° UIæ–¹æ³• 1: ä½¿ç”¨ä¿¡å·æ§½è¿™æ˜¯ä¸€ç§éå¸¸å¸¸è§„çš„æ–¹å¼ï¼Œé€šè¿‡è‡ªå®šä¹‰ä¿¡å·ã€æ§½ï¼Œè¿æ¥è¯¥ä¿¡å·å’Œæ§½ï¼Œåœ¨å­çº¿ç¨‹ä¸­å‘é€ä¿¡å·ï¼Œåœ¨æ§½ä¸­æ›´æ–° UIã€‚\nå®šä¹‰ä¿¡å·å’Œæ§½ï¼š\nsignals:    void updateUi(int v);private slots:    void onUpdateUi(int v);\n\nåœ¨å­çº¿ç¨‹ä¸­å‘é€ä¿¡å·ï¼š\n// è¿æ¥ä¿¡å·connect(this, &amp;UpdateUIInSubThread::updateUi, this, &amp;UpdateUIInSubThread::onUpdateUi, Qt::AutoConnection);std::thread t = std::thread([this]() &#123;    for (int i = 0; i &lt; 10000; i++) &#123;        emit updateUi(i); // å‘é€ä¿¡å·        std::this_thread::sleep_for(std::chrono::milliseconds(50));    &#125;&#125;);t.detach();\n\nåœ¨æ§½å‡½æ•°ä¸­æ›´æ–° UIï¼š\nvoid UpdateUIInSubThread::onUpdateUi(int v)&#123;    ui.label-&gt;setText(QString::number(v));&#125;\n\nè¿™ç§æ–¹å¼éœ€è¦å•ç‹¬é¢å¤–å®šä¹‰ä¿¡å·å’Œæ§½ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç¹çã€‚\næ–¹æ³• 2: ä½¿ç”¨ invokeMethodQMetaObject::invokeMethod å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\ntemplate &lt;typename Functor, typename FunctorReturnType&gt; bool QMetaObject::invokeMethod(QObject *context, Functor function, Qt::ConnectionType type = Qt::AutoConnection, FunctorReturnType *ret = nullptr)\n\nè¯¥å‡½æ•°å¯ä»¥åœ¨contextçš„äº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œfunctionå‡½æ•°ã€‚\nstd::thread t = std::thread([this]() &#123;    for (int i = 0; i &lt; 10000; i++) &#123;        if (QMetaObject::invokeMethod(this, [i, this]() &#123;            ui.label-&gt;setText(QString::number(i));        &#125;)) &#123;            qDebug() &lt;&lt; &quot;Update UI success&quot;;        &#125;        std::this_thread::sleep_for(std::chrono::milliseconds(50));    &#125;&#125;);t.detach();\n\nç”±äºåœ¨å­çº¿ç¨‹ä¸­æ›´æ–° UIï¼Œå› æ­¤ä¿¡å·å’Œæ§½è‚¯å®šä½¿ç”¨çš„æ˜¯ QueuedConnection çš„è¿æ¥æ–¹å¼ï¼Œæ‰€ä»¥æ— æ³•å°†FunctorReturnTypeè¿”å›ç»™è°ƒç”¨è€…ï¼Œå¦åˆ™ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š\nQMetaObject::invokeMethod: Unable to invoke methods with return values in queued connections\n\nå½“ç„¶ä¸Šè¿°ç¤ºä¾‹ä¸­ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ lambda è¡¨è¾¾å¼ï¼Œç›´æ¥è°ƒç”¨æ§½å‡½æ•°ï¼š\nstd::thread t = std::thread([this]() &#123;    for (int i = 0; i &lt; 10000; i++) &#123;        QMetaObject::invokeMethod(this, &quot;onUpdateUi&quot;, Qt::AutoConnection, Q_ARG(int, i));        std::this_thread::sleep_for(std::chrono::milliseconds(50));    &#125;&#125;);t.detach();\n\nåŠ è½½å­—ä½“æ–‡ä»¶å¦‚ä½•ä½¿ç”¨ Qt åŠ è½½å¤–éƒ¨å­—ä½“æ–‡ä»¶ï¼Œå¹¶éå†å­—ä½“åç§°å’Œæ ·å¼åç§°ã€‚\nbool LoadFont(const QString&amp; fontPath) &#123;    const int fontId = QFontDatabase::addApplicationFont(fontPath);    if (fontId == -1) &#123;        return false;    &#125;    // éå†å­—ä½“åå’Œæ ·å¼å#if QT_VERSION &gt;= QT_VERSION_CHECK(6, 0, 0)    const QStringList fontFamilyList = fontDb.applicationFontFamilies(fontId);    QString fontFamily;    foreach (fontFamily, fontFamilyList) &#123;        qDebug() &lt;&lt; &quot;Family:&quot; &lt;&lt; fontFamily;        const QStringList fontStyleList = QFontDatabase::styles(fontFamily);        QString fontStyle;        foreach (fontStyle, fontStyleList) &#123;            qDebug() &lt;&lt; &quot;\\tStyle:&quot; &lt;&lt; fontStyle;        &#125;    &#125;#else    QFontDatabase fontDb;    const QStringList fontFamilyList = fontDb.applicationFontFamilies(fontId);    QString fontFamily;    foreach (fontFamily, fontFamilyList) &#123;        qDebug() &lt;&lt; &quot;Family:&quot; &lt;&lt; fontFamily;        const QStringList fontStyleList = fontDb.styles(fontFamily);        QString fontStyle;        foreach (fontStyle, fontStyleList) &#123;            qDebug() &lt;&lt; &quot;\\tStyle:&quot; &lt;&lt; fontStyle;        &#125;    &#125;#endif    return true;&#125;\n\nQWidget å­ç±»æ— æ³•åº”ç”¨ QSSQWidget å­ç±»æ— æ³•åº”ç”¨ QSS æ ·å¼çš„é—®é¢˜æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œåœ¨ä½¿ç”¨ Qt è¿›è¡Œç•Œé¢å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç»§æ‰¿è‡ª QWidget æ¥å®ç°è‡ªå®šä¹‰æ§ä»¶ï¼ˆå½“ç„¶è¿™é‡Œè¯´çš„æ˜¯éé¡¶çº§çª—å£ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å‘ç°åœ¨è¯¥è‡ªå®šä¹‰æ§ä»¶ä¸Šåº”ç”¨ QSS æ ·å¼ä¼šæ— æ•ˆã€‚\nå¯¼è‡´è¿™ä¸ªé—®é¢˜çš„ä¸»è¦åŸå› æ˜¯ QWidget çš„ paintEvent å‡½æ•°å®ç°ä¸ºç©ºï¼Œæœªåšä»»ä½•ç»˜åˆ¶ï¼Œä¹Ÿæ²¡æœ‰å¯¹æ ·å¼è¡¨è¿›è¡Œåˆå§‹åŒ–å’Œç»˜åˆ¶ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š\nvoid QWidget::paintEvent(QPaintEvent *)&#123;&#125;\n\nè§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåœ¨ QWidget å­ç±»çš„ paintEvent å‡½æ•°ä¸­åˆå§‹åŒ–å¹¶ç»˜åˆ¶æ ·å¼è¡¨ï¼š\nvoid CustomWidget::paintEvent(QPaintEvent* e) &#123;    QStyleOption opt;    opt.init(this);    QPainter p(this);    style()-&gt;drawPrimitive(QStyle::PE_Widget, &amp;opt, &amp;p, this);&#125;\n\nå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é‡‡ç”¨å˜é€šçš„æ–¹æ³•ï¼Œæ”¹ä¸ºç»§æ‰¿è‡ªQFrameï¼Œå› ä¸º QFrame é»˜è®¤åˆå§‹åŒ–å’Œç»˜åˆ¶äº†æ ·å¼è¡¨ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š\nvoid QFrame::paintEvent(QPaintEvent *)&#123;    QPainter paint(this);    drawFrame(&amp;paint);&#125;/*!    \\internal    Used by QLabel and QLCDNumber */void QFrame::drawFrame(QPainter *p)&#123;    QStyleOptionFrame opt;    initStyleOption(&amp;opt);    style()-&gt;drawControl(QStyle::CE_ShapedFrame, &amp;opt, p, this);&#125;\n\nQSS è®¾ç½®æ»šåŠ¨æ¡çš„æ ·å¼&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n/*å‚ç›´æ»šåŠ¨æ¡*/QScrollBar:vertical &#123;  background: transparent; /*èƒŒæ™¯è‰²*/  width: 10px; /*å®½åº¦*/  margin: 0px 0px 0px 0px; /**/  padding-top: 12px; /*è·ç¦»ä¸Šé¢12px*/  padding-bottom: 12px; /*è·ç¦»åº•éƒ¨12px*/&#125;/*æ¨ªå‘æ»šåŠ¨æ¡*/QScrollBar:horizontal &#123;  background: transparent; /*èƒŒæ™¯è‰²*/  height: 10px; /*é«˜åº¦*/  margin: 0px 0px 0px 0px;  padding-left: 12px; /*è·ç¦»å·¦è¾¹12px*/  padding-right: 12px; /*è·ç¦»å³è¾¹12px*/&#125;/*å‚ç›´/æ¨ªå‘æ»šåŠ¨æ¡Hoveræ•ˆæœ*/QScrollBar:vertical:hover,QScrollBar:horizontal:hover &#123;  background: rgba(0, 0, 0, 30); /*èƒŒæ™¯è‰²*/  border-radius: 5px; /*åœ†è§’*/&#125;/*å‚ç›´æ»šåŠ¨æ¡ - æ»‘å—*/QScrollBar::handle:vertical &#123;  background: rgba(0, 0, 0, 50);  width: 10px;  border-radius: 5px;  border: none;&#125;/*æ¨ªå‘æ»šåŠ¨æ¡ - æ»‘å—*/QScrollBar::handle:horizontal &#123;  background: rgba(0, 0, 0, 50);  height: 10px;  border-radius: 5px;  border: none;&#125;/*å‚ç›´/æ¨ªå‘æ»šåŠ¨æ¡æ»‘å—Hoveræ•ˆæœ*/QScrollBar::handle:vertical:hover,QScrollBar::handle:horizontal:hover &#123;  background: rgba(0, 0, 0, 100);&#125;/*å‚ç›´æ»šåŠ¨æ¡ä¸‹éƒ¨åˆ†å—*/QScrollBar::add-page:vertical &#123;  width: 10px;  background: transparent;&#125;/*å‚ç›´æ»šåŠ¨æ¡ä¸Šé¢éƒ¨åˆ†å—*/QScrollBar::sub-page:vertical &#123;  width: 10px;  background: transparent;&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å³è¾¹éƒ¨åˆ†å—*/QScrollBar::add-page:horizontal &#123;  height: 10px;  background: transparent;&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å·¦è¾¹éƒ¨åˆ†å—*/QScrollBar::sub-page:horizontal &#123;  height: 10px;  background: transparent;&#125;/* ----------- å¯¹äºæ‰å¹³åŒ–è®¾è®¡é£æ ¼ï¼Œä¸‹é¢çš„æ ·å¼å¯ä»¥ä¸ç”¨è®¾ç½® ----------- *//*å‚ç›´æ»šåŠ¨æ¡é¡¶éƒ¨ä¸‰è§’å½¢ä½ç½®*/QScrollBar::sub-line:vertical &#123;  height: 12px;  width: 10px;  background: transparent;  subcontrol-position: top;&#125;/*å‚ç›´æ»šåŠ¨æ¡é¡¶éƒ¨ä¸‰è§’å½¢å›¾æ ‡*/QScrollBar::up-arrow:vertical &#123;  image: url(:/client/images/scrollbar_arrowup_normal.png);&#125;/*å‚ç›´æ»šåŠ¨æ¡é¡¶éƒ¨ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡Hoveræ•ˆæœ*/QScrollBar::up-arrow:vertical:hover &#123;  image: url(:/client/images/scrollbar_arrowup_down.png);&#125;/*å‚ç›´æ»šåŠ¨æ¡é¡¶éƒ¨ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡æŒ‰ä¸‹æ•ˆæœ*/QScrollBar::up-arrow:vertical:pressed &#123;  image: url(:/client/images/scrollbar_arrowup_highlight.png);&#125;/*å‚ç›´æ»šåŠ¨æ¡åº•éƒ¨ä¸‰è§’å½¢ä½ç½®*/QScrollBar::add-line:vertical &#123;  height: 12px;  width: 10px;  background: transparent;  subcontrol-position: bottom;&#125;/*å‚ç›´æ»šåŠ¨æ¡åº•éƒ¨ä¸‰è§’å½¢å›¾æ ‡*/QScrollBar::down-arrow:vertical &#123;  image: url(:/client/images/scrollbar_arrowdown_normal.png);&#125;/*å‚ç›´æ»šåŠ¨æ¡åº•éƒ¨ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡Hoveræ•ˆæœ*/QScrollBar::down-arrow:vertical:hover &#123;  image: url(:/client/images/scrollbar_arrowdown_down.png);&#125;/*å‚ç›´æ»šåŠ¨æ¡åº•éƒ¨ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡æŒ‰ä¸‹æ•ˆæœ*/QScrollBar::down-arrow:vertical:pressed &#123;  image: url(:/client/images/scrollbar_arrowdown_highlight.png);&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å·¦ä¾§ä¸‰è§’å½¢ä½ç½®*/QScrollBar::sub-line:horizontal &#123;  height: 10px;  width: 12px;  background: transparent;  subcontrol-position: left;&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å·¦ä¾§ä¸‰è§’å½¢å›¾æ ‡*/QScrollBar::left-arrow:horizontal &#123;  image: url(:/client/images/scrollbar_arrowleft_normal.png);&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å·¦ä¾§ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡Hoveræ•ˆæœ*/QScrollBar::left-arrow:horizontal:hover &#123;  image: url(:/client/images/scrollbar_arrowleft_down.png);&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å·¦ä¾§ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡æŒ‰ä¸‹æ•ˆæœ*/QScrollBar::left-arrow:horizontal:pressed &#123;  image: url(:/client/images/scrollbar_arrowleft_highlight.png);&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å³ä¾§ä¸‰è§’å½¢éƒ¨åˆ†*/QScrollBar::add-line:horizontal &#123;  height: 10px;  width: 12px;  background: transparent;  subcontrol-position: right;&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å³ä¾§ä¸‰è§’å½¢å›¾æ ‡*/QScrollBar::right-arrow:horizontal &#123;  image: url(:/client/images/scrollbar_arrowright_normal.png);&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å³ä¾§ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡Hoveræ•ˆæœ*/QScrollBar::right-arrow:horizontal:hover &#123;  image: url(:/client/images/scrollbar_arrowright_down.png);&#125;/*æ¨ªå‘æ»šåŠ¨æ¡å³ä¾§ä¸‰è§’å½¢å›¾æ ‡ é¼ æ ‡æŒ‰ä¸‹æ•ˆæœ*/QScrollBar::right-arrow:horizontal:pressed &#123;  image: url(:/client/images/scrollbar_arrowright_highlight.png);&#125;\n\nè‡ªå®šä¹‰å’Œç¾åŒ–èœå•åœ¨ Qt ä¸­å¯ä»¥é€šè¿‡ QSS å¯¹èœå•è¿›è¡Œæ ·å¼è®¾ç½®ï¼Œè€Œä¸”å¯¹äºéæ ‡å‡†èœå•é¡¹æˆ‘ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Widget çš„æ–¹æ³•æ¥å®ç°ï¼Œæœ¬æ–‡è®²è¿°åœ¨ Qt ä¸­ QMenu çš„ä½¿ç”¨æ–¹æ³•ã€‚\nèœå•åŸºæœ¬ä½¿ç”¨ä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†å³é”®èœå•çš„åˆ›å»ºæ–¹æ³•ï¼Œè¯¥èœå•åŒ…å«äº†å›¾æ ‡ã€é€‰ä¸­&#x2F;æœªé€‰ä¸­çŠ¶æ€ã€äºŒçº§èœå•ã€äº’æ–¥é€‰æ‹©ç­‰å¸¸ç”¨èœå•ç‰¹æ€§ï¼Œä»£ç å¦‚ä¸‹ï¼š\nQIcon settingIcon(&quot;:/MenuBeauty/setting.png&quot;);// å®šä¹‰ActionsQAction* action1 = new QAction(&quot;åŠ¨ä½œ1&quot;);QAction* action2 = new QAction(settingIcon, &quot;åŠ¨ä½œ2 æœ‰å›¾æ ‡&quot;);QAction* action3 = new QAction(&quot;åŠ¨ä½œ3 [æœªé€‰ä¸­]&quot;);action3-&gt;setCheckable(true);action3-&gt;setChecked(false);connect(action3, &amp;QAction::triggered, this, [action3](bool checked) &#123;    action3-&gt;setText(checked ? &quot;åŠ¨ä½œ3 [é€‰ä¸­]&quot; : &quot;åŠ¨ä½œ3 [æœªé€‰ä¸­]&quot;);&#125;);QAction* action4 = new QAction(&quot;Action4 åŠ¨ä½œå››æµ‹è¯•&quot;);QAction* action5 = new QAction(settingIcon, &quot;åŠ¨ä½œ5 ç¦ç”¨&quot;);action5-&gt;setEnabled(false);QAction* action6 = new QAction(settingIcon, &quot;åŠ¨ä½œ6 å­èœå•&quot;);&#123;    // åŠ¨ä½œ6çš„å­åŠ¨ä½œ    QAction* action6_1 = new QAction(&quot;åŠ¨ä½œ6.1&quot;);    action6_1-&gt;setCheckable(true);    QAction* action6_2 = new QAction(&quot;åŠ¨ä½œ6.1&quot;);    action6_2-&gt;setCheckable(true);    QAction* action6_3 = new QAction(&quot;åŠ¨ä½œ6.1&quot;);    action6_3-&gt;setCheckable(true);    // åŠ¨ä½œ6çš„å­èœå•    QMenu* action6SubMenu = new QMenu(this);    action6SubMenu-&gt;addAction(action6_1);    action6SubMenu-&gt;addAction(action6_2);    action6SubMenu-&gt;addAction(action6_3);    // äº’æ–¥å­èœå•é¡¹ï¼ŒåŒæ—¶åªèƒ½é€‰æ‹©ä¸€ä¸ª    QActionGroup* action6Group = new QActionGroup(this);    action6Group-&gt;setExclusive(true);    action6Group-&gt;addAction(action6_1);    action6Group-&gt;addAction(action6_2);    action6Group-&gt;addAction(action6_3);    action6-&gt;setMenu(action6SubMenu);&#125;// å®šä¹‰èœå•QMenu* menu = new QMenu(this);// æ·»åŠ Actionmenu-&gt;addActions(&#123;action1, action2, action3&#125;);menu-&gt;addSeparator();menu-&gt;addActions(&#123;action4, action5, action6&#125;);// é¼ æ ‡å³é”®å¼¹å‡ºèœå•this-&gt;setContextMenuPolicy(Qt::CustomContextMenu);connect(this, &amp;QWidget::customContextMenuRequested, this, [this, menu](const QPoint&amp; pos) &#123;    menu-&gt;exec(this-&gt;mapToGlobal(pos));&#125;);\n\nä¸Šè¿°èœå•æœªç»è¿‡ä»»ä½•ç¾åŒ–ï¼Œæ ·å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nä½¿ç”¨ QSS ç¾åŒ–èœå•ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹ QSS å¯¹ä¸Šé¢åˆ›å»ºçš„èœå•è¿›è¡Œç¾åŒ–ï¼Œå¯ä»¥ç¾åŒ–çš„é¡¹åŒ…å«èƒŒæ™¯ã€æ–‡æœ¬é¢œè‰²ã€è¾¹è·ã€å›¾æ ‡ç­‰ã€‚\nä¸ºäº†ä½¿å¤§å®¶ä¸è¢«é¢œè‰²å€¼æ‰€å›°æ‰°ï¼Œä¸‹é¢ QSS ä¸­çš„é¢œè‰²ç»Ÿä¸€ä½¿ç”¨é¢œè‰²åç§°è¡¨ç¤ºã€‚\n/* èœå•çš„å±æ€§ */QMenu &#123;  border: 1px solod red;  /* åœ†è§’ç”Ÿæ•ˆçš„å‰ææ˜¯èœå•çª—å£èƒŒæ™¯é€æ˜ */  border-radius: 10px;  background-color: blue;  font-size: 14px;  font-family: &quot;Microsoft YaHei&quot;;  /* è®¾ç½®èœå•é¡¹æœ€å°å®½åº¦ï¼Œæ­¤å¤„æœ‰bugï¼šè™½å¯è‡ªåŠ¨å¢é•¿ä½†å®é™…å®½åº¦æ¯”æ‰€éœ€å®½åº¦å° */  min-width: 160px;  /* èœå•å†…å®¹ä¸Šä¸‹è¾¹è·ä¸º10pxï¼Œé¢„ç•™åœ†è§’åŒºåŸŸ */  padding: 10px 0px 10px 0px;&#125;/* èœå•é¡¹çš„å±æ€§ */QMenu::item &#123;  border: none;  background-color: transparent;  color: white;  /* è®¾ç½®èœå•é¡¹æœ€å°é«˜åº¦ï¼Œå¯ä»¥è®©èœå•é¡¹çš„é«˜é€‚åº”å†…å®¹è‡ªåŠ¨å¢é•¿ */  min-height: 20px;  /* è®¾ç½®èœå•é¡¹æœ€å°å®½åº¦ï¼Œæ­¤å¤„æœ‰bugï¼šè™½å¯è‡ªåŠ¨å¢é•¿ä½†å®é™…å®½åº¦æ¯”æ‰€éœ€å®½åº¦å° */  min-width: 160px;  /* ä½¿èœå•é¡¹ä¹‹é—´åŠèœå•é¡¹å’Œå›¾æ ‡ä¹‹é—´ä¿æŒä¸€å®šé—´éš”ï¼Œè®¾ç½®ä¸Šä¸‹å·¦å³è¾¹è·ä¸º8pxï¼Œæ­¤å¤„ä¸èƒ½ç”¨margin */  padding: 8px 8px;&#125;/* èœå•é¡¹-é¼ æ ‡ç§»å…¥æ—¶çš„å±æ€§ */QMenu::item:selected &#123;  background-color: green;  color: black;&#125;/* èœå•é¡¹-ç¦ç”¨æ—¶çš„å±æ€§ */QMenu::item:disabled &#123;  background-color: gray;  color: white;&#125;/* åˆ†å‰²çº¿çš„å±æ€§ */QMenu::separator &#123;  height: 1px;  background-color: red;  /* å·¦å³è¾¹è·ï¼š6px */  margin: 0x 6px 0px 6px;&#125;/* å›¾æ ‡çš„å±æ€§ */QMenu::icon &#123;  width: 12px;  height: 12px;  /* å·¦è¾¹è·ï¼š12px */  margin: 0 0 0 12px;&#125;/* æŒ‡ç¤ºå™¨çš„å±æ€§ *//* è¿™é‡Œå°†äº’æ–¥å’Œéäº’æ–¥Actionçš„æŒ‡ç¤ºå™¨æ ·å¼è®¾ç½®ä¸ºä¸€æ ·çš„ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä¸ä¸€æ · */QMenu::indicator:non-exclusive:checked,QMenu::indicator:exclusive:checked &#123;  width: 12px;  height: 12px;  /* å·¦è¾¹è·ï¼š8px */  margin: 0 0 0 8px;  image: url(:/MenuBeauty/check.png);&#125;QMenu::indicator:non-exclusive:unchecked,QMenu::indicator:exclusive:unchecked &#123;  width: 12px;  height: 12px;  /* å·¦è¾¹è·ï¼š8px */  margin: 0 0 0 8px;  image: url(:/MenuBeauty/unchecked.png);&#125;\n\nä¸ºäº†ä½¿èœå•çš„åœ†è§’ç”Ÿæ•ˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç§»é™¤èœå•çš„è¾¹æ¡†ã€é˜´å½±ï¼Œå¹¶å°†èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼Œä»£ç å¦‚ä¸‹ï¼š\nmenu-&gt;setWindowFlags(action6SubMenu-&gt;windowFlags() |                                Qt::FramelessWindowHint |   // æ— è¾¹æ¡†                                Qt::NoDropShadowWindowHint  // ç§»é™¤ç³»ç»Ÿé˜´å½±);menu-&gt;setAttribute(Qt::WA_TranslucentBackground); // èƒŒæ™¯é€æ˜\n\nç¾åŒ–åçš„èœå•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nQSS ç¾åŒ– QMenuQMenu æ”¯æŒ QSS ç›’å­æ¨¡å‹ï¼Œå…¶é€šç”¨å±æ€§å¦‚ä¸‹ï¼š\nborderborder-radiusmarginpaddingbackgroundcolorfontborder-image\n\nQSS è¿˜å¯ä»¥å¯¹ QMenu çš„å­æ§ä»¶è¿›è¡Œè®¾ç½®ï¼Œæ”¯æŒ QMenu å­æ§ä»¶å¦‚ä¸‹ï¼š\nitemindicatorseparatorright-arrowleft-arrowscrollertearoff\n\nQMenu ä¸æ”¯æŒä¼ªçŠ¶æ€ï¼Œåªæœ‰å…¶å­æ§ä»¶æ”¯æŒä¼ªçŠ¶æ€ï¼Œæ”¯æŒçš„ä¼ªçŠ¶æ€å¦‚ä¸‹ï¼š\ndefaultselectedexclusivenon-exclusive\n\nå…·ä½“çš„å­æ§ä»¶å’Œä¼ªçŠ¶æ€çš„å«ä¹‰ï¼Œå¯ä»¥å‚è€ƒ QSSåŸºæœ¬ä½¿ç”¨æ–¹æ³• æ–‡ç« ã€‚\nè‡ªå®šä¹‰èœå•é¡¹å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸Šè¿°å¸¸è§„çš„èœå•é¡¹å°±å¯ä»¥æ»¡è¶³è¦æ±‚ï¼Œä½†åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„èœå•é¡¹å¯èƒ½ç”±æ›´åŠ å¤æ‚çš„ Widget ç»„åˆè€Œæˆï¼Œæ¯”å¦‚ä¸‹é¢æ’­æ”¾å™¨çš„èœå•ï¼š\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨QWidgetActionæ¥å®ç°ä¸Šè¿°èœå•æ•ˆæœï¼ŒQWidgetActionå¯ä»¥å°†ä¸€ä¸ª QWidget æ”¾å…¥èœå•é¡¹çš„å®¹å™¨å†…ï¼Œä»è€Œå®ç°è‡ªå®šä¹‰èœå•é¡¹ã€‚\nä¸‹é¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåŒ…å« 3 ä¸ªæŒ‰é’®çš„èœå•é¡¹ï¼Œç‚¹å‡»æŒ‰é’®ä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼š\nQWidgetAction* action7 = new QWidgetAction(this);&#123;    QWidget* widget = new QWidget();    QHBoxLayout* hl = new QHBoxLayout(widget);    auto createPushButtonFn = [this](QString title) &#123;        QPushButton* btn = new QPushButton(title);        connect(btn, &amp;QPushButton::clicked, this, [this]() &#123;            QMessageBox::information(this, &quot;Clicked&quot;, ((QPushButton*)sender())-&gt;text());        &#125;);        return btn;    &#125;;    hl-&gt;addWidget(createPushButtonFn(&quot;Button1&quot;));    hl-&gt;addWidget(createPushButtonFn(&quot;Button2&quot;));    hl-&gt;addWidget(createPushButtonFn(&quot;Button3&quot;));    action7-&gt;setDefaultWidget(widget);&#125;menu-&gt;addAction(action7);\n\næ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š\næˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ QSS å¯¹èœå•é¡¹å†…çš„æ§ä»¶è¿›è¡Œæ ·å¼è®¾ç½®ï¼Œå¦‚ï¼š\nQMenu QPushButton &#123;  border: none;  border-radius: 10px;  background-color: black;  color: white;&#125;\n\nğŸ“Œ é™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\nå¼¹çª—å¤–éƒ¨ç‚¹å‡»æ—¶è‡ªåŠ¨å…³é—­åœ¨ Qt ç¼–ç¨‹ä¸­å¦‚ä½•å®ç°å½“é¼ æ ‡ç‚¹å‡»å¼¹çª—å¤–éƒ¨åŒºåŸŸæ—¶ï¼Œè¯¥å¼¹çª—å¯ä»¥è‡ªåŠ¨å…³é—­çš„æ•ˆæœã€‚\nActivationChange äº‹ä»¶å¼¹çª—é€šè¿‡ç›‘å¬ Activation æ”¹å˜äº‹ä»¶ï¼Œæ¥åˆ¤æ–­è‡ªèº«æ˜¯å¦è¿˜æ˜¯å½“å‰çš„æ´»åŠ¨çª—å£ï¼Œå¦‚æœä¸æ˜¯åˆ™å…³é—­è‡ªèº«ã€‚\nåœ¨ QWidget é‡Œé¢é‡å†™ eventï¼Œæ•è· QEvent::ActivationChange äº‹ä»¶ï¼š\nbool UserCenterDlg::event(QEvent* e) &#123;    if (e-&gt;type() == QEvent::ActivationChange) &#123;        QWidget* curActiveWin = QApplication::activeWindow();        if (curActiveWin != this) &#123;            this-&gt;close();        &#125;    &#125;    return QWidget::event(e);&#125;\n\nQt::WA_NoMouseReplay ä»‹ç»\næ‘˜è‡ª Qt å¸®åŠ©æ–‡æ¡£ï¼š\nQt::WA_NoMouseReplay: Used for pop-up widgets. Indicates that the most recent mouse press event should not be replayed when the pop-up widget closes. The flag is set by the widgetâ€™s author and cleared by the Qt kernel every time the widget receives a new mouse event.\n\nQt::WA_NoMouseReplay å±æ€§å¯ä»¥ç”¨æ¥é¿å…å¦‚ä¸‹æƒ…å†µçš„å‘ç”Ÿï¼šåœ¨é¼ æ ‡ç‚¹å‡» Popup Widget å¤–éƒ¨åŒºåŸŸæ—¶ï¼Œè¯¥ Widget æ¥æ”¶åˆ°è‡ªèº«çš„ Activation çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå…³é—­è‡ªèº«ï¼Œä½†åœ¨è¯¥ Widget åœ¨å…³é—­åï¼ŒQt ä¾ç„¶ä¼šå°†é¼ æ ‡ç‚¹å‡»äº‹ä»¶ç»§ç»­å‘ä¸‹ä¼ é€’ï¼Œä»è€Œçª—å£å¤–åŒºåŸŸä¸‹é¢çš„æ§ä»¶ä¹Ÿä¼šè¢«ç‚¹å‡»ã€‚\nç”±äº Qt::WA_NoMouseReplay å±æ€§åªå¯¹å…·æœ‰ Popup å±æ€§çš„ Widget èµ·ä½œç”¨ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ QWidgetï¼Œä¸èƒ½ä½¿ç”¨ QDialogï¼Œå¹¶è®¾ç½® Qt::Popup å±æ€§ã€‚\nsetWindowFlags(windowFlags() | Qt::Popup);\n\nä½•æ—¶è®¾ç½® Qt::WA_NoMouseReplay å±æ€§äº†ï¼Ÿ\né‡å†™ mousePressEventï¼Œåœ¨é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè®¾ç½® Qt::WA_NoMouseReplay å±æ€§ã€‚\nvoid UserCenterDlg::mousePressEvent(QMouseEvent* e) &#123;    setAttribute(Qt::WA_NoMouseReplay);    QWidget::mousePressEvent(e);&#125;\n\nè‡ªå®šä¹‰ closed ä¿¡å·QWidget æ²¡æœ‰å…³é—­ä¿¡å·ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å…³é—­ä¿¡å·ï¼Œè¯¥ä¿¡å·åœ¨ closeEvent ä¸­è§¦å‘ã€‚\nvoid UserCenterDlg::closeEvent(QCloseEvent* e) &#123;    emit closed();    QWidget::closeEvent(e);&#125;\n\nQPixmap ä½¿ç”¨è¦ç‚¹\nQPixmap::size() å€¼ä¸ç¨‹åºçš„ devicePixelRatio æ— å…³ï¼Œè¾“å‡ºçš„æ˜¯å›¾ç‰‡åŸå§‹å°ºå¯¸ã€‚\nAspectRatioMode å–å€¼ï¼š\nQt::IgnoreAspectRatio å¿½ç•¥å›¾ç‰‡åŸé•¿å®½æ¯”ï¼Œå°†å›¾ç‰‡ç¼©æ”¾åˆ°æŒ‡å®šå°ºå¯¸\nQt::KeepAspectRatio åœ¨ä¿æŒå›¾ç‰‡åŸé•¿å®½æ¯”å’Œå›¾ç‰‡æ‰€æœ‰å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¡«å……æ»¡ç›®æ ‡çŸ©å½¢ã€‚\nQt::KeepAspectRatioByExpanding åœ¨ä¿æŒé•¿å®½æ¯”çš„æƒ…å†µä¸‹ï¼Œæ‹‰ä¼¸å›¾ç‰‡ä¿è¯å¡«å……æ»¡ç›®æ ‡çŸ©å½¢ï¼Œå¯èƒ½ä¼šèˆå¼ƒéƒ¨åˆ†å›¾ç‰‡å…ƒç´ ã€‚\n\n\n\n\n\nscaledToWidthã€scaledToHeight å‡½æ•°å¯ä»¥å®ç°åœ¨ä¿æŒåŸå›¾ç‰‡é•¿å®½æ¯”çš„å‰æä¸‹ï¼Œå°†å›¾ç‰‡ç¼©æ”¾åˆ°æŒ‡å®šçš„å®½æˆ–è€…é«˜ã€‚\ndrawPixmap å‡½æ•°çš„å‚æ•°ä»å·¦åˆ°å³ä¾æ¬¡æ˜¯ï¼šç›®æ ‡åŒºåŸŸ -&gt; pix -&gt; æºåŒºåŸŸã€‚ç›®æ ‡åŒºåŸŸä¼šè€ƒè™‘å½“å‰ Widget çš„ devicePixelRatioï¼Œè€ŒæºåŒºåŸŸåˆ™ä¸ devicePixelRatio æ— å…³ã€‚\n\nå¼€å¯ç¨‹åº DPI ç¼©æ”¾    QGuiApplication::setAttribute(Qt::AA_EnableHighDpiScaling);    QGuiApplication::setAttribute(Qt::AA_UseHighDpiPixmaps);#if (QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0))    QGuiApplication::setHighDpiScaleFactorRoundingPolicy(Qt::HighDpiScaleFactorRoundingPolicy::PassThrough);#endif\n\nQPixmap::devicePixelRatioé¦–å…ˆ QPixmap::devicePixelRatio ä»…é€‚ç”¨äºå¼€å¯äº† DPI ç¼©æ”¾çš„ç¨‹åºã€‚\né«˜åˆ†è¾¨ç‡ç‰ˆæœ¬çš„å›¾ç‰‡æœ‰å¤§äº 1 çš„è®¾å¤‡åƒç´ æ¯”ï¼ˆå³ QPixmap::devicePixelRatioï¼‰ï¼Œå¦‚æœè¯¥å€¼åŒ¹é…åº•å±‚ QPaintDevice çš„å€¼ï¼Œå®ƒå°†ç›´æ¥ç»˜åˆ¶åˆ°è®¾å¤‡ä¸Šï¼Œè€Œä¸åº”ç”¨é¢å¤–çš„è½¬æ¢ã€‚\nè¯¥å€¼ç”¨äºæŒ‡å®šå½“å‰ QPixmap å›¾ç‰‡æ˜¯åŸºäº 1 å€å›¾çš„å‡ å€ç¼©æ”¾å›¾ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨drawPixmapå‡½æ•°æ—¶ï¼Œå¦‚æœè¯¥ç›®æ ‡åŒºåŸŸå‚æ•°æœªæŒ‡å®šå®½å’Œé«˜ï¼ŒQPixmap::devicePixelRatio æ‰ç”Ÿæ•ˆã€‚\nå¦‚ä¸‹é¢çš„ drawPixmap åŸå‹ï¼š\nvoid QPainter::drawPixmap(int x, int y, const QPixmap &amp;pixmap, int sx, int sy, int sw, int sh)void QPainter::drawPixmap(const QPointF &amp;point, const QPixmap &amp;pixmap, const QRectF &amp;source)void QPainter::drawPixmap(const QPoint &amp;point, const QPixmap &amp;pixmap, const QRect &amp;source)void QPainter::drawPixmap(const QPointF &amp;point, const QPixmap &amp;pixmap)void QPainter::drawPixmap(const QPoint &amp;point, const QPixmap &amp;pixmap)void QPainter::drawPixmap(int x, int y, const QPixmap &amp;pixmap)\n\nç¤ºä¾‹ï¼ˆç¨‹åºå·²å¼€å¯ DPI ç¼©æ”¾ï¼‰ï¼š\nvoid QtWidgetsApplication1::paintEvent(QPaintEvent* e)&#123;    qDebug() &lt;&lt; this-&gt;devicePixelRatioF(); // å½“å‰ç¨‹åºçš„DPIç¼©æ”¾ä¸º1.5    QPainter painter(this);    QPixmap pix(&quot;D:\\\\gril.png&quot;); // gril.pngå›¾ç‰‡å®é™…å°ºå¯¸ä¸º400*400    // å‘ŠçŸ¥ç¨‹åºè¯¥å›¾ç‰‡æ˜¯åŸºäº1å€å›¾è¿›è¡Œ4å€æ”¾å¤§åçš„ï¼Œå³1å€å›¾ä¸ºå®½é«˜ä¸º400/4    pix.setDevicePixelRatio(4);    // å®é™…ç»˜åˆ¶çš„å›¾ç‰‡å®½åº¦ä¸º150*150ï¼Œå·¦ä¸Šè§’åæ ‡ä¸º150*150    painter.drawPixmap(QPoint(100,100), pix);&#125;\n\n\nQt çš„å¸ƒå±€æŠ€å·§æ‰‹åŠ¨æ‹–æ”¾é€šè¿‡åœ¨ Qt Designer ä¸­æ‰‹åŠ¨æ‹–æ”¾æ§ä»¶ï¼Œå¯ä»¥å¿«é€Ÿå®ç°ç•Œé¢å¸ƒå±€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nè¿™ç§æ–¹å¼å¯¹åˆå­¦è€…éå¸¸å‹å¥½ï¼Œå¯ä»¥å¿«é€Ÿä¸Šæ‰‹å¼€å‘ä¸€ä¸ªç•Œé¢ï¼Œå¢åŠ æˆå°±æ„Ÿã€‚ä½†æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæ‹–æ”¾å¸ƒå±€ä¸æ˜¯ Qt å¸ƒå±€çš„å…¨éƒ¨ï¼Œè¿™ç§æ–¹å¼ä»…é€‚åˆç®€å•çš„ç•Œé¢å¸ƒå±€ã€‚\nåœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç•Œé¢ä¸Šçš„æ§ä»¶ä¼šæ¯”ä¸Šé¢ç¤ºä¾‹ä¸­çš„å¤šå¾—å¤šï¼Œå¸ƒå±€ä¹Ÿä¼šæ›´åŠ å¤æ‚ï¼Œè€Œä¸”ç•Œé¢é€šå¸¸è¿˜éœ€è¦åå¤åœ°è°ƒæ•´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç»§ç»­é€šè¿‡æ‰‹åŠ¨æ‹–æ”¾çš„æ–¹å¼æ¥è¿›è¡Œå¸ƒå±€ï¼Œåœ¨æ¯æ¬¡ç•Œé¢è°ƒæ•´æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰“ç ´ï¼ˆåˆ†æ‹†ï¼‰åŸæœ‰çš„å¸ƒå±€ï¼Œå¹¶åœ¨ä¿®æ”¹å®Œæˆä¹‹åé‡æ–°è¿›è¡Œå¸ƒå±€ï¼Œå¯èƒ½è¿˜éœ€è¦é‡æ–°è®¾ç½®å¸ƒå±€çš„ Spacing å’Œ ContentsMarginsï¼Œæ¯ä¸€æ¬¡ä¿®æ”¹éƒ½éå¸¸è´¹åŠ²ã€‚\n\né¢˜å¤–è¯ï¼šæ‰‹åŠ¨æ‹–æ”¾æ§ä»¶å¯¹æ‰‹çš„ç¨³å®šæ€§è¦æ±‚è¾ƒé«˜ï¼Œå¯èƒ½æ‰‹ç¨ä¸€æŠ–ï¼Œæ•´ä¸ªå¸ƒå±€å°±é”™ä¹±äº†ï¼Œåˆå¾—è¿˜åŸäº†é‡æ–°æ¥ã€‚\n\nä»£ç å¸ƒå±€æˆ‘é€šå¸¸ä½¿ç”¨ä»£ç çš„æ–¹å¼æ¥è¿›è¡Œ Qt ç•Œé¢å¸ƒå±€ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç å®ç°äº†ä¸ä¸Šé¢ç¤ºä¾‹ä¸€æ ·çš„å¸ƒå±€æ•ˆæœï¼š\nQLabel* lblUserName = new QLabel(&quot;ç”¨æˆ·å: &quot;);QLabel* lblPassword = new QLabel(&quot;å¯†ç : &quot;);QLineEdit* editUserName = new QLineEdit();QLineEdit* editPassword = new QLineEdit();QPushButton* btnLogin = new QPushButton(&quot;ç™»å½•&quot;);QPushButton* btnRegister = new QPushButton(&quot;æ³¨å†Œ&quot;);QHBoxLayout* hUserName = new QHBoxLayout();hUserName-&gt;addWidget(lblUserName);hUserName-&gt;addWidget(editUserName);QHBoxLayout* hPassword = new QHBoxLayout();hPassword-&gt;addWidget(lblPassword);hPassword-&gt;addWidget(editPassword);QHBoxLayout* hButton = new QHBoxLayout();hButton-&gt;addStretch();hButton-&gt;addWidget(btnRegister);hButton-&gt;addWidget(btnLogin);hButton-&gt;addStretch();QVBoxLayout* vMain = new QVBoxLayout();vMain-&gt;addLayout(hUserName);vMain-&gt;addLayout(hPassword);vMain-&gt;addStretch();vMain-&gt;addLayout(hButton);this-&gt;setLayout(vMain);\n\nå¤§å®¶çœ‹åˆ°ä¸Šé¢ä»£ç åï¼Œç¬¬ä¸€æ„Ÿè§‰è‚¯å®šæ˜¯â€œæˆ‘çš„ä¸ªè€å¤©ï¼Œè¿™ä¹ˆå¤æ‚â€ï¼Œè¿™ä¸ªå¯ä»¥ç†è§£ã€‚ä½†è¿™ç§æ–¹å¼çš„å¥½å¤„ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œæ¯”å¦‚çµæ´»æ€§æ›´å¤§ï¼ŒåæœŸè°ƒæ•´ã€å¤ç”¨ã€ç»´æŠ¤ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œè€Œä¸”å¯¹äºè‡ªå®šä¹‰æ§ä»¶æ¯”è¾ƒå¤šçš„ç•Œé¢ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥åˆ›å»ºå¯¹åº”ç±»å‹çš„å®ä¾‹ï¼Œä¸éœ€è¦åœ¨è®¾è®¡å™¨ä¸Šè¿›è¡Œç±»å‹æå‡ã€‚\nå¸ƒå±€æè¿°è¯­è¨€æˆ‘åœ¨è¿™é‡Œä¸æ˜¯ä¸ºäº†åˆ›é€ ä¸€ç§æ–°çš„è¯­è¨€ï¼Œè€Œæ˜¯å—åˆ°äº† Flutter ç•Œé¢å¸ƒå±€æ–¹å¼çš„å¯å‘ï¼Œå¯¹ Qt çš„å¸ƒå±€è¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–äº†ä¸Šè¿°å¸ƒå±€ä»£ç ã€‚\nä¸‹é¢æ˜¯ä¸Šè¿°ç¤ºä¾‹ç®€åŒ–åçš„å¸ƒå±€ä»£ç ï¼š\nauto layout = VBox(    HBox(lblUserName, editUserName),    HBox(lblPassword, editPassword),    Stretch(),    HBox(Stretch(), btnRegister, btnLogin, Stretch()));setLayout(layout);\n\nä»ä»£ç é‡æ¥çœ‹ï¼Œæ˜æ˜¾å°‘äº†å¾ˆå¤šï¼Œè€Œä¸”æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä»£ç çš„å±‚æ¬¡ç»“æ„å¿«é€Ÿçœ‹å‡ºç•Œé¢çš„å¸ƒå±€ç»“æ„ã€‚\nåœ¨æ­¤çœç•¥äº† VBoxã€HBox ç­‰ç±»çš„å®ç°ä»£ç ï¼Œå¦‚æœæ‚¨å¯¹ä¸Šè¿° Qt å¸ƒå±€æ–¹å¼çš„å…·ä½“å®ç°æ„Ÿå…´è¶£ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚\nå›¾ç‰‡æŒ‰ä¹å®«æ ¼æ¨¡å¼ç¼©æ”¾æˆ‘ä»¬åœ¨ç¼©æ”¾å›¾ç‰‡æ—¶ï¼Œéƒ½æœŸæœ›èƒ½ä¿æŒå›¾ç‰‡çš„åŸé•¿å®½æ¯”ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é˜²æ­¢å›¾ç‰‡å˜å½¢ï¼Œä½†å¾€å¾€äº‹ä¸æ„¿è¿ï¼Œæœ‰äº›æ—¶å€™æˆ‘ä»¬æ²¡åŠæ³•ä¿æŒåŸå›¾çš„é•¿å®½æ¯”ä¸å˜ï¼Œæ¯”å¦‚éœ€è¦åœ¨ä¿æŒå›¾ç‰‡é«˜åº¦ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä»…æ¨ªå‘æ‹‰ä¼¸å›¾ç‰‡ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´å›¾ç‰‡å˜å½¢ã€‚\nä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¹å®«æ ¼æ¨¡å¼è¿›è¡Œå›¾ç‰‡çš„ç¼©æ”¾ã€‚\nä¹å®«æ ¼æ¨¡å¼å°±æ˜¯å°†å›¾ç‰‡åˆ‡åˆ†ä¸ºä¹å—ï¼ˆä¸å¼ºåˆ¶åˆ‡åˆ†çš„æ¯ä¸€å—å¿…é¡»ç­‰åˆ†ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å›¾ç‰‡ç¼©æ”¾æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¿æŒ 1ã€3ã€7ã€9 å››ä¸ªé¡¶ç‚¹ä½ç½®çš„å›¾ç‰‡ä¸å˜ï¼Œå¯¹ 2ã€4ã€5ã€6ã€8 äº”ä¸ªåŒºåŸŸè¿›è¡Œç¼©æ”¾ã€‚\n\nä½¿ç”¨ QSS å®ç°åœ¨ Qt ä¸­å®ç°å›¾ç‰‡æŒ‰ä¹å®«æ ¼ç¼©æ”¾æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ QSS çš„border-imageå±æ€§æ¥å®ç°ï¼Œé€šè¿‡ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹æ¡†çš„å®½åº¦æˆ–é«˜åº¦æ¥è®¾ç½® 1ã€3ã€7ã€9 å››ä¸ªé¡¶ç‚¹çš„å¤§å°ã€‚\nborder-image: url(:/Sample/image/NinePatchTest.png);border-left: 210px;border-top: 180px;border-right: 300px;border-bottom: 227px;\n\nä¸ºäº†ä¾¿äºæµ‹è¯•ï¼Œæˆ‘åˆ¶ä½œäº†ä¸€ä¸ªä¹å®«æ ¼æµ‹è¯•å›¾ç‰‡ï¼ˆæ•´ä¸ªå›¾ç‰‡çš„å®½é«˜ä¸º 1280*720ï¼‰ï¼š\n\né€šè¿‡è¿™ç§æ–¹æ³•å®ç°çš„ä¹å®«æ ¼ç¼©æ”¾æœ‰ä¸€ä¸ªå¼Šç«¯ï¼š\nè¯¥æ–¹æ¡ˆä¼šå§‹ç»ˆä¿æŒ 1ã€3ã€7ã€9 å››ä¸ªåŒºåŸŸå›¾ç‰‡çš„å®½é«˜ä¸å˜ï¼Œå¦‚ 1 å·åŒºåŸŸæ˜¯210*180ï¼Œå½“æˆ‘ä»¬å¯¹å›¾ç‰‡è¿›è¡Œæ”¾å¤§æ—¶ï¼Œè¿™ä¸ªè¡Œä¸ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†å½“æˆ‘ä»¬ç¼©å°å›¾ç‰‡æ—¶ï¼Œç¼©å°åçš„å›¾ç‰‡å®½é«˜ä¸è¶³ä»¥å®¹çº³ 4 ä¸ªé¡¶è§’å›¾ç‰‡æ—¶ï¼Œç¼©å°æ“ä½œå°±ä¼šå‡ºç°éé¢„æœŸçš„è¡Œä¸ºï¼Œå¯èƒ½å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nè¿™ç§å¼Šç«¯è¿˜ä¼šä½“ç°åœ¨æ”¯æŒé«˜ DPI ç¼©æ”¾çš„ Qt ç¨‹åºä¸­ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªæ”¯æŒ DPI ç¼©æ”¾çš„ç¨‹åºä¸­ï¼Œä¸ºå®½é«˜ä¸º640*360çš„ QWidget è®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œæˆ‘ä»¬çŸ¥é“ä¸åŒçš„ devicePixelRatio ä¼šå¯¼è‡´å®é™…æ¸²æŸ“çš„å›¾ç‰‡å®½é«˜ä¸åŒï¼Œå¦‚ devicePixelRatio ä¸º 1 æ—¶ï¼Œå›¾ç‰‡æ¸²æŸ“åŒºåŸŸä¸º640*360ï¼Œ è€Œ devicePixelRatio ä¸º 2 æ—¶ï¼Œå®é™…æ¸²æŸ“åŒºåŸŸä¸º1280*720ï¼Œä¸ºäº†ä¿è¯ç¨‹åºåœ¨ä¸åŒ DPI çš„ç¯å¢ƒä¸‹éƒ½æœ‰æ¯”è¾ƒå¥½çš„ç•Œé¢å‘ˆç°ï¼Œæˆ‘ä»¬é€šå¸¸ç®€å•å¾—æŒ‡å®šä¸€ä¸ªå€å›¾ï¼ˆå¦‚ 2 å€å›¾ï¼‰è®©ç¨‹åºè‡ªåŠ¨è¿›è¡Œå›¾ç‰‡ç¼©æ”¾ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ SVG æˆ–é’ˆå¯¹ä¸åŒ DPI ä½¿ç”¨ä¸åŒçš„å›¾ç‰‡ï¼‰ã€‚\nè€Œä½¿ç”¨ border-left ç­‰å±æ€§æŒ‡å®šçš„å®½åº¦æ˜¯å›ºå®šçš„ï¼Œé¡¶ç‚¹å›¾ç‰‡æ— æ³•å‚ä¸åˆ°è‡ªåŠ¨ç¼©æ”¾ä¸­æ¥ï¼Œä»è€Œä¼šå¯¼è‡´è¿™ä¸€ DPI é€‚é…æœºåˆ¶å¤±æ•ˆã€‚ä¸‹ä¸€èŠ‚ä»‹ç»çš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸€å¼Šç«¯ã€‚\nä½¿ç”¨ä»£ç å®ç°ä¹å®«æ ¼ç¼©æ”¾æœ¬èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨ä»£ç æ¥å®ç°ä¹å®«æ ¼æ¨¡å¼ç¼©æ”¾å›¾ç‰‡ï¼Œå®ç°åŸç†å¤§è‡´å¦‚ä¸‹ï¼š\næå–ä¹ä¸ªåŒºåŸŸçš„å›¾ç‰‡ï¼Œä¿æŒ 1ã€3ã€7ã€9 å››ä¸ªå›¾ç‰‡ä¸å˜ï¼Œå¯¹ 2ã€4ã€5ã€6ã€8 äº”ä¸ªåŒºåŸŸå›¾ç‰‡è¿›è¡Œç¼©æ”¾ï¼Œåˆ†åˆ«å¾—åˆ°æ–°çš„å›¾ç‰‡ï¼Œæœ€åå†å°†ä¹ä¸ªåŒºåŸŸçš„å›¾ç‰‡åˆå¹¶æˆä¸€å¼ å›¾ã€‚\nä¸ºäº†è§£å†³ä¸Šè¿° QSS æ–¹æ¡ˆçš„å¼Šç«¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–å…ˆå°†å›¾ç‰‡åœ¨ä¿æŒé•¿å®½æ¯”çš„æƒ…å†µç¼©æ”¾åˆ°ç›¸åº”å°ºå¯¸ï¼š\nQPixmap keepRatioScaledPix = src.scaled(destSize, Qt::KeepAspectRatio, Qt::SmoothTransformation);\n\nç”±äº keepRatioScaledPix å®é™…å°ºå¯¸è‚¯å®šä¸æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„ destSize ä¸åŒ¹é…ï¼Œæ‰€ä»¥æˆ‘ä»¬å†æŠŠ keepRatioScaledPix å›¾ç‰‡æŒ‰ä¹å®«æ ¼æ¨¡å¼ç¼©æ”¾ã€‚\nå…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š\nQPixmap ScaleByNinePatch(const QPixmap&amp; src, // åŸå›¾                         QSize destSize, // ç›®æ ‡å°ºå¯¸                        bool keepVertexImageSize,  // æ˜¯å¦ä¿æŒ1ã€3ã€7ã€9é¡¶ç‚¹å›¾ç‰‡å¤§å°ä¸å˜ï¼Œè®¾ç½®ä¸ºtrueåˆ™ä¸QSSæ–¹å¼æ•ˆæœç±»ä¼¼ï¼ˆä»…ç±»ä¼¼ï¼Œå› ä¸ºè¯¥å‡½æ•°æ˜¯ç›´æ¥è¿”å›åŸå›¾ï¼‰                        int pos1Width,                        int pos1Height,                        int pos3Width,                        int pos7Height,                        Qt::TransformationMode mode = Qt::SmoothTransformation) &#123;    // å‚æ•°æ ¡å‡†    pos1Width = qMax(pos1Width, 0);    pos1Height = qMax(pos1Height, 0);    pos3Width = qMax(pos3Width, 0);    pos7Height = qMax(pos7Height, 0);    int handlePixW = 0, handlePixH = 0;    const QPixmap* handlePix = nullptr;    QPixmap keepRatioScaledPix;    if (keepVertexImageSize) &#123;        // ä¿æŒé¡¶ç‚¹å›¾ç‰‡å¤§å°ä¸å˜çš„æƒ…å†µï¼Œå¦‚æœé¡¶ç‚¹å›¾ç‰‡å®½æˆ–é«˜å·²ç»å¤§äºäº†ç›®æ ‡å®½é«˜ï¼Œåˆ™ç›´æ¥è¿”å›åŸå›¾        if (pos1Width + pos3Width &gt; destSize.width() || pos1Height + pos7Height &gt; destSize.height())            return src;        handlePixW = src.width();        handlePixH = src.height();        handlePix = &amp;src;    &#125;    else &#123;        const qreal srcW = src.width();        const qreal srcH = src.height();        // å…ˆç­‰æ¯”ç¼©æ”¾åˆ°é€‚åˆçš„å°ºå¯¸        keepRatioScaledPix = src.scaled(destSize, Qt::KeepAspectRatio, mode);        handlePixW = keepRatioScaledPix.width();        handlePixH = keepRatioScaledPix.height();        qreal krsPixWidth = handlePixW;        qreal krsPixHeight = handlePixH;        // æŒ‰ç…§ä¹‹å‰çš„æ¯”ä¾‹è·å–æ–°é¡¶ç‚¹å›¾ç‰‡çš„å¤§å°        pos1Width = krsPixWidth * (qreal)pos1Width / srcW;        pos1Height = krsPixHeight * (qreal)pos1Height / srcH;        pos3Width = krsPixWidth * (qreal)pos3Width / srcW;        pos7Height = krsPixHeight * (qreal)pos7Height / srcH;        handlePix = &amp;keepRatioScaledPix;    &#125;    // æå‰å„ä¸ªåŒºåŸŸå›¾ç‰‡    QPixmap pix1 = handlePix-&gt;copy(0, 0, pos1Width, pos1Height);    QPixmap pix2 = handlePix-&gt;copy(pos1Width, 0, qMax(handlePixW - pos1Width - pos3Width, 0), pos1Height);    QPixmap pix3 = handlePix-&gt;copy(qMax(handlePixW - pos3Width, 0), 0, pos3Width, pos1Height);    QPixmap pix4 = handlePix-&gt;copy(0, pos1Height, pos1Width, qMax(handlePixH - pos1Height - pos7Height, 0));    QPixmap pix5 = handlePix-&gt;copy(pos1Width, pos1Height, qMax(handlePixW - pos1Width - pos3Width, 0), qMax(handlePixH - pos1Height - pos7Height, 0));    QPixmap pix6 = handlePix-&gt;copy(qMax(handlePixW - pos3Width, 0), pos1Height, pos3Width, qMax(handlePixH - pos1Height - pos7Height, 0));    QPixmap pix7 = handlePix-&gt;copy(0, qMax(handlePixH - pos7Height, 0), pos1Width, pos7Height);    QPixmap pix8 = handlePix-&gt;copy(pos1Width, qMax(handlePixH - pos7Height, 0), qMax(handlePixW - pos1Width - pos3Width, 0), pos7Height);    QPixmap pix9 = handlePix-&gt;copy(qMax(handlePixW - pos3Width, 0), qMax(handlePixH - pos7Height, 0), pos3Width, pos7Height);    // å¯¹2ã€4ã€5ã€6ã€8åŒºåŸŸå›¾ç‰‡è¿›è¡Œç¼©æ”¾    pix2 = pix2.scaled(qMax(destSize.width() - pos1Width - pos3Width, 0), pos1Height, Qt::IgnoreAspectRatio, mode);    pix4 = pix4.scaled(pos1Width, qMax(destSize.height() - pos1Height - pos7Height, 0), Qt::IgnoreAspectRatio, mode);    pix5 = pix5.scaled(qMax(destSize.width() - pos1Width - pos3Width, 0), qMax(destSize.height() - pos1Height - pos7Height, 0), Qt::IgnoreAspectRatio, mode);    pix6 = pix6.scaled(pos3Width, qMax(destSize.height() - pos1Height - pos7Height, 0), Qt::IgnoreAspectRatio, mode);    pix8 = pix8.scaled(qMax(destSize.width() - pos1Width - pos3Width, 0), pos7Height, Qt::IgnoreAspectRatio, mode);    // æ‹¼æ¥æ–°çš„å›¾ç‰‡    QPixmap dest(destSize);    dest.fill(Qt::transparent); // ä½¿ç”¨é€æ˜è‰²å¡«å……å›¾ç‰‡    QPainter painter(&amp;dest);    painter.drawPixmap(0, 0, pix1);    painter.drawPixmap(pos1Width, 0, pix2);    painter.drawPixmap(qMax(destSize.width() - pos3Width, 0), 0, pix3);    painter.drawPixmap(0, pos1Height, pix4);    painter.drawPixmap(pos1Width, pos1Height, pix5);    painter.drawPixmap(qMax(destSize.width() - pos3Width, 0), pos1Height, pix6);    painter.drawPixmap(0, qMax(destSize.height() - pos7Height, 0), pix7);    painter.drawPixmap(pos1Width, qMax(destSize.height() - pos7Height, 0), pix8);    painter.drawPixmap(qMax(destSize.width() - pos3Width, 0), qMax(destSize.height() - pos7Height, 0), pix9);    painter.end();    return dest;&#125;\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"å†™ç»™C++ç¨‹åºå‘˜çš„ES6è¯­æ³•åŸºç¡€","url":"/post/51642520.html","content":"ECMAScript æ ‡å‡†çš„å‘å±•ç»å†äº†ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œä» 1997 å¹´å‘å¸ƒçš„ECMAScript 1.0ï¼Œåˆ° 2011 å¹´çš„ECMAScript 5.1ï¼Œå†åˆ° 2015 å¹´çš„ECMAScript 2015ï¼Œä»¥åŠåé¢æ¯å¹´éƒ½ä¼šå‘å¸ƒçš„ä¸€ä¸ªæ–°çš„ ECMAScript ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¼—å¤šï¼Œè€Œä¸”æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰æ–°ç‰¹æ€§çš„åŠ å…¥ã€‚\n\n\næˆ‘ä»¬é€šå¸¸ç”¨ECMAScript 6æ¥ç»Ÿç§°ECMAScript 2015åŠå…¶ä¹‹åçš„çš„ç‰ˆæœ¬ã€‚\nä½†ECMAScript 2015å¯è°“æ˜¯ ECMAScript æ ‡å‡†çš„åˆ†æ°´å²­ï¼Œå…¶ä»åˆ¶å®šåˆ°å‘å¸ƒå‰åç»å†äº† 15 å¹´ã€‚ç›®å‰ç»å¤§å¤šæ•°æµè§ˆå™¨éƒ½å·²æ”¯æŒECMAScript 2015ç‰¹æ€§ï¼Œå¹¶éƒ¨åˆ†çš„æ”¯æŒäº†åé¢ç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæ‰€ä»¥å¯¹äºéœ€è¦å¿«é€Ÿå…¥é—¨çš„åˆå­¦è€…ï¼Œåªéœ€è¦ç›´æ¥å­¦ä¹ ECMAScript 2015æ ‡å‡†å³å¯ï¼Œç¼–å†™å®Œå…¨éµå®ˆECMAScript 2015æ ‡å‡†çš„ä»£ç ä¸ä»…æ›´åŠ ä¸¥è°¨ï¼Œè€Œä¸”å¯ä»¥èŠ‚çœä¸å°‘å­¦ä¹ æ—¶é—´ã€‚\nå³ä¾¿å¯¹äºé‚£äº›ä¸æ”¯æŒECMAScript 6çš„æµè§ˆå™¨ï¼ˆå¦‚ IE11ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Babelä¹‹ç±»çš„å·¥å…·å°†å…¶è½¬æ¢ä¸ºECMAScript 5æ ‡å‡†çš„ä»£ç ã€‚\n\næŸ¥çœ‹æµè§ˆå™¨å¯¹ ES ç‰¹æ€§çš„æ”¯æŒæƒ…å†µï¼Œå¯ä»¥è®¿é—®ï¼šhttps://kangax.github.io/compat-table/es6/\n\nä¸‹æ–‡è®²è¿°çš„éƒ½æ˜¯æ”¯æŒ ECMAScript 6 æ ‡å‡†çš„ JavaScript è¯­æ³•\né›¶\nJavaScript æ˜¯å¤§å°å†™æ•æ„Ÿçš„\nåœ¨æ¯è¡Œåªå†™ä¸€æ¡è¯­å¥æ—¶ï¼Œç»“å°¾å¯ä»¥ä¸åŠ åˆ†å·;ï¼Œä½†å»ºè®®æ¯æ¡è¯­å¥éƒ½ä»¥åˆ†å·ç»“å°¾\n\nä¸ƒç§åŸºæœ¬æ•°æ®ç±»å‹åŸºæœ¬æ•°æ®ç±»å‹æœ‰ä»¥ä¸‹ 7 ç§ï¼š\n\nundefined\nnull\nBoolean\nString\nNumber\nObject\nSymbol\n\nJavaScript è™½ç„¶æ˜¯å¼±ç±»å‹çš„è¯­è¨€ï¼Œä½†ä¸ä»£è¡¨å…¶æ²¡æœ‰æ•°æ®ç±»å‹ï¼Œå…¶å¼±ç±»å‹æŒ‡çš„æ˜¯åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ä¸éœ€è¦ï¼ˆä¹Ÿä¸èƒ½ï¼‰æŒ‡æ˜å˜é‡ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®â€œå€¼â€çš„ç±»å‹è‡ªåŠ¨å°†å˜é‡è½¬æ¢æˆåˆé€‚çš„ç±»å‹ã€‚\næ‰€ä»¥æ— è®ºæ˜¯å€¼è¿˜æ˜¯å˜é‡ç»ˆç©¶è¿˜æ˜¯æœ‰ç±»å‹çš„ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œä¸éœ€è¦å…³æ³¨ä»€ä¹ˆç±»å‹çš„å€¼åº”è¯¥èµ‹å€¼ç»™ä»€ä¹ˆç±»å‹çš„å˜é‡ã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨typeofæŸ¥çœ‹æ¯ä¸ªå˜é‡æˆ–å€¼çš„ç±»å‹ï¼š\nconsole.log(typeof 123); // numberconsole.log(typeof &quot;abc&quot;); // stringconsole.log(typeof true); // booleanconsole.log(typeof undefined); // undefinedconsole.log(typeof null); // objectconsole.log(typeof [1, 2, 3, 4]); // objectconsole.log(typeof function () &#123;&#125;); // function\n\nå€¼å¾—æ³¨æ„çš„æ˜¯undefinedçš„ç±»å‹æ˜¯undefinedï¼Œä½†nullçš„ç±»å‹æ˜¯objectï¼Œä¸‹é¢çš„ç« èŠ‚ä¼šä»‹ç»undefinedå’Œnullçš„åŒºåˆ«ã€‚\nå˜é‡å£°æ˜æ–¹å¼å£°æ˜å˜é‡çš„æ–¹å¼æœ‰ 3 ç§ï¼š\n\nlet ç”¨æ¥å£°æ˜å˜é‡\nvar ä¹Ÿæ˜¯ç”¨æ¥å£°æ˜å˜é‡çš„\nconst ç”¨æ¥å£°æ˜å¸¸é‡ï¼Œå¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™èµ‹åˆå§‹å€¼ï¼Œä¸”ä»¥åä¸èƒ½å†ä¿®æ”¹\n\n\nvaræ˜¯ES6ä¹‹å‰çš„ï¼Œå»ºè®®ä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨ varï¼Œè¿™æ ·å¯ä»¥é¿å…å¾ˆå¤šä¸å¿…è¦çš„é—®é¢˜ï¼Œæ¯”å¦‚å˜é‡æå‡ã€æš‚æ—¶æ€§æ­»åŒºç­‰ï¼Œæœ¬æ–‡ä¹Ÿåªè®²è¿°letå’Œconstï¼Œå¿˜è®°varå§ï¼Œä¸€èµ·èµ°å‘æ–°ä¸–ç•Œã€‚\n\nå˜é‡å…·æœ‰ä½œç”¨åŸŸçš„æ¦‚å¿µç”¨ let å’Œ const å£°æ˜çš„å˜é‡æˆ–å¸¸é‡çš„ä½œç”¨åŸŸå¯ä»¥ç²¾ç¡®åˆ°â€œå—çº§åˆ«â€\n&#123;  let a = 1;  console.log(a); // 1&#125;console.log(a); // ReferenceError: a is not defined\n\nfor (let i = 0; i &lt; 10; i++) &#123;  console.log(i); // ä¾æ¬¡è¾“å‡º0~9&#125;console.log(i); // ReferenceError: i is not defined\n\nlet a = 123;if (true) &#123;  let a = 789;&#125;console.log(a); // 123\n\n// æ— è®ºæ˜¯letè¿˜æ˜¯constéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…ä¸èƒ½é‡å¤å£°æ˜&#123;  let a = 123;  let a = 456; // SyntaxError: Identifier &#x27;a&#x27; has already been declared&#125;&#123;  let a = 123;  const a = 456; // SyntaxError: Identifier &#x27;a&#x27; has already been declared&#125;\n\nå—çº§ä½œç”¨åŸŸå†…çš„ letåªè¦â€œå—çº§ä½œç”¨åŸŸå†…â€å­˜åœ¨ let å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€œç»‘å®šâ€åˆ°è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“\nlet a = 123;if (true) &#123;  a = 456; // ReferenceError: Cannot access &#x27;a&#x27; before initialization  let a = 789;&#125;console.log(a); // 123\n\nè¿™ä¸ªå’Œå…¶ä»–è¯­è¨€ä¸å¤ªä¸€æ ·ï¼Œå¦‚æœæ˜¯ C&#x2F;C++è¿™æ ·çš„è¯­è¨€æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œåªä¼šåœ¨let a = 789;ç»™å‡ºâ€œå±€éƒ¨å˜é‡è¦†ç›–äº†å…¨å±€å˜é‡â€çš„è­¦å‘Šã€‚\nä½†åœ¨ ES6 ä¸­å´ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ä¸ºâ€œå¼ºé¾™å‹ä¸è¿‡åœ°å¤´è›‡â€ï¼šæˆ‘ç”¨let a = 789;åœ¨è“è‰²åŒºåŸŸå†…å£°æ˜äº†å˜é‡aï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªè“è‰²åŒºåŸŸçš„ä¸€äº©ä¸‰åˆ†åœ°å†…çš„éƒ½æ˜¯æˆ‘è¯´äº†ç®—ï¼Œa = 456;æ•¢åœ¨æˆ‘è¿˜æ²¡å£°æ˜å‰éƒ½èµ‹å€¼ï¼Œé‚£æˆ‘è¿˜ä¸ç»™ä½ æŠ¥ä¸ªé”™ã€‚\nfor å¾ªç¯çš„å˜é‡ä½œç”¨åŸŸfor å¾ªç¯è®¾ç½®å¾ªç¯å˜é‡çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸ\nfor (let i = 0; i &lt; 10; i++) &#123;  let i = &quot;abc&quot;;  console.log(i); // abc&#125;\n\nè™½ç„¶ç¼–è¯‘å™¨æ²¡æœ‰æŠ¥é”™ï¼Œä½†å°½é‡ä¸è¦å†™è¿™æ ·ä»£ç ï¼Œä¸åˆ©äºåæœŸç»´æŠ¤ã€‚\nObject ä¸ ClassObjectï¼ˆå¯¹è±¡ï¼‰æ˜¯ ES5 å°±å·²ç»æœ‰çš„æ¦‚å¿µï¼ŒClassï¼ˆç±»ï¼‰æ˜¯ ES6 å¼•å…¥çš„æ¦‚å¿µã€‚\nå…³äº JavaScript ä¸­ç±»å’Œå¯¹è±¡çš„å«æ³•å­¦è¿‡ä»»ä½•ä¸€ä¸ªé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„åŒå­¦éƒ½çŸ¥é“ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ï¼Œæ¯”å¦‚åœ¨ Java ä¸­ï¼š\nA a = new A();\n\naä¸ºå¯¹è±¡ï¼ŒAä¸ºç±»ï¼Œä¹Ÿå°±æ˜¯â€œå¯¹è±¡ a ä¸ºç±»å‹ A çš„å®ä¾‹â€ã€‚\nè€Œå¤§å®¶å¯èƒ½ä¹Ÿå‘ç°äº†å¾ˆå¤š JavaScript æ•™ç¨‹ç§°Objectã€Numberã€Stringä¸ºå¯¹è±¡ï¼Œå¦‚æœæ ¹æ®è¿™ä¸ªç§°å‘¼æ¥ï¼Œä¸‹é¢çš„ä»£ç å²‚ä¸æ˜¯â€œå¯¹è±¡ a ä¸ºå¯¹è±¡ Number çš„å®ä¾‹â€ï¼Œå¾ˆæ˜¾ç„¶åœ¨è¿™ç§å«æ³•å¾ˆåˆ«æ‰­ï¼Œä¹Ÿä¸ç§‘å­¦ï¼š\nlet a = new Number(123);\n\nä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§è¹©è„šçš„å«æ³•äº†ï¼Ÿå› ä¸ºåœ¨ ES6 ä¹‹å‰ï¼ŒJavaScript ä¸­æ²¡æœ‰å®Œå…¨å¼•å…¥Classç±»çš„æ¦‚å¿µï¼Œå…¶æœ€å¤šåªèƒ½ç®—æ˜¯ä¸€ä¸ªä¼ªçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä¼°è®¡ä¹Ÿæ˜¯ä¸ºäº†é™ä½å­¦ä¹ ç†è§£çš„éš¾åº¦ï¼Œæ‰€ä»¥ç»Ÿç§°ä¸ºå¯¹è±¡å§ã€‚\næ—¢ç„¶åœ¨ ES6 ä¸­æ˜ç¡®å¼•å…¥äº† Class æ¦‚å¿µï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ çš„æ—¶å€™å°±è¦æ˜ç¡®åŒºåˆ†â€œç±»â€å’Œâ€œå¯¹è±¡â€çš„æ¦‚å¿µäº†ã€‚\nä¸‡ç‰©çš†å¯¹è±¡åœ¨ JavaScript ä¸­ä¸‡ç‰©çš†å¯¹è±¡ã€‚å­¦è¿‡å…¶ä»–é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„åŒå­¦çŸ¥é“ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ï¼Œæ¯ä¸ªç±»éƒ½å¯ä»¥æœ‰æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€å±æ€§å’Œæ–¹æ³•ã€‚\nåœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰æ„é€ å‡½æ•°ã€å±æ€§ã€æ–¹æ³•ï¼Œä½†æ²¡æœ‰ææ„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥éªŒè¯â€œä¸‡ç‰©çš†å¯¹è±¡â€ï¼š\nconsole.log(&quot;John&quot;.constructor); // [Function: String]console.log((3.14).constructor); // [Function: Number]console.log(false.constructor); // [Function: Boolean]console.log(&#123; name: &quot;John&quot;, age: 34 &#125;.constructor); // [Function: Object]\n\néšå¼å£°æ˜å¯¹è±¡JavaScript è®¿é—®å±æ€§å’Œæ–¹æ³•çš„æ–¹å¼å’Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ç±»ä¼¼ï¼š\nlet msg1 = &quot;Hello World!&quot;; // msg1ä¸ºå¯¹è±¡ï¼ŒStringç±»çš„å®ä¾‹let x = msg1.length; // è®¿é—®lengthå±æ€§console.log(x); // 12let msg2 = &quot;Hello world!&quot;; // // msg2ä¸ºå¯¹è±¡ï¼ŒStringç±»çš„å®ä¾‹let y = msg2.toUpperCase(); // è®¿é—®toUpperCaseæ–¹æ³•console.log(y); // HELLO WORLD!let car = &#123; name: &quot;BMW&quot;, price: 123000 &#125;; // carä¹Ÿä¸ºå¯¹è±¡ï¼Œ&#123;name: &quot;BMW&quot;, price: 123000&#125;ç±»çš„å®ä¾‹console.log(car.name); // BMWconsole.log(car.price); // 123000\n\nå¤§å®¶å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä»£ç ä¸­éƒ½æ²¡æœ‰ä½¿ç”¨newæ¥å£°æ˜å¯¹è±¡ï¼Œä½†è¿™äº›å¯¹è±¡ç¡®ç¡®å®å®å­˜åœ¨äº†ï¼Œä¸ç„¶æˆ‘ä»¬ä¹Ÿæ— æ³•è®¿é—®å…¶â€œå±æ€§â€å’Œâ€œæ–¹æ³•â€ï¼Œæˆ‘ä»¬å¯ä»¥å§‘ä¸”è®¤ä¸ºè¿™æ˜¯ JavaScript çš„è¯­æ³•ç³–å§ï¼Œæˆ–è€…å«â€œéšå¼å£°æ˜å¯¹è±¡â€å§ã€‚\næ˜¾å¼å£°æ˜å¯¹è±¡å‰é¢ä»‹ç»çš„ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ä¸­é™¤äº†nullå’Œundefinedä¹‹å¤–ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ new æ¥æ˜¾ç¤ºçš„å£°æ˜å¯¹è±¡ï¼š\nlet a1 = new Number(123);console.log(a1); // [Number: 123]console.log(1 + a1); // 124let a2 = new Function();console.log(a2); // [Function: anonymous]let a3 = new String(&quot;xyz&quot;);console.log(a3); // [String: &#x27;xyz&#x27;]let a4 = new null(); // TypeError: null is not a constructorlet a5 = new undefined(); // TypeError: null is not a constructor\n\nä½¿ç”¨ Class å®šä¹‰ç±»åœ¨ ES6 ä¸­å¯ä»¥ä½¿ç”¨ Class å…³é”®å­—å®šä¹‰ç±»ï¼Œä¸”æ¯ä¸ªç±»éƒ½æœ‰é»˜è®¤çš„ name å±æ€§ã€‚\nclass Rectangle &#123;  // æ„é€ å‡½æ•°  // constructoræ–¹æ³•åç§°ä¸èƒ½ä¿®æ”¹  // é€šè¿‡newå‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚  // ä¸€ä¸ªç±»å¿…é¡»æœ‰constructoræ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„constructoræ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ   constructor(h, w) &#123;    this.height = h;    this.width = w;  &#125;  // Getter  get area() &#123;    return this.calcArea();  &#125;  // Settter  set setWidth(w) &#123;    this.width = w;  &#125;  // æ–¹æ³•  calcArea() &#123;    return this.height * this.width;  &#125;  // é™æ€æ–¹æ³•  static printInfo(w, h) &#123;    console.log(&quot;width:&quot; + w + &quot;, height:&quot; + h);  &#125;&#125;// æ³¨æ„ï¼šè¿™ä¸ªnameå±æ€§æ˜¯é€šè¿‡ç±»æœ¬èº«æ¥è®¿é—®çš„ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹æ¥è®¿é—®çš„ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹ä¹±äº†ã€‚ã€‚ã€‚console.log(Rectangle.name); // Rectanglelet rect = new Rectangle(5, 6);console.log(rect.area); // 30//rect.printInfo(); // TypeError: rect.printInfo is not a functionRectangle.printInfo(5, 6); // width:5, height:6\n\nClass çš„æˆå‘˜éƒ½æ˜¯å…¬å…±çš„ï¼Œå¤–éƒ¨éƒ½å¯ä»¥è®¿é—®ï¼Œç›®å‰æ²¡æœ‰ä»è¯­æ³•å±‚é¢è§„å®šå¦‚ä½•å®šä¹‰ä¸€ä¸ªç§æœ‰çš„æˆå‘˜\nç±»è¡¨è¾¾å¼ä¸€ä¸ªç±»è¡¨è¾¾å¼æ˜¯å®šä¹‰ä¸€ä¸ªç±»çš„å¦ä¸€ç§æ–¹å¼ã€‚ç±»è¡¨è¾¾å¼å¯ä»¥æ˜¯å…·åçš„æˆ–åŒ¿åçš„ã€‚\nä¸€ä¸ªå…·åç±»è¡¨è¾¾å¼çš„åç§°æ˜¯ç±»å†…çš„ä¸€ä¸ªå±€éƒ¨å±æ€§ï¼Œå®ƒå¯ä»¥é€šè¿‡ç±»çš„ name å±æ€§æ¥è·å–ã€‚\n// åŒ¿åç±»let Rectangle1 = class &#123;  constructor(height, width) &#123;    this.height = height;    this.width = width;  &#125;&#125;;console.log(Rectangle1.name); // Rectangle1// å…·åç±»let RectangleX = class Rectangle2 &#123;  constructor(height, width) &#123;    this.height = height;    this.width = width;  &#125;&#125;;console.log(RectangleX.name); // Rectangle2\n\nå‡½æ•°å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å£°æ˜çš„å˜é‡function foo1(x) &#123;  let x = 0; // SyntaxError: Identifier &#x27;x&#x27; has already been declared&#125;\n\nå‡½æ•°å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼function foo2(x, y = 1) &#123;  console.log(x + y);&#125;foo2(1); //  2\n\nä¸ C++ä¸åŒï¼ŒJavaSript æ²¡æœ‰è¦æ±‚æ‹¥æœ‰é»˜è®¤å€¼çš„å‚æ•°å¿…é¡»æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„å°¾éƒ¨ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·å†™ï¼š\nfunction foo2(x = 1, y) &#123;  console.log(x + y);&#125;\n\nä½†ä»”ç»†æƒ³ä¸€æƒ³ï¼Œè¿™æ ·å†™å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ã€‚\nå¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯æ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶éƒ½ä¼šåŠ¨æ€è®¡ç®—çš„ï¼š\nlet x = 99;function foo(p = x + 1) &#123;  console.log(p);&#125;foo(); // 100x = 100;foo(); // 101\n\nç®­å¤´å‡½æ•°function foo(x, y) &#123;  return x + y;&#125;// ç­‰åŒäº(x, y) =&gt; &#123;  return x + y;&#125;;\n\nå¦‚æœå‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼š\nfunction foo(x) &#123;  return x * x;&#125;// ç­‰åŒäº(x) =&gt; &#123;  return x * x;&#125;;// æ‹¬å·å¯ä»¥çœç•¥ï¼Œç­‰åŒäº(x) =&gt; &#123;  return x * x;&#125;;\n\nå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼å¤§æ‹¬å·å¯ä»¥çœç•¥ï¼š\nfunction foo() &#123;  console.log(&quot;hi&quot;);&#125;// å¤§æ‹¬å·å¯ä»¥çœç•¥ï¼Œç­‰åŒäº() =&gt; console.log(&quot;hi&quot;);\n\n4.4 å‡½æ•°çš„ nameï¼Œlength å±æ€§nameå¯ä»¥è¿”å›å‡½æ•°åï¼›lengthå¯ä»¥è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ï¼›\næ•°æ®ç»“æ„Objectæˆ‘ä»¬å¯ä»¥å‘ Object å¯¹è±¡æ·»åŠ ä»»ä½•å±æ€§ï¼Œæ‰€ä»¥ Object ä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨æˆ–é›†åˆï¼š\nlet obj = new Object(&quot;hello&quot;);console.log(obj); // [String: &#x27;hello&#x27;]obj.name = &quot;jeff&quot;;console.log(obj.name); // jeffobj.print = function () &#123;  console.log(&quot;I&#x27;m object&quot;);&#125;;obj.print(); // I&#x27;m object\n\næ•°ç»„JavaScript ä¸­ä½¿ç”¨ Array ç±»åˆ›å»ºæ•°ç»„å¯¹è±¡ï¼š\n// ä½¿ç”¨Arrayç±»åˆ›å»ºæ•°ç»„let cars1 = new Array(&quot;Saab&quot;, &quot;Volvo&quot;, &quot;BMW&quot;);// ä½¿ç”¨Arrayç±»åˆ›å»ºæ•°ç»„let cars2 = new Array();cars2[0] = &quot;Saab&quot;; // æ”¯æŒ[]æ–¹å¼è®¿é—®å’Œèµ‹å€¼ï¼Œä¸‹æ ‡ä»0å¼€å§‹cars2[1] = &quot;Volvo&quot;;cars2[2] = &quot;BMW&quot;;// ç®€å†™æ–¹å¼let cars3 = [&quot;Saab&quot;, &quot;Volvo&quot;, &quot;BMW&quot;];console.log(cars3.length); // 3// æ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥ä¸ºä¸åŒçš„ç±»å‹let a = [1, &quot;x&quot;, true];console.log(a[1]); // xconsole.log(a[5]); // undefinedï¼Œè®¿é—®æ•°ç»„ä¸­ä¸å­˜åœ¨çš„å…ƒç´ ä¼šè¿”å›undefinedï¼Œä¸ä¼šæŠ¥é”™a.testProp = &quot;xyz&quot;; // å¯ä»¥å‘Arrayå¯¹è±¡æ·»åŠ ä»»æ„å±æ€§console.log(a.testProp); // xyza.print = function () &#123;  console.log(&quot;I&#x27;m a&quot;);&#125;;a.print(); // I&#x27;m a\n\nArray ç±»å®Œæ•´çš„å±æ€§\n\n\nå±æ€§\næè¿°\n\n\n\nlength\nè®¾ç½®æˆ–è·å–æ•°ç»„å…ƒç´ çš„ä¸ªæ•°\n\n\nprototype\nå…è®¸ä½ å‘æ•°ç»„å¯¹è±¡æ·»åŠ å±æ€§æˆ–æ–¹æ³•\n\n\nArray ç±»å®Œæ•´çš„æ–¹æ³•\n\n\næ–¹æ³•\næè¿°\n\n\n\nconcat()\nè¿æ¥ä¸¤ä¸ªæˆ–æ›´å¤šçš„æ•°ç»„ï¼Œå¹¶è¿”å›ç»“æœ\n\n\ncopyWithin()\nä»æ•°ç»„çš„æŒ‡å®šä½ç½®æ‹·è´å…ƒç´ åˆ°æ•°ç»„çš„å¦ä¸€ä¸ªæŒ‡å®šä½ç½®ä¸­\n\n\nentries()\nè¿”å›æ•°ç»„çš„å¯è¿­ä»£å¯¹è±¡\n\n\nevery()\næ£€æµ‹æ•°å€¼å…ƒç´ çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæ¡ä»¶\n\n\nfill()\nä½¿ç”¨ä¸€ä¸ªå›ºå®šå€¼æ¥å¡«å……æ•°ç»„\n\n\nfilter()\næ£€æµ‹æ•°å€¼å…ƒç´ ï¼Œå¹¶è¿”å›ç¬¦åˆæ¡ä»¶æ‰€æœ‰å…ƒç´ çš„æ•°ç»„\n\n\nfind()\nè¿”å›ç¬¦åˆä¼ å…¥æµ‹è¯•ï¼ˆå‡½æ•°ï¼‰æ¡ä»¶çš„æ•°ç»„å…ƒç´ \n\n\nfindIndex()\nè¿”å›ç¬¦åˆä¼ å…¥æµ‹è¯•ï¼ˆå‡½æ•°ï¼‰æ¡ä»¶çš„æ•°ç»„å…ƒç´ ç´¢å¼•\n\n\nforEach()\næ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°\n\n\nfrom()\né€šè¿‡ç»™å®šçš„å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„\n\n\nincludes()\nåˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼\n\n\nindexOf()\næœç´¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶è¿”å›å®ƒæ‰€åœ¨çš„ä½ç½®\n\n\nisArray()\nåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„\n\n\njoin()\næŠŠæ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸²\n\n\nkeys()\nè¿”å›æ•°ç»„çš„å¯è¿­ä»£å¯¹è±¡ï¼ŒåŒ…å«åŸå§‹æ•°ç»„çš„é”®(key)\n\n\nlastIndexOf()\næœç´¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶è¿”å›å®ƒæœ€åå‡ºç°çš„ä½ç½®\n\n\nmap()\né€šè¿‡æŒ‡å®šå‡½æ•°å¤„ç†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ•°ç»„\n\n\npop()\nåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¹¶è¿”å›åˆ é™¤çš„å…ƒç´ \n\n\npush()\nå‘æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦\n\n\nreduce()\nå°†æ•°ç»„å…ƒç´ è®¡ç®—ä¸ºä¸€ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰\n\n\nreduceRight()\nå°†æ•°ç»„å…ƒç´ è®¡ç®—ä¸ºä¸€ä¸ªå€¼ï¼ˆä»å³åˆ°å·¦ï¼‰\n\n\nreverse()\nåè½¬æ•°ç»„çš„å…ƒç´ é¡ºåº\n\n\nshift()\nåˆ é™¤å¹¶è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n\n\nslice()\né€‰å–æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„\n\n\nsome()\næ£€æµ‹æ•°ç»„å…ƒç´ ä¸­æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆæŒ‡å®šæ¡ä»¶\n\n\nsort()\nå¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åº\n\n\nsplice()\nä»æ•°ç»„ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ \n\n\ntoString()\næŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœ\n\n\nunshift()\nå‘æ•°ç»„çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦\n\n\nvalueOf()\nè¿”å›æ•°ç»„å¯¹è±¡çš„åŸå§‹å€¼\n\n\næ•°ç»„çš„å¤åˆ¶let a1 = [1, 2, 3];let a2 = a1;a2[1] = 4;console.log(a1[1]); // 4\n\nä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘ç°æ”¹å˜æ•°ç»„a2[1]çš„å€¼æ—¶ï¼Œæ•°ç»„a1[1]çš„å€¼ä¹Ÿéšç€æ”¹å˜äº†ï¼Œè¿™è¯´æ˜ a1 å’Œ a2 æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªåœ¨ C&#x2F;C++ä¸­å°±æ˜¯æŒ‡é’ˆçš„æ¦‚å¿µï¼Œlet a2 = a1; åšçš„æ˜¯æµ…æ‹·è´æ“ä½œã€‚\nå¦‚æœéœ€è¦åšæ·±æ‹·è´ï¼Œä¹Ÿå°±æ˜¯å°†æ•°ç»„ a1 çš„æ‰€æœ‰å…ƒç´ å…‹éš†ä¸€ä»½ç»™ a2ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¸¤ç§æ–¹å¼ï¼š\nlet a1 = [1, 2, 3];let a2 = a1.concat();a2[1] = 4;console.log(a1[1]); // 2\n\nlet a1 = [1, 2, 3];let a2 = [...a1]; // ä¹Ÿå¯ä»¥å†™æˆ let [...a2] = a1;a2[1] = 4;console.log(a1[1]); // 2\n\nMapMap å¯¹è±¡ç”¨æ¥å­˜å‚¨é”®å€¼å¯¹(key-value)ï¼Œå¹¶ä¸”èƒ½å¤Ÿè®°ä½é”®çš„åŸå§‹æ’å…¥é¡ºåºã€‚ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”®æˆ–å€¼ã€‚åœ¨ Map ä¸­ Key æ˜¯å”¯ä¸€çš„ã€‚\nlet myMap = new Map();let keyObj = &#123;&#125;;let keyFunc = function () &#123;&#125;;let keyString = &quot;a string&quot;;// æ·»åŠ é”®myMap.set(keyString, &quot;å’Œé”®&#x27;a string&#x27;å…³è”çš„å€¼&quot;);myMap.set(keyObj, &quot;å’Œé”®keyObjå…³è”çš„å€¼&quot;);myMap.set(keyFunc, &quot;å’Œé”®keyFuncå…³è”çš„å€¼&quot;);console.log(myMap.size); // 3// è¯»å–å€¼console.log(myMap.get(keyString)); // å’Œé”®&#x27;a string&#x27;å…³è”çš„å€¼console.log(myMap.get(&quot;a string&quot;)); // å’Œé”®&#x27;a string&#x27;å…³è”çš„å€¼console.log(myMap.get(keyObj)); // å’Œé”®keyObjå…³è”çš„å€¼console.log(myMap.get(keyFunc)); // å’Œé”®keyFuncå…³è”çš„å€¼console.log(myMap.get(&#123;&#125;)); // undefined, å› ä¸ºkeyObj !== &#123;&#125;console.log(myMap.get(function () &#123;&#125;)); // undefined, å› ä¸ºkeyFunc !== function () &#123;&#125;console.log(myMap.size); // 3ï¼Œè¿”å›æœ‰å¤šå°‘ä¸ªé”®å€¼å¯¹// å’ŒArrayä¸€æ ·ï¼Œå¯ä»¥æ·»åŠ ä»»æ„å±æ€§å’Œæ–¹æ³•myMap.test = &quot;a&quot;;console.log(myMap.test);myMap.print = function () &#123;  console.log(&quot;I&#x27;m map&quot;);&#125;;myMap.print(); // I&#x27;m map\n\nMap ä¸ Array ç›¸äº’è½¬æ¢Array &#x3D;&gt; Map\nlet map = new Map([  [1, &quot;one&quot;],  [2, &quot;two&quot;],]);console.log(map); // Map &#123; 1 =&gt; &#x27;one&#x27;, 2 =&gt; &#x27;two&#x27; &#125;\n\nMap &#x3D;&gt; Array\nlet map = new Map();map.set(1, &quot;one&quot;);map.set(2, &quot;tow&quot;);let arr2 = Array.from(map);console.log(arr2); // [ [ 1, &#x27;one&#x27; ], [ 2, &#x27;two&#x27; ] ]\n\nMap çš„å¤åˆ¶Map åœ¨ç›´æ¥èµ‹å€¼çš„æ—¶å€™ä¼šé‡åˆ°å’Œ Array åŒæ ·çš„â€œæµ…æ‹·è´â€çš„é—®é¢˜ï¼Œå¦‚ï¼š\nlet map1 = new Map();map1.set(1, &quot;one&quot;);map1.set(2, &quot;tow&quot;);let map2 = map1;map2.set(1, &quot;three&quot;);console.log(map1.get(1)); // threeï¼Œä¿®æ”¹map2ä¼šå¯¼è‡´map1çš„å€¼ä¹Ÿè¢«ä¿®æ”¹äº†\n\nå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å®Œæˆ Map çš„æ·±æ‹·è´ï¼š\nlet map1 = new Map();map1.set(1, &quot;one&quot;);map1.set(2, &quot;tow&quot;);let map2 = new Map(map1);map2.set(1, &quot;three&quot;);console.log(map1.get(1)); // oneconsole.log(map2.get(1)); // three\n\nSetMap æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œè€Œ Set åˆ™åªæ˜¯é”®ï¼ˆkeyï¼‰çš„é›†åˆã€‚\nSet ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ã€‚\nä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸º Set çš„å…ƒç´ ã€‚\nlet keys = [1, 1, 2, 3, &quot;str&quot;];let s = new Set(keys);// è‡ªåŠ¨å»é‡äº†console.log(s); // Set &#123; 1, 2, 3, &#x27;str&#x27; &#125;// æ–°å¢ä½¿ç”¨Adds.add(9);s.add(function () &#123;&#125;);console.log(s); // Set &#123; 1, 2, 3, &#x27;str&#x27;, 9, [Function] &#125;// åˆ é™¤ä½¿ç”¨deletes.delete(1);console.log(s); // Set &#123; 2, 3, &#x27;str&#x27;, 9, [Function] &#125;\n\nè¿­ä»£å™¨å‰é¢ä»‹ç» Objectã€Arrayã€Mapã€Set è¿™äº›å®¹å™¨çš„æ—¶å€™ï¼Œéƒ½é¿å¼€äº†ä¸€ä¸ªè¯é¢˜ï¼šéå†ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»å¦‚ä½•éå† JavaScript ä¸­çš„å®¹å™¨æˆ–é›†åˆã€‚\nè¿­ä»£å™¨ï¼ˆIteratorï¼‰å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„éå†è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦å®ç° Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œã€‚\nåœ¨å­¦ä¹ å¦‚ä½•è‡ªå®šä¹‰è¿­ä»£å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹å¦‚ä½•éå† JavaScript å¸¸ç”¨çš„æ•°æ®é›†åˆï¼š\néå†å­—ç¬¦ä¸²let str = &quot;hello&quot;;for (let v of str) &#123;  console.log(v);&#125;/*hello*/\n\néå†æ•°ç»„let arr = [1, &quot;str&quot;, 2];for (let v of arr) &#123;  console.log(v);&#125;/*1str2*/\n\néå† Maplet map = new Map([  [1, &quot;one&quot;],  [2, &quot;two&quot;],  [3, function () &#123;&#125;],]);for (let [k, v] of map) &#123;  console.log(k + &quot;:&quot; + v);&#125;/*1:one2:two3:function () &#123; &#125;*/\n\nè§£æ„èµ‹å€¼è§£æ„(Destructuring)èµ‹å€¼åˆ†ä¸ºâ€œæ•°ç»„çš„è§£æ„èµ‹å€¼â€å’Œâ€œå¯¹è±¡çš„è§£æ„èµ‹å€¼â€ã€‚\næ•°ç»„çš„è§£æ„èµ‹å€¼let [a, b, c] = [1, 2, 3];   // æ ¹æ®ä½ç½®ä¾æ¬¡å–å€¼// a = 1// b = 2// c = 3let [foo, [[bar], baz]] = [1, [[2], 3]];// foo = 1// bar = 2// baz = 3let [ , , third] = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;];// third = &quot;baz&quot;let [head, ...tail] = [1, 2, 3, 4];// head = 1// tail = [2,3,4]let [x, y, ...z] = [&quot;a&quot;];// x = &quot;a&quot;// y = undefined// z = []let [foo] = [];        // foo = undefinedlet [bar, foo] = [1];  // foo = undefinedlet [bar, foo = true] = [1]; // å¯ä»¥èµ‹é»˜è®¤å€¼// bar = 1// foo = truelet [x, y] = [1, 2, 3];// x = 1// y = 2let [a, [b], d] = [1, [2, 3], 4];// a = 1// b = 2// d = 4\n\nå¯¹è±¡çš„è§£æ„èµ‹å€¼let &#123; foo, bar &#125; = &#123; foo: &quot;aaa&quot;, bar: &quot;bbb&quot; &#125;; // å’Œé¡ºåºæ²¡å…³ç³»ï¼Œæ ¹æ®å±æ€§åæ¥å–å€¼// foo = &quot;aaa&quot;// bar = &quot;bbb&quot;let &#123; foo &#125; = &#123; bar: &quot;baz&quot; &#125;;// foo = undefined// å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•ï¼Œèµ‹å€¼åˆ°æŸä¸ªå˜é‡// å¦‚ï¼šconsoleå¯¹è±¡æœ‰logæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼šconst &#123; log &#125; = console;log(&quot;hello&quot;); // hello\n\npromiseã€asyncã€awaitpromiseã€asyncã€await è¿™ä¸‰ä¸ªå…³é”®å­—éƒ½å’Œå¼‚æ­¥ç¼–ç¨‹æœ‰å…³ã€‚\nPromisePromise ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€œæ‰¿è¯ºâ€çš„æ„æ€ï¼Œå£°æ˜ä¸€ä¸ª Promise å°±æ˜¯ç«‹ä¸‹äº†ä¸€ä¸ªæ‰¿è¯ºï¼Œæ— è®ºæ€ä¹ˆæ ·ï¼Œéƒ½ä¼šç»™è¢«æ‰¿è¯ºäººä¸€ä¸ªç»“æœï¼Œè€Œä¸”è¿™ä¸ªç»“æœæ˜¯æ¿ä¸Šé’‰é’‰çš„ï¼Œä¸ä¼šå†å˜ã€‚\nPromise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼špendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆå·²æˆåŠŸï¼‰å’Œ rejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚\nå£°æ˜ Promise å¯¹è±¡æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯¹è±¡çš„ 2 ä¸ªå‚æ•°ä¹Ÿæ˜¯å‡½æ•°å¯¹è±¡ï¼ˆresolve, rejectï¼‰ï¼Œresolveå’Œrejectä¸éœ€è¦å¼€å‘è€…å®šä¹‰ï¼ŒJavascript å¼•æ“ä¼šè‡ªåŠ¨ç”Ÿæˆè¿™ 2 ä¸ªå‡½æ•°ã€‚\nå½“ Promise å¯¹è±¡ç”Ÿæˆåä¼šç«‹å³å˜æˆpendingçŠ¶æ€ï¼Œè°ƒç”¨resolveå‡½æ•°ä¼šå°† Promise å¯¹è±¡æ ‡è®°ä¸ºfulfilledçŠ¶æ€ï¼Œè€Œè°ƒç”¨rejectå‡½æ•°åˆ™ä¼šå°†å½“å‰ Promise å¯¹è±¡æ ‡è®°rejectedçŠ¶æ€ã€‚\nresolveå’Œrejectedå‡½æ•°ï¼Œæˆ‘ä»¬åªèƒ½è°ƒç”¨å®ƒä»¬ä¸­çš„ä¸€ä¸ªï¼Œä¸èƒ½å³è°ƒç”¨resolveåˆè°ƒç”¨rejectedã€‚å¦‚æœæˆ‘ä»¬å…ˆè°ƒç”¨äº†resolveï¼Œæ­¤æ—¶ Promise çŠ¶æ€ä¼šæ ‡è®°ä¸ºfulfilledï¼Œç„¶ååˆè°ƒç”¨äº†rejectedå‡½æ•°ï¼Œæ­¤æ—¶ Promise çŠ¶æ€å¹¶ä¸ä¼šå†æ”¹å˜ï¼Œä»ç„¶ä½¿fulfilledçŠ¶æ€ï¼Œå› ä¸ºæ‰¿è¯ºçš„ç»“æœæ˜¯æ¿ä¸Šé’‰é’‰çš„ï¼Œä¸ä¼šå†å˜ã€‚å»ºè®®å°†resolveå’Œrejectä½œä¸ºæœ€åä¸€è¡Œä»£ç è°ƒç”¨ï¼Œç®€å•èµ·è§ï¼Œå¯ä»¥åœ¨è¿™ 2 ä¸ªå‡½æ•°å‰é¢åŠ ä¸Šreturn, å³return resolve();æˆ–return reject();\n// Promiseçš„å‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå‡½æ•°æœ‰2ä¸ªå‚æ•°resolve, rejectlet promise = new Promise((resolve, reject) =&gt; &#123;  // åšä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚  // è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå»¶æ—¶å™¨æ¥æ¨¡æ‹Ÿè€—æ—¶çš„ç½‘ç»œè¯·æ±‚  setTimeout(() =&gt; &#123;    // å»¶æ—¶1000msä¹‹åæˆåŠŸ    resolve(&quot;ok&quot;);  &#125;, 1000);  // æˆåŠŸåˆ™è°ƒç”¨ resolve();  // å¤±è´¥åˆ™è°ƒç”¨ reject();&#125;);\n\né‚£ä¹ˆï¼Œæˆ‘æƒ³åœ¨è¿™ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆä¹‹åï¼Œå†æ ¹æ®ç»“æœï¼ˆæ˜¯æˆåŠŸäº†ï¼Œè¿˜æ˜¯å¤±è´¥äº†ï¼‰æ¥ç»§ç»­åšä¸‹ä¸€ä»¶äº‹æƒ…ï¼Œé‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåšäº†ï¼ŸPromise å¯¹è±¡æä¾›äº†thenæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å— 2 ä¸ªå‡½æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ï¼šç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯ Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸ºresolvedæ—¶è°ƒç”¨;ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ˜¯ Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸ºrejectedæ—¶è°ƒç”¨ã€‚å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šè¦æä¾›ã€‚æ¯ä¸ªå›è°ƒå‡½æ•°éƒ½å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯ä¸Šä¸€æ­¥è°ƒç”¨ resolve æˆ– reject æ—¶ä¼ å…¥çš„ã€‚\n// ä¸Šé¢çš„è€—æ—¶æ“ä½œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦æ ¹æ®ç»“æœæ¥ç»§ç»­åšä¸€äº›äº‹æƒ…// æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨thenï¼Œthenå‡½æ•°æœ‰2ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º2ä¸ªå‡½æ•°å¯¹è±¡ã€‚// ä¸Šä¸€æ­¥æ“ä½œä¸­ï¼Œå¦‚æœè°ƒç”¨resolve(data)ï¼Œåˆ™thenå‡½æ•°ç¬¬ä¸€ä¸ªå‡½æ•°å¯¹è±¡å‚æ•°ä¼šè¢«è°ƒç”¨ï¼›// å¦‚æœè°ƒç”¨reject(data)ï¼Œåˆ™thenå‡½æ•°ç¬¬äºŒä¸ªå‡½æ•°å¯¹è±¡å‚æ•°ä¼šè¢«è°ƒç”¨promise.then(  (data) =&gt; &#123;    console.log(&quot;resolve1: &quot; + data);    return &quot;hello&quot;;  &#125;,  (data) =&gt; &#123;    console.log(&quot;reject1: &quot; + data);  &#125;);\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘åœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ç›´æ¥é€šè¿‡ return è¿”å›äº†â€helloâ€å­—ç¬¦ä¸²ï¼Œé‚£è¿™ä¸ªè¿”å›å€¼çš„æ„ä¹‰åœ¨å“ªé‡Œäº†ï¼Ÿè¿˜æœ‰å…¶ä»–äººå¯ä»¥ä½¿ç”¨åˆ°è¿™ä¸ªè¿”å›å€¼å—ï¼Ÿæ˜¯çš„ï¼Œè¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚å› ä¸ºthençš„è¿”å›å€¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè™½ç„¶æˆ‘åªæ˜¯ä½¿ç”¨çš„return &quot;hello&quot;;ï¼Œå¹¶æ²¡æœ‰new Promiseï¼Œä½† JavaScript å¼•æ“ä¼šè‡ªåŠ¨åŒ…è£…æˆä¸€ä¸ª Promise å¯¹è±¡ï¼Œç­‰åŒäºï¼š\npromise.then(  (data) =&gt; &#123;    console.log(&quot;resolve1: &quot; + data);    return new Promise((resolve, reject) =&gt; &#123;      return resolve(&quot;hello&quot;);    &#125;);  &#125;,  (data) =&gt; &#123;    console.log(&quot;reject1: &quot; + data);  &#125;);\n\nåˆ°è¿™å„¿äº†ï¼Œæˆ‘ä»¬çŸ¥é“äº†thençš„è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚æ—¢ç„¶thenè¿”å›çš„æ˜¯Promiseå¯¹è±¡ï¼Œé‚£ä¹ˆPromiseå°±å¯ä»¥ç»§ç»­thenå‘€ï¼Œç„¶åä¸€ç›´thenä¸‹å»â€¦.è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ç³»åˆ—å¼‚æ­¥çš„æ“ä½œä¸²è”èµ·æ¥äº†ï¼š\nlet p = new Promise((resolve, reject) =&gt; &#123;  // ...  // resolve(); æˆ– reject();&#125;)  .then(() =&gt; &#123;    // ...  &#125;)  .then(() =&gt; &#123;    // ...  &#125;)  .then(() =&gt; &#123;    // ...  &#125;);\n\nä½†å¤šä¸ªå¼‚æ­¥æ“ä½œä¸²è”æ‰§è¡Œï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\nlet promise = new Promise((resolve, reject) =&gt; &#123;  setTimeout(() =&gt; &#123;    // å»¶æ—¶1000ms    resolve(&quot;ok1&quot;);  &#125;, 1000);&#125;)  .then((data) =&gt; &#123;    console.log(&quot;resolve1: &quot; + data);    setTimeout(() =&gt; &#123;      // å»¶æ—¶1000ms      return &quot;ok2&quot;;    &#125;, 1000);  &#125;)  .then((data) =&gt; &#123;    console.log(&quot;resolve2: &quot; + data);  &#125;);\n\næˆ‘ä»¬æœŸæœ›çš„è¾“å‡ºæ˜¯ï¼š\nresolve1: ok1;resolve2: ok2;\n\nä½†å®é™…çš„è¾“å‡ºå´æ˜¯ï¼š\nresolve1: ok1;resolve2: undefined;\n\né—®é¢˜å‡ºåœ¨ç¬¬äºŒä¸ª setTimeout æ¨¡æ‹Ÿçš„è€—æ—¶æ“ä½œï¼Œæˆ‘ä»¬ä»¥ä¸ºç¨‹åºä¼šç­‰ç¬¬äºŒä¸ª setTimeout æ‰§è¡Œå®Œäº†å†æ‰§è¡Œç¬¬äºŒä¸ª thenï¼Œä½†äº‹å®ä¸Š setTimeout ä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè™½ç„¶å…¶å»¶æ—¶äº†ä¸€ç§’æ‰§è¡Œå…¶å›è°ƒå‡½æ•°ï¼Œä½† setTimeout è¿™æ¡è¯­å¥å´é©¬ä¸Šæ‰§è¡Œå®Œæˆäº†ï¼Œå¯¼è‡´ç¬¬ä¸€ä¸ª then æ²¡æœ‰ä»»ä½•è¿”å›ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å°†ä»£ç æ”¹æˆä¸‹é¢çš„ï¼š\nlet promise = new Promise((resolve, reject) =&gt; &#123;  setTimeout(() =&gt; &#123;    // å»¶æ—¶1000ms    resolve(&quot;ok1&quot;);  &#125;, 1000);&#125;)  .then((data) =&gt; &#123;    console.log(&quot;resolve1: &quot; + data);    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        // å»¶æ—¶1000ms        resolve(&quot;ok2&quot;);      &#125;, 1000);    &#125;);  &#125;)  .then((data) =&gt; &#123;    console.log(&quot;resolve2: &quot; + data);  &#125;);\n\nPromise å¼‚å¸¸æ•è·Promise å¯¹è±¡è¿˜æä¾›äº†catchæ–¹æ³•ï¼Œç”¨æ¥æ•è·å¼‚å¸¸ã€‚åœ¨ä»‹ç»catchå‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š\nlet promise = new Promise((resolve, reject) =&gt; &#123;  throw new Error(&quot;an error&quot;);  resolve(&quot;ok&quot;);&#125;).then(  (data) =&gt; &#123;    console.log(&quot;resolve: &quot; + data);  &#125;,  (data) =&gt; &#123;    console.log(&quot;reject: &quot; + data);  &#125;);// è¾“å‡ºï¼š// reject: Error: an error\n\næˆ‘ä»¬åœ¨ Promise ä¸­äººä¸ºæŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯ç¨‹åºå´è¿˜æ˜¯æ²¡æœ‰ä¸­æ­¢ï¼Œè€Œæ˜¯è¿è¡Œåˆ°äº† reject è¿‡ç¨‹ä¸­å»äº†ã€‚\nè¿™æ˜¯å› ä¸º Promise é»˜è®¤ä¼šæ•è·å…¶æ“ä½œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸ï¼Œå¦‚æœæœ‰å¼‚å¸¸å‘ç”Ÿï¼Œå…¶çŠ¶æ€å°±ä¼šè‡ªåŠ¨å˜æˆrejectedï¼Œè¿˜è®°å¾—å‰é¢è¯´è¿‡ Promise çŠ¶æ€ä¸€æ—¦ç¡®å®šå°±ä¸ä¼šå†æ”¹å˜äº†å§ï¼Œæ‰€ä»¥å³ä¾¿åé¢çš„resolve(&quot;ok&quot;);æ‰§è¡Œäº†ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ promise çŠ¶æ€ï¼ˆäº‹å®ä¸Š throw è¯­å¥åçš„ä»£ç å¹¶æ²¡æœ‰æœºä¼šæ‰§è¡Œï¼‰ã€‚\né‚£ä¹ˆï¼Œå‡å¦‚æˆ‘ä»¬æ²¡æœ‰å†™ reject å›è°ƒå‡½æ•°ä¼šæ€ä¹ˆæ ·äº†ï¼Ÿçœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š\nlet promise = new Promise((resolve, reject) =&gt; &#123;  throw new Error(&quot;an error&quot;);  resolve(&quot;ok&quot;);&#125;).then((data) =&gt; &#123;  console.log(&quot;resolve: &quot; + data);&#125;);\n\nä¸Šé¢çš„ä»£ç ä¸­ç”±äºæ²¡æœ‰æŒ‡å®šå¼‚å¸¸å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥ç¨‹åºæŠ›å‡ºäº†å¼‚å¸¸ä¿¡æ¯ï¼Œä¸­æ­¢æ‰§è¡Œäº†ã€‚\nå¦å¤–ï¼ŒPromise çš„å¼‚å¸¸æ˜¯ä¼šä¸€ç›´å‘ä¸‹ä¼ é€’çš„ï¼Œç›´åˆ°æœ€åæœ‰äººå¤„ç†ï¼Œå¦‚æœå§‹ç»ˆæ²¡äººå¤„ç†ï¼Œç¨‹åºå°±ä¼šæŠ›å‡ºå¼‚å¸¸ä¿¡æ¯ï¼Œç„¶åä¸­æ­¢ï¼š\nlet promise = new Promise((resolve, reject) =&gt; &#123;  throw new Error(&quot;an error&quot;);  resolve(&quot;ok&quot;);&#125;)  .then((data) =&gt; &#123;    console.log(&quot;resolve1: &quot; + data);  &#125;)  .then(    (data) =&gt; &#123;      console.log(&quot;resolve2: &quot; + data);    &#125;,    (data) =&gt; &#123;      console.log(&quot;reject2: &quot; + data);    &#125;  );// è¾“å‡ºï¼š// reject: Error: an error\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ª then æ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œå¼‚å¸¸å‘ä¸‹ä¼ é€’ç»™ç¬¬äºŒä¸ª then, ç¬¬äºŒä¸ª then å¤„ç†äº†è¯¥å¼‚å¸¸ï¼Œç¨‹åºç»§ç»­è¿è¡Œã€‚\nç°åœ¨ç†è§£Promise.catch()æ–¹æ³•å°±å®¹æ˜“å¤šäº†ã€‚catch()æ–¹æ³•å…¶å®å°±æ˜¯.then(null, rejectiion)æˆ–.then(undefined, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚\næˆ‘ä»¬ä¸€èˆ¬æ€»æ˜¯å»ºè®®ï¼ŒPromise å¯¹è±¡åé¢è¦è·Ÿ catch()æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥å¤„ç† Promise å†…éƒ¨å‘ç”Ÿçš„é”™è¯¯ã€‚catch()æ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå› æ­¤åé¢è¿˜å¯ä»¥æ¥ç€è°ƒç”¨ then()æ–¹æ³•ã€‚\nasync, awaitasync æ˜¯ES7æ‰æœ‰çš„ä¸å¼‚æ­¥æ“ä½œæœ‰å…³çš„å…³é”®å­—ï¼Œéœ€è¦å’ŒPromiseé…åˆä½¿ç”¨ï¼Œasyncå‡½æ•°è¿”å›ä¸€ä¸ª Promiseå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ï¼š\nasync function helloAsync() &#123;  return &quot;helloAsync&quot;;&#125;console.log(helloAsync());helloAsync().then((v) =&gt; &#123;  console.log(v);&#125;);// è¾“å‡ºï¼š// Promise &#123; &#x27;helloAsync&#x27; &#125;// helloAsync\n\nawaitå…³é”®å­—åªèƒ½ç”¨åœ¨è¢«asyncæ ‡è®°çš„å‡½æ•°ä½“å†…ï¼Œasyncå‡½æ•°æ‰§è¡Œæ—¶ï¼Œå¦‚æœé‡åˆ°awaitå°±ä¼šå…ˆæš‚åœæ‰§è¡Œï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œæ¢å¤asyncå‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›è§£æå€¼ã€‚\nfunction testAwait() &#123;  return new Promise((resolve) =&gt; &#123;    setTimeout(function () &#123;      console.log(&quot;testAwait&quot;);      resolve();    &#125;, 1000);  &#125;);&#125;async function helloAsync() &#123;  await testAwait();  console.log(&quot;helloAsync&quot;);&#125;helloAsync();// è¾“å‡ºï¼š// testAwait// helloAsync\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"]},{"title":"å†™ç»™C++ç¨‹åºå‘˜çš„Typescriptè¯­æ³•åŸºç¡€","url":"/post/2248228478.html","content":"TypeScript æ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œæ”¯æŒ ES6 çš„è¯­æ³•è§„èŒƒï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†å¢å¼ºï¼ŒäºŒè€…æœ€å¤§çš„ä¸åŒåœ¨äºï¼šTypeScript æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œè€Œ JavaScript æ˜¯å¼±ç±»å‹çš„è¯­è¨€ã€‚\n\n\næœ¬æ–‡å°†ç€é‡ä»‹ç»äºŒè€…çš„ä¸åŒä¹‹å¤„ã€‚\nå˜é‡å£°æ˜TypeScript æ”¯æŒä½¿ç”¨varã€letã€constè¿›è¡Œå˜é‡å£°æ˜ï¼Œä½†å»ºè®®ä¸è¦ä½¿ç”¨varã€‚TypeScript å£°æ˜å˜é‡æ—¶ï¼Œå¯ä»¥å¼ºåˆ¶æŒ‡å®šå˜é‡ç±»å‹æˆ–è€…ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ä»â€œå€¼â€æ¨å¯¼å‡ºå˜é‡ç±»å‹ï¼Œä½†æ— è®ºå“ªç§æƒ…å†µï¼Œä¸€æ—¦ç¡®å®šäº†ç±»å‹ï¼Œåé¢ä¸èƒ½å†æ¬¡è¢«èµ‹å€¼ä¸ºå…¶ä»–ç±»å‹ï¼š\nlet a = 1;a = 10;a = &quot;x&quot;; âŒlet b : number = 12;let c : number = &quot;x&quot;; âŒlet fibonacci: number[] = [1, 1, 2, 3, 5];let fibonacci: number[] = [1, &#x27;1&#x27;, 2, 3, 5];âŒ\n\nå‡½æ•°å‚æ•°TypeScript è¦æ±‚ï¼šè°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸å‡½æ•°å£°æ˜çš„å‚æ•°ä¸€è‡´ï¼ˆä¸ªæ•°åŠç±»å‹ï¼‰ï¼Œå¦‚ï¼š\nfunction sum(x: number, y: number): number &#123;    return x + y;&#125;sum(1, 2, 3); âŒsum(1);âŒsum(1, &quot;x&quot;); âŒ\n\nTypeScript è¦æ±‚ï¼šå¯é€‰å‚æ•°å¿…é¡»åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åï¼Œå¦‚ï¼š\nfunction buildName(firstName?: string, lastName: string) &#123;âŒ    if (firstName) &#123;        return firstName + &#x27; &#x27; + lastName;    &#125; else &#123;        return lastName;    &#125;&#125;\n\næšä¸¾æšä¸¾æ˜¯ TypeScript ç‰¹æœ‰çš„ï¼šç¬¬ä¸€ä¸ªå…ƒç´ æ²¡æœ‰èµ‹å€¼ï¼Œåˆ™é»˜è®¤ä¸º 0ï¼Œåé¢çš„å…ƒç´ çš„å€¼ä¾æ­¤é€’å¢ï¼š\nenum Days &#123;    Sun,   // 0    Mon,  // 1    Tue,  // 2    Wed,    Thu,    Fri,    Sat&#125;;\n\nä¹Ÿæ”¯æŒï¼š\nenum Days &#123;    Sun = 1,   // 1    Mon,  // 2    Tue,  // 3    Wed = 10,  // 10    Thu,  // 11    Fri,  // 12    Sat   // 13&#125;;\n\næšä¸¾å…ƒç´ å¯ä»¥æ˜¯å¸¸é‡å€¼æˆ–æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘æœŸè®¡ç®—å¾—å‡ºçš„å€¼ï¼š\nenum FileAccess &#123;    // å¸¸é‡å€¼    None,   // 0    Read    = 1 &lt;&lt; 1,    Write   = 1 &lt;&lt; 2,    ReadWrite  = Read | Write,    // è®¡ç®—å¾—å‡ºçš„å€¼    G = &quot;123&quot;.length&#125;\n\nç±»ç›¸æ¯”ES6ï¼ŒTypeScriptæ–°å¢äº†ç»§æ‰¿ã€æˆå‘˜è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ã€‚è¶Šæ¥è¶Šæœ‰ Javaã€C++çš„å‘³é“äº†ã€‚\nç»§æ‰¿ã€æˆå‘˜è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦TypeScript ç»§æ‰¿éœ€è¦ä½¿ç”¨extendså…³é”®å­—ï¼Œåªæ”¯æŒå•ç»§æ‰¿ï¼Œè¿™ç‚¹ä¸åŒäº C++ã€‚ç±»ç»§æ‰¿åï¼Œå­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚\nclass Person &#123;    private id: string;  // ç§æœ‰çš„ï¼Œåªèƒ½è¢«è‡ªèº«è®¿é—®    protected name: string;  // å—ä¿æŠ¤ï¼Œå¯ä»¥è¢«å…¶è‡ªèº«ä»¥åŠå…¶å­ç±»å’Œçˆ¶ç±»è®¿é—®    protected age: number;   // å…¬å¼€çš„    public getId() : string &#123;        return this.id;    &#125;    public getName() : string &#123;        return this.name;    &#125;    public getAge() : number &#123;        return this.age;    &#125;    public print() : void &#123;        console.log(&quot;name:&quot; + this.name + &quot;, age:&quot; + this.age);    &#125;&#125;class Student extends Person &#123;    private grade : number;    public getGrade() : number &#123;        return this.grade;    &#125;    public print() : void &#123; // é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•        super.print();  // ä½¿ç”¨superç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•        console.log(&quot;grade:&quot; + this.grade);    &#125;&#125;\n\ninstanceofinstanceof è¿ç®—ç¬¦ç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœæ˜¯è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚\nclass Person &#123;&#125;let obj = new Person();let isPerson: boolean = obj instanceof Person;\n\ninterface æ¥å£TypeScript æ–°å¢ interface æ¥å£çš„æ¦‚å¿µï¼Œè¿™ä¸ªæ¥å£çš„æ¦‚å¿µå’Œ Java ä¸­çš„ interface ç±»ä¼¼ï¼Œå³ï¼šåªæœ‰å®šä¹‰æ²¡æœ‰å®ç°ã€‚\nåŒæ—¶ï¼Œæ¥å£ä¹Ÿæ”¯æŒç»§æ‰¿ã€‚\ninterface IPerson &#123;  name: string;&#125;interface IStudent extends IPerson &#123;  // æ¥å£çš„ç»§æ‰¿  grade: number;&#125;class Student implements IStudent &#123;  // å®ç°æ¥å£çš„ç±»  name: string;  grade: number;&#125;\n\nå‘½åç©ºé—´TypeScript ä¸­çš„å‘½åç©ºé—´çš„æ¦‚å¿µå’Œ C++ä¸­çš„å‘½åç©ºé—´çš„æ¦‚å¿µä¸€æ ·ï¼Œè€Œä¸”å…³é”®å­—ä¹Ÿéƒ½æ˜¯namespaceã€‚\nç¨æœ‰ä¸åŒçš„æ˜¯ï¼ŒC++ä¸éœ€è¦å°†å‘½åç©ºé—´ä¸­çš„å†…å®¹æš´éœ²å‡ºæ¥ï¼ŒC++é»˜è®¤å°±æ˜¯å…¨éƒ¨æš´éœ²çš„ï¼Œè€Œ TypeScript éœ€è¦æ‰‹åŠ¨æ·»åŠ  export å…³é”®å­—å°†å‘½åç©ºé—´çš„ä¸­çš„å†…å®¹æš´éœ²å‡ºæ¥ï¼š\nnamespace XYZ &#123;    export let name : string;    export class Person &#123;    &#125;    export interface IPerson &#123;    &#125;&#125;XYZ.name = &quot;jeff&quot;;\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"]},{"title":"C++ Qtåº”ç”¨åœ¨macOSå¹³å°çš„ç¼–è¯‘ä¸å‘å¸ƒ","url":"/post/1112470146.html","content":"åœ¨ macOS ä¸Šåˆ†å‘ Qt åº”ç”¨ï¼Œå¼€å‘è€…å¸¸è¢«å¤šæ¶æ„ç¼–è¯‘ã€ä»£ç ç­¾åã€å…¬è¯æµç¨‹æ‰€å›°æ‰°ã€‚æœ¬æ–‡åŸºäº Qt6.9.2 å®æˆ˜ç»éªŒï¼Œç³»ç»Ÿæ¢³ç†äº†ä»ç¼–è¯‘é…ç½®åˆ°æœ€ç»ˆåˆ†å‘çš„å®Œæ•´è·¯å¾„ã€‚ä½ å°†äº†è§£å¦‚ä½•é€šè¿‡ CMake ç®¡ç†å¤šæ¶æ„æ„å»ºï¼Œä½¿ç”¨ macdeployqt æ‰“åŒ…ä¾èµ–ï¼Œé…ç½®æ­£ç¡®çš„ entitlements æ–‡ä»¶ï¼Œå¹¶å®Œæˆ Apple å¼ºåˆ¶è¦æ±‚çš„ç­¾åä¸å…¬è¯ã€‚æ›´æä¾›è‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹ï¼ŒåŠ©ä½ å‘Šåˆ«é‡å¤æ“ä½œï¼Œç¡®ä¿åº”ç”¨åœ¨ Intel å’Œ Apple Siliconï¼ˆM èŠ¯ç‰‡ï¼‰ è®¾å¤‡ä¸Šå‡èƒ½æ— ç¼è¿è¡Œã€‚è¿™ä»½é¿å‘æŒ‡å—ï¼Œå°†å¸¦ä½ é«˜æ•ˆè·¨è¶Š macOS åˆ†å‘çš„æœ€åä¸€é“é—¨æ§›ã€‚\n\n\nä¸åŒæ¶æ„mac æœ‰ä¸¤ç§ CPU èŠ¯ç‰‡ï¼šIntel èŠ¯ç‰‡å’Œ M ç³»åˆ—èŠ¯ç‰‡ã€‚\nIntel èŠ¯ç‰‡å¯¹åº” x64 æ¶æ„ï¼ŒM èŠ¯ç‰‡å¯¹åº” arm64 æ¶æ„ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºä¸åŒçš„æ¶æ„ç¼–è¯‘ä¸åŒçš„è½¯ä»¶å’Œåº“ã€‚\nåœ¨ä½¿ç”¨ vcpkg å®‰è£…ä¾èµ–åº“æ—¶ï¼Œè¿™ä¸¤ç§æ¶æ„æ‰€å¯¹åº”çš„ triplet åˆ†åˆ«ä¸º x64-osxã€arm64-osxï¼š\n./vcpkg install --triplet &quot;x64-osx&quot;./vcpkg install --triplet &quot;arm64-osx&quot;\n\nä½¿ç”¨lipo -infoå‘½ä»¤å¯ä»¥æŸ¥çœ‹äºŒè¿›åˆ¶æ”¯æŒçš„ CPU æ¶æ„ä¿¡æ¯ã€‚\nUniversal ç‰ˆæœ¬æˆ‘ä»¬ç»å¸¸çœ‹åˆ°æœ‰äº›ç¨‹åºä¼šæä¾› Universal ç‰ˆæœ¬ï¼ˆç»Ÿä¸€ç‰ˆæœ¬ï¼‰ï¼Œå³è¯¥ç‰ˆæœ¬åŒæ—¶æ”¯æŒ Intel èŠ¯ç‰‡å’Œ M èŠ¯ç‰‡ã€‚\næˆ‘ä»¬å¯ä»¥å…ˆåˆ†åˆ«ç¼–è¯‘ arm64 å’Œ x64 æ¶æ„çš„åº“ï¼Œç„¶åå€ŸåŠ©lipomergeå·¥å…·æ¥ç”Ÿæˆ Universal ç‰ˆæœ¬ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\npython3 ~/lipomerge.py arm64-osx x64-osx uni-osx\n\n\nå€¼å¾—æ¬£æ…°çš„æ˜¯ï¼ŒQt å®˜æ–¹æä¾›çš„åº“é»˜è®¤å°±æ˜¯ Universal ç‰ˆæœ¬ï¼Œä¸éœ€è¦é¢å¤–ç¼–è¯‘ã€‚\n\nè‡ªæ­¤ç¨‹åºä¾èµ–åº“çš„ç¼–è¯‘å·¥ä½œå·²ç»å®Œæˆï¼Œä¸‹é¢å¼€å§‹ç¼–è¯‘ç¨‹åºä¸»ä½“ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;éœ€è¦åœ¨ CMake ä¸­æŒ‡å®šç¨‹åºçš„ç›®æ ‡æ¶æ„å’Œæ‰€æ”¯æŒ OSX çš„æœ€ä½ç‰ˆæœ¬ï¼š\nset(CMAKE_OSX_DEPLOYMENT_TARGET &quot;12.0&quot;)set(CMAKE_OSX_ARCHITECTURES &quot;x86_64;arm64&quot;)\n\nå¹¶é€šè¿‡æŒ‡å®š MACOSX_BUNDLE å‚æ•°å°†å¯æ‰§è¡Œæ–‡ä»¶æ„å»ºä¸º macOS è½¯ä»¶åŒ…ï¼ˆè¿™ä¸€æ­¥æ˜¯éå¿…é¡»ï¼Œä½†åœ¨æœ¬æ•™ç¨‹ä¸­æ˜¯æŒ‰ç…§è¯¥æ–¹æ¡ˆæ¥è®²è§£çš„ï¼‰ï¼š\nadd_executable(    SampleApp    MACOSX_BUNDLE    $&#123;SOURCE_FILES&#125;    SampleClient.ui    SampleClient.qrc)\n\nä½¿ç”¨ CMake è¿›è¡Œç¼–è¯‘ï¼š\ncmake -DCMAKE_PREFIX_PATH=~/vcpkg/installed/uni-osx ..make\n\nå¦‚æœæç¤ºæ‰¾ä¸åˆ° Qtï¼Œå¯ä»¥åœ¨ CMake è„šæœ¬ä¸­æ˜¾å¼å°† Qt çš„å®‰è£…è·¯å¾„åŠ uni-osx åº“çš„è·¯å¾„æ·»åŠ åˆ° CMAKE_PREFIX_PATH ä¸­ï¼š\nlist(APPEND CMAKE_PREFIX_PATH &quot;/Users/imac/Qt/6.9.2/macos&quot;)list(APPEND CMAKE_PREFIX_PATH &quot;/Users/imac/vcpkg/vcpkg_installed/uni-osx&quot;)\n\nmacdeployqtåœ¨ macOS ä¸Šæ¯æ¬¡ç¼–è¯‘å®Œ Qt ç¨‹åºåï¼Œéƒ½éœ€è¦ä½¿ç”¨ macdeployqt å‘½ä»¤æ¥æ‹·è´ä¾èµ–çš„ Qt åº“ï¼Œå¦åˆ™å³ä¾¿å®Œæˆäº†ç­¾åå’Œå…¬è¯ï¼Œåœ¨ç”¨æˆ·æœºå™¨ä¸Šä»ç„¶æ— æ³•å¯åŠ¨ï¼Œè€Œåœ¨ Windows ä¸Šåªéœ€è¦æ‹·è´ä¸€æ¬¡ï¼Œä¸‹æ¬¡ä»…æ›¿æ¢ exe å³å¯ï¼ˆå¤§å‘ï¼Œæµªè´¹äº†æˆ‘å¾ˆå¤šæ—¶é—´ï¼‰ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¯ä»¥å°†æ¯æ¬¡ç¼–è¯‘åéƒ½éœ€è¦æ‰§è¡Œçš„ macdeployqt å‘½ä»¤æ·»åŠ åˆ° CMake è„šæœ¬ä¸­ï¼š\nfind_program(MACDEPLOYQT_EXECUTABLE macdeployqt    HINTS &quot;$&#123;Qt6_DIR&#125;/../../../bin&quot;          &quot;$&#123;QT_INSTALL_PREFIX&#125;/bin&quot;)if(MACDEPLOYQT_EXECUTABLE)    add_custom_command(TARGET SampleApp POST_BUILD        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ‰§è¡ŒMacDeployQtå‘½ä»¤ =====&quot;        COMMAND $&#123;MACDEPLOYQT_EXECUTABLE&#125;            &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;&quot;            -always-overwrite            -verbose=1            -executable=&quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/MacOS/SampleApp&quot;        VERBATIM    )else()    message(FATAL_ERROR &quot;macdeployqt not found! Qt libraries will not be bundled.&quot;)endif()\n\napp è½¯ä»¶åŒ…macOS ä¸Šçš„ app è½¯ä»¶åŒ…å®é™…ä¸ºä¸€ä¸ªæŒ‰ç…§ç‰¹å®šç»“æ„ç»„ç»‡çš„ã€åç§°ä»¥.appç»“å°¾çš„æ–‡ä»¶å¤¹ã€‚\né€šå¸¸éœ€è¦åœ¨ XXX.app\\Contents\\Info.plist æ–‡ä»¶ä¸­å®šä¹‰äº†è½¯ä»¶åŒ…çš„ç‰ˆæœ¬ã€å›¾æ ‡ã€å¯æ‰§è¡Œæ–‡ä»¶ç­‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ³¨å†Œçš„è‡ªå®šä¹‰ URL åè®®ä¹Ÿæ˜¯åœ¨è¯¥æ–‡ä»¶ä¸­æŒ‡å®šã€‚\nç”±äºæˆ‘ä»¬çš„è½¯ä»¶åŒ…æ˜¯ CMake ç¼–è¯‘åè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå› æ­¤æ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨å°† Info.plist æ‹·è´åˆ°è½¯ä»¶åŒ… Contents ç›®å½•ã€‚ä¸ºäº†å°†æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œè‡ªåŠ¨ç­¾åï¼Œæˆ‘ä»¬å°† Info.plist çš„ç”Ÿæˆå’Œæ‹·è´æ“ä½œæ”¾å…¥åˆ° CMake è„šæœ¬ä¸­ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä½¿ç”¨ Info.plist.in æ¨¡æ¿ç”Ÿæˆ Info.plistï¼š\nset(MACOSX_BUNDLE_BUNDLE_NAME &quot;SampleApp&quot;)set(MACOSX_BUNDLE_BUNDLE_VERSION &quot;1.0.20&quot;)set(MACOSX_BUNDLE_SHORT_VERSION_STRING &quot;1.0&quot;)set(MACOSX_BUNDLE_COPYRIGHT &quot;Copyright 2025&quot;)set(MACOSX_BUNDLE_GUI_IDENTIFIER &quot;com.test.sampleapp&quot;)set(MACOSX_BUNDLE_ICON_FILE &quot;logo&quot;)set(MACOSX_BUNDLE_EXECUTABLE_NAME &quot;SampleApp&quot;)set_target_properties(SampleApp PROPERTIES    MACOSX_BUNDLE_BUNDLE_NAME &quot;$&#123;MACOSX_BUNDLE_BUNDLE_NAME&#125;&quot;    MACOSX_BUNDLE_BUNDLE_VERSION &quot;$&#123;MACOSX_BUNDLE_BUNDLE_VERSION&#125;&quot;    MACOSX_BUNDLE_SHORT_VERSION_STRING &quot;$&#123;MACOSX_BUNDLE_SHORT_VERSION_STRING&#125;&quot;    MACOSX_BUNDLE_COPYRIGHT &quot;$&#123;MACOSX_BUNDLE_COPYRIGHT&#125;&quot;    MACOSX_BUNDLE_GUI_IDENTIFIER &quot;$&#123;MACOSX_BUNDLE_GUI_IDENTIFIER&#125;&quot;    MACOSX_BUNDLE_ICON_FILE &quot;$&#123;MACOSX_BUNDLE_ICON_FILE&#125;&quot;)configure_file(Info.plist.in Info.plist)set_target_properties(SampleApp PROPERTIES    MACOSX_BUNDLE_INFO_PLIST &quot;$&#123;CMAKE_CURRENT_BINARY_DIR&#125;/Info.plist&quot;)\n\næ¨¡æ¿ä¸­çš„com.test.sampleappæ˜¯APPæ ‡è¯†ï¼Œéœ€è¦åœ¨https://developer.apple.com/account/resources/identifiersç”³è¯·ã€‚\nä½¿ç”¨ add_custom_command å‘½ä»¤å°† Info.plist æ–‡ä»¶æ‹·è´åˆ°è½¯ä»¶åŒ…ï¼Œå¹¶å°†è½¯ä»¶å›¾æ ‡æ‹·è´ Contents&#x2F;Resources ç›®å½•ï¼š\nif(MACDEPLOYQT_EXECUTABLE)    add_custom_command(TARGET SampleApp POST_BUILD        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ‰§è¡ŒMacDeployQtå‘½ä»¤ =====&quot;        COMMAND $&#123;MACDEPLOYQT_EXECUTABLE&#125;            &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;&quot;            -always-overwrite            -verbose=1            -executable=&quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/MacOS/SampleApp&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ›¿æ¢Info.plist =====&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E copy                &quot;$&#123;CMAKE_CURRENT_BINARY_DIR&#125;/Info.plist&quot;                &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/Info.plist&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ‹·è´logo.icns =====&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E copy                &quot;$&#123;CMAKE_SOURCE_DIR&#125;/Resources/logo.icns&quot;                &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/Resources/logo.icns&quot;        VERBATIM    )else()    message(FATAL_ERROR &quot;macdeployqt not found! Qt libraries will not be bundled.&quot;)endif()\n\nè½¯ä»¶ç­¾ååœ¨ç­¾åä¹‹å‰ï¼Œéœ€è¦ä» Apple å¼€å‘è€…å®˜ç½‘ç”³è¯·å¹¶ä¸‹è½½å¼€å‘è€…è¯ä¹¦ï¼Œå¹¶å¯¼å…¥åˆ°é’¥åŒ™ä¸²ï¼Œåœ¨æ­¤çœç•¥å…·ä½“æ­¥éª¤ï¼Œè¯»è€…å‚è€ƒå®˜æ–¹æ•™ç¨‹è‡ªè¡Œè§£å†³ã€‚\nä½¿ç”¨ codesign å·¥å…·å¯¹.app æ–‡ä»¶å¤¹è¿›è¡Œç­¾åï¼š\ncodesign --force --sign &quot;Developer ID Application: XXXX (XXXXX)&quot; --options runtime --entitlements entitlements.plist --deep --timestamp SampleApp.app# éªŒè¯ç­¾åæ˜¯å¦æˆåŠŸcodesign -dvvv SampleApp.app\n\nä½¿ç”¨ codesign å‘½ä»¤å¯¹åº”ç”¨è¿›è¡Œç­¾åæ—¶ï¼Œå¦‚æœå‡ºç°â€œThe timestamp service is not availableâ€é”™è¯¯ï¼Œè¿™é€šå¸¸è¡¨ç¤ºæ‚¨çš„ç”µè„‘åœ¨ç­¾åè¿‡ç¨‹ä¸­æ— æ³•è¿æ¥åˆ° Apple çš„æ—¶é—´æˆ³æœåŠ¡å™¨ time.apple.comã€‚\næˆ‘ä»¬åœ¨ä¸Šè¿°ç­¾åå‘½ä»¤ä¸­æŒ‡å®šäº† entitlements å‚æ•°æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å£°æ˜äº†åº”ç”¨å¯ä»¥è®¿é—®å“ªäº›å—ä¿æŠ¤çš„ç³»ç»Ÿèµ„æºï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;&lt;plist version=&quot;1.0&quot;&gt;&lt;dict&gt;    &lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;    &lt;false/&gt;    &lt;key&gt;com.apple.security.device.audio-output&lt;/key&gt;    &lt;true/&gt;    &lt;key&gt;com.apple.security.device.usb&lt;/key&gt;    &lt;true/&gt;    &lt;key&gt;com.apple.security.device.hid.device&lt;/key&gt;    &lt;true/&gt;    &lt;key&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/key&gt;    &lt;true/&gt;    &lt;key&gt;com.apple.security.cs.disable-library-validation&lt;/key&gt;    &lt;true/&gt;    &lt;key&gt;com.apple.security.network.client&lt;/key&gt;    &lt;true/&gt;    &lt;key&gt;com.apple.security.network.server&lt;/key&gt;    &lt;true/&gt;&lt;/dict&gt;&lt;/plist&gt;\n\nç°åœ¨å°† codesign å‘½ä»¤é™„åŠ åˆ° CMake è„šæœ¬ä¸­ï¼Œå®ç°è‡ªåŠ¨åŒ–ç­¾åï¼š\nif(MACDEPLOYQT_EXECUTABLE)    add_custom_command(TARGET SampleApp POST_BUILD        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ‰§è¡ŒMacDeployQtå‘½ä»¤ =====&quot;        COMMAND $&#123;MACDEPLOYQT_EXECUTABLE&#125;            &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;&quot;            -always-overwrite            -verbose=1            -executable=&quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/MacOS/SampleApp&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ›¿æ¢Info.plist =====&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E copy                &quot;$&#123;CMAKE_CURRENT_BINARY_DIR&#125;/Info.plist&quot;                &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/Info.plist&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ‹·è´logo.icns =====&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E copy                &quot;$&#123;CMAKE_SOURCE_DIR&#125;/Resources/logo.icns&quot;                &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;/Contents/Resources/logo.icns&quot;        COMMAND $&#123;CMAKE_COMMAND&#125; -E echo &quot;===== å¼€å§‹æ‰§è¡Œcodesignå‘½ä»¤ =====&quot;        COMMAND codesign --force --sign &quot;065174DD4EF38F7DC8BFD2F7EC238C90AC18CC82&quot;                    --entitlements &quot;$&#123;CMAKE_SOURCE_DIR&#125;/entitlements.plist&quot;                    --deep --timestamp --options runtime                    &quot;$&lt;TARGET_BUNDLE_DIR:SampleApp&gt;&quot;        COMMENT &quot;Deploying Qt, restoring Info.plist, copy logo.icns and signing the bundle&quot;        VERBATIM    )else()    message(FATAL_ERROR &quot;macdeployqt not found! Qt libraries will not be bundled.&quot;)endif()\n\nç”±äºè¯ä¹¦åç§°ä¸­å«ä¹‰ç©ºæ ¼ï¼Œæ·»åŠ åˆ° CMake è„šæœ¬ä¸­ä¼šå‡ºç°è¯­æ³•é”™è¯¯ï¼Œå› æ­¤åœ¨ä¸Šé¢çš„ CMake è„šæœ¬ä¸­ï¼Œ--signä½¿ç”¨çš„æ˜¯è¯ä¹¦çš„ SHA-1 å“ˆå¸Œå€¼ï¼ˆéå¿…é¡»ï¼Œä½†è¿™æ ·è§£å†³èµ·æ¥æ›´ç®€å•ï¼‰ã€‚\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ç”µè„‘ä¸Šå¯ç”¨è¯ä¹¦çš„å“ˆå¸Œå€¼ï¼š\nsecurity find-identity -v -p codesigning\n\nå…¬è¯å…¬è¯å¤§è‡´åˆ†ä¸ºä¸‹é¢ä¸‰ä¸ªæ­¥éª¤ã€‚\nç¬¬ä¸€æ­¥ï¼šå­˜å‚¨å‡­è¯\nå°†ä½ çš„å¼€å‘è€…è´¦å·å‡­è¯å®‰å…¨åœ°å­˜å‚¨åœ¨é’¥åŒ™ä¸²ä¸­ï¼Œåé¢ç›´æ¥ä½¿ç”¨å­˜å‚¨çš„åç§°å³å¯ï¼Œè¯¥æ“ä½œä»…éœ€è¦æ“ä½œä¸€æ¬¡ã€‚\nåœ¨å­˜å‚¨å‡­è¯ä¹‹å‰éœ€è¦ç”Ÿæˆä¸“ç”¨å¯†ç ï¼Œå¯ä»¥å‚è€ƒhttps://support.apple.com/zh-cn/102654æ–‡æ¡£æ¥ç”ŸæˆAppä¸“ç”¨å¯†ç ã€‚\nè‡ª 2023 å¹´ 11 æœˆ 1 æ—¥èµ·ï¼ŒApple æ¨èä½¿ç”¨ notarytoolï¼Œæ—§å·¥å…· altool å·²ä¸å†è¢«æ¥å—ã€‚\nxcrun notarytool store-credentials &quot;SampleApp_Notary&quot; --apple-id &quot;xxxxx@gmail.com&quot; --team-id &quot;85666CM666&quot; --password &quot;bxdt-888-888-888&quot;\n\nç¬¬äºŒæ­¥ï¼šæäº¤å…¬è¯\nå°†.app æ–‡ä»¶å¤¹å‹ç¼©ä¸º.zip æ–‡ä»¶ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æäº¤å…¬è¯ã€‚\nxcrun notarytool submit SampleApp.app.zip --keychain-profile &quot;SampleApp_Notary&quot;\n\næäº¤æˆåŠŸåï¼Œä¼šè¿”å›ç±»ä¼¼å¦‚ä¸‹çš„ç»“æœï¼Œè®°ä½ä¸‹é¢ç»“æœä¸­çš„ idï¼Œåœ¨åé¢æŸ¥è¯¢çš„æ—¶å€™éœ€è¦ç”¨åˆ°ã€‚\nConducting pre-submission checks for SampleApp.app.zip and initiating connection to the Apple notary service...Submission ID received  id: e9808593-40e1-3333-a9b7-10dfc2668eadUpload progress: 100.00% (47.2 MB of 47.2 MB)Successfully uploaded file  id: e9808593-40e1-3333-a9b7-10dfc2668ead  path: /Users/imac/SampleAppSrc/setup/macos/SampleApp.app.zip\n\nç¬¬ä¸‰æ­¥ï¼šæŸ¥è¯¢ç»“æœ\nxcrun notarytool info e9808593-40e1-3333-a9b7-10dfc2668ead --keychain-profile &quot;SampleApp_Notary&quot;\n\nåˆæ¬¡å…¬è¯éœ€è¦è€—æ—¶ 1 ä¸ªå°æ—¶å·¦å³ï¼Œåé¢è½¯ä»¶æ›´æ–°å†æ¬¡æäº¤å…¬è¯ï¼Œå°±æ¯”è¾ƒå¿«äº†ï¼Œåªéœ€è¦å‡ åˆ†é’Ÿã€‚\nè£…è®¢ç¥¨æ®æ‰€è°“è£…è®¢ç¥¨æ®å°±æ˜¯å°†å…¬è¯ç»“æœè£…è®¢åˆ°.app æ–‡ä»¶å¤¹ä¸­ï¼Œç¡®ä¿åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥é€šè¿‡ Gatekeeper å®‰å…¨éªŒè¯ã€‚\nxcrun stapler staple SampleApp.app\n\næ£€æŸ¥ä¸Šè¿°ç­¾åã€å…¬è¯ã€è£…è®¢å®Œæˆä¹‹åï¼Œè¿›è¡Œæœ€åçš„æ£€æŸ¥ï¼Œç¡®ä¿æ²¡æœ‰å‡ºé”™ã€‚\néªŒè¯åº”ç”¨æ˜¯å¦å·²æˆåŠŸè£…è®¢å…¬è¯ç¥¨æ®ï¼š\nxcrun stapler validate SampleApp.app\n\nè¿”å›ç±»ä¼¼å¦‚ä¸‹å†…å®¹è¡¨ç¤ºæˆåŠŸï¼š\nProcessing: /Users/imac/SampleAppSrc/setup/macos/SampleApp.appThe validate action worked!\n\næ¨¡æ‹Ÿç”¨æˆ·åŒå‡»å®‰è£…åº”ç”¨æ—¶ Gatekeeper çš„å®Œæ•´å®‰å…¨æ£€æŸ¥æµç¨‹ï¼š\nspctl -a -v -t install SampleApp.app\n\nè¿”å›ç±»ä¼¼å¦‚ä¸‹å†…å®¹è¡¨ç¤ºé€šè¿‡æ£€æŸ¥ï¼š\nSampleApp.dmg: acceptedsource=Notarized Developer ID\n\nç”Ÿæˆ DMGæœ€åæ¥ç”Ÿæˆ DMGï¼ŒDMG ä¸éœ€è¦ç­¾åï¼Œä¹Ÿä¸éœ€è¦å…¬è¯ã€‚\nä½¿ç”¨ create-dmg å·¥å…·æ¥ç”Ÿæˆ DMGï¼Œè€Œä¸æ˜¯æ¯æ¬¡æ‰‹åŠ¨ç”Ÿæˆï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ¯æ¬¡ç”Ÿæˆçš„ DMG éƒ½æ˜¯ä¸€æ ·çš„ã€‚\ncreate-dmg æ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»ºç£ç›˜é•œåƒæ–‡ä»¶ï¼ˆdmgï¼‰çš„ shell è„šæœ¬å‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š\nbrew install create-dmg\n\nä½¿ç”¨æ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼Œå…·ä½“å‚æ•°å¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ¥åšè°ƒæ•´ï¼š\ncreate-dmg \\ --volname &quot;Sample App Installer&quot; \\ --volicon &quot;logo.icns&quot; \\ --background &quot;background.png&quot; \\ --window-pos 400 200 \\ --window-size 480 600 \\ --icon-size 100 \\ --icon &quot;SampleApp.app&quot; 240 100 \\ --hide-extension &quot;SampleApp.app&quot; \\ --app-drop-link 240 400 \\ &quot;SampleApp.dmg&quot; \\ &quot;SampleApp.app/&quot;\n\n\nå› é¡¹ç›®å½’å±å’Œåè®®é™åˆ¶ï¼Œæˆ‘æ— æ³•åœ¨æ­¤å…¬å¼€å®Œæ•´ä»£ç ï¼Œä½†æ–‡ä¸­æ‰€æ¶‰åŠçš„æŠ€æœ¯æ–¹æ¡ˆä¸å®ç°ç»†èŠ‚ï¼Œå¯éšæ—¶ä¸æˆ‘è¿›ä¸€æ­¥æ¢è®¨ã€‚å¦‚æœ‰éœ€è¦ï¼Œæ¬¢è¿é€šè¿‡å…¶ä»–æ¸ é“äº¤æµã€‚\n","categories":["â‘£Qtå¥‡è¶£å±‹"],"tags":["macOS"]},{"title":"QSSåŸºæœ¬ä½¿ç”¨æ–¹æ³•","url":"/post/749849405.html","content":"Qt QSS é€‰æ‹©å™¨å’Œ CSS2ã€CSS3 çš„é€‰æ‹©å™¨ç±»ä¼¼ï¼Œå»ºè®®å…ˆå­¦ä¹ æˆ–è€…å¤ä¹  CSS é€‰æ‹©å™¨çš„è¯­æ³•ã€‚\nQSS è™½ç„¶æºè‡ª CSS ï¼Œä½†ä¹Ÿæœ‰ç¨è®¸ä¸åŒï¼Œè€Œä¸”æ”¯æŒçš„è¯­æ³•ä¹Ÿæ²¡ CSS é‚£ä¹ˆå¤šã€‚\n\n\né€‰æ‹©å™¨ç±»å‹ç±»é€‰æ‹©å™¨/*åŒ¹é…QPushButtonçš„å®ä¾‹åŠå…¶å­ç±»*/QPushButton &#123;  color: blue;&#125;/*åŒ¹é…QPushButtonçš„å®ä¾‹ï¼Œä½†ä¸åŒ…å«å­ç±»*/.QPushButton &#123;  color: blue;&#125;\n\né€‰æ‹©å™¨åˆ†ç»„/*åŒæ—¶åŒ¹é…QPushButtonã€QLineEditçš„å®ä¾‹*/QPushButton,QLineEdit &#123;  color: blue;&#125;\n\nID é€‰æ‹©å™¨&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n/*åŒ¹é…æ‰€æœ‰objectNameä¸ºbtnOKçš„å®ä¾‹*/*#btnOK &#123;  font-weight: bold;&#125;/*å’Œ*#btnOKä¸€æ ·ï¼ŒåŒ¹é…æ‰€æœ‰objectNameä¸ºbtnOKçš„å®ä¾‹*/#btnOK &#123;  font-weight: bold;&#125;/*åŒ¹é…æ‰€æœ‰objectNameä¸ºbtnOKçš„QPushButtonå®ä¾‹*/QPushButton#btnOK &#123;  font-weight: bold;&#125;\n\nå±æ€§é€‰æ‹©å™¨/*åŒ¹é…åŒ…å«flatå±æ€§çš„æ‰€æœ‰å®ä¾‹*/*[flat] &#123;  color: red;&#125;/*åŒ¹é…åŒ…å«flatå±æ€§çš„æ‰€æœ‰QPushButtonçš„å®ä¾‹*/QPushButton[flat] &#123;  color: red;&#125;/*åŒ¹é…flatå±æ€§ä¸ºtrueçš„æ‰€æœ‰QPushButtonçš„å®ä¾‹*/QPushButton[flat=&quot;true&quot;] &#123;  color: red;&#125;/*åŒ¹é…faltå±æ€§ä¸ºtrueä¸”defaultå±æ€§ä¸ºfalseçš„æ‰€æœ‰QPushButtonçš„å®ä¾‹*/QPushButton[flat=&quot;true&quot;][default=&quot;false&quot;] &#123;  color: red;&#125;\n\nåä»£é€‰æ‹©å™¨/*åŒ¹é…å±äºQDialogåä»£ï¼ˆå­©å­ï¼Œå­™å­ç­‰ï¼‰çš„QPushButtonæ‰€æœ‰å®ä¾‹*/QDialog QPushButton &#123;  color: red;&#125;\n\nå­å…ƒç´ é€‰æ‹©å™¨/*åŒ¹é…å±äºQDialogç›´æ¥å­ç±»çš„QPushButtonæ‰€æœ‰å®ä¾‹*/QDialog &gt; QPushButton &#123;  color: red;&#125;\n\nä¼ªçŠ¶æ€/*åŒ¹é…hoverçŠ¶æ€çš„æ‰€æœ‰QPushButtonçš„å®ä¾‹*/QPushButton:hover &#123;  color: white;&#125;/*åŒ¹é…åŒæ—¶ä¸ºhoverå’ŒenabledçŠ¶æ€çš„æ‰€æœ‰QPushButtonçš„å®ä¾‹*/QPushButton:hover:enabled &#123;  color: white;&#125;/*åŒ¹é…ä¸ä¸ºhoverçŠ¶æ€çš„æ‰€æœ‰QPushButtonçš„å®ä¾‹*/qradiobutton: !hover &#123;  color: red;&#125;\n\nå­æ§ä»¶é€‰æ‹©å™¨QRadioButton::indicator::unchecked:disabled &#123;  image: url(:/qss/radiobutton_unchecked_disable.png);&#125;\n\né€‰æ‹©å™¨ä¼˜å…ˆçº§ä¸€å¥è¯å½’çº³ä¸ºï¼šä¼˜å…ˆä½¿ç”¨æ›´å…·ä½“çš„é€‰æ‹©å™¨ã€‚\nå…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š\n/*QPushButton#okButtoné€‰æ‹©å™¨æ¯”QPushButtonæ›´å…·ä½“ï¼Œæ‰€ä»¥é€‰æ‹©QPushButton#okButton*/QPushButton#okButton &#123;  color: gray;&#125;QPushButton &#123;  color: red;&#125;\n\n/*å¦‚ä¸‹2ä¸ªè§„åˆ™åº”ç”¨äºQPushButtonå®ä¾‹æ—¶ï¼šå› ä¸ºQPushButtonç»§æ‰¿QAbstractButtonï¼Œæ‰€ä»¥QPushButtonæ¯”QAbstractButtonæ›´å…·ä½“ï¼Œé€‰æ‹©QPushButton*/QPushButton &#123;  color: red;&#125;QAbstractButton &#123;  color: gray;&#125;\n\n/*æŒ‡å®šä¼ªçŠ¶æ€æ¯”ä¸æŒ‡å®šä¼ªçŠ¶æ€çš„é€‰æ‹©å™¨æ›´å…·ä½“ï¼Œæ‰€ä»¥å½“é¼ æ ‡æ‚¬åœæ—¶é€‰æ‹©QPushButton:hoverï¼Œå¦åˆ™é€‰æ‹©QPushButton*/QPushButton:hover &#123;  color: white;&#125;QPushButton &#123;  color: red;&#125;\n\n/*å¦‚ä¸‹2ä¸ªè§„åˆ™åº”ç”¨äºå¤„äºEnabledçŠ¶æ€çš„QPushButtonå®ä¾‹æ—¶ï¼šé¼ æ ‡æ‚¬åœæ—¶ï¼ŒQPushButton:hoveræ›´èƒ½å…·ä½“æè¿°å½“å‰çŠ¶æ€ï¼Œæ‰€ä»¥é€‰æ‹©QPushButton:hoverå…¶ä»–æ—¶å€™é€‰æ‹©QPushButton:enabled*/QPushButton:enabled &#123;  color: red;&#125;QPushButton:hover &#123;  color: white;&#125;\n\n/*å¦‚ä¸‹2ä¸ªè§„åˆ™åº”ç”¨äºå¤„äºEnabledçŠ¶æ€çš„QPushButtonå®ä¾‹æ—¶ï¼šé¼ æ ‡æ‚¬åœæ—¶ï¼ŒQPushButton:enabled:hoveræ›´èƒ½å…·ä½“æè¿°å½“å‰çŠ¶æ€ï¼Œæ‰€ä»¥é€‰æ‹©QPushButton:enabled:hoverå…¶ä»–æ—¶å€™é€‰æ‹©QPushButton:enabled*/QPushButton:enabled &#123;  color: red;&#125;QPushButton:hover &#123;  color: white;&#125;QPushButton:enabled:hover &#123;  color: white;&#125;\n\nç±»å‹ã€å±æ€§ã€ä¼ªçŠ¶æ€ã€å­æ§ä»¶å…³äº QSS æ”¯æŒå“ªäº›ç±»å‹ã€æ¯ç§ç±»å‹æ”¯æŒå“ªäº›å±æ€§ã€ä¼ªçŠ¶æ€å’Œå­æ§ä»¶ï¼Œåœ¨ Qt çš„å®˜æ–¹çš„è‹±æ–‡æ–‡æ¡£ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼šã€ŠQt Style Sheets Referenceã€‹\nä¹Ÿå¯ä»¥åœ¨ Qt Assistant ä¸­æœç´¢â€Qt Style Sheets Referenceâ€æ‰“å¼€å¸®åŠ©æ–‡æ¡£ã€‚\n3.1 ä¼ªçŠ¶æ€åˆ—è¡¨ä¸ºäº†æ–¹ä¾¿æŸ¥é˜…ï¼Œè¿™é‡Œåˆ—ä¸¾å‡º QSS ç›®å‰æ”¯æŒçš„æ‰€æœ‰ä¼ªçŠ¶æ€ã€‚\n\nä¼ªçŠ¶æ€éƒ½æ˜¯ä»¥ä¸€ä¸ªå†’å·:å¼€å¤´ï¼Œå¦‚:activeã€‚\n\n\n\n\nä¼ªçŠ¶æ€\næè¿°\n\n\n\n:active\næ­¤çŠ¶æ€åœ¨ Widget é©»ç•™åœ¨æ´»åŠ¨çª—å£æ—¶è®¾ç½®\n\n\n:adjoins-item\næ­¤çŠ¶æ€åœ¨ QTreeView çš„::branch ä¸ä¸€ä¸ª item ç›¸é‚»æ—¶è®¾ç½®\n\n\n:alternate\nå½“ QAbstractItemView::alternatingRowColors()è®¾ç½®ä¸ºçœŸæ—¶ï¼Œåœ¨ç»˜åˆ¶ QAbstractItemView çš„è¡Œæ—¶ï¼Œä¸ºæ¯ä¸ªäº¤æ›¿è¡Œè®¾ç½®æ­¤çŠ¶æ€\n\n\n:bottom\næ­¤ item ä½äºåº•éƒ¨æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTabBar æœ‰ä½äºåº•éƒ¨çš„é€‰é¡¹å¡\n\n\n:checked\næ­¤ item è¢«é€‰ä¸­æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQAbstractButton çš„ checked çŠ¶æ€\n\n\n:closable\næ­¤ item å¯ä»¥è¢«å…³é—­æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQDockWidget çš„ QDockWidget::DockWidgetClosable ç‰¹æ€§å¼€å¯æ—¶\n\n\n:closed\næ­¤ item å¤„äºå…³é—­çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTreeView ä¸­æœªå±•å¼€çš„ item\n\n\n:default\næ­¤ item çš„é»˜è®¤çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª default çš„ QPushButton æˆ– QMenu ä¸­çš„ä¸€ä¸ªé»˜è®¤åŠ¨ä½œ\n\n\n:disabled\næ­¤ item è¢«ç¦ç”¨æ—¶è®¾ç½®\n\n\n:editable\nå¦‚ QComboBox æ˜¯å¯ç¼–è¾‘æ—¶è®¾ç½®\n\n\n:edit-focus\næ­¤ item å…·æœ‰ç¼–è¾‘ç„¦ç‚¹(å‚è€ƒ QStyle::State_HasEditFocus)æ—¶è®¾ç½®ã€‚æ­¤çŠ¶æ€ä»…å¯¹ Qt æ‰©å±•åº”ç”¨ç¨‹åºå¯ç”¨\n\n\n:enabled\næ­¤ item å·²å¯ç”¨æ—¶è®¾ç½®\n\n\n:exclusive\næ­¤ item æ˜¯å±äºæŸä¸ªç‹¬å ç»„æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œç‹¬å  QActionGroup ä¸­çš„èœå•é¡¹\n\n\n:first\næ­¤ item æ˜¯åˆ—è¡¨ä¸­çš„ç¬¬ä¸€é¡¹æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTabBar ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹å¡\n\n\n:flat\næ­¤ item æ˜¯æ‰å¹³æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ‰å¹³çš„ QPushButton\n\n\n:floatable\næ­¤ item å¯ä»¥æµ®åŠ¨æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQDockWidget çš„ QDockWidget::DockWidgetFloatable çš„ç‰¹æ€§å¼€å¯æ—¶\n\n\n:focus\næ­¤ item å…·æœ‰è¾“å…¥ç„¦ç‚¹æ—¶è®¾ç½®\n\n\n:has-children\næ­¤ item å…·æœ‰å­å¯¹è±¡æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTreeView ä¸­å…·æœ‰å­é¡¹çš„é¡¹\n\n\n:has-sibling\næ­¤ item å…·æœ‰å…„å¼Ÿå¯¹è±¡æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTreeView ä¸­ä¸ä¹‹ç›¸é‚»çš„é¡¹\n\n\n:horizontal\næ­¤ item å¤„äºæ°´å¹³æ–¹å‘æ—¶è®¾ç½®\n\n\n:hover\né¼ æ ‡æ‚¬æµ®åœ¨æ­¤ item ä¸Šæ—¶è®¾ç½®\n\n\n:indeterminate\næ­¤ item å¤„äºä¸ç¡®å®šçŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQCheckBox æˆ– QRadioButton è¢«éƒ¨åˆ†é€‰ä¸­\n\n\n:last\næ­¤ item æ˜¯åˆ—è¡¨ä¸­çš„æœ€åä¸€é¡¹æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTabBar ä¸­çš„æœ€åä¸€ä¸ªé€‰é¡¹å¡\n\n\n:left\næ­¤ item ä½äºå·¦ä¾§æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTabBar æœ‰ä½äºå·¦ä¾§çš„é€‰é¡¹å¡\n\n\n:maximized\næ­¤ item å¤„äºæœ€å¤§åŒ–çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœ€å¤§åŒ–çš„ QMdiSubWindow\n\n\n:middle\næ­¤ item æ˜¯åˆ—è¡¨ä¸­çš„ä¸­é—´ä¸€é¡¹æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä¸åœ¨ QTabBar ä¸­çš„å¼€å¤´æˆ–ç»“å°¾çš„é€‰é¡¹å¡\n\n\n:minimized\næ­¤ item å¤„äºæœ€å°åŒ–çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœ€å°åŒ–çš„ QMdiSubWindow\n\n\n:movable\næ­¤ item å¯ä»¥è¢«ç§»åŠ¨æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œ QDockWidget çš„ QDockWidget::DockWidgetMovable ç‰¹æ€§å¼€å¯æ—¶\n\n\n:no-frame\næ­¤ item æ²¡æœ‰è¾¹æ¡†æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œæ²¡æœ‰è¾¹æ¡†çš„ QSpinBox æˆ– QLineEdit\n\n\n:non-exclusive\næ­¤ item æ˜¯å±äºéç‹¬å ç»„æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œéç‹¬å  QActionGroup ä¸­çš„èœå•é¡¹\n\n\n:off\nå¯¹å¯ä»¥åˆ‡æ¢çš„ itemsï¼Œè¿™é€‚ç”¨äºå¤„äº off çŠ¶æ€çš„ item\n\n\n:on\nå¯¹å¯ä»¥åˆ‡æ¢çš„ itemsï¼Œè¿™é€‚ç”¨äºå¤„äº on çŠ¶æ€çš„ widget\n\n\n:only-one\næ­¤ item æ˜¯åˆ—è¡¨ä¸­çš„å”¯ä¸€é¡¹æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåœ¨ QTabBar ä¸­å•ç‹¬çš„é€‰é¡¹å¡\n\n\n:open\næ­¤ item å¤„äºæ‰“å¼€çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTreeView ä¸­çš„å±•å¼€é¡¹ï¼Œæˆ–å¸¦æœ‰èœå•çš„ QComboBox æˆ– QPushButton\n\n\n:next-selected\næ­¤ item æ˜¯åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªè¢«é€‰ä¸­çš„é¡¹æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œåœ¨ QTabBar ä¸­å½“å‰é€‰é¡¹å¡çš„ä¸‹ä¸€ä¸ªè¦é€‰ä¸­çš„é€‰é¡¹å¡\n\n\n:pressed\né¼ æ ‡æ­£åœ¨æŒ‰å‹åœ¨æ­¤ item ä¸Šæ—¶è®¾ç½®\n\n\n:previous-selected\næ­¤ item æ˜¯åˆ—è¡¨ä¸­çš„ä¸Šä¸€ä¸ªè¢«é€‰ä¸­çš„é¡¹æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œåœ¨ QTabBar ä¸­å½“å‰é€‰é¡¹å¡çš„ä¸Šä¸€ä¸ªè¦é€‰ä¸­çš„é€‰é¡¹å¡\n\n\n:read-only\næ­¤ item å¤„äºåªè¯»æˆ–ä¸å¯ç¼–è¾‘çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåªè¯» QLineEdit æˆ–ä¸å¯ç¼–è¾‘çš„ QComboBox\n\n\n:right\næ­¤ item ä½äºå³ä¾§æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTabBar æœ‰ä½äºå³ä¾§çš„é€‰é¡¹å¡\n\n\n:selected\næ­¤ item å¤„äºé€‰ä¸­çŠ¶æ€æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåœ¨ QTabBar ä¸­è¢«é€‰ä¸­çš„é€‰é¡¹å¡æˆ–ä¸€ä¸ªåœ¨èœå•ä¸­è¢«é€‰ä¸­çš„èœå•é¡¹\n\n\n:top\næ­¤ item ä½äºé¡¶éƒ¨æ—¶è®¾ç½®ã€‚ä¾‹å¦‚ï¼ŒQTabBar æœ‰ä½äºé¡¶éƒ¨çš„é€‰é¡¹å¡\n\n\n:unchecked\næ­¤ item å¤„äºæœªè¢«é€‰ä¸­çŠ¶æ€æ—¶è®¾ç½®\n\n\n:vertical\næ­¤ item å¤„äºå‚ç›´æ–¹å‘æ—¶è®¾ç½®\n\n\n:window\nWidget æ˜¯ä¸€ä¸ªçª—å£(ä¾‹å¦‚ï¼Œä¸€ä¸ªé¡¶å±‚ Widget)æ—¶è®¾ç½®\n\n\n3.2 å­æ§ä»¶åˆ—è¡¨\nä¼ªçŠ¶æ€éƒ½æ˜¯ä»¥ä¸¤ä¸ªå†’å·::å¼€å¤´ï¼Œå¦‚::itemã€‚\n\n\n\n\nå­æ§ä»¶\næè¿°\n\n\n\n::add-line\nåœ¨ QScrollBar ä¸­è·³è½¬ä¸‹ä¸€è¡Œçš„æŒ‰é’®\n\n\n::add-page\nåœ¨ QScrollBar ä¸­æ»‘åŠ¨æ¡å’Œ add-line ä¹‹é—´çš„åŒºåŸŸ\n\n\n::branch\nåœ¨ QTreeView ä¸­çš„åˆ†æ”¯æŒ‡ç¤ºå™¨\n\n\n::chunk\nåœ¨ QProgressBar ä¸­çš„è¿›åº¦å—\n\n\n::close-button\nåœ¨ QDockWidget æˆ– QTabBar é€‰é¡¹å¡çš„å…³é—­æŒ‰é’®\n\n\n::corner\nåœ¨ QAbstractScrollArea ä¸­ä¸¤ä¸ªæ»šåŠ¨æ¡ä¹‹é—´çš„è§’è½\n\n\n::down-arrow\nåœ¨ QComboBoxã€QHeaderView(æ’åºæŒ‡ç¤ºå™¨)ã€QScrollBar æˆ– QSpinBox çš„å‘ä¸‹ç®­å¤´\n\n\n::down-button\nåœ¨ QScrollBar æˆ– QSpinBox ä¸­çš„å‘ä¸‹æŒ‰é’®\n\n\n::drop-down\nåœ¨ QComboBox ä¸­çš„ä¸‹æ‹‰æ¡†\n\n\n::float-button\nåœ¨ QDockWidget ä¸­çš„æµ®åŠ¨æŒ‰é’®\n\n\n::groove\nåœ¨ QSlider ä¸­çš„æ»‘åŠ¨æ§½\n\n\n::indicator\nåœ¨ QAbstractItemVIewã€QCheckBoxã€QRadioButtonã€å¯é€‰ä¸­çš„èœå•é¡¹æˆ–å¯é€‰ä¸­çš„ QGroupBox ä¸­çš„æŒ‡ç¤ºå™¨\n\n\n::handle\nåœ¨ QScrollBarã€QSplitter å’Œ QSlider ä¸­çš„æ“ä½œæ¡(æ»‘åŠ¨æ¡)\n\n\n::icon\nåœ¨ QAbstractItemVIew æˆ– QMenu ä¸­çš„å›¾æ ‡\n\n\n::item\nåœ¨ QAbstractItemVIewã€QMenuBarã€QMenu æˆ– QStatuBar ä¸­çš„ä¸€é¡¹\n\n\n::left-arrow\nåœ¨ QScrollBar ä¸­çš„å‘å·¦ç®­å¤´\n\n\n::left-corner\nåœ¨ QTabWidget ä¸­çš„å·¦ä¸Šè§’\n\n\n::menu-arrow\nå¸¦æœ‰èœå•çš„ QToolButton ä¸­çš„ç®­å¤´\n\n\n::menu-button\nåœ¨ QToolButton ä¸­çš„èœå•æŒ‰é’®\n\n\n::menu-indicator\nåœ¨ QPushButton ä¸­çš„èœå•æŒ‡ç¤ºå™¨\n\n\n::right-arrow\nåœ¨ QMenu æˆ– QScrollBar ä¸­çš„å‘å³ç®­å¤´\n\n\n::pane\nåœ¨ QTabWidget ä¸­çš„è¾¹æˆ–æ¡†\n\n\n::right-corner\nåœ¨ QTabWidget ä¸­çš„å³ä¸Šè§’\n\n\n::scroller\nåœ¨ QMenu æˆ– QTabBar ä¸­çš„æ»šåŠ¨æ¡\n\n\n::section\nåœ¨ QHeaderView ä¸­çš„åŒºå—\n\n\n::separator\nåœ¨ QMenu æˆ– QMainWIndow ä¸­åˆ†éš”æ¡\n\n\n::sub-line\nåœ¨ QScrollBar ä¸­è·³è½¬ä¸Šä¸€è¡Œçš„æŒ‰é’®\n\n\n::sub-page\nåœ¨ QScrollBar ä¸­æ»‘åŠ¨æ¡å’Œ sub-line ä¹‹é—´çš„åŒºåŸŸ\n\n\n::tab\nåœ¨ QTabBar æˆ– QToolBox ä¸­é€‰é¡¹å¡\n\n\n::tab-bar\nåœ¨ QTabWidget ä¸­çš„é€‰é¡¹å¡æ \n\n\n::tear\nåœ¨ QTabBar ä¸­çš„ tear æŒ‡ç¤ºå™¨\n\n\n::tearoff\nåœ¨ QMenu ä¸­çš„ tear-off æŒ‡ç¤ºå™¨\n\n\n::text\nåœ¨ QAbstractItemView ä¸­çš„æ–‡æœ¬\n\n\n::title\nåœ¨ QGroupBox æˆ– QDockWidget ä¸­çš„æ ‡é¢˜æ \n\n\n::up-arrow\nåœ¨ QComboBoxã€QHeaderView(æ’åºæŒ‡ç¤ºå™¨)ã€QScrollBar æˆ– QSpinBox çš„å‘ä¸Šç®­å¤´\n\n\n::up-button\nåœ¨ QScrollBar æˆ– QSpinBox ä¸­çš„å‘ä¸ŠæŒ‰é’®\n\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\nQPushButton#btnTest::menu-indicator &#123;  image: url(indicator.png);&#125;\n\nåŒæ—¶ä½¿ç”¨ä¼ªçŠ¶æ€å’Œå­æ§ä»¶æ—¶ï¼Œå…ˆæŒ‡å®šå­æ§ä»¶ï¼ŒåæŒ‡å®šä¼ªçŠ¶æ€ï¼š\nQComboBox::down-arrow:disabled &#123;  image: none;&#125;\n\nç›’å­æ¨¡å‹åœ¨ä½¿ç”¨ QSS è®¾ç½®æ ·å¼æ—¶ï¼Œæœ‰ä¸€ä¸ªå…³é”®çš„æ¦‚å¿µéœ€è¦çŸ¥æ™“ï¼Œé‚£å°±æ˜¯â€œç›’å­æ¨¡å‹â€ï¼ˆå³Box Modelï¼‰ã€‚\n\næ¯ä¸ª Widget éƒ½è¢«è§†ä¸ºå…·æœ‰ 4 ä¸ªåŒå¿ƒçŸ©å½¢çš„æ¡†ï¼š\nMARGIN çŸ©å½¢ã€BORDER çŸ©å½¢ã€PADDING çŸ©å½¢å’Œ CONTENT çŸ©å½¢ï¼Œä¸Šå›¾æ ‡æ³¨äº†æ¯ä¸ªçŸ©å½¢çš„åŒºåŸŸã€‚\né»˜è®¤æƒ…å†µä¸‹ MARGIN çŸ©å½¢ã€BORDER çŸ©å½¢ã€PADDING çŸ©å½¢çš„å®½åº¦éƒ½ä¸º 0ï¼Œè¿™æ ·åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ4 ä¸ªçŸ©å½¢å°±é‡åˆä¸º 1 ä¸ª CONTENT çŸ©å½¢äº†ã€‚\nåŒæ ·ï¼Œé»˜è®¤æƒ…å†µä¸‹ background-image æŒ‡å®šçš„èƒŒæ™¯ï¼Œåªåœ¨ border å†…çš„åŒºåŸŸç»˜åˆ¶ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ background-clip æˆ– background-origin å±æ€§æ¥æ›´æ”¹è¿™ç§é»˜è®¤è¡Œä¸ºã€‚\nå¦‚ä½•å®ç°èƒŒæ™¯å›¾åƒéš Widget å¤§å°è‡ªåŠ¨ç¼©æ”¾ï¼Ÿ\nbackground-image æŒ‡å®šçš„èƒŒæ™¯å›¾åƒæ— æ³•éš Widget å¤§å°è‡ªåŠ¨ç¼©æ”¾ï¼Œè¦æä¾›å¯ä»¥éš Widget å¤§å°ç¼©æ”¾çš„èƒŒæ™¯å›¾åƒå¯ä»¥ä½¿ç”¨border-imageå’Œimageå±æ€§ï¼ŒäºŒè€…åŒºåˆ«å¦‚ä¸‹ï¼š\n\nborder-image å±æ€§æŒ‡å®šçš„å›¾åƒä» border åŠå…¶å†…çš„åŒºåŸŸå¼€å§‹ç»˜åˆ¶ï¼Œä¼šå¯¼è‡´ border å±æ€§è¢«è¦†ç›–ã€‚\nimage å±æ€§æŒ‡å®šçš„å›¾åƒä»ç»˜åˆ¶åˆ° content åŒºåŸŸå†…ï¼Œimage æŒ‡å®šçš„ url ä¸º SVG å›¾åƒï¼Œåˆ™æ”¯æŒè‡ªåŠ¨ç¼©æ”¾ï¼Œé SVG å›¾åƒä»…æ”¯æŒè‡ªåŠ¨ç¼©å°ã€‚\n\nåŠ¨æ€å±æ€§é€šè¿‡ setProperty æ–¹æ³•è®¾ç½® QWidget å¯¹è±¡å±æ€§ï¼Œåœ¨ QSS ä¸­å¯ä»¥æ ¹æ®ä¸åŒçš„å±æ€§å€¼åº”ç”¨ä¸åŒçš„æ ·å¼ã€‚\nä¾‹å¦‚ï¼Œè®¾ç½® pushButtonMax æŒ‰é’®çš„ isMax å±æ€§ï¼Œè¡¨ç¤ºå½“å‰çª—å£æ˜¯å¦æœ€å¤§åŒ–ï¼š\npushButtonMax-&gt;setProperty(&quot;isMax&quot;, this-&gt;isMaximized() ? true : false);\n\nåœ¨ QSS ä¸­æ ¹æ®ä¸åŒçš„å±æ€§å€¼åº”ç”¨ä¸åŒçš„æ ·å¼ï¼š\n#pushButtonMax[isMax=&quot;false&quot;] &#123;  width: 40px;  height: 40px;  background: gray;&#125;#pushButtonMax[isMax=&quot;false&quot;]:hover &#123;  background: blue;&#125;#pushButtonMax[isMax=&quot;true&quot;] &#123;  width: 40px;  height: 40px;  background: transparent;&#125;#pushButtonMax[isMax=&quot;true&quot;]:hover &#123;  background: red;&#125;\n\nQ_PROPERTYåœ¨ Qt ä¸­å¯ä»¥ä½¿ç”¨Q_PROPERTYå®ä¸º QObject å¯¹è±¡ï¼ˆå«å­å¯¹è±¡ï¼‰å£°æ˜å±æ€§ï¼Œä»»ä½•è¢«Q_PROPERTYå£°æ˜çš„å±æ€§éƒ½èƒ½åœ¨ QSS ä¸­ä½¿ç”¨qproperty-&lt;property name&gt;è¯­æ³•è¿›è¡Œè®¾ç½®ã€‚\nä»¥ QToolButton ä¸ºä¾‹ï¼ŒQToolButton ç»§æ‰¿è‡³ QAbstractButtonï¼ŒQAbstractButton æ‹¥æœ‰ä»¥ä¸‹è¢« Q_PROPERTY å£°æ˜çš„å±æ€§ï¼š\nclass Q_WIDGETS_EXPORT QAbstractButton : public QWidget&#123;    Q_OBJECT    Q_PROPERTY(QString text READ text WRITE setText)    Q_PROPERTY(QIcon icon READ icon WRITE setIcon)    Q_PROPERTY(QSize iconSize READ iconSize WRITE setIconSize)#ifndef QT_NO_SHORTCUT    Q_PROPERTY(QKeySequence shortcut READ shortcut WRITE setShortcut)#endif    Q_PROPERTY(bool checkable READ isCheckable WRITE setCheckable)    Q_PROPERTY(bool checked READ isChecked WRITE setChecked DESIGNABLE isCheckable NOTIFY toggled USER true)    Q_PROPERTY(bool autoRepeat READ autoRepeat WRITE setAutoRepeat)    Q_PROPERTY(bool autoExclusive READ autoExclusive WRITE setAutoExclusive)    Q_PROPERTY(int autoRepeatDelay READ autoRepeatDelay WRITE setAutoRepeatDelay)    Q_PROPERTY(int autoRepeatInterval READ autoRepeatInterval WRITE setAutoRepeatInterval)    Q_PROPERTY(bool down READ isDown WRITE setDown DESIGNABLE false)    ....&#125;\n\nåœ¨ QSS ä¸­å¯ä»¥ç›´æ¥å¯¹å±æ€§èµ‹å€¼ï¼Œå¦‚ï¼š\nQToolButton &#123;  qproperty-text: &quot;æ–‡æœ¬&quot;;  qproperty-icon: url(://img/icon.png);  qproperty-iconsize: 100px 100px;&#125;\n\nPadding å’Œ Margin çš„ä½¿ç”¨Margin æŒ‡æ§ä»¶å’Œå…¶ä»–æ§ä»¶çš„é—´è·ï¼Œè€Œ Padding æŒ‡æ§ä»¶å†…çš„å†…å®¹ä¸è¾¹æ¡†çš„é—´è·ã€‚\näºŒè€…çš„è¯­æ³•ä¸ CSS ä¸­çš„ä¸€æ ·ï¼š\nmargin: 25px 50px 75px 100px;padding: 25px 50px 75px 100px;\n\nä»å·¦åˆ°å³ä¾æ¬¡ä¸ºï¼šä¸Šã€å³ã€ä¸‹ã€å·¦ã€‚\næ”¯æŒç®€å†™å½¢å¼ï¼š\nmargin: 25px 50px;padding: 25px 50px;\n\nè¡¨ç¤ºï¼šä¸Šä¸‹é—´è·ä¸º 25pxï¼Œå·¦å³é—´è·ä¸º 50pxã€‚\nå‡ ç§å›¾ç‰‡è®¾ç½®æ–¹æ³•å¤§å®¶åœ¨ä½¿ç”¨ QSS è¿›è¡Œå›¾ç‰‡è®¾ç½®æ—¶ï¼Œä¹Ÿè®¸è¢« image, border-image, background-image è¿™å‡ ä¸ªå±æ€§çš„å·®å¼‚å›°æ‰°è¿‡ï¼Œä¸‹é¢å°±æ¥è®²è§£ä¸€ä¸‹è¿™ä¸ªå‡ ä¸ªå±æ€§çš„å¼‚åŒç‚¹ã€‚\nbackground-imagebackground-image æŒ‰å›¾ç‰‡å®é™…å°ºå¯¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œè¶…è¿‡æ§ä»¶æ˜¾ç¤ºåŒºåŸŸçš„éƒ¨åˆ†ä¼šè¢«è£å‰ªæ‰ã€‚\nè™½èƒ½æ˜¾ç¤º SVGï¼Œä½†æ— æ³•å¯¹ SVG è¿›è¡Œæ— æŸç¼©æ”¾ï¼›\nå…³äº background-image çš„å‡ ä¸ªé™„å±å±æ€§çš„ä½œç”¨ï¼Œå¯ä»¥ä¸€å¥è¯æ¦‚æ‹¬ä¸ºï¼š\nä» background-origin åŒºåŸŸçš„ background-position ä½ç½®å¼€å§‹ç»˜åˆ¶å›¾åƒï¼Œå¹¶ä»¥ background-repeat æ–¹å¼è¿›è¡Œé‡å¤ï¼›æœ€åå°†å›¾åƒ background-clip åŒºåŸŸä»¥å¤–çš„èŒƒå›´è£å‰ªæ‰ï¼ˆå³ä¸æ˜¾ç¤ºï¼‰ã€‚\nimageimage ä¼šå°†å›¾ç‰‡æŒ‰å›¾ç‰‡åŸé•¿å®½æ¯”è¿›è¡Œç¼©æ”¾ï¼Œå¹¶ä¿è¯å¡«å……æ»¡æ§ä»¶ content åŒºåŸŸã€‚\nimage æ”¯æŒ SVG çŸ¢é‡å›¾æ˜¾ç¤ºå’Œæ— æŸç¼©æ”¾ã€‚\nimage å¯ä»¥ä½¿ç”¨ image-position æ¥æŒ‡å®šå›¾ç‰‡å¼€å§‹æ˜¾ç¤ºçš„ä½ç½®ï¼ˆå‚è€ƒä¸Šé¢background-positionï¼‰ã€‚\nborder-imageæŒ‰æ§ä»¶ border åŒºåŸŸçš„é•¿å®½æ¯”æ¥ç¼©æ”¾å›¾ç‰‡ï¼Œä¿è¯å¡«å……æ»¡æ§ä»¶ border åŒºåŸŸï¼Œæ”¯æŒ SVG çŸ¢é‡å›¾æ˜¾ç¤ºå’Œæ— æŸç¼©æ”¾;\nç»˜åˆ¶é¡ºåºå¦‚æœåœ¨ä¸€ä¸ªæ§ä»¶ä¸­åŒæ—¶æŒ‡å®š background-imageï¼Œborder-imageï¼Œimage è¿™ä¸‰ä¸ªå±æ€§ï¼Œä¼šæŒ‰ç…§å¦‚ä¸‹çš„é¡ºåºè¿›è¡Œç»˜åˆ¶ï¼š\nå…ˆç»˜åˆ¶ background-imageç„¶å border-imageæœ€å image\n\nç¤ºä¾‹QPushButton#pushButton4 &#123;  border: 20px solid rgba(0,0,255,0.5);  padding: 20px;  margin: 20px;  background-image: url(:/QssUsage/Image/å¤´åƒ.png); /*ä¸‹å›¾ä¸­çš„åœ†å½¢å¤´åƒ*/  background-origin: margin;  background-position:top left;  background-repeat:repeat-x;  background-clip: margin;&#125;\n\n\nQSS ç¼–è¾‘å™¨QSS æ ·å¼çš„ç¼–å†™æ˜¯ä¸€ä¸ªç†Ÿèƒ½ç”Ÿå·§çš„è¿‡ç¨‹ï¼Œä¸ä»…ä¸éœ€è¦ç†Ÿè®°å¸¸ç”¨çš„æ ·å¼å±æ€§ï¼Œè¿˜éœ€è¦å‹¤åŠ ç»ƒä¹ ï¼Œå¤šå¤šéªŒè¯ï¼Œçµæ´»è¿ç”¨ã€‚\nä¸ºäº†æ–¹ä¾¿å­¦ä¹ å’ŒéªŒè¯ QSS æ ·å¼ï¼Œæˆ‘å¼€å‘äº†ä¸€ä¸ª QSS ç¼–è¾‘å™¨ï¼Œé€šè¿‡è¯¥ç¼–è¾‘å™¨å¯ä»¥å®æ—¶é¢„è§ˆ QSS çš„ç”Ÿæ•ˆæ ·å¼ï¼Œè€Œä¸”ç¼–è¾‘å™¨è¿˜å†…ç½®äº†ä¸¤å¥—å®Œæ•´çš„ QSS ä¸»é¢˜ï¼Œæ–¹ä¾¿åˆå­¦è€…å­¦ä¹  QSS å±æ€§ã€‚\né¡¹ç›®åœ°å€ï¼š\nhttps://github.com/winsoft666/qss-editor\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"ç©è½¬Qt 2Dç»˜å›¾ä¹‹ä»ªè¡¨ç›˜å®ä¾‹","url":"/post/29874871.html","content":"åœ¨å‰é¢çš„ã€Šç©è½¬ Qt 2D ç»˜å›¾ã€‹ç³»åˆ—æ–‡ç« ä¸­ï¼Œå·²ç»ä»‹ç»äº† 2D ç»˜å›¾ä¸­å¸¸ç”¨çš„çŸ¥è¯†ï¼Œæœ¬æ–‡ä¸»è¦é€šè¿‡ä¸€ä¸ªæ±½è½¦ä»ªè¡¨ç›˜çš„å®ä¾‹æ¥ç»¼åˆåº”ç”¨å‰é¢æ‰€ä»‹ç»çŸ¥è¯†ç‚¹ï¼Œå¹¶ä¸”è¿˜ä»‹ç»äº†ä¸€äº› Qt ç»˜å›¾çš„å¸¸ç”¨æŠ€å·§ã€‚\nç›¸å…³æ–‡ç« ï¼š\n\nç©è½¬Qt 2Dç»˜å›¾ä¹‹åæ ‡ç³»\nç©è½¬Qt 2Dç»˜å›¾ä¹‹ç”»å®¶çš„å·¥å…·\nç©è½¬Qt 2Dç»˜å›¾ä¹‹ç”»å®¶\n\n\n\nå®ä¾‹æ•ˆæœå›¾å¦‚ä¸‹ï¼š\n\n\næœ¬å®ä¾‹ä¸»è¦æ¶‰åŠå¦‚ä¸‹çŸ¥è¯†ç‚¹ï¼š\n\nåæ ‡ç³»çš„ç¼©å°ã€æ—‹è½¬ã€ä½ç§»\nç»˜åˆ¶çº¿æ¡ã€åœ†ã€é¥¼çŠ¶å›¾ã€å¤šè¾¹å½¢ã€æ–‡æœ¬\nç”»ç¬”ã€ç”»åˆ·çš„åº”ç”¨\nä¸‰è§’å‡½æ•°çš„åº”ç”¨\n\nåºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å¼€å§‹åˆ†å¸ƒè®²è§£ä»ªè¡¨ç›˜çš„ç»˜åˆ¶æ­¥éª¤ã€‚ä¸ºäº†ä¾¿äºåé¢çš„æè¿°ï¼Œæˆ‘ä»¬å…ˆå°†æ§ä»¶ä¸Šçš„å„ä¸ªå…ƒç´ è¿›è¡Œæ ‡æ³¨ï¼š\n\n\nåæ ‡ç³»è®¾ç½®åœ†çš„åŠå¾„ä»ªè¡¨ç›˜æ˜¯ä¸€ä¸ªåœ†ï¼Œå› æ­¤éœ€è¦å…ˆç¡®å®šåœ†çš„ä¸­å¿ƒç‚¹å’ŒåŠå¾„ï¼Œä¸­å¿ƒç‚¹ä½äº QWidget çš„ä¸­å¿ƒï¼Œè€Œ QWidget å¯èƒ½å¹¶ä¸æ˜¯æ­£æ–¹å½¢ï¼Œå› æ­¤åªèƒ½ä»¥æœ€çŸ­è¾¹æ¥ç¡®å®šåœ†çš„åŠå¾„ã€‚\nconst qreal width = this-&gt;width();const qreal height = this-&gt;height();const qreal side = qMin(width, height); // æœ€çŸ­è¾¹const qreal radius = side / 2.0; // åŠå¾„\n\nåæ ‡ç³»ç¼©æ”¾å‡è®¾å½“å¤–åœ†çš„åŠå¾„ä¸º 100 æ—¶ï¼Œæˆ‘ä»¬å°†å†…åœ†çš„åŠå¾„è®¾è®¡ä¸º 85ï¼Œä¸­å¿ƒåœ†çš„åŠå¾„è®¾è®¡ä¸º 45ï¼Œåˆ»åº¦æ•°å­—å­—ä½“è®¾è®¡ä¸º 10pxï¼Œç­‰ç­‰ã€‚ \nç”±äºä»ªè¡¨æ¿æ§ä»¶æ˜¯ä¸€ä¸ªé€šç”¨å‹çš„æ§ä»¶ï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå…¶é•¿å®½å¹¶ä¸å›ºå®šä¸º100pxï¼Œå…¶å¯ä»¥ä¸ºä»»æ„å€¼ï¼Œä¸ºäº†ä¿æŒç¾è§‚å’Œåè°ƒæ€§ï¼Œå¤–åœ†ã€å†…åœ†ã€ä¸­å¿ƒåœ†ã€æ•°å­—å­—ä½“ç­‰å…ƒç´ çš„å¤§å°éƒ½éœ€è¦æ ¹æ®æ§ä»¶çš„å¤§å°è€ŒåŠ¨æ€çš„æ”¹å˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç™¾åˆ†æ¯”çš„æ–¹å¼æ¥è®¾ç½®å„ä¸ªå…ƒç´ çš„å¤§å°ï¼Œå¦‚ï¼š\nqreal r1 = side / 2.0; // å¤–åœ†åŠå¾„qreal r2 = r1 * 0.85; // å†…åœ†åŠå¾„ä¸ºå¤–åœ†çš„85%qreal r3 = r1 * 0.45; // ä¸­å¿ƒåœ†çš„åŠå¾„// å­—ä½“å¤§å°åˆ™æ ¹æ® åŠå¾„100 -&gt; 10px è¿™ä¸ªåŸºç¡€æ¥ç¼©å°å’Œæ”¾å¤§qreal fz = 10 * (r1 / 100.0);\n\nçœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»æœ‰äº†æ˜æ˜¾çš„æ„Ÿå—ï¼šéœ€è¦æ‰‹åŠ¨è®¡ç®—ç™¾åˆ†æ¯”ï¼Œå¤ªç¹çäº†ï¼Œè€Œä¸”å­—ä½“å¤§å°çš„ç¼©æ”¾ä¹Ÿä¸å¤Ÿçº¿æ€§ã€‚\nçš„ç¡®å¦‚æ­¤ï¼Œé’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ¡ˆæ¥è§£å†³ã€‚\nåœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œæ§ä»¶çš„æ ·å¼é€šå¸¸ä¸æ˜¯ç¨‹åºå‘˜è‡ªå·±å‡­ç©ºæƒ³è±¡çš„ï¼Œè€Œæ˜¯ç»è¿‡è®¾è®¡å¸ˆæˆ–ç¾å·¥è®¾è®¡å‡ºæ¥çš„ï¼Œè®¾è®¡å¸ˆé€šè¿‡è“æ¹–ã€figma ç­‰å·¥å…·å°†æ•ˆæœå›¾äº¤ä»˜ç»™å¼€å‘äººå‘˜ï¼Œè¿™äº›å·¥å…·éƒ½å¸¦æœ‰å°ºå¯¸æ ‡æ³¨åŠŸèƒ½ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ–¹ä¾¿çš„è·å–è®¾è®¡å°ºå¯¸ã€‚æˆ‘ä»¬åœ¨å¼€å‘æ—¶å¯ä»¥ç›´æ¥ä»¥è®¾è®¡å°ºå¯¸æ¥è¿›è¡Œå¼€å‘ï¼Œä¸å†è®¡ç®—ç™¾åˆ†æ¯”ï¼Œæ”¹ä¸ºåŠ¨æ€çš„å¯¹åæ ‡ç³»è¿›è¡Œç¼©æ”¾æ¥é€‚åº”å®é™…å°ºå¯¸ã€‚\nconst qreal width = this-&gt;width();const qreal height = this-&gt;height();const qreal side = qMin(width, height);painter.scale(side / 200.0, side / 200.0);  // è®¾è®¡å¸ˆæ‰€è®¾è®¡çš„çš„é•¿å®½ä¸º200*200\n\nåæ ‡ç³»åŸç‚¹ä¸ºäº†æ–¹ä¾¿ç»˜åˆ¶ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜å°†åæ ‡ç³»çš„åŸç‚¹ç§»åŠ¨åˆ°åœ†çš„ä¸­å¿ƒç‚¹ä½ç½®ï¼Œå½“ç„¶è¿™ä¸æ˜¯å¿…é¡»çš„ã€‚\npainter.translate(width / 2, height / 2);\n\nç»˜åˆ¶å¤–åœ†æ§ä»¶æ˜¯åŒ…å«å„ç§ä¸åŒçš„å…ƒç´ ï¼Œå¦‚å¤–åœ†ã€å†…åœ†ã€åˆ»åº¦ã€æŒ‡é’ˆç­‰ï¼Œä¸€å±‚ä¸€å±‚çš„å åŠ åœ¨ QWidget ä¸Šé¢ï¼Œä»è€Œç»„æˆäº†ä¸€ä¸ªå®Œæ•´çš„æ§ä»¶ã€‚åœ¨ç»˜åˆ¶æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä»æœ€åº•å±‚å…ƒç´ å¼€å§‹ç»˜åˆ¶ï¼Œç„¶åå†ä¸€å±‚ä¸€å±‚åœ°ç»˜åˆ¶ä¸Šå±‚å…ƒç´ ã€‚\næœ¬å®ä¾‹ä¸­ï¼Œæˆ‘ä»¬å…ˆç»˜åˆ¶å¤–åœ†ï¼Œç„¶åç»˜åˆ¶å†…åœ†ï¼Œä¸€å±‚ä¸€å±‚çš„å åŠ ï¼ˆæœ¬æ–‡çš„ç« èŠ‚é¡ºåºå³ä¸ºå…ƒç´ çš„ç»˜åˆ¶é¡ºåºï¼‰ã€‚\n// ç»˜åˆ¶å¤–åœ†painter.save();&#123;    painter.setPen(Qt::NoPen);    painter.setBrush(QColor(80, 80, 80));    painter.drawEllipse(QPointF(0, 0), 100.0, 100.0);&#125;painter.restore();\n\n\n\nç»˜åˆ¶å†…åœ†painter.save();&#123;    painter.setPen(Qt::NoPen);    painter.setBrush(QColor(60, 60, 60));    painter.drawEllipse(QPointF(0, 0), 85.0, 85.0);&#125;painter.restore();\n\n\n\nç»˜åˆ¶ä¸‰è‰²é¥¼çŠ¶å›¾// startAngle_ å’Œ endAngle_ èµ·å§‹å’Œç»“æŸè§’åº¦// qreal startAngle_ = -30;// qreal endAngle_ = 210;painter.save();&#123;    qreal end = endAngle_;    qreal spanAngles = (endAngle_ - startAngle_) * 0.7;  // 0 ~ 70%    painter.setPen(Qt::NoPen);    painter.setBrush(QColor(24, 189, 155));    painter.drawPie(-55, -55, 110, 110, (end - spanAngles) * 16, spanAngles * 16);    end -= spanAngles;    spanAngles = (endAngle_ - startAngle_) * 0.15;  // 70% ~ 85%    painter.setBrush(QColor(218, 218, 0));    painter.drawPie(-55, -55, 110, 110, (end - spanAngles) * 16, spanAngles * 16);    end -= spanAngles;    spanAngles = (endAngle_ - startAngle_) * 0.15;  // 85% ~ 100%    painter.setBrush(QColor(255, 107, 107));    painter.drawPie(-55, -55, 110, 110, (end - spanAngles) * 16, spanAngles * 16);&#125;painter.restore();\n\n\n\nç»˜åˆ¶ä¸­å¿ƒåœ†ç»˜åˆ¶ä¸­å¿ƒåœ†ï¼Œç”¨äºè¦†ç›–é¥¼åœ†çš„ä¸­å¿ƒã€‚\npainter.save();&#123;    painter.setPen(Qt::NoPen);    painter.setBrush(QColor(100, 100, 100));    painter.drawEllipse(QPointF(0, 0), 45, 45);&#125;painter.restore();\n\n\n\nç»˜åˆ¶åˆ»åº¦çº¿// majorScaleNum_ æŒ‡å®šæœ‰å¤šå°‘ä¸ªå¤§åˆ»åº¦çº¿// scaleNumPerMajor_ æŒ‡å®šæ¯2ä¸ªå¤§åˆ»åº¦çº¿é—´éš”å†…æœ‰å¤šå°‘ä¸ªå°åˆ»åº¦çº¿// int majorScaleNum_ = 10;// int scaleNumPerMajor_ = 10;painter.save();&#123;    QPen pen;    pen.setColor(QColor(255, 255, 255));    pen.setCapStyle(Qt::RoundCap);    pen.setWidthF(1.0);    painter.setPen(pen);    int totalScaleNum = majorScaleNum_ * scaleNumPerMajor_;    qreal angleStep = (endAngle_ - startAngle_) / (qreal)totalScaleNum;    painter.rotate(360 - endAngle_);  // rotate æŒ‰é¡ºæ—¶é’ˆæ–¹å‘æ—‹è½¬    for (int i = 0; i &lt;= totalScaleNum; i++) &#123;        if (i % scaleNumPerMajor_ == 0) &#123;            // ç»˜åˆ¶å¤§åˆ»åº¦            painter.drawLine(QPointF(57.0, 0.0), QPointF(72.0, 0.0));        &#125;        else &#123;            // ç»˜åˆ¶å°åˆ»åº¦            painter.drawLine(QPointF(57.0, 0.0), QPointF(64.0, 0.0));        &#125;        painter.rotate(angleStep);    &#125;&#125;painter.restore();\n\n\n\nç»˜åˆ¶åˆ»åº¦æ•°å­—å› ä¸ºæ•°å­—å§‹ç»ˆæ˜¯ä»å·¦åˆ°å³çš„æ–¹å‘ç»˜åˆ¶çš„ï¼Œè€Œç»˜åˆ¶åˆ»åº¦æ—¶ä¼šæ”¹å˜åæ ‡è½´çš„æ–¹å‘ï¼Œå› æ­¤æ•°å­—ä¸èƒ½ä¸åˆ»åº¦ä¸€èµ·ç»˜åˆ¶ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä½¿ç”¨ä¸‰è§’å‡½æ•°è®¡ç®—æ–‡å­—çŸ©å½¢åŒºåŸŸä¸‹æ¨ªçº¿ä¸­é—´ç‚¹ä½ç½®ã€‚\npainter.save();&#123;    QPen pen;    pen.setColor(QColor(255, 255, 255));    painter.setPen(pen);    QFont font;    font.setPixelSize(10);    painter.setFont(font);    QFontMetrics fm(font);    int txtHeight = fm.height();    qreal angleStep = (endAngle_ - startAngle_) / majorScaleNum_;    qreal stepNum = (maxValue_ - minValue_) / majorScaleNum_;    for (int i = 0; i &lt;= majorScaleNum_; i++) &#123;        qreal angle = startAngle_ + i * angleStep;        qreal x = qCos(qDegreesToRadians(angle)) * 74.0;        qreal y = -qSin(qDegreesToRadians(angle)) * 74.0;  // çºµåæ ‡ä¸æ•°å­¦åæ ‡ç³»ç›¸å        QString txt = QString::number((int)((majorScaleNum_ - i) * stepNum));  // å¤§æ•°åœ¨å³è¾¹ï¼Œå°æ•°åœ¨å·¦è¾¹ï¼Œå…ˆç»˜åˆ¶å¤§æ•°        int txtWidth = fm.horizontalAdvance(txt);        if (IS_NEARLY_EQUAL(x, 0.0)) &#123;            painter.drawText(QRectF(x - txtWidth / 2, y - txtHeight, txtWidth, txtHeight), Qt::AlignCenter, txt);        &#125;        else if (IS_NEARLY_EQUAL(y, 0.0)) &#123;            painter.drawText(QRectF(x, y - txtHeight / 2, txtWidth, txtHeight), Qt::AlignVCenter | Qt::AlignLeft, txt);        &#125;        else &#123;            if (x &gt; 0.0)                painter.drawText(QRectF(x, y - txtHeight / 2, txtWidth, txtHeight), Qt::AlignVCenter | Qt::AlignLeft, txt);            else                painter.drawText(QRectF(x - txtWidth, y - txtHeight / 2, txtWidth, txtHeight), Qt::AlignVCenter | Qt::AlignRight, txt);        &#125;    &#125;&#125;painter.restore();\n\n\n\nç»˜åˆ¶å½“å‰æŒ‡é’ˆæŒ‡é’ˆæ ·å¼å®é™…ä¸ºä¸‰ä¸ªç‚¹ç»„æˆçš„ä¸‰è§’å½¢ã€‚\n// maxValue_ å’Œ minValue_ ä¸ºè®¾ç½®çš„åˆ»åº¦æœ€å¤§å€¼å’Œæœ€å°å€¼// qreal minValue_ = 0.0;// qreal maxValue_ = 100.0;const qreal anglePerValue = (endAngle_ - startAngle_) / (maxValue_ - minValue_);painter.save();&#123;    painter.setPen(Qt::NoPen);    painter.setBrush(QColor(255, 107, 107, 204));    QPolygon pts;    pts.setPoints(3, 0, 5, 0, -5, 64, 0);    qreal rotateAngle = 360.0 - endAngle_;    rotateAngle += anglePerValue * (curValue_ - minValue_);    painter.rotate(rotateAngle);    painter.drawPolygon(pts);&#125;painter.restore();\n\n\n\nç»˜åˆ¶ä¸­å¿ƒå°åœ†painter.save();&#123;    painter.setPen(Qt::NoPen);    // çº¢è‰²åœ†    painter.setBrush(QColor(255, 107, 107));    painter.drawEllipse(QPointF(0.0, 0.0), 20.0, 20.0);    // ç™½è‰²åœ†    painter.setBrush(QColor(255, 255, 255));    painter.drawEllipse(QPointF(0.0, 0.0), 16.0, 16.0);&#125;painter.restore();\n\n\n\nç»˜åˆ¶å½“å‰å€¼painter.save();&#123;    QFont font = painter.font();    font.setPixelSize(14);    font.setBold(true);    painter.setFont(font);    painter.setPen(QColor(0, 0, 0));    painter.drawText(-16, -16, 32, 32, Qt::AlignCenter, QString::number(curValue_));&#125;painter.restore();\n\n\n\nè‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼Œé½æ´»ï¼\n\nğŸ“Œé™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"ç©è½¬Qt 2Dç»˜å›¾ä¹‹åæ ‡ç³»","url":"/post/847642761.html","content":"Qt ä¸­æä¾›äº†å¼ºå¤§çš„ 2D ç»˜å›¾ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ API åœ¨å±å¹•å’Œç»˜å›¾è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶ï¼Œä¸»è¦åŸºäº QPainterã€QPaintDevice å’Œ QPaintEngine è¿™ä¸‰ä¸ªç±»å®ç°ï¼Œå…¶ä¸­ï¼š\n\nQPainter æ‰§è¡Œå…·ä½“çš„ç»˜å›¾æ“ä½œï¼ŒQPainter ç±»æä¾›äº†å¤§é‡çš„ GUI ç¼–ç¨‹æ‰€éœ€çš„å‡½æ•°ï¼Œå¦‚ drawLineã€drawImage ç­‰ã€‚\nQPaintDevice æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œæä¾›ç»˜å›¾è®¾å¤‡çš„æŠ½è±¡æ¥å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒç»´ç©ºé—´çš„æŠ½è±¡ï¼Œå¯ä»¥ä½¿ç”¨ QPainter åœ¨å…¶ä¸Šè¿›è¡Œç»˜åˆ¶ï¼Œå¸¸è§çš„ç»§æ‰¿è¯¥ç±»çš„ç»˜å›¾è®¾å¤‡æœ‰ QImageã€QPixmapã€QWidgetã€QOpenGLPaintDevice ç­‰ã€‚\nQPaintEngine æä¾›äº†ä¸€äº›æŠ½è±¡æ¥å£ï¼Œç”¨äºå®ç° QPainter åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šè¿›è¡Œç»˜åˆ¶ã€‚QPaintEngine ç”± QPaintDevice åˆ›å»ºå¹¶ç®¡ç†ã€‚\n\n\n\nåœ¨ Qt å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ä¸€å¼ å›¾å¯ä»¥å¾ˆå¥½è¯´æ˜ Qt å„ä¸ªåæ ‡ç³»å˜æ¢æ–¹å¼ï¼ˆæš‚ä¸ç”¨å…³æ³¨å›¾ä¸Šçš„åæ ‡å€¼ï¼‰ï¼š\n\næˆ‘ä»¬åœ¨ä½¿ç”¨ QPainter ç»˜å›¾æ—¶éœ€è¦ä¼ å…¥å…ƒç´ åæ ‡ï¼Œä¼ å…¥çš„åæ ‡å°±æ˜¯å›¾ä¸Šçš„ä¸–ç•Œåæ ‡ç³»ï¼ˆWorld Coordinatesï¼‰ï¼Œä¸–ç•Œåæ ‡ç»è¿‡çŸ©é˜µå˜æ¢ï¼ˆè¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼‰åå†ä¼ é€’ç»™çª—å£åæ ‡ç³»ï¼ˆWindow Coordinatesï¼‰ï¼Œçª—å£åæ ‡ç³»ä¸Šçš„å…ƒç´ çš„åæ ‡è¿˜éœ€ç»è¿‡çª—å£åˆ°è§†å£çš„åæ ‡å˜æ¢ï¼ˆçº¿æ€§å˜æ¢ï¼‰ï¼Œæœ€ååœ¨è®¾å¤‡åæ ‡ç³»ï¼ˆDevice Coordinatesï¼‰çš„è§†å£åŒºåŸŸå†…ç»˜åˆ¶ã€‚\nä¸–ç•Œåæ ‡ç³»ä¸–ç•Œåæ ‡ç³»ä¹Ÿç§°ä¹‹ä¸ºé€»è¾‘åæ ‡ç³»ï¼Œä½¿ç”¨çš„å•ä½å«é€»è¾‘å•ä½ã€‚\nåœ¨çœŸå®çš„ä¸–ç•Œåœ°ç†ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç»çº¬åº¦æ¥è¡¨ç¤ºæŸä¸€ä¸ªå…·ä½“ä½ç½®ï¼Œå¦‚æ­¦æ±‰çš„åæ ‡ä¸º(ä¸œç» 114Â°,åŒ—çº¬ 30Â°)ï¼Œè€Œåœ¨ Qt ç»˜å›¾æ—¶ä½¿ç”¨çš„é€»è¾‘å•ä½æ˜¯åƒç´ ã€‚\nQt çš„åƒç´ æ”¯æŒéæ•´æ•°æ•°é‡ï¼Œå¦‚ 0.5 ä¸ªåƒç´ ï¼Œè€Œå®é™…è®¾å¤‡ï¼ˆå¦‚æ˜¾ç¤ºå™¨ã€æ‰“å°æœºç­‰ï¼‰åªæ”¯æŒæ•´æ•°æ•°é‡çš„åƒç´ æ˜¾ç¤ºï¼Œå› æ­¤ä»é€»è¾‘åæ ‡åˆ°è®¾å¤‡åæ ‡éœ€è¦ç»è¿‡ç›¸åº”çš„è½¬æ¢è¿‡ç¨‹ã€‚\nåœ¨ Qt ä¸­ï¼Œæˆ‘ä»¬æä¾›ç»™ QPainter çš„éƒ½æ˜¯é€»è¾‘åæ ‡ï¼Œè¿™ç§åæ ‡ä¸å…·ä½“çš„è®¾å¤‡ç±»å‹æ— å…³ã€‚\nçª—å£åæ ‡ç³»ä¸Šå›¾ä¸­çš„çª—å£æ˜¯æ‰“äº†å¼•å·çš„ï¼Œè¿™è¯´æ˜è¯¥çª—å£æ˜¯å®é™…ä¸å­˜åœ¨çš„ï¼Œè¿™ä¸ªçª—å£æŒ‡çš„æ˜¯çª—å£åæ ‡ç³»å·¦ä¸Šè§’åŸç‚¹åˆ°å³ä¸‹è§’çš„ä¸€ä¸ªè™šæ‹ŸçŸ©å½¢çª—å£ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œçª—å£åæ ‡ç³»å’Œé€»è¾‘åæ ‡ç³»éƒ½ç­‰åŒäºè®¾å¤‡åæ ‡ç³»ï¼Œä¸‰è€…é‡åˆï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨QPaintet::setWindowæ–¹æ³•é‡è®¾çª—å£åæ ‡ç³»çš„åŸç‚¹å’ŒèŒƒå›´ï¼Œæœ‰äº†å·¦ä¸Šè§’åŸç‚¹å’Œé•¿&#x2F;å®½ï¼Œä¹Ÿå°±å¾—åˆ°ä¸€ä¸ªæ–°çš„â€œçª—å£â€ã€‚\nåœ¨ç»˜å›¾æ—¶ä¼ é€’ç»™ QPainter çš„é€»è¾‘åæ ‡éœ€è¦å…ˆç»è¿‡çŸ©é˜µå˜æ¢ï¼ˆå¸¸è§çš„çŸ©é˜µå˜æ¢æœ‰ QPainter çš„ translateã€scaleã€rotateã€shear ç­‰æ–¹æ³•ï¼Œåé¢ç« èŠ‚ä¼šä»‹ç»ï¼‰ï¼Œç„¶åå†ä¼ é€’ç»™çª—å£åæ ‡ç³»ã€‚\nè®¾å¤‡åæ ‡ç³»ä¹Ÿç§°ä¹‹ä¸ºç‰©ç†åæ ‡ï¼ˆPhysical Coordinatesï¼‰ï¼Œåæ ‡åŸç‚¹ä½äºå·¦ä¸Šè§’ï¼ŒX è½´æ°´å¹³å‘å³å¢é•¿ï¼ŒY è½´å‚ç›´å‘ä¸‹å¢é•¿ã€‚\nä¸åŒçš„è®¾å¤‡åæ ‡å•ä½é€šå¸¸ä¸åŒï¼Œå¦‚æ˜¾ç¤ºå™¨é€šå¸¸ä»¥åƒç´ ä¸ºå•ä½ï¼Œè€Œæ‰“å°æœºé€šå¸¸ä»¥ç‚¹ä¸ºå•ä½ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯è®¾å¤‡åæ ‡ç³»çš„åŸç‚¹å’ŒèŒƒå›´å§‹ç»ˆç­‰åŒäºå®é™…ç»˜åˆ¶è®¾å¤‡ï¼Œä¸ä¼šè·Ÿéšé€»è¾‘åæ ‡ç³»ã€çª—å£åæ ‡ç³»ä»¥åŠè§†å£ï¼ˆviewportï¼‰çš„æ”¹å˜è€Œæ”¹å˜ã€‚\nè§†å£è§†å£ï¼ˆviewportï¼‰æ˜¯è®¾å¤‡ç¯å¢ƒä¸­çš„ä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œä½¿ç”¨è®¾å¤‡åæ ‡ç³»è¡¨ç¤ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè§†å£å·¦ä¸Šè§’ä½ç½®ä¸ºè®¾å¤‡åæ ‡ç³»çš„åŸç‚¹ï¼Œå¤§å°ä¸ºå®é™…ç»˜åˆ¶ç›®æ ‡è®¾å¤‡çš„å¤§å°ã€‚\nè§†å£å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†æŒ‡å®šåœ¨æ˜¾ç¤ºè®¾å¤‡çš„ä»€ä¹ˆä½ç½®ï¼Œä»¥å¤šå¤§çš„èŒƒå›´æ¥å®Œå…¨æ˜¾ç¤ºæŒ‡å®šçš„çª—å£å†…å®¹ï¼Œå¦‚æœçª—å£å†…å®¹è¶…å‡ºäº†è§†å£åŒºåŸŸï¼Œè¶…å‡ºéƒ¨åˆ†å°†ä¸ä¼šæ˜¾ç¤ºã€‚\næˆ‘ä»¬å¯ä»¥ç”¨ QPainter::setViewport æ–¹æ³•æ¥æ”¹å˜è§†å£çš„ä½ç½®å’Œå¤§å°ï¼ŒQPainter::setViewport çš„å‚æ•°éƒ½æ˜¯åŸºäºè®¾å¤‡åæ ‡ç³»çš„ï¼Œå¦‚æœæŒ‡å®šçš„è§†å£åŒºåŸŸè¶…å‡ºäº†è®¾å¤‡å¤–ï¼Œè®¾å¤‡å¤–çš„å†…å®¹å°†ä¸ä¼šæ˜¾ç¤ºã€‚\nå®ä¾‹è®²è§£ä¸ºäº†æ›´å¥½è¯´æ˜å„ä¸ªåæ ‡ç³»åŠè§†å£ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥å…·ä½“è¯´æ˜ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªé•¿å®½ä¸º 400x400 çš„çª—å£ï¼Œå¹¶ä¸”ç¨‹åºæœªå¼€å¯ DPI ç¼©æ”¾ç‰¹æ€§ï¼š\nresize(400, 400);\n\nç»˜åˆ¶ä»£ç å¦‚ä¸‹ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.translate(100, 200);  painter.setWindow(QRect(200, 300, 600, 600));  painter.setViewport(QRect(100, 100, 300, 300));  painter.drawRect(QRect(300, 100, 200, 200));&#125;\n\nä¸‹å›¾ä½¿ç”¨ä¸åŒçš„é¢œè‰²ç»˜åˆ¶äº†ä¸åŒçš„åæ ‡ç³»åŠè§†å£ã€çª—å£çš„ä½ç½®å’ŒåŒºåŸŸï¼š\n\nç¬¬ 1 è¡Œä»£ç QPainter painter(this)ï¼š\nè¡¨æ˜æˆ‘ä»¬æ˜¯åœ¨å½“å‰ QWidget å®ä¾‹ä¸Šè¿›è¡Œç»˜åˆ¶ï¼Œå› æ­¤è®¾å¤‡åæ ‡ç³»åŸç‚¹ä¸º(0,0)ï¼Œåæ ‡ç³»çš„èŒƒå›´ä¸º QWidget çš„é•¿å®½ 400x400ï¼Œåæ ‡å•ä½ä¸ºåƒç´ ï¼Œå¯¹åº”ä¸Šå›¾ç»¿è‰²éƒ¨åˆ†ã€‚\næ­¤æ—¶è¿˜æœªè®¾ç½®è§†å£ï¼Œå› æ­¤è§†å£é»˜è®¤ç­‰åŒäºè®¾å¤‡åæ ‡ç³»çš„èŒƒå›´ï¼Œå³(0,0,400,400)ï¼Œè¯¥éƒ¨åˆ†æœªåœ¨ä¸Šå›¾ç”»å‡ºã€‚\nç¬¬ 2 è¡Œä»£ç painter.translate(100, 200):\nå°†é€»è¾‘åæ ‡ç³»çš„åŸç‚¹åç§»(100,200)ä¸ªåƒç´ ã€‚\nåœ¨è¿›è¡Œåç§»æ—¶ï¼Œå€¼ä¸ºæ­£è¡¨ç¤ºå‘æ–¹å‘ç§»åŠ¨ï¼Œå€¼ä¸ºè´Ÿè¡¨ç¤ºå‘è´Ÿæ–¹å‘ç§»åŠ¨ã€‚\nç¬¬ 3 è¡Œä»£ç painter.setWindow(QRect(200, 300, 600, 600))ï¼š\nè®¾ç½®çª—å£åæ ‡ç³»åŸç‚¹ä¸º(200, 300)ï¼Œçª—å£èŒƒå›´æ˜¯ 600x600ï¼Œå¯¹åº”ä¸Šå›¾çº¢è‰²éƒ¨åˆ†ã€‚\nç¬¬ 4 è¡Œä»£ç painter.setViewport(QRect(100, 100, 300, 300))ï¼š\nè®¾ç½®è§†å£ä¸º QRect(100, 100, 300, 300)ï¼Œå³åœ¨è®¾å¤‡åæ ‡ç³»ä¸Šçš„ä½¿ç”¨ QRect(100, 100, 300, 300)åŒºåŸŸæ¥æ˜¾ç¤ºä¸Šé¢ 600x600 çš„çª—å£ï¼Œå¯¹åº”ä¸Šå›¾è“è‰²éƒ¨åˆ†ã€‚\n\nç¬¬ 2ã€3ã€4 è¡Œä»£ç æ˜¯æ²¡æœ‰å…ˆåé¡ºåºçš„ï¼Œå› ä¸ºä¸‰ä¸ªè®¾ç½®å‡½æ•°æ‰€å½±å“çš„ç›®æ ‡æ˜¯ä¸åŒçš„ã€‚\n\nç¬¬ 5 è¡Œä»£ç painter.drawRect(QRect(300, 100, 200, 200))ï¼š\nåœ¨ (300,100) ä½ç½®ç»˜åˆ¶ 200x200 çš„æ­£æ–¹å½¢ï¼Œæ­¤å¤„ä¼ é€’çš„æ˜¯é€»è¾‘åæ ‡ï¼Œè€Œé€»è¾‘åæ ‡ç³»å·²åœ¨ç¬¬ 2 è¡Œä»£ç å¤„è¿›è¡Œäº†åç§»ï¼Œå› æ­¤æ ¹æ®æ–°çš„é€»è¾‘åæ ‡ç³»ï¼Œæ­£æ–¹å½¢å·¦ä¸Šè§’ä½ç½®æ˜¯ (300+100, 100+200) &#x3D; (400, 300)ï¼Œåˆå› ä¸ºæ­¤å¤„é€»è¾‘åæ ‡ç³»æœªåšç¼©æ”¾æ“ä½œï¼ˆç¼©æ”¾æ“ä½œç”± QPainter::scale æä¾›ï¼‰ï¼Œå› æ­¤æ­£æ–¹å½¢çš„é•¿å®½ä¿æŒä¸å˜ï¼Œä»ä¸º 200x200ï¼Œå³ QRect(400,300,200,200)ã€‚\nç„¶åå°†æ­£æ–¹å½¢ QRect(400,300,200,200) ä¼ é€’ç»™çª—å£åæ ‡ç³»ï¼Œè¯¥æ­£æ–¹å½¢åœ¨çª—å£åæ ‡ç³» (200,300,600,600) ä¸Šé¢çš„ä½ç½®å’Œå¤§å°å¯¹åº”ä¸Šå›¾ç²‰çº¢è‰²éƒ¨åˆ†ã€‚\næœ€åç”¨è®¾å¤‡åæ ‡ç³»ä¸Šçš„è§†å£åŒºåŸŸæ¥æ˜¾ç¤ºè¯¥çª—å£ï¼Œç”±äºçª—å£åæ ‡ç³»å’Œè®¾å¤‡åæ ‡ç³»çš„åŸç‚¹åŠèŒƒå›´ä¸ç›¸åŒï¼Œå› æ­¤è¿˜éœ€è¦åšçº¿æ€§è½¬åŒ–ï¼š\nåœ¨(200, 300, 600, 600) èŒƒå›´ä¸Šæ˜¾ç¤ºçš„æ­£æ–¹å½¢ (400, 300, 200, 200)è½¬åŒ–ä¸ºåœ¨è§†å£(100, 100, 300, 300) èŒƒå›´ä¸Šæ˜¾ç¤ºçš„æ­£æ–¹å½¢ (x, y, w, h)\n\nä»ä¸Šé¢å¯ä»¥çœ‹å‡ºçª—å£èŒƒå›´æ˜¯è§†å£çš„600 / 300 = 2å€ï¼Œå› æ­¤åœ¨è§†å£ä¸Šçš„åŸç‚¹å’Œé•¿å®½åˆ†åˆ«ä¸ºï¼š\nx = 100 + (400 - 200) / 2 = 200y = 100 + (300 - 300) / 2 = 100w = 200 / 2 = 100h = 200 / 2 = 100\n\nè®¡ç®—å¾—åˆ°éœ€è¦åœ¨è§†å£ (100, 100, 300, 300) ä¸Šç»˜åˆ¶çš„æ­£æ–¹å½¢ä¸º (200,100,100,100) ï¼Œå®é™…ç»˜åˆ¶çš„æ­£æ–¹å½¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nç§»åŠ¨åŸç‚¹åˆ°çª—å£ä¸­å¤®é»˜è®¤æƒ…å†µä¸‹ï¼Œåæ ‡åŸç‚¹åœ¨çª—å£çš„å·¦ä¸Šè§’ï¼ŒX è½´æ°´å¹³å‘å³å¢é•¿ï¼ŒY è½´å‚ç›´å‘ä¸‹å¢é•¿ã€‚ç°åœ¨å°†åæ ‡åŸç‚¹ç§»åŠ¨åˆ°çª—å£ä¸­å¤®ï¼Œä½†ä¸æ”¹å˜ X è½´å’Œ Y è½´çš„æ–¹å‘ã€‚\n// Qt2DSampleçª—å£é•¿å®½ä¸º400x400void Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  const int w = width();  const int h = height();  // å°†åæ ‡åŸç‚¹ç§»åŠ¨åˆ°çª—å£ä¸­å¤®  painter.translate(w / 2.0, h / 2.0);  // ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼š  // painter.setWindow(w / 2.0, h / 2.0, w, h);  // painter.translate(w, h);  // ç»˜åˆ¶æµ‹è¯•çŸ©å½¢  painter.drawRect(QRect(0, 0, 100, 100));&#125;\n\nå®é™…ç»˜åˆ¶çš„çŸ©å½¢åœ¨çª—å£ä¸­çš„ä½ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nQRect é—ç•™é—®é¢˜åœ¨ä»‹ç» QRect çš„é—ç•™é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ Qt ä¸­é”¯é½¿ä¸æŠ—é”¯é½¿çš„ç›¸å…³å†…å®¹ã€‚\n7.1 æŠ—é”¯é½¿ä¸‹å›¾å±•ç¤ºäº†åœ¨ç»˜åˆ¶ä¸€æ¡æ–œçº¿æ—¶ï¼Œæœªå¼€å¯æŠ—é”¯é½¿ï¼ˆå·¦è¾¹ï¼‰å’Œå¼€å¯äº†æŠ—é”¯é½¿åï¼ˆå³è¾¹ï¼‰ä¸¤è€…çš„æ•ˆæœã€‚\n\næŠ—é”¯é½¿å°±æ˜¯ç»˜å›¾å¼•æ“é€šè¿‡åœ¨å…ƒç´ çš„è¾¹ç¼˜å¡«å……ä¸åŒçš„é¢œè‰²æ¥å®ç°å¹³æ»‘è¾¹ç¼˜çš„æ•ˆæœã€‚\nQt é»˜è®¤ç»˜å›¾çš„å…ƒç´ æ˜¯æœ‰é”¯é½¿çš„ï¼Œå½“ä½¿ç”¨ 1 åƒç´ å®½çš„ç”»ç¬”ç»˜åˆ¶æ—¶ï¼Œå®é™…åƒç´ å°†æ¸²æŸ“åˆ°æˆ‘ä»¬å®šä¹‰åæ ‡çš„å³ä¸‹æ–¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nå½“ç”»ç¬”å®½åº¦ä¸ºå¶æ•°æ—¶ï¼Œåƒç´ å°†å›´ç»•å®šä¹‰åæ ‡è¿›è¡Œå¯¹ç§°æ¸²æŸ“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nå½“ç”»ç¬”å®½åº¦ä¸ºå¥‡æ•°æ—¶ï¼Œæ•´é™¤åå¤šä½™çš„ 1 åƒç´ å°†æ¸²æŸ“åˆ°å®šä¹‰åæ ‡çš„å³ä¸‹æ–¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n7.2 QRect å®é™…å®½é«˜åŸºäºä¸Šè¿°åŸå› ï¼ŒQRect::right() å’Œ QRect::bottom() çš„å€¼å¹¶ä¸ç­‰äºçŸ©å½¢çœŸæ­£å³ä¸‹è§’çš„åæ ‡ã€‚\nQRect::QRect(int aleft, int atop, int awidth, int aheight) noexcept    : x1(aleft), y1(atop), x2(aleft + awidth - 1), y2(atop + aheight - 1) &#123;&#125;void QRect::setWidth(int w) noexcept&#123; x2 = (x1 + w - 1); &#125;void QRect::setHeight(int h) noexcept&#123; y2 = (y1 + h - 1); &#125;int QRect::width() const noexcept&#123; return  x2 - x1 + 1; &#125;int QRect::height() const noexcept&#123; return  y2 - y1 + 1; &#125;\n\nä»ä¸Šé¢ QRect çš„æºç å¯çŸ¥ï¼ŒQRect::width() å’Œ QRect::height() æ–¹æ³•è¿”å›çš„æ˜¯çŸ©å½¢çš„å®é™…å®½é«˜ï¼Œä½† QRect::right() å’Œ QRect::bottom() æ–¹æ³•è¿”å›çš„ä¸æ˜¯çŸ©å½¢çš„å®é™…å³è¾¹å’Œåº•éƒ¨ï¼š\nQRect::right() è¿”å›çš„å®é™…æ˜¯ QRect::left() + QRect::width() - 1QRect::bottom() è¿”å›çš„å®é™…æ˜¯ QRect::top() + QRect::height() - 1\n\nè¿™å±äº QRect çš„å†å²é—ç•™é—®é¢˜ï¼ŒQt ä¸ºäº†å…¼å®¹ä¹‹å‰è€çš„ä»£ç ï¼Œå¯¹è¯¥éƒ¨åˆ†æœªä½œä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼è·å– QRect çœŸå®çš„ right å’Œ bottomï¼š\nQRect::x() + QRect::width()QRect::y() + QRect::height()\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ QRectFç±»å‹æ¥ä»£æ›¿ QRect ç±»å‹ï¼ŒQRectFç±»å‹æ²¡æœ‰ä¸Šè¿°é—®é¢˜ã€‚\n7.3 å¼€å¯æŠ—é”¯é½¿åœ¨ Qt ä¸­å¼€å¯æŠ—é”¯é½¿ä¹Ÿéå¸¸ç®€å•ï¼Œä¸‹é¢ä»£ç å¼€å¯äº†æŠ—é”¯é½¿ï¼š\npainter.setRenderHints(    QPainter::Antialiasing |    // æ¶ˆé™¤åŸºç¡€å…ƒç´ ï¼ˆå¦‚çº¿ã€ç‚¹ï¼‰è¾¹ç¼˜çš„é”¯é½¿    QPainter::TextAntialiasing  // æ¶ˆé™¤æ–‡å­—è¾¹ç¼˜çš„é”¯é½¿);\n\nå¼€å¯æŠ—é”¯é½¿ä»¥åï¼Œåƒç´ å°†å§‹ç»ˆå›´ç»•å®šä¹‰åæ ‡è¿›è¡Œå¯¹ç§°æ¸²æŸ“ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨åœ¨è¾¹ç¼˜å¡«å……é¢œè‰²æ¥å¹³æ»‘è¾¹ç¼˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\né€»è¾‘åæ ‡çŸ©é˜µå˜æ¢Qt æä¾›äº†æ–¹æ³•æ¥ç›´æ¥å¯¹ä¸–ç•Œåæ ‡ï¼ˆä¹Ÿå¯ç§°ä¸ºé€»è¾‘åæ ‡ï¼‰è¿›è¡ŒçŸ©é˜µå˜æ¢ï¼š\nvoid QPainter::setWorldTransform(const QTransform &amp;matrix, bool combine = false)\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;è¿˜æä¾›æ–¹æ³•æ¥å¼€å¯å’Œå…³é—­ä¸–ç•Œåæ ‡çš„çŸ©é˜µå˜æ¢æ“ä½œï¼š\nvoid QPainter::setWorldMatrixEnabled(bool enable)\n\nåŒæ—¶ QPainter è¿˜æ˜¯æä¾›äº† translateã€scaleã€rotateã€shear ç­‰å¿«æ·æ–¹æ³•å®ç°å¯¹é€»è¾‘åæ ‡çš„çŸ©é˜µå˜æ¢æ“ä½œã€‚\néœ€è¦æ³¨æ„çš„æ˜¯åœ¨è°ƒç”¨äº† translateã€scaleã€rotateã€shear æ–¹æ³•åï¼ŒQPainter ä¼šè‡ªåŠ¨å¼€å¯å¯¹ä¸–ç•Œåæ ‡çš„çŸ©é˜µè½¬æ¢ã€‚\nä¸ºäº†æ›´å¥½çš„ä»‹ç»æ˜¯é€»è¾‘åæ ‡çš„è½¬åŒ–è¿‡ç¨‹ï¼Œç°åœ¨å‡è®¾åœ¨åæ ‡å˜æ¢ä¹‹å‰å­˜åœ¨ ç‚¹ A(x, y) å’Œ çŸ©å½¢ B(x, y, w, h)\ntranslatevoid QPainter::translate(const QPointF &amp;offset)void QPainter::translate(const QPoint &amp;offset)void QPainter::translate(qreal dx, qreal dy)\n\nX å’Œ Y è½´åˆ†åˆ«å¹³ç§»è·ç¦» m å’Œ nï¼Œå¹³ç§»åï¼Œç‚¹ A çš„åæ ‡ä¸º(x + m, y + n)ï¼ŒçŸ©å½¢ B çš„åæ ‡ä¸º(x + m, y + n, w, h)\nm å’Œ n å¯ä»¥ä¸ºè´Ÿæ•°ã€‚\nscalevoid QPainter::scale(qreal sx, qreal sy)\n\nX å’Œ Y è½´åˆ†åˆ«ç¼©æ”¾ m å’Œ n å€ ï¼Œç¼©æ”¾åï¼Œç‚¹ A çš„åæ ‡ä¸º(x _ m, y _ n)ï¼ŒçŸ©å½¢ B çš„åæ ‡ä¸º (x _ m, y _ n, w _ m, h _ n)\nm å’Œ n å¯ä»¥ä¸ºè´Ÿæ•°ï¼Œå¦‚ï¼š\nç‚¹ A(50,100) -&gt; scale(-10, 2) -&gt; (-500,200)\nç‚¹ A(-50,100) -&gt; scale(-10, 2) -&gt; (500,200)\nrotatevoid QPainter::rotate(qreal angle)\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æŒ‰é¡ºæ—¶é’ˆå°† X å’Œ Y è½´åŒæ—¶æ—‹è½¬ angle åº¦ï¼ˆæ³¨æ„ angle å‚æ•°çš„å•ä½æ˜¯åº¦ï¼Œè€Œä¸æ˜¯å¼§åº¦ï¼‰ï¼Œå…¶ä¸­0åº¦ä¸ºæ­£ä¸‰ç‚¹é’Ÿæ–¹å‘ã€‚\n\nrotate æ˜¯é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œè€Œä½¿ç”¨ QPainter::drawArc ç­‰æ–¹æ³•ç»˜åˆ¶åœ†å¼§æˆ–æ‰‡å½¢æ—¶ï¼Œæ˜¯æŒ‰é€†æ—¶é’ˆæ–¹å‘ç»˜åˆ¶çš„ã€‚\n\nå¯¹äºå•ä¸ªç‚¹è¿›è¡Œæ—‹è½¬æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œ\nshearvoid QPainter::shear(qreal sh, qreal sv)\n\nå¯¹ X å’Œ Y è½´åˆ†åˆ«è¿›è¡Œæ‰­æ›²å˜æ¢ã€‚\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"æ­å»ºJavaScriptå’ŒTypeScriptå¼€å‘è°ƒè¯•ç¯å¢ƒ","url":"/post/997636699.html","content":"å®‰è£… Visual Studio CodeVisual Studio Codeï¼ˆç®€ç§° VSCodeï¼‰æ˜¯ç”±å¾®è½¯å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„ä»£ç ç¼–è¾‘å™¨ã€‚Visual Studio Code çš„ä¼˜åŠ¿å°±æ˜¯æœ‰ä¸°å¯Œçš„æ‰©å±•åŒ…ï¼Œå¤§å¤šæ•°åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡å®‰è£…æ‰©å±•åŒ…çš„æ–¹å¼æ¥å®ç°ã€‚\næ‰“å¼€ Visual Studio Code å®˜ç½‘https://code.visualstudio.com/ï¼Œæ ¹æ®ç³»ç»Ÿé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œå®‰è£…ï¼š\n\n\nå®‰è£…é€‰é¡¹å¯ä»¥æ ¹æ®ä¸ªäººå–œæ¬¢æ¥æŒ‡å®šï¼Œæ²¡æœ‰å¼ºåˆ¶çš„è¦æ±‚ã€‚ä½†å»ºè®®å‹¾é€‰å¦‚ä¸‹ 4 é¡¹ï¼š\né…ç½® Visual Studio Codeå°†é»˜è®¤è¯­è¨€è®¾ç½®ä¸ºä¸­æ–‡å®‰è£…å®Œ Visual Studio Code ä¹‹åï¼Œå…¶ç•Œé¢çš„é»˜è®¤è¯­è¨€æ˜¯è‹±æ–‡ï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£…â€œç®€ä½“ä¸­æ–‡çš„è¯­è¨€åŒ…â€å°±å¯ä»¥å°†è¯­è¨€ä¿®æ”¹ä¸ºä¸­æ–‡ï¼šç‚¹å‡»å·¦ä¾§â€œæ‰©å±•â€å›¾æ ‡ï¼Œæ‰“å¼€æ‰©å±•å·¥å…·æ ï¼Œè¾“å…¥â€œChineseâ€æœç´¢ç®€ä½“ä¸­æ–‡è¯­è¨€æ‰©å±•åŒ…ï¼Œå®‰è£…å®Œé‡å¯ Visual Studio Code å³å¯ã€‚\nè°ƒè¯•ç¯å¢ƒé€‰æ‹©å¯åŠ¨ Visual Studio Codeï¼ŒæŒ‰ä¸‹å¿«æ·é”®F5ï¼Œå¯ä»¥çœ‹åˆ° Visual Studio Code å·²ç»å†…ç½®äº†å‡ ç§è°ƒè¯•ç¯å¢ƒçš„é…ç½®ï¼šä½†æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™äº›é…ç½®è¿˜éœ€è¦å®‰è£…å¯¹åº”çš„è¿è¡Œæ—¶ç¯å¢ƒå¦‚ Node.jsã€Chromeã€‚\n\nVisual Studio Code ä¹Ÿå¯ä»¥è°ƒè¯• C++ï¼ŒC#ï¼ŒPythonï¼ŒGoï¼ŒC++ç­‰è¯­è¨€ï¼Œä½†éœ€è¦åœ¨ launch.json ä¸­è¿›è¡Œé€‚å½“çš„é…ç½®ï¼Œåé¢åœ¨è®²è§£ä½¿ç”¨ Node.js è°ƒè¯• TypeScript çš„æ—¶å€™ä¼šä»‹ç»å¦‚ä½•é…ç½® launch.jsonã€‚\n\nå› ä¸º Node.js å¯ä»¥ç›´æ¥è¿è¡Œ Javascript è„šæœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Node.js æ¥è°ƒè¯• JavaScriptã€‚\nåœ¨å¼€å§‹è°ƒè¯•å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£… Node.jsè¿è¡Œæ—¶ç¯å¢ƒï¼Œæ‰“å¼€ Node.js ä¸­æ–‡å®˜ç½‘https://nodejs.org/zh-cn/ï¼Œé€‰æ‹©é•¿æœŸæ”¯æŒç‰ˆï¼Œä¸‹è½½å®‰è£…å³å¯ï¼ˆå®‰è£…å®Œæˆä¹‹åå¯èƒ½éœ€è¦é‡å¯ Visual Studio Codeï¼‰ï¼š\nè°ƒè¯• JavaScriptæ‰“å¼€ Visual Studio Codeï¼Œæ–°å»ºä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œè¾“å…¥ä»»æ„ JavaScript ä»£ç å¹¶ä¿å­˜ï¼Œå¦‚ï¼šç‚¹å‡»å·¦ä¾§å·¥å…·æ çš„â€œè¿è¡Œâ€å›¾æ ‡ï¼ˆå¿«æ·é”®Ctrl+Shift+Dï¼‰å¹¶é€‰æ‹©â€œè¿è¡Œå’Œè°ƒè¯•â€ï¼ˆæˆ–è€…æŒ‰F5å¿«æ·é”®ï¼‰ï¼Œåœ¨å¼¹å‡ºçš„è°ƒè¯•ç¯å¢ƒä¸‹æ‹‰æ¡†ä¸­ä¸­é€‰æ‹©â€œNode.jsâ€ï¼Œæ­¤æ—¶å°±ä¼šä½¿ç”¨ Node.js æ¥è¿è¡Œå½“å‰è„šæœ¬ã€‚\næ­¤æ—¶æ˜¯çœ‹ä¸åˆ°console.logçš„è¾“å‡ºï¼Œå› ä¸ºå…¶è¾“å‡ºåˆ°äº†â€è°ƒè¯•æ§åˆ¶å°â€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨â€œæŸ¥çœ‹â€èœå•ä¸­æ‰“å¼€â€œè°ƒè¯•æ§åˆ¶å°â€ï¼Œå†æ¬¡ä½¿ç”¨ä¸Šé¢æ­¥éª¤è¿è¡Œ JavaScript æ–‡ä»¶å³å¯åœ¨â€œè°ƒè¯•æ§åˆ¶å°â€çœ‹åˆ°è¿è¡Œçš„è¾“å‡ºäº†ã€‚\næ–­ç‚¹è®¾ç½®&#x2F;å–æ¶ˆæ–­ç‚¹ï¼šç”¨é¼ æ ‡ç‚¹å‡»è¡Œå·å·¦ä¾§åŒºåŸŸï¼ˆå³ä¸‹å›¾ç”»ç»¿æ¡†çš„åŒºåŸŸï¼‰å³å¯è®¾ç½®æ–­ç‚¹ï¼Œå†æ¬¡ç‚¹å‡»ä¾¿æ˜¯å–æ¶ˆæ–­ç‚¹ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é”®F9æ¥è®¾ç½®&#x2F;å–æ¶ˆæ–­ç‚¹.è®¾ç½®æ–­ç‚¹åï¼ŒF5å¼€å§‹è°ƒè¯•ä»£ç ï¼Œä»£ç è¿è¡Œåˆ°æ–­ç‚¹å¤„ä¾¿ä¼šæš‚åœï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨å·¦ä¾§åŒºåŸŸæŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡æ¶‰åŠçš„â€å±€éƒ¨å˜é‡â€å’Œâ€å…¨å±€å˜é‡â€ã€â€è°ƒç”¨å †æ ˆâ€ã€ä»¥åŠâ€æ–­ç‚¹åˆ—è¡¨â€ã€‚\nè°ƒè¯•å¿«æ·é”®\nF5 å¼€å§‹è°ƒè¯•æˆ–åœ¨ä»£ç æš‚åœåç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€å¤„æ–­ç‚¹\nF10 å•æ­¥æ‰§è¡Œ\nF11 å•æ­¥æ­¥å…¥ï¼ŒF10 é‡åˆ°å‡½æ•°ä¸ä¼šè°ƒè¯•è¿›å…¥å‡½æ•°å†…éƒ¨ï¼Œè€Œ F11 å´å¯ä»¥æ­¥å…¥åˆ°å‡½æ•°å†…éƒ¨\nShift+F11 å•æ­¥è·³å‡º\nShift+F5 åœæ­¢è°ƒè¯•\n\näº”ã€è°ƒè¯• TypeScriptNode.js æ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œ TypeScript è„šæœ¬çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ Node.js è¿è¡Œ TypeScript è„šæœ¬ä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼šä½¿ç”¨ TypeScript å®˜æ–¹æä¾›çš„tcså·¥å…·å°† TypeScript è„šæœ¬è½¬åŒ–ä¸º JavaScriptï¼Œç„¶åå†ä½¿ç”¨ Node.js è¿è¡Œ js è„šæœ¬ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\ntcs --outFile index.js index.tsnode index.js\n\nè€Œ Node.js çš„æ‰©å±•æ¨¡å—ts-nodeå¯ä»¥ç®€åŒ–ä¸Šè¿°æ“ä½œï¼ˆå…¶å†…éƒ¨ä¹Ÿæ˜¯ä½¿ç”¨çš„ tcs å’Œ nodeï¼‰ï¼Œå°†ä¸Šé¢äºŒæ­¥æ“ä½œåˆäºŒä¸ºä¸€ï¼š\nts-node index.ts\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨ts-nodeæ¨¡å—æ¥ä½œä¸º TypeScript è„šæœ¬çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚\nç”±äºæˆ‘ä»¬é‡‡ç”¨äº†ts-nodeå·¥å…·æ¥è¿è¡Œ TypeScript è„šæœ¬ï¼ŒVisual Studio Code æ²¡æœ‰å†…ç½®è¯¥å·¥å…·çš„è°ƒè¯•é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨luanch.jsonä¸­è‡ªå®šä¹‰ä¸€ä¸ªé€‚ç”¨äºts-nodeçš„è°ƒè¯•ç¯å¢ƒé…ç½®ã€‚\n\næ³¨æ„ï¼šå¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œé‚£ä¹ˆå·¥ç¨‹æ–‡ä»¶å¿…é¡»åœ¨ä¸€ä¸ªå•ç‹¬çš„ç›®å½•ä¸­ï¼Œå¹¶ä½¿ç”¨ Visual Studio Code æ‰“å¼€è¿™ä¸ªç›®å½•ï¼ˆå¯¹ç€ç›®å½•ç‚¹å³é”®é€‰æ‹©ä½¿ç”¨ Visual Studio Code æ‰“å¼€å³å¯ï¼‰\n\nå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š\n\næ–°å»ºé¡¹ç›®ç›®å½•ï¼ˆå‡è®¾å«TSDemoï¼‰\n\nä½¿ç”¨ Visual Studio Code æ‰“å¼€è¯¥ç›®å½•ï¼Œå¹¶åœ¨â€œæŸ¥çœ‹â€èœå•ä¸­é€‰æ‹©æ‰“å¼€â€œç»ˆç«¯â€ï¼ˆä¹‹æ‰€ä»¥åœ¨ Visual Studio Code ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œçº¯å±æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œå› ä¸ºåœ¨ Visual Studio Code ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œç»ˆç«¯ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°é¡¹ç›®å½“å‰ç›®å½•ï¼Œä¸”ä¸ç”¨å¤šä¸ªçª—å£ä¹‹é—´åˆ‡æ¢ï¼‰ã€‚\n\nåœ¨ç»ˆç«¯ä¸­ä¾æ­¤æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n# ç”Ÿæˆpackage.jsonæ–‡ä»¶npm init -y# å®‰è£…typescriptnpm install typescript -S # å®‰è£…ts-node npm install ts-node -S\n\nluanch.jsonçš„è·¯å¾„ä¸ºé¡¹ç›®ç›®å½•\\.vscode\\luanch.jsonï¼ŒæŒ‰ç…§ä¸‹å›¾ä¾æ­¤ç‚¹å‡»å·¦ä¾§å·¥å…·æ â€œè¿è¡Œâ€-&gt;â€œåˆ›å»º launch.json æ–‡ä»¶â€ï¼š\n\næ‰“å¼€è‡ªåŠ¨ç”Ÿæˆçš„luanch.jsonæ–‡ä»¶ï¼Œåœ¨configurationsèŠ‚æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\n&#123;  &quot;version&quot;: &quot;0.2.0&quot;,  &quot;configurations&quot;: [    &#123;      &quot;name&quot;: &quot;Current TS File&quot;,      &quot;type&quot;: &quot;node&quot;,      &quot;request&quot;: &quot;launch&quot;,      &quot;program&quot;: &quot;$&#123;workspaceRoot&#125;/node_modules/ts-node/dist/bin.js&quot;,      &quot;args&quot;: [&quot;$&#123;relativeFile&#125;&quot;],      &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,      &quot;protocol&quot;: &quot;inspector&quot;    &#125;  ]&#125;\n\næ‰“å¼€éœ€è¦è°ƒè¯•çš„ TypeScript æ–‡ä»¶ï¼Œå¿«æ·é”®F5å¼€å§‹è°ƒè¯•ã€‚\n\n\n\nå› ä¸º ts-node æ—¢å¯ä»¥æ‰§è¡Œ TypeScriptï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œ JavaScriptï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥ç”¨æ¥è°ƒè¯• JavaScript è„šæœ¬ã€‚\n\n","categories":["â‘¦ç°ä»£Webä¸Electronæ¡Œé¢åº”ç”¨"]},{"title":"ç©è½¬Qt 2Dç»˜å›¾ä¹‹ç”»å®¶","url":"/post/1967189103.html","content":"åœ¨ Qt 2D ä¸–ç•Œä¸­ï¼Œå›¾å½¢åŸºæœ¬éƒ½ç”±ç‚¹ã€çº¿ã€çŸ©å½¢ã€å¤šè¾¹å½¢ã€æ¤­åœ†ã€åœ†ã€æŠ˜çº¿ã€æ›²çº¿ã€æ–‡æœ¬ã€è´´å›¾ç­‰åŸºæœ¬å…ƒç´ è¾…ä»¥ç€è‰²è€Œæ„æˆï¼Œè€Œä¸” QPainter ç±»å·²ç»æä¾›äº†è¿™äº›å…ƒç´ çš„ç»˜åˆ¶æ–¹æ³•ï¼ŒèŠ±ç‚¹æ—¶é—´æŒæ¡è¿™äº›æ–¹æ³•ï¼Œä¹Ÿå°±æŒæ¡äº† Qt 2D å›¾å½¢æ§ä»¶çš„åˆ¶ä½œï¼Œä½™ä¸‹çš„å°±æ˜¯å‹¤å­¦å¤šç»ƒã€å­°èƒ½ç”Ÿå·§äº†ã€‚\n\n\nç‚¹åœ¨ Qt ä¸­ä½¿ç”¨ QPoint æˆ– QPointF ç±»å‹æ¥è¡¨ç¤ºä¸€ä¸ªç‚¹çš„åæ ‡ã€‚\nQPoint å’Œ QPointF çš„åŒºåˆ«åœ¨äºï¼šQPoint ä½¿ç”¨æ•´å‹è¡¨ç¤º X å’Œ Y åæ ‡ï¼Œè€Œ QPointF ä½¿ç”¨ qreal æµ®ç‚¹ç±»å‹è¡¨ç¤º X å’Œ Y åæ ‡ã€‚ä¸‹é¢å¦‚æ— ç‰¹æ®Šè¯´æ˜ï¼Œæ‰€ä»‹ç»çš„æ–¹æ³•éƒ½é€‚ç”¨äºä¸¤ä¸ªç±»å‹ã€‚\nQPoint ç±»å‹è™½ç„¶æä¾›äº† isNull æ–¹æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œåœ¨ X å’Œ Y åæ ‡å‡ä¸º 0 æ—¶ï¼ŒisNull è¿”å› trueï¼Œå…¶ä»–æƒ…å†µè¿”å› falseã€‚åœ¨ä½¿ç”¨ QPoint::isNull æ–¹æ³•æ—¶è¦ç•™æ„è¿™ä¸ªæƒ…å†µã€‚\nå¯ä»¥ä½¿ç”¨ QPoint::manhattanLength æ–¹æ³•è¿”å› x å’Œ y åæ ‡çš„ç»å¯¹å€¼ä¹‹å’Œï¼ˆä¹Ÿå«æ›¼å“ˆé¡¿è·ç¦»ï¼‰ï¼Œå¦‚ï¼š\nQPoint pt(-2, 4);pt.manhattanLength(); // 6\n\nä¸¤ç‚¹è·ç¦»ä½¿ç”¨ä¸¤ç‚¹é—´çš„è·ç¦»å…¬å¼å¯ä»¥å¿«é€Ÿè®¡ç®—ä¸¤ç‚¹çš„è·ç¦»ï¼š\n$\\left | AB \\right |&#x3D;\\sqrt{ {(x1-x2)}^2 + {(y1-y2)}^2 }$\n#include &lt;QtMath&gt;QPointF pt1(-2, 4);QPointF pt2(4, 8);qreal distance = qSqrt(qPow(pt1.x() - pt2.x(), 2.0) + qPow(pt1.y() - pt2.y(), 2.0)); // 7.21\n\ndrawPoint ä¸ drawPointsdrawPoint ç”¨äºç»˜åˆ¶å•ä¸ªç‚¹ï¼š\nvoid drawPoint(const QPointF &amp;position)void drawPoint(const QPoint &amp;position)void drawPoint(int x, int y)\n\ndrawPoints ç”¨äºä¸€æ¬¡æ€§ç»˜åˆ¶å¤šä¸ªç‚¹ï¼š\nvoid drawPoints(const QPointF *points, int pointCount)void drawPoints(const QPolygonF &amp;points)void drawPoints(const QPoint *points, int pointCount)void drawPoints(const QPolygon &amp;points)\n\nQPolygonç»§æ‰¿è‡ª QVector&lt;QPoint&gt;ï¼Œè€ŒQPolygonFç»§æ‰¿è‡ª QVector&lt;QPointF&gt;ã€‚\næŠ˜çº¿æŠ˜çº¿æ˜¯ç”±å¤šä¸ªç‚¹ç›¸è¿ç»„æˆçš„éé—­åˆçº¿æ¡ï¼ˆç›¸é‚»çš„ä¸¤ä¸ªç‚¹è¿æ¥æˆç›´çº¿ï¼Œä½†é¦–ä½ä¸ç›¸è¿ï¼‰ã€‚\nvoid drawPolyline(const QPointF *points, int pointCount)void drawPolyline(const QPolygonF &amp;points)void drawPolyline(const QPoint *points, int pointCount)void drawPolyline(const QPolygon &amp;points)\n\nä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†æŠ˜çº¿çš„ä¸€ç§ç»˜åˆ¶æ–¹æ³•ï¼Œä¸ºäº†ä½¿çº¿æ¡æ›´åŠ åœ†æ¶¦ï¼Œæˆ‘ä»¬è¿˜è®¾ç½®äº†çº¿æ¡çš„èµ·è½ç¬”æ ·å¼å’Œç›¸äº¤ç‚¹æ ·å¼ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  painter.setPen(QPen(Qt::red, 6, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin));  QPolygon pg;  pg &lt;&lt; QPoint(20, 200) &lt;&lt; QPoint(80, 10) &lt;&lt; QPoint(140, 200) &lt;&lt; QPoint(200, 10);  painter.drawPolyline(pg);&#125;\n\n\nå¤šè¾¹å½¢å¤šè¾¹å½¢æ˜¯åœ¨æŠ˜çº¿çš„åŸºç¡€ä¸Šé¦–å°¾ç›¸è¿è€Œæ¥ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ç”»åˆ·å¯¹å¤šè¾¹å½¢çš„é—­åˆåŒºåŸŸè¿›è¡Œå¡«å……ã€‚\nä»ç„¶ä½¿ç”¨ä¸Šé¢ç¤ºä¾‹ä¸­å®šä¹‰çš„ç‚¹æ¥ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œè®¾ç½® QPainter ç”»åˆ·é¢œè‰²ä¸ºè“è‰²ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  painter.setPen(QPen(Qt::red, 6, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin));  QPolygon pg;  pg &lt;&lt; QPoint(20, 200) &lt;&lt; QPoint(80, 10) &lt;&lt; QPoint(140, 200) &lt;&lt; QPoint(200, 10);  painter.setBrush(Qt::blue);  painter.drawPolygon(pg);&#125;\n\n\nçº¿ä¸¤ç‚¹ï¼ˆQPoint æˆ– QPointFï¼‰å¯ä»¥ç¡®å®šä¸€æ¡ç›´çº¿ï¼ŒQt æä¾›äº† QLine å’Œ QLineF ç±»å‹æ¥æè¿°çº¿æ®µã€‚\nä½¿ç”¨ drawLine æ–¹æ³•å¯ä»¥ç»˜åˆ¶ä¸€æ¡ç›´çº¿ï¼Œä½¿ç”¨ drawLines æ–¹æ³•åˆ™å¯ä»¥ä¸€æ¬¡æ€§ç»˜åˆ¶å¤šæ¡ç›´çº¿ã€‚\nvoid drawLine(const QLineF &amp;line)void drawLine(const QLine &amp;line)void drawLine(int x1, int y1, int x2, int y2)void drawLine(const QPoint &amp;p1, const QPoint &amp;p2)void drawLine(const QPointF &amp;p1, const QPointF &amp;p2)void drawLines(const QLineF *lines, int lineCount)void drawLines(const QVector&lt;QLineF&gt; &amp;lines)void drawLines(const QPointF *pointPairs, int lineCount)void drawLines(const QVector&lt;QPointF&gt; &amp;pointPairs)void drawLines(const QLine *lines, int lineCount)void drawLines(const QVector&lt;QLine&gt; &amp;lines)void drawLines(const QPoint *pointPairs, int lineCount)void drawLines(const QVector&lt;QPoint&gt; &amp;pointPairs)\n\næ¤­åœ†ä¸åœ†æ¤­åœ†æ¤­åœ†æœ‰é•¿è½´ã€çŸ­è½´ã€ç„¦ç‚¹ç­‰æ¦‚å¿µï¼Œå»ºè®®åœ¨å­¦ä¹ ç»˜åˆ¶æ¤­åœ†ä¹‹å‰å…ˆäº†è§£æ¤­åœ†çš„è¿™äº›æ¦‚å¿µï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç«  å›é¡¾2Dç»˜å›¾çš„æ•°å­¦çŸ¥è¯† ä¸­çš„â€œæ¤­åœ†â€ç« èŠ‚ã€‚\nQt æä¾›äº† QPainter::drawEllipse æ–¹æ³•ç»˜åˆ¶æ¤­åœ†ï¼Œæ–¹æ³•åŸå‹å¦‚ä¸‹ï¼š\nvoid drawEllipse(const QRectF &amp;rectangle)void drawEllipse(const QRect &amp;rectangle)void drawEllipse(int x, int y, int width, int height)void drawEllipse(const QPointF &amp;center, qreal rx, qreal ry)void drawEllipse(const QPoint &amp;center, int rx, int ry)\n\ndrawEllipse æ–¹æ³•è™½ç„¶æœ‰ 5 ç§é‡è½½å½¢å¼ï¼Œä½†æ€»ä½“æ¥è¯´ï¼Œéƒ½æ˜¯ä¼ é€’ä¸€ä¸ªçŸ©å½¢åŒºåŸŸç»™ drawEllipse æ–¹æ³•ï¼Œå› ä¸ºæ ¹æ®ä¼ å…¥çš„çŸ©å½¢å¯ä»¥ç¡®å®šæ¤­åœ†çš„é•¿è½´ã€çŸ­è½´å’Œç„¦ç‚¹ï¼Œå…¶ä¸­é•¿è½´ç­‰äºçŸ©å½¢çš„é•¿ï¼ŒçŸ­è½´ç­‰äºçŸ©å½¢çš„é«˜ï¼Œ2 ä¸ªç„¦ç‚¹åˆ†åˆ«ä½äº 2 ä¸ªé•¿åŠè½´çš„ä¸­é—´ã€‚\nä¸‹é¢ç¤ºä¾‹å…ˆç»˜åˆ¶äº†ä¸€ä¸ªæµ…ç°è‰²çš„çŸ©å½¢ï¼ˆç”¨äºè§‚å¯Ÿæ¤­åœ†çš„ç»˜åˆ¶ï¼‰ï¼Œç„¶ååœ¨ä½¿ç”¨è¯¥çŸ©å½¢ç»˜åˆ¶æ¤­åœ†ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QRectF rect(50, 50, 300, 200);  // æµ…ç°è‰²çš„çŸ©å½¢  painter.setPen(Qt::lightGray);  painter.drawRect(rect);  // çº¢è‰²æ¤­åœ†  painter.setPen(Qt::red);  painter.drawEllipse(rect);&#125;\n\n\nåœ†åœ†æ˜¯æ¤­åœ†çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå½“æ¤­åœ†çš„é•¿è½´ç­‰äºçŸ­è½´æ—¶ï¼Œæ‰€ç»˜åˆ¶å‡ºæ¥çš„å°±æ˜¯åœ†äº†ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  // å®½ = é«˜  QRectF rect(50, 50, 300, 300);  painter.drawEllipse(rect);&#125;\n\nçŸ©å½¢åœ¨ Qt ä¸­ä½¿ç”¨ QRect å’Œ QRectF ç±»å‹æ¥è¡¨ç¤ºçŸ©å½¢ï¼Œåœ¨ä½¿ç”¨ QRect æ—¶éœ€è¦å…³æ³¨ QRect çš„å†å²é—ç•™é—®é¢˜ï¼Œè¯¦è§ï¼šç©è½¬Qt 2Dç»˜å›¾ä¹‹åæ ‡ç³» çš„â€œQRect é—ç•™é—®é¢˜â€ç« èŠ‚ã€‚\nçŸ©å½¢çš„åˆæ³•æ€§QRect å’Œ QRectF ç±»å‹å‡æä¾›äº† isEmptyã€isNullã€isValid æ–¹æ³•ï¼Œä½† QRect ç”±äºå†å²é—ç•™é—®é¢˜ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­å¯¹å„ä¸ªæ–¹æ³•çš„å®šä¹‰çœ‹èµ·æ¥æ¯”è¾ƒæ€ªå¼‚ï¼Œè¿›è¡Œé€»è¾‘ä¸‹é¢å¯¹å…¶è¿›è¡Œäº†é€»è¾‘è¿ç®—ï¼Œæ–¹ä¾¿ç†è§£ã€‚\nQRect\nisEmpty() == left() &gt; right() || top() &gt; bottom()            == left() &gt; left() + width() - 1 || top() &gt; top() + height() - 1            == 1 &gt; width() || 1 &gt; height()isNull()  == (right() == left() - 1 &amp;&amp; bottom() == top() - 1)            == (left() + width() - 1 == left() - 1 &amp;&amp; top() + height() - 1 == top() - 1)            == (width() == 0 &amp;&amp; height() == 0)isValid() == left() &lt;= right() &amp;&amp; top() &lt;= bottom()            == left() &lt;= left() + width() - 1 &amp;&amp; top() &lt;= top() + height() - 1            == 1 &lt;= width() &amp;&amp; 1 &lt;= height()\n\nQRectF\nisEmpty() == width() &lt;= 0 || height() &lt;= 0isNull()  == width() == 0 &amp;&amp; height() == 0isValid() == width() &gt; 0 &amp;&amp; height() &gt; 0\n\nä»ä¸Šè¿°å®šä¹‰å¯ä»¥å‘ç°ï¼Œå½“å‰çŸ©å½¢çš„å®½æˆ–é«˜ä¸ºè´Ÿæ•°æ—¶ï¼ŒisNull è¿”å›çš„å´æ˜¯ falseã€‚\ndrawRect ä¸ drawRects&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä½¿ç”¨ drawRect æ–¹æ³•ç»˜åˆ¶å•ä¸ªçŸ©å½¢ï¼Œä½¿ç”¨ drawRects æ–¹æ³•ä¸€æ¬¡æ€§ç»˜åˆ¶å¤šä¸ªçŸ©å½¢ã€‚\nvoid drawRect(const QRectF &amp;rectangle)void drawRect(int x, int y, int width, int height)void drawRect(const QRect &amp;rectangle)void drawRects(const QRectF *rectangles, int rectCount)void drawRects(const QVector&lt;QRectF&gt; &amp;rectangles)void drawRects(const QRect *rectangles, int rectCount)void drawRects(const QVector&lt;QRect&gt; &amp;rectangles)\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  painter.drawRect(QRect(20, 20, 200, 200));  painter.setPen(Qt::red);  QVector&lt;QRect&gt; rects;  rects &lt;&lt; QRect(60, 60, 200, 200)        &lt;&lt; QRect(100, 100, 200, 200);  painter.drawRects(rects);&#125;\n\n\nåœ†è§’çŸ©å½¢ä¸Šé¢ç»˜åˆ¶çš„çŸ©å½¢éƒ½ä¸æ˜¯åœ†è§’ï¼Œåœ¨ Qt ä¸­ç»˜åˆ¶åœ†è§’çŸ©å½¢æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\nQPainter::drawRoundedRectï¼Œæœ¬èŠ‚ä¸»è¦ä»‹ç»è¿™ç§æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ç»˜åˆ¶çš„åœ†è§’çŸ©å½¢çš„ 4 ä¸ªè§’çš„æ›²åº¦ä¸€æ ·ã€‚\nQPainter è¿˜æä¾›äº† drawRoundRect æ–¹æ³•ä¹Ÿå¯ä»¥ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼Œä½†è¯¥æ–¹æ³•å·²ç»è¢«æ ‡è®°ä¸ºå¼ƒç”¨ï¼Œå› æ­¤ä¸å»ºè®®ç»§ç»­ä½¿ç”¨ã€‚\n\nQPainter::drawPath é€šè¿‡è·¯å¾„çš„æ–¹å¼æ¥ç»˜åˆ¶åœ†è§’çŸ©å½¢ï¼Œè¿™ç§æ–¹æ³•ç»˜åˆ¶çš„åœ†è§’çŸ©å½¢çš„ 4 ä¸ªè§’çš„æ›²åº¦å¯ä»¥ä¸ä¸€æ ·ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨ä¸‹é¢ç« èŠ‚ä»‹ç»ã€‚\n\n\nvoid QPainter::drawRoundedRect(const QRectF &amp;rect, qreal xRadius, qreal yRadius, Qt::SizeMode mode = Qt::AbsoluteSize)\n\nä¸‹é¢ç¤ºä¾‹ä¸ºäº†æ¼”ç¤ºåœ†è§’çŸ©å½¢å’Œæ™®é€šçš„ç›´è§’çŸ©å½¢çš„ä¸åŒï¼Œå…ˆç»˜åˆ¶äº†ä¸€ä¸ªæµ…ç°è‰²ç›´è§’çŸ©å½¢ï¼Œç„¶åå†ç›¸åŒåŒºåŸŸç»˜åˆ¶äº†ä¸€ä¸ªçº¢è‰²åœ†è§’çŸ©å½¢ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QRectF rect(50, 50, 300, 200);  // å…ˆç»˜åˆ¶ä¸€ä¸ªæµ…ç°è‰²çš„çŸ©å½¢  painter.setPen(Qt::lightGray);  painter.drawRect(rect);  // ç„¶åç»˜åˆ¶ä¸€ä¸ªçº¢è‰²åœ†è§’çŸ©å½¢  //  qreal xRadius = 20;  qreal yRadius = 40;  painter.setPen(QPen(Qt::red, 1, Qt::DashDotLine));  painter.drawRoundedRect(rect, xRadius, yRadius);&#125;\n\n\n7.4 xRadius ä¸ yRadiusxRadius ä¸ yRadius å‚æ•°å†³å®šäº†åœ†è§’çš„æ›²åº¦ï¼ŒdrawRoundedRect æ–¹æ³•ç»˜åˆ¶çš„åœ†è§’çŸ©å½¢çš„å››ä¸ªè§’é‡‡ç”¨åŒä¸€ä¸ªæ›²åº¦ã€‚é‚£ä¹ˆ xRadius ä¸ yRadius å‚æ•°æ˜¯å¦‚ä½•å†³å®šåœ†è§’çš„æ›²åº¦çš„å‘¢ï¼Ÿ\nxRadius å‚æ•°å®é™…ä¸ºæ¤­åœ†çš„é•¿åŠè½´ï¼ŒyRadius å‚æ•°å®é™…ä¸ºæ¤­åœ†çš„çŸ­åŠè½´ã€‚\n\nå…³äºæ¤­åœ†çš„ç›¸å…³çŸ¥è¯†ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç«  å›é¡¾2Dç»˜å›¾çš„æ•°å­¦çŸ¥è¯† ä¸­çš„â€œæ¤­åœ†â€ç« èŠ‚ã€‚\n\né€šè¿‡ xRadius å’Œ yRadius å‚æ•°ç¡®å®šäº†æ¤­åœ†çš„é•¿è½´å’ŒçŸ­è½´ï¼Œé‚£ä¹ˆåœ¨ä»€ä¹ˆä½ç½®ç”»æ¤­åœ†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šè´´ç€å››ä¸ªé¡¶è§’åˆ†åˆ«ç”» 4 ä¸ªæ¤­åœ†æ¥ç¡®å®šæ›²åº¦ã€‚\nä¸‹é¢ä»£ç åœ¨ä¸Šé¢ç¤ºä¾‹çš„åŸºç¡€ä¸Šï¼Œåˆ†åˆ«åœ¨å·¦ä¸Šè§’å’Œå³ä¸‹è§’ä½ç½®ç”»äº† 2 ä¸ªæ·±é»„è‰²çš„æ¤­åœ†ï¼Œå¯ä»¥çœ‹åˆ°æ¤­åœ†ä¸åœ†è§’æ˜¯åˆšå¥½é‡åˆçš„ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QRectF rect(50, 50, 300, 200);  // å…ˆç»˜åˆ¶ä¸€ä¸ªæµ…ç°è‰²çš„çŸ©å½¢  painter.setPen(Qt::lightGray);  painter.drawRect(rect);  // ç„¶åç»˜åˆ¶ä¸€ä¸ªçº¢è‰²åœ†è§’çŸ©å½¢  //  qreal xRadius = 20;  qreal yRadius = 40;  painter.setPen(QPen(Qt::red, 1, Qt::DashDotLine));  painter.drawRoundedRect(rect, xRadius, yRadius);  // ~~~ æ–°å¢å¦‚ä¸‹ä»£ç  ~~~  painter.setPen(QPen(Qt::darkYellow, 1, Qt::DashLine));  painter.drawEllipse(QRectF(rect.left(), rect.top(), xRadius * 2, yRadius * 2));  painter.drawEllipse(QRectF(rect.right() - xRadius * 2, rect.bottom() - yRadius * 2, xRadius * 2, yRadius * 2));&#125;\n\n\næ¤­åœ†ä¸Šçš„ä¸€æ®µçº¿å¼§çº¿ï¼ˆArcï¼‰ä½¿ç”¨ drawArc æ–¹æ³•å¯ä»¥ç»˜åˆ¶ä¸€æ®µå¼§çº¿ï¼š\nvoid drawArc(const QRectF &amp;rectangle, int startAngle, int spanAngle)void drawArc(const QRect &amp;rectangle, int startAngle, int spanAngle)void drawArc(int x, int y, int width, int height, int startAngle, int spanAngle)\n\nåœ¨å‰é¢ä»‹ç»çš„æ¤­åœ†ç»˜åˆ¶æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æŒ‡å®šä¸€ä¸ªçŸ©å½¢åŒºåŸŸå°±å¯ä»¥ç»˜åˆ¶ä¸€ä¸ªæ¤­åœ†ï¼Œè€Œ drawArc æ–¹æ³•ç»˜åˆ¶æ›²çº¿çš„åˆ™æ˜¯è¯¥æ¤­åœ†ä¸Šçš„æŸä¸€æ®µå¼§çº¿ã€‚é€šè¿‡ startAngle å‚æ•°æŒ‡å®šå¼§çº¿çš„èµ·å§‹è§’åº¦ï¼ŒspanAngle å‚æ•°æŒ‡å®šå¼§çº¿æ‰€è·¨è¶Šçš„è§’åº¦ã€‚\néœ€è¦æ³¨æ„ï¼š\nåœ¨ QPainter çš„ç»˜å›¾å‡½æ•°ä¸­æŒ‡å®šè§’åº¦ï¼ˆä¸æ˜¯å¼§åº¦ï¼‰æ—¶ï¼Œä»¥æ­£ä¸‰ç‚¹é’Ÿæ–¹å‘ä¸º 0 åº¦ï¼Œè§’åº¦æŒ‰é€†æ—¶é’ˆæ–¹å‘å¢é•¿ï¼Œæ•´ä¸ªåœ†æŒ‰ 5760 åº¦è®¡ç®—ï¼ˆå³ 16 * 360ï¼‰ã€‚\nåœ¨ GDI+ ä¸­ï¼Œä¹Ÿæ˜¯ä»¥æ­£ä¸‰ç‚¹é’Ÿæ–¹å‘ä¸º 0 åº¦ï¼Œä½†è§’åº¦æ˜¯æŒ‰é¡ºæ—¶é’ˆæ–¹å‘å¢é•¿çš„ï¼Œä¸”æ•´ä¸ªåœ†æŒ‰ 360 åº¦è®¡ç®—ã€‚\nä¸‹é¢çš„ç¤ºä¾‹ç»˜åˆ¶ä¸€æ®µçº¢è‰²çš„å¼§çº¿ï¼Œå¼§çº¿ä» 30 åº¦æ–¹å‘å¼€å§‹ï¼Œå¼§çº¿è·¨è¶Šäº† 120 åº¦ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QRectF rect(50, 50, 300, 200);  // æµ…ç°è‰²çš„çŸ©å½¢  painter.setPen(Qt::lightGray);  painter.drawRect(rect);  // è“è‰²çš„æ¤­åœ†  painter.setPen(Qt::blue);  painter.drawEllipse(rect);  // çº¢è‰²çš„å¼§çº¿  painter.setPen(Qt::red);  painter.drawArc(rect, 30 * 16, 120 * 16);&#125;\n\nå®é™…ç»˜åˆ¶æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå¼§çº¿å®é™…æ˜¯æ¤­åœ†ä¸Šçš„æŸä¸€æ®µæ›²çº¿ã€‚\né¥¼çŠ¶å›¾ï¼ˆPieï¼‰ä½¿ç”¨ drawPie å¯ä»¥ç»˜åˆ¶é¥¼çŠ¶å›¾ï¼Œé¥¼çŠ¶å›¾æ˜¯åœ¨ä¸Šé¢å¼§çº¿ï¼ˆArcï¼‰çš„åŸºç¡€ä¸Šï¼Œåˆ†åˆ«å°†å¼§çº¿çš„é¦–å°¾ä¸ä¸­å¿ƒç‚¹ç›¸è¿è€Œæ¥ï¼Œå› æ­¤ drawPie æ–¹æ³•çš„å‚æ•°ä¹Ÿä¸ drawArc æ–¹æ³•ä¸€æ ·ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;QPainter åœ¨ç»˜åˆ¶é¥¼çŠ¶å›¾æ—¶ï¼Œä¼šä½¿ç”¨å½“å‰çš„ç”»åˆ·å¡«å……é¥¼çŠ¶å›¾ã€‚\nä¸‹é¢çš„ç¤ºä¾‹ç»˜åˆ¶äº†ä¸€ä¸ªå…·æœ‰çº¢è‰²è½®å»“ã€é»„è‰²å¡«å……çš„é¥¼çŠ¶å›¾ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QRectF rect(50, 50, 300, 200);  // æµ…ç°è‰²çš„çŸ©å½¢  painter.setPen(Qt::lightGray);  painter.drawRect(rect);  // è“è‰²çš„æ¤­åœ†  painter.setPen(Qt::blue);  painter.drawEllipse(rect);  // é¥¼çŠ¶å›¾ï¼šçº¢è‰²çš„è½®å»“ï¼Œé»„è‰²çš„å¡«å……  painter.setPen(Qt::red);  painter.setBrush(Qt::yellow);  painter.drawPie(rect, 30 * 16, 120 * 16);&#125;\n\n\nå’Œå¼¦å›¾ï¼ˆChrodï¼‰\næ­¤å¤„å°† Chrod æŒ‰ç…§è‹±æ–‡ç›´è¯‘æˆâ€œå’Œå¼¦â€å¯èƒ½ä¸å¤ªå‡†ç¡®\n\nå’Œå¼¦å›¾ï¼ˆChrodï¼‰ä¸é¥¼çŠ¶å›¾ï¼ˆPieï¼‰ä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨å¼§çº¿çš„åŸºç¡€ä¸Šå˜åŒ–è€Œæ¥ï¼Œå°†å¼§çº¿çš„é¦–å°¾ç›¸æ¥å°±å¯å¾—åˆ°å’Œå¼¦å›¾ï¼ˆChrodï¼‰ã€‚\nä½¿ç”¨ drawChord æ–¹æ³•å¯ä»¥ç»˜åˆ¶å’Œå¼¦å›¾ï¼ŒdrawChord æ–¹æ³•çš„å‚æ•°ä¸ drawArc ä¸€æ ·ã€‚\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QRectF rect(50, 50, 300, 200);  // æµ…ç°è‰²çš„çŸ©å½¢  painter.setPen(Qt::lightGray);  painter.drawRect(rect);  // è“è‰²çš„æ¤­åœ†  painter.setPen(Qt::blue);  painter.drawEllipse(rect);  // å’Œå¼¦å›¾ï¼šçº¢è‰²çš„è½®å»“ï¼Œé»„è‰²çš„å¡«å……  painter.setPen(Qt::red);  painter.setBrush(Qt::yellow);  painter.drawChord(rect, 30 * 16, 120 * 16);&#125;\n\n\nè·¯å¾„å‰é¢ä»‹ç»äº†çº¿ã€çŸ©å½¢ã€æ¤­åœ†ã€åœ†ã€å¼§çº¿ã€é¥¼çŠ¶å›¾ç­‰å½¢çŠ¶ï¼Œè·¯å¾„åˆ™æ˜¯ç”±è‹¥å¹²ä¸ªè¿™äº›å½¢çŠ¶ï¼ˆä¸é™äºè¿™äº›å½¢çŠ¶ï¼‰ç»„æˆçš„ä¸€ä¸ªé›†åˆï¼Œè·¯å¾„å¯ä»¥æ˜¯é—­åˆçš„ï¼Œä¹Ÿå¯ä»¥ä¸é—­åˆã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;åœ¨ Qt ä¸­ä½¿ç”¨QPainterPathå¯¹è±¡æ¥å®šä¹‰ä¸€ä¸ªè·¯å¾„ï¼Œå¹¶ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å‘è·¯å¾„ä¸­æ·»åŠ å½¢çŠ¶ï¼š\n\naddEllipse æ·»åŠ ä¸€ä¸ªæ¤­åœ†æˆ–åœ†åˆ°è·¯å¾„ä¸­\naddRect æ·»åŠ ä¸€ä¸ªçŸ©å½¢åˆ°è·¯å¾„ä¸­\naddRoundedRect æ·»åŠ ä¸€ä¸ªåœ†è§’çŸ©å½¢åˆ°è·¯å¾„ä¸­\naddText å°†ç”¨æŒ‡å®šå­—ä½“ç»˜åˆ¶çš„æ–‡ä»¶æ‰€å½¢æˆçš„é—­åˆå½¢çŠ¶æ·»åŠ åˆ°è·¯å¾„ä¸­\nlineTo æ·»åŠ ä¸€æ¡ç›´çº¿åˆ°è·¯å¾„ä¸­\narcTo æ·»åŠ ä¸€æ®µåœ†å¼§åˆ°è·¯å¾„ä¸­arcTo çš„åŸå‹å¦‚ä¸‹ï¼Œå’Œ drawArc æ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿéœ€è¦æŒ‡å®šèµ·å§‹è§’åº¦å’Œè·¨è¶Šè§’åº¦ï¼Œä½†ä¸ drawArc æ–¹æ³•ä¸åŒçš„æ˜¯ï¼ŒarcTo æ–¹æ³•æŒ‡å®šçš„è§’åº¦æ˜¯ä»¥ 360 åº¦æ•´åœ†è®¡ç®—çš„ï¼Œå› æ­¤ä¸éœ€è¦ä¹˜ä»¥ 16ã€‚void QPainterPath::arcTo(const QRectF &amp;rectangle, qreal startAngle, qreal sweepLength)\ncubicTo æ·»åŠ ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”æ›²çº¿åˆ°è·¯å¾„ä¸­\nquadTo æ·»åŠ ä¸€ä¸ªäºŒæ¬¡è´å¡å°”æ›²çº¿åˆ°è·¯å¾„ä¸­\n\nåœ¨ä¸Šé¢æ–¹æ³•ä¸­ï¼Œå‘½åæ ¼å¼ä¸ºâ€œ*Toâ€çš„æ–¹æ³•ï¼Œå¦‚ lineToã€arcToã€quadTo ç­‰ï¼Œéƒ½æ˜¯åŸºäºâ€œå½“å‰ä½ç½®â€æ¥æ·»åŠ å½¢çŠ¶çš„ï¼Œé»˜è®¤çš„å½“å‰ä½ç½®ä¸ºå½“å‰çš„åæ ‡åŸç‚¹ (0,0) å¤„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ QPainterPath::currentPosition æ–¹æ³•è·å–å½“å‰ä½ç½®ã€‚\n\næˆ‘ä»¬çŸ¥é“å¯ä»¥é€šè¿‡ QPainter::translate ç­‰æ–¹æ³•å˜æ¢é€»è¾‘åæ ‡ï¼ŒQPainterPath çš„å½“å‰ä½ç½®ä¹Ÿä¼šå—é€»è¾‘åæ ‡å˜æ¢çš„å½±å“ã€‚\n\nåœ¨ä½¿ç”¨ lineTo æ·»åŠ ç›´çº¿åˆ°è·¯å¾„ä¸­æ—¶ï¼Œåªæœ‰æŒ‡å®šç›´çº¿çš„ç»“æŸç‚¹ï¼Œä¼šè‡ªåŠ¨å°†å½“å‰ä½ç½®ä¸ç»“æŸç‚¹ç›¸è¿ï¼Œå½¢æˆä¸€æ¡ç›´çº¿ï¼Œå¹¶é‡è®¾å½“å‰ä½ç½®ä¸ºè¯¥ç»“æŸç‚¹ã€‚\nåœ¨ä½¿ç”¨ arcToã€cubicToã€quadTo æ·»åŠ æ›²çº¿åˆ°åˆ°è·¯å¾„ä¸­æ—¶ï¼Œä¼šè‡ªåŠ¨å°†å½“å‰ä½ç½®ä¸æ›²çº¿èµ·ç‚¹ç›¸è¿ï¼Œå¹¶é‡è®¾å½“å‰ä½ç½®ä¸ºæ›²çº¿ç»“æŸç‚¹ã€‚\næˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç¤ºä¾‹æ¥è¯´æ˜å½“å‰ä½ç½®å’Œç»“æŸç‚¹çš„å…³ç³»ï¼Œä¸‹é¢ç¤ºä¾‹å…ˆæ·»åŠ ä¸€æ¡ç›´çº¿ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªæ›²çº¿ï¼Œæœ€å¥½å†æ·»åŠ ä¸€æ¡ç›´çº¿ï¼š\n// ç¤ºä¾‹ï¼šå½“å‰ä½ç½®void Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QPainterPath path;  path.lineTo(80, 50);  path.arcTo(QRectF(50, 50, 300, 200), 30, 120);  path.lineTo(200, 200);  painter.drawPath(path);&#125;\n\nå®é™…æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nå¡«å……è§„åˆ™è·¯å¾„å¯ä»¥æ˜¯é—­åˆçš„ä¹Ÿå¯ä»¥æ˜¯éé—­åˆçš„ï¼Œä¾‹å¦‚ä¸Šé¢çš„å½“å‰ä½ç½®ç¤ºä¾‹ä¸­çš„è·¯å¾„æ˜¯éé—­åˆçš„ï¼Œä½†å¦‚æœä¸º QPainter æŒ‡å®šäº†ç”»åˆ·ï¼ŒQPainter ä¼šè‡ªåŠ¨ä½¿ç”¨ä¸€æ¡ç›´çº¿è¿æ¥è¯¥éé—­åˆå½¢çŠ¶çš„é¦–å°¾ï¼Œä½¿å…¶é—­åˆï¼Œè¿›è€Œä½¿ç”¨ç”»åˆ·å¯¹å…¶å¡«å……ã€‚\nQPainterPath æœ‰ä¸¤ç§å¡«å……è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡QPainterPath::setFillRuleæ–¹æ³•æ¥è®¾ç½®å¡«å……è§„åˆ™ï¼š\n\nQt::OddEvenFill\nå¥‡å¶å¡«å……è§„åˆ™ï¼Œä»ä¸€ç‚¹å‘å›¾å½¢å¤–å¼•ä¸€æ¡æ°´å¹³çº¿ï¼Œè¯¥çº¿å’Œå›¾å½¢çš„è¾¹çº¿ç›¸äº¤ï¼Œå¦‚æœäº¤ç‚¹çš„ä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œåˆ™è¯¥ç‚¹åœ¨å›¾å½¢ä¸­ã€‚\n\nQt::WindingFilléé›¶å¼¯æ›²è§„åˆ™ï¼Œä»ä¸€ç‚¹å‘å›¾å½¢å¤–å¼•ä¸€æ¡æ°´å¹³çº¿ï¼Œè¯¥çº¿ä¸å›¾å½¢çš„è¾¹çº¿ç›¸äº¤ã€‚å¦‚æœè¾¹çº¿æ˜¯é¡ºæ—¶é’ˆç»˜åˆ¶çš„ï¼Œåˆ™è®°ä¸º 1ï¼Œå¦‚æœè¾¹çº¿æ˜¯é€†æ—¶é’ˆç»˜åˆ¶çš„ï¼Œåˆ™è®°ä¸º-1ã€‚æœ€åå°†æ‰€æœ‰ç»“æœç›¸åŠ çš„å’Œä¸º 0 åˆ™è¯¥ç‚¹åœ¨å›¾å½¢ä¸­ã€‚ï¼ˆçŸ©å½¢å’Œæ¤­åœ†éƒ½æŒ‰é¡ºæ—¶é’ˆç»˜åˆ¶ï¼‰\n\n\n\næ–‡æœ¬æ–‡å­—æœ‰é¢œè‰²ã€å­—ä½“ã€æ ·å¼ç­‰å±æ€§ã€‚\nQt ä¸ä»…å¯ä»¥ç»˜åˆ¶çº¯è‰²çš„æ–‡æœ¬ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ¸å˜è‰²ã€å›¾ç‰‡ç­‰å†…å®¹æ¥å¡«å……æ–‡å­—ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ç”¨æ¥ç»˜åˆ¶æ¸å˜è‰²çš„æ–‡å­—ï¼š\n\nå…ˆå°†æ–‡å­—è½¬å˜æˆè·¯å¾„ï¼ˆå‚è€ƒQPainterPath::addTextï¼‰ï¼Œç„¶åä½¿ç”¨æ¸å˜ç”»åˆ·å¡«å……è¯¥è·¯å¾„ã€‚\nç›´æ¥ä¸º QPen è®¾ç½®æ¸å˜ç”»åˆ·ã€‚\n\né€šè¿‡ä¸º QPainter è®¾ç½® QFont å¯¹è±¡æ¥ä¿®æ”¹å­—ä½“ï¼Œå­—ä½“æœ‰å­—ä½“æ—ã€å­—å·ã€ç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿ã€åˆ é™¤çº¿ç­‰æ ·å¼æˆ–æ•ˆæœï¼š\nQFont font;font.setFamilies(&#123;&quot;Microsoft YaHei&quot;, &quot;Arial&quot;&#125;);  // å­—ä½“æ—font.setPixelSize(26);                  // å­—å·font.setBold(true);                     // ç²—ä½“font.setItalic(true);                   // æ–œä½“font.setUnderline(true);                // ä¸‹åˆ’çº¿font.setStrikeOut(true);                // åˆ é™¤çº¿painter.setFont(font);\n\nä½¿ç”¨ QPainter::drawText æ–¹æ³•ç»˜åˆ¶æ–‡æœ¬ï¼Œè¯¥æ–¹æ³•åŸå‹æœ‰å¾ˆå¤šç§ï¼Œä½†å¤§å¤šæ˜¯é€šè¿‡ä¸‹é¢ 2 ä¸ªåŸå‹è¿›è¡Œé‡è½½è€Œæ¥çš„ï¼š\nvoid QPainter::drawText(const QRectF &amp;rectangle, int flags, const QString &amp;text, QRectF *boundingRect = nullptr)void QPainter::drawText(const QRectF &amp;rectangle, const QString &amp;text, const QTextOption &amp;option = QTextOption())\n\né—´è·é—´è·åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\n\næ¯ä¸ªå­—ç¬¦çš„é—´è·ï¼Œå¦‚å•ä¸ªè‹±æ–‡å­—æ¯æˆ–å•ä¸ªæ±‰å­—çš„é—´è·ï¼Œç§°ä¸º Letter Spacingã€‚\næ¯ä¸ªè‹±æ–‡å•è¯çš„é—´è·ï¼Œç§°ä¸º Word Spacingã€‚\n\nå•è¯é—´è·ä½¿ç”¨ QFont::setWordSpacing å’Œ QFont::wordSpacing æ–¹æ³•è®¾ç½®å’Œè·å–å•è¯çš„é—´è·ã€‚\nvoid QFont::setWordSpacing(qreal spacing)\n\nå½“ setWordSpacing å‚æ•°å¤§äº 0 æ—¶ï¼Œå•è¯é—´è·å¢åŠ ç›¸åº”çš„åƒç´ ï¼›å°äº 0 æ—¶ï¼Œé—´è·å‡å°‘ç›¸åº”çš„åƒç´ ã€‚\nå­—ç¬¦é—´è·ä½¿ç”¨ QFont::setLetterSpacing å’Œ QFont::letterSpacing æ–¹æ³•è®¾ç½®å’Œè·å–å­—ç¬¦çš„é—´è·ã€‚\nvoid QFont::setLetterSpacing(QFont::SpacingType type, qreal spacing)\n\nå­—ç¬¦é—´è·æ”¯æŒç™¾åˆ†æ¯”å’Œç»å¯¹å€¼ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼Œé€šè¿‡ QFont::SpacingType æšä¸¾ç±»å‹æŒ‡å®šã€‚\n\nQFont::PercentageSpacing\nç™¾åˆ†æ¯”æ–¹å¼ã€‚å€¼ä¸º 100 æ—¶è¡¨ç¤ºä¸åšä»»ä½•æ”¹å˜ï¼Œ200 è¡¨ç¤ºé—´è·æ‰©å¤§åˆ°åŸæ¥çš„ä¸€å€ï¼Œ-200 è¡¨ç¤ºé—´è·ç¼©å°åˆ°åŸæ¥çš„ä¸€å€ã€‚\n\nQFont::AbsoluteSpacing\nç»å¯¹å€¼æ–¹å¼ï¼Œä¸è®¾ç½®å•è¯é—´è·çš„æ–¹å¼ä¸€æ ·ã€‚\n\n\nå°å‹å¤§å†™å­—æ¯å°å‹å¤§å†™å­—æ¯ï¼ˆè‹±è¯­ï¼šsmall capitalsï¼Œç®€ç§° small capsï¼‰æ˜¯è¥¿æ–‡å­—ä½“è®¾è®¡ä¸­çš„ä¸€ç§å­—ç¬¦å½¢å¼ã€‚è¿™äº›å­—æ¯çš„å½¢çŠ¶ï¼ˆå­—å½¢ï¼‰å’Œå¤§å†™å­—æ¯ç›¸åŒä½†å°ºå¯¸è¾ƒå°ï¼Œæ¯”å¦‚åœ¨è¡¨ç¤ºé”®ç›˜å¿«æ·é”®çš„æ—¶å€™ä¹Ÿå¸¸ç”¨å°å‹å¤§å†™å­—æ¯ã€‚\nåœ¨ Qt ä¸­é€šè¿‡è®¾ç½® QFont çš„ Capitalization æ ·å¼ä¸º SmallCaps é£æ ¼æ¥ä½¿ç”¨å°å‹å¤§å†™å­—æ¯æ ·å¼ï¼Œå¦‚ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QPen pen;  pen.setBrush(Qt::red);  pen.setWidthF(20);  QFont font;  font.setPixelSize(26);  font.setCapitalization(QFont::SmallCaps);                            ^^^^^^^^^^^^^  painter.setFont(font);  painter.drawText(10, 30, &quot;The Keyboard Shortcut is Ctrl + Shift + K&quot;);&#125;\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆç•™æ„å…¨å°å†™çš„â€œisâ€å’Œå…¶ä»–é¦–å­—æ¯å¤§å†™çš„å•è¯ï¼‰ï¼š\n\nCapitalization è¿˜æ”¯æŒè®¾ç½®å¦‚ä¸‹é£æ ¼ï¼š\n\nQFont::MixedCase é»˜è®¤ï¼Œä¸åšæ›´æ”¹\nQFont::AllUppercase å…¨éƒ¨å°å†™\nQFont::AllLowercase å…¨éƒ¨å¤§å†™\nQFont::Capitalize é¦–å­—æ¯å¤§å†™\n\nè®¡ç®—ç»˜åˆ¶æ–‡æœ¬æ‰€éœ€ç©ºé—´æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è®¡ç®—æŒ‰æŒ‡å®šå­—ä½“ç»˜åˆ¶æ–‡æœ¬æ‰€éœ€çš„ç©ºé—´ã€‚\næ–¹å¼ä¸€ï¼šä½¿ç”¨ QPainter::drawText\nä½¿ç”¨å¦‚ä¸‹å‡½æ•°åŸå‹ï¼š\nvoid QPainter::drawText(const QRectF &amp;rectangle, int flags, const QString &amp;text, QRectF *boundingRect = nullptr)\n\nå°†å‚æ•° rectangle çš„ å®½å’Œé«˜éƒ½è®¾ç½®ä¸º 0ï¼Œå‡½æ•°ä¼šé€šè¿‡ boundingRect å‚æ•°è¿”å›ç»˜åˆ¶æ–‡æœ¬æ‰€éœ€è¦çš„å®½å’Œé«˜ã€‚\næ–¹å¼äºŒï¼šä½¿ç”¨ QFontMetricsF\nQFontMetrics æˆ– QFontMetricsF å¯ä»¥æŒ‰ç…§æŒ‡å®šå­—ä½“æ¥è®¡ç®—ç»™å®šå­—ç¬¦å’Œå­—ç¬¦ä¸²çš„å®½å’Œé«˜ã€‚\nè¿™ç§æ–¹å¼çš„å¼Šç«¯åœ¨äºï¼šä¸èƒ½å°†ç»˜åˆ¶é£æ ¼ï¼ˆå¦‚å±…ä¸­å¯¹é½ã€å¤šè¡Œæ–‡æœ¬ï¼‰å¸¦å…¥å…¶ä¸­è¿›è¡Œè®¡ç®—ï¼Œåªèƒ½è®¡ç®—ç»™å®šçš„å•è¡Œå­—ç¬¦ä¸²æŒ‰ç…§æŒ‡å®šçš„å­—ä½“æ˜¾ç¤ºæ‰€éœ€çš„å®½é«˜ã€‚\nQFont font;font.setPixelSize(36);QFontMetricsF fm(font);qDebug() &lt;&lt; fm.horizontalAdvance(&quot;Hello World&quot;); // å­—ç¬¦ä¸²æ‰€å å®½åº¦qDebug() &lt;&lt; fm.height(); // å­—ä½“çš„é«˜åº¦\n\nè´´å›¾QPainter æä¾›äº† drawPixmap å’Œ drawImage ä¸¤ä¸ªå¸¸ç”¨çš„è´´å›¾å‡½æ•°ï¼ŒdrawPixmap ç”¨äºç»˜åˆ¶ QPixmap å¯¹è±¡ï¼Œè€Œ drawImage ç”¨äºç»˜åˆ¶ QImage å¯¹è±¡ï¼ŒQImage ä¸ QPixmap é—´æ˜¯å¯ä»¥ç›¸äº’è½¬åŒ–ï¼Œå› æ­¤ drawPixmap å’Œ drawImage æ–¹æ³•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚\ndrawPixmap æ–¹æ³•åœ¨å±å¹•ä¸Šç»˜åˆ¶é€Ÿåº¦æ›´å¿«ï¼Œè€Œ drawImage æ–¹æ³•åˆ™åœ¨ QPrinter å’Œå…¶ä»–è®¾å¤‡ä¸Šç»˜åˆ¶çš„æ›´å¿«ã€‚\néœ€è¦æ³¨æ„ï¼šQPicture å¯¹è±¡ç”¨äºè®°å½•ç»˜åˆ¶æ­¥éª¤ï¼Œè€Œ QPainter::drawPicture æ–¹æ³•ç”¨äºé‡å¤ QPicture å¯¹è±¡æ‰€è®°å½•çš„æ­¥éª¤ã€‚\ndrawPixmap å’Œ drawImage æ–¹æ³•æœ‰å¤šä¸ªé‡è½½çš„åŸå‹ï¼Œå…¶å‚æ•°ä»å·¦åˆ°å³ä¾æ¬¡ä¸ºï¼š\nç›®æ ‡åŒºåŸŸ -&gt; QPixmap/QImage -&gt; æºåŒºåŸŸ\n\nç›®æ ‡åŒºåŸŸä¼šåº”ç”¨å½“å‰ QWidget çš„ devicePixelRatioï¼Œè€ŒæºåŒºåŸŸåˆ™ä¸ devicePixelRatio æ— å…³ï¼Œå…·ä½“å‚è€ƒ Qtå¼€å‘è·¯ä¸Šçš„â€œç»Šè„šçŸ³â€ä¸â€œå«è„šçŸ³â€\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"åŸºäºQtçš„æ— è¾¹æ¡†çª—ä½“å®ç°","url":"/post/2402568381.html","content":"Qt è™½ç„¶æä¾›äº†è¯¸å¦‚ Qt::FramelessWindowHint ä¹‹ç±»çš„å±æ€§å¯ä»¥ç§»é™¤çª—ä½“çš„è¾¹æ¡†ï¼Œä½†æ˜¯ç§»é™¤è¾¹æ¡†ä¹‹åï¼Œçª—ä½“çš„ä¸€äº›é»˜è®¤è¡Œä¸ºåŒæ—¶ä¹Ÿè¢«ç§»é™¤äº†ï¼Œå¦‚é¼ æ ‡æ‹–åŠ¨æ”¹å˜å¤§å°ã€åŒå‡»æ ‡é¢˜æ æœ€å¤§åŒ–ç­‰ï¼Œè¿™äº›è¡Œä¸ºéœ€è¦å¼€å‘è€…è‡ªå·±æ¥å®ç°ã€‚\næœ¬æ–‡ä¸»è¦ä»‹ç»å®ç°æ— è¾¹æ¡†çª—ä½“çš„å‡ ç§æ–¹æ¡ˆï¼Œå¹¶åœ¨æœ€ååˆ†äº«äº†ä½œè€…å®ç°çš„æ–¹æ¡ˆã€‚\nç¬”è€…è®¤ä¸ºï¼Œä¸€ä¸ªå®Œç¾çš„æ— è¾¹æ¡†çª—ä½“è§£å†³æ–¹æ¡ˆéœ€è¦æ”¯æŒå¦‚ä¸‹åŠŸèƒ½ï¼š\n\næ”¯æŒé€šè¿‡ä½¿ç”¨é¼ æ ‡æ‹–æ‹½æ¥æ”¹å˜çª—ä½“ä½ç½®å’Œå¤§å°ï¼›\næ”¯æŒåŒå‡»æ ‡é¢˜æ æœ€å¤§åŒ–çª—ä½“å’Œè¿˜åŸçª—ä½“ï¼›\næ”¯æŒ Windows Areo Snap ç‰¹æ€§ï¼›\næ”¯æŒç³»ç»Ÿé˜´å½±ï¼›\næ”¯æŒè·¨ä¸åŒ DPI çš„å±å¹•æ‹–æ‹½ï¼›\né€‚åº”åˆ†è¾¨ç‡å’Œ DPI æ”¹å˜ï¼›\n\n\n\nåœ¨ Qt ä¸­å®ç°æ— è¾¹æ¡†çª—ä½“æœ‰ 2 ç§æ–¹æ¡ˆï¼š\nHook æ–¹æ¡ˆé€šè¿‡é‡è½½ nativeEvent å‡½æ•°æ‹¦æˆª Windows æ¶ˆæ¯ï¼ˆå¦‚ WM_NCHITTESTï¼‰æ¥å®ç°ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š\n\nç»™çª—ä½“è®¾ç½® WS_THICKFRAME | WS_CAPTION å±æ€§ä»è€Œè¿˜åŸçª—ä½“è¾¹æ¡†å’Œæ ‡é¢˜æ ï¼Œè¿™æ ·çª—ä½“å°±å¯ä»¥æ¥æ”¶åˆ° WM_NCHITTEST æ¶ˆæ¯ã€‚\nåœ¨ WM_NCCALCSIZE æ¶ˆæ¯å¤„ç†ä¸­å†ç§»é™¤è¾¹æ¡†å’Œæ ‡é¢˜æ ã€‚\nåœ¨ WM_NCHITTEST æ¶ˆæ¯å¤„ç†ä¸­é€šè¿‡åˆ¤æ–­é¼ æ ‡ä½ç½®æ¥è®¾ç½®é¼ æ ‡è¡Œä¸ºï¼ˆ HTLEFT, HTRIGHT ç­‰ï¼‰ã€‚\n\nè¿™ç§æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ”¯æŒWindows Areo Snapå’Œç³»ç»Ÿé˜´å½±çš„ç‰¹æ€§ï¼Œä½†æ˜¯é’ˆå¯¹ Windows æ¶ˆæ¯å¤„ç†èµ·æ¥å¾ˆå¤æ‚è€Œä¸”éœ€è¦å…¼å®¹ Qt çš„å„ä¸ªç‰ˆæœ¬ï¼Œç›®å‰æˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªé€šè¿‡è¿™ç§æ–¹æ¡ˆæ¥å®Œç¾å®ç°æ— è¾¹æ¡†çš„è§£å†³æ–¹æ¡ˆã€‚\næ®æˆ‘æ‰€çŸ¥ï¼Œæœ‰å¦‚ä¸‹çš„å¼€æºé¡¹ç›®æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°çš„ï¼Œä½†éƒ½æœ‰äº›è®¸é—®é¢˜ï¼Œå¦‚ä¸æ”¯æŒè·¨ä¸åŒ DPI å±å¹•æ‹–æ‹½ã€ä¸èƒ½é€‚åº”åˆ†è¾¨ç‡å’Œ DPI æ”¹å˜ã€WM_NCHITTESTæœ‰æ—¶æ— å“åº”ç­‰ã€‚å¦å¤–ï¼Œåœ¨è®¾ç½®äº†èƒŒæ™¯é€æ˜å±æ€§ä¹‹åï¼ˆå¦‚ Qt::WA_TranslucentBackgroundï¼‰ï¼Œç³»ç»Ÿé˜´å½±ç‰¹æ€§ä¹Ÿå°†æ¶ˆå¤±ã€‚\n\nqtdevs&#x2F;FramelessHelper: https://github.com/qtdevs/FramelessHelper\nwangwenx190&#x2F;framelesshelper: https://github.com/wangwenx190/framelesshelper\n\nçº¯ Qt æ–¹æ¡ˆè¿™ç§æ–¹æ¡ˆä¸ Hook windows çš„ WM_NCHITTESTã€WM_NCCALCSIZE æ¶ˆæ¯ï¼Œä¹Ÿä¸æ”¹å˜çª—ä½“æ ·å¼ï¼Œé€šè¿‡çº¯ Qt æ–¹å¼å®ç°ã€‚é€šè¿‡å¯¹æ¯ä¸ª Widget è®¾ç½®MouseTrackingï¼Œæ¥ä½¿æ¯ä¸ª Widget éƒ½å¯ä»¥å“åº”é¼ æ ‡äº‹ä»¶ï¼ˆmouseMoveEventã€mousePressEventã€mouseReleaseEvent ç­‰ï¼‰ï¼Œç„¶åè¿™äº›äº‹ä»¶ä¸­åˆ¤æ–­é¼ æ ‡ä½ç½®æ¥è®¾ç½®é¼ æ ‡çš„å½¢çŠ¶å’Œè¡Œä¸ºã€‚\nè¿™ç§æ–¹å¼è™½ç„¶å¯¹é¼ æ ‡ä½ç½®çš„åˆ¤æ–­é€»è¾‘æ¯”è¾ƒç¹çï¼Œä½†å…¼å®¹æ€§è¾ƒå¥½ï¼Œè¾ƒçº¯ç²¹ï¼Œä¸éœ€è¦å¤„ç† Windows çš„å„ä¸ªæ¶ˆæ¯ã€‚\nQt-FramelessWindowğŸ‘‰ æˆ‘æ ¹å€¾å‘äºä½¿ç”¨çº¯ Qt æ–¹æ¡ˆï¼Œç®€å•ã€ç¨³å®šã€å…¼å®¹æ€§å¥½ï¼Œä¸ç”¨å…³æ³¨é‚£äº›çƒ¦äººçš„ Windows æ¶ˆæ¯ã€‚é’ˆå¯¹è¯¥æ–¹æ¡ˆçš„å®ç°ï¼Œå¯ä»¥å‚è€ƒç¬”è€…çš„å¼€æºé¡¹ç›®ã€Qt-FramelessWindowã€‘ï¼Œç›®å‰å¯ä»¥æ”¯æŒä¸Šè¿°é™¤â€œWindows Areo Snapâ€å’Œâ€œç³»ç»Ÿé˜´å½±â€ç‰¹æ€§ä¹‹å¤–çš„æ‰€æœ‰æ— è¾¹æ¡†çª—ä½“çš„ç‰¹æ€§ï¼Œè€Œä¸”ä»…æœ‰ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚\n\nQt-FramelessWindow: https://github.com/winsoft666/Qt-FramelessWindow\n\n\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"IDA Proé€ŸæŸ¥æ‰‹å†Œ","url":"/post/3247297083.html","content":"IDA Pro æ˜¯é¡¶çº§çš„é™æ€åæ±‡ç¼–ä¸é€†å‘å·¥ç¨‹å¹³å°ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬å¼ºå¤§çš„è‡ªåŠ¨ä»£ç åˆ†æã€ç”Ÿæˆäº¤äº’å¼æµç¨‹å›¾ã€è·¨å¤„ç†å™¨æ¶æ„æ”¯æŒï¼Œä»¥åŠå°†æ±‡ç¼–ä»£ç åç¼–è¯‘ä¸ºé«˜çº§è¯­è¨€ä¼ªä»£ç ï¼ˆHex-Rays åç¼–è¯‘å™¨ï¼‰ã€‚å®ƒå…è®¸ç”¨æˆ·æ·±åº¦åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ç»“æ„ã€è¯†åˆ«å‡½æ•°ä¸é€»è¾‘ã€è¿›è¡Œæ¼æ´ç ”ç©¶ï¼Œå¹¶é€šè¿‡è„šæœ¬å’Œæ’ä»¶ç³»ç»Ÿå®ç°åŠŸèƒ½æ‰©å±•ã€‚\n\n\nå¸¸ç”¨å¿«æ·é”®ä¸‹é¢åˆ—ä¸¾çš„å¿«æ·é”®å¾ˆå¤šä¸æ˜¯å¿…é¡»è®°ä½çš„ï¼Œåœ¨ UI ç•Œé¢ä¸Šé€šè¿‡é¼ æ ‡ç‚¹å‡»ã€å³é”®èœå•ç­‰ï¼Œå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœã€‚\n\n\n\nåŠŸèƒ½\nå¿«æ·é”®\n\n\n\nåˆ‡æ¢åˆ°æµç¨‹å›¾\nSpace\n\n\nåˆ‡æ¢åˆ°ä¼ªä»£ç è§†å›¾\nTab\n\n\nåˆ‡æ¢åˆ°å­—ç¬¦ä¸²è§†å›¾\nShift + F12\n\n\nè·³è½¬åˆ°æ“ä½œæ•°\nEnter\n\n\nè·³è½¬åˆ°æ“ä½œæ•°(æ–°çª—å£)\nAlt + Enter\n\n\nè·³è½¬åˆ°ä¸Šä¸€ä¸ªä½ç½®\nEsc\n\n\nè·³è½¬åˆ°ä¸‹ä¸€ä¸ªä½ç½®\nCtrl + Enter\n\n\nè·³è½¬åˆ°åœ°å€\nG\n\n\nè·³è½¬åˆ°åç§°\nCtrl + L\n\n\nè·³è½¬åˆ°å…¥å£ç‚¹\nCtrl + E\n\n\næŸ¥æ‰¾æ“ä½œæ•°çš„äº¤å‰å¼•ç”¨\nX\n\n\næ ‡è®°ä½ç½®\nAlt + M\n\n\nè·³è½¬åˆ°æ ‡è®°\nCtrl + M\n\n\næœç´¢å­—ç¬¦ä¸²\nCtrl + F\n\n\næ·»åŠ æ³¨é‡Š\n:æˆ–;\n\n\né‡å‘½åä½ç½®æ ‡ç­¾\nN\n\n\nè®¡ç®—å™¨\n?\n\n\nå¸¸ç”¨å‘½ä»¤","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","IDA","é€ŸæŸ¥æ‰‹å†Œ"]},{"title":"NSISæ’ä»¶ä½¿ç”¨åŠå¼€å‘","url":"/post/3031217406.html","content":"NSIS å†…ç½®äº†å¾ˆå¤šæŒ‡ä»¤ï¼Œè¿™äº›æŒ‡ä»¤å¯ä»¥æ»¡è¶³æˆ‘ä»¬åŸºæœ¬éœ€æ±‚ï¼Œä½†éš¾å…ä¼šé‡åˆ° NSIS æ²¡æœ‰å†…ç½®çš„åŠŸèƒ½ï¼Œå¦‚è¿›ç¨‹æ“ä½œï¼Œåå°è¿è¡Œï¼ˆå³å¤šçº¿ç¨‹ï¼‰ï¼Œ7z å‹ç¼©ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹æ’ä»¶æ¥æ»¡è¶³æˆ‘ä»¬æ‰€éœ€è¦çš„åŠŸèƒ½äº†ã€‚\n\n\nè·å–æ’ä»¶NSIS å®˜æ–¹æ”¶å½•æ’ä»¶çš„ç½‘å€æ˜¯ï¼š\nhttp://nsis.sourceforge.net/Category:Plugins\næˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™ä¸ŠæŸ¥æ‰¾å’Œä¸‹è½½æˆ‘ä»¬éœ€è¦çš„æ’ä»¶ï¼Œè¯¥ç½‘ç«™ä¸Šé’ˆå¯¹æ¯ä¸ªæ’ä»¶éƒ½æä¾›äº†æ¯”è¾ƒå®Œå–„çš„ç¤ºä¾‹ã€‚\nä½¿ç”¨æ’ä»¶NSIS æ’ä»¶ä»¥ dll çš„å½¢å¼å­˜åœ¨ï¼Œæˆ‘ä»¬ä»¥KillProcæ’ä»¶ä¸ºä¾‹ï¼ˆä»åå­—ä¸Šå¯ä»¥çœ‹å‡ºè¯¥æ’ä»¶æä¾›æ€è¿›ç¨‹çš„åŠŸèƒ½ï¼‰ï¼Œæˆ‘ä»¬ä¸‹è½½ä¸‹æ¥çš„ä¸€èˆ¬æ˜¯å‹ç¼©åŒ…ï¼Œè§£å‹ä¹‹åæ‰¾åˆ°å¯¹åº”æ’ä»¶ dll æ–‡ä»¶ï¼Œå¦‚KillProc.dllæ–‡ä»¶ã€‚\n\nä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š\n\nå°† dll æ–‡ä»¶æ‹·è´åˆ° NSIS å®‰è£…ç›®å½•ä¸‹çš„Plugins\\x86-ansiç›®å½•ï¼ˆUnicode æ’ä»¶éœ€è¦æ‹·è´åˆ°Plugins\\x86-unicodeç›®å½•ï¼‰ã€‚\n\nåœ¨å®˜æ–¹æ–‡æ¡£ä¸Šæ‰¾åˆ°è¯¥æ’ä»¶æ‰€æä¾›çš„å‡½æ•°ï¼Œä»¥åŠå‡½æ•°çš„å‚æ•°ä¼ é€’å½¢å¼ã€è¿”å›å€¼å½¢å¼ã€‚NSIS ä¸­æ’ä»¶å‡½æ•°çš„å‚æ•°ä¼ é€’å½¢å¼æœ‰ 2 ç§å½¢å¼ï¼š\n\nä½¿ç”¨$0 ~ $9ï¼Œ$R0 ~ $R9æ¥ä¼ é€’ã€‚\nä½¿ç”¨å †æ ˆæ¥ä¼ é€’ã€‚\n\n\nåœ¨ NSIS è„šæœ¬ä¸­æŒ‰ç…§å‡½æ•°å£°æ˜çš„å½¢å¼æ¥è°ƒç”¨ï¼Œéœ€è¦åœ¨å‡½æ•°åå‰åŠ ä¸Š dll åç§°ï¼ˆä¸éœ€è¦.dll åç¼€ï¼‰ï¼Œå¦‚KillProc::KillProcessesã€‚\n\n\nSection  StrCpy $0 &quot;foo.exe&quot;  # å˜é‡èµ‹å€¼  KillProc::KillProcesses  StrCmp $1 &quot;-1&quot; wooops  wooops:  Abort  completed:SectionEnd\n\nå¼€å‘æ’ä»¶è™½ç„¶ NSIS å®˜æ–¹æä¾›äº†å¾ˆå¤šæ’ä»¶ï¼Œä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„æ’ä»¶å¯ä»¥ä¸‹è½½ä½¿ç”¨ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­éš¾å…ä¼šé‡åˆ°å·²æœ‰æ’ä»¶æ²¡æœ‰æä¾›çš„åŠŸèƒ½æˆ–è€…æ’ä»¶ä¸å¥½ç”¨çš„æƒ…å†µï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±å¼€å‘ NSIS æ’ä»¶ã€‚\næ’ä»¶å¼€å‘è§„èŒƒNSIS æ’ä»¶å¯¹å¼€å‘è¯­è¨€æ²¡æœ‰é™åˆ¶ï¼ˆæœ¬æ–‡ä»‹ç»åŸºäº C++å¼€å‘ï¼‰ï¼Œåªè¦æŒ‰ç…§ NSIS æ ‡å‡†æ‰€è¦æ±‚çš„ç”Ÿæˆä¸€ä¸ª dll æ–‡ä»¶ï¼Œè¯¥ dll æ–‡ä»¶æä¾›çº¯Cè§„èŒƒçš„ã€å›ºå®šæ ¼å¼çš„å¯¼å‡ºå‡½æ•°å³å¯ã€‚\næ€»ç»“èµ·æ¥ï¼Œå¼€å‘ NSIS æ’ä»¶çš„æ­¥éª¤ä¸ºï¼š\n\nä½¿ç”¨ Visual Studio æ–°å»º dll å·¥ç¨‹ï¼ˆè¿è¡Œåº“é€‰æ‹©MTæˆ–MTDï¼‰ï¼Œå»ºè®®ä½¿ç”¨çš„ MT è¿è¡Œåº“ï¼Œä¸éœ€è¦é¢å¤–æºå¸¦è¿è¡Œæ—¶æ–‡ä»¶ã€‚\n\nå®šä¹‰æ’ä»¶åŠŸèƒ½å‡½æ•°ï¼Œå‡è®¾å‡½æ•°åä¸º addï¼Œåˆ™å‡½æ•°å£°æ˜æ ¼å¼å¦‚ä¸‹ï¼š\nextern &quot;C&quot; __declspec(dllexport) void __cdecl add (                                                   HWND hwndParent,                                                   int string_size,                                                   char *variables,                                                   stack_t **stacktop,                                                   extra_parameters *extra);\n\nç¼–è¯‘ç”Ÿæˆ dll æ–‡ä»¶ã€‚\n\n\nå‚æ•°å’Œè¿”å›å€¼å¼€å‘ NSIS æ’ä»¶çš„éš¾ç‚¹åœ¨äºï¼šè·å–è°ƒç”¨è€…ä¼ å…¥çš„å‚æ•°ï¼Œä»¥åŠå°†æ‰§è¡Œç»“æœè¿”å›ç»™è°ƒç”¨è€…ã€‚æ’ä»¶ä¸­çš„å‡½æ•°æœ‰ä¸¤ç§ä¼ å‚æ–¹å¼ï¼š\n\nä¸€ç§æ˜¯é€šè¿‡$0~$9 $R0~$R9çš„å½¢å¼ï¼Œè¿™ç§å½¢å¼çš„å‚æ•°é€šè¿‡char *variableså‚æ•°æ¥è·å–ã€‚\nä¸€ç§æ˜¯é€šè¿‡å †æ ˆçš„å½¢å¼ï¼Œè¿™ç§å½¢å¼çš„å‚æ•°é€šè¿‡stack_t **stacktopå‚æ•°æ¥è·å–ã€‚\n\nPluginCommonä¸ºäº†æ–¹ä¾¿æ’ä»¶å¼€å‘ä¸­è·å–ç”¨æˆ·ä¼ å…¥å‚æ•°ã€ä»¥åŠæ‰§è¡Œç»“æœçš„è¿”å›ï¼Œæˆ‘å¯¹æ’ä»¶å¼€å‘çš„å¸¸ç”¨æ“ä½œè¿›è¡Œäº†å°è£…ã€‚\n// PluginCommon.h#ifndef _PLUGIN_COMMON_H_#define _PLUGIN_COMMON_H_#include &lt;stdio.h&gt;#define PLUGIN_BUF_LEN 1024#define NSISAPI extern &quot;C&quot; __declspec(dllexport) void __cdecl#define EXDLL_INIT()           &#123;  \\        g_stringsize=string_size; \\        g_stacktop=stacktop;      \\        g_variables=variables; &#125;typedef struct _stack_t &#123;  struct _stack_t *next;  char text[1];&#125; stack_t;static unsigned int g_stringsize;static stack_t **g_stacktop;static char *g_variables;enum&#123;  INST_0,         // $0  INST_1,         // $1  INST_2,         // $2  INST_3,         // $3  INST_4,         // $4  INST_5,         // $5  INST_6,         // $6  INST_7,         // $7  INST_8,         // $8  INST_9,         // $9  INST_R0,        // $R0  INST_R1,        // $R1  INST_R2,        // $R2  INST_R3,        // $R3  INST_R4,        // $R4  INST_R5,        // $R5  INST_R6,        // $R6  INST_R7,        // $R7  INST_R8,        // $R8  INST_R9,        // $R9  INST_CMDLINE,   // $CMDLINE  INST_INSTDIR,   // $INSTDIR  INST_OUTDIR,    // $OUTDIR  INST_EXEDIR,    // $EXEDIR  INST_LANG,      // $LANGUAGE  __INST_LAST&#125;;static int __stdcall popstring(char *str)&#123;  stack_t *th;  if (!g_stacktop || !*g_stacktop) return 1;  th=(*g_stacktop);  lstrcpyA(str,th-&gt;text);  *g_stacktop = th-&gt;next;  GlobalFree((HGLOBAL)th);  return 0;&#125;static void __stdcall pushstring(char *str)&#123;  stack_t *th;  if (!g_stacktop) return;  th=(stack_t*)GlobalAlloc(GPTR,sizeof(stack_t)+g_stringsize);  lstrcpynA(th-&gt;text,str,g_stringsize);  th-&gt;next=*g_stacktop;  *g_stacktop=th;&#125;static int __stdcall popint()&#123;    char buf[512] = &#123;0&#125;;    popstring(buf);    return atoi(buf);&#125;static void __stdcall pushint(long value)&#123;    char buf[512] = &#123;0&#125;;    sprintf_s(buf, &quot;%ld&quot;, value);    pushstring(buf);&#125;static char * __stdcall getuservariable(int varnum)&#123;  if (varnum &lt; 0 || varnum &gt;= __INST_LAST) return NULL;  return g_variables+varnum*g_stringsize;&#125;static void __stdcall setuservariable(int varnum, char *var)&#123;\tif (var != NULL &amp;&amp; varnum &gt;= 0 &amp;&amp; varnum &lt; __INST_LAST)\t\tlstrcpyA(g_variables + varnum*g_stringsize, var);&#125;enum NSPIM&#123;    NSPIM_UNLOAD,    // This is the last message a plugin gets, do final cleanup    NSPIM_GUIUNLOAD, // Called after .onGUIEnd&#125;;typedef UINT_PTR (*NSISPLUGINCALLBACK)(enum NSPIM);// extra_parameters data structures containing other interesting stuff// but the stack, variables and HWND passed on to plug-ins.typedef struct&#123;    int autoclose;    int all_user_var;    int exec_error;    int abort;    int exec_reboot; // NSIS_SUPPORT_REBOOT    int reboot_called; // NSIS_SUPPORT_REBOOT    int XXX_cur_insttype; // depreacted    int plugin_api_version; // see NSISPIAPIVER_CURR    // used to be XXX_insttype_changed    int silent; // NSIS_CONFIG_SILENT_SUPPORT    int instdir_error;    int rtl;    int errlvl;    int alter_reg_view;    int status_update;&#125; exec_flags_t;#ifndef NSISCALL#define NSISCALL __stdcall#endiftypedef struct &#123;    exec_flags_t *exec_flags;    int (NSISCALL *ExecuteCodeSegment)(int, HWND);    void (NSISCALL *validate_filename)(char *);    // returns 0 on success, 1 if already registered and &lt; 0 on errors    int (NSISCALL *RegisterPluginCallback)(HMODULE, NSISPLUGINCALLBACK);&#125; extra_parameters;#endif //_PLUGIN_COMMON_H_\n\nåœ¨å¼€å‘æ’ä»¶ä¸­ç»å¸¸ç”¨åˆ°çš„æœ‰ï¼š4 ä¸ªå †æ ˆæ“ä½œå‡½æ•°ï¼špushint,pushstring,popint,popstringã€‚2 ä¸ªå¯„å­˜å™¨å˜é‡($R0~$R9,$0~$9)æ“ä½œå‡½æ•°ï¼šgetuservariableï¼Œsetuservariableã€‚\nç¤ºä¾‹åŸºäºä¸Šé¢çš„ PluginCommon.hï¼Œæˆ‘ä»¬å¯ä»¥å°†å¼€å‘æ’ä»¶çš„æ­¥éª¤æµç¨‹å¤§å¤§ç®€åŒ–ã€‚\n#include &lt;windows.h&gt;#include &lt;commctrl.h&gt;#include &lt;stdarg.h&gt;#include &lt;tchar.h&gt;#include &quot;PluginCommon.h&quot;HINSTANCE g_hInstance;HWND g_hwndParent;extra_parameters *g_pluginParms = NULL;#define NSMETHOD_INIT(parent) &#123;\\        g_pluginParms = extra; \\        g_hwndParent = parent; \\        EXDLL_INIT(); &#125;BOOL WINAPI DllMain(HANDLE hInst, ULONG ul_reason_for_call, LPVOID lpReserved)&#123;    g_hInstance = (HINSTANCE)hInst;    if (ul_reason_for_call == DLL_PROCESS_ATTACH) &#123;        //do what you want at init time.    &#125;    if (ul_reason_for_call == DLL_THREAD_DETACH || ul_reason_for_call == DLL_PROCESS_DETACH) &#123;        //clean up code.    &#125;    return TRUE;&#125;//// ä»¥ä¸Šå†…å®¹é€šç”¨ï¼Œæ¯ä¸ªæ’ä»¶éƒ½å¯ä»¥å°†ä¸Šé¢çš„å†…å®¹ç›´æ¥å¤åˆ¶è¿‡å»ã€‚//// NSISæ’ä»¶å¯¼å‡ºå‡½æ•°,ä»¥addå‡½æ•°ä¸ºä¾‹ï¼Œè‹¥è¦æ·»åŠ å…¶ä»–å‡½æ•°ï¼Œåˆ™åªæ˜¯å‡½æ•°åéœ€è¦ä¿®æ”¹ï¼Œå‡½æ•°é€»è¾‘å†™åœ¨NSMETHOD_INIT(hwndParent);ä¹‹åçš„èŠ±æ‹¬å·å†…ã€‚//extern &quot;C&quot; __declspec(dllexport) void __cdecladd ( HWND hwndParent, int string_size, char *variables, stack_t **stacktop, extra_parameters *extra)&#123;    NSMETHOD_INIT(hwndParent);    &#123;        // == æ·»åŠ è‡ªå·±ä»£ç \t\t    // å‡è®¾è°ƒç”¨è€…é€šè¿‡å †æ ˆçš„å½¢å¼ä¼ é€’çš„å‚æ•°        int i = popint();  // æ³¨æ„ï¼šæ ˆæ˜¯å…ˆè¿›åå‡º        int j = popint();        int k = i + j;        pushint(k); // é€šè¿‡plugin-common.hä¸­æä¾›çš„pushintè¿”å›æ•´æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨pushstringè¿”å›å­—ç¬¦ä¸²        // ==    &#125;&#125;\n\nUnicode æ”¯æŒå¤§å®¶å¯èƒ½æ³¨æ„åˆ°äº†ä¸Šé¢çš„ç¤ºä¾‹å’ŒPluginCommon.hä¸­ä½¿ç”¨çš„éƒ½æ˜¯charï¼Œè€Œä¸æ˜¯wchar_tã€‚é‚£å¦‚æœè¦æ”¹æˆwchar_téœ€è¦å“ªäº›å·¥ä½œäº†ï¼Ÿ\n\nå°†æ’ä»¶ä»£ç ä¸­çš„charæ”¹æˆwchar_tã€‚\nåœ¨ nsi è„šæœ¬ä¸­åŠ å…¥Unicode Trueã€‚\néœ€è¦å°†ç”Ÿæˆçš„æ’ä»¶ dll æ”¾åˆ° nsis ç›®å½•ä¸‹çš„Plugins\\x86-unicodeå­ç›®å½•ä¸­ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["NSIS"]},{"title":"NSISåŸºç¡€è¯­æ³•","url":"/post/409779091.html","content":"NSISï¼ˆNullsoft Scriptable Install Systemï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ Windows å¹³å°å®‰è£…åŒ…åˆ¶ä½œç¨‹åºã€‚NSIS é€šè¿‡å®ƒå®šä¹‰çš„è„šæœ¬è¯­è¨€æ¥æè¿°å®‰è£…åŒ…çš„è¡Œä¸ºå’Œé€»è¾‘çš„ã€‚\n\n\nç¯å¢ƒæ­å»ºä»http://nsis.sourceforge.net/Downloadä¸‹è½½ NSIS å®‰è£…è¿›è¡Œå®‰è£…ã€‚\nä½¿ç”¨ NSIS ç”Ÿæˆå®‰è£…åŒ…çš„å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\n\nä½¿ç”¨ä»»æ„æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚ Notepad++ã€Visual Studio Codeï¼‰å¼€å‘ NSIS è„šæœ¬\nä½¿ç”¨å®‰è£…ç›®å½•å†…çš„ makensisw.exe ç¨‹åºç¼–è¯‘ NSIS è„šæœ¬ç”Ÿæˆå®‰è£…åŒ…ã€‚\n\n\nmakensisw.exe åªæä¾›ç¼–è¯‘è„šæœ¬çš„åŠŸèƒ½ï¼Œä¸èƒ½å¯¹è„šæœ¬è¿›è¡Œè°ƒè¯•ï¼Œè°ƒè¯•è„šæœ¬å…¨é é”™è¯¯æç¤ºå’Œç»éªŒã€‚\n\nNSIS è„šæœ¬ç»“æ„ä¸€ä¸ª NSIS è„šæœ¬å¯ä»¥åŒ…æ‹¬ï¼šå®‰è£…ç¨‹åºå±æ€§ã€é¡µé¢ã€åŒºæ®µç­‰ã€‚\nå¯¹äºä¸€ä¸ªæœ€ç®€å•çš„ NSIS è„šæœ¬ï¼Œåªæœ‰ OutFile å±æ€§å’ŒåŒºæ®µï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰æ˜¯å¿…é¡»çš„ï¼ŒOutFile å±æ€§ç”¨äºæŒ‡å®š NSIS ç¼–è¯‘ç”Ÿæˆå®‰è£…åŒ…çš„è·¯å¾„ã€‚\nOutFile &quot;Simple.exe&quot;Section &quot;Installer Section&quot;SectionEnd\n\nä¿å­˜ä¸Šé¢è„šæœ¬åˆ°ä»»æ„ .nsi æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ makensisw.exe æ‰“å¼€æ”¹è„šæœ¬è¿›è¡Œç¼–è¯‘ï¼Œå‡ºç°ä¸‹å›¾è¡¨ç¤ºç¼–è¯‘æˆåŠŸï¼ŒæˆåŠŸä¹‹åä¼šåœ¨è„šæœ¬å½“å‰ç›®å½•çœ‹åˆ°è¾“å‡ºçš„ Simple.exe æ–‡ä»¶ã€‚\nå¦‚æœç¼–è¯‘å¤±è´¥ï¼Œmakensisw.exe ä¼šåœ¨è¾“å‡ºçª—å£æç¤ºå¤±è´¥åŸå› ã€‚\n\n\néœ€è¦æ³¨æ„ï¼šå¦‚æœ NSIS è„šæœ¬å†…åŒ…å«ä¸­æ–‡ç­‰é ASCII å­—ç¬¦ï¼Œéœ€è¦å°†è„šæœ¬ä¿å­˜ä¸º ANSI ç¼–ç æ ¼å¼ï¼Œè€Œä¸èƒ½ä¿å­˜ä¸º UTF8 æ ¼å¼ã€‚\n\nå®‰è£…ç¨‹åºå±æ€§å®‰è£…ç¨‹åºçš„å±æ€§ç”¨äºæ§åˆ¶å®‰è£…ç¨‹åºçš„å¤–è§‚ï¼Œæ¯”å¦‚æŒ‡å®šå“ªäº›é¡µé¢å‡ºç°åœ¨å®‰è£…ç¨‹åºé‡Œï¼Œåœ¨æ¯ä¸ªé¡µé¢çš„æ¯ä¸ªéƒ¨åˆ†æ˜¾ç¤ºä»€ä¹ˆæ–‡æœ¬ï¼Œå®‰è£…ç¨‹åºçš„åç§°ï¼ˆå¦‚ä¸Šé¢è„šæœ¬ä¸­çš„ OutFileï¼‰ï¼Œä½¿ç”¨ä»€ä¹ˆæ ·çš„å›¾æ ‡ï¼Œé»˜è®¤å®‰è£…ç›®å½•ç­‰ç­‰ã€‚\nå®‰è£…ç¨‹åºå±æ€§å¯ä»¥åœ¨é™¤äº†åŒºæ®µå’Œå‡½æ•°ä»¥å¤–çš„ä»»ä½•åœ°æ–¹è®¾ç½®ã€‚\nå¯ä»¥ç†è§£ä¸ºå®‰è£…ç¨‹åºå±æ€§æ˜¯è®¾ç½®ç»™ NSIS ç¼–è¯‘å™¨çœ‹çš„ï¼Œè¿™äº›å±æ€§çš„å€¼åœ¨ç¼–è¯‘æ—¶éƒ½å·²ç»ç¡®å®šäº†ï¼Œæ‰€ä»¥é™¤äº† InstallDir ä»¥å¤–ï¼Œå…¶ä»–å®‰è£…ç¨‹åºå±æ€§éƒ½ä¸å…è®¸ä½¿ç”¨å˜é‡ï¼ˆé™¤äº†$\\rå’Œ$\\nï¼‰ã€‚\nå®Œæ•´çš„å®‰è£…ç¨‹åºå±æ€§å¯ä»¥æŸ¥é˜… NSIS ä¸­æ–‡å¸®åŠ©æ–‡æ¡£ã€‚\né¡µé¢é¡µé¢åˆ†ä¸ºNSISå†…ç½®çš„å‘å¯¼é¡µé¢å’Œç”¨æˆ·è‡ªå®šä¹‰é¡µé¢ã€‚\nä¸€ä¸ªéé™é»˜å®‰è£…ç¨‹åºéœ€è¦é¡µé¢æ¥æŒ‡å¯¼ç”¨æˆ·è¿è¡Œå®‰è£…ç¨‹åºï¼Œå¯ä»¥é€šè¿‡Pageå‘½ä»¤æˆ–PageExï¼ˆPageEx æä¾›äº†æ›´å¤šé«˜çº§çš„è®¾ç½®ï¼‰å‘½ä»¤æ¥è®¾å®šå“ªä¸ªé¡µé¢æ˜¾ç¤ºã€‚\né¡µé¢å®é™…çš„æ˜¾ç¤ºé¡ºåºå’Œå®ƒåœ¨ NSIS è„šæœ¬ä¸­å®šä¹‰çš„é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚\nå†…ç½®å‘å¯¼é¡µé¢ï¼šNSIS å†…ç½®çš„å‘å¯¼é¡µé¢æœ‰ï¼š\n\nlicenseï¼šè®¸å¯è¯é¡µé¢ã€‚\ncomponentsï¼š ç»„ä»¶é€‰æ‹©é¡µé¢ï¼Œæ¯ä¸ªå¯è§çš„åŒºæ®µéƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªç»„ä»¶ç»™ç”¨æˆ·é€‰æ‹©æ˜¯å¦å®‰è£…ã€‚ä½ å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªåŒºæ®µæ¥æ„å»ºå®‰è£…åŒ…ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¦ä½¿ç”¨ç»„ä»¶é¡µæ¥è®©ç”¨æˆ·é€‰æ‹©å¯é€‰çš„ç»„ä»¶ï¼Œé‚£ä½ å°±éœ€è¦ä½¿ç”¨å¤šä¸ªåŒºæ®µã€‚\ndirectoryï¼š å®‰è£…ç›®å½•é€‰æ‹©é¡µé¢ã€‚\ninstfilesï¼š å®‰è£…è¿‡ç¨‹é¡µé¢ã€‚\nuninstConfirmï¼š å¸è½½ç¡®è®¤é¡µé¢ã€‚\n\nä¸åŒçš„é¡µé¢ï¼Œæœ‰ä¸åŒçš„å±æ€§ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å†…ç½®é¡µé¢è¯­æ³•å¦‚ä¸‹ï¼š\nPage (license|components|directory|instfiles|uninstConfirm) [é¢„ç½®å‡½æ•°] [æ˜¾ç¤ºå‡½æ•°] [ç¦»å¼€å‡½æ•°]\n\næ¯ä¸ªå†…å»ºçš„é¡µé¢éƒ½æœ‰ä¸‰ä¸ªå›è°ƒå‡½æ•°ï¼ˆé¢„ç½®å‡½æ•°ã€æ˜¾ç¤ºåˆ›å»ºå‡½æ•°å’Œç¦»å¼€å‡½æ•°ï¼‰ï¼Œé¢„ç½®å‡½æ•°åœ¨é¡µé¢è¢«åˆ›å»ºä¹‹å‰è¢«ç›´æ¥çš„è°ƒç”¨ï¼Œæ˜¾ç¤ºå‡½æ•°åœ¨é¡µé¢è¢«åˆ›å»ºåä¸”åœ¨æ˜¾ç¤ºä¹‹å‰è¢«ç›´æ¥è°ƒç”¨ï¼Œç¦»å¼€å‡½æ•°åœ¨ç”¨æˆ·æŒ‰ä¸‹ä¸‹ä¸€é¡µæŒ‰é’®ä¹‹åå¹¶ä¸”åœ¨é¡µé¢ç¦»å¼€ä¹‹å‰è¢«ç›´æ¥è°ƒç”¨ã€‚\nå¦‚ï¼š\nPageEx license    LicenseData &quot;license.rtf&quot;       #å¯ä»¥æ˜¯txtæˆ–rtfæ–‡ä»¶æ ¼å¼PageExEnd\n\nè‡ªå®šä¹‰é¡µé¢åˆ›å»ºè‡ªå®šä¹‰é¡µé¢è¯­æ³•ï¼š\npage custom [åˆ›å»ºå‡½æ•°] [ç¦»å¼€å‡½æ•°] [æ ‡é¢˜]\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;è‡ªå®šä¹‰é¡µé¢åªæœ‰ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼ˆåˆ›å»ºå‡½æ•°å’Œç¦»å¼€å‡½æ•°ï¼‰ï¼Œåˆ›å»ºå‡½æ•°åœ¨éœ€è¦åˆ›å»ºé¡µé¢æ—¶è¢«è°ƒç”¨ï¼Œç¦»å¼€å‡½æ•°åœ¨ç”¨æˆ·æŒ‰ä¸‹â€ä¸‹ä¸€é¡µâ€æŒ‰é’®ä¹‹åå¹¶ä¸”åœ¨é¡µé¢ç¦»å¼€ä¹‹å‰è¢«ç›´æ¥è°ƒç”¨ã€‚\né¡µé¢å›è°ƒå‡½æ•°æ¯ä¸ªå†…å»ºçš„é¡µé¢éƒ½æœ‰ä¸‰ä¸ªå›è°ƒå‡½æ•°ï¼šä¸€ä¸ªé¢„ç½®å‡½æ•°ã€ä¸€ä¸ªæ˜¾ç¤ºåˆ›å»ºå‡½æ•°å’Œä¸€ä¸ªç¦»å¼€å‡½æ•°ã€‚\né¢„ç½®å‡½æ•°åœ¨é¡µé¢è¢«åˆ›å»ºä¹‹å‰è¢«ç›´æ¥çš„è°ƒç”¨ï¼Œæ˜¾ç¤ºå‡½æ•°åœ¨é¡µé¢è¢«åˆ›å»ºåä¸”åœ¨æ˜¾ç¤ºä¹‹å‰è¢«ç›´æ¥è°ƒç”¨ï¼Œç¦»å¼€å‡½æ•°åœ¨ç”¨æˆ·æŒ‰ä¸‹ä¸‹ä¸€é¡µæŒ‰é’®ä¹‹åå¹¶ä¸”åœ¨é¡µé¢ç¦»å¼€ä¹‹å‰è¢«ç›´æ¥è°ƒç”¨ã€‚\n\né¢„ç½®å‡½æ•°å…è®¸ä½¿ç”¨ Abort æ¥ç•¥è¿‡è¯¥é¡µé¢ã€‚\næ˜¾ç¤ºå‡½æ•°å…è®¸ä½¿ç”¨ CreateFontã€SetCtlColorsã€SendMessage å’Œå…¶ä»–æ¥è°ƒæ•´é¡µé¢çš„ç”¨æˆ·ç•Œé¢ã€‚\nç¦»å¼€å‡½æ•°å…è®¸ä½¿ç”¨ Abort æ¥å¼ºåˆ¶ç”¨æˆ·åœç•™åœ¨å½“å‰é¡µé¢ã€‚\n\nä¸€ä¸ªè‡ªå®šä¹‰çš„é¡µé¢ä»…æœ‰ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯å¿…é¡»çš„åˆ›å»ºé¡µé¢ï¼Œå¦ä¸€ä¸ªç¦»å¼€å‡½æ•°çš„ä½œç”¨å°±å’Œå†…å»ºé¡µé¢çš„ç¦»å¼€å‡½æ•°ä¸€æ ·ã€‚\nä¾‹å¦‚ï¼š\nPage license skipLicense &quot;&quot; stayInLicensePage custom customPage &quot;&quot; &quot;: è‡ªå®šä¹‰é¡µé¢&quot;Page instfilesFunction skipLicense  MessageBox MB_YESNO &quot;ä½ æƒ³ç•¥è¿‡è®¸å¯é¡µé¢å—ï¼Ÿ&quot; IDNO no    Abort  no:FunctionEndFunction stayInLicense  MessageBox MB_YESNO &quot;ä½ æƒ³åœç•™åœ¨è®¸å¯é¡µé¢å—ï¼Ÿ&quot; IDNO no    Abort  no:FunctionEndFunction customPage  GetTempFileName $R0  File /oname=$R0 customPage.ini  InstallOptions::dialog $R0  Pop $R1  StrCmp $R1 &quot;cancel&quot; done  StrCmp $R1 &quot;back&quot; done  StrCmp $R1 &quot;success&quot; done  error: MessageBox MB_OK|MB_ICONSTOP &quot;InstallOptions error:$\\r$\\n$R1&quot;  done:FunctionEnd\n\nåŒºæ®µï¼ˆSectionï¼‰åœ¨å®‰è£…ç¨‹åºä¸­ç”¨æˆ·éœ€è¦å®‰è£…è®¸å¤šä¸œè¥¿ï¼Œå¦‚å®‰è£…æºç ã€é™„åŠ æ’ä»¶ã€è„šæœ¬æ ·ä¾‹æˆ–å…¶ä»–ã€‚é‡Œé¢çš„æ¯ä¸ªå®‰è£…ç»„ä»¶éƒ½æœ‰å®ƒè‡ªå·±çš„ä»£ç å—ï¼Œå½“ç”¨æˆ·é€‰æ‹©äº†å®‰è£…è¯¥ç»„ä»¶ï¼Œé‚£ä¹ˆå®‰è£…ç¨‹åºå°±ä¼šæ‰§è¡Œå¯¹åº”çš„ä»£ç ã€‚\nåœ¨ NSIS è„šæœ¬é‡Œï¼Œè¿™äº›ä»£ç ç§°ä¸ºåŒºæ®µã€‚æ¯ä¸ªå¯è§çš„åŒºæ®µéƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªç»„ä»¶ç»™ç”¨æˆ·é€‰æ‹©æ˜¯å¦å®‰è£…ï¼ˆåŒºæ®µä¹Ÿå¯ä»¥è®¾ç½®å±æ€§å¯¹ç”¨æˆ·éšè—ï¼Œé»˜è®¤å®‰è£…ï¼Œè®©ç”¨æˆ·æ— æ³•é€‰æ‹©æ˜¯å¦å®‰è£…ï¼‰ã€‚\nNSIS è„šæœ¬å¯¹åŒºæ®µçš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œä½ å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªåŒºæ®µæ¥æ„å»ºå®‰è£…åŒ…ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¦ä½¿ç”¨ç»„ä»¶é¡µæ¥è®©ç”¨æˆ·é€‰æ‹©å¯é€‰çš„ç»„ä»¶ï¼Œé‚£ä½ å°±éœ€è¦ä½¿ç”¨å¤šä¸ªåŒºæ®µäº†ã€‚\nå¸è½½ç¨‹åºä¹Ÿå¯ä»¥æœ‰å¤šä¸ªåŒºæ®µï¼Œä½†å¸è½½ç¨‹åºåŒºæ®µåå‰è¦åŠ ä¸Šå‰ç¼€un.ï¼Œå› ä¸ºå¸è½½ç¨‹åºæ˜¯è¦è¢«ç¼–è¯‘æˆæ˜¯ä¸€ä¸ªå•ç‹¬çš„ exe çš„ï¼Œæ‰€ä»¥è¦å¯¹ç¼–è¯‘å™¨æŒ‡æ˜å“ªäº›å†…å®¹ï¼ˆå¦‚åŒºæ®µï¼‰éœ€è¦è¢«ç¼–è¯‘è¿›å¸è½½ç¨‹åºï¼Œå› æ­¤éœ€è¦ç‰¹æ®Šå‰ç¼€ã€‚\nåŒºæ®µåä¸ºç©ºã€é—æ¼æˆ–è€…ä»¥ä¸€ä¸ª â€œ-â€œ å¼€å¤´ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ä¸€ä¸ªéšè—çš„åŒºæ®µï¼Œç”¨æˆ·ä¹Ÿä¸èƒ½åœ¨ç»„ä»¶é€‰æ‹©é¡µé¢é€‰æ‹©æ˜¯å¦ç¦æ­¢ã€‚\nNSIS è¯­æ³•è¯­æ³•æ¦‚è¿°\nå•è¡Œæ³¨é‡Šç”¨äº•å·#æˆ–åˆ†å·;ï¼Œè·¨è¡Œæ³¨é‡Šç”¨å¯ä»¥ç”¨ C&#x2F;C++ä¸­æ³¨é‡Šè¯­æ³•ï¼›\næ•°å­—å¸¸é‡å¯ä»¥ç”¨åè¿›åˆ¶ã€åå…­è¿›åˆ¶(0x ä¸ºå‰ç¼€)ã€å…«è¿›åˆ¶(0 ä¸ºå‰ç¼€)è¡¨ç¤ºï¼Œé¢œè‰²ç”¨ç±»ä¼¼ html çš„ä¸­ RGB è¡¨ç¤ºæ³•ï¼Œä½†å»äº•å·â€#â€ã€‚\nå­—ç¬¦ä¸²å¸¸é‡å¯ä»¥ç”¨å¼•å·å¼•ç”¨ï¼Œç‰¹æ®Šçš„å­—ç¬¦å¯ä»¥ä½¿ç”¨ç¾å…ƒç¬¦å·â€$â€ä½œå‰ç¼€æ¥è½¬ä¹‰ã€‚ç¾å…ƒç¬¦å·ã€æ¢è¡Œã€å›è½¦ã€åˆ¶è¡¨ç¬¦éƒ½æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦è½¬ä¹‰ï¼Œä»–ä»¬åœ¨NSISä¸­å¯ä»¥å†™æˆï¼š $$, $\\n, $r, $\\t\nNSIS è„šæœ¬ç”¨è¡Œå°¾çš„åæ–œæ â€&quot;è¡¨ç¤ºä¸‹ä¸€è¡Œå’Œå½“å‰è¡Œé€»è¾‘ä¸Šæ˜¯åŒä¸€è¡Œã€‚\n\nå¸¸é‡å’Œå˜é‡NSIS çš„å˜é‡å’Œå¸¸é‡éƒ½æ˜¯å…¨å±€çš„ï¼Œä¸”å¤§å°å†™æ•æ„Ÿçš„ï¼ŒNSIS ä¸­å˜é‡å’Œå¸¸é‡éƒ½æ˜¯å¼±ç±»å‹çš„ã€‚\nå¸¸ç”¨å’Œå˜é‡çš„å¼•ç”¨æ–¹å¼éƒ½æ˜¯${VAR_NAME}æˆ–$VAR_NAMEã€‚\nä½¿ç”¨!defineæ–¹å¼å®šä¹‰å¸¸é‡ï¼Œå¦‚ï¼š!define PRODUCT_NAME &quot;ç½‘æ˜“äº‘éŸ³ä¹&quot;\nä½¿ç”¨Varæ–¹å¼å®šä¹‰å˜é‡ï¼Œå¦‚ï¼šVar a\nNSIS å†…ç½®äº† 20 ä¸ªå·²æ³¨å†Œçš„å˜é‡ï¼š$0 ~ $9 å’Œ $R0 ~ $R9ï¼Œè¿™äº›å˜é‡ä¸éœ€è¦å£°æ˜å°±å¯ä»¥ä½¿ç”¨ï¼Œä¸€èˆ¬ç”¨äºå‚æ•°ä¼ é€’ç­‰ã€‚\nå¦å¤–ï¼ŒNSIS å†…ç½®ä¸€ä¸ªå †æ ˆï¼Œä½¿ç”¨pushå’Œpopå‘½ä»¤æ¥å…¥æ ˆå’Œå‡ºæ ˆï¼Œå¯ä»¥ä½¿ç”¨å †æ ˆæ¥æš‚å­˜æ•°æ®ã€‚\nå…³äºå˜é‡çš„èµ‹å€¼ï¼ŒNSIS ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨=æ¥èµ‹å€¼ï¼Œéœ€è¦å€ŸåŠ©StrCpyæ¥å®ç°ï¼Œå¦‚ï¼š\nStrCpy $0 &quot;hello&quot;StrCpy $0 123\n\nå‡½æ•°ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å£°æ˜å‡½æ•°ï¼š\nFunction å‡½æ•°åFunctionEnd\n\nå‡½æ•°åä»¥â€œ.â€å¼€å¤´çš„(ä¾‹å¦‚ â€œ.Whateverâ€)ä¸€èˆ¬ä½œä¸ºå›è°ƒå‡½æ•°ä¿ç•™ã€‚å‡½æ•°åä»¥â€œun.â€å¼€å¤´çš„å‡½æ•°å°†ä¼šè¢«åˆ›å»ºåœ¨å¸è½½ç¨‹åºé‡Œã€‚å› æ­¤ï¼Œæ™®é€šå®‰è£…åŒºæ®µå’Œå‡½æ•°ä¸èƒ½è°ƒç”¨å¸è½½å‡½æ•°ï¼Œè€Œå¸è½½åŒºæ®µå’Œå¸è½½å‡½æ•°ä¹Ÿä¸èƒ½è°ƒç”¨æ™®é€šå‡½æ•°ã€‚NSIS å‡½æ•°å£°æ˜ä¸­ä¸æ”¯æŒå‚æ•°å®šä¹‰ï¼Œå¦‚æœéœ€è¦ä¼ é€’å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ 20 ä¸ªå˜é‡æˆ–è€…å †æ ˆçš„æ–¹å¼ã€‚\nä½¿ç”¨å¦‚ä¸‹æ–¹å¼è°ƒç”¨å‡½æ•°ï¼š\nCall å‡½æ•°å\n\nå®é™¤äº†å‡½æ•°ä¹‹å¤–ï¼ŒNSIS è¿˜æ”¯æŒå®šä¹‰å®ï¼ŒNSIS ä¸­çš„å®æ”¯æŒå®šä¹‰å‚æ•°ã€‚\nä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®šä¹‰å®ï¼š\n!macro å®å [å‚æ•°1] [å‚æ•°n]!macroend\n\nä½¿ç”¨å¦‚ä¸‹æ–¹å¼è°ƒç”¨å®ï¼š\n!insertmacro å®å [å‚æ•°1] [å‚æ•°n]\n\næŒ‡ä»¤NSIS å†…ç½®äº†å¾ˆå¤šæŒ‡ä»¤ï¼Œè¿™äº›æŒ‡ä»¤æä¾›äº†å®‰è£…åŒ…å¸¸ç”¨äº†åŠŸèƒ½ï¼Œå¦‚æœè¿™äº›æŒ‡ä»¤æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå·±å¼€å‘æ’ä»¶ã€‚\nNSIS æ”¯æŒçš„å®Œæ•´æŒ‡ä»¤å¯ä»¥æŸ¥é˜… NSIS ä¸­æ–‡å¸®åŠ©æ–‡æ¡£ã€‚\nNSIS æŒ‡ä»¤ä½¿ç”¨ä¸­æ¯”è¾ƒç‰¹åˆ«çš„åœ¨äºè·³è½¬ï¼Œæ¯”å¦‚æ‰§è¡Œå¤±è´¥è·³è½¬åˆ°å“ªé‡Œï¼ŒæˆåŠŸè·³è½¬åˆ°å“ªé‡Œã€‚ä»¥MessageBoxæŒ‡ä»¤ä¸ºä¾‹ï¼ˆ[]ä¸ºå¯é€‰é¡¹ï¼‰ï¼š\nMessageBox æ¶ˆæ¯æ¡†é€‰é¡¹åˆ—è¡¨ æ¶ˆæ¯æ¡†æ–‡æœ¬ [/SD è¿”å›] [æ£€æµ‹è¿”å›å€¼ è·³è½¬åˆ°] [æ£€æµ‹è¿”å›å€¼2 è·³è½¬åˆ°2]\n\nä¸‹é¢çš„ç”¨æ³•è¡¨ç¤ºå¦‚æœ MessageBox è¿”å› IDYESï¼Œåˆ™+2ï¼Œå³è·³è½¬åˆ°è¯¥æŒ‡ä»¤çš„ä¸‹ 2 æ¡æ‰§è¡Œï¼ˆ+1 è¯¥æŒ‡ä»¤çš„ä¸‹ 1 æ¡ï¼Œ+2 å°±ä¸ºè¯¥æŒ‡ä»¤çš„ä¸‹ 2 æ¡ï¼‰ï¼Œ/SD IDYESè¡¨ç¤ºå®‰è£…åŒ…é‡‡ç”¨é™é»˜å®‰è£…æ–¹å¼æ—¶é»˜è®¤ç”¨æˆ·é€‰æ‹©äº†IDYES:\nMessageBox MB_ICONQUESTION|MB_YESNO &quot;ä½ ç¡®å®è¦å®Œå…¨åˆ é™¤ç½‘æ˜“äº‘éŸ³ä¹ï¼ŒåŠå…¶æ‰€æœ‰ç»„ä»¶å—?&quot; /SD IDYES IDYES +2 IDNO +1\n\nNSIS ç•Œé¢NSIS æä¾›çš„ç•Œé¢åˆ†ä¸ºä¼ ç»Ÿç•Œé¢ï¼ˆClassic UIï¼‰ã€ç°ä»£ç•Œé¢ï¼ˆModern UIï¼‰ã€‚\nä¼ ç»Ÿç•Œé¢\nç°ä»£ç•Œé¢\nè‡ªå®šä¹‰ç•Œé¢æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç•Œé¢åº“ï¼ˆå¦‚ duilib, Qtï¼‰è‡ªå·±ç»˜åˆ¶å®‰è£…åŒ…çš„ç•Œé¢ï¼Œè¿™æ ·çµæ´»åº¦æ›´å¤§ï¼Œå¯ä»¥å¼€å‘å‡ºç±»ä¼¼ QQ é‚£æ ·çš„å®‰è£…ç•Œé¢ã€‚åœ¨æ­¤ä¹‹å‰éœ€è¦æŒæ¡ NSIS çš„æ’ä»¶å¼€å‘æŠ€å·§ã€‚\né™é»˜å®‰è£…é™é»˜å®‰è£…&#x2F;å¸è½½æ˜¯ä¸€ç§å®‰è£…&#x2F;å¸è½½å½¢å¼ï¼Œç”¨æˆ·æ‰“å¼€å®‰è£…åŒ…åä¸æ˜¾ç¤ºä»»ä½•å®‰è£…ç•Œé¢ï¼Œç›´æ¥å¼€å§‹å®‰è£…ã€‚\né™é»˜å®‰è£…æ”¯æŒä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šå®‰è£…è·¯å¾„ç­‰å‚æ•°ã€‚\nå¸¸ç”¨çš„é™é»˜å®‰è£…æœ‰ä¸¤ç§ï¼š\n\nåœ¨è„šæœ¬ä¸­åŠ å…¥ SilentInstall å’Œ SilentUninstall å‘½ä»¤\nåœ¨ç¨‹åºå¯åŠ¨å‚æ•°é‡ŒåŠ  &#x2F;S å‚æ•°(åŒºåˆ†å¤§å°å†™)\n\nå½“å‰æ˜¯å¦é™é»˜è¿è¡Œåœ¨è„šæœ¬ä¸­åˆ¤æ–­å®‰è£…ã€å¸è½½ç¨‹åºæ˜¯å¦ä¸ºé™é»˜è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ IfSilentï¼š\n# å®‰è£…æ“ä½œå¼€å§‹å‰.Function .onInit    IfSilent +2 +1    MessageBox MB_ICONQUESTION|MB_OK &quot;æ¬¢è¿ä½¿ç”¨&quot;FunctionEnd\n\né»˜è®¤åº”ç­”å¯¹äºæœ‰äº›å‘½ä»¤éœ€è¦ä¸ºé™é»˜å®‰è£…æŒ‡å®šé»˜è®¤çš„å›ç­”ï¼Œå¦‚MessageBoxéœ€è¦åŠ å…¥&#x2F;SD å¼€å…³æ¥æŒ‡å®šé»˜è®¤å›ç­”ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n# å¸è½½æ“ä½œå¼€å§‹å‰.Function un.onInit    MessageBox MB_ICONQUESTION|MB_YESNO &quot;ç¡®å®šè¦å¸è½½å—?&quot; /SD IDYES IDYES +2 IDNO +1    AbortFunctionEnd\n\nå¯åŠ¨å‚æ•°è§£æå¦‚æœéœ€è¦ä¸ºé™é»˜å®‰è£…æŒ‡å®šå…¶ä»–çš„å‚æ•°ï¼Œå¦‚ç”¨æˆ·åç­‰ï¼Œå¯ä»¥ä½¿ç”¨ç¨‹åºå¯åŠ¨å‚æ•°æŒ‡å®šï¼Œå¹¶åœ¨.onInit å‡½æ•°é‡Œè¿›è¡Œè§£æï¼š\n#ä½¿ç”¨æ’ä»¶FileFuncä¸­çš„2ä¸ªå®!include &quot;FileFunc.nsh&quot;!insertmacro GetParameters!insertmacro GetOptions\n\n# å®šä¹‰å…¨å±€å˜é‡Var paramInstllDir      # å¯åŠ¨å‚æ•°-å®‰è£…ç›®å½•\n\n# è‡ªå®šä¹‰å®ParseParametersï¼Œåœ¨.onInitå‡½æ•°ä¸­è°ƒç”¨å³å¯!macro ParseParameters    $&#123;GetParameters&#125; $R0    $&#123;GetOptions&#125; $R0 &#x27;/installdir&#x27; $R1    StrCpy $paramInstllDir $R1    IfSilent +1 +2    StrCpy $INSTDIR $paramInstllDir!macroend\n\nMUI è·³è¿‡æŒ‡å®šå®‰è£…æ­¥éª¤åœ¨æ­£å¸¸æƒ…å†µä¸‹å®‰è£…åŒ…ä¼šæœ‰â€œæ¬¢è¿ç•Œé¢â€ã€â€œå®‰è£…ç›®å½•é€‰æ‹©ç•Œé¢â€ç­‰ç­‰ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦å®‰è£…åŒ…è‡ªåŠ¨è·³è¿‡è¿™ 2 ä¸ªç•Œé¢ï¼Œå¦‚å®‰è£…åŒ…é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥â€œå®‰è£…ç›®å½•â€ï¼ˆå¦‚setup.exe /installdir F:\\testï¼‰ï¼Œæœ¬èŠ‚è®²è¿°å¦‚ä½•ä½¿å®‰è£…åŒ…è·³è¿‡æŒ‡å®šçš„ç•Œé¢ã€‚\nåœ¨é¡µé¢æ’å…¥å®ä¹‹å‰é€šè¿‡MUI_PAGE_CUSTOMFUNCTION_PREæ¥æŒ‡å®š pre å¤„ç†å‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è·³è¿‡ï¼š\n# å®‰è£…ç¨‹åºæ¬¢è¿é¡µé¢!define MUI_PAGE_CUSTOMFUNCTION_PRE SkipPage!insertmacro MUI_PAGE_WELCOME# å®‰è£…ç¨‹åºæ˜¾ç¤ºå®‰è£…ç›®å½•é€‰æ‹©é¡µé¢!define MUI_PAGE_CUSTOMFUNCTION_PRE SkipPage!insertmacro MUI_PAGE_DIRECTORY\n\nSkipPageå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š\nFunction SkipPage  StrLen $R1 $paramInstllDir  $&#123;If&#125; $R1 &gt; 0\tAbort  $&#123;EndIf&#125;FunctionEnd\n\nè·å–å‘½ä»¤è¡Œå‚æ•°å­˜å…¥$paramInstllDirå˜é‡ï¼Œå¹¶è§£æå‘½ä»¤è¡Œå‚æ•°ï¼š\n!macro ParseParameters    $&#123;GetParameters&#125; $R0    $&#123;GetOptions&#125; $R0 &#x27;/installdir&#x27; $R1    StrCpy $paramInstllDir $R1\tStrLen $R1 $paramInstllDir    $&#123;If&#125; $R1 &gt; 0    \tStrCpy $INSTDIR $paramInstllDir\t$&#123;EndIf&#125;!macroend\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["NSIS"]},{"title":"ç©è½¬Qt 2Dç»˜å›¾ä¹‹ç”»å®¶çš„å·¥å…·","url":"/post/1336811290.html","content":"è½¯ä»¶æ˜¯å¯¹ç°å®ä¸–ç•Œçš„æŠ½è±¡ï¼Œåœ¨è®¾è®¡è½¯ä»¶æ¥å£æ—¶é€šå¸¸ä¹Ÿä¼šå‚è€ƒç°å®ä¸–ç•Œæ¥è¿›è¡Œè®¾è®¡ã€‚\nåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œç”»å®¶ä½¿ç”¨ç”»ç¬”ã€ç”»åˆ·è¿™äº›å·¥å…·åœ¨å®£çº¸ä¸Šä½œç”»ï¼Œè€Œåœ¨ Qt ä¸­ï¼Œç”»å®¶æ˜¯ QPainter å¯¹è±¡ï¼ˆç”»å®¶çš„å¤§è„‘åˆ™æ˜¯ QPaintEngineï¼‰ï¼Œçº¸å¼ å¯ä»¥æ˜¯ QPaintDevice çš„ä»»ä½•å­ç±»å¯¹è±¡ï¼Œå¦‚ QWidgetã€QImageã€QPixmapã€QGLPixelBuffer ç­‰ï¼›åœ¨ QPainter é€‰å¥½çº¸å¼ åï¼Œå°±å¯ä»¥ä½¿ç”¨ç”»ç¬”æ¥å‹¾å‹’ç‰©ä½“çš„è½®å»“äº†ï¼ŒQt ä¸­çš„ç”»ç¬”æ˜¯ QPen å¯¹è±¡ï¼›ç”»å®Œè½®å»“åï¼Œå¯èƒ½è¿˜éœ€è¦ä½¿ç”¨ç”»åˆ·æ¥å¡«å……è½®å»“ï¼ŒQt ä¸­çš„ç”»åˆ·æ˜¯ QBrush å¯¹è±¡ã€‚\n\n\nQPaintDeviceæœ¬èŠ‚ä»‹ç» QPaintDevice çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•ã€‚\ndevicePixelRatio() ä¸ devicePixelRatioF()\nç”¨äºè·å–DPIçš„ç¼©æ”¾å€æ•°ï¼Œéœ€è¦å…ˆåœ¨ç¨‹åºä¸­å¼€å¯DPIç¼©æ”¾ç‰¹æ€§ï¼š\nint main(int argc, char *argv[])&#123;    QGuiApplication::setAttribute(Qt::AA_EnableHighDpiScaling);    QGuiApplication::setAttribute(Qt::AA_UseHighDpiPixmaps);#if (QT_VERSION &gt;= QT_VERSION_CHECK(5, 14, 0))    QGuiApplication::setHighDpiScaleFactorRoundingPolicy(Qt::HighDpiScaleFactorRoundingPolicy::PassThrough);#endif    // .......&#125;\n\nä» Qt 5.14 ç‰ˆæœ¬å¼€å§‹ï¼ŒQtå¯ä»¥æ”¯æŒå°æ•°ä½çš„ DPI ç¼©æ”¾ï¼Œå¦‚ 1.25ã€1.75 ç­‰ã€‚å¦‚éœ€è·å–å°æ•°ä½DPIå€¼ï¼Œéœ€è¦å…ˆè®¾ç½®Qt::HighDpiScaleFactorRoundingPolicy::PassThroughç­–ç•¥ï¼Œç„¶åé€šè¿‡ devicePixelRatioF æ–¹æ³•è·å–ã€‚\nwidth() ä¸ height()\nç”¨äºè·å– QPaintDevice çš„å®½å’Œé«˜ï¼Œè¿™ä¸ªæ•°å€¼ä¸ä¼šéšç€åæ ‡ç³»çš„æ”¹å˜è€Œæ”¹å˜ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šéšç€ DPI çš„æ”¹å˜è€Œæ”¹å˜ã€‚\nwidthMM() ä¸ heightMM()\nç”¨äºè·å– QPaintDevice åœ¨å±å¹•ä¸Šå®é™…æ˜¾ç¤ºçš„å®½å’Œé«˜ï¼Œå•ä½ä¸ºæ¯«ç±³ã€‚\nQPenç”»ç¬”æœ‰å®½åº¦ï¼ˆwidth&#x2F;widthFï¼‰ã€é¢œæ–™ï¼ˆbrushï¼‰ã€çº¿æ¡æ ·å¼ï¼ˆStyleï¼‰ã€ä¸€æ¡çº¿èµ·ç¬”å’Œè½ç¬”çš„æ ·å¼ï¼ˆCapStyleï¼‰ã€ä¸¤æ¡çº¿ç›¸äº¤å¤„çš„æ ·å¼ï¼ˆJoinStyleï¼‰ç­‰å±æ€§ã€‚\nå®½åº¦void QPen::setWidth(int width)void QPen::setWidthF(qreal width)\n\nå¦‚æœæŒ‡å®šçš„å®½åº¦å°äº 0ï¼Œå°†ä¸ä¼šç»˜åˆ¶ä»»ä½•å†…å®¹ï¼›å¦‚æœæŒ‡å®šçš„å®½åº¦ç­‰äº 0ï¼Œå°†è¢«è§†ä¸º 1 ä¸ªåƒç´ å®½åº¦ï¼›å¦‚æœæŒ‡å®šçš„å®½åº¦å¤§äºç­‰äº 1ï¼Œåˆ™æŒ‰æŒ‡å®šçš„å®½åº¦æ¥ç»˜åˆ¶ã€‚\nQPençš„ç”»åˆ·void QPen::setBrush(const QBrush &amp;brush)\n\nQPen æœ‰ç”»åˆ·å±æ€§ï¼ŒQPainter å¯¹è±¡ä¹Ÿç”»åˆ·å±æ€§ï¼ˆä¸‹é¢ç« èŠ‚ä¼šä»‹ç»ï¼‰ï¼ŒäºŒè€…éƒ½æœ‰å¡«å……ä¹‹æ„ï¼ŒQPen çš„ç”»åˆ·æ˜¯ç”¨æ¥å¡«å……ç”»ç¬”æ‰€ç”»çš„çº¿æ¡ï¼ˆå¯ä»¥ç†è§£ä¸ºç”»ç¬”çš„é¢œæ–™ï¼‰çš„ï¼Œè€ŒQPainter çš„ç”»åˆ·æ˜¯ç”¨æ¥å¡«å……ç”»ç¬”æ‰€ç”»çš„è½®å»“åŒºåŸŸçš„ï¼Œå¦‚å¡«å……çŸ©å½¢é‡Œé¢çš„åŒºåŸŸã€‚\nç”»åˆ·å¯ä»¥æ˜¯çº¯è‰²ã€æ¸å˜è‰²ï¼Œä¹Ÿå¯ä»¥æ˜¯å›¾ç‰‡ã€‚\nçº¿æ¡æ ·å¼void QPen::setStyle(Qt::PenStyle style)\n\n\nèµ·è½ç¬”æ ·å¼void QPen::setCapStyle(Qt::PenCapStyle style)\n\n\næ‹ç‚¹æ ·å¼void QPen::setJoinStyle(Qt::PenJoinStyle style)\n\n\nå®ä¾‹ä¸‹é¢ç¤ºä¾‹æŒ‡å®šäº†ç”»ç¬”çš„å¦‚ä¸‹å±æ€§ï¼š\n\nç”»ç¬”çš„å®½åº¦ä¸º 70px\nä½¿ç”¨çº¢è‰²ç”»åˆ·\nçº¿æ¡æ ·å¼ä¸ºé€šè¿‡è‹¥å¹²ç©ºæ ¼åˆ†å‰²çš„ç‚¹çº¿çŠ¶\nçº¿æ¡èµ·ç¬”å’Œè½ç¬”å¤„ä¸ºåœ†å½¢\nçº¿æ¡æ‹ç‚¹å¤„ä¹Ÿä¸ºåœ†å½¢\n\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QPen pen;  pen.setWidth(70);  pen.setBrush(Qt::red);  pen.setStyle(Qt::DotLine);  pen.setCapStyle(Qt::RoundCap);  pen.setJoinStyle(Qt::RoundJoin);  painter.setPen(pen);  painter.drawLine(50, 50, 600, 50);  painter.drawLine(600, 50, 600, 600);&#125;\n\nå®é™…ç»˜åˆ¶å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nä¸Šé¢ç”»ç¬”ä½¿ç”¨çº¢è‰²ä½œä¸ºé¢œæ–™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ¸å˜è‰²ä½œä¸ºé¢œæ–™ï¼Œå½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨å›¾ç‰‡ä½œä¸ºé¢œæ–™ã€‚\nä¸‹é¢æˆ‘ä»¬å°†é¢œæ–™æ›´æ”¹ä¸ºä¸€ä¸ªçº¢è‰²çš„å¿ƒå½¢â™¥å›¾ç‰‡ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QPen pen;  pen.setWidth(70);  pen.setBrush(QImage(&quot;:/heart.png&quot;)); // ä»…ä¿®æ”¹äº†æ­¤è¡Œä»£ç                     ~~~~~~~~~~~~~~  pen.setStyle(Qt::DotLine);  pen.setCapStyle(Qt::RoundCap);  pen.setJoinStyle(Qt::RoundJoin);  painter.setPen(pen);  painter.drawLine(50, 50, 600, 50);  painter.drawLine(600, 50, 600, 600);&#125;\n\nç»˜åˆ¶çš„æ•ˆæœå¦‚ä¸‹ï¼š\n\nQBrushQPen ä¸ QPainter éƒ½æœ‰ç”»åˆ·å±æ€§ï¼Œè¿™é‡Œçš„ QBrush æ˜¯æŒ‡çš„ QPainter çš„ç”»åˆ·ã€‚è™½ç„¶ä¸ QPen çš„ç”»åˆ·éƒ½ä¸º QBrush ç±»å‹ï¼Œä½†äºŒè€…æ˜¯æœ‰åŒºåˆ«çš„ï¼ŒQPen çš„ç”»åˆ·æ˜¯ç”¨æ¥å¡«å……ç”»ç¬”æ‰€ç”»çº¿æ¡ï¼ˆå¯ä»¥ç†è§£ä¸ºç”»ç¬”çš„é¢œæ–™ï¼‰çš„ï¼Œè€Œ QPainter çš„ç”»åˆ·æ˜¯ç”¨æ¥å¡«å……ç”»ç¬”æ‰€ç”»çš„è½®å»“æ‰€åŒ…å›´çš„åŒºåŸŸï¼Œå¦‚å¡«å……çŸ©å½¢é‡Œé¢çš„åŒºåŸŸã€‚\nå¦‚ä¸‹é¢ç¤ºä¾‹ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QPen pen;  pen.setWidth(6);  pen.setBrush(Qt::red);  painter.setPen(pen);  painter.setBrush(Qt::blue);  painter.drawRect(50, 50, 200, 200);&#125;\n\nå®é™…ç»˜åˆ¶çš„çŸ©å½¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nQBrush æœ‰æ ·å¼ï¼ˆStyleï¼‰ã€é¢œè‰²ï¼ˆColorï¼‰ã€æ¸å˜è‰²ï¼ˆGradientï¼‰ã€çº¹ç†å›¾ç‰‡ï¼ˆTextureï¼‰ç­‰å±æ€§ã€‚\næ ·å¼ç”»åˆ·çš„ä½œç”¨æ˜¯å¡«å……åŒºåŸŸï¼Œç”»åˆ·çš„æ ·å¼åˆ™æ˜¯ç”¨æ¥æŒ‡å®šé€šè¿‡ä»€ä¹ˆæ¨¡å¼æ¥å¡«å……åŒºåŸŸçš„ã€‚\nä¸‹å›¾åˆ—å‡ºäº† QBrush æ”¯æŒçš„æ ·å¼ï¼š\n\nQBrushçš„åˆå§‹æ ·å¼æ˜¯ Qt::NoBrushï¼Œå³ä¸åšå¡«å……æ“ä½œï¼Œè¯¥å€¼æ˜¾ç„¶æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªé”™è¯¯çš„ä½¿ç”¨ç¤ºä¾‹ï¼›\n// é”™è¯¯ç¤ºä¾‹QBrush brush;brush.setColor(Qt::red); // ç”»åˆ·ä»ç„¶æ˜¯ Qt::NoBrushæ ·å¼ï¼Œä¸ä¼šå¡«å……ä»»ä½•é¢œè‰²\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°å’Œ setStyle æ–¹æ³•æ¥è®¾ç½®æ ·å¼ï¼š\nQBrush(Qt::BrushStyle style)void setStyle(Qt::BrushStyle style)\n\nå½“é€šè¿‡ä¸åŒçš„æ–¹å¼æ„é€  QBrush å¯¹è±¡æ—¶ï¼ŒQBrush çš„æ ·å¼ä¹Ÿä¼šè‡ªåŠ¨è¢«è®¾ç½®ä¸ºä¸åŒçš„å€¼ï¼š\n// æ ·å¼è‡ªåŠ¨è¢«è®¾ç½®ä¸ºæ¸å˜æ ·å¼ï¼šQt::LinearGradientPattern, Qt::RadialGradientPattern æˆ– Qt::ConicalGradientPatternQBrush(const QGradient &amp;gradient) // æ ·å¼è‡ªåŠ¨è¢«è®¾ç½®ä¸ºçº¹ç†æ ·å¼Qt::TexturePatternQBrush(const QImage &amp;image)          QBrush(const QPixmap &amp;pixmap)QBrush(Qt::GlobalColor color, const QPixmap &amp;pixmap)QBrush(const QColor &amp;color, const QPixmap &amp;pixmap)\n\nçº¹ç†å›¾ç‰‡ä¸Šé¢2.6èŠ‚çš„å®ä¾‹ä¸­ï¼Œåœ¨è®¾ç½®å¿ƒå½¢å›¾ç‰‡ä½œä¸ºQPençš„ç”»åˆ·æ—¶ï¼Œä½¿ç”¨çš„å°±æ˜¯çº¹ç†å›¾ç‰‡ã€‚\nä¸‹é¢æ±‡æ€»äº†è®¾ç½® QBrush çº¹ç†å›¾ç‰‡çš„å‡ ç§æ–¹æ³•ï¼š\n// é€šè¿‡æ„é€ å‡½æ•°QBrush(const QImage &amp;image)QBrush(const QPixmap &amp;pixmap)QBrush(Qt::GlobalColor color, const QPixmap &amp;pixmap)QBrush(const QColor &amp;color, const QPixmap &amp;pixmap)// é€šè¿‡æˆå‘˜æ–¹æ³•void setTexture(const QPixmap &amp;pixmap)void setTextureImage(const QImage &amp;image)\n\né€šè¿‡ä¸Šé¢æ–¹å¼è®¾ç½®çº¹ç†å›¾ç‰‡åï¼ŒQBrush æ ·å¼ä¼šè¢«è‡ªåŠ¨ä¿®æ”¹ä¸º Qt::TexturePatternï¼Œå› ä¸ºçº¹ç†å›¾ç‰‡åªèƒ½ä¸ Qt::TexturePattern æ ·å¼é…åˆä½¿ç”¨ï¼Œå¦åˆ™çº¹ç†å›¾ç‰‡å°†å¤±æ•ˆã€‚\nçº¯è‰²å¯ä»¥ä¸ºç”»åˆ·æŒ‡å®šçº¯è‰²æˆ–æ¸å˜è‰²ï¼Œçº¯è‰²ä½¿ç”¨ QColor å¯¹è±¡è¡¨ç¤ºã€‚\nå¸¸ç”¨çš„æ„é€  QColor å¯¹è±¡çš„æ–¹å¼æœ‰å¦‚ä¸‹å‡ ç§ï¼š\nQColor(&quot;#FFFFFF&quot;); //  r g bQColor(&quot;#AAFFFFFF&quot;); // a r g bQColor(255, 255, 255, 255); // r g b aQColor(Qt::red); // Qt::GlobalColor æšä¸¾å€¼\n\næ¸å˜è‰²QBrush åªæä¾›äº†ä¸€ç§æ–¹å¼æ¥æŒ‡å®šæ¸å˜è‰²ï¼š\nQBrush(const QGradient &amp;gradient)\n\nåœ¨Qtä¸­ï¼Œæ¸å˜è‰²ä½¿ç”¨ QGradient åŠå…¶å­ç±»è¡¨ç¤ºï¼Œç›®å‰Qtæ”¯æŒä¸‰ç§ç±»å‹çš„æ¸å˜ï¼š\n\nçº¿æ€§æ¸å˜ï¼Œå¯¹åº” QLinearGradient ç±»ã€‚\né”¥å½¢æ¸å˜ï¼Œå¯¹åº” QConicalGradient ç±»ã€‚\nå¾„å‘æ¸å˜ï¼Œåˆåˆ†ä¸ºç®€å•å¾„å‘æ¸å˜å’Œæ‰©å±•å¾„å‘æ¸å˜ï¼ŒäºŒè€…éƒ½å¯¹åº” QRadialGradient ç±»ã€‚\n\nä¸‹å›¾æ˜¯ä¸€ä¸ªä»å·¦åˆ°å³ï¼Œç”±ç™½åˆ°é»‘çš„æ¸å˜è¿‡ç¨‹ï¼š\n\nå¡«å……æ–¹å‘æ—¢ç„¶å¯ä»¥ä»å·¦åˆ°å³ã€ä»å³åˆ°å·¦çš„ã€ä»é‡Œåˆ°å¤–ï¼Œæ˜¯å¯ä»¥360åº¦æ—‹è½¬ç­‰ç­‰ï¼Œä¸åŒçš„å¡«å……æ–¹å‘é€ å°±äº†ä¸åŒç±»å‹çš„æ¸å˜ï¼Œä¸Šè¿°ä¸‰ç§ç±»å‹çš„æ¸å˜ä¸»è¦åŒºåˆ«ä¹Ÿåœ¨å¡«å……æ–¹å‘çš„ä¸åŒã€‚\nçº¿æ€§æ¸å˜QLinearGradient æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š\nQLinearGradient(qreal x1, qreal y1, qreal x2, qreal y2)QLinearGradient(const QPointF &amp;start, const QPointF &amp;finalStop)\n\né€šè¿‡æŒ‡å®šä¸€ä¸ªèµ·ç‚¹å’Œä¸€ä¸ªç»ˆç‚¹å°±å¯ä»¥ç¡®å®šä¸€æ¡çº¿æ®µçš„é•¿åº¦åŠæ–¹å‘ï¼Œè¿™ä¸ªæ–¹å‘å°±æ˜¯å¡«å……æ–¹å‘ï¼Œæ¸å˜èŒƒå›´åŸºäºè¯¥é•¿åº¦è€Œç¡®å®šï¼ˆè¯¦è§åé¢çš„â€œæ¸å˜èŒƒå›´â€ç« èŠ‚ï¼‰ã€‚\nçº¿æ€§æ¸å˜çš„æ–¹å‘å¯ä»¥æ˜¯æ°´å¹³çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å‚ç›´çš„ï¼Œè¿˜å¯ä»¥æ˜¯æ–œç€çš„ï¼Œå…·ä½“æ–¹å‘ç”±çº¿æ®µä¸Xè½´çš„å¤¹è§’æ¥å†³å®šã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸‹é¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªèµ·ç‚¹ä¸º(0,0)ã€ç»ˆç‚¹ä¸º(0,400)ï¼Œå‚ç›´æ–¹å‘çš„çº¿æ€§æ¸å˜ï¼Œç„¶åä½¿ç”¨è¯¥æ¸å˜å¡«å……ä½ç½®åœ¨ (0,0)ï¼Œå®½é«˜ä¸º 200x400 çš„çŸ©å½¢ï¼ˆè¯·æ³¨æ„çŸ©å½¢çš„ä½ç½®å’Œå¤§å°ï¼Œè¿™ä¸ªä¸æ¸å˜çš„èµ·æ­¢ä½ç½®æœ‰å…³ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QLinearGradient linearGrad(QPointF(0, 0), QPointF(0, 400));  linearGrad.setColorAt(0, Qt::black);  linearGrad.setColorAt(1, Qt::white);  QBrush brush(linearGrad);  painter.setBrush(brush);  painter.drawRect(0, 0, 200, 400);&#125;\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nç”±äºæ˜¯å‚ç›´æ–¹é¢çš„æ¸å˜ï¼Œæ‰€ä»¥æ¸å˜è‰²ä»ä¸Šåˆ°ä¸‹å˜åŒ–çš„ï¼Œé¢œè‰²èµ·å§‹äºé»‘è‰²ï¼Œç»ˆæ­¢äºç™½è‰²ã€‚\næ¸å˜è‰²çš„èµ·æ­¢é¢œè‰²ç”±setColorAtæ–¹æ³•è®¾ç½®ï¼Œè¯¥æ–¹æ³•åŸå‹å¦‚ä¸‹ï¼š\nvoid QGradient::setColorAt(qreal position, const QColor &amp;color)\n\nsetColorAt ä¸ä»…æ¥å—é¢œè‰²å‚æ•°ï¼Œè¿˜æ”¯æŒ postion å‚æ•°ï¼Œposition å‚æ•°çš„èŒƒå›´æ˜¯[0,1]ã€‚çº¿æ€§æ¸å˜é€šè¿‡èµ·æ­¢ä½ç½®ç¡®å®šäº†ä¸€æ¡å¸¦æ–¹å‘çš„çº¿æ®µï¼Œè€Œ position å‚æ•°åˆ™ç”¨äºç¡®å®šçº¿æ®µä¸Šçš„ä¸€ä¸ªå…·ä½“ä½ç½®ï¼Œç»“åˆpositionå’Œcolorå‚æ•°å°±å¯ä»¥è¡¨ç¤ºåœ¨æŸä¸€ä½ç½®çš„é¢œè‰²å€¼ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¯ä»¥ä½¿ç”¨ setColorAt æ–¹æ³•æŒ‡å®šå¤šä¸ªåœ¨[0,1]ä¹‹é—´çš„ä½ç½®åŠè¯¥ä½ç½®çš„é¢œè‰²ï¼ŒQtä¼šè‡ªåŠ¨åœ¨å¤šä¸ªé¢œè‰²ä¹‹é—´æ’å…¥è¿‡æ¸¡è‰²ï¼Œè¾¾åˆ°å¹³æ»‘è¿‡æ¸¡çš„æ•ˆæœã€‚\nç°åœ¨æˆ‘ä»¬åœ¨ 0.3 ä½ç½®æ’å…¥ä¸€ä¸ªéªšæ°”çš„çº¢è‰²ï¼Œ0.5ä½ç½®æ’å…¥é»„è‰²ï¼Œå…¶ä»–éƒ½ä¿æŒä¸å˜ï¼š\nlinearGrad.setColorAt(0, Qt::black);linearGrad.setColorAt(0.3, Qt::red);linearGrad.setColorAt(0.8, Qt::yellow);linearGrad.setColorAt(1, Qt::white);\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\næ¸å˜èŒƒå›´åœ¨ä¸Šé¢ä¸€èŠ‚ï¼Œæˆ‘ä»¬å¼ºè°ƒäº†æ‰€ç»˜åˆ¶çš„çŸ©å½¢çš„ä½ç½®&#x2F;å¤§å°ä¸æ¸å˜çš„èµ·æ­¢ä½ç½®æœ‰å…³ï¼Œè€Œä¸”åˆå¼ºè°ƒäº† position å‚æ•°æ‰€ç¡®å®šæ˜¯çº¿æ®µä¸Šçš„å…·ä½“ä½ç½®ã€‚å…¶æ ¹æœ¬åŸå› å°±åœ¨äºæ¸å˜æ˜¯æœ‰ä½ç½®å’ŒèŒƒå›´çš„ã€‚\nå¯¹äºçº¿æ€§æ¸å˜è€Œè¨€ï¼Œæ¸å˜çš„èŒƒå›´æ˜¯èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹é—´çš„çº¿æ®µï¼Œä½†é¢œè‰²åœ¨å‚ç›´äºè¯¥çº¿æ®µçš„æ–¹å‘å´æ˜¯æ— é™æ‰©å……çš„ï¼Œä¸‹é¢ç¤ºä¾‹å¯ä»¥å¾ˆå¥½çš„è¯´æ˜è¿™ä¸€ç‰¹æ€§ã€‚\n// Qt2DSampleçª—å£é•¿å®½ä¸º600x600void Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QLinearGradient linearGrad(QPointF(150, 150), QPointF(450, 450));  linearGrad.setColorAt(0, Qt::yellow);  linearGrad.setColorAt(0.5, Qt::red);  linearGrad.setColorAt(1, Qt::white);  QBrush brush(linearGrad);  painter.setBrush(brush);  painter.drawRect(0, 0, 600, 600);  // ä¸ä½¿ç”¨ç”»åˆ·ï¼Œç»˜åˆ¶ å·¦ä¸Šè§’ -&gt; å³ä¸‹è§’ ä¸ºçº¿æ€§æ¸å˜èµ·æ­¢ç‚¹çš„çŸ©å½¢  painter.setBrush(Qt::NoBrush);  painter.drawRect(150, 150, 300, 300);&#125;\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ¸å˜è‰²åœ¨å‚ç›´äºæ¸å˜çº¿æ®µï¼ˆä¸­é—´çŸ©å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’è¿æˆçš„æ–œçº¿ï¼‰æ–¹å‘æ— é™æ‰©å±•ï¼Œä½†ä¸ºä»€ä¹ˆåœ¨æ¸å˜èŒƒå›´è¾¹ç•Œä»¥å¤–è¿˜æœ‰é¢œè‰²å‘¢ï¼Ÿå¦‚å·¦ä¸Šè§’çš„é»„è‰²å’Œå³ä¸‹è§’çš„ç™½è‰²ï¼Œè¿™ä¸ªä¸æ¸å˜çš„å¦ä¸€ä¸ªå±æ€§ç‰¹æ€§æœ‰å…³ â€“ æ¸å˜ä¼ æ’­ï¼Œåé¢ç« èŠ‚æœ‰è¯¦ç»†ä»‹ç»ã€‚\né”¥å‘æ¸å˜QConicalGradient ç±»çš„æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š\nQConicalGradient(qreal cx, qreal cy, qreal angle)QConicalGradient(const QPointF &amp;center, qreal angle)\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;é”¥å‘æ¸å˜é€šè¿‡ä¸­å¿ƒç‚¹ï¼ˆcenterï¼‰å’Œèµ·å§‹è§’åº¦æ¥ï¼ˆangleï¼‰æ¥æ‰€è¿æ¥çš„ç›´çº¿ç¡®å®šå¡«å……çš„åˆå§‹æ–¹å‘ï¼Œç„¶åä»è¯¥ç›´çº¿å¼€å§‹é€†æ—¶é’ˆè¿›è¡Œ360åº¦å¡«å……ï¼Œè€Œä¸”æ¯ä¸ªè§’åº¦çš„é¢œè‰²éƒ½æ˜¯æ— é™å‘å¤–ä¼ æ’­çš„ã€‚\n\n// Qt2DSampleçª—å£é•¿å®½ä¸º200x200void Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  // è®¾å®šä¸­å¿ƒç‚¹åˆšå¥½åœ¨çª—å£ä¸­å¿ƒï¼Œèµ·å§‹è§’åº¦ä¸º45åº¦  QConicalGradient conicalGrad(QPointF(100, 100), 45);  conicalGrad.setColorAt(0, Qt::yellow);  conicalGrad.setColorAt(0.5, Qt::red);  conicalGrad.setColorAt(1, Qt::white);  QBrush brush(conicalGrad);  painter.setBrush(brush);  // ç»˜åˆ¶çš„çŸ©å½¢åŒºåŸŸä¸ºæ•´ä¸ªçª—å£å¤§å°  painter.drawRect(0, 0, 200, 200);&#125;\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¸å˜è‰²ä»45åº¦å¼€å§‹æ¸å˜ï¼Œå¹¶ä¸”æ¯ä¸ªè§’åº¦éƒ½æ— é™å‘å¤–ä¼ æ’­ï¼Œå¡«å……æ»¡äº†æ•´ä¸ªçŸ©å½¢ï¼š\n\nå¾„å‘æ¸å˜å¾„å‘æ¸å˜åˆ†ä¸ºç®€å•å¾„å‘æ¸å˜å’Œæ‰©å±•å¾„å‘æ¸å˜ï¼Œåœ¨ä»‹ç»äºŒè€…çš„ä¸åŒä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹QRadialGradient ç±»çš„æ„é€ å‡½æ•°å¯ä»¥å¤§è‡´åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š\n// æŒ‡å®šä¸­å¿ƒç‚¹ã€åŠå¾„ã€ç„¦ç‚¹ä½ç½®ã€ç„¦åŠå¾„QRadialGradient(const QPointF &amp;center, qreal centerRadius, const QPointF &amp;focalPoint, qreal focalRadius)// ä»…æŒ‡å®šä¸­å¿ƒç‚¹ã€åŠå¾„ï¼Œæ­¤æ—¶ç„¦ç‚¹ä½ç½®ä¸ä¸­å¿ƒç‚¹é‡åˆQRadialGradient(const QPointF &amp;center, qreal radius)// æŒ‡å®šä¸­å¿ƒç‚¹ã€åŠå¾„ã€ç„¦ç‚¹ä½ç½®QRadialGradient(const QPointF &amp;center, qreal radius, const QPointF &amp;focalPoint)\n\n\nä¸­å¿ƒç‚¹ï¼ˆcenterï¼‰å’ŒåŠå¾„ï¼ˆcenterRadiusï¼‰ç»„æˆäº†ä¸€ä¸ªåœ†ï¼Œè®°ä¸ºåœ†Aï¼Œå¾„å‘æ¸å˜çš„èŒƒå›´åªé™äºåœ†Aä»¥å†…ï¼Œåœ†Aä»¥å¤–çš„åŒºåŸŸæŒ‰ç…§æŒ‡å®šçš„æ¸å˜ä¼ æ’­æ–¹å¼è¿›è¡Œä¼ æ’­ï¼›\n\nç„¦ç‚¹ï¼ˆfocalPointï¼‰ä¸ºå¹³é¢ä¸Šçš„çš„ä¸€ä¸ªç‚¹ï¼Œç®€å•å¾„å‘æ¸å˜å’Œæ‰©å±•å¾„å‘æ¸å˜å¯¹ç„¦ç‚¹çš„ä½ç½®æœ‰ä¸åŒçš„è¦æ±‚ï¼Œè¿™ä¸ªåŒºåˆ«åœ¨åé¢ä¼šä»‹ç»ï¼›\n\nç„¦åŠå¾„ï¼ˆfocalRadiusï¼‰åˆ™æ˜¯å›´ç»•ç„¦ç‚¹æ‰€ä½œçš„å¦å¤–ä¸€ä¸ªåœ†ï¼ˆè®°ä¸ºåœ†Bï¼‰çš„åŠå¾„ã€‚\n\n\næ‰©å±•å¾„å‘æ¸å˜æ˜¯åœ¨ç®€å•å¾„å‘æ¸å˜çš„åŸºç¡€ä¸Šé¢å¤–ä½¿ç”¨äº† focalRadiusï¼ˆç„¦ç‚¹åŠå¾„ï¼‰è¿™ä¸ªå‚æ•°ã€‚\nç®€å•å¾„å‘æ¸å˜ç„¦ç‚¹å’Œåœ†Aåœ†å¼§ä¸Šçš„æ¯ä¸€ä¸ªç‚¹éƒ½å¯ä»¥ç»„æˆä¸€æ¡çº¿æ®µï¼Œå¦‚æœæŒ‰ç…§1åº¦å–ä¸€ä¸ªç‚¹ï¼Œå°±æœ‰360ä¸ªçº¿æ®µï¼Œç®€å•å¾„å‘æ¸å˜å°±æ˜¯å¯¹è¿™360ä¸ªçº¿æ®µéƒ½è¿›è¡Œçº¿æ€§æ¸å˜ã€‚\nå¯¹äºç®€å•å¾„å‘æ¸å˜è€Œè¨€ï¼Œå…è®¸ç„¦ç‚¹ä½äºåœ†å¼§ä¸Šå’Œåœ†å¤–ï¼Œå¦‚æœç„¦ç‚¹ä½äºåœ†å¤–ï¼Œä¼šè‡ªåŠ¨å°†å…¶é€€ç¼©åˆ°åœ†å¼§ä¸Šã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•å¾„å‘æ¸å˜çš„ä¾‹å­ï¼š\n// Qt2DSampleçª—å£é•¿å®½ä¸º600x600void Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  // ç„¦ç‚¹ä½äºåœ†å†…å³ä¸Šè§’éƒ¨åˆ†  QRadialGradient radialGrad(QPointF(300, 300), 200, QPointF(400, 200));  radialGrad.setColorAt(0, Qt::white);  radialGrad.setColorAt(1, Qt::black);  QBrush brush(radialGrad);  painter.setBrush(brush);  painter.drawRect(0, 0, 600, 600);&#125;\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¾„å‘æ¸å˜çš„èŒƒå›´åªé™äºåœ†å†…ï¼Œåœ†å¤–çš„åŒºåŸŸé»˜è®¤é‡‡ç”¨PadSpreadæ–¹å¼ä¼ æ’­ï¼š\n\næ‰©å±•å¾„å‘æ¸å˜æ‰©å±•å¾„å‘æ¸å˜ä½¿ç”¨ç„¦ç‚¹å’Œç„¦åŠå¾„åˆç»„æˆäº†ä¸€ä¸ªåœ†Bï¼Œä¸ç®€å•å¾„å‘æ¸å˜ç±»ä¼¼ï¼Œä¹Ÿæ˜¯é€šè¿‡å¯¹åœ†Aåœ†å¼§ä¸Šçš„æ¯ä¸ªç‚¹çš„è¿çº¿åšçº¿æ€§æ¸å˜æ¥å®ç°ï¼Œä½†è¿™æ¬¡ä¸æ˜¯ç„¦ç‚¹ä¸åœ†Aåœ†å¼§ä¸Šçš„ç‚¹è¿›è¡Œè¿çº¿ï¼Œè€Œæ˜¯â€œåœ†Båœ†å¼§ä¸Šçš„ç‚¹â€ä¸â€œåœ†Aåœ†å¼§ä¸Šçš„ç‚¹â€çš„è¿çº¿ï¼Œå¯¹è¿™äº›è¿çº¿åšçº¿æ€§æ¸å˜ã€‚\nåœ†Bå§‹ç»ˆå¡«å……èµ·å§‹é¢œè‰²ã€‚\nä¸ç®€å•å¾„å‘æ¸å˜ä¸åŒçš„æ˜¯ï¼Œåœ†Bå¿…é¡»å®Œå…¨åœ¨åœ†Aé‡Œé¢ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªæ‰©å±•å¾„å‘æ¸å˜çš„ä¾‹å­ï¼š\n// Qt2DSampleçª—å£é•¿å®½ä¸º600x600void Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  // ç„¦ç‚¹ä½äºåœ†å†…å³ä¸Šè§’éƒ¨åˆ†ï¼Œç„¦åŠå¾„ä¸º30  QRadialGradient radialGrad(QPointF(300, 300), 200, QPointF(400, 200), 30);  radialGrad.setColorAt(0, Qt::white);  radialGrad.setColorAt(1, Qt::black);  QBrush brush(radialGrad);  painter.setBrush(brush);  painter.drawRect(0, 0, 600, 600);&#125;\n\næ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\næ¸å˜ä¼ æ’­åœ¨Qtä¸­é€šè¿‡ setSpread æ–¹æ³•è®¾ç½®æ¸å˜ä¼ æ’­æ–¹å¼ï¼š\nvoid QGradient::setSpread(QGradient::Spread method)\n\nQGradient::Spreadæšä¸¾å®šä¹‰äº†ä¸‰ç§ä¼ æ’­æ–¹å¼ï¼š\n\nQGradient::PadSpread\nQGradient::RepeatSpread\nQGradient::ReflectSpread\n\né»˜è®¤ä¸ºä¼ æ’­æ–¹å¼ä¸º QGradient::PadSpreadï¼Œè€Œä¸”ç”±é”¥å‘æ¸å˜çš„è¡Œä¸ºå¯çŸ¥ï¼Œé”¥å‘æ¸å˜æ˜¯æ²¡æœ‰æ¸å˜ä¼ æ’­ä¸€è¯´çš„ï¼Œå› æ­¤å®ƒå§‹ç»ˆéƒ½æ˜¯360åº¦æ¸å˜ã€‚\nä¸‹å›¾å½¢è±¡è¯´æ˜äº†ä¸‰ç§ä¼ æ’­æ–¹å¼çš„å·®å¼‚ï¼š\n\n\nPadSpread æ–¹å¼å»¶ç»­äº†èµ·ç‚¹ä¸ç»ˆç‚¹å¤„å„è‡ªçš„é¢œè‰²ï¼Œæ— é™ä¼ æ’­\nRepeatSpread æ–¹å¼ä¸æ–­é‡å¤æ¸å˜è¾¹ç•Œå†…çš„è¿™ä¸€é¢œè‰²çš„æ¸å˜æ¨¡å¼\nReflectSpread æ–¹å¼å°†æ¸å˜è¾¹ç•Œå†…çš„æ¨¡å¼ä¸æ–­å¾€å¤–é•œåƒåå°„\n\næ¸å˜ä¸»é¢˜è®¾è®¡ä¸€ä¸ªæ¼‚äº®çš„æ¸å˜è‰²å¹¶éæ˜“äº‹ï¼ŒQtæä¾›äº†å†…ç½®çš„æ¸å˜ä¸»é¢˜(Preset)ï¼Œè¿™äº›ä¸»é¢˜é€šè¿‡ QGradient::Preset æšä¸¾ç±»å‹æä¾›ï¼ˆè¯¥æšä¸¾ä» Qt 5.12 å¼€å§‹å¼•å…¥ï¼‰ã€‚\n\nä»Qtå®˜æ–¹æ–‡æ¡£å¾—çŸ¥ï¼ŒQGradient::Preseté¢„ç½®æ¸å˜ä¸»é¢˜æ–¹æ¡ˆæ˜¯åŸºäºhttps://webgradients.com/å®ç°çš„ã€‚\n\nQGradient ç±»æ”¯æŒé€šè¿‡QGradient::Preset æšä¸¾ç±»å‹ç›´æ¥æ„é€ ï¼š\nQGradient::QGradient(QGradient::Preset preset)\n\nä¸‹é¢æ˜¯ä½¿ç”¨QGradient::Presetçš„ç¤ºä¾‹ï¼š\nvoid Qt2DSample::paintEvent(QPaintEvent* e) &#123;  QPainter painter(this);  painter.setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing);  QGradient grad(QGradient::HealthyWater);  QBrush brush(grad);  painter.setBrush(brush);  painter.drawRect(0, 0, 600, 600);&#125;\n\nç½‘ç«™æ¨èä¸‹é¢å‡ ä¸ªç½‘ç«™ä¹Ÿæä¾›äº†æ¼‚äº®çš„æ¸å˜è‰²æ–¹æ¡ˆï¼Œå¯ä»¥ç”¨ä½œå‚è€ƒï¼š\n\ngrabient.com\nuigradients.com\nwebgradients.com\n\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"NSISçš„ç°ä»£ç•Œé¢ç¤ºä¾‹","url":"/post/3798382521.html","content":"NSIS çš„ç°ä»£ç”¨æˆ·ç•Œé¢(Modern UI)åªæ˜¯ç›¸å¯¹äºä¼ ç»Ÿï¼ˆä¸‘é™‹ï¼‰çš„ç•Œé¢è€Œè¨€çš„â€œç°ä»£â€è€Œå·²ã€‚å®ƒå®šä¹‰åœ¨MUI2.nshä¸­ï¼Œnsh æ–‡ä»¶ç±»ä¼¼ C++ä¸­çš„å¤´æ–‡ä»¶ï¼Œå¯ä»¥è¢«å…¶ä»–æ¨¡å—åŒ…å«å¼•ç”¨ã€‚\n\n\n\nğŸ“Œ æ¨èï¼šNSIS-UI-Plugin å¼€æº NSIS UI æ’ä»¶æ¡†æ¶ï¼Œæ”¯æŒä»»æ„ç¬¬ä¸‰æ–¹ç•Œé¢åº“ã€‚é»˜è®¤ä½¿ç”¨ Qt ä½œä¸ºç•Œé¢åº“çš„å®‰è£…åŒ…ç¤ºä¾‹ã€‚\n\nä½¿ç”¨ MUI2 ç•Œé¢éœ€è¦åŒ…å«MUI2.nshï¼š\n!include &quot;MUI2.nsh&quot;\n\nMUI2 ç•Œé¢å’Œä¼ ç»Ÿç•Œé¢ä¸åŒä¹‹å¤„åœ¨äºï¼Œä¼ ç»Ÿç•Œé¢ä½¿ç”¨çš„Page(æˆ–PageEx)è¯­æ³•æ¥æ ‡è¯†æ˜¾ç¤ºå“ªäº›é¡µé¢ï¼Œå¦‚ï¼š\nPageEx license    LicenseData &quot;license.rtf&quot;       #å¯ä»¥æ˜¯txtæˆ–rtfæ–‡ä»¶æ ¼å¼PageExEnd\n\nè€Œ MUI2 ä½¿ç”¨çš„æ˜¯MUI2.nshä¸­å®šä¹‰çš„ä¸€ç³»åˆ—å®æ¥æ ‡è¯†æ˜¾ç¤ºå“ªäº›é¡µé¢ï¼Œå¦‚ï¼š\n!insertmacro MUI_PAGE_LICENSE &quot;license.rtf&quot;\n\nå’Œ NSIS çš„ä¼ ç»Ÿç•Œé¢ç¤ºä¾‹ç±»ä¼¼ï¼Œè¿™é‡Œæä¾›åˆ¶ä½œç½‘æ˜“äº‘éŸ³ä¹çš„ç°ä»£ç”¨æˆ·ç•Œé¢çš„å®‰è£…åŒ…ç¤ºä¾‹ï¼Œè„šæœ¬ä»£ç ä¸­å·²ç»åŒ…å«äº†è¯¦ç»†çš„æ³¨é‡Šã€‚\né«˜ä»¿ç½‘æ˜“äº‘éŸ³ä¹å®‰è£…è„šæœ¬# ====================== è‡ªå®šä¹‰å® ==============================!define PRODUCT_NAME           &quot;ç½‘æ˜“äº‘éŸ³ä¹&quot;!define EXE_NAME               &quot;cloudmusic.exe&quot;!define PRODUCT_VERSION        &quot;1.0.0.1&quot;!define PRODUCT_PUBLISHER      &quot;NetEase&quot;!define PRODUCT_LEGAL          &quot;NetEase 1999-2014&quot;!define TEMP_DIR               &quot;&quot;# ===================== å¤–éƒ¨æ’ä»¶ä»¥åŠå® =============================!include &quot;MUI2.nsh&quot;# ===================== å®‰è£…åŒ…ç‰ˆæœ¬ =============================VIProductVersion                    &quot;$&#123;PRODUCT_VERSION&#125;&quot;VIAddVersionKey &quot;ProductVersion&quot;    &quot;$&#123;PRODUCT_VERSION&#125;&quot;VIAddVersionKey &quot;ProductName&quot;       &quot;$&#123;PRODUCT_NAME&#125;&quot;VIAddVersionKey &quot;CompanyName&quot;       &quot;$&#123;PRODUCT_PUBLISHER&#125;&quot;VIAddVersionKey &quot;FileVersion&quot;       &quot;$&#123;PRODUCT_VERSION&#125;&quot;VIAddVersionKey &quot;InternalName&quot;      &quot;$&#123;EXE_NAME&#125;&quot;VIAddVersionKey &quot;FileDescription&quot;   &quot;$&#123;PRODUCT_NAME&#125;&quot;VIAddVersionKey &quot;LegalCopyright&quot;    &quot;$&#123;PRODUCT_LEGAL&#125;&quot;# ==================== NSISå±æ€§ ================================# ZLIB(é»˜è®¤) BZIP2 LZMASetCompressor lzma; å®‰è£…åŒ…åå­—.Name &quot;$&#123;PRODUCT_NAME&#125;&quot;# å®‰è£…ç¨‹åºæ–‡ä»¶å.OutFile &quot;ç½‘æ˜“äº‘éŸ³ä¹å®‰è£…0.exe&quot;# é»˜è®¤å®‰è£…ä½ç½®.InstallDir &quot;$PROGRAMFILES\\Netease\\CloudMusic&quot;# è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå®‰è£…è¯¦ç»†ä¿¡æ¯ã€‚ShowInstDetails hide# è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå¸è½½è¯¦ç»†ä¿¡æ¯ShowUnInstDetails   hide# é’ˆå¯¹Vistaå’Œwin7 çš„UACè¿›è¡Œæƒé™è¯·æ±‚.# RequestExecutionLevel none|user|highest|adminRequestExecutionLevel admin# ==================== MUIå±æ€§ ==================================# å®‰è£…å’Œå¸è½½ç¨‹åºå›¾æ ‡!define MUI_ICON              &quot;image\\logo.ico&quot;!define MUI_UNICON            &quot;image\\un_logo.ico&quot;# å¦‚æœæœªä½¿ç”¨MUIï¼Œåˆ™å¯ç›´æ¥ä½¿ç”¨.onGUIInit!define MUI_CUSTOMFUNCTION_GUIINIT onGUIInit# å®‰è£…ç¨‹åºæ¬¢è¿é¡µé¢!insertmacro MUI_PAGE_WELCOME# å®‰è£…ç¨‹åºè½¯ä»¶æˆæƒç”³æ˜é¡µé¢!insertmacro MUI_PAGE_LICENSE &quot;license.rtf&quot;# å®‰è£…ç¨‹åºæ˜¾ç¤ºå®‰è£…ç›®å½•é€‰æ‹©é¡µé¢!insertmacro MUI_PAGE_DIRECTORY# å®‰è£…ç¨‹åºæ˜¾ç¤ºå®‰è£…ç»„ä»¶é€‰æ‹©é¡µé¢!insertmacro MUI_PAGE_COMPONENTS# å®‰è£…ç¨‹åºæ˜¾ç¤ºè¿›åº¦é¡µé¢!insertmacro MUI_PAGE_INSTFILES# å®‰è£…ç¨‹åºæ˜¾ç¤ºå®‰è£…ç»“æŸé¡µé¢!insertmacro MUI_PAGE_FINISH# å¸è½½ç¨‹åºæ˜¾ç¤ºè¿›åº¦!insertmacro MUI_UNPAGE_INSTFILES# å¸è½½ç¨‹åºæ˜¾ç¤ºå®‰è£…ç»“æŸ!insertmacro MUI_UNPAGE_FINISH# æŒ‡å®šè¯­è¨€ï¼Œå¿…é¡»åœ¨æœ€åæŒ‡å®š!insertmacro MUI_LANGUAGE &quot;SimpChinese&quot;# ========================= å®‰è£…æ­¥éª¤ ===============================# åŒºæ®µ1# åŒºæ®µåä»¥ä¸€ä¸ª ! å¼€å¤´ï¼Œé‚£ä¹ˆè¯¥åŒºæ®µçš„æ˜¾ç¤ºåç§°å°†ä»¥ç²—ä½“å­—æ˜¾ç¤º.Section &quot;!Files&quot; &quot;des_files&quot;  ; è®¾ç½®æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„  SetOutPath $INSTDIR  ; æ”¾ç½®æ–‡ä»¶  File /r &quot;app\\*.*&quot;SectionEnd# åŒºæ®µ2Section &quot;Shortcut&quot; &quot;des_shortcut&quot;  SetShellVarContext all  CreateDirectory &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;&quot;  CreateShortCut &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\$&#123;PRODUCT_NAME&#125;.lnk&quot; &quot;$INSTDIR\\$&#123;EXE_NAME&#125;&quot;  CreateShortCut &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\å¸è½½$&#123;PRODUCT_NAME&#125;.lnk&quot; &quot;$INSTDIR\\uninst.exe&quot;  SetShellVarContext currentSectionEnd# åŒºæ®µ3# åŒºæ®µåä¸ºç©ºã€é—æ¼æˆ–è€…ä»¥ä¸€ä¸ª &quot;-&quot; å¼€å¤´ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ä¸€ä¸ªéšè—çš„åŒºæ®µï¼Œç”¨æˆ·ä¹Ÿä¸èƒ½é€‰æ‹©ç¦æ­¢å®ƒ.Section &quot;-Necessary&quot;\t# ç”Ÿæˆå¸è½½ç¨‹åº\tWriteUninstaller &quot;$INSTDIR\\uninst.exe&quot;\t# æ·»åŠ å¸è½½ä¿¡æ¯åˆ°æ§åˆ¶é¢æ¿\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;DisplayName&quot; &quot;$&#123;PRODUCT_NAME&#125;&quot;\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;UninstallString&quot; &quot;$INSTDIR\\uninst.exe&quot;\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;DisplayIcon&quot; &quot;$INSTDIR\\$&#123;EXE_NAME&#125;&quot;\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;Publisher&quot; &quot;$INSTDIR\\$&#123;PRODUCT_PUBLISHER&#125;&quot;SectionEnd# å¸è½½åŒºæ®µSection &quot;Uninstall&quot;  ; åˆ é™¤å¿«æ·æ–¹å¼  SetShellVarContext all  Delete &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\$&#123;PRODUCT_NAME&#125;.lnk&quot;  Delete &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\å¸è½½$&#123;PRODUCT_NAME&#125;.lnk&quot;  RMDir &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\&quot;  Delete &quot;$DESKTOP\\$&#123;PRODUCT_NAME&#125;.lnk&quot;  SetShellVarContext current  SetOutPath &quot;$INSTDIR&quot;  ; åˆ é™¤å®‰è£…çš„æ–‡ä»¶  Delete &quot;$INSTDIR\\*.*&quot;  SetOutPath &quot;$DESKTOP&quot;  RMDir /r &quot;$INSTDIR&quot;  RMDir &quot;$INSTDIR&quot;  SetAutoClose trueSectionEnd# åŒºæ®µæè¿°!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN  !insertmacro MUI_DESCRIPTION_TEXT $&#123;des_files&#125;     &quot;ä¸»ç¨‹åºæ–‡ä»¶&quot;  !insertmacro MUI_DESCRIPTION_TEXT $&#123;des_shortcut&#125;  &quot;åˆ›å»ºå¼€å§‹èœå•å’Œæ¡Œé¢å¿«æ·æ–¹å¼&quot;!insertmacro MUI_FUNCTION_DESCRIPTION_END# ============================== å›è°ƒå‡½æ•° ====================================# å‡½æ•°åä»¥â€œ.â€å¼€å¤´çš„ä¸€èˆ¬ä½œä¸ºå›è°ƒå‡½æ•°ä¿ç•™.# å‡½æ•°åä»¥â€œun.â€å¼€å¤´çš„å‡½æ•°å°†ä¼šè¢«åˆ›å»ºåœ¨å¸è½½ç¨‹åºé‡Œï¼Œå› æ­¤ï¼Œæ™®é€šå®‰è£…åŒºæ®µå’Œå‡½æ•°ä¸èƒ½è°ƒç”¨å¸è½½å‡½æ•°ï¼Œè€Œå¸è½½åŒºæ®µå’Œå¸è½½å‡½æ•°ä¹Ÿä¸èƒ½è°ƒç”¨æ™®é€šå‡½æ•°ã€‚Function .onInitFunctionEndFunction onGUIInitFunctionEnd# å®‰è£…æˆåŠŸä»¥å.Function .onInstSuccessFunctionEnd# å¸è½½æ“ä½œå¼€å§‹å‰.Function un.onInit    MessageBox MB_ICONQUESTION|MB_YESNO &quot;ä½ ç¡®å®è¦å®Œå…¨åˆ é™¤ç½‘æ˜“äº‘éŸ³ä¹ï¼ŒåŠå…¶æ‰€æœ‰ç»„ä»¶å—?&quot; /SD IDYES IDYES +2 IDNO +1    AbortFunctionEnd# å¸è½½æˆåŠŸä»¥å.Function un.onUninstSuccess    MessageBox MB_ICONINFORMATION|MB_OK &quot;$&#123;PRODUCT_NAME&#125; å·²æˆåŠŸåœ°ä»ä½ çš„è®¡ç®—æœºç§»é™¤&quot; /SD IDOKFunctionEnd\n\nè¿è¡Œæ•ˆæœ\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["NSIS"]},{"title":"Visual Studio æ–­ç‚¹ä½¿ç”¨æ‰‹å†Œ","url":"/post/966041457.html","content":"Visual Studio çš„æ–­ç‚¹ç³»ç»Ÿè¿œä¸æ­¢â€åœ¨ä»£ç è¡Œä¸Šç‚¹å‡»å·¦ä¾§è¾¹æ â€é‚£ä¹ˆç®€å•ã€‚æŒæ¡å…¶é«˜çº§åŠŸèƒ½å¯ä»¥å½»åº•æ”¹å˜ä½ çš„è°ƒè¯•ä½“éªŒï¼Œè®©ä½ èƒ½ç²¾å‡†å®šä½é—®é¢˜ï¼Œè€Œä¸æ˜¯åœ¨æ— å°½çš„ä»£ç æ‰§è¡Œä¸­ç›²ç›®æœç´¢ã€‚æœ¬æ–‡å°†å¸¦ä½ å…¨é¢äº†è§£ Visual Studio æ–­ç‚¹ç³»ç»Ÿçš„å„é¡¹é«˜çº§åŠŸèƒ½ã€‚\n\n\næ¡ä»¶æ–­ç‚¹æ¡ä»¶æ–­ç‚¹å…è®¸ä½ è®¾ç½®ç‰¹å®šæ¡ä»¶ï¼Œåªæœ‰æ»¡è¶³è¿™äº›æ¡ä»¶æ—¶è°ƒè¯•å™¨æ‰ä¼šæš‚åœã€‚\næ”¯æŒå¦‚ä¸‹æ ¼å¼çš„è¡¨è¾¾å¼ï¼š\n// åŸºæœ¬æ¡ä»¶i &gt; 100name == &quot;admin&quot;// å¤åˆæ¡ä»¶x &gt; 50 &amp;&amp; y &lt; 20 &amp;&amp; isValid == true// å­—ç¬¦ä¸²æ“ä½œï¼ˆC++ï¼‰strcmp(filename, &quot;config.xml&quot;) == 0strlen(buffer) &gt; 255\n\næ”¯æŒçš„å†…ç½®å‡½æ•°å¦‚ä¸‹ï¼š\n\nstrlen(str)ï¼šè·å–å­—ç¬¦ä¸²é•¿åº¦\nstrcmp(str1, str2)ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²\nstrncmp(str1, str2, n)ï¼šæ¯”è¾ƒå‰nä¸ªå­—ç¬¦\nstrstr(haystack, needle)ï¼šæŸ¥æ‰¾å­å­—ç¬¦ä¸²\nGetLastError()ï¼šè·å–ç³»ç»Ÿé”™è¯¯ä»£ç \n\næ–­ç‚¹ç­›é€‰å™¨å½“è°ƒè¯•å¤šçº¿ç¨‹æˆ–åˆ†å¸ƒå¼åº”ç”¨æ—¶ï¼Œç­›é€‰å™¨èƒ½ç¡®ä¿æ–­ç‚¹åªåœ¨ç‰¹å®šç¯å¢ƒä¸­è§¦å‘ã€‚\næ”¯æŒå¦‚ä¸‹ç­›é€‰å­—æ®µï¼š\n\nMachineName\nProcessId\nProcessName\nThreadId\nThreadName\n\nThreadId = 1234ProcessName = &quot;MyApp.exe&quot;MachineName = &quot;Development-PC&quot;ThreadName = &quot;WorkerThread&quot;\n\nç­›é€‰å™¨çš„é€»è¾‘è¿ç®—ä¸æ¡ä»¶æ–­ç‚¹æœ‰äº›ä¸ä¸€æ ·ï¼Œé€»è¾‘ç­‰å·ä½¿ç”¨=ï¼Œé€»è¾‘ä¸ä½¿ç”¨&amp;ï¼Œé€»è¾‘æˆ–ä½¿ç”¨||ï¼Œé€»è¾‘éä½¿ç”¨!ï¼Œæ²¡æœ‰ä¸ç­‰å·ã€‚\nç¤ºä¾‹ï¼š\nMachineName = &quot;MyPC&quot;ProcessId = 1234ThreadId = 1234 &amp; MachineName = &quot;DevPC&quot;ThreadId = 1234 || ProcessId = 4!ThreadId = 5678\n\nè·Ÿè¸ªå™¨åœ¨â€œæ–­ç‚¹â€ä¸­é€‰æ‹©â€œæ“ä½œâ€ï¼Œè¾“å…¥è·Ÿè¸ªæŒ‡ä»¤å³å¯ï¼Œé€šå¸¸ï¼Œä¸ºäº†ä¸å½±å“ç¨‹åºæ‰§è¡Œæµï¼Œå»ºè®®åŒæ—¶å‹¾é€‰ â€‹â€‹â€œç»§ç»­æ‰§è¡Œâ€â€‹ï¼Œè¿™æ ·ç¨‹åºè¿è¡Œåˆ°æ­¤å¤„æ—¶å°±ä¸ä¼šä¸­æ–­ï¼Œè€Œæ˜¯ç›´æ¥è¾“å‡ºä¿¡æ¯åç»§ç»­è¿è¡Œã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æ”¯æŒå¦‚ä¸‹æ ¼å¼çš„æŒ‡ä»¤ï¼š\n\nç›´æ¥è¾“å…¥å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ â€œå¾ªç¯åˆ°äº†è¿™é‡Œâ€ã€‚\n\nä½¿ç”¨å˜é‡åï¼Œç”¨å¤§æ‹¬å· {}æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ â€œå½“å‰ i çš„å€¼ä¸º: {i}â€ã€‚è¾“å‡ºæ—¶ï¼Œ{i}ä¼šè¢«æ›¿æ¢ä¸ºå˜é‡ içš„å®é™…å€¼ã€‚\n\nä½¿ç”¨ä¸€äº›é¢„å®šä¹‰çš„å…³é”®å­—â€‹ï¼ˆä»¥ $å¼€å¤´ï¼‰ï¼Œä¾‹å¦‚ï¼š\n$ADDRESS- å½“å‰æŒ‡ä»¤åœ°å€$CALLER- è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°åç§°$FUNCTION- å½“å‰å‡½æ•°åç§°$TID- å½“å‰çº¿ç¨‹ ID$PID- å½“å‰è¿›ç¨‹ ID\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","é€ŸæŸ¥æ‰‹å†Œ"]},{"title":"Qté™æ€åº“ç¼–è¯‘","url":"/post/3406024791.html","content":"\nä½¿ç”¨Qté™æ€åº“è¿èƒŒäº†Qtçš„å…è´¹ä½¿ç”¨åè®®ï¼\n\nç¼–è¯‘ç¼–è¯‘Qtæºç éœ€è¦æå‰å®‰è£…å¦‚ä¸‹å·¥å…·ï¼š\n\nnasm\nperl\ngperf\nwin_flex_bison\nllvm\npython2\nopenssl\n\n\n\nWindowsç¼–è¯‘ä¸ºäº†æ–¹ä¾¿ç¼–è¯‘ï¼Œæˆ‘å·²å°†è¿™äº›å·¥å…·å’Œæ‰“åŒ…è„šæœ¬æäº¤åˆ°äº†æˆ‘çš„å¼€æºé¡¹ç›®qt-source-compileä¸­ã€‚\nåªéœ€å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°ï¼Œé€‰æ‹©å¯¹åº”çš„æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆå¦‚msvc2022-5.15.2-x86-static-mt.batï¼‰ï¼Œç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ä¸­çš„qt_src_folderå˜é‡ï¼ˆQtæºç è·¯å¾„ï¼‰å’Œvcvarsall_pathå˜é‡ï¼ˆVisual Studioè·¯å¾„ï¼‰ï¼Œæœ€åè¿è¡Œè¯¥æ‰¹å¤„ç†å³å¯ç¼–è¯‘ã€‚\nç–‘éš¾é—®é¢˜opensslé“¾æ¥å¤±è´¥é”™è¯¯æç¤ºå¦‚ä¸‹ï¼š\nERROR: Feature &#x27;openssl-linked&#x27; was enabled, but the pre-condition &#x27;!features.securetransport &amp;&amp; !features.schannel &amp;&amp; libs.openssl&#x27; failed.\nä¸Šè¿°é”™è¯¯å¯èƒ½æ˜¯ç”±äºæŒ‡å®šopensslçš„includeã€libç›®å½•æœ€ååŒ…å«\\å¯¼è‡´ã€‚\n","categories":["â‘£Qtå¥‡è¶£å±‹"]},{"title":"Windowså†…å­˜æ¢ç´¢ï¼šä»è™šæ‹Ÿå†…å­˜åˆ°å †ç®¡ç†çš„æ ¸å¿ƒæœºåˆ¶","url":"/post/2494475058.html","content":"åœ¨ Windows å¼€å‘ä¸­ï¼Œå¯¹å†…å­˜çš„ç†è§£æ·±åº¦ï¼Œå¾€å¾€ç›´æ¥å†³å®šäº†ä¸€ä¸ªç¨‹åºçš„ç¨³å®šæ€§ã€æ€§èƒ½ä¸å®‰å…¨è¾¹ç•Œã€‚é‚£äº›çœ‹ä¼¼çªç„¶çš„ç¨‹åºå´©æºƒã€éš¾ä»¥è¿½è¸ªçš„å†…å­˜æ³„æ¼ï¼Œæˆ–æ˜¯æ€§èƒ½åˆ†æå·¥å…·ä¸­ä»¤äººå›°æƒ‘çš„å†…å­˜æ•°æ®ï¼Œå…¶æ ¹æºå¸¸æ·±æ¤äºæˆ‘ä»¬å¯¹ç³»ç»Ÿå†…å­˜æœºåˆ¶çš„ç†è§£ç›²åŒºã€‚\nWindows å†…å­˜ç®¡ç†æ˜¯ä¸€å¥—å±‚æ¬¡åˆ†æ˜ã€ç¯ç¯ç›¸æ‰£çš„ç²¾å¯†ä½“ç³»ã€‚ä»åº”ç”¨ç¨‹åºè§†è§’çœ‹åˆ°çš„è¿ç»­â€œå†…å­˜â€ï¼Œå®é™…ä¸Šæ˜¯è™šæ‹Ÿå†…å­˜æŠ€æœ¯ç²¾å¿ƒè¥é€ çš„æŠ½è±¡ç©ºé—´ï¼›æ”¯æ’‘ç¨‹åºè¿è¡Œçš„ç‰©ç†èµ„æºï¼Œåˆ™é€šè¿‡åˆ†é¡µæœºåˆ¶åœ¨ç‰©ç†å†…å­˜ä¸ç£ç›˜é—´çµæ´»æµåŠ¨ã€‚è€Œå¼€å‘è€…æ—¥å¸¸æ‰“äº¤é“çš„å †å†…å­˜ï¼Œåˆ™æ˜¯ç³»ç»Ÿåœ¨è¿™ä¸€åºå¤§æŠ½è±¡ä¹‹ä¸Šï¼Œä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå…¼é¡¾æ•ˆç‡ä¸ä¾¿åˆ©çš„å…³é”®æœåŠ¡å±‚ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå†…å­˜æ˜ å°„æ–‡ä»¶ç­‰é«˜çº§ç‰¹æ€§ï¼Œåˆ™æ‰“é€šäº† I&#x2F;O ä¸å†…å­˜çš„è¾¹ç•Œï¼Œå±•ç°äº†ç³»ç»Ÿç»Ÿä¸€ç®¡ç†èµ„æºçš„å¼ºå¤§èƒ½åŠ›ã€‚\næœ¬æ–‡å°†ä¸ºä½ å˜æ¸…è¿™äº›æ ¸å¿ƒæ¦‚å¿µä¹‹é—´çš„å†…åœ¨è”ç³»ä¸è¿ä½œé€»è¾‘ã€‚æˆ‘ä»¬ä¸è¿‡åº¦æ·±å…¥è‰°æ¶©çš„å†…æ ¸ç»†èŠ‚ï¼Œè€Œæ˜¯èšç„¦äºä¸ºå¼€å‘è€…å»ºç«‹æ¸…æ™°ã€å‡†ç¡®ã€å®ç”¨çš„è®¤çŸ¥æ¨¡å‹ã€‚ç†è§£è¿™äº›æœºåˆ¶å¦‚ä½•å…±åŒä½œç”¨ï¼Œèƒ½å¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°è¯Šæ–­å†…å­˜é—®é¢˜ã€ä¼˜åŒ–ç¨‹åºæ€§èƒ½ï¼Œå¹¶ä»æ ¹æœ¬ä¸Šå†™å‡ºæ›´ä¸ºå¥å£®å¯é çš„ Windows åº”ç”¨ç¨‹åºã€‚\nè®©æˆ‘ä»¬ä»åŸºæœ¬æ¦‚å¿µå‡ºå‘ï¼Œé€æ­¥æ„å»ºèµ·å…³äº Windows å†…å­˜è¿ä½œçš„ç³»ç»Ÿæ€§ç†è§£ã€‚\n\n\nå®æ¨¡å¼ä¸‹å†…å­˜åˆ†é…æœºåˆ¶åœ¨ 8086 æˆ–è€… 80186 ä»¥å‰ï¼Œæˆ‘ä»¬è¿è¡Œç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠç¨‹åºå…¨éƒ½è£…å…¥å†…å­˜ï¼Œç¨‹åºéƒ½æ˜¯ç›´æ¥è¿è¡Œåœ¨ç‰©ç†å†…å­˜ä¸Šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ç¨‹åºä¸­è®¿é—®çš„å†…å­˜åœ°å€éƒ½æ˜¯å®é™…çš„ç‰©ç†å†…å­˜åœ°å€ã€‚å½“è®¡ç®—æœºåŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºæ—¶ï¼Œå¿…é¡»ä¿è¯è¿™äº›ç¨‹åºç”¨åˆ°çš„å†…å­˜æ€»é‡è¦å°äºè®¡ç®—æœºå®é™…ç‰©ç†å†…å­˜çš„å¤§å°ã€‚\nä¾‹å¦‚æŸå°è®¡ç®—æœºæ€»çš„å†…å­˜å¤§å°æ˜¯ 128M ï¼Œç°åœ¨åŒæ—¶è¿è¡Œä¸¤ä¸ªç¨‹åº A å’Œ B ï¼ŒA éœ€å ç”¨å†…å­˜ 10M ï¼Œ B éœ€å ç”¨å†…å­˜ 110M ã€‚è®¡ç®—æœºåœ¨ç»™ç¨‹åºåˆ†é…å†…å­˜æ—¶ä¼šé‡‡å–è¿™æ ·çš„æ–¹æ³•ï¼šå…ˆå°†å†…å­˜ä¸­çš„å‰ 10M åˆ†é…ç»™ç¨‹åº A ï¼Œæ¥ç€å†ä»å†…å­˜ä¸­å‰©ä½™çš„ 118M ä¸­åˆ’åˆ†å‡º 110M åˆ†é…ç»™ç¨‹åº B ã€‚è¿™ç§åˆ†é…æ–¹æ³•è™½ç„¶å¯ä»¥ä¿è¯ç¨‹åº A å’Œç¨‹åº B éƒ½èƒ½è¿è¡Œï¼Œä½†æ˜¯è¿™ç§ç®€å•çš„å†…å­˜åˆ†é…ç­–ç•¥ä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜ï¼š\né—®é¢˜ 1 ï¼šè¿›ç¨‹åœ°å€ç©ºé—´ä¸éš”ç¦»ã€‚ç”±äºç¨‹åºéƒ½æ˜¯ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œæ‰€ä»¥æ¶æ„ç¨‹åºå¯ä»¥éšæ„ä¿®æ”¹åˆ«çš„è¿›ç¨‹çš„å†…å­˜æ•°æ®ï¼Œä»¥è¾¾åˆ°ç ´åçš„ç›®çš„ã€‚æœ‰äº›éæ¶æ„ä½†æœ‰ bug çš„ç¨‹åºä¹Ÿå¯èƒ½ä¸å°å¿ƒä¿®æ”¹äº†å…¶å®ƒç¨‹åºçš„å†…å­˜æ•°æ®ï¼Œå°±ä¼šå¯¼è‡´å…¶å®ƒç¨‹åºçš„è¿è¡Œå‡ºç°å¼‚å¸¸ã€‚è¿™ç§æƒ…å†µå¯¹ç”¨æˆ·æ¥è¯´æ˜¯æ— æ³•å®¹å¿çš„ï¼Œå› ä¸ºç”¨æˆ·å¸Œæœ›ä½¿ç”¨è®¡ç®—æœºçš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ªä»»åŠ¡å¤±è´¥äº†ï¼Œä¸èƒ½å½±å“å…¶å®ƒçš„ä»»åŠ¡ã€‚\né—®é¢˜ 2 ï¼šå†…å­˜ä½¿ç”¨æ•ˆç‡ä½ã€‚åœ¨ A å’Œ B éƒ½è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·åˆè¿è¡Œäº†ç¨‹åº C ï¼Œè€Œç¨‹åº C éœ€è¦ 20M å¤§å°çš„å†…å­˜æ‰èƒ½è¿è¡Œï¼Œè€Œæ­¤æ—¶ç³»ç»Ÿåªå‰©ä¸‹ 8M çš„ç©ºé—´å¯ä¾›ä½¿ç”¨ï¼Œæ‰€ä»¥æ­¤æ—¶ç³»ç»Ÿå¿…é¡»åœ¨å·²è¿è¡Œçš„ç¨‹åºä¸­é€‰æ‹©ä¸€ä¸ªå°†è¯¥ç¨‹åºçš„æ•°æ®æš‚æ—¶æ‹·è´åˆ°ç¡¬ç›˜ä¸Šï¼Œé‡Šæ”¾å‡ºéƒ¨åˆ†ç©ºé—´æ¥ä¾›ç¨‹åº C ä½¿ç”¨ï¼Œç„¶åå†å°†ç¨‹åº C çš„æ•°æ®å…¨éƒ¨è£…å…¥å†…å­˜ä¸­è¿è¡Œã€‚å¯ä»¥æƒ³è±¡å¾—åˆ°ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰å¤§é‡çš„æ•°æ®åœ¨è£…å…¥è£…å‡ºï¼Œå¯¼è‡´æ•ˆç‡ååˆ†ä½ä¸‹ã€‚\né—®é¢˜ 3 ï¼šç¨‹åºè¿è¡Œçš„åœ°å€ä¸ç¡®å®šã€‚å½“å†…å­˜ä¸­çš„å‰©ä½™ç©ºé—´å¯ä»¥æ»¡è¶³ç¨‹åº C çš„è¦æ±‚åï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨å‰©ä½™ç©ºé—´ä¸­éšæœºåˆ†é…ä¸€æ®µè¿ç»­çš„ 20M å¤§å°çš„ç©ºé—´ç»™ç¨‹åº C ä½¿ç”¨ï¼Œå› ä¸ºæ˜¯éšæœºåˆ†é…çš„ï¼Œæ‰€ä»¥ç¨‹åºè¿è¡Œçš„åœ°å€æ˜¯ä¸ç¡®å®šçš„ã€‚\nè™šæ‹Ÿåœ°å€ç©ºé—´ä»‹ç»ç°åœ¨çš„ Windows æ“ä½œç³»ç»Ÿè®©æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ˆVirtual Address Spaceï¼‰ã€‚ä»¥ 32 ä½è¿›ç¨‹ä¸ºä¾‹ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰0x00000000 ~ 0xFFFFFFFF(4GB)çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ‰€ä»¥æ¯ä¸ªè¿›ç¨‹éƒ½å¯èƒ½åˆ†é…åˆ° 0x123456 è¿™æ ·çš„å†…å­˜åœ°å€ï¼Œä½†è¿™ä¸ªåœ°å€ä¸èƒ½åœ¨è¿›ç¨‹é—´ç›¸äº’è®¿é—®ã€‚\nå› ä¸ºè¿™äº›éƒ½æ˜¯â€œè™šæ‹Ÿâ€çš„åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥è¿™äº›â€œåœ°å€â€éƒ½ä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚CPU åœ¨å¯»å€çš„æ—¶å€™è™½ç„¶æ˜¯æŒ‰ç…§è™šæ‹Ÿåœ°å€æ¥å¯»å€çš„ï¼Œä½†æ˜¯è¿˜è¦é€šè¿‡ MMU(å†…å­˜ç®¡ç†å•å…ƒ)æ¥å°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†å†…å­˜ä¸Šçš„ç‰©ç†åœ°å€ï¼š\n\nä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œè¿›ç¨‹ A å’Œ B è™½ç„¶éƒ½æœ‰åœ°å€ 0x123456ï¼Œä½†å®ƒä»¬åˆ†åˆ«å¯¹åº”çš„ç‰©ç†åœ°å€ä¸ä¸€æ ·ã€‚\nè™šæ‹Ÿåœ°å€ç©ºé—´åˆ†åŒºè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´è™½ç„¶å¾ˆå¤§ï¼Œä½†æ˜¯å®ƒè¢«åˆ’åˆ†æˆäº†å¾ˆå¤šåˆ†åŒºï¼Œä¾› Ring3 å±‚åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç”¨æˆ·æ¨¡å¼åˆ†åŒºå¹¶ä¸å¤§ï¼ˆä¸€åŠä¸åˆ°ï¼‰ï¼Œå¦‚å›¾ï¼š\nå¯¹äº 32 ä½ç³»ç»Ÿï¼Œè™šæ‹Ÿåœ°å€çš„æ€»ç©ºé—´ä¸º 4Gï¼ˆ[0x00000000, 0xFFFFFFFF]ï¼‰ï¼Œå…¶ä¸­ [0x00000000, 0x7FFFFFFF] ä¸ºç”¨æˆ·æ¨¡å¼åˆ†åŒºï¼ˆ2Gï¼‰ï¼Œä¾› Ring3 å±‚åº”ç”¨ç¨‹åºä½¿ç”¨ï¼›[0x80000000, 0xFFFFFFFF] ä¸ºå†…æ ¸æ¨¡å¼åˆ†åŒºï¼ˆ2Gï¼‰ï¼Œä¾› Ring0 å±‚å†…æ ¸é©±åŠ¨ä½¿ç”¨ã€‚\nå¯¹äº 64 ä½ç³»ç»Ÿï¼Œç†è®ºä¸Šè™šæ‹Ÿåœ°å€çš„å¯ç”¨ç©ºé—´åº”è¯¥ä¸º 64 ä½ï¼Œæœ€å¤§å¯è¾¾ 16 è‰¾å­—èŠ‚ï¼ˆEBï¼‰ã€‚é¢å¯¹è¿™ä¹ˆå¤§çš„å†…å­˜é‡ï¼Œæ˜¾ç„¶ï¼Œå½“ä»Šå’Œå¯é¢„è§çš„æœªæ¥é‡Œçš„è®¡ç®—æœºéƒ½ä¸éœ€è¦æ”¯æŒé‚£ä¹ˆå¤§çš„å†…å­˜ã€‚ç›¸åº”åœ°ï¼Œä¸ºäº†ç®€åŒ–èŠ¯ç‰‡ä½“ç³»ç»“æ„ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„é¢å¤–è´Ÿè·ï¼ˆç‰¹åˆ«æ˜¯åœ¨åœ°å€è½¬è¯‘æ–¹é¢ï¼‰ï¼Œç›®å‰ AMD å’Œ Intel çš„ x64 å¤„ç†å™¨éƒ½åªå®ç°äº† 256TB çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚è¿™æ˜¯æŒ‡ï¼Œåªä½¿ç”¨äº† 64 ä¸ºçš„è™šæ‹Ÿåœ°å€ä¸­çš„ä½ 48 ä½ï¼Œè™šæ‹Ÿåœ°å€ä»æ˜¯ 64 ä½å®½ï¼Œåœ¨å†…å­˜å’Œå¯„å­˜å™¨ä¸­å­˜å‚¨æ—¶ä»ç„¶å  8 å­—èŠ‚ã€‚æœªè¢«ä½¿ç”¨çš„é«˜ 16 ä½å¿…é¡»è¢«è®¾ç½®ä¸ºä¸æœ€é«˜çš„è¢«ä½¿ç”¨çš„ä½ï¼ˆå³ç¬¬ 47 ä½ï¼‰ç›¸åŒçš„å€¼ã€‚\nåœ¨è¿™ä¸ªè§„åˆ™ä¸‹ï¼Œä½ 128T å’Œé«˜ 128T çš„åœ°å€ç©ºé—´çš„èŒƒå›´åˆ†åˆ«ä¸ºï¼š\n0x00000000 00000000, 0x00007FFF FFFFFFFF0xFFFF8000 00000000, 0xFFFFFFFF FFFFFFFF\n\nä»ä¸Šé¢å¯ä»¥å‘ç°ï¼Œåœ¨è¿™ä¸¤æ®µåœ°å€çš„ä¸­é—´ç©ºä½™äº†å¾ˆå¤§çš„ç©ºé—´ï¼Œå¯ä»¥æ–¹ä¾¿åé¢å¤„ç†å™¨æ›´æ–°æ¢ä»£æ—¶è¿›è¡Œæ‰©å±•ã€‚\nx64 Windows åœ¨æ­¤åŸºç¡€ä¸Šåˆåšäº†è¿›ä¸€æ­¥çš„é™åˆ¶ï¼Œåœ¨ x64 å¤„ç†å™¨çš„ 256TB è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼Œç›®å‰ Windows åªå…è®¸ä½¿ç”¨ç•¥å¾®è¶…è¿‡ 16TB çš„ç©ºé—´ã€‚è¿™ 16TB çš„ç©ºé—´è¢«åˆ†å‰²æˆä¸¤ä¸ª 8TB çš„åŒºåŸŸï¼š\n\nç”¨æˆ·æ¨¡å¼çš„ 8TBï¼Œä» 0 å¼€å§‹å‘ä¸Šå¢é•¿ï¼Œç»“æŸäº 0x000007FF FFFFFFFFã€‚\nå†…æ ¸æ¨¡å¼çš„ 8TBï¼Œä»0xFFFFFFFF FFFFFFFFå¼€å§‹å‘ä¸‹é€’å‡ï¼Œç»å¤§å¤šæ•°ç»“æŸäº0xFFFFF800 00000000ã€‚\n\nç©ºæŒ‡é’ˆèµ‹å€¼åˆ†åŒºWindows å°†ç”¨æˆ·æ¨¡å¼åˆ†åŒºçš„ä½ 64Kb åŒºåŸŸï¼ˆ[0x00000000, 0x0000FFFF]ï¼‰è®¾è®¡ä¸ºäº†å®Œå…¨ä¸å¯è®¿é—®ï¼Œè¯¥åŒºåŸŸç§°ä¸ºç©ºæŒ‡é’ˆèµ‹å€¼åˆ†åŒºã€‚ä¿ç•™è¯¥åˆ†åŒºçš„ç›®çš„æ˜¯ä¸ºäº†å¸®åŠ©åº”ç”¨ç¨‹åºæ•è·å¯¹ç©ºæŒ‡é’ˆçš„èµ‹å€¼ï¼Œå¦‚mallocåˆ†é…å†…å­˜å¤±è´¥ï¼Œå°±ä¼šè¿”å› NULLã€‚\nå¦‚æœè¿›ç¨‹ä¸­çš„çº¿ç¨‹è¯•å›¾è®¿é—®è¯¥åˆ†åŒºå†…çš„å†…å­˜åœ°å€ï¼Œå°±ä¼šå¼•å‘è®¿é—®è¿è§„ã€‚\nè™šæ‹Ÿåœ°å€ç©ºé—´çš„ä½¿ç”¨è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä½¿ç”¨æ¶‰åŠåˆ° 3 ä¸ªæ¦‚å¿µï¼šé¡µé¢å¤§å°ã€åˆ†é…ç²’åº¦ã€é¢„å®šå’Œè°ƒæ‹¨ã€‚\né¡µé¢å¤§å°è™šæ‹Ÿåœ°å€ç©ºé—´è¢«åˆ†æˆä»¥â€œé¡µé¢â€ä¸ºå•ä½ï¼Œå› ä¸ºç¡¬ä»¶å†…å­˜ç®¡ç†å•å…ƒæ˜¯ä»¥é¡µé¢ä¸ºç²’åº¦å°†è™šæ‹Ÿåœ°å€è½¬è¯‘æˆç‰©ç†åœ°å€çš„ã€‚é¡µé¢çš„å¤§å°æ ¹æ®ä¸åŒçš„ CPU ä¸è€Œæœ‰æ‰€ä¸åŒã€‚x86 å’Œ x64 ç³»ç»Ÿä½¿ç”¨çš„é¡µé¢å¤§å°éƒ½æ˜¯4KBï¼Œè€Œ IA-64 ç³»ç»Ÿä½¿ç”¨çš„é¡µé¢å¤§å°æ˜¯8KBã€‚\n\nIA-64 æ“ä½œç³»ç»Ÿåªèƒ½åœ¨ INTEL å®‰è…¾ç³»åˆ—å¤„ç†å™¨åŠ AMD éƒ¨åˆ†æœåŠ¡å™¨å¤„ç†å™¨è¿è¡Œï¼Œæ‰€ä»¥ä¸»æµå¸‚åœºå¹¶ä¸å¸¸è§ã€‚\n\nå½“åº”ç”¨ç¨‹åºåœ¨è™šæ‹Ÿåœ°å€ç©ºé—´åˆ†é…ç©ºé—´æ—¶ï¼Œç³»ç»Ÿéœ€è¦ç¡®ä¿åˆ†é…åŒºåŸŸçš„å¤§å°æ­£å¥½æ˜¯ç³»ç»Ÿé¡µé¢å¤§å°çš„æ•´æ•°å€ã€‚\nåˆ†é…ç²’åº¦å½“åº”ç”¨ç¨‹åºåœ¨ä»è™šæ‹Ÿåœ°å€ç©ºé—´åˆ†é…ç©ºé—´æ—¶ï¼Œç³»ç»Ÿä¼šç¡®ä¿æ‰€æœ‰åˆ†é…åŒºåŸŸçš„èµ·å§‹åœ°å€éƒ½æ˜¯åˆ†é…ç²’åº¦çš„æ•´æ•°å€ã€‚åˆ†é…ç²’åº¦çš„ä¼šæ ¹æ®ä¸åŒçš„ CPU å¹³å°è€Œæœ‰æ‰€ä¸åŒï¼Œä½†ç›®å‰æ‰€æœ‰çš„ CPU å¹³å°çš„åˆ†é…ç²’åº¦éƒ½æ˜¯ä½¿ç”¨64KBã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ†é…çš„èµ·å§‹åœ°å€ = 64 * Nï¼Œè¿™ä¹Ÿæ­£å¥½è·³è¿‡äº†ç©ºæŒ‡é’ˆèµ‹å€¼åˆ†åŒºã€‚\né€šè¿‡ Windows çš„GetSystemInfoå‡½æ•°ä¹Ÿå¯ä»¥è·å¾—æ­¤åˆ†é…ç²’åº¦å€¼ã€‚\n\nä¸Šé¢æ‰€è¯´çš„åˆ†é…ç²’åº¦å’Œé¡µé¢å¤§å°çš„é™åˆ¶ï¼Œåªæ˜¯é’ˆå¯¹äºâ€œåº”ç”¨ç¨‹åºâ€ï¼Œç³»ç»Ÿå†…æ ¸è‡ªå·±ä¸å­˜åœ¨è¿™æ ·çš„é™åˆ¶ã€‚\n\né¢„å®šå’Œè°ƒæ‹¨è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä½¿ç”¨åˆ†ä¸º 2 ä¸ªæ­¥éª¤ï¼š\n\né¢„å®šï¼ˆreserveï¼‰ï¼šå‘Šè¯‰ç³»ç»Ÿæˆ‘ä»¬è¦ä»è™šæ‹Ÿåœ°å€ç©ºé—´é¢„å®šå“ªä¸€å—åŒºåŸŸï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬ä¿ç•™è¿™ä¸€å—åŒºåŸŸã€‚é¢„å®šçš„å±€åŸŸçš„èµ·å§‹åœ°å€å’Œå¤§å°éµå¾ªä¸Šé¢ä»‹ç»çš„åˆ†é…ç²’åº¦å’Œé¡µé¢å¤§å°çš„è¦æ±‚ã€‚å› ä¸ºé¢„å®šçš„åªæ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸å ç”¨ä»»ä½•å…¶ä»–ç‰©ç†å­˜å‚¨å™¨ï¼Œæ‰€ä»¥æ²¡æœ‰å½¢æˆå®è´¨çš„å¼€é”€ã€‚\n\nè°ƒæ‹¨ï¼ˆcommitï¼‰ï¼šé¢„å®šçš„åŒºåŸŸè¿˜ä¸èƒ½ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºé¢„å®šçš„åŒºåŸŸä»é¡µäº¤æ¢æ–‡ä»¶ä¸­è°ƒæ‹¨å­˜å‚¨å™¨ï¼Œè°ƒæ‹¨ä¹‹åæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨è¯¥åŒºåŸŸã€‚è‡³äºä¸ºä»€ä¹ˆè¦ä»é¡µäº¤æ¢æ–‡ä»¶ä¸­è°ƒæ‹¨å­˜å‚¨å™¨ï¼Ÿ é¡µäº¤æ¢æ–‡ä»¶å¦‚ä½•ä¸ç‰©ç†å†…å­˜ä¹‹é—´äº¤äº’ï¼Ÿåœ¨åé¢çš„â€œè™šæ‹Ÿå†…å­˜â€ç« èŠ‚ä¸­ä¼šè¯¦ç»†ä»‹ç»ã€‚\n\n\nè™šæ‹Ÿå†…å­˜è™šæ‹Ÿåœ°å€ç©ºé—´åªæ˜¯æ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹â€œè™šæ‹Ÿâ€å‡ºæ¥çš„ä¸€å—åœ°å€åŒºåŸŸï¼Œå¹¶ä¸ä»£è¡¨ä»»ä½•å®é™…çš„ç©ºé—´ã€‚è€Œé¡µäº¤æ¢æ–‡ä»¶å´å¯¹åº”äº†å®é™…çš„ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´ä¸€èˆ¬æ˜¯ç£ç›˜ä¸Šåä¸º pagefile.sys çš„æ–‡ä»¶ã€‚\né¡µäº¤æ¢æ–‡ä»¶çš„å¤§å°å’Œä½ç½®å¯ä»¥åœ¨ç³»ç»Ÿè®¾ç½®ï¼ˆç³»ç»Ÿå±æ€§ -&gt; é«˜çº§ -&gt; æ€§èƒ½ -&gt; è®¾ç½® -&gt; é«˜çº§ ï¼‰ä¸­è¿›è¡Œè®¾ç½®ï¼š\nä»å¾®è½¯çš„å®˜æ–¹æ–‡æ¡£æ¥çœ‹ï¼Œâ€œè™šæ‹Ÿå†…å­˜â€ç­‰äºâ€œç‰©ç†å†…å­˜â€+â€œåˆ†é¡µæ–‡ä»¶â€æ€»å’Œã€‚å¯ä»¥æŠŠâ€œè™šæ‹Ÿå†…å­˜â€ç†è§£ä¸º Windows çš„ä¸€ç§å†…å­˜ç®¡ç†æœºåˆ¶ã€‚\nè™šæ‹Ÿåœ°å€ç©ºé—´ã€é¡µäº¤æ¢æ–‡ä»¶ã€ç‰©ç†å†…å­˜ä¸‰è€…çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š\nã€ŠWindows æ ¸å¿ƒç¼–ç¨‹ã€‹ç¬¬ 13 ç« å…³äºâ€œç‰©ç†å­˜å‚¨å™¨å’Œé¡µäº¤æ¢æ–‡ä»¶â€ç« èŠ‚ä¸­è®²åˆ°äº†â€œé¡µäº¤æ¢æ–‡ä»¶ã€ç‰©ç†å­˜å‚¨å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢è¿‡ç¨‹â€ï¼Œæµç¨‹å¦‚ä¸‹ï¼š\n\nåº”ç”¨ç¨‹åºä»è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´é¢„å®šå¹¶è°ƒæ‹¨äº†ä¸€å—åœ°å€åŒºåŸŸæ—¶ï¼Œèµ·åˆè¿™å—åŒºåŸŸåªæ˜¯ä»â€œé¡µäº¤æ¢æ–‡ä»¶â€ä¸­è°ƒæ‹¨çš„ï¼Œè¿™æ ·ä½œæœ‰ä¸ªå¥½å¤„å°±æ˜¯ï¼šå› ä¸ºè¿˜ä¸ç¡®å®šä½•æ—¶æ‰ä¼šä½¿ç”¨è¿™å—åŒºåŸŸï¼Œå¦‚æœç«‹å³ä»ç‰©ç†å†…å­˜è°ƒæ‹¨ï¼Œä¼šå°†å ç”¨å¾ˆå¤šçš„ç‰©ç†å†…å­˜ã€‚\nå½“ç¨‹åºè¯»å†™è¯¥åœ°å€åŒºåŸŸæ—¶ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°ä¸Šé¢å›¾ä¸Šçš„é¡µäº¤æ¢æ–‡ä»¶å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„æ•°æ®äº¤æ¢è¿‡ç¨‹ã€‚\nä¸Šé¢æ‰€è¯´çš„å†…å­˜æ˜¯ç”¨æˆ·æ¨¡å¼ä¸‹åº”ç”¨ç¨‹åºæ‰€åˆ†é…çš„å†…å­˜ï¼Œå«åˆ†é¡µå†…å­˜ã€‚è¿˜æœ‰ä¸€ç§å†…å­˜å«éåˆ†é¡µå†…å­˜ï¼Œä»…ä¾›å†…æ ¸é©±åŠ¨ä½¿ç”¨ï¼Œè¿™ç§å†…å­˜ç›´æ¥ä»ç‰©ç†å†…å­˜åˆ†é…ï¼Œæ°¸è¿œä¸ä¼šè¢«äº¤æ¢ï¼Œå†…æ ¸é©±åŠ¨ä¹Ÿå¯ä»¥åˆ†é…åˆ†é¡µå†…å­˜ã€‚ç‰¹åˆ«å¯¹äº 32 ä½ç³»ç»Ÿï¼Œå…¶éåˆ†é¡µå†…å­˜èµ„æºå¾ˆç´§å¼ ï¼Œé©±åŠ¨é€šå¸¸ä¼šä½¿ç”¨åˆ†é¡µå†…å­˜ã€‚\nç”¨æˆ·æ¨¡å¼ä¸‹çš„åº”ç”¨ç¨‹åºåªèƒ½åˆ†é…åˆ†é¡µå†…å­˜ï¼Œå³ä¾¿åº”ç”¨ç¨‹åºä½¿ç”¨ä¸‹é¢ä»‹ç»çš„é¡µé¢é”å®šæ–¹å¼ï¼Œä¹Ÿåªæ˜¯é¿å…äº†é¡µé¢äº¤æ¢ï¼Œä½†ä»ç„¶ä½¿ç”¨çš„æ˜¯åˆ†é¡µå†…å­˜ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿåœ¨å¯åŠ¨æ—¶ä¼šæ ¹æ®ç¡¬ä»¶æƒ…å†µè‡ªåŠ¨è®¡ç®—å‡ºåˆ†é¡µä¸éåˆ†é¡µå†…å­˜çš„æœ€å¤§å€¼ã€‚æ ¹æ®å…¬å¼€çš„èµ„æ–™å¯ä»¥æŸ¥è¯¢åˆ° Windows çš„åˆ†é¡µå†…å­˜æ± &#x2F;éåˆ†é¡µå†…å­˜æ± çš„æé™å€¼æ˜¯ï¼š\n\n\n\nåŒºåŸŸ\nx64\nx86\n\n\n\nåˆ†é¡µå†…å­˜\n128G\n650MB\n\n\néåˆ†é¡µå†…å­˜\n128GB\n256MB\n\n\nå¯¹äº x64 ç³»ç»Ÿï¼Œéåˆ†é¡µå†…å­˜æ± çš„å¤§å°ä¸€èˆ¬ä¸ºç‰©ç†å†…å­˜çš„ 75%ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Process Explorer æŸ¥çœ‹ï¼ˆView -&gt; System Informationï¼‰å½“å‰ç³»ç»Ÿå®é™…çš„éåˆ†é¡µå†…å­˜ä¿¡æ¯ï¼š\n\nå°†é¡µé¢é”å®šåœ¨ç‰©ç†å†…å­˜ä»ä¸Šé¢çš„å‡ èŠ‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“ç‰©ç†å†…å­˜ä¸­æ²¡æœ‰é—²ç½®é¡µé¢æ—¶ï¼Œç³»ç»Ÿä¼šå°†å†…å­˜ä¸­çš„æŸäº›é¡µé¢çš„æ•°æ®å†™å…¥åˆ°äº¤æ¢æ–‡ä»¶ä¸­ï¼Œä»è€Œå°†è¯¥ç‰©ç†å†…å­˜åŒºåŸŸé‡Šæ”¾å‡ºæ¥ä¾›åé¢çš„ç¨‹åºä½¿ç”¨ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨VirtualLockæ–¹æ³•ï¼Œå°†é¡µé¢é”å®šåœ¨ç‰©ç†å†…å­˜ä¸­ï¼Œä»è€Œé˜²æ­¢è™šæ‹Ÿå†…å­˜ç®¡ç†æœºåˆ¶å°†é¡µé¢äº¤æ¢è‡³é¡µé¢æ–‡ä»¶ï¼Œè€Œå¼•èµ·ä¸å¿…è¦çš„ç¡¬ç›˜å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„ä½æ•ˆé¡µé¢äº¤æ¢ã€‚\nä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨VirtualUnlockæ–¹æ³•è§£é”é¡µé¢ï¼Œå…è®¸ç³»ç»Ÿå¯¹é¡µé¢è¿›è¡Œäº¤æ¢æ“ä½œã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé”å®šé¡µé¢æ—¶ç³»ç»Ÿä¼šæ ¹æ®å½“å‰å¯ç”¨å®é™…ç‰©ç†å†…å­˜æƒ…å†µï¼Œä»¥åŠè¿›ç¨‹å·¥ä½œé›†é…é¢åˆ¤å®šå½“å‰æœ€å¤§å¯é”å®šçš„é¡µé¢çš„å®é™…æ•°é‡ï¼Œè¶…è¿‡æ­¤æ•°é‡ä¼šå¼•èµ·ä¸€ä¸ªé”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥è°ƒç”¨SetProcessWorkingSetSizeå¯ä»¥æ”¹å˜ä¸€ä¸ªè¿›ç¨‹å·¥ä½œé›†å¤§å°çš„é…é¢ï¼Œä»è€Œå¯ä»¥é”å®šæ›´å¤šçš„ç‰©ç†é¡µé¢ã€‚\nè™šæ‹Ÿå†…å­˜ä½¿ç”¨å®ä¾‹è™šæ‹Ÿå†…å­˜æ–¹é¢çš„ API å±äºé¡µé¢ç²’åº¦ APIï¼Œé€šè¿‡è¿™äº› API åˆ†é…çš„å†…å­˜çš„æœ€å°ç²’åº¦æ˜¯64KBã€‚è¿™äº› API åˆ†é…ï¼ˆè°ƒæ‹¨ï¼‰çš„å†…å­˜åŒºåŸŸæœ€åˆéƒ½æ˜¯ä½äºâ€œé¡µäº¤æ¢æ–‡ä»¶â€ä¸Šé¢ï¼Œå½“ç¨‹åºå¯¹è¯¥åŒºåŸŸçš„æŸäº›â€œé¡µé¢â€ï¼ˆå¯¹è™šæ‹Ÿå†…å­˜çš„ç®¡ç†ä»¥é¡µé¢ä¸ºå•ä½è¿›è¡Œçš„ï¼‰è¿›è¡Œè¯»å†™æ—¶ï¼Œæ‰ä¼šå°†è¿™äº›é¡µé¢äº¤æ¢åˆ°ç‰©ç†å†…å­˜ä¸Šé¢ã€‚\nä»â€œè™šæ‹Ÿåœ°å€ç©ºé—´â€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“è™šæ‹Ÿåœ°å€ç©ºé—´è¦ç»è¿‡é¢„å®šå’Œè°ƒæ‹¨2 ä¸ªæ­¥éª¤ä¹‹åæ‰èƒ½ä½¿ç”¨ï¼Œè¿™ 2 ä¸ªæ­¥éª¤éƒ½å¯ä»¥é€šè¿‡VirtualAllocå‡½æ•°å®ç°ï¼š\nLPVOID VirtualAlloc(  LPVOID lpAddress,  DWORD dwSize,  DWORD flAllocationType,  DWORD flProtect);\n\nå½“é¢„å®šæˆ–è€…è°ƒæ‹¨çš„ç©ºé—´æˆ‘ä»¬ä¸åœ¨éœ€è¦æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨VirtualFreeæ¥é‡Šæ”¾è¯¥åœ°å€ç©ºé—´ï¼š\nBOOL VirtualFree(  LPVOID lpAddress,  DWORD dwSize,  DWORD dwFreeType);\n\nä¸‹é¢æ˜¯çš„ç¤ºä¾‹æ¼”ç¤ºäº†åœ¨é¢„å®šã€è°ƒæ‹¨ã€ä½¿ç”¨ç­‰æ“ä½œå‰åï¼Œè¿›ç¨‹çš„å„é¡¹å†…å­˜çš„å ç”¨æƒ…å†µï¼š\n#include &lt;windows.h&gt;int main()&#123;\tSIZE_T size = 1 &lt;&lt; 30; // 1GB\t// é¢„å®š1GBçš„ç©ºé—´\tchar *pVirtualAddress = (char *)VirtualAlloc(NULL, size, MEM_RESERVE, PAGE_READWRITE);\tif (pVirtualAddress == NULL) &#123;\t\tprintf(&quot;Reserve 1GB failed.\\n&quot;);\t\treturn 1;\t&#125;\t// éªŒè¯åˆ†é…ç²’åº¦æ˜¯ä¸æ˜¯64KB\tint n = (long)pVirtualAddress % (64*1024);\tif (n == 0) &#123;\t\tprintf(&quot;åˆ†é…ç²’åº¦ä¸º64K\\n&quot;);\t&#125;\tprintf(&quot;å·²ç»é¢„å®š1GB\\n&quot;);\tgetchar(); // æš‚åœ\tif (VirtualAlloc(pVirtualAddress, size, MEM_COMMIT, PAGE_READWRITE) == NULL) &#123;\t\tprintf(&quot;Commit 1GB failed.\\n&quot;);\t\treturn 1;\t&#125;\tprintf(&quot;å·²ç»è°ƒæ‹¨1GB\\n&quot;);\tgetchar(); // æš‚åœ\t// é¡µé¢å¤§å°ä¸º4Kï¼Œè®¿é—®2560ä¸ªé¡µé¢ï¼Œå³2560*4K = 10MB\t//\tfor (int i = 0; i &lt; 2560; i++) &#123;\t\tchar * p = pVirtualAddress + i * (4 * 1024);\t\t*p = &#x27;A&#x27;; // åªè®¿é—®æ¯ä¸ªé¡µé¢çš„ç¬¬ä¸€ä¸ªå­—èŠ‚\t&#125;\tprintf(&quot;å·²ç»ä½¿ç”¨å‰10MB\\n&quot;);\tgetchar(); // æš‚åœ    return 0;&#125;\n\nåœ¨ç¨‹åºè¿è¡Œå„ä¸ªé˜¶æ®µè¿›ç¨‹çš„å†…å­˜æƒ…å†µå¦‚ä¸‹å›¾ï¼šï¼ˆâ€œå†…å­˜ä¸“ç”¨å·¥ä½œé›†â€è¡¨ç¤ºå ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œâ€œæäº¤å¤§å°â€è¡¨ç¤ºè°ƒæ‹¨çš„é¡µäº¤æ¢æ–‡ä»¶çš„å¤§å°ï¼‰\n\nå†…å­˜æ˜ å°„æ–‡ä»¶â€œå†…å­˜æ˜ å°„æ–‡ä»¶â€å¯ä»¥å°†ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶æ˜ å°„åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¿™æ ·å°±ä¸éœ€è¦å°†æ‰€æœ‰ä¸œè¥¿éƒ½æ”¾å…¥åˆ°é¡µäº¤æ¢æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ç³»ç»Ÿæœ‰è®¸å¤šç¨‹åºåŒæ—¶è¿è¡Œæ—¶ï¼Œå¦‚æœå°†è¿™äº›ç¨‹åºæ–‡ä»¶éƒ½åŠ è½½åˆ°é¡µäº¤æ¢æ–‡ä»¶ä¸­ï¼Œé¡µäº¤æ¢æ–‡ä»¶å°†ä¼šå˜å¾—éå¸¸å¤§ã€‚äº‹å®ä¸Šï¼ŒWindows ä¹Ÿå¹¶æ²¡æœ‰å°†ç¡¬ç›˜ä¸Šçš„ç¨‹åºæ–‡ä»¶å¤åˆ¶åˆ°é¡µäº¤æ¢æ–‡ä»¶ä¸­ï¼Œå› ä¸ºè¿™æ ·ä¸ä»…ä¼šè®©é¡µäº¤æ¢æ–‡ä»¶å°†ä¼šå˜å¾—éå¸¸å¤§ï¼Œä¹Ÿä¼šæµªè´¹å¾ˆå¤šæ—¶é—´ï¼Œç‰¹åˆ«æ˜¯å¯æ‰§è¡Œç¨‹åºéå¸¸å¤§çš„æ—¶å€™ã€‚\nå½“ç”¨æˆ·è¦æ±‚æ‰§è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šæ‰“å¼€è¯¥åº”ç”¨ç¨‹åºçš„.exeæ–‡ä»¶ï¼Œå¹¶è®¡ç®—å‡ºåº”ç”¨ç¨‹åºçš„ä»£ç å’Œæ•°æ®çš„å¤§å°ï¼Œç„¶åç³»ç»Ÿä¼šåœ¨è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´é¢„å®šä¸€å—åœ°å€ç©ºé—´ï¼Œå¹¶æ³¨æ˜ä¸è¯¥åŒºåŸŸç›¸å…³è”çš„ç‰©ç†å­˜å‚¨å™¨å°±æ˜¯.exeæ–‡ä»¶æœ¬èº«ã€‚\nå½“æŠŠä¸€ä¸ªä½äºç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ï¼ˆå¯ä»¥æ˜¯.exeï¼Œ.dllä¹Ÿå¯ä»¥æ˜¯æ™®é€šæ–‡ä»¶ï¼‰æ˜ åƒç”¨ä½œåœ°å€ç©ºé—´åŒºåŸŸå¯¹åº”çš„ç‰©ç†å­˜å‚¨å™¨æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªæ–‡ä»¶æ˜ åƒä¸ºâ€œå†…å­˜æ˜ å°„æ–‡ä»¶â€ã€‚\nç°åœ¨æˆ‘ä»¬å¯ä»¥å¯¹â€œè™šæ‹Ÿå†…å­˜â€ç« èŠ‚ä¸­çš„å›¾è¿›è¡Œå®Œå–„äº†ï¼ŒåŠ å…¥â€œå†…å­˜æ˜ å°„æ–‡ä»¶â€éƒ¨åˆ†ï¼š\nå†…å­˜æ˜ å°„æ–‡ä»¶æŠ€æœ¯ä»‹ç»å¸¸ç”¨çš„æœ‰ Win32 API çš„CreateFile()ã€WriteFile()ã€ReadFile()å’Œ MFC æä¾›çš„CFileç±»éƒ½å¯ä»¥å®ç°æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä»¥ä¸Šè¿™äº›å‡½æ•°å¯ä»¥æ»¡è¶³å¤§å¤šæ•°åœºåˆçš„è¦æ±‚ï¼Œä½†æ˜¯å¯¹äºæŸäº›ç‰¹æ®Šåº”ç”¨é¢†åŸŸæ‰€éœ€è¦çš„åŠ¨è¾„å‡ å GBã€å‡ ç™¾ GBã€ä¹ƒè‡³å‡  TB çš„æµ·é‡å­˜å‚¨ï¼Œæ­¤æ—¶åœ¨ä»¥å¹³å¸¸çš„æ–‡ä»¶å¤„ç†æ–¹æ³•è¿›è¡Œå¤„ç†æ˜¾ç„¶æ˜¯è¡Œä¸é€šçš„ï¼ˆæ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”å†…å­˜æ²¡é‚£ä¹ˆå¤§ï¼‰ã€‚ç›®å‰ï¼Œå¯¹äºè¿™ç§å¤§æ–‡ä»¶çš„æ“ä½œä¸€èˆ¬æ˜¯ä»¥å†…å­˜æ˜ å°„æ–‡ä»¶çš„æ–¹å¼æ¥åŠ ä»¥å¤„ç†çš„ã€‚\nå†…å­˜æ˜ å°„æ–‡ä»¶ä¹Ÿæ˜¯ Windows çš„ä¸€ç§å†…å­˜ç®¡ç†æ–¹æ³•ï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å†…å­˜ç®¡ç†ç‰¹å¾ï¼Œä½¿åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡å†…å­˜æŒ‡é’ˆå¯¹ç£ç›˜ä¸Šçš„æ–‡ä»¶è¿›è¡Œè®¿é—®ã€‚é€šè¿‡æ–‡ä»¶æ˜ å°„å°†ç£ç›˜æ–‡ä»¶å†…å®¹ï¼ˆå…¨éƒ¨æˆ–è€…éƒ¨åˆ†ï¼‰ä¸è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„æŸä¸ªåŒºåŸŸå»ºç«‹æ˜ å°„å…³è”ï¼Œå¯ä»¥ç›´æ¥å¯¹è¢«æ˜ å°„çš„æ–‡ä»¶è¿›è¡Œè®¿é—®ï¼Œè€Œä¸å¿…æ‰§è¡Œæ–‡ä»¶ I&#x2F;O æ“ä½œä¹Ÿæ— éœ€å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œç¼“å†²å¤„ç†ã€‚å†…å­˜æ–‡ä»¶æ˜ å°„çš„è¿™ç§ç‰¹æ€§æ˜¯éå¸¸é€‚åˆäºç”¨æ¥ç®¡ç†å¤§å°ºå¯¸æ–‡ä»¶çš„ã€‚\nå¤§æ–‡ä»¶è¯»å†™å®ä¾‹é€šè¿‡ C++è°ƒç”¨ç³»ç»Ÿ API å®ç°æ–‡ä»¶æ˜ å°„çš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š\næœ¬ç¤ºä¾‹é¦–å…ˆåœ¨D:\\ç”Ÿæˆä¸€ä¸ªå¤§å°ä¸º 1GB çš„BigFile.dataæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å†…å­˜æ˜ å°„æŠ€æœ¯å°†è¯¥æ–‡ä»¶å†…å…¨éƒ¨å¡«å……å­—ç¬¦ Aï¼Œéšåè¯»å–å…¶ä¸­çš„ç¬¬20000~20100å­—èŠ‚ï¼Œå¹¶å°†è¿™äº›å­—èŠ‚ä¿®æ”¹ä¸ºå­—ç¬¦ Bï¼Œç„¶åå†æ¬¡è¯»å–å·²éªŒè¯æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚\n#include &lt;windows.h&gt;void Test() &#123;\tHANDLE file_ = CreateFile(TEXT(&quot;D:\\\\BigFile.data&quot;),\t\tGENERIC_READ | GENERIC_WRITE,\t\t0,\t\tNULL,\t\tOPEN_ALWAYS,\t\tFILE_ATTRIBUTE_NORMAL,\t\tNULL);\tif (file_ == INVALID_HANDLE_VALUE) &#123;\t\tprintf(&quot;CreateFile failed, GLE:%d\\n&quot;, GetLastError());\t\treturn;\t&#125;\tLARGE_INTEGER filesize;\tfilesize.QuadPart = 1024 * 1024 * 1024; // 1GB\tHANDLE mapping_ = CreateFileMapping(file_, NULL, PAGE_READWRITE, filesize.HighPart, filesize.LowPart, NULL);\tif (mapping_ == NULL) &#123;\t\tprintf(&quot;CreateFileMapping failed, GLE:%d\\n&quot;, GetLastError());\t\treturn;\t&#125;\tLARGE_INTEGER offset;\toffset.QuadPart = 0;\tLPVOID mapping_addr = MapViewOfFile(mapping_, FILE_MAP_WRITE | FILE_MAP_READ, offset.HighPart, offset.LowPart, 0);\tif (mapping_addr == NULL) &#123;\t\tprintf(&quot;MapViewOfFile failed, GLE:%d\\n&quot;, GetLastError());\t\treturn;\t&#125;\t// å‘æ–‡ä»¶ä¸­å¡«å……1GBçš„å­—ç¬¦&#x27;A&#x27;\t//\tchar buf[1024];\tfor (int i = 0; i &lt; 1024; i++) &#123;\t\tbuf[i] = &#x27;A&#x27;;\t&#125;\t// æ¯æ¬¡å¡«å……1024å­—èŠ‚ï¼Œå¡«å……1024*1024æ¬¡\tfor (long l = 0; l &lt; 1024 * 1024; l++) &#123;\t\tmemcpy((LPVOID)((long)mapping_addr + l * 1024), buf, 1024);\t&#125;\t// å¡«å……å®Œæ¯•\t// è¯»å–ç¬¬20000~20100å­—èŠ‚ï¼Œå…±100å­—èŠ‚\t//\tchar read_content[101] = &#123; 0 &#125;;\tmemcpy(read_content, (LPVOID)((long)mapping_addr + 20000), 100);\tprintf(&quot;%s\\n&quot;, read_content);\t// å°†ç¬¬20000~20100å­—èŠ‚ï¼Œå…±100å­—èŠ‚å…¨éƒ¨ä¿®æ”¹ä¸ºå­—ç¬¦&#x27;B&#x27;\t//\tchar write_content[100];\tfor (int i = 0; i &lt; 100; i++) &#123;\t\twrite_content[i] = &#x27;B&#x27;;\t&#125;\tmemcpy((LPVOID)((long)mapping_addr + 20000), write_content, 100);\t// å†æ¬¡è¯»å–ç¬¬20000~20100å­—èŠ‚ï¼Œå…±100å­—èŠ‚ï¼ŒéªŒè¯ä¿®æ”¹æ˜¯æˆåŠŸ\t//\tmemcpy(read_content, (LPVOID)((long)mapping_addr + 20000), 100);\tprintf(&quot;%s\\n&quot;, read_content);\tUnmapViewOfFile(mapping_addr);\tCloseHandle(mapping_);\tCloseHandle(file_);\treturn;&#125;int main()&#123;\tTest();    return 0;&#125;\n\nå†…å­˜å¯¹é½ä¸æ˜¯æ‰€æœ‰çš„ CPU éƒ½èƒ½è®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®çš„ï¼Œæœ‰äº› CPU åªèƒ½åœ¨æŸäº›åœ°å€å¤„å–æŸäº›ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™æŠ›å‡ºç¡¬ä»¶å¼‚å¸¸ã€‚\nå°½ç®¡å†…å­˜æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†å¤„ç†å™¨å¹¶ä¸æ˜¯æŒ‰å­—èŠ‚å—æ¥å­˜å–å†…å­˜çš„ï¼Œå®ƒä¸€èˆ¬ä¼šä»¥åŒå­—èŠ‚ã€å››å­—èŠ‚ã€8 å­—èŠ‚ã€16 å­—èŠ‚ç”šè‡³ 32 å­—èŠ‚ä¸ºå•ä½æ¥å­˜å–å†…å­˜ï¼Œæˆ‘ä»¬å°†ä¸Šè¿°è¿™äº›å­˜å–å•ä½ç§°ä¸ºå†…å­˜å­˜å–ç²’åº¦ã€‚\nå¦‚æœæ•°æ®å­˜å‚¨æ—¶æ˜¯æŒ‰ç…§å†…å­˜å­˜å–ç²’åº¦å¯¹é½çš„ï¼Œé‚£ä¹ˆå¤„ç†å™¨å°±å¯ä»¥åœ¨ä¸€ä¸ªå†…å­˜è®¿é—®å‘¨æœŸå†…å®Œæˆæ•°æ®çš„è¯»å–ï¼›åä¹‹ï¼Œå¦‚æœæ•°æ®æ²¡æœ‰å¯¹é½ï¼Œå¯èƒ½éœ€è¦å¤šä¸ªå†…å­˜è®¿é—®å‘¨æœŸæ‰èƒ½è¯»å–å®Œæ•´çš„æ•°æ®ã€‚\nå†…å­˜å¯¹é½è§„åˆ™åœ¨ C&#x2F;C++ ä¸­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç»“æ„ä½“ï¼ˆè”åˆä½“ã€ç±»ï¼‰æˆå‘˜ä¹‹é—´æ’å…¥å¡«å……å­—èŠ‚ï¼Œä»¥ç¡®ä¿æ¯ä¸ªæˆå‘˜éƒ½æŒ‰ç…§ç‰¹å®šçš„å¯¹é½è¦æ±‚è¿›è¡Œå­˜å‚¨ï¼Œä»¥æé«˜å†…å­˜è®¿é—®æ•ˆç‡ã€‚\næ¯ä¸ªç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±çš„é»˜è®¤å¯¹é½ç³»æ•°ï¼ˆä¹Ÿå«å¯¹é½æ¨¡æ•°ï¼‰ã€‚GCC é»˜è®¤å¯¹é½ç³»æ•°ä¸º 4ï¼ŒMSVC 32 ä½é»˜è®¤å¯¹é½ç³»æ•°ä¸º 8ï¼ŒMSVC 64 ä½é»˜è®¤å¯¹é½ç³»æ•°ä½ 16ã€‚\næˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤#pragma pack(n)æ¥æŒ‡å®šå¯¹é½ç³»æ•°ï¼Œn å¯ä»¥ä¸º (1, 2, 4, 8, 16)ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚\nä¸‹é¢æ˜¯ #pragma pack å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•ï¼š\n#pragma pack(n) // ä½¿ç”¨è‡ªå®šä¹‰nå­—èŠ‚å¯¹é½  nå¯ä»¥ä¸º1ï¼Œ2ï¼Œ4ï¼Œ8ï¼Œ16#pragma pack()  // ä½¿ç”¨ç¼ºçœå­—èŠ‚å¯¹é½#pragma pack(show) // åœ¨ç¼–è¯‘è¾“å‡ºçª—å£ä»¥è­¦å‘Šçš„å½¢å¼æ˜¾ç¤ºå‡ºå½“å‰çš„å†…å­˜ä»¥å‡ ä¸ªå­—èŠ‚å¯¹é½\n\nå‡è®¾åœ¨ä¸€ä¸ªç»“æ„ä½“ï¼ˆè”åˆä½“ã€ç±»ï¼‰ä¸­ï¼Œæœ€å¤§æ•°æ®ç±»å‹é•¿åº¦ä¸º mï¼Œç¼–è¯‘å™¨å¯¹é½ç³»æ•°æ˜¯ nï¼Œåˆ™å°† min(m, n) ç§°åšå¯¹é½å•ä½ï¼Œä¹Ÿå«æœ‰æ•ˆå¯¹é½å€¼ï¼Œè¿™é‡Œè®°ä¸º sã€‚\nå¯¹é½åˆ†ä¸ºæˆå‘˜å¯¹é½å’Œç»“æ„ä½“ï¼ˆè”åˆä½“ã€ç±»ï¼‰æ•´ä½“å¯¹é½ã€‚\n\næˆå‘˜å¯¹é½è§„åˆ™ï¼šç¬¬ä¸€ä¸ªæˆå‘˜ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»é‡å§‹ç»ˆä¸º 0ï¼Œä»¥åæ¯ä¸ªæˆå‘˜ï¼ˆæ•°æ®ç±»å‹é•¿åº¦è®°ä¸º kï¼‰ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»é‡éƒ½ä¸º min(k, s) çš„æ•´æ•°å€ã€‚\næ•´ä½“å¯¹é½ï¼šç»“æ„ä½“çš„æ€»å¤§å°å¿…é¡»æ˜¯æœ‰æ•ˆå¯¹é½å€¼ s çš„æ•´æ•°å€ã€‚\n\nä»å†…å­˜å¯¹é½çš„è§„åˆ™å¯ä»¥çœ‹å‡ºï¼š&#96;\n\né™¤ç¬¬ä¸€ä¸ªæˆå‘˜å¤–ï¼Œæ¯ä¸ªæˆå‘˜çš„åç§»é‡ï¼šmin(k, min(m, n))\nå¦‚æœè®¾ç½®çš„å¯¹é½ç³»æ•° n å¤§äºç±»ä¸­æœ€å¤§æ•°æ®ç±»å‹é•¿åº¦ m æ—¶ï¼Œåˆ™è¯¥è®¾ç½®å®é™…æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚\nå½“å¯¹é½ç³»æ•° n &#x3D;&#x3D; 1 æ—¶ï¼Œæ•´ä¸ªç»“æ„ä½“çš„å¤§å°ä¸ºæ‰€æœ‰æˆå‘˜é•¿åº¦ä¹‹å’Œã€‚\n\nç¤ºä¾‹&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;åœ¨ 64 ä½ç³»ç»Ÿä¸Šç¼–è¯‘ä¸‹é¢çš„æµ‹è¯•ç¨‹åºï¼Œå·²çŸ¥åœ¨ 64 ä½ç³»ç»Ÿä¸Šå„ç±»å‹å ç”¨å­—èŠ‚æ•°å¦‚ä¸‹ï¼š\nchar     1å­—èŠ‚short    2å­—èŠ‚int      4å­—èŠ‚long     4å­—èŠ‚double   8å­—èŠ‚long long 8å­—èŠ‚char*     8å­—èŠ‚\n\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n#pragma pack(8)  // å¼ºåˆ¶è®¾ç½®å¯¹é½ç³»æ•°ä¸º8struct A &#123;\tchar s[5];\tshort c;\tint a;&#125;;int main()&#123;\tint i = sizeof(A);\tprintf(&quot;%d&quot;, i);  return 0;&#125;\n\næŒ‰ç…§ä¸Šé¢æ‰€è®²çš„å†…å­˜å¯¹é½è§„åˆ™ï¼Œåˆ†æå¦‚ä¸‹ï¼šå› ä¸ºç»“æ„ä½“ä¸­æœ€å¤§çš„æ•°æ®æˆå‘˜é•¿åº¦ä¸º intï¼ˆå³ 4 å­—èŠ‚ï¼‰ï¼Œè€Œä¸”#pragma pack(8)æŒ‡å®šçš„å¯¹é½ç³»æ•°ä¸º 8 ï¼Œæ‰€ä»¥æœ‰æ•ˆå¯¹é½å€¼ s ä¸º min(4, 8) = 4ã€‚\nä¸‹å›¾æ˜¯ç»“æ„ä½“ A æŒ‰ç…§ 4 å­—èŠ‚å¯¹é½çš„å†…å­˜å¸ƒå±€ï¼Œå†…å­˜å¡«å……åœ¨ s4 åé¢ï¼Œè€Œä¸æ˜¯å¡«å……åœ¨ c åé¢ã€‚å¦å¤–ï¼Œå›¾ä¸­çš„å†…å­˜åœ°å€æŒ‰ç…§ä»ä¸‹å‘ä¸Šçš„æ–¹å‘å¢é•¿çš„ã€‚\nä»å›¾æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“sizeof(A) = 12ã€‚\nå †åº”ç”¨ç¨‹åºè™½ç„¶å¯ä»¥ä½¿ç”¨é¡µé¢ç²’åº¦çš„å‡½æ•°ï¼ˆå¦‚VirualAllocï¼‰æ¥åˆ†é…ä¸€ä¸ªæœ€å°ä¸º4KBæˆ–8Kçš„å†…å­˜å—ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦åˆ†é…è¿™ä¹ˆå¤§çš„å†…å­˜å—ï¼Œæˆ‘ä»¬å¯èƒ½åªéœ€è¦ 1K æˆ– 2K çš„å†…å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ— è®ºä»å†…å­˜çš„ä½¿ç”¨ç‡ï¼Œè¿˜æ˜¯ä»æ€§èƒ½çš„è§’åº¦æ¥çœ‹ï¼Œå†åˆ†é…è¿™ä¹ˆå¤§çš„ä¸€ä¸ªå†…å­˜åŒºåŸŸæ˜¾ç„¶ä¸æ˜¯æœ€ä¼˜çš„äº†ã€‚\nä¸ºäº†æ»¡è¶³è¿™ç§éœ€æ±‚ï¼ŒWindows æä¾›äº†ä¸€ä¸ªè¢«ç§°ä¸ºâ€œå †ç®¡ç†å™¨â€çš„ç»„ä»¶ï¼Œå®ƒè´Ÿè´£ç®¡ç†å¤§å†…å­˜åŒºåŸŸä¸­çš„å†…å­˜åˆ†é…ï¼Œè¿™äº›å¤§å†…å­˜åŒºåŸŸå°±æ˜¯é€šè¿‡ä¸€äº›é¡µé¢ç²’åº¦çš„å†…å­˜åˆ†é…å‡½æ•°ï¼ˆå¦‚VirualAllocï¼‰æ¥é¢„å®šï¼ˆreserveï¼‰çš„ã€‚\nå †ç®¡ç†å™¨ä¸­çš„åˆ†é…ç²’åº¦ç›¸å¯¹æ¯”è¾ƒå°ï¼šåœ¨32ä½ç³»ç»Ÿä¸Šæ˜¯8å­—èŠ‚ï¼Œåœ¨64ä½ç³»ç»Ÿä¸Šæ˜¯16å­—èŠ‚ã€‚\nå †ç®¡ç†å™¨å·²ç»è¢« Windows ç³»ç»Ÿç²¾å¿ƒè®¾è®¡ï¼Œåœ¨è¿™äº›å°å†…å­˜åˆ†é…çš„æƒ…å†µä¸‹ä¼šè¿›è¡Œå†…å­˜ä½¿ç”¨ç‡å’Œæ€§èƒ½ä¸¤ä¸ªæ–¹é¢çš„ä¼˜åŒ–ã€‚\nè¿›ç¨‹çš„é»˜è®¤å †æ¯ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªå †ï¼Œé‚£å°±æ˜¯è¿›ç¨‹çš„é»˜è®¤å †ã€‚è¿›ç¨‹çš„é»˜è®¤å †æ˜¯åœ¨è¿›ç¨‹å¯åŠ¨çš„æ—¶å€™åˆ›å»ºçš„ï¼Œè€Œä¸”åœ¨è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸­æ°¸è¿œä¸ä¼šè¢«åˆ é™¤ã€‚\nâ€œé»˜è®¤å †â€çš„é»˜è®¤å¤§å°ä¸º1MBï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡/HEAPé“¾æ¥å™¨ç¼–è¯‘å™¨é€‰é¡¹æ¥æŒ‡å®šä¸€ä¸ªæ›´å¤§çš„èµ·å§‹å¤§å°ã€‚è¿™ä¸ªå¤§å°å€¼åªæ˜¯åˆå§‹çš„ä¿ç•™å†…å­˜å¤§å°ï¼ŒåæœŸæ ¹æ®éœ€è¦å®ƒå¯ä»¥è‡ªåŠ¨æ‰©å……ã€‚\nåº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨GetProcessHeapæ¥è·å–è¿›ç¨‹çš„é»˜è®¤å †ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨HeapCreateå‡½æ•°æ¥åˆ›å»ºé¢å¤–çš„ç§æœ‰å †ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹ä¸åœ¨éœ€è¦ä¸€ä¸ªç§æœ‰å †çš„æ—¶å€™ï¼Œå®ƒå¯ä»¥è°ƒç”¨HeapDestoryæ¥é‡Šæ”¾è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚\ncrt å †C è¯­è¨€çš„malloc,freeå‡½æ•°ä»¥åŠ C++çš„new,deleteéƒ½æ˜¯ä»å †ä¸Šåˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„ã€‚ä½†æ˜¯ä»–ä»¬æ‰€ä½¿ç”¨çš„å †ä¸æ˜¯è¿›ç¨‹çš„é»˜è®¤å †ï¼Œä»–ä»¬ä½¿ç”¨çš„æ˜¯ç§æœ‰å †ã€‚å¯æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨mallocå‡½æ•°ä¹‹å‰å¹¶æœ‰è¿›è¡Œä»»ä½•ç§æœ‰å †çš„åˆ›å»ºæ“ä½œå‘€ï¼Ÿ å› ä¸ºmallocå‡½æ•°ä½¿ç”¨çš„è¿™ä¸ªç§æœ‰å †ä¸éœ€è¦ç¨‹åºå‘˜æ¥åˆ›å»ºï¼Œè€Œæ˜¯åœ¨ C æˆ– C++è¿è¡Œæ—¶åº“ DLL çš„å¯åŠ¨ä»£ç _DllMainCRTStartupä¸­è‡ªåŠ¨åˆ›å»ºçš„ã€‚ä¸‹é¢é€šè¿‡è§£æmallocå‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹æ¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚\nmallocå‡½æ•°çš„å®šä¹‰åœ¨malloc.cæ–‡ä»¶ä¸­ï¼Œè°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼šï¼ˆä»¥Microsoft Visual Studio 10.0ä¸ºä¾‹ï¼Œmalloc.cæ–‡ä»¶è·¯å¾„ä¸ºC:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\crt\\srcï¼‰\n(1). void* __cdecl malloc(size_t const size)(2). void * __cdecl _malloc_base (size_t size)(3). void * __cdecl _heap_alloc (size_t size)\n\n_heap_alloc çš„å®šä¹‰å¦‚ä¸‹ï¼š\n__forceinline void * __cdecl _heap_alloc (size_t size)&#123;    if (_crtheap == 0) &#123;        _FF_MSGBANNER();    /* write run-time error banner */        _NMSG_WRITE(_RT_CRT_NOTINIT);  /* write message */        __crtExitProcess(255);  /* normally _exit(255) */    &#125;    return HeapAlloc(_crtheap, 0, size ? size : 1);&#125;\n\nä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åˆ†é…å†…å­˜å—çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯_crtheapå¥æŸ„æ ‡è®°çš„å †ã€‚é‚£ä¹ˆ_crtheapå †æ˜¯ä½•æ—¶åˆ›å»ºçš„äº†ï¼Ÿ\næˆ‘ä»¬ä»heapinit.cæ–‡ä»¶ä¸­çš„_heap_initå‡½æ•°å¯ä»¥çœ‹åˆ°_crtheapå †çš„åˆ›å»ºè¿‡ç¨‹ï¼š\nHANDLE _crtheap=NULL;/****_heap_init() - Initialize the heap**Purpose:*       Setup the initial C library heap.**       NOTES:*       (1) This routine should only be called once!*       (2) This routine must be called before any other heap requests.**Entry:*       &lt;void&gt;*Exit:*       Returns 1 if successful, 0 otherwise.**Exceptions:*       If heap cannot be initialized, the program will be terminated*       with a fatal runtime error.********************************************************************************/int __cdecl _heap_init (void)&#123;        ULONG HeapType = 2;        //  Initialize the &quot;big-block&quot; heap first.        if ( (_crtheap = HeapCreate(0, BYTES_PER_PAGE, 0)) == NULL )            return 0;#ifdef _WIN64        // Enable the Low Fragmentation Heap by default on Windows XP and        // Windows Server 2003.  It&#x27;s the 8 byte overhead heap, and has        // generally better performance charateristics than standard heap,        // particularly for apps that perform lots of small allocations.        if (LOBYTE(GetVersion()) &lt; 6)        &#123;            HeapSetInformation(_crtheap, HeapCompatibilityInformation,                               &amp;HeapType, sizeof(HeapType));        &#125;#endif  /* _WIN64 */        return 1;&#125;\n\nä»ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºçš„ç§æœ‰å †å¥æŸ„å­˜æ”¾åœ¨ä¸€ä¸ªå…¨å±€çš„_crtheapå˜é‡ä¸­ï¼Œåé¢æ¯æ¬¡è°ƒç”¨mallocå‡½æ•°éƒ½æ˜¯ä»è¯¥å †åˆ†é…å†…å­˜å—ã€‚\nWin32 å †å‡½æ•°æˆ‘ä»¬æœ€å¸¸ç”¨çš„ Windows å †å‡½æ•°å¦‚ä¸‹ï¼š\n\nHeapCreateæˆ–HeapDestory â€” åˆ›å»ºæˆ–åˆ é™¤ä¸€ä¸ªç§æœ‰å †\nHeapAlloc â€” åˆ†é…ä¸€ä¸ªå †å†…å­˜å—\nHeapFree â€” é‡Šæ”¾ä¸€ä¸ªåŸå…ˆç”±HeapAllocåˆ†é…çš„å†…å­˜å—\nHeapReAlloc â€” å¢é•¿æˆ–ç¼©å‡ä¸€ä¸ªå·²åˆ†é…çš„å†…å­˜å—çš„å¤§å°\nHeapLockæˆ–HeapUnLock â€” æ§åˆ¶å †æ“ä½œçš„å†…å­˜è®¿é—®\nHeapWalk â€” åˆ—ä¸¾ä¸€ä¸ªå †å†…éƒ¨çš„å†…å­˜é¡¹å’ŒåŒºåŸŸã€‚\n\nå†…å­˜ç®¡ç† API åˆ†å±‚ç»“æ„\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œè™šæ‹Ÿå†…å­˜æœºåˆ¶ï¼ˆVirtual Memoryï¼‰æ˜¯ windows å†…å­˜ä½“ç³»çš„åŸºç¡€ï¼Œæ— è®ºä½ æ˜¯ä½¿ç”¨å †ï¼Œè¿˜æ˜¯ä½¿ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œå®ƒä»¬çš„åº•å±‚éƒ½æ˜¯åŸºäºè™šæ‹Ÿå†…å­˜æ¥å®ç°çš„ã€‚\nä»ä¸Šå¾€ä¸‹ï¼Œæ¯ä¸€å±‚çš„ API åœ¨å†…éƒ¨ä¼šä¾æ¬¡è°ƒç”¨ä¸‹ä¸€å±‚çš„ APIã€‚ä¸‹å›¾ä¸­åˆ—ä¸¾äº†æ¯å±‚ API ä¸­ç»å¸¸ä½¿ç”¨çš„å‡½æ•°ï¼š\n\nCRT Memory Functionsï¼šmalloc, free, new, delete\nLocalå’ŒGlobal Memory API: LocalAlloc, GlobalAlloc ï¼ˆè¿™ 2 ä¸ªå‡½æ•°ç°åœ¨ä¸å»ºè®®ä½¿ç”¨ï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„è€ä»£ç æ‰ä¿ç•™ä¸‹æ¥çš„ï¼‰\nHeap Memory APIï¼šHeapCreate, HeapAlloc, HeapDestory\nVirtual Memory APIï¼šVirtualAlloc, VirtualFree\nMemory Mapped File APIï¼šCreateFileMapping, MapViewOfFile, MapViewOfFileEx, UnMapViewOfFile\n\nè·¨æ¨¡å—å †é‡Šæ”¾é—®é¢˜åœ¨ã€ŠWindows æ ¸å¿ƒç¼–ç¨‹ ç¬¬äº”ç‰ˆã€‹ç¬¬ 19 ç«  DLL åŸºç¡€ï¼ˆ511 é¡µï¼‰ä¸­ç»™å‡ºäº†ä¸€ä¸ªå»ºè®®ï¼š\nâ€œå½“ä¸€ä¸ª MT ç‰ˆæœ¬çš„æ¨¡å—å¦‚æœæä¾›ä¸€ä¸ªå†…å­˜åˆ†é…å‡½æ•°çš„æ—¶å€™ï¼Œå®ƒå¿…é¡»åŒæ—¶æä¾›å¦ä¸€ä¸ªç”¨æ¥é‡Šæ”¾å†…å­˜çš„å‡½æ•°ã€‚â€ã€‚\nè¯´å¾—æ›´åŠ ç›´ç™½ä¸€ç‚¹å°±æ˜¯ï¼Œâ€œå¯¹äº MT çš„æ¨¡å—ï¼Œä¸è¦è·¨æ¨¡å—è¿›è¡Œå†…å­˜é‡Šæ”¾ã€‚â€ã€‚ä½†æ˜¯æ ¸å¿ƒç¼–ç¨‹è¿™æœ¬ä¹¦ä¸Šé¢æ²¡æœ‰å…·ä½“åˆ†æåŸå› ï¼Œæœ¬æ–‡å°±æ¥åˆ†æå…·ä½“çš„åŸå› ã€‚\nä¸åŒå †åˆ†é…çš„å†…å­˜å—ä¸èƒ½ç›¸äº’é‡Šæ”¾ã€‚\nWindows çš„å †ç®¡ç†å™¨å¯¹æ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤äº†å¤šä¸ªâ€œå †â€ï¼Œæˆ‘ä»¬ä»æ¯ä¸ªâ€œå †â€ä¸­åˆ†é…å¤„ç†çš„å†…å­˜å—çš„åœ°å€éƒ½ä¸ä¸€æ ·ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å°†ä»â€œå † Aâ€ä¸­åˆ†é…å‡ºæ¥çš„å†…å­˜å—æ‹¿åˆ°â€œå † Bâ€ä¸­ï¼Œè®©â€œå † Bâ€æ¥é‡Šæ”¾ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç¨‹åºå¼‚å¸¸ã€‚\n\nå¦‚ä¸Šå›¾ï¼Œé€šè¿‡mallocå‡½æ•°ä»â€œå † Aâ€ä¸­åˆ†é… 100 å­—èŠ‚å†…å­˜å—ï¼Œå†…å­˜å—åœ°å€ä¸º0x123456ï¼›ä»â€œå † Bâ€ä¸­åˆ†é… 100 å­—èŠ‚å†…å­˜å—ï¼Œå†…å­˜å—åœ°å€ä¸º0x345678.å¦‚æœå°†0x123456è¿™ä¸ªåœ°å€æ‹¿åˆ°â€œå † Bâ€ä¸­å»é‡Šæ”¾ï¼ŒåŠ¿å¿…ä¼šå¯¼è‡´å¼‚å¸¸ï¼Œå› ä¸ºâ€œå † Bâ€ä¸­æ²¡æœ‰è¿™åœ°å€ã€‚\né‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ä½¿ç”¨HeapFreeå‡½æ•°æ¥é‡Šæ”¾hHeapå‚æ•°æŒ‡å®šçš„â€œå †â€ä¸­çš„ä»»ä½•å†…å­˜å—äº†ã€‚ç­”æ¡ˆæ˜¯ï¼šä¸èƒ½ã€‚å›å¿†å‰é¢ä»‹ç»çš„HeapFreeå‡½æ•°ï¼Œ\nBOOL HeapFree(  HANDLE hHeap,  DWORD dwFlags,  LPVOID lpMem);\n\nè¿™ä¸ªå‡½æ•°åªè¦æ±‚ä¼ å…¥äº†å†…å­˜å—çš„èµ·å§‹åœ°å€æŒ‡é’ˆï¼Œä½†æ²¡æœ‰è¦æ±‚ä¼ å…¥éœ€è¦é‡Šæ”¾çš„å†…å­˜å—çš„å¤§å°ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°æ˜¯å¦‚ä½•çŸ¥é“èµ·å§‹åœ°å€æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å—çš„å¤§å°äº†ï¼Ÿ\næˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼ŒHeapAllocå‡½æ•°æ¯æ¬¡åˆ†é…å†…å­˜å—çš„æ—¶å€™éƒ½ä¼šé¢å¤–åˆ†é…ä¸€ç‚¹ç©ºé—´ç”¨äºå­˜å‚¨ä¸€ä¸ªç»“æ„ä½“ï¼Œè¯¥ç»“æ„ä½“ä¸­å­˜å‚¨äº†æœ¬æ¬¡åˆ†é…çš„å†…å­˜å—çš„å¤§å°ç­‰ä¿¡æ¯ã€‚å¤§è‡´å¦‚ä¸‹å›¾ï¼š\næ‰€ä»¥ï¼ŒHeapFreeå‡½æ•°é¦–å…ˆä¼šé€šè¿‡lpMemæŒ‡é’ˆè®¡ç®—å‡ºâ€œç»“æ„ä½“â€çš„åœ°å€ï¼Œç„¶åä»ç»“æ„ä½“ä¸­è·å–åˆ°åˆ†é…çš„å†…å­˜å—çš„å…·ä½“å¤§å°ï¼Œæœ€åæ‰§è¡Œé‡Šæ”¾æ“ä½œã€‚\nåŸºäºä¸Šé¢çš„åŸå› ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨HeapFreeå‡½æ•°çš„lpMemå‚æ•°ä¸­ä¼ å…¥éšæ„çš„åœ°å€ï¼Œå› ä¸ºè¯¥åœ°å€å¤„å¯èƒ½æ²¡æœ‰å­˜å‚¨ç”¨äºå­˜æ”¾å†…å­˜å—ä¿¡æ¯çš„ç»“æ„ä½“ï¼Œæ‰€ä»¥é‡Šæ”¾æ“ä½œå°±ä¼šå¤±è´¥ã€‚freeå‡½æ•°ä¹Ÿä¸€æ ·ï¼Œå› ä¸ºfreeå‡½æ•°å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨çš„HeapFreeå‡½æ•°ã€‚\n**MD æ¨¡å—å†…å­˜å¯ä»¥ç›¸äº’é‡Šæ”¾ã€‚**ä¸ºä»€ä¹ˆ MD æ¨¡å—å†…å­˜å¯ä»¥ç›¸äº’é‡Šæ”¾ï¼Œè€Œ MT æ¨¡å—çš„å´ä¸å¯ä»¥äº†ï¼Ÿ\næˆ‘ä»¬å…ˆåˆ†æä¸ºä»€ä¹ˆ MT æ¨¡å—çš„å†…å­˜é—´ç›¸äº’é‡Šæ”¾ä¼šå´©æºƒï¼Ÿ\nç°åœ¨æœ‰ 2 ä¸ªæ¨¡å—ï¼ˆA.dllå’ŒB.dllï¼‰éƒ½æ˜¯ä½¿ç”¨MTè¿è¡Œæ—¶åº“ï¼Œå³åŠ è½½çš„é™æ€åº“libcmt.libï¼ˆå¯ä»¥å‚è€ƒç†è§£ Visual C&#x2F;C++ è¿è¡Œæ—¶åº“ï¼‰ï¼Œåœ¨A.dllä¸­ä½¿ç”¨mallocåˆ†é… 100 å­—èŠ‚çš„å†…å­˜ï¼Œmallocè¿”å›çš„å†…å­˜åœ°å€ä¸º0x123456ã€‚ç„¶åå°†è¯¥åœ°å€ä¼ ç»™B.dllï¼Œåœ¨B.dllä¸­è°ƒç”¨freeå‡½æ•°æ¥é‡Šæ”¾è¿™ä¸ªå†…å­˜ã€‚å¦‚å›¾ï¼š\nä»â€œå †â€ç« èŠ‚æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒDLL åœ¨å¯åŠ¨ä»£ç _DllMainCRTStartupä¸­ä¼šå»ºç«‹ä¸€ä¸ªâ€œå †â€ï¼ˆå †å¥æŸ„å­˜æ”¾åœ¨_crtheap å˜é‡ä¸­ï¼‰ï¼Œæ‰€ä»¥ A.dll å’Œ B.dll ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª crt å †ã€‚\nä¸ºäº†åŒºåˆ†ï¼Œæˆ‘ä»¬å°†A.dllä¸­çš„crtå †ç§°ä½œ_crtheap_Aï¼ŒB.dllä¸­çš„crtå †ç§°ä½œ_crtheap_Bã€‚\nä»ä¸Šé¢å›¾å¯ä»¥çœ‹åˆ°ï¼ŒA.dllä¸­mallocçš„å†…å­˜æ‹¿åˆ°B.dllå»ä¸­å»freeï¼Œå°±ç›¸å½“äºä»å †_crtheap_Aä¸­åˆ†é…çš„å†…å­˜æ‹¿åˆ°å¦ä¸€ä¸ªå †_crtheap_Bä¸­çš„é‡Šæ”¾ã€‚ç¬¬ä¸€èŠ‚å·²ç»è§£é‡Šäº†ä¸ºä»€ä¹ˆä¸èƒ½è¿™æ ·åšäº†ã€‚\nç°åœ¨æˆ‘ä»¬åˆ†æä¸ºä»€ä¹ˆ MD æ¨¡å—çš„å†…å­˜é—´ç›¸äº’é‡Šæ”¾ä¸ä¼šå´©æºƒã€‚\nè¿˜æ˜¯ 2 ä¸ªæ¨¡å—ï¼ˆA.dllå’ŒB.dllï¼‰ï¼Œä½†æ˜¯ç°åœ¨ä»–ä»¬éƒ½æ˜¯ä½¿ç”¨MDè¿è¡Œæ—¶åº“ï¼Œå³åŠ è½½çš„åŠ¨æ€åº“msvcr100.dllï¼Œç¨‹åºçš„ä»£ç çš„è¿‡ç¨‹å’Œä¸Šé¢ä¸€æ ·ï¼Œè¿˜æ˜¯åœ¨A.dllä¸­ä½¿ç”¨mallocåˆ†é… 100 å­—èŠ‚çš„å†…å­˜ï¼Œmallocè¿”å›çš„å†…å­˜åœ°å€ä¸º0x123456ã€‚ç„¶åå°†è¯¥åœ°å€ä¼ ç»™B.dllï¼Œåœ¨B.dllä¸­è°ƒç”¨freeå‡½æ•°æ¥é‡Šæ”¾è¿™ä¸ªå†…å­˜ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ç¨‹åºå´ä¸ä¼šå´©æºƒï¼Œé€šè¿‡ä¸‹é¢çš„å›¾æˆ‘ä»¬åŸºæœ¬å¯ä»¥æ˜ç™½åŸå› äº†ï¼Œå¦‚å›¾ï¼š\nå› ä¸º Aã€B ä¸¤ä¸ª dll éƒ½æ˜¯é“¾æ¥çš„Â·msvcr100.dllÂ·ï¼ŒåŒä¸€ä¸ª dll åœ¨ä¸€ä¸ªè¿›ç¨‹åªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿›ç¨‹ä¸­åªä¼šæœ‰ä¸€ä¸ª crt å †ï¼ˆ_crtheapï¼‰ï¼Œmallocå’Œfreeéƒ½æ˜¯è¿è¡Œæ—¶åº“æä¾›çš„å‡½æ•°ï¼Œæ‰€ä»¥éƒ½ä¼šè°ƒåˆ°è¿è¡Œæ—¶åº“é‡Œé¢å»ï¼Œç„¶åä»è¿è¡Œæ—¶åº“é‡Œé¢çš„_crtheapåˆ†é…å’Œé‡Šæ”¾å†…å­˜å—ã€‚å› ä¸ºåˆ†é…å’Œé‡Šæ”¾éƒ½æ˜¯åœ¨åŒä¸€ä¸ªå †ä¸Šï¼Œæ‰€ä»¥ä¸ä¼šå´©æºƒã€‚\nä½¿ç”¨ std::string è·¨ MT æ¨¡å—ä¼ å‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª DLLï¼Œè¯¥ DLL çš„è¿è¡Œæ—¶åº“é‡‡ç”¨ MT æ¨¡å¼é“¾æ¥ï¼Œåœ¨ä¸ºè¯¥æ¨¡å—å®šä¹‰æ¥å£å‡½æ•°æ—¶ï¼Œæ¥å£å‚æ•°ä½¿ç”¨çš„æ˜¯std::stringç±»å‹ã€‚EXE ç¨‹åºè°ƒç”¨ DLL ä¸­çš„æ¥å£æ—¶é‡åˆ°&quot;Debug Assertioni Failed&quot;é”™è¯¯çš„é—®é¢˜ã€‚\n\nä¸Šé¢çš„é”™è¯¯æç¤ºè¡¨æ˜è§¦å‘äº†debug_heap.cppæ–‡ä»¶ä¸­çš„ä¸€ä¸ªè°ƒè¯•æ–­è¨€ï¼ˆreleaseæ¨¡å¼ä¸‹è°ƒç”¨çš„æ˜¯heap.cppä¸­çš„åˆ†é…å‡½æ•°ï¼‰ï¼Œè¯¥æ–­è¨€ç”¨äºåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦æŒ‡å‘å †åˆ†é…çš„å†…å­˜å—çš„ç¬¬ä¸€å—ã€‚åœ¨ release æ¨¡å¼ä¸‹ä¸ä¼šå¼¹å‡ºè¿™æ ·çš„æ–­è¨€é”™è¯¯ï¼Œç¨‹åºå¯èƒ½ä¼šç›´æ¥å´©æºƒï¼ˆå´©æºƒç›¸å¯¹æ¥è¯´è¿˜æ¯”è¾ƒå¥½æ’æŸ¥ï¼‰ï¼Œå°±æ€•å‡ºç°å…¶ä»–ä¸å¯é¢„æ–™çš„ã€éš¾ä»¥æ’æŸ¥çš„é”™è¯¯ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nç°æœ‰ DLLUser.exe è°ƒç”¨ DLL.dll ä¸­çš„ TestFun å‡½æ•°ï¼Œä»£ç é‡éå¸¸å°ã€‚DLL.dll ä¸­ TestFun å‡½æ•°å®šä¹‰ï¼š\nDLL_API void TestFun( std::string str)&#123;\treturn;&#125;\n\nDLLUser.exeä¸­è°ƒç”¨TestFunå‡½æ•°ï¼š\nint _tmain(int argc, _TCHAR* argv[])&#123;\tstd::string str = &quot;test&quot;;\tTestFun(str);\treturn 0;&#125;\n\nä¸Šé¢çš„ä»£ç è¿è¡Œä¹‹åç¨‹åºå°±ä¼šå¼¹å‡ºé”™è¯¯æ–­è¨€ã€‚åŸå› æ˜¯std::stringåœ¨è¿›è¡Œå€¼ä¼ å‚çš„è¿‡ç¨‹ä¸­ä¼šæ‰§è¡Œä¸€æ¬¡æ·±æ‹·è´ï¼Œå³ï¼šåœ¨å †ä¸Šåˆ†é…å†…å­˜å—ï¼Œæ‹·è´â€œtestâ€åˆ°å†…å­˜å—ä¸­ï¼Œç„¶åå°†ä¸´æ—¶å½¢å‚std::stringå¯¹è±¡ä¼ é€’åˆ° dll ä¸­ï¼Œdll ä¸­çš„TestFunå‡½æ•°åœ¨ä½œç”¨åŸŸç»“æŸåå¯¹ä¸´æ—¶å½¢å‚è¿›è¡Œé‡Šæ”¾æ—¶å°±å‡ºç°äº†é”™è¯¯ï¼Œå› ä¸ºå°è¯•åœ¨dllçš„crtå †ä¸­é‡Šæ”¾ç”±åœ¨exeçš„crtå †ä¸­åˆ†é…çš„å†…å­˜å—ã€‚\n\né€šè¿‡ä¸Šé¢é—®é¢˜çš„åˆ†æï¼ŒåŠ ä¸Šå‰é¢å‡ ç¯‡æ–‡ç« å¯¹ Windows å†…å­˜ä½“ç³»çš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¸éš¾æƒ³å‡ºè§£å†³æ–¹æ¡ˆï¼šè®© std::string ç»Ÿä¸€åœ¨è¿›ç¨‹çš„é»˜è®¤å †ä¸Šåˆ†é…å†…å­˜å—ï¼Œè€Œä¸æ˜¯åœ¨å„ä¸ªæ¨¡å—çš„crtå †ä¸Šåˆ†é…ã€‚\n#include &lt;windows.h&gt;#include &lt;string&gt;#include &lt;vector&gt;template &lt;typename T&gt;class vm_allocator : public std::allocator&lt;T&gt; &#123;public:\ttypedef size_t size_type;\ttypedef T* pointer;\ttypedef const T* const_pointer;\ttemplate&lt;typename _Tp1&gt;\tstruct rebind &#123;\t\ttypedef vm_allocator&lt;_Tp1&gt; other;\t&#125;;\tpointer allocate(size_type n, const void *hint = 0) &#123;\t\tUNREFERENCED_PARAMETER(hint);\t\tvoid* pBuffer = HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, n * sizeof(T));\t\treturn (pointer)pBuffer;\t&#125;\tvoid deallocate(pointer p, size_type n) &#123;\t\tUNREFERENCED_PARAMETER(n);\t\tif (p) &#123;\t\t\tHeapFree(GetProcessHeap(), 0, p);\t\t&#125;\t&#125;\tvm_allocator() throw() : std::allocator&lt;T&gt;() &#123;\t&#125;\tvm_allocator(const vm_allocator &amp;a) throw() : std::allocator&lt;T&gt;(a) &#123;\t&#125;\ttemplate &lt;class U&gt;\tvm_allocator(const vm_allocator&lt;U&gt; &amp;a) throw() : std::allocator&lt;T&gt;(a) &#123;\t&#125;\t~vm_allocator() throw() &#123;\t&#125;&#125;;typedef std::basic_string&lt;char, std::char_traits&lt;char&gt;, vm_allocator&lt;char&gt; &gt; mystring;\n\nä¸Šé¢çš„ä»£ç ä½¿ç”¨è‡ªå®šä¹‰çš„å†…å­˜åˆ†é…å™¨vm_allocator&lt;char&gt;å®šä¹‰äº†mystringç±»ï¼Œæˆ‘ä»¬åªéœ€è¦å°†TestFunå‡½æ•°æ¥å£ä¸­çš„std::stringä¿®æ”¹ä¸ºmystringå³å¯è§£å†³å´©æºƒé—®é¢˜ã€‚\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["å†…å­˜"]},{"title":"NSISçš„UIæ’ä»¶çš„å¼€å‘","url":"/post/100006247.html","content":"å‰é¢çš„å‡ ç¯‡æ–‡ç« ä»‹ç»äº† NSIS çš„ä¼ ç»Ÿç•Œé¢çš„å®‰è£…åŒ…å’Œç°ä»£ç•Œé¢çš„å®‰è£…åŒ…çš„åˆ¶ä½œæ–¹æ³•ï¼Œä¹Ÿæåˆ°äº† NSIS æ”¯æŒè‡ªå®šä¹‰é¡µé¢ï¼ˆå³ä½¿ç”¨page customï¼‰çš„ç‰¹æ€§ï¼Œè‡ªå®šä¹‰é¡µé¢éœ€è¦ç”¨æˆ·è‡ªå·±åˆ›å»ºå¯¹è¯æ¡†ã€æ§ä»¶ã€æ·»åŠ æ§ä»¶å“åº”ç­‰ç­‰ï¼Œè™½ç„¶ NSIS æä¾›äº†nsDialogs.nshæ¥æ”¯æŒè¿™äº›åŠŸèƒ½ï¼Œä½†ä½¿ç”¨èµ·æ¥è¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼ˆéœ€è¦ä¸“é—¨äº†è§£è¿™ä¸ªæ’ä»¶è¯¸å¤šç”¨æ³•ï¼‰ï¼Œè€Œä¸”ä¸å¤Ÿçµæ´»ï¼Œæ‰€ä»¥æœ¬æ–‡ä»‹ç»ä¸€ç§ç»ˆæçš„è‡ªå®šä¹‰ç•Œé¢çš„å®‰è£…åŒ…è§£å†³æ–¹æ¡ˆï¼Œå³å®Œå…¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ç•Œé¢åº“æ¥ç»˜åˆ¶å®‰è£…åŒ…ç•Œé¢ã€‚\nè¯¥æ–¹æ¡ˆæ˜¯å¯¹ç•Œé¢åº“æ²¡æœ‰é™åˆ¶çš„ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–ä»»ä½•ç•Œé¢åº“ï¼Œå¦‚ MFC, Qtï¼ŒWTL ç­‰ã€‚é€šè¿‡è¿™ç§æ–¹æ¡ˆå¯ä»¥å¾ˆè½»æ¾çš„å®ç°ç±»ä¼¼é‡‘å±±æ¯’éœ¸ã€QQã€360 å®‰å…¨å«å£«ç­‰è½¯ä»¶çš„å®‰è£…åŒ…ç•Œé¢ã€‚\n\n\nåŸç†NSIS è‡ªå®šä¹‰é¡µé¢çš„è¯­æ³•ï¼š\npage custom [åˆ›å»ºå‡½æ•°] [ç¦»å¼€å‡½æ•°] [æ ‡é¢˜]\n\nä½¿ç”¨ç¬¬ä¸‰æ–¹ç•Œé¢åº“å®Œå…¨å®šåˆ¶å®‰è£…åŒ…ç•Œé¢çš„åŸºæœ¬åŸç†å°±æ˜¯ï¼šæ–°å»ºä¸€ä¸ª dll æ’ä»¶ï¼Œåœ¨page customçš„[åˆ›å»ºå‡½æ•°]ä¸­è°ƒç”¨è¯¥æ’ä»¶ä¸­çš„å‡½æ•°æ¥æ˜¾ç¤ºç•Œé¢ï¼Œè¿™æ—¶ç•Œé¢ä¸Šçš„æŒ‰é’®çš„å“åº”å°±ä¸å†ç”± NSIS æ§åˆ¶äº†ï¼Œå®Œå…¨ç”±æˆ‘ä»¬çš„ä»£ç æ§åˆ¶ã€‚\néš¾ç‚¹é—®é¢˜&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä½¿ç”¨æˆ‘ä»¬çš„æ’ä»¶ dll å®Œå…¨æ›¿ä»£ NSIS ç•Œé¢ä¹‹åï¼Œæœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼š\n\nå¦‚ä½•è·å–å®‰è£…å’Œå¸è½½çš„è¿›åº¦\nå¦‚ä½•ä» C++å›è°ƒ NSIS å‡½æ•°\n\nå®‰è£…å’Œå¸è½½è¿›åº¦NSIS ä¸­çš„å®‰è£…å’Œå¸è½½è¿›åº¦ç”±!insertmacro MUI_PAGE_INSTFILESæˆ–Page instfilesæä¾›ã€‚\nåœ¨å®Œå…¨ä½¿ç”¨è‡ªå·±çš„ç•Œé¢ä¹‹åï¼Œè¿™ 2 ä¸ª NSIS ç•Œé¢éƒ½ä¸èƒ½ä½¿ç”¨äº†ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è‡ªå·±è·å–å®‰è£…ï¼ˆé‡Šæ”¾ï¼‰å’Œå¸è½½ï¼ˆåˆ é™¤ï¼‰çš„è¿›åº¦ã€‚\nä»¥å®‰è£…è¿›åº¦ä¸ºä¾‹ï¼ŒNSIS ä¸­æ–‡ä»¶çš„å®‰è£…æ—¶æ–‡ä»¶é‡Šæ”¾åŠŸèƒ½éƒ½æ˜¯ç”±Fileå‘½ä»¤æä¾›ï¼Œä½†è¯¥å‘½ä»¤æ²¡æœ‰æä¾›é‡Šæ”¾è¿›åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•è·å–åˆ°å®æ—¶çš„é‡Šæ”¾è¿›åº¦ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ›²æŠ˜çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ª 7z å‹ç¼©åŒ…æ”¾å…¥å®‰è£…åŒ…ä¸­ï¼š\nSetOutPath $INSTDIRFile &quot;app\\app.7z&quot;\n\nç­‰å®‰è£…åŒ…é‡Šæ”¾å®Œè¿™ä¸ªå‹ç¼©åŒ…ä¹‹åï¼ˆè¿™æ®µæ—¶é—´çš„è¿›åº¦æ— æ³•æ˜¾ç¤ºï¼‰ï¼Œå†ä½¿ç”¨ NSIS å®˜æ–¹æä¾›çš„nsis7zæ’ä»¶æ¥è§£å‹ç¼©è¿™ä¸ª 7z å‹ç¼©åŒ…ï¼Œç”±äº nsis7z æ’ä»¶å¯ä»¥æä¾›è§£å‹ç¼©è¿›åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªè¿›åº¦æ˜¾ç¤ºåœ¨å®‰è£…è¿›åº¦é¡µé¢ä¸Šï¼Œè§£å‹å®Œä¹‹åå†åˆ é™¤ 7z å‹ç¼©åŒ…ã€‚è¿™ä¸ªæ–¹æ¡ˆçš„ä¸€ä¸ªå¼Šç«¯å°±æ˜¯ï¼Œ7z å‹ç¼©åŒ…ä»å®‰è£…åŒ…ä¸­é‡Šæ”¾åˆ°æœ¬åœ°ç£ç›˜çš„è¿‡ç¨‹éœ€è¦æ—¶é—´ï¼Œä¸”è¿™ä¸ªæ—¶é—´æ— æ³•å‡†ç¡®çš„æ˜¾ç¤ºåœ¨è¿›åº¦é¡µé¢ã€‚\nFunction ExtractFunc    SetOutPath $INSTDIR    File &quot;app\\app.7z&quot;    GetFunctionAddress $R9 ExtractCallback    Nsis7z::ExtractWithCallback &quot;$INSTDIR\\app.7z&quot; $R9    Delete &quot;$INSTDIR\\app.7z&quot;FunctionEnd\n\nFunction ExtractCallback    Pop $1    Pop $2    System::Int64Op $1 * 100    Pop $3    System::Int64Op $3 / $2    Pop $0    nsDui::SetSliderValue &quot;slrProgress&quot; $0    $&#123;If&#125; $1 == $2        nsDui::SetSliderValue &quot;slrProgress&quot; 100        nsDui::NextPage &quot;wizardTab&quot;    $&#123;EndIf&#125;FunctionEnd\n\n\nå†™è¿™ç¯‡æ–‡å­—çš„æ—¶å€™ï¼Œå‘ç°ç°åœ¨çš„nsis7zå·²ç»å¤ªè€äº†ï¼Œæ–°ç‰ˆçš„å‹ç¼©è½¯ä»¶ç”Ÿæˆçš„ 7z å‹ç¼©åŒ…ï¼Œè¯¥æ’ä»¶å·²ç»æ— æ³•è§£å‹ã€‚å¯ä»¥ä½¿ç”¨ 7za.exe å‘½ä»¤è¡Œå·¥å…·æ¥ç”Ÿæˆ 7z å‹ç¼©æ–‡ä»¶ï¼Œ7za.exe ä»æ­¤å¤„ä¸‹è½½ï¼šhttp://download.csdn.net/download/china_jeffery&#x2F;10214464ã€‚7za ç”Ÿæˆ 7z å‹ç¼©åŒ…è¯­æ³•ä¸ºï¼š7za.exe a app.7z app\\*\n\nä» C++å›è°ƒ NSIS å‡½æ•°&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æ¯”å¦‚ç”¨æˆ·ç‚¹å‡»äº†æˆ‘ä»¬è‡ªå®šä¹‰ç•Œé¢ä¸Šçš„â€œå–æ¶ˆâ€æŒ‰é’®ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦è°ƒç”¨ NSIS çš„Abortå‡½æ•°æ¥å–æ¶ˆå®‰è£…ã€‚æ­¤æ—¶å°±éœ€è¦è§£å†³å¦‚ä½•ä» C++ç¯å¢ƒå›è°ƒåˆ° NSIS ç¯å¢ƒã€‚\nå¤§è‡´åŸç†æ˜¯ï¼Œåœ¨ NSIS è„šæœ¬ä¸­åˆå§‹åŒ–è‡ªå®šä¹‰ç•Œé¢çš„æ§ä»¶ä¸ NSIS å‡½æ•°æŒ‡é’ˆï¼ˆæ•´å‹ï¼‰çš„ç»‘å®šå…³ç³»ï¼ˆå¦‚æ§ä»¶åâ€“å‡½æ•°åï¼‰ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ§ä»¶ä¹‹åï¼ŒæŸ¥æ‰¾åˆ°è¯¥æ§ä»¶ç»‘å®šçš„ NSIS å‡½æ•°ï¼Œç„¶åè°ƒç”¨extra_parameters::ExecuteCodeSegmentå‡½æ•°ï¼ˆå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ NSIS å‡½æ•°æŒ‡é’ˆï¼‰ã€‚\nä»¥ duilib ç•Œé¢åº“ä¸ºä¾‹ï¼Œå¯¹ NSIS æš´éœ² OnControlBindNSISScript æ¥å£ï¼Œæä¾›ç»‘å®šæ§ä»¶ä¸ NSIS å‡½æ•°æŒ‡é’ˆï¼ˆæ•´å‹ï¼‰çš„åŠŸèƒ½ï¼š\nNSISAPI OnControlBindNSISScript(HWND hwndParent, int string_size, char *variables, stack_t **stacktop, extra_parameters *extra)&#123;    char controlName[MAX_PATH];    ZeroMemory(controlName, MAX_PATH);    popstring(controlName);    int callbackID = popint();    g_pMainDlg-&gt;SaveToControlCallbackMap( controlName, callbackID );&#125;\n\nåœ¨ NSIS ä¸­è°ƒç”¨OnControlBindNSISScriptç»‘å®šæ§ä»¶ä¸ NSIS å‡½æ•°ï¼š\nGetFunctionAddress $0 OnExitDUISetupnsDui::OnControlBindNSISScript &quot;btnFinishedClose&quot; $0\n\nåœ¨ duilib çš„NotifyæŒ‰é’®äº‹ä»¶å“åº”å‡½æ•°ä¸­è°ƒç”¨ExecuteCodeSegmentæ‰§è¡Œ NSIS å‡½æ•°ï¼š\nvoid CDlgMain::Notify( TNotifyUI&amp; msg )&#123;    std::map&lt;CDuiString, int &gt;::iterator iter = m_controlCallbackMap.find( msg.pSender-&gt;GetName() );    if( _tcsicmp( msg.sType, _T(&quot;click&quot;) ) == 0 )&#123;        if( iter != m_controlCallbackMap.end() )            g_pluginParms-&gt;ExecuteCodeSegment( iter-&gt;second - 1, 0 );    &#125;    else if( _tcsicmp( msg.sType, _T(&quot;textchanged&quot;) ) == 0 )&#123;        if( iter != m_controlCallbackMap.end() )            g_pluginParms-&gt;ExecuteCodeSegment( iter-&gt;second - 1, 0 );    &#125; else &#123;        WindowImplBase::Notify(msg);    &#125;&#125;\n\nå¯ä»¥å‚è€ƒæˆ‘çš„NSIS-UI-Plugin é¡¹ç›®ï¼ŒåŸºäºè¯¥é¡¹ç›®å¯ä»¥ä½¿ç”¨ä»»æ„ç¬¬ä¸‰æ–¹ç•Œé¢åº“æ¥å®šåˆ¶å®‰è£…ç•Œé¢ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["NSIS"]},{"title":"Windbgè°ƒè¯•é€ŸæŸ¥æ‰‹å†Œ","url":"/post/2711697202.html","content":"Windbg æ˜¯ Microsoft å…¬å¸æ¨å‡ºçš„å…è´¹çš„ã€å¸¦ GUI çš„è°ƒè¯•å™¨ï¼Œæ”¯æŒ Source å’Œ Assembly ä¸¤ç§æ¨¡å¼çš„è°ƒè¯•ã€‚\nWindbg ä¸ä»…å¯ä»¥è°ƒè¯•åº”ç”¨ç¨‹åºï¼Œè¿˜å¯ä»¥è¿›è¡Œç³»ç»Ÿå†…æ ¸è°ƒè¯•ï¼ŒWindbg æ”¯æŒçš„å¹³å°åŒ…æ‹¬ X86ã€IA64ã€AMD64ã€‚\n\n\nç¬¦å·æ–‡ä»¶åœ¨èœå•é¡¹ File -&gt; Symbol File Path ä¸­è®¾ç½®ç¬¦åˆæ–‡ä»¶æœç´¢è·¯å¾„ï¼Œå¦‚ï¼š\nD:\\symbol_path;SRV*D:\\symbolslocal*http://msdl.microsoft.com/download/symbols\n\næ„æ€æ˜¯å…ˆä»D:\\symbol_pathä¸­æ‰¾ç¬¦å·æ–‡ä»¶ï¼›å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±å»æœåŠ¡å™¨ä¸­ä¸‹è½½å¹¶ä¿å­˜åˆ°D:\\symbolslocalç›®å½•ä¸­ã€‚\nå¯ä»¥ä½¿ç”¨.sympath+ å‘½ä»¤æ¥æ·»åŠ å…¶ä»–ç›®å½•åˆ°æœç´¢è·¯å¾„ä¸­ï¼Œå¦‚.sympath+ D:\\other_symbol_dirã€‚ ç„¶åä½¿ç”¨.reloadæ¥æ ¹æ®æ–°çš„è·¯å¾„é‡æ–°æœç´¢å¹¶åŠ è½½ç¬¦å·æ–‡ä»¶ã€‚\nå‘½ä»¤è¡Œå¯åŠ¨å¯ä»¥é€šè¿‡å¯¹ windbg åŠ å…¥å¯åŠ¨å‚æ•°çš„æ–¹å¼æ¥æŒ‡å®šç¬¦å·æ–‡ä»¶è·¯å¾„å’Œæºç è·¯å¾„ç­‰ç­‰ã€‚\nstart &quot;&quot; &quot;%~dp0/Debuggers_x86/windbg.exe&quot; -Q -y &quot;D:\\symbolslocal*http://msdl.microsoft.com/download/symbols&quot; -srcpath &quot;srv*C:\\CodeCache&quot;\n\nå†…æ ¸åŒæœºè°ƒè¯•å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼š\n&quot;C:\\Program Files (x86)\\Windows Kits\\10\\Debuggers\\x64\\windbg.exe&quot; -k net:port=50010,key=jspq4rggw9ge.3ps1mwc6ye9fe.vm89wpoz72jb.1ldc14kg2ex39 -y &quot;D:\\symbolslocal*http://msdl.microsoft.com/download/symbols&quot;\n\nå·¥ä½œç©ºé—´Windbg ä¼šä¿å­˜æ¯ä¸ªä½ è°ƒè¯•çš„å·¥ç¨‹çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬è°ƒè¯•é¡¹ç›®çš„å±æ€§ã€å‚æ•°ã€ä¼šè¯çŠ¶æ€ã€è°ƒè¯•å™¨è®¾ç½®ã€åŠå›¾å½¢ç•Œé¢ä¿¡æ¯ï¼Œç±»ä¼¼äº ide çš„é¡¹ç›®æ–‡ä»¶ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\næ¯ä¸ªè°ƒè¯•çš„å·¥ä½œç©ºé—´ä¿¡æ¯é»˜è®¤ä¿å­˜åœ¨HKEY_CURRENT_USER\\Software\\Microsoft\\Windbg\\Workspacesä¸­ï¼Œåœ¨è¿™ä¸ªé”®ä¸‹ä¸€èˆ¬æœ‰ 4 ä¸ªå­é”® Userã€Kernelã€Dumpã€Explicit, ä»–ä»¬åˆ†åˆ«ä¿å­˜ç”¨æˆ·æ€è°ƒè¯•ï¼Œå†…æ ¸æ€è°ƒè¯•ã€è½¬å‚¨æ–‡ä»¶è°ƒè¯•ã€ä»¥åŠæ‰‹åŠ¨ä¿å­˜ï¼ˆSave Workspace Asï¼‰çš„å·¥ä½œç©ºé—´ä¿¡æ¯ã€‚\nå¸¸ç”¨è°ƒè¯•æ–¹æ³•IFEOåœ¨â€œHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Image File Execution Optionsâ€ä¸‹æ–°å»ºä¸€ä¸ªä»¥å¾…è°ƒè¯•ç¨‹åºåå‘½åçš„å­é¡¹ï¼Œç„¶ååœ¨è¿™ä¸ªå­é¡¹ä¸­æ–°å»ºä¸€ä¸ªåä¸ºDebuggerçš„REG_SZç±»å‹çš„å€¼ï¼Œå°†å€¼è®¾ç½®ä¸º windbg çš„å…¨è·¯å¾„ï¼Œæ¯”å¦‚ï¼šC:\\Program Files (x86)\\Windows Kits\\8.1\\Debuggers\\x86\\windbg.exeã€‚\nè¿™æ ·ï¼Œå†è¿è¡Œå¾…è°ƒè¯•çš„ç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå…ˆå¯åŠ¨ windbgï¼Œå¹¶æŠŠè¦è°ƒè¯•ç¨‹åºçš„è·¯å¾„ä¼ é€’ç»™ä»–ã€‚\nå†…æ ¸è¿œç¨‹è°ƒè¯•é¦–å…ˆï¼Œåœ¨è¢«è°ƒè¯•æœºå™¨ï¼ˆå¦‚è™šæ‹Ÿæœºï¼‰ä¸Šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é…ç½®å¼€å¯è°ƒè¯•æ¨¡å¼ï¼š\nbcdedit /debug onbcdedit /dbgsettings net hostip:192.168.50.124 port:50010\n\nå…¶ä¸­ï¼Œhostip ä¸ºè¿è¡Œ Windbg çš„è°ƒè¯•æœºå™¨çš„ IPï¼Œéœ€è¦ç¡®ä¿åœ¨è¢«è°ƒè¯•æœºå™¨ä¸Šå¯ä»¥ ping é€šè¯¥ IPã€‚åœ¨è¿è¡Œå®Œç¬¬äºŒæ¡å‘½ä»¤ä¹‹åï¼Œä¼šç”Ÿæˆä¸€ä¸² Keyï¼Œè®°ä½è¯¥ Keyã€‚\nç„¶åï¼Œåœ¨è¢«è°ƒè¯•æœºå™¨ä¸Šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œå‚æ•°è¿è¡Œ Windbgï¼ˆå…¶ä¸­ port éœ€è¦ä¸ä¸Šé¢å‘½ä»¤ä¿æŒä¸€ç›´ï¼Œkey ä¸ºä¸Šé¢å‘½ä»¤ç”Ÿæˆçš„ Keyï¼‰ï¼š\n&quot;C:\\Program Files (x86)\\Windows Kits\\10\\Debuggers\\x64\\windbg.exe&quot; -k net:port=50010,key=jspq4rggw9ge.3ps1mwc6ye9fe.vm89wpoz72jb.1ldc14kg2ex39 -y &quot;SRV*D:\\symbolslocal*http://msdl.microsoft.com/download/symbols&quot;\n\næœ€åï¼Œä¿æŒ Windbg å¼€å¯ï¼Œå¹¶é‡å¯è¢«è°ƒè¯•æœºå™¨ï¼ˆå¦‚è™šæ‹Ÿæœºï¼‰ï¼Œæ­¤æ—¶è¢«è°ƒè¯•æœºå™¨ä¼šè‡ªåŠ¨è¿æ¥ä¸Š Windbgã€‚\nå¸¸ç”¨å‘½ä»¤windbg å‘½ä»¤åˆ†ä¸ºæ ‡å‡†å‘½ä»¤ï¼Œå…ƒå‘½ä»¤å’Œæ‰©å±•å‘½ä»¤ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å…ƒå‘½ä»¤ä»¥.å¼€å¤´ï¼Œå¯ä»¥æä¾›æ ‡å‡†å‘½ä»¤æ²¡æœ‰æä¾›çš„åŠŸèƒ½ï¼Œä¹Ÿå†…å»ºåœ¨è°ƒè¯•å¼•æ“ä¸­ã€‚æ‰©å±•å‘½ä»¤ä»¥!å¼€å¤´ï¼Œç”¨äºæ‰©å±•æŸä¸€æ–¹é¢çš„è°ƒè¯•åŠŸèƒ½ï¼Œå®ç°åœ¨åŠ¨æ€åŠ è½½çš„æ‰©å±•æ¨¡å—ä¸­ã€‚\nWindbg ä¸­é»˜è®¤æ•°å­—ä¸ºåå…­è¿›åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨0nå‰ç¼€è¡¨ç¤ºåè¿›åˆ¶ã€‚\ntabé”®       è‡ªåŠ¨å®Œæˆå‘½ä»¤.hh         æŸ¥çœ‹æŒ‡å®šå‘½ä»¤çš„å¸®åŠ©æ‰‹å†Œ.reload     é‡æ–°åŠ è½½ç¬¦å·æ–‡ä»¶.restart    é‡æ–°å¯åŠ¨è°ƒè¯•ç›®æ ‡qd          é€€å‡ºå¹¶ä¸è°ƒè¯•ç›®æ ‡åˆ†ç¦»p           å•æ­¥æ‰§è¡Œï¼Œå¿«æ·é”®F10g           è¿è¡Œç¨‹åºï¼Œå¿«æ·é”®F5t           å•æ­¥æ­¥å…¥ï¼Œå¿«æ·é”®F11gu          è¿”å›å‡½æ•°è°ƒç”¨å¤„ï¼Œå¿«æ·é”®Shift+F11pt          è¿è¡Œåˆ°å‡½æ•°è¿”å›å¤„=========== æ¨¡å— ===========lm            æŸ¥çœ‹å·²åŠ è½½çš„æ¨¡å—ä¿¡æ¯ï¼Œè¯­æ³•ï¼šlm [olfv]ï¼Œå…¶ä¸­ï¼š                                          o: åˆ—å‡ºå·²åŠ è½½æ¨¡å—                                          l: åŒ…å«ç¬¦åˆä¿¡æ¯                                          f: åŒ…å«æ¨¡å—è·¯å¾„                                          v: åŒ…å«è¯¦ç»†ä¿¡æ¯lm a 0x41000  æŸ¥çœ‹åŒ…å«æŒ‡å®šåœ°å€çš„æ¨¡å—lm vm Test*   æŸ¥çœ‹ç¬¦åˆTest*åç§°çš„æ¨¡å—ä¿¡æ¯ï¼Œvè¡¨ç¤ºæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œmè¡¨ç¤ºé€šé…ç¬¦æ¨¡å¼=========== æ–­ç‚¹ ===========å¿«æ·é”®F9ï¼Œæ‰“å¼€æºæ–‡ä»¶ï¼Œé€‰ä¸­å¯¹åº”è¡Œï¼Œä½¿ç”¨å¿«æ·é”®å³å¯è®¾ç½®æ–­ç‚¹ï¼Œäº¦å¯ä½¿ç”¨ä¸‹é¢æ–¹å¼ï¼šbp $exentry                                åœ¨ç¨‹åºå…¥å£ç‚¹è®¾ç½®æ–­ç‚¹ï¼Œ$exentryæ˜¯ä¸€ä¸ªä¼ªå¯„å­˜å™¨bp 0x00401030                              åœ¨åœ°å€0x00401030å¤„è®¾ç½®æ–­ç‚¹bp TestModule!TestFunc                     åœ¨TestModuleæ¨¡å—ä¸­çš„TestFuncå‡½æ•°å¤„è®¾ç½®æ–­ç‚¹ï¼Œå‰ææ˜¯è¯¥æ¨¡å—ç¬¦å·å·²ç»åŠ è½½bp TestModule!TestClass::SetValue          åœ¨æ¨¡å—TestModuleçš„TestClassç±»æˆå‘˜å‡½æ•°SetValueå¤„è®¾ç½®æ–­ç‚¹bp @@C++(TestModule!MyTestClass::SetValue) ä¸ä¸Šé¢ä¸€æ ·ï¼Œè¯­æ³•ä¸åŒï¼ŒC++è¯­æ³•ï¼Œä¸Šé¢çš„ä¸ºMASMè¯­æ³•bl          æ˜¾ç¤ºè®¾ç½®çš„æ–­ç‚¹åˆ—è¡¨be          æ¿€æ´»æ–­ç‚¹bd          ç¦ç”¨æ–­ç‚¹ï¼Œç”¨æ³•ï¼šbd 1è¡¨ç¤ºç¦ç”¨1å·æ–­ç‚¹ï¼Œbd *è¡¨ç¤ºç¦ç”¨æ‰€æœ‰æ–­ç‚¹bc          åˆ é™¤æ–­ç‚¹ï¼Œç”¨æ³•ï¼šbc 1è¡¨ç¤ºåˆ é™¤1å·æ–­ç‚¹ï¼Œbc *è¡¨ç¤ºåˆ é™¤æ‰€æœ‰æ–­ç‚¹ba          è®¾ç½®å†…å­˜è®¿é—®æ–­ç‚¹ï¼Œè¯­æ³•ï¼šba [access] [size] addrï¼Œå…¶ä¸­ï¼Œaccessä¸ºr=è¯»ï¼Œw=å†™ï¼Œe=æ‰§è¡Œï¼›sizeå–1,2æˆ–4ã€‚            å¦‚ï¼šba r 1 0044108c   åœ¨å†…å­˜0044108cçš„ä½ç½®å¼€å§‹çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„è¯»æ–­ç‚¹                ba w4@@C++(&amp;i)  ç»™å˜é‡iåœ°å€ä¸‹4ä¸ªå­—èŠ‚çš„å†™æ–­ç‚¹=========== çº¿ç¨‹/å †æ ˆ ===========~                  æ˜¾ç¤ºè°ƒè¯•è¿›ç¨‹ä¸­çš„çº¿ç¨‹ä¿¡æ¯~.                 æ˜¾ç¤ºå½“å‰çº¿ç¨‹ä¿¡æ¯~#                 æ˜¾ç¤ºè§¦å‘å½“å‰å¼‚å¸¸æˆ–è°ƒè¯•äº‹ä»¶çš„çº¿ç¨‹ä¿¡æ¯~[Number]s         åˆ‡æ¢çº¿ç¨‹                   ~0s åˆ‡æ¢åˆ°0å·çº¿ç¨‹ï¼Œå¯¹äºç»å¤§å¤šæ•°GUIç¨‹åºæ¥è¯´ï¼Œ0å·çº¿ç¨‹å°±æ˜¯UIçº¿ç¨‹!teb               çº¿ç¨‹ç¯å¢ƒå—!peb\t             è¿›ç¨‹ç¯å¢ƒå—!gle               æ˜¾ç¤ºå½“å‰çº¿ç¨‹çš„GLEk[b|v] [n]         æŸ¥çœ‹å½“å‰çº¿ç¨‹çš„è°ƒç”¨å †æ ˆï¼Œkbæ˜¾ç¤ºå‰3ä¸ªå‚æ•°ï¼Œkvæ˜¾ç¤ºFPOä¿¡æ¯ï¼ŒnæŒ‡å®šæ˜¾ç¤ºçš„å¸§çš„æ•°é‡~*kb [n]\t         æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹è°ƒç”¨å †æ ˆ.frame [/r] 0x13   åˆ‡æ¢åˆ°æŒ‡å®šçš„æ ˆå¸§ï¼Œä»¥ä¾¿æŸ¥çœ‹è°ƒç”¨å‚æ•°ã€å˜é‡ï¼ŒæŒ‡å®š /r ä¼šæ˜¾ç¤ºå¯„å­˜å™¨çš„å€¼                   ä½¿ç”¨é¼ æ ‡ç‚¹å‡»æ ˆå¸§å‰ç´¢å¼•ä¹Ÿå¯ä»¥åˆ‡æ¢æ ˆå¸§=========== è¿›ç¨‹ ===========|             æ‰€æœ‰è¿›ç¨‹åˆ—è¡¨|.\t          å½“å‰è¿›ç¨‹ä¿¡æ¯|#\t          å¯¼è‡´å½“å‰å¼‚å¸¸æˆ–è°ƒè¯•äº‹ä»¶çš„è¿›ç¨‹ä¿¡æ¯|[Number]s\t  è¿›ç¨‹åˆ‡æ¢!process      å†…æ ¸æ¨¡å¼ä¸‹ï¼Œæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬EPROCESS              !process 1a5c 0           æ˜¾ç¤ºPIDä¸º0x1a5cçš„è¿›ç¨‹ä¿¡æ¯ï¼Œç¬¬2ä¸ªå‚æ•°0è¡¨ç¤ºæ˜¾ç¤ºæœ€å°‘çš„ä¿¡æ¯              !process 0 0 notepad.exe  æ˜¾ç¤ºnotepad.exeè¿›ç¨‹çš„ä¿¡æ¯ï¼Œç¬¬1ä¸ªå‚æ•°0è¡¨ç¤ºä¸ä½¿ç”¨PIDåŒ¹é…ï¼Œç¬¬2ä¸ªå‚æ•°0è¡¨ç¤ºæ˜¾ç¤ºæœ€å°‘çš„ä¿¡æ¯=========== å†…å­˜åŠå¯„å­˜å™¨æ“ä½œ/åæ±‡ç¼– ===========u                                æŸ¥çœ‹å½“å‰æ­£è¦æ‰§è¡Œçš„ä»£ç uf funName                       æ˜¾ç¤ºæ•´ä¸ªå‡½æ•°çš„åæ±‡ç¼–a                                ä¿®æ”¹å½“å‰æŒ‡ä»¤ï¼Œè¾“å…¥ä¿®æ”¹çš„æŒ‡ä»¤æŒ‰Enterç»“æŸ!address xxxxxx                  æŸ¥çœ‹æŒ‡å®šå†…å­˜åœ°å€çš„ä¿¡æ¯s â€“a 00400000 L53000 â€œWrongâ€     æœç´¢å†…å­˜ï¼Œå¦‚ä»¥ASCIIç çš„å½¢å¼ä»00400000å¤„å¼€å§‹å¾€å53000ä¸ªå­—èŠ‚æœç´¢å­—ç¬¦ä¸²â€œWrongâ€eb 0012ff78 &#x27;a&#x27; &#x27;b&#x27;              å†™å…¥å†…å­˜ï¼Œå¦‚ä»å†…å­˜åœ°å€0012ff78å¼€å§‹ä¾æ¬¡å†™å…¥åé¢çš„å€¼d      æ˜¾ç¤ºå†…å­˜åœ°å€çš„å€¼ï¼Œè¯­æ³•ï¼šd&#123;type&#125; [/c#] addr [L#]                        å…¶ä¸­ï¼Œtype æŒ‰æŒ‡å®šç±»å‹æ˜¾ç¤º:                                    b= Byte                                    w = WORD                                    d = DWORD                                    q = QWORD                                    a = æŒ‰ASCIIå­—ç¬¦è¾“å‡ºç›´åˆ°\\0                                    u = æŒ‰Unicodeå­—ç¬¦è¾“å‡ºç›´åˆ°\\0                                    S = æ˜¾ç¤ºUNICODE_STRING                                    s = æ˜¾ç¤ºANSI_STRING                              /c æ¯è¡Œæ˜¾ç¤ºæ•°æ®æ•°é‡                              L æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ•°æ®çš„ä¸ªæ•°dv /t  æ˜¾ç¤ºå½“å‰ä½œç”¨åŸŸä¸‹å±€éƒ¨å˜é‡çš„å€¼ï¼ŒæŒ‡å®š/tä¼šæ˜¾ç¤ºå˜é‡ç±»å‹dt [module!]Name [Field] [Address]     æ˜¾ç¤ºç±»å‹ä¿¡æ¯ï¼Œå¦‚ç»“æ„ä½“ã€‚Addressæ”¯æŒä½¿ç”¨@å‰ç¼€æŒ‡å®šå¯„å­˜å™¨æˆ–ä¼ªå¯„å­˜å™¨ï¼›                                       Nameæ”¯æŒé€šé…ç¬¦ï¼›                                       ä½¿ç”¨-r[1~9]é€’å½’æ˜¾ç¤ºå­ç±»å‹ï¼›                                       dt _EPROCESS æ˜¾ç¤º_EPROCESSç»“æ„ä½“çš„å®Œæ•´æˆå‘˜ç»“æ„                                       dt _EPROCESS InheritedFromUniqueProcessId æ˜¾ç¤º_EPROCESSç»“æ„ä½“ä¸­æŒ‡å®šæˆå‘˜çš„ä¿¡æ¯                                       dt _EPROCESS ffffe58c1ebaf080             æ˜¾ç¤ºæŒ‡å®šåœ°å€çš„ç»“æ„ä½“çš„æˆå‘˜ç»“æ„åŠä¸ªæˆå‘˜çš„å€¼r [reg]       æ˜¾ç¤ºæ‰€æœ‰å¯„å­˜å™¨çš„å€¼              å…¶ä¸­ï¼Œreg é™¤äº†æ”¯æŒå¸¸è§„å¯„å­˜å™¨ï¼Œè¿˜æ”¯æŒä¼ªå¯„å­˜å™¨: $exentry, $ip, $teb, $peb, $ra, $retreg, $csp, $tpid, $tid              $t0, $t1, ..., $t19æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„20ä¸ªä¼ªå¯„å­˜å™¨r eax=1       ä¿®æ”¹å¯„å­˜å™¨çš„å€¼poi           æŒ‡é’ˆè§£å¼•ç”¨ï¼Œpoi(xxxx)=========== å¼‚å¸¸åˆ†æ ===========.ecxr\t                  æ˜¾ç¤ºå½“å‰å¼‚å¸¸çš„ä¸Šä¸‹æ–‡ä¿¡æ¯!analyze -v             è¯¦ç»†æ˜¾ç¤ºå½“å‰å¼‚å¸¸ä¿¡æ¯ï¼Œå¸¸ç”¨äºåˆ†ædmpæ–‡ä»¶!analyze -show &lt;code&gt;   æŸ¥çœ‹è“å±BUGCHECK_CODEçš„å«ä¹‰=========== å¥æŸ„ä¸é” ===========!locks              æŸ¥çœ‹è¿›ç¨‹ä¸­æœ‰äº›é”å¤„äºé”å®šçŠ¶æ€!cs -l              æŸ¥çœ‹å¤„äºé”å®šçŠ¶æ€çš„å…³é”®åŒº!handle 000000c0 f  æŸ¥çœ‹å¥æŸ„000000c0çš„ä¿¡æ¯=========== å†…æ ¸æ¨¡å¼ ===========!pool xxxxxx         å†…æ ¸æ¨¡å¼ä¸‹ï¼ŒæŸ¥çœ‹æŒ‡å®šå†…å­˜åœ°å€æ˜¯å¦æ˜¯éé¡µå†…å­˜!irql                å†…æ ¸æ¨¡å¼ä¸‹ï¼ŒæŸ¥çœ‹è§¦å‘ä¸­æ–­å‰ï¼ŒCPUçš„ä¸­æ–­è¯·æ±‚çº§åˆ«=========== è¾…åŠ©è®¡ç®— ===========?             è®¡ç®—è¡¨è¾¾å¼çš„å€¼              ?i  æŸ¥çœ‹å±€éƒ¨å˜é‡içš„åœ°å€ï¼Œä¼šä»¥10è¿›åˆ¶å’Œ16è¿›åˆ¶åŒæ—¶æ˜¾ç¤º??            è®¡ç®—C++è¡¨è¾¾å¼çš„å€¼\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","é€ŸæŸ¥æ‰‹å†Œ","Windbg"]},{"title":"Windowså®ç°æ–‡ä»¶å¼ºåˆ¶å ç”¨","url":"/post/434128163.html","content":"æœ¬æ–‡ä»‹ç»åœ¨ Windows ç³»ç»Ÿä¸Šå®ç°ä½¿æŸä¸ªæ–‡ä»¶æ— æ³•è¢«ç”¨æˆ·æˆ–å…¶ä»–ç¨‹åºåˆ é™¤ã€‚\n\n\nå®ç°çš„åŸç†å¤§è‡´å¦‚ä¸‹ï¼š\né€šè¿‡DuplicateHandleæ‹·è´æ–‡ä»¶å¥æŸ„ç»™å¦å¤–ä¸€ä¸ªè¿›ç¨‹ï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿè¿›ç¨‹ï¼‰ï¼Œå› ä¸ºç³»ç»Ÿè¿›ç¨‹ä¸ä¼šè¢«å…³é—­ï¼Œæ‰€ä»¥è¾¾åˆ°äº†å ç”¨æŸä¸ªæ–‡ä»¶ï¼Œä¸è®©å…¶ä»–è¿›ç¨‹åˆ é™¤ã€è¯»å–ã€å†™å…¥ç­‰ã€‚\nDuplicateHandleçš„ç”¨æ³•å‚è€ƒï¼š- Windowså†…æ ¸å¯¹è±¡\nå› ä¸ºéœ€è¦æ‹·è´æ–‡ä»¶å¥æŸ„ç»™ç³»ç»Ÿè¿›ç¨‹ï¼Œæ‰€ä»¥æ¶‰åŠåˆ°æ‰“å¼€ç³»ç»Ÿè¿›ç¨‹ï¼Œå¯èƒ½éœ€è¦ææƒæ“ä½œï¼Œä¸€èˆ¬æˆæƒç»™è¿›ç¨‹SE_DEBUG_NAMEæƒé™å³å¯ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å®ç°ä¸€ä¸ªç”¨äºé”ä½æ–‡ä»¶çš„å‡½æ•°LockFileï¼Œå°†æ–‡ä»¶å¥æŸ„å¤åˆ¶ç»™ç³»ç»Ÿcsrss.exeè¿›ç¨‹ï¼Œå‡½æ•°å®ç°å¦‚ä¸‹ï¼š\nbool LockFile(LPCTSTR lpFilePath) &#123;\tif (lpFilePath == NULL)\t\treturn false;\t// æŸ¥æ‰¾è¿›ç¨‹csrss.exe\t//\tDWORD dwCsrssProcessID = 0;\tPROCESSENTRY32 pe;\tpe.dwSize = sizeof(PROCESSENTRY32);\tHANDLE hSnapShot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);\twhile (Process32Next(hSnapShot, &amp;pe)) &#123;\t\tif (lstrcmpi(pe.szExeFile, TEXT(&quot;csrss.exe&quot;)) == 0) &#123;\t\t\tdwCsrssProcessID = pe.th32ProcessID;\t\t\tbreak;\t\t&#125;\t&#125;\tCloseHandle(hSnapShot);\t// æœªæ‰¾åˆ°\tif (dwCsrssProcessID == 0) &#123;\t\treturn false;\t&#125;\tHANDLE hProcess = OpenProcess(PROCESS_DUP_HANDLE, FALSE, dwCsrssProcessID);\t// æ‰“å¼€å¤±è´¥ï¼Œå¯èƒ½æ˜¯å½“å‰è¿›ç¨‹æœªææƒå¯¼è‡´ï¼Œéœ€è¦æå‰è¿›è¡Œææƒæ“ä½œ\tif (hProcess == NULL) &#123;\t\treturn false;\t&#125;\tHANDLE hFile = CreateFile(lpFilePath,\t\tGENERIC_READ | GENERIC_EXECUTE | GENERIC_WRITE,\t\t0,\t\tNULL,\t\tOPEN_ALWAYS,\t\tFILE_ATTRIBUTE_NORMAL,\t\tNULL);\tif (hFile == INVALID_HANDLE_VALUE) &#123;\t\tCloseHandle(hProcess);\t\treturn false;\t&#125;\tHANDLE hTargetHandle = INVALID_HANDLE_VALUE;\tBOOL bRet = DuplicateHandle(GetCurrentProcess(),\t\thFile,\t\thProcess,\t\t&amp;hTargetHandle,\t\t0,\t\tFALSE,\t\tDUPLICATE_SAME_ACCESS | DUPLICATE_CLOSE_SOURCE\t);\tCloseHandle(hProcess);\treturn (bRet == TRUE);&#125;\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowså¹³å°æ–‡ä»¶è‡ªç­¾å","url":"/post/667140500.html","content":"æœ¬æ–‡ä½¿ç”¨çš„å·¥å…·éƒ½æ˜¯ Windows SDK è‡ªå¸¦çš„ï¼Œå¯ä»¥é‡‡ç”¨å•ç‹¬å®‰è£… Windows SDKçš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰è£… Visual Studio æ¥é™„å¸¦å®‰è£… Windows SDKã€‚\n# åœ¨å¼¹å‡ºç•Œé¢è®¾ç½®å¯†ç 123456makecert.exe -sv test.pvk -r -n &quot;CN=test.com&quot; test.cercert2spc.exe test.cer test.spcpvk2pfx.exe -pvk test.pvk -pi 123456 -spc test.spc -pfx test.pfx -f\n\nä½¿ç”¨ SignTool å·¥å…·å¯¹ EXE æ–‡ä»¶ç­¾åï¼š\nsigntool.exe sign /f test.pfx /p 123456 Setup.exe\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"NSISçš„ä¼ ç»Ÿç•Œé¢ç¤ºä¾‹","url":"/post/275632694.html","content":"æœ¬æ–‡ä»¥ä¸€ä¸ªå®Œæ•´çš„ã€ä¼ ç»Ÿç•Œé¢çš„ç½‘æ˜“äº‘éŸ³ä¹å®‰è£…åŒ…çš„è„šæœ¬ä¸ºç¤ºä¾‹ï¼Œæ¥ä»‹ç» NSIS ä¼ ç»Ÿç”¨æˆ·ç•Œé¢çš„å¼€å‘æµç¨‹ã€‚\n\n\nç½‘æ˜“äº‘éŸ³ä¹å®‰è£…è„šæœ¬å®Œæ•´çš„ç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼Œè„šæœ¬ä¸­åŒ…å«äº†è¯¦ç»†çš„æ³¨é‡ŠåŠ ä»¥è§£é‡Šè¯´æ˜ã€‚è¯·å°†ä¸‹é¢è„šæœ¬ä¿å­˜ä¸º.nsi æ–‡ä»¶ï¼ˆéœ€ä½¿ç”¨ ANSI ç¼–ç ä¿å­˜ï¼‰ï¼Œç¼–è¯‘å³å¯ç”Ÿæˆå®‰è£…åŒ…ã€‚\n# å•è¡Œæ³¨é‡Šç”¨äº•å·&quot;#&quot;æˆ–åˆ†å·&quot;;&quot;ï¼Œè·¨è¡Œæ³¨é‡Šç”¨å¯ä»¥ç”¨C/C++ä¸­æ³¨é‡Šè¯­æ³•ã€‚# ä½¿ç”¨!defineå®šä¹‰ä¸€äº›å¸¸é‡ï¼ˆå¦‚å®‰è£…åŒ…çš„ç‰ˆæœ¬å·ç­‰ï¼‰# å¯¹å¸¸é‡æˆ–å˜é‡çš„å¼•ç”¨å¯ä»¥ä½¿ç”¨å¦‚$&#123;PRODUCT_NAME&#125;æ ¼å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚$PRODUCT_NAMEæ ¼å¼!define PRODUCT_NAME           &quot;ç½‘æ˜“äº‘éŸ³ä¹&quot;!define EXE_NAME               &quot;cloudmusic.exe&quot;!define PRODUCT_VERSION        &quot;1.0.0.1&quot;!define PRODUCT_PUBLISHER      &quot;NetEase&quot;!define PRODUCT_LEGAL          &quot;NetEase 1999-2014&quot;!define TEMP_DIR               &quot;&quot;/*NSISå†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å˜é‡ï¼Œå¦‚$INSTDIR è¡¨ç¤ºç”¨æˆ·å®šä¹‰çš„è§£å‹è·¯å¾„ï¼›$DESKTOP è¡¨ç¤ºWindowsæ¡Œé¢ç›®å½•ï¼›ç­‰ç­‰ã€‚ä¹Ÿå¯ä»¥ç”¨ Var å‘½ä»¤æ¥å£°æ˜è‡ªå·±çš„å˜é‡($VARNAME)ã€‚ NSISçš„å˜é‡éƒ½æ˜¯å…¨å±€çš„å¹¶ä¸”å¯ä»¥åœ¨ä»»ä½•åŒºæ®µæˆ–å‡½æ•°ä¸­ä½¿ç”¨ã€‚å¦å¤–å †æ ˆå¯ä»¥ç”¨æ¥ä½œä¸ºä¸´æ—¶å­˜å‚¨ã€‚ ä½¿ç”¨ Push å’Œ Pop å‘½ä»¤æ¥è®¿é—®å †æ ˆã€‚PushæŠŠä¸€ä¸ªå€¼æ·»åŠ åˆ°å †æ ˆï¼ŒPopç§»é™¤ä¸€ä¸ªå€¼å¹¶ä¸”è®¾ç½®è¯¥å˜é‡ã€‚ä¸”NSISå†…ç½®äº†20ä¸ªå·²æ³¨å†Œçš„å˜é‡ (å¦‚ $0~$9 å’Œ $R0~$R9)ã€‚ è¿™äº›å˜é‡ä¸éœ€è¦å£°æ˜å°±å¯ä»¥ä½¿ç”¨ã€‚*/# å®šä¹‰å®‰è£…åŒ…å¯æ‰§è¡Œæ–‡ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯VIProductVersion                    &quot;$&#123;PRODUCT_VERSION&#125;&quot;VIAddVersionKey &quot;ProductVersion&quot;    &quot;$&#123;PRODUCT_VERSION&#125;&quot;VIAddVersionKey &quot;ProductName&quot;       &quot;$&#123;PRODUCT_NAME&#125;&quot;VIAddVersionKey &quot;CompanyName&quot;       &quot;$&#123;PRODUCT_PUBLISHER&#125;&quot;VIAddVersionKey &quot;FileVersion&quot;       &quot;$&#123;PRODUCT_VERSION&#125;&quot;VIAddVersionKey &quot;InternalName&quot;      &quot;$&#123;EXE_NAME&#125;&quot;VIAddVersionKey &quot;FileDescription&quot;   &quot;$&#123;PRODUCT_NAME&#125;&quot;VIAddVersionKey &quot;LegalCopyright&quot;    &quot;$&#123;PRODUCT_LEGAL&#125;&quot;# ==================== NSISå±æ€§ ================================# è®¾ç½®å®‰è£…åŒ…çš„å‹ç¼©æ–¹æ¡ˆï¼Œæœ‰ZLIBï¼ˆé»˜è®¤ï¼‰ã€BZIP2ã€LZMASetCompressor lzma; è®¾ç½®å®‰è£…åŒ…åå­—ï¼Œæ˜¾ç¤ºåœ¨å®‰è£…åŒ…æ ‡é¢˜æ ç­‰ä½ç½®Name &quot;$PRODUCT_NAME&quot;# å®‰è£…åŒ…å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶åOutFile &quot;ç½‘æ˜“äº‘éŸ³ä¹å®‰è£…-Basic UI.exe&quot;# å®‰è£…åŒ…é»˜è®¤å®‰è£…ä½ç½®ï¼Œä¹Ÿå°±æ˜¯å®‰è£…è·¯å¾„çš„é»˜è®¤å€¼InstallDir &quot;$PROGRAMFILES\\Netease\\CloudMusic&quot;# è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå®‰è£…è¯¦ç»†ä¿¡æ¯ShowInstDetails hide# è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå¸è½½è¯¦ç»†ä¿¡æ¯ShowUnInstDetails   hide# é’ˆå¯¹Vistaå’Œwin7+ çš„UACè¿›è¡Œæƒé™è¯·æ±‚.# RequestExecutionLevel none|user|highest|adminRequestExecutionLevel admin# å®‰è£…å’Œå¸è½½ç¨‹åºçš„å›¾æ ‡Icon             &quot;image\\logo.ico&quot;UninstallIcon    &quot;image\\un_logo.ico&quot;/*å‘å¯¼é¡µé¢æ˜¯NSISå®‰è£…ç¨‹åºä¸­æœ€é‡è¦çš„ç•Œé¢å…ƒç´ ï¼Œåœ¨nsisè„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨NSISå†…ç½®é¡µé¢æˆ–è€…å®šåˆ¶ç•Œé¢ï¼Œé€šè¿‡è„šæœ¬å¯ä»¥æŒ‡å®šé¡µé¢çš„é¡ºåºã€æ˜¾ç¤ºæ ·å­å’Œè¡Œä¸ºã€‚ PageExæŒ‡ä»¤ç”¨æ¥å®šä¹‰å®‰è£…ç¨‹åºä¸­çš„é¡µé¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨PageæŒ‡ä»¤ï¼Œä½†PageExæä¾›æ›´å¤šé€‰é¡¹ï¼›UninstPageç”¨æ¥å®šä¹‰å¸è½½é¡µé¢ã€‚é¡µé¢æ˜¾ç¤ºçš„é¡ºåºå’Œå®ƒåœ¨nsisè„šæœ¬ä¸­å®šä¹‰çš„æ¬¡åºä¸€è‡´ã€‚å®‰è£…é¡µé¢æœ‰ï¼šlicense|components|directory|instfiles|å¸è½½é¡µé¢æœ‰ï¼šuninstConfirmæ¯ä¸ªé¡µé¢æœ‰ä¸åŒå…ƒç´ å’Œå±æ€§ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨Page customæ¥è‡ªå®šä¹‰é¡µé¢ï¼Œè¿™ä¸ªåé¢çš„æ–‡ç« æœ‰è®²åˆ°ã€‚*/PageEx license    LicenseData &quot;license.rtf&quot;       #å¯ä»¥æ˜¯txtæˆ–rtfæ–‡ä»¶æ ¼å¼PageExEnd/*åœ¨ä¸€ä¸ªæ™®é€šçš„å®‰è£…åŒ…é‡Œç”¨æˆ·éœ€è¦å®‰è£…è®¸å¤šä¸œè¥¿ã€‚ä¾‹å¦‚åœ¨NSISå®‰è£…åŒ…é‡Œä½ å¯ä»¥é€‰æ‹©å®‰è£…æºç ã€é™„åŠ æ’ä»¶ã€è„šæœ¬æ ·ä¾‹æˆ–å…¶ä»–ã€‚é‡Œé¢çš„æ¯ä¸ªç»„ä»¶éƒ½æœ‰å®ƒè‡ªå·±çš„ä»£ç å—ï¼Œå½“ç”¨æˆ·é€‰æ‹©äº†å®‰è£…è¯¥ç»„ä»¶ï¼Œé‚£ä¹ˆå®‰è£…ç¨‹åºå°±ä¼šæ‰§è¡Œå¯¹åº”çš„ä»£ç ã€‚åœ¨è„šæœ¬é‡Œï¼Œè¿™äº›ä»£ç ç§°ä¸ºåŒºæ®µï¼Œè§ä¸‹é¢çš„Sectionã€‚æ¯ä¸ªå¯è§çš„åŒºæ®µéƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªç»„ä»¶ç»™ç”¨æˆ·é€‰æ‹©æ˜¯å¦å®‰è£…ã€‚ä½ å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªåŒºæ®µæ¥æ„å»ºå®‰è£…åŒ…ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¦ä½¿ç”¨ç»„ä»¶é¡µæ¥è®©ç”¨æˆ·é€‰æ‹©å¯é€‰çš„ç»„ä»¶ï¼Œé‚£ä½ å°±éœ€è¦ä½¿ç”¨å¤šä¸ªåŒºæ®µã€‚*/PageEx components    Caption &quot;ç»„ä»¶é€‰æ‹©&quot;    ComponentText &quot;é€‰æ‹©å®‰è£…ç»„ä»¶ï¼š&quot; &quot;ä¸»ç¨‹åº&quot; &quot;å¿«æ·æ–¹å¼&quot;PageExEndPageEx directory    Caption &quot;å®‰è£…ç›®å½•&quot;    DirText &quot;è¯·é€‰æ‹©å®‰è£…ç›®å½•ï¼š&quot;PageExEndPageEx instfilesPageExEnd# åŒºæ®µ1# åŒºæ®µåä»¥ä¸€ä¸ª!å¼€å¤´ï¼Œé‚£ä¹ˆè¯¥åŒºæ®µçš„æ˜¾ç¤ºåç§°å°†ä»¥ç²—ä½“å­—æ˜¾ç¤º.Section &quot;!Files&quot; &quot;des_files&quot;  ; è®¾ç½®ä¸‹é¢æŒ‡å®šçš„æ–‡ä»¶åœ¨å®‰è£…æ—¶é»˜è®¤çš„è§£å‹è·¯å¾„  SetOutPath $INSTDIR  ; æŒ‡æ˜å“ªäº›æ–‡ä»¶éœ€è¦è¢«å‹ç¼©è¿›å…¥å®‰è£…åŒ…ï¼Œ&quot;app\\*.*&quot;æ˜¯ç›¸å¯¹äºnsisè„šæœ¬æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„  File /r &quot;app\\*.*&quot;SectionEnd# åŒºæ®µ2# è¯¥åŒºæ®µä¸“é—¨ç”¨æ¥åˆ›å»ºä¸€äº›å¿«æ·æ–¹å¼#Section &quot;Shortcut&quot; &quot;des_shortcut&quot;  SetShellVarContext all  CreateDirectory &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;&quot;  CreateShortCut &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\$&#123;PRODUCT_NAME&#125;.lnk&quot; &quot;$INSTDIR\\$&#123;EXE_NAME&#125;&quot;  CreateShortCut &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\å¸è½½$&#123;PRODUCT_NAME&#125;.lnk&quot; &quot;$INSTDIR\\uninst.exe&quot;  SetShellVarContext currentSectionEnd# åŒºæ®µ3# åŒºæ®µåä¸ºç©ºã€é—æ¼æˆ–è€…ä»¥ä¸€ä¸ª &quot;-&quot; å¼€å¤´ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ä¸€ä¸ªéšè—çš„åŒºæ®µï¼Œç”¨æˆ·ä¹Ÿä¸èƒ½é€‰æ‹©ç¦æ­¢å®ƒ.#Section &quot;-Necessary&quot;\t# ç”Ÿæˆå¸è½½ç¨‹åº\tWriteUninstaller &quot;$INSTDIR\\uninst.exe&quot;\t# æ·»åŠ å¸è½½ä¿¡æ¯åˆ°æ§åˆ¶é¢æ¿\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;DisplayName&quot; &quot;$&#123;PRODUCT_NAME&#125;&quot;\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;UninstallString&quot; &quot;$INSTDIR\\uninst.exe&quot;\t/*\tåœ¨NSISè„šæœ¬é‡Œæ¯ä¸€è¡Œéƒ½ä½œä¸ºä¸€ä¸ªå‘½ä»¤å¤„ç†ï¼Œå¦‚æœè¿™ä¸€è¡Œå¤ªé•¿çš„è¯ä½ å¯ä»¥ä½¿ç”¨â€œ\\â€æ¥åˆ†éš”ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°æŠŠä¸‹ä¸€è¡Œæ¥åˆ°ä¸Šä¸€è¡Œæ¥ä½œä¸ºå®Œæ•´çš„ä¸€è¡Œï¼Œè€Œä¸æ˜¯çœ‹ä½œæ–°çš„è¡Œã€‚\t*/\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;DisplayIcon&quot; &quot;$INSTDIR\\$&#123;EXE_NAME&#125;&quot;\tWriteRegStr HKLM &quot;Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\$&#123;PRODUCT_NAME&#125;&quot; &quot;Publisher&quot; &quot;$INSTDIR\\$&#123;PRODUCT_PUBLISHER&#125;&quot;SectionEnd# å¸è½½åŒºæ®µï¼Œå¦‚æœä¸€ä¸ªåŒºæ®µåä¸ºâ€œUninstallâ€æˆ–ä»¥â€œun.â€ä¸ºå‰ç¼€ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå¸è½½ç¨‹åºåŒºæ®µã€‚#Section &quot;Uninstall&quot;  ; åˆ é™¤å¿«æ·æ–¹å¼ï¼ŒSetShellVarContext è®¾ç½®æ“ä½œæ˜¯é’ˆå¯¹å½“å‰ç”¨æˆ·è¿˜æ˜¯æ‰€æœ‰ç”¨æˆ·  SetShellVarContext all  Delete &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\$&#123;PRODUCT_NAME&#125;.lnk&quot;  Delete &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\å¸è½½$&#123;PRODUCT_NAME&#125;.lnk&quot;  RMDir &quot;$SMPROGRAMS\\$&#123;PRODUCT_NAME&#125;\\&quot;  Delete &quot;$DESKTOP\\$&#123;PRODUCT_NAME&#125;.lnk&quot;  SetShellVarContext current  SetOutPath &quot;$INSTDIR&quot;  ; åˆ é™¤å®‰è£…çš„æ–‡ä»¶  Delete &quot;$INSTDIR\\*.*&quot;  SetOutPath &quot;$DESKTOP&quot;  RMDir /r &quot;$INSTDIR&quot;  RMDir &quot;$INSTDIR&quot;  SetAutoClose trueSectionEnd# ============================== å›è°ƒå‡½æ•° ====================================# å‡½æ•°åä»¥â€œ.â€å¼€å¤´çš„ä¸€èˆ¬ä½œä¸ºå›è°ƒå‡½æ•°ä¿ç•™.# å‡½æ•°åä»¥â€œun.â€å¼€å¤´çš„å‡½æ•°å°†ä¼šè¢«åˆ›å»ºåœ¨å¸è½½ç¨‹åºé‡Œï¼Œå› æ­¤ï¼Œæ™®é€šå®‰è£…åŒºæ®µå’Œå‡½æ•°ä¸èƒ½è°ƒç”¨å¸è½½å‡½æ•°ï¼Œè€Œå¸è½½åŒºæ®µå’Œå¸è½½å‡½æ•°ä¹Ÿä¸èƒ½è°ƒç”¨æ™®é€šå‡½æ•°ã€‚Function .onInitFunctionEndFunction .onGUIInitFunctionEnd# å®‰è£…æˆåŠŸä»¥å.Function .onInstSuccessFunctionEnd# å¸è½½æ“ä½œå¼€å§‹å‰.Function un.onInit    MessageBox MB_ICONQUESTION|MB_YESNO &quot;ä½ ç¡®å®è¦å®Œå…¨åˆ é™¤ç½‘æ˜“äº‘éŸ³ä¹ï¼ŒåŠå…¶æ‰€æœ‰ç»„ä»¶å—?&quot; /SD IDYES IDYES +2 IDNO +1    AbortFunctionEnd# å¸è½½æˆåŠŸä»¥å.Function un.onUninstSuccess    MessageBox MB_ICONINFORMATION|MB_OK &quot;$&#123;PRODUCT_NAME&#125; å·²æˆåŠŸåœ°ä»ä½ çš„è®¡ç®—æœºç§»é™¤&quot; /SD IDOKFunctionEnd\n\nä¸Šè¿°è„šæœ¬ä¼šå°†ä¸è„šæœ¬ç›¸åŒçº§åˆ«çš„ app ç›®å½•ä¸‹çš„å…¨éƒ¨æ–‡ä»¶ï¼ˆå«å­ç›®å½•ï¼‰æ‰“åŒ…è¿›å®‰è£…åŒ…ã€‚image\\logo.icoå’Œimage\\un_logo.icoåˆ†åˆ«æ˜¯å®‰è£…åŒ…å’Œå¸è½½ç¨‹åºçš„å›¾æ ‡ã€‚\nè¿è¡Œæˆªå›¾\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["NSIS"]},{"title":"Windowsæ‰¹å¤„ç†æ‚è®°","url":"/post/3801212176.html","content":"exitå‘½ä»¤exitå‘½ä»¤ç”¨äºé€€å‡ºå½“å‰çš„æ‰¹å¤„ç†è„šæœ¬ï¼Œå¹¶è¿”å›ä¸€ä¸ªé€€å‡ºä»£ç ExitCodeï¼ˆå³è¿”å›å€¼ï¼‰ã€‚é€€å‡ºä»£ç é€šå¸¸æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç”¨äºæŒ‡ç¤ºè„šæœ¬æ‰§è¡Œçš„çŠ¶æ€ï¼Œä¾‹å¦‚æˆåŠŸï¼ˆ0ï¼‰æˆ–å¤±è´¥ï¼ˆéé›¶å€¼ï¼‰ã€‚\nexitå‘½ä»¤çš„è¯­æ³•ä¸ºï¼š\nexit [/b] [exitCode]\n\nå…¶ä¸­ /b é€‰é¡¹è¡¨ç¤ºä»…é€€å‡ºå½“å‰æ‰¹å¤„ç†è„šæœ¬çš„æ‰§è¡Œï¼Œè€Œä¸ä¼šå½±å“è°ƒç”¨è„šæœ¬çš„çˆ¶è¿›ç¨‹ã€‚å¦‚æœä¸ä½¿ç”¨ /b é€‰é¡¹ï¼Œåˆ™ exit å‘½ä»¤ä¼šç»ˆæ­¢å½“å‰æ•´ä¸ªçš„å‘½ä»¤å¤„ç†å™¨è¿›ç¨‹ï¼ˆCMD.EXEï¼‰ï¼Œå¹¶è¿”å›é€€å‡ºä»£ç ç»™è°ƒç”¨è€…ã€‚\nexitCode æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šé€€å‡ºä»£ç ã€‚å¦‚æœæœªæŒ‡å®šé€€å‡ºä»£ç ï¼Œåˆ™é»˜è®¤è¿”å›ä¸Šä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºä»£ç ã€‚\n\n\nå˜é‡å»¶è¿Ÿæ‰©å±•SETLOCAL ENABLEDELAYEDEXPANSIONçš„ä½œç”¨æ˜¯è®¾ç½®æœ¬åœ°å˜é‡å»¶è¿Ÿæ‰©å±•ã€‚\nCMDåœ¨æ‰§è¡Œå‘½ä»¤å‰ä¼šå¯¹è„šæœ¬è¿›è¡Œé¢„å¤„ç†ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰ç±»ä¼¼%value%è¿™æ ·çš„å˜é‡å°±ä¼šå¯¹å…¶è¿›è¡Œè¯†åˆ«ï¼Œå¹¶ä¸”æŸ¥æ‰¾è¿™ä¸ªå˜é‡å¯¹åº”çš„å€¼ï¼Œä»è€Œç”¨è¯¥å€¼æ›¿æ¢æ‰å˜é‡ï¼Œè¿™ä¸ªæ›¿æ¢å€¼çš„è¿‡ç¨‹ï¼Œå°±å«å˜é‡æ‰©å±•ï¼Œè¿™ä¸ªç±»ä¼¼äºC&#x2F;C++ä¸­çš„å®ã€‚ã€åŸæ–‡å‡ºè‡ª: jiangxueqiao.comã€‘\nè¯·çœ‹ä¸‹é¢ç¤ºä¾‹ï¼š\n@echo offset a=4set a=5 &amp; echo %a%\nç»“æœï¼š4\nä¸ºä»€ä¹ˆè¾“å‡ºæ˜¯4è€Œä¸æ˜¯5å‘¢ï¼Ÿ\nåŸå› æ˜¯æ‰¹å¤„ç†æ˜¯æŒ‰è¡Œè¯»å–å‘½ä»¤çš„ï¼ˆå¦å¤–ä¾‹å¦‚forå‘½ä»¤ç­‰ï¼Œå…¶åç”¨ä¸€å¯¹åœ†æ‹¬å·é—­åˆçš„æ‰€æœ‰è¯­å¥ä¹Ÿå½“ä½œä¸€è¡Œï¼‰ï¼Œåœ¨æ‰§è¡Œä¹‹å‰è¦å®Œæˆå¿…è¦çš„é¢„å¤„ç†å·¥ä½œï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬å¯¹è¯¥è¡Œå‘½ä»¤ä¸­çš„å˜é‡èµ‹å€¼ã€‚ä¸Šä¾‹ä¸­ï¼Œæ‰¹å¤„ç†åœ¨è¿è¡Œåˆ°set a=5 &amp; echo %a%ä¹‹å‰ï¼Œå…ˆæŠŠè¿™ä¸€æ•´å¥è¯»å–å¹¶åšäº†é¢„å¤„ç†ï¼ˆå¯¹å˜é‡aèµ‹äº†å€¼ï¼‰ï¼Œæ­¤æ—¶%a%å½“ç„¶å°±æ˜¯4ã€‚\n\næ˜ç™½è¿™ä¸ªé“ç†ä¹‹åï¼Œæˆ‘ä»¬å°†ä¸Šä¾‹ä¿®æ”¹ä¸ºå¦‚ä¸‹æ–¹å¼ï¼Œå°±å¯ä»¥è¾“å‡ºç»“æœ5ã€‚\n  @echo offset a=4set a=5echo %a%\nä¸ºäº†èƒ½å¤Ÿè®©æ‰¹å¤„ç†æ„ŸçŸ¥å˜é‡çš„åŠ¨æ€å˜åŒ–ï¼Œæ‰¹å¤„ç†è®¾è®¡äº†å˜é‡å»¶è¿Ÿï¼Œå³åœ¨è¯»å–äº†ä¸€æ¡å®Œæ•´çš„è¯­å¥ä¹‹åï¼Œä¸ç«‹å³å¯¹è¯¥è¡Œçš„å˜é‡èµ‹å€¼ï¼Œè€Œä¼šåœ¨å•æ¡è¯­å¥æ‰§è¡Œä¹‹å‰å†è¿›è¡Œèµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´â€œå»¶è¿Ÿâ€äº†å¯¹å˜é‡çš„èµ‹å€¼ã€‚\n@echo offSETLOCAL ENABLEDELAYEDEXPANSIONset a=4set a=5 &amp; echo !a!\n\nç»“æœï¼š5\nç”±äºå¯åŠ¨äº†å˜é‡å»¶è¿Ÿï¼Œå¾—åˆ°äº†è¾“å‡ºç»“æœ5ã€‚\nå˜é‡å»¶è¿Ÿçš„å¯åŠ¨è¯­å¥æ˜¯SETLOCAL ENABLEDELAYEDEXPANSIONï¼Œå¹¶ä¸”å˜é‡è¦ç”¨ä¸€å¯¹å¹å·æ‹¬èµ·æ¥ï¼Œå¦åˆ™å°±æ²¡æœ‰å˜é‡å»¶è¿Ÿçš„æ•ˆæœã€‚\nè°ƒç”¨npmå‘½ä»¤æ— æ³•è¿”å›åŸæ‰¹å¤„ç†éœ€è¦ä½¿ç”¨callå‘½ä»¤ï¼Œå¦‚ï¼š\ncall npm install\n\nå¯ä»¥ä½¿ç”¨%errorlevel%è·å–å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼ˆé€šå¸¸0è¡¨ç¤ºæˆåŠŸï¼‰ï¼Œå¦‚ï¼š\ncall npm run build-releaseif %errorlevel% NEQ 0 goto ERROR:ERRORecho Compile Failed\n\nåˆ‡æ¢è„šæœ¬çš„å½“å‰ç›®å½•æœ‰äº›å‘½ä»¤ä¾èµ–æ‰¹å¤„ç†ç¨‹åºçš„å½“å‰ç›®å½•ï¼Œå¦‚npmã€yarnè¿™æ ·çš„å‘½ä»¤ã€‚å‡å¦‚é¡¹ç›®ä½äºD:\\A\\Bè·¯å¾„ï¼Œä½¿ç”¨æ‰¹å¤„ç†ï¼ˆæ–‡ä»¶ä½äºD:\\build.batï¼‰è¿›è¡Œè‡ªåŠ¨æ„å»ºï¼š\n@echo offcd D:\\A\\Bcall npm run build\n\nè¿è¡Œä¸Šé¢æ‰¹å¤„ç†ï¼Œæ„å»ºä¼šå¤±è´¥ï¼Œé€šå¸¸ä¼šæç¤ºè¯¸å¦‚â€œD:\\package.jsonä¸å­˜åœ¨â€çš„é”™è¯¯ï¼ŒåŸå› æ˜¯npmå‘½ä»¤æ˜¯æ‰¹å¤„ç†ç¨‹åºçš„å½“å‰ç›®å½•æŸ¥æ‰¾package.jsonæ–‡ä»¶çš„ï¼Œæ‰¹å¤„ç†ç¨‹åºçš„å½“å‰ç›®å½•é»˜è®¤ä¸ºæ‰¹å¤„ç†æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå³D:\\ï¼ŒD:\\package.jsonä¸å­˜åœ¨ï¼Œå› æ­¤æ„å»ºå¤±è´¥ã€‚\nå¯ä»¥ä½¿ç”¨ä¸ºcdå‘½ä»¤æŒ‡å®š/då‚æ•°æ¥åˆ‡æ¢æ‰¹å¤„ç†ç¨‹åºçš„å½“å‰ç›®å½•ï¼Œä¸Šé¢ç¤ºä¾‹å¯ä»¥ä¿®æ”¹ä¸ºï¼š\n@echo offcd /d D:\\A\\Bcall npm run build\n\næ‰¹å¤„ç†å‘½ä»¤æ¢è¡Œå½“æ‰¹å¤„ç†å‘½ä»¤è¿‡é•¿ï¼Œå¦‚æœéƒ½å†™åœ¨ä¸€è¡Œä¸ä¾¿äºé˜…è¯»ï¼Œå¯ä»¥ä½¿ç”¨^ç¬¦å·è¿›è¡Œåˆ†å‰²ã€‚\ncall &quot;%qt_src_folder%\\configure.bat&quot; -silent -debug-and-release -force-debug-info -strip ^    -platform win32-msvc -static -static-runtime -no-opengl -no-dbus -no-icu ^    -nomake examples -nomake tests -skip qtwebengine -skip qtlocation ^    -qt-harfbuzz -qt-freetype -qt-zlib -qt-doubleconversion ^    -mp -optimize-size -ltcg -no-pch ^    OPENSSL_LIBS=&quot;-lUser32 -lAdvapi32 -lGdi32 -lWS2_32 -lCRYPT32 -llibcrypto32 -llibssl32&quot;\n\nECHO å¤„äºå…³é—­çŠ¶æ€é‡åˆ°â€œECHO å¤„äºå…³é—­çŠ¶æ€â€æç¤ºï¼Œé€šå¸¸æ˜¯å› ä¸ºè¾“å‡ºå˜é‡ä¸ºç©ºå¯¼è‡´ã€‚\næ­¤æ—¶éœ€è¦æ³¨æ„å¦‚ä¸‹æƒ…å†µï¼š\n\næ‰¹å¤„ç†å˜é‡å·¦å³ä¸èƒ½æœ‰ç©ºæ ¼ã€‚å¦‚æœæœ‰ç©ºæ ¼ï¼Œç©ºæ ¼ä¼šè¢«å½“æˆå˜é‡åï¼Œå¦‚set a =1ï¼Œå˜é‡åå®é™…ä¸ºa ã€‚\nå¼€å¯å˜é‡å»¶è¿Ÿæ‰©å±•åï¼Œå¼•ç”¨å˜é‡éœ€è¦ä½¿ç”¨ä¸¤ä¸ª!çš„æ–¹å¼ï¼Œå¦‚!str_a!ã€‚\n\næ˜¾ç¤ºé€‰æ‹©é¡¹æç¤ºç”¨æˆ·é€‰æ‹©ä½¿ç”¨CHOICEå‘½ä»¤å¯ä»¥æä¾›ç”¨æˆ·åœ¨æŒ‡å®šçš„é€‰é¡¹ä¸­é€‰æ‹©ä¸€é¡¹ï¼Œå¹¶ä½¿ç”¨%ERRORLEVEL%è·å–é€‰æ‹©çš„å€¼ã€‚\nCHOICEå‘½ä»¤è¯­æ³•å¦‚ä¸‹ï¼š\nCHOICE [/C choices] [/N] [/CS] [/T timeout /D choice] [/M text]æè¿°:    è¯¥å·¥å…·å…è®¸ç”¨æˆ·ä»é€‰æ‹©åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªé¡¹ç›®å¹¶è¿”å›æ‰€é€‰é¡¹ç›®çš„ç´¢å¼•ã€‚å‚æ•°åˆ—è¡¨:   /C    choices       æŒ‡å®šè¦åˆ›å»ºçš„é€‰é¡¹åˆ—è¡¨ã€‚é»˜è®¤åˆ—è¡¨æ˜¯ &quot;YN&quot;ã€‚   /N                  åœ¨æç¤ºç¬¦ä¸­éšè—é€‰é¡¹åˆ—è¡¨ã€‚æç¤ºå‰é¢çš„æ¶ˆæ¯å¾—åˆ°æ˜¾ç¤ºï¼Œ                       é€‰é¡¹ä¾æ—§å¤„äºå¯ç”¨çŠ¶æ€ã€‚   /CS                 å…è®¸é€‰æ‹©åˆ†å¤§å°å†™çš„é€‰é¡¹ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå·¥å…·                       æ˜¯ä¸åˆ†å¤§å°å†™çš„ã€‚   /T    timeout       åšå‡ºé»˜è®¤é€‰æ‹©ä¹‹å‰ï¼Œæš‚åœçš„ç§’æ•°ã€‚å¯æ¥å—çš„å€¼æ˜¯ä» 0                       åˆ° 9999ã€‚å¦‚æœæŒ‡å®šäº† 0ï¼Œå°±ä¸ä¼šæœ‰æš‚åœï¼Œé»˜è®¤é€‰é¡¹                       ä¼šå¾—åˆ°é€‰æ‹©ã€‚   /D    choice        åœ¨ nnnn ç§’ä¹‹åæŒ‡å®šé»˜è®¤é€‰é¡¹ã€‚å­—ç¬¦å¿…é¡»åœ¨ç”¨ /C é€‰                       é¡¹æŒ‡å®šçš„ä¸€ç»„é€‰æ‹©ä¸­; åŒæ—¶ï¼Œå¿…é¡»ç”¨ /T æŒ‡å®š nnnnã€‚   /M    text          æŒ‡å®šæç¤ºä¹‹å‰è¦æ˜¾ç¤ºçš„æ¶ˆæ¯ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå·¥å…·åª                       æ˜¾ç¤ºæç¤ºã€‚   /?                  æ˜¾ç¤ºæ­¤å¸®åŠ©æ¶ˆæ¯ã€‚   æ³¨æ„:   ERRORLEVEL ç¯å¢ƒå˜é‡è¢«è®¾ç½®ä¸ºä»é€‰æ‹©é›†é€‰æ‹©çš„é”®ç´¢å¼•ã€‚åˆ—å‡ºçš„ç¬¬ä¸€ä¸ªé€‰æ‹©è¿”å› 1ï¼Œç¬¬äºŒä¸ªé€‰æ‹©è¿”å› 2ï¼Œç­‰ç­‰ã€‚   å¦‚æœç”¨æˆ·æŒ‰çš„é”®ä¸æ˜¯æœ‰æ•ˆçš„é€‰æ‹©ï¼Œè¯¥å·¥å…·ä¼šå‘å‡ºè­¦å‘Šå“å£°ã€‚å¦‚æœè¯¥å·¥å…·æ£€æµ‹åˆ°é”™è¯¯çŠ¶æ€ï¼Œå®ƒä¼šè¿”å› 255 çš„ERRORLEVEL å€¼ã€‚   å¦‚æœç”¨æˆ·æŒ‰ Ctrl+Break æˆ– Ctrl+C é”®ï¼Œè¯¥å·¥å…·ä¼šè¿”å› 0çš„ ERRORLEVEL å€¼ã€‚   åœ¨ä¸€ä¸ªæ‰¹ç¨‹åºä¸­ä½¿ç”¨ ERRORLEVEL å‚æ•°æ—¶ï¼Œå°†å‚æ•°é™åºæ’åˆ—ã€‚\n\nå¦‚ï¼š\nCHOICE /C YNC /M &quot;ç¡®è®¤è¯·æŒ‰ Yï¼Œå¦è¯·æŒ‰ Nï¼Œæˆ–è€…å–æ¶ˆè¯·æŒ‰ Cã€‚&quot;\n\nè¿è¡Œå¤–éƒ¨ç¨‹åºstartä½¿ç”¨ start å‘½ä»¤æ—¶ï¼Œå½“å‰æ‰¹å¤„ç†ä¸ä¼šç­‰å¾…å¤–éƒ¨ç¨‹åºè¿è¡Œç»“æŸï¼Œè€Œæ˜¯ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚\nä½¿ç”¨ start å‘½ä»¤è¿è¡Œå…¶ä»–æ‰¹å¤„ç†å’Œ windows å‘½ä»¤è¡Œç¨‹åºæ—¶ï¼Œè¿˜ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œçª—å£ï¼Œå¹¶å°†åœ¨æ–°çš„çª—å£ä¸­è¿è¡Œæ–°çš„ç¨‹åºï¼Œå¦‚ï¼š\n@echo offecho 1start ping baidu.comecho 2start notepad.exeecho 3start other.batecho 4pause\n\ncallä½¿ç”¨ call å‘½ä»¤æ—¶ï¼Œå½“å‰æ‰¹å¤„ç†ä¼šç­‰å¾…å¤–éƒ¨ç¨‹åºæˆ–æ‰¹å¤„ç†è¿è¡Œç»“æŸï¼Œç„¶åæ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚å¹¶ä¸”å§‹ç»ˆåœ¨å½“å‰å‘½ä»¤è¡Œçª—å£ä¸­è¿è¡Œå…¶ä»–æ‰¹å¤„ç†å’Œå‘½ä»¤è¡Œç¨‹åºã€‚\nç›´æ¥è¿è¡Œç›´æ¥è¿è¡Œä¸ä½¿ç”¨ call å‘½ä»¤ä¸€æ ·ã€‚ä½†ç›´æ¥è¿è¡Œå¤–éƒ¨æ‰¹å¤„ç†æ—¶ä¼šç ´åå½“å‰æ‰¹å¤„ç†çš„è¿è¡Œæµç¨‹ï¼Œä¼šå¯¼è‡´æ‰§è¡Œæµç¨‹æ— æ³•è¿”å›åˆ°å½“å‰æ‰¹å¤„ç†ç»§ç»­æ‰§è¡Œã€‚\n@echo offecho 1ping baidu.comecho 2notepad.exeecho 3other.batecho 4pause\n\nä¸Šè¿°ç¤ºä¾‹ï¼Œæ‰§è¡Œother.batåï¼Œæ— æ³•è¿”å›åˆ°å½“å‰æ‰¹å¤„ç†ï¼Œä»è€Œæ— æ³•æ‰§è¡Œecho 4åŠåé¢è¯­å¥ã€‚\nè·å–å‘½ä»¤çš„è¿”å›å€¼åœ¨ Windows æ‰¹å¤„ç†ä¸­ï¼Œ%errorlevel%å˜é‡ä¿å­˜ç€ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼ˆå³mainå‡½æ•°çš„è¿”å›å€¼ï¼‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ0 è¡¨ç¤ºæ‰§è¡ŒæˆåŠŸï¼Œé 0 åˆ™è¡¨ç¤ºæ‰§è¡Œå¤±è´¥ï¼Œå…·ä½“çš„é 0 å€¼çš„å«ä¹‰åˆ™å–å†³äºå…·ä½“çš„å‘½ä»¤ã€‚\nåœ¨æ‰¹å¤„ç†è„šæœ¬ä¸­ï¼Œå¯ä»¥æ ¹æ®%errorlevel%çš„å€¼æ¥è¿›è¡Œåç»­çš„å¤„ç†é€»è¾‘ï¼Œä¾‹å¦‚ï¼š\n@echo offREM æ‰§è¡Œä¸€ä¸ªå‘½ä»¤start un-exist.exeREM åˆ¤æ–­å‘½ä»¤æ‰§è¡Œç»“æœif %errorlevel% equ 0 (    echo success) else (    echo failed with: %errorlevel%)pause\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\nç³»ç»Ÿæ‰¾ä¸åˆ°æ–‡ä»¶ un-exist.exeã€‚failed with: 9059è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . .\n\n%errorlevel%æ˜¯ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œå› æ­¤ä¸Šé¢ä¾‹å­ä¸­çš„ 9059 æ˜¯ start å‘½ä»¤çš„ç»“æœï¼Œè€Œä¸æ˜¯ un-exist.exe è¿”å›çš„ç»“æœã€‚\né¡ºåºæ‰§è¡ŒWindows æ‰¹å¤„ç†æä¾›äº†&amp;ã€&amp;&amp;ã€||ã€|ã€&gt;ã€&gt;&gt;ç­‰é¡ºåºæ‰§è¡Œæ–¹å¼ï¼Œå®ƒä»¬åŒºåˆ«å¦‚ä¸‹ï¼ˆä¸‹é¢è¯´çš„æ‰§è¡ŒæˆåŠŸæŒ‡çš„æ˜¯å‘½ä»¤è¿”å›å€¼ä¸º 0ï¼‰ï¼š\n\n&amp; é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œè€Œä¸ç®¡å‰é¢å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚\n&amp;&amp; é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œå½“å‰é¢å‘½ä»¤æ‰§è¡Œå‡ºé”™ï¼Œåé¢çš„å‘½ä»¤å°†ä¸ä¼šæ‰§è¡Œã€‚\n|| é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œç›´åˆ°é‡åˆ°æ‰§è¡ŒæˆåŠŸçš„å‘½ä»¤ã€‚\n| ç®¡é“å‘½ä»¤ï¼Œå°†å‰ä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœè¾“å‡ºåˆ°åä¸€ä¸ªå‘½ä»¤ å¦‚ï¼šhelp|moreã€‚\n&gt; æ–‡ä»¶å†™å…¥å‘½ä»¤ï¼Œæ¸…é™¤åŸæ–‡ä»¶ä¸­çš„å†…å®¹åå†å†™å…¥ã€‚\n&gt;&gt; æ–‡ä»¶è¿½åŠ å†™å…¥å‘½ä»¤\n\nä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œæ‰¹å¤„ç†è„šæœ¬åŸºæœ¬åŸç†ï¼š\n\næ ¹æ® ç³»ç»Ÿè‡ªå¸¦çš„cacls.exe æ˜¯å¦èƒ½å¤Ÿè®¿é—®â€%SystemDrive%\\System Volume Informationâ€æ–‡ä»¶ï¼Œæ¥åˆ¤æ–­å½“å‰æ‰¹å¤„ç†è¿›ç¨‹æ˜¯å¦å…·æœ‰ç®¡ç†å‘˜æƒé™ã€‚\nåˆ›å»º vbs è„šæœ¬åˆ°ä¸´æ—¶ç›®å½•ï¼Œç„¶åä½¿ç”¨è¯¥è„šæœ¬ææƒæ‰§è¡Œå½“å‰ bat æ–‡ä»¶ã€‚\n\nä¸‹é¢æ˜¯æ‰¹å¤„ç†æ¨¡æ¿ï¼Œåœ¨æœ€åè¿½åŠ éœ€è¦æ‰§è¡Œçš„è„šæœ¬å³å¯ã€‚\n@echo offcd /d &quot;%~dp0&quot;cacls.exe &quot;%SystemDrive%\\System Volume Information&quot; &gt;nul 2&gt;nulif %errorlevel%==0 goto Adminif exist &quot;%temp%\\getadmin.vbs&quot; del /f /q &quot;%temp%\\getadmin.vbs&quot;echo Set RequestUAC = CreateObject^(&quot;Shell.Application&quot;^)&gt;&quot;%temp%\\getadmin.vbs&quot;echo RequestUAC.ShellExecute &quot;%~s0&quot;,&quot;&quot;,&quot;&quot;,&quot;runas&quot;,1 &gt;&gt;&quot;%temp%\\getadmin.vbs&quot;echo WScript.Quit &gt;&gt;&quot;%temp%\\getadmin.vbs&quot;&quot;%temp%\\getadmin.vbs&quot; /fif exist &quot;%temp%\\getadmin.vbs&quot; del /f /q &quot;%temp%\\getadmin.vbs&quot;exit:Adminrem ---------- Here is the script to be run ------------\n\nåœ¨æ‰¹å¤„ç†ä¸­æ‰§è¡ŒSQL&quot;%~dp0\\mysql-5.6.19-win32\\bin\\mysql.exe&quot; ^  -h127.0.0.1 -P31060 -uroot ^  --execute=&quot;update mysql.user SET password=PASSWORD(&#x27;123456&#x27;) WHERE user=&#x27;root&#x27;;&quot;;\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["æ‰¹å¤„ç†"]},{"title":"Windowså†…æ ¸å¯¹è±¡","url":"/post/14744864.html","content":"ä»€ä¹ˆæ˜¯å†…æ ¸å¯¹è±¡æˆ‘ä»¬åœ¨ windows å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ°å†…æ ¸å¯¹è±¡ï¼Œå¦‚äº‹ä»¶(Event)ï¼Œç®¡é“(Pipe)ï¼Œäº’æ–¥é‡(Mutex)ï¼Œå®Œæˆç«¯å£(IOCP)ï¼Œè¿›ç¨‹(Process)ï¼Œçº¿ç¨‹(Thread)ç­‰ï¼Œä»–ä»¬éƒ½æ˜¯å†…æ ¸å¯¹è±¡ã€‚è¿™äº›å†…æ ¸å¯¹è±¡è™½ç„¶é€šè¿‡ä¸åŒçš„ç³»ç»Ÿ API æ¥åˆ›å»ºï¼Œä½†è¿™äº› API éƒ½æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹ï¼Œå°±æ˜¯éƒ½éœ€è¦ä¼ å…¥SECURITY_ATTRIBUTESå®‰å…¨æè¿°ç¬¦ç»“æ„ä½“æŒ‡é’ˆï¼Œå¹¶ä¸”è¿”å›å¥æŸ„(HANDLE)ã€‚ä¾æ®è¿™ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•æ–¹æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯å†…æ ¸å¯¹è±¡ï¼Œå°±æ˜¯çœ‹åˆ›å»ºå®ƒçš„å‡½æ•°æ˜¯å¦å…è®¸ä¼ å…¥SECURITY_ATTRIBUTESå®‰å…¨æè¿°ç¬¦ã€‚\n\n\nå†…æ ¸å¯¹è±¡çš„åˆ›å»ºå¤§å¤šæ•°åˆ›å»ºå†…æ ¸å¯¹è±¡çš„ç³»ç»Ÿ API å‡½æ•°ï¼Œå¦‚ CreateEvent, CreateMutex, CreateThread, CreateProcess, CreatePipe, CreateNamedPipe ç­‰éƒ½ä¼šè¿”å›ä¸€ä¸ª HANDLEï¼ˆæ— è®ºæ˜¯ä»¥è¿”å›å€¼çš„å½¢å¼ï¼Œè¿˜æ˜¯ä»¥æŒ‡é’ˆå‚æ•°çš„å½¢å¼è¿”å›ï¼‰ï¼Œåˆ›å»ºå†…æ ¸å¯¹è±¡æˆåŠŸæ—¶ HANDLE ä¸ºéNULLï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°† HANDLE çš„å€¼ä¸ NULL è¿›è¡Œæ¯”è¾ƒï¼Œæ¥åˆ¤æ–­å‡½æ•°æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚ä½†æ˜¯æœ‰äº›å‡½æ•°æ¯”è¾ƒä¾‹å¤–ï¼Œå¦‚CreateFileï¼Œè¿™äº›å‡½æ•°æ‰§è¡Œå¤±è´¥æ—¶ï¼Œè¿”å›çš„HANDLEçš„å€¼ä¸ºINVALID_HANDLE_VALUIEã€‚\nç›¸å…³æ–‡ç« ï¼šç”±HANDLEè¿”å›å€¼ä¸ç¡®å®šæ€§å¼•å‘çš„æ€è€ƒ\nå†…æ ¸å¯¹è±¡çš„è®¿é—®è™½ç„¶å†…æ ¸å¯¹è±¡å±äºç³»ç»Ÿå†…æ ¸ï¼Œä½†åˆ›å»ºå‡½æ•°è¿”å›çš„HANDLEå¥æŸ„å´åªå’Œå½“å‰è¿›ç¨‹æœ‰å…³ï¼Œç¦»å¼€äº†å½“å‰è¿›ç¨‹è¿™ä¸ªå¥æŸ„ä¹Ÿå°±å¤±å»äº†æ„ä¹‰ã€‚å†…æ ¸å¯¹è±¡å±äºç³»ç»Ÿå†…æ ¸çº§åˆ«ï¼Œä¸ºäº†ç³»ç»Ÿå®‰å…¨æ€§ï¼ŒWindows ä¸å…è®¸æˆ‘ä»¬ç›´æ¥è®¿é—®å†…æ ¸å¯¹è±¡çš„å†…å­˜åŒºåŸŸï¼Œåªå…è®¸æˆ‘ä»¬é€šè¿‡ Windows æä¾›çš„ä¸€ç³»åˆ— API æ¥è®¿é—®å†…æ ¸å¯¹è±¡ï¼Œå¦‚SetEvent, ResetEventç­‰ç­‰ï¼Œä½¿ç”¨è¿™äº›å‡½æ•°æ—¶æˆ‘ä»¬éƒ½ä¼šç”¨åˆ°HANDLEï¼Œwindows å¤´æ–‡ä»¶ä¸­HANDLEçš„å®šä¹‰å¦‚ä¸‹ï¼š\ntypedef void *HANDLE;\n\nè™½ç„¶å®šä¹‰ä¸ºvoid*ç±»å‹ï¼Œä½†å¾ˆæ˜¾ç„¶è¿™ä¸ªHANDLEä¸æ˜¯æŒ‡å‘å†…æ ¸å¯¹è±¡çš„æŒ‡é’ˆã€‚\n\nå¦‚ä½•è¯æ˜ HANDLE ä¸æ˜¯æŒ‡å‘å†…æ ¸å¯¹è±¡çš„æŒ‡é’ˆï¼Ÿä¸€æ–¹é¢ç›´æ¥æ‰§è¡Œå†…æ ¸å¯¹è±¡æ¯«æ— å®‰å…¨æ€§å¯è¨€ï¼›å¦ä¸€æ–¹é¢å†…æ ¸å¯¹è±¡ä¿å­˜åœ¨å†…æ ¸åœ°å€ç©ºé—´ï¼ˆ32 ä½ç³»ç»Ÿæ˜¯0x80000000 åˆ° 0xFFFFFFFFï¼Œ64 ä½ç³»ç»Ÿæ˜¯0x00000040 00000000åˆ°0xFFFFFFFF FFFFFFFFï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ç±»ä¼¼CreateEventçš„å‡½æ•°åˆ›å»ºä¸€ä¸ªå†…æ ¸å¯¹è±¡ï¼Œè§‚å¯Ÿå…¶è¿”å›çš„ HANDLEï¼Œæ˜æ˜¾ä¸åœ¨å†…æ ¸åœ°å€ç©ºé—´çš„èŒƒå›´å†…ï¼Œä¸”å€¼ä¸€èˆ¬æ¯”è¾ƒå°ã€‚\n\né‚£ä¹ˆè¿™ä¸ªHANDLEå¥æŸ„æ˜¯å¦‚ä½•ä¸å†…æ ¸å¯¹è±¡å…³è”èµ·æ¥çš„äº†ï¼Ÿç­”æ¡ˆæ˜¯ï¼šè¿›ç¨‹çš„å¥æŸ„è¡¨ã€‚æ¯ä¸ªè¿›ç¨‹åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œç³»ç»Ÿéƒ½ä¼šä¸ºå®ƒåˆ†é…ä¸€ä¸ªå¥æŸ„è¡¨(Windows æ²¡æœ‰æä¾›å®˜æ–¹çš„æ–‡æ¡£æ¥ä»‹ç»å¥æŸ„è¡¨)ï¼Œå‚è€ƒã€ŠWindows æ ¸å¿ƒç¼–ç¨‹ã€‹å¾—çŸ¥å¥æŸ„è¡¨çš„ç»“æ„ï¼Œå¦‚å›¾ï¼š\n\n\n\nç´¢å¼•\næŒ‡å‘å†…æ ¸å¯¹è±¡å†…å­˜å—çš„æŒ‡é’ˆ\nè®¿é—®æ©ç \næ ‡å¿—\n\n\n\n1\n0x????????\n0x????????\n0x????????\n\n\n2\n0x????????\n0x????????\n0x????????\n\n\nâ€¦\nâ€¦\nâ€¦\nâ€¦\n\n\nå¦‚æˆ‘ä»¬è°ƒç”¨ç±»ä¼¼CreateEventçš„å‡½æ•°è¿”å›çš„å¥æŸ„HANDLEå°±æ˜¯å¥æŸ„è¡¨ä¸­çš„ç´¢å¼•ã€‚å› ä¸ºæ˜¯ç´¢å¼•ï¼Œæ‰€ä»¥å®ƒçš„å€¼ä¸€èˆ¬æ¯”è¾ƒå°ã€‚æˆ‘ä»¬å‘ windows API å‡½æ•°ä¼ å…¥è¿™ä¸ªç´¢å¼•ï¼ŒAPI å†é€šè¿‡ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„å†…æ ¸å¯¹è±¡æŒ‡é’ˆã€‚\nå†…æ ¸å¯¹è±¡çš„é”€æ¯å¼•ç”¨è®¡æ•°å†…æ ¸å¯¹è±¡çš„æ‰€æœ‰è€…æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œè€Œä¸æ˜¯åˆ›å»ºå®ƒçš„è¿›ç¨‹ã€‚\nå¤šä¸ªè¿›ç¨‹å¯ä»¥å¼•ç”¨ï¼ˆä½¿ç”¨ï¼‰åŒä¸€ä¸ªå†…æ ¸å¯¹è±¡ï¼Œæ“ä½œç³»ç»Ÿä½¿ç”¨äº†è®¡æ•°å™¨çš„æ–¹å¼æ¥ç®¡ç†å†…æ ¸å¯¹è±¡ï¼ˆè¿™ä¸ªå’Œ C++ä¸­çš„std::shared_ptræ™ºèƒ½æŒ‡é’ˆç±»ä¼¼ï¼‰ï¼Œä¸€ä¸ªå†…æ ¸å¯¹è±¡å…¶å®æœ‰ä¸¤ä¸ªè®¡æ•°å™¨ï¼šä¸€ä¸ªæ˜¯ç»™ç”¨æˆ·æ€(Ring3)ç”¨çš„å¥æŸ„è®¡æ•°ï¼›å¦ä¸€ä¸ªæ˜¯æŒ‡é’ˆè®¡æ•°ï¼Œä¹Ÿå«å¼•ç”¨è®¡æ•°ï¼Œå› ä¸ºæ ¸å¿ƒæ€ç¨‹åº(Ring0)ä¹Ÿç»å¸¸ç”¨åˆ°å†…æ ¸å¯¹è±¡ï¼Œä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œåœ¨æ ¸å¿ƒæ€çš„ä»£ç ç”¨æŒ‡é’ˆç›´æ¥è®¿é—®å¯¹è±¡ï¼Œæ‰€ä»¥å†…æ ¸å¯¹è±¡çš„ç®¡ç†å™¨ä¹Ÿç»´æŠ¤äº†è¿™ä¸ªæŒ‡é’ˆå¼•ç”¨è®¡æ•°ã€‚åªæœ‰åœ¨å†…æ ¸å¯¹è±¡çš„å¥æŸ„è®¡æ•°å’Œå¼•ç”¨è®¡æ•°éƒ½ä¸º 0 æ—¶ï¼Œè¯¥å†…æ ¸å¯¹è±¡æ‰è¢«é‡Šæ”¾ã€‚ä¸€èˆ¬è€Œè¨€ï¼ŒæŒ‡é’ˆå¼•ç”¨è®¡æ•°å€¼æ¯”å¥æŸ„è®¡æ•°å€¼å¤§ã€‚\næ­£ç¡®çš„é”€æ¯æ–¹å¼å½“ç¨‹åºä¸å†ä½¿ç”¨å†…æ ¸å¯¹è±¡æ—¶ï¼Œéœ€è¦è°ƒç”¨CloseHandleå°†å†…æ ¸å¯¹è±¡çš„è®¡æ•°å‡ 1ï¼Œè¿™æ ·ç³»ç»Ÿå†…æ ¸åœ¨è¯¥å¯¹è±¡è®¡æ•°ä¸º 0 æ—¶ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰è¢«ä»»ä½•ä¸œè¥¿å¼•ç”¨æ—¶ï¼‰å°†é”€æ¯è¯¥å¯¹è±¡ã€‚ å¹¶ä¸”åœ¨è°ƒç”¨CloseHandleä¹‹åï¼Œç¨‹åºè¿˜åº”è¯¥å°†HANDLEç½®ä¸ºNULLã€‚\nå¦‚æœCloseHandleä¹‹åä¸å°†HANDLEç½®ä¸ºNULLï¼Œåè€Œå†æ¬¡ä½¿ç”¨è¯¥HANDLEï¼Œå°±ä¼šå‡ºç° 2 ç§æƒ…å†µï¼š\n\nè¿›ç¨‹å¥æŸ„è¡¨ä¸­è¯¥HANDLEæ‰€åœ¨çš„ç´¢å¼•é¡¹çš„è®°å½•å·²ç»è¢«æ¸…é™¤ï¼Œä¸”æ²¡æœ‰åˆ«çš„çº¿ç¨‹å†æ¬¡åœ¨è¯¥ç´¢å¼•åˆ›å»ºè®°å½•é¡¹ï¼Œè‹¥æ­¤æ—¶ä½¿ç”¨è¿™ä¸ªè¿‡æœŸçš„HANDLEè°ƒç”¨ Win32 API å‡½æ•°ï¼ŒWindows ä¼šè¿”å›æ— æ•ˆå‚æ•°é”™è¯¯ã€‚è¿™ç§æƒ…å†µè¿˜æ¯”è¾ƒå¥½è°ƒè¯•ã€‚\n\nè¿›ç¨‹å¥æŸ„è¡¨ä¸­è¯¥HANDLEæ‰€åœ¨çš„ç´¢å¼•é¡¹çš„è®°å½•åŒæ ·ä¹Ÿå·²ç»è¢«æ¸…é™¤ï¼Œä½†å·²ç»æœ‰åˆ«çš„çº¿ç¨‹ï¼ˆè¯¥è¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹ï¼‰åœ¨è¯¥ç´¢å¼•ä½ç½®åˆ›å»ºäº†è®°å½•é¡¹ï¼Œè‹¥æ­¤æ—¶ä½¿ç”¨è¿™ä¸ªè¿‡æœŸçš„HANDLEè°ƒç”¨ Win32 API å‡½æ•°ï¼Œè¯¥HANDLEå°±ä¼šå¼•ç”¨åˆ°å…¶ä»–çº¿ç¨‹æ–°å»ºçš„é‚£ä¸ªå†…æ ¸å¯¹è±¡ï¼Œä»è€Œå‡ºç°ä¸€äº›éš¾ä»¥é¢„æ–™çš„é”™è¯¯ã€‚è¿™ç§é”™è¯¯å¾ˆéš¾è°ƒè¯•ã€‚\n\n\nè·å–å†…æ ¸å¯¹è±¡çš„å¼•ç”¨è®¡æ•°è™½ç„¶ windows æ²¡æœ‰æä¾› API è®©ç”¨æˆ·åœ¨ç”¨æˆ·æ€ï¼ˆRing3ï¼‰æŸ¥è¯¢ä¸€ä¸ªå†…æ ¸å¯¹è±¡çš„å¥æŸ„è®¡æ•°å’Œå¼•ç”¨è®¡æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä»Ntdll.dllå¯¼å‡ºNtQueryObjectå‡½æ•°æ¥å®ç°æŸ¥è¯¢å†…æ ¸å¯¹è±¡çš„å½“å‰çŠ¶æ€(è¯¥å‡½æ•°æ²¡æœ‰è¢«æ–‡æ¡£åŒ–)ã€‚\nNtQueryObjectå‡½æ•°å£°æ˜å¦‚ä¸‹ï¼š\n// è¿”å›å€¼ï¼šå¦‚æœæˆåŠŸåˆ™è¿”å›0//DWORD WINAPI NtQueryObject(HANDLE   handle,       // å¾…æŸ¥è¯¢çš„å¥æŸ„DWORD   nQueryIndex,   // 0ä¸ºæŸ¥è¯¢å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬å¥æŸ„è®¡æ•°ï¼Œå¼•ç”¨è®¡æ•°ç­‰ç­‰ã€‚VOID*   pOutBuffer,    // å­˜æ”¾æŸ¥è¯¢ç»“æœDWORD   cbInBufferSize,   // pOutBufferçš„å¤§å°ï¼Œå¦‚æœnQueryIndexä¸º0ï¼Œè¿™é‡Œä¸ºsizeof(SYSTEM_HANDLE_STATE)VOID*   cbOutBufferSize   // å®é™…å¤§å°);\n\nå°†NtQueryObjectå‡½æ•°è°ƒç”¨çš„ç»†èŠ‚å°è£…åˆ°GetKernelObjectRefCountå‡½æ•°ä¸­ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼š\nbool GetKernelObjectRefCount(HANDLE handle, DWORD &amp;handle_count, DWORD &amp;point_count) &#123;\ttypedef struct _SYSTEM_HANDLE_STATE &#123;\t\tDWORD   r1;\t\tDWORD   GrantedAccess;\t\tDWORD   HandleCount;      // å‡1ä¸ºå¥æŸ„è®¡æ•°\t\tDWORD   ReferenceCount;   // å‡1ä¸ºæŒ‡é’ˆå¼•ç”¨è®¡æ•°\t\tDWORD   r5;\t\tDWORD   r6;\t\tDWORD   r7;\t\tDWORD   r8;\t\tDWORD   r9;\t\tDWORD   r10;\t\tDWORD   r11;\t\tDWORD   r12;\t\tDWORD   r13;\t\tDWORD   r14;\t&#125;SYSTEM_HANDLE_STATE, *PSYSTEM_HANDLE_STATE;\ttypedef DWORD(WINAPI *PFN_NtQueryObject)(HANDLE handle,\t\tDWORD nQueryIndex,\t\tVOID* pOutBuffer,\t\tDWORD cbInBufferSize,\t\tVOID* cbOutBufferSize);\tstatic PFN_NtQueryObject pfnNtQueryObject = NULL;\tbool ret = false;\tdo &#123;\t\tif (pfnNtQueryObject == NULL) &#123;\t\t\tHMODULE ntdll = GetModuleHandle(TEXT(&quot;Ntdll.dll&quot;));\t\t\tif (ntdll == NULL)\t\t\t\tbreak;\t\t\tpfnNtQueryObject = (PFN_NtQueryObject)GetProcAddress(ntdll, &quot;NtQueryObject&quot;);\t\t\tif (pfnNtQueryObject == NULL)\t\t\t\tbreak;\t\t&#125;\t\tSYSTEM_HANDLE_STATE sys_handle_state;\t\tmemset(&amp;sys_handle_state, 0, sizeof(SYSTEM_HANDLE_STATE));\t\tDWORD out_buf_size = 0;\t\tret = (pfnNtQueryObject(handle, 0, &amp;sys_handle_state, sizeof(SYSTEM_HANDLE_STATE), &amp;out_buf_size) == 0);\t\tif (ret) &#123;\t\t\thandle_count = sys_handle_state.HandleCount - 1;\t\t\tpoint_count = sys_handle_state.ReferenceCount - 1;\t\t&#125;\t&#125; while (false);\treturn ret;&#125;\n\nå†…æ ¸å¯¹è±¡è·¨è¿›ç¨‹è®¿é—®è™½ç„¶å†…æ ¸å¯¹è±¡ä½äºç‹¬ç«‹äºè¿›ç¨‹ä¹‹å¤–çš„å†…æ ¸åŒºåŸŸï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­å´åªèƒ½é€šè¿‡è°ƒç”¨ Win32 API ä¼ å…¥ HANDLE å‚æ•°æ¥æ“ä½œå†…æ ¸å¯¹è±¡ï¼ˆå¦‚SetEventç­‰ï¼‰ã€‚ç„¶è€ŒHANDLEå¥æŸ„åªå¯¹å½“å‰è¿›ç¨‹æœ‰æ•ˆï¼Œç¦»å¼€äº†å½“å‰è¿›ç¨‹è¯¥å¥æŸ„å°±æ— æ•ˆäº†ã€‚æ‰€ä»¥è¯´ï¼Œè·¨è¿›ç¨‹è®¿é—®å†…æ ¸å¯¹è±¡çš„å…³é”®åœ¨äºæˆ‘ä»¬æ€ä¹ˆè·¨è¿›ç¨‹è®¿é—®å¥æŸ„HANDLEï¼Ÿ\nä¸‹é¢ä»‹ç»å‡ ç§æ–¹æ³•æ¥å®ç°è·¨è¿›ç¨‹å…±äº«å†…æ ¸å¯¹è±¡ã€‚\nä½¿ç”¨å¥æŸ„ç»§æ‰¿çš„æ–¹å¼åªæœ‰è¿›ç¨‹ä¹‹é—´æœ‰çˆ¶å­å…³ç³»æ—¶ï¼Œæ‰å¯ä»¥ä½¿ç”¨å¥æŸ„ç»§æ‰¿çš„æ–¹å¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥ç”Ÿæˆä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¹¶å…è®¸å­è¿›ç¨‹è®¿é—®çˆ¶è¿›ç¨‹çš„å†…æ ¸å¯¹è±¡ã€‚ä¸ºäº†ä½¿è¿™ç§ç»§æ‰¿ç”Ÿæ•ˆï¼Œçˆ¶è¿›ç¨‹å¿…é¡»æ‰§è¡Œå‡ ä¸ªæ­¥éª¤ï¼šï¼ˆ1ï¼‰. çˆ¶è¿›ç¨‹åœ¨åˆ›å»ºä¸€ä¸ªå†…æ ¸å¯¹è±¡æ—¶ï¼Œçˆ¶è¿›ç¨‹å¿…é¡»å‘ç³»ç»ŸæŒ‡å®šå®ƒå¸Œæœ›è¿™ä¸ªå†…æ ¸å¯¹è±¡çš„å¥æŸ„æ˜¯å¯ä»¥ç»§æ‰¿çš„ã€‚ä¸ºäº†åˆ›å»ºä¸€ä¸ªå¯ç»§æ‰¿çš„å†…æ ¸å¯¹è±¡ï¼Œå¿…é¡»åˆ†é…å¹¶åˆå§‹åŒ–ä¸€ä¸ªSECURITY_ATTRIBUTESç»“æ„ï¼Œå¦‚ï¼š\nSECURITY_ATTRIBUTES sa;sa.nLength = sizeof(SECURITY_ATTRIBUTES);sa.bInheritHandle = TRUE;  // å¯ç»§æ‰¿çš„sa.lpSecurityDescriptor = NULL;HANDLE h = CreateEvent(&amp;sa, TRUE, FALSE, NULL);\n\nï¼ˆ2ï¼‰. çˆ¶è¿›ç¨‹é€šè¿‡ CreateProcess ç”Ÿæˆå­è¿›ç¨‹ï¼Œä¸”æŒ‡å®šbInheritHandlesä¸º TRUEï¼Œä»è€Œå…è®¸å­è¿›ç¨‹æ¥ç»§æ‰¿çˆ¶è¿›ç¨‹çš„é‚£äº›â€œå¯ç»§æ‰¿çš„å¥æŸ„â€ã€‚\n// å¯åŠ¨å­è¿›ç¨‹TestB.exeï¼Œå°†å¥æŸ„hä½œä¸ºå¯åŠ¨å‚æ•°ä¼ ç»™è¿›ç¨‹TestB//TCHAR cmd_buf[MAX_PATH];StringCchPrintf(cmd_buf, MAX_PATH, TEXT(&quot;TestB.exe %ld&quot;), (long)h);STARTUPINFO si = &#123; sizeof(si) &#125;;PROCESS_INFORMATION pi;BOOL ret = CreateProcess(\tNULL,\tcmd_buf,\tNULL,\tNULL,\tTRUE,  // æŒ‡å®šå­è¿›ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶è¿›ç¨‹çš„â€œå¯ç»§æ‰¿å¥æŸ„â€\t0,\tNULL,\tNULL,\t&amp;si,\t&amp;pi);CloseHandle(pi.hProcess);CloseHandle(pi.hThread);\n\nç”±äºæˆ‘ä»¬ä¼ ç»™bInheritHandleså‚æ•°çš„å€¼æ˜¯TRUEï¼Œæ‰€ä»¥ç³»ç»Ÿåœ¨åˆ›å»ºå­è¿›ç¨‹æ—¶ä¼šå¤šåšä¸€ä»¶äº‹æƒ…ï¼šå®ƒä¼šéå†çˆ¶è¿›ç¨‹çš„å¥æŸ„è¡¨ï¼Œå¯¹å®ƒçš„æ¯ä¸€é¡¹è¿›è¡Œæ£€æŸ¥ï¼Œå‡¡æ˜¯åŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„â€œå¯ç»§æ‰¿çš„å¥æŸ„â€çš„é¡¹ï¼Œéƒ½ä¼šå°†è¯¥é¡¹å®Œæ•´çš„å¤åˆ¶åˆ°å­è¿›ç¨‹çš„å¥æŸ„è¡¨ã€‚åœ¨å­è¿›ç¨‹çš„å¥æŸ„è¡¨ä¸­ï¼Œå¤åˆ¶é¡¹çš„ä½ç½®ä¸å®ƒåœ¨çˆ¶è¿›ç¨‹å¥æŸ„è¡¨ä¸­çš„ä½ç½®å®Œå…¨ä¸€æ ·ï¼ˆåŒ…å«ç´¢å¼•ï¼‰ï¼Œè¿™ä¸ªå°±æ„å‘³ç€ï¼šåœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¸­ï¼Œå¯¹ä¸€ä¸ªå†…æ ¸å¯¹è±¡è¿›è¡Œæ ‡è¯†çš„å¥æŸ„å€¼ä¹Ÿæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é€šè¿‡æŸç§æ–¹å¼ï¼ˆå¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„å¯åŠ¨å‚æ•°çš„æ–¹å¼ï¼Œæˆ–è€…ç¯å¢ƒå˜é‡çš„æ–¹å¼ç­‰ä»»ä½•è¿›ç¨‹é—´é€šè®¯çš„æ–¹å¼ï¼‰å°†è¿™ä¸ªå€¼å‘Šè¯‰å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å°±å¯ä»¥å°†è¯¥å€¼è½¬æˆHANDLEï¼Œç„¶åä½¿ç”¨è¿™ä¸ªHANDLEæ¥è°ƒç”¨ç³»ç»Ÿ APIã€‚\nä½¿ç”¨ DuplicateHandle æ–¹å¼DuplicateHandle å‡½æ•°å¯ä»¥å°†æŒ‡å®šâ€œæºè¿›ç¨‹çš„å¥æŸ„è¡¨â€ä¸­çš„æŸä¸€é¡¹å¤åˆ¶åˆ°â€œç›®çš„è¿›ç¨‹å¥æŸ„è¡¨â€ä¸­ï¼ˆé™¤äº†ç´¢å¼•ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥é¡¹åœ¨ç›®çš„è¿›ç¨‹å¥æŸ„è¡¨ä¸­çš„ç´¢å¼•ï¼ˆå³ HADNLEï¼‰ã€‚å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è°ƒç”¨ DuplicateHandle å‡½æ•°ï¼ŒDuplicateHandle å¯¹æºå¥æŸ„æ˜¯å¦æ˜¯å¯ç»§æ‰¿çš„æ²¡æœ‰è¦æ±‚ã€‚\nå‡½æ•°å£°æ˜å¦‚ä¸‹ï¼š\nBOOL DuplicateHandle(  HANDLE hSourceProcessHandle,  HANDLE hSourceHandle,  HANDLE hTargetProcessHandle,  LPHANDLE lpTargetHandle,  DWORD dwDesiredAccess,  BOOL bInheritHandle,  DWORD dwOptions);\n\n\nDuplicateHandle è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒ MSDNï¼šhttps://msdn.microsoft.com/en-us/library/windows/desktop/ms724251(v=vs.85).aspx\n\nDuplicateHandle å‡½æ•°ä¸èƒ½å¤åˆ¶æ‰€æœ‰ç±»å‹çš„å¥æŸ„ï¼Œåªèƒ½å¤åˆ¶å¦‚ä¸‹ç±»å‹çš„å¥æŸ„ï¼ˆä» MSDN å¤åˆ¶è€Œæ¥ï¼‰ï¼š\n\n\n\nObject\nDescription\n\n\n\nAccess token\nThe handle is returned by the CreateRestrictedToken, DuplicateToken, DuplicateTokenEx, OpenProcessToken, or OpenThreadToken function.\n\n\nChange notification\nThe handle is returned by the FindFirstChangeNotification function.\n\n\nCommunications device\nThe handle is returned by the CreateFile function.\n\n\nConsole input\nThe handle is returned by the CreateFile function when CONIN$ is specified, or by the GetStdHandle function when STD_INPUT_HANDLE is specified. Console handles can be duplicated for use only in the same process.\n\n\nConsole screen buffer\nThe handle is returned by the CreateFile function when CONOUT$ is specified, or by the GetStdHandle function when STD_OUTPUT_HANDLE is specified. Console handles can be duplicated for use only in the same process.\n\n\nDesktop\nThe handle is returned by the GetThreadDesktop function.\n\n\nEvent\nThe handle is returned by the CreateEvent or OpenEvent function.\n\n\nFile\nThe handle is returned by the CreateFile function.\n\n\nFile mapping\nThe handle is returned by the CreateFileMapping function.\n\n\nJob\nThe handle is returned by the CreateJobObject function.\n\n\nMailslot\nThe handle is returned by the CreateMailslot function.\n\n\nMutex\nThe handle is returned by the CreateMutex or OpenMutex function.\n\n\nPipe\nA named pipe handle is returned by the CreateNamedPipe or CreateFile function. An anonymous pipe handle is returned by the CreatePipe function.\n\n\nProcess\nThe handle is returned by the CreateProcess, GetCurrentProcess, or OpenProcess function.\n\n\nRegistry key\nThe handle is returned by the RegCreateKey, RegCreateKeyEx, RegOpenKey, or RegOpenKeyEx function. Note that registry key handles returned by the RegConnectRegistry function cannot be used in a call to DuplicateHandle.\n\n\nSemaphore\nThe handle is returned by the CreateSemaphore or OpenSemaphore function.\n\n\nThread\nThe handle is returned by the CreateProcess, CreateThread, CreateRemoteThread, or GetCurrentThread function\n\n\nTimer\nThe handle is returned by the CreateWaitableTimer or OpenWaitableTimer function.\n\n\nTransaction\nThe handle is returned by the CreateTransaction function.\n\n\nWindow station\nThe handle is returned by the GetProcessWindowStation function.\n\n\nä¸åŒçš„äº‹ä»¶ç±»å‹å¯¹åº”çš„dwDesiredAccesså‚æ•°ä¸åŒï¼Œå…·ä½“å‚è€ƒMSDNã€‚\nç¤ºä¾‹è¿›ç¨‹ TestA æºç \nint main(int argc, char** argv) &#123;\tHANDLE h = CreateEvent(NULL, TRUE, FALSE, NULL);\t// å¯åŠ¨å­è¿›ç¨‹TestB.exe\t//\tTCHAR cmd_buf[MAX_PATH];\tStringCchPrintf(cmd_buf, MAX_PATH, TEXT(&quot;D:\\\\TestB.exe&quot;), (long)h);\tSTARTUPINFO si = &#123; sizeof(si) &#125;;\tPROCESS_INFORMATION pi;\tBOOL ret = CreateProcess(NULL, cmd_buf, NULL, NULL, TRUE, 0, NULL, NULL, &amp;si, &amp;pi);\tassert(ret);\tassert(pi.hProcess);\tHANDLE duplicated_h = NULL;\tret = DuplicateHandle(GetCurrentProcess(), h, pi.hProcess, &amp;duplicated_h, 0, FALSE, DUPLICATE_SAME_ACCESS);\tWaitForSingleObject(pi.hProcess, INFINITE);\tCloseHandle(pi.hProcess);\tCloseHandle(pi.hThread);\tbool has_signal = WaitForSingleObject(h, 0) == WAIT_OBJECT_0;\tassert(has_signal == true);\treturn 0;&#125;\n\nå­è¿›ç¨‹ TestB æºç \nint main(int argc, char** argv)&#123;\tlong l = 0;\tprintf(&quot;Input Handle:&quot;);\tscanf(&quot;%ld&quot;, &amp;l);\tHANDLE h = (HANDLE)l;\tbool has_signal = WaitForSingleObject(h, 0) == WAIT_OBJECT_0;\tassert(has_signal == false);\tSetEvent(h);    return 0;&#125;\n\nåœ¨çˆ¶è¿›ç¨‹ TestA ä¸­åˆ›å»ºä¸€ä¸ªä¸å¯ç»§æ‰¿çš„äº‹ä»¶ -&gt; ç„¶åå¯åŠ¨å­è¿›ç¨‹ TestB -&gt; è°ƒç”¨ DuplicateHandle å¤åˆ¶å¥æŸ„é¡¹åˆ° TestB è¿›ç¨‹å¥æŸ„è¡¨ -&gt; å¹¶å‘ TestB è¾“å…¥å¥æŸ„å€¼ -&gt; TestB è®¿é—®è¯¥äº‹ä»¶å¥æŸ„ï¼Œå°†äº‹ä»¶ç½®ä¸ºæœ‰ä¿¡å·çŠ¶æ€ã€‚\nä½¿ç”¨å‘½åçš„å†…æ ¸å¯¹è±¡çš„æ–¹å¼å®ç°åŸç†è¿™ç§æ–¹å¼ä¸¥æ ¼çš„è¯´å·²ç»ä¸æ˜¯æ–‡ç« å¼€å¤´è¯´åˆ°çš„è·¨è¿›ç¨‹è®¿é—®å¥æŸ„äº†ï¼Œæœ‰ç‚¹ç±»ä¼¼è·¨è¿›ç¨‹ç›´æ¥è®¿é—®å†…æ ¸å¯¹è±¡äº†ã€‚è¯¥æ–¹å¼å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åœ¨è°ƒç”¨åˆ›å»ºå†…æ ¸å¯¹è±¡çš„Create***å‡½æ•°æ—¶ï¼Œé€šè¿‡pszNameå‚æ•°ä¸ºå†…æ ¸å¯¹è±¡å–ä¸€ä¸ªåå­—ã€‚å¦‚åˆ›å»ºäº‹ä»¶ Event çš„å‡½æ•°CreateEventï¼š\nHANDLE WINAPI CreateEvent(  LPSECURITY_ATTRIBUTES lpEventAttributes,  BOOL bManualReset,  BOOL bInitialState,  LPCTSTR lpName  // æŒ‡å®šåç§°);\n\nHANDLE h = CreateEvent(NULL, TRUE, FALSE, TEXT(&quot;TestA_Obj&quot;));\n\nè‹¥åœ¨å…¶ä»–è¿›ç¨‹ä¸­è¦è®¿é—®è¿™ä¸ªå†…æ ¸å¯¹è±¡ï¼Œåªéœ€è¦ä½¿ç”¨æ‰“å¼€å‡½æ•°Open***æ‰“å¼€è¯¥å†…æ ¸å¯¹è±¡ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿›ç¨‹çš„å¥æŸ„è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼Œå¹¶è¿”å›è¿™æ¡è®°å½•çš„ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯å¥æŸ„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ‰“å¼€å†…æ ¸å¯¹è±¡æ—¶éœ€è¦ç•™æ„è¿”å›å€¼å’ŒGetLastErrorå‡½æ•°çš„è¿”å›å€¼ã€‚ç”±äºå†…æ ¸å¯¹è±¡æ˜¯æœ‰è®¿é—®æƒé™çš„ï¼Œæœ‰æ—¶å€™è™½ç„¶è¿™ä¸ªåå­—çš„å†…æ ¸å¯¹è±¡å­˜åœ¨ï¼Œä½†è¯¥è¿›ç¨‹å´ä¸è§å¾—æœ‰æƒé™å¯ä»¥æ‰“å¼€å®ƒï¼Œè¿™ä¸ªæ—¶å€™GetLastErrorå‡½æ•°ä¼šè¿”å›å¤±è´¥çš„åŸå› ã€‚\nä»¥æ‰“å¼€äº‹ä»¶çš„å‡½æ•°OpenEventä¸ºä¾‹ï¼š\nHANDLE h = OpenEvent(READ_CONTROL, FALSE, TEXT(&quot;TestA_Obj&quot;));if (h == NULL) &#123;\tif (GetLastError() == ERROR_ACCESS_DENIED) &#123; // æ²¡æœ‰READ_CONTROLæƒé™\t&#125;&#125;\n\nå…¨å±€å‘½ä»¤ç©ºé—´ä¸åŒçš„ä¼šè¯ï¼ˆSessionï¼‰æœ‰ä¸åŒçš„å†…æ ¸å¯¹è±¡å‘½åç©ºé—´ï¼ˆå¦‚ windows æœåŠ¡ç¨‹åºä½äºSession 0ï¼Œè€Œæ™®é€šçš„ç”¨æˆ·è¿›ç¨‹ä½äºSession 1ï¼‰ï¼Œè¦é€šè¿‡åç§°è®¿é—®å…¶ä»–ä¼šè¯ä¸­çš„å†…æ ¸å¯¹è±¡ï¼Œéœ€è¦åœ¨åç§°å‰é¢åŠ ä¸ŠSession\\&lt;å½“å‰ä¼šè¯ID&gt;ã€‚Windows æä¾›äº†ä¸€ä¸ªå…¨å±€çš„å†…æ ¸å¯¹è±¡å‘½åç©ºé—´ï¼Œå¤„äºä»»ä½•ä¼šè¯ä¸­çš„è¿›ç¨‹éƒ½å¯ä»¥è®¿é—®è¯¥å‘½åç©ºé—´ï¼Œå°†å†…æ ¸å¯¹è±¡æ”¾å…¥å…¨å±€å‘½ä»¤ç©ºé—´çš„æ–¹å¼å¾ˆç®€å•ï¼šåªéœ€è¦åœ¨å†…æ ¸å¯¹è±¡åç§°å‰åŠ å…¥Global\\å³å¯ã€‚\nå¦‚ï¼š\nHANDLE h = CreateEvent(NULL, TRUE, FALSE, TEXT(&quot;Global\\\\TestA_Obj&quot;));\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowsæ³¨å†ŒURLåè®®","url":"/post/1343547595.html","content":"å½“ç”µè„‘å®‰è£…å®Œ Steam åï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—®steam://run/123ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æç¤ºæ‰“å¼€ Steam ç¨‹åºã€‚ç±»ä¼¼çš„åŠŸèƒ½åœ¨è¿…é›·ã€QQ ç­‰äº§å“ä¸Šä¹Ÿéƒ½æœ‰ä½¿ç”¨ï¼Œæœ¬æ–‡è®²è¿°å¦‚ä½•å®ç°è¯¥åŠŸèƒ½ã€‚\n\n\n\nå®ç°ä¸Šè¿°åŠŸèƒ½åªéœ€è¦åœ¨æ³¨å†Œè¡¨HKEY_CLASSES_ROOTé¡¹ä¸‹æ·»åŠ å¯¹åº”çš„å­é¡¹å³å¯ï¼Œä»¥æ³¨å†Œteståè®®ä¸ºä¾‹ï¼š\nWindows Registry Editor Version 5.00[HKEY_CLASSES_ROOT\\test]@=&quot;URL:test protocol&quot;&quot;URL Protocol&quot;=&quot;&quot;[HKEY_CLASSES_ROOT\\test\\DefaultIcon]@=&quot;mytest.exe&quot;[HKEY_CLASSES_ROOT\\test\\Shell][HKEY_CLASSES_ROOT\\test\\Shell\\Open][HKEY_CLASSES_ROOT\\test\\Shell\\Open\\Command]@=&quot;\\&quot;D:\\\\sourcecode\\\\mytest.exe\\&quot; -- \\&quot;%1\\&quot;&quot;\n\nä¿®æ”¹å®Œä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥test://start/123å°±å¯ä»¥æ‰“å¼€D:\\\\sourcecode\\\\mytest.exeï¼Œå¹¶ä¸”ä¼ é€’ç»™mytest.exeçš„å‘½ä»¤è¡Œå‚æ•°ä¸ºtest://start/123ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowså¹³å°ç”ŸæˆDumpæ–‡ä»¶","url":"/post/2648186181.html","content":"è½¬å‚¨æ–‡ä»¶ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ dump æ–‡ä»¶ï¼Œå¯ä»¥æŠŠè½¬å‚¨æ–‡ä»¶çœ‹æˆè½¯ä»¶çš„æŸä¸ªæ—¶åˆ»çš„ä¸€ä¸ªå¿«ç…§ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨è½¯ä»¶å‡ºç°é—®é¢˜æ—¶æ‰‹åŠ¨ç”Ÿæˆæˆ–è€…ç¨‹åºè‡ªåŠ¨ç”Ÿæˆè½¬å‚¨æ–‡ä»¶ã€‚\næœ¬æ–‡ä»‹ç»å‡ ç§å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·ç”Ÿæˆè½¬å‚¨æ–‡ä»¶çš„æ–¹æ³•ï¼Œå¹¶åœ¨æœ€åé™„ä¸Šä½¿ç”¨ä»£ç ç”Ÿæˆè½¬å‚¨æ–‡ä»¶çš„æ–¹æ³•ã€‚\n\n\nä»»åŠ¡ç®¡ç†å™¨ä»»åŠ¡ç®¡ç†å™¨å¯ä»¥è¯´æ˜¯æœ€æ˜“è·å–çš„ç³»ç»Ÿå·¥å…·ï¼ŒåŒæ—¶å®ƒå…·æœ‰ç”Ÿæˆè½¬å‚¨æ–‡ä»¶çš„åŠŸèƒ½ã€‚ä½†è¦æ³¨æ„çš„æ˜¯åœ¨ 64 ä½æ“ä½œç³»ç»Ÿä¸Šé¢ï¼Œé»˜è®¤å¯åŠ¨çš„æ˜¯ 64 ä½çš„ä»»åŠ¡ç®¡ç†å™¨ã€‚ä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨ç”Ÿæˆè½¬å‚¨æ–‡ä»¶éœ€è¦éµå¾ªä¸€ä¸ªåŸåˆ™ï¼šç”¨ 32 ä½ä»»åŠ¡ç®¡ç†å™¨ç»™ 32 ä½è¿›ç¨‹ï¼ˆæ— è®ºè¯¥è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ 32 ä½è¿˜æ˜¯ 64 ä½ç³»ç»Ÿä¸Šé¢ï¼‰ç”Ÿæˆè½¬å‚¨æ–‡ä»¶ï¼Œç”¨ 64 ä½ä»»åŠ¡ç®¡ç†å™¨ç»™ 64 ä½è¿›ç¨‹ç”Ÿæˆè½¬å‚¨æ–‡ä»¶ã€‚\nåœ¨ 64 ä½ç³»ç»Ÿä¸Šï¼Œ32 ä½çš„ä»»åŠ¡ç®¡ç†å™¨ä½äºC:\\Windows\\SysWOW64\\taskmgr.exeã€‚\nç”Ÿæˆæ–¹æ³•ï¼šå³é”®è¿›ç¨‹ â€“&gt; åˆ›å»ºè½¬å‚¨æ–‡ä»¶â€“&gt;å¼¹å‡ºå¯¹è¯æ¡†æç¤ºç”ŸæˆæˆåŠŸï¼Œä»¥åŠ dmp æ–‡ä»¶ä½ç½®ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ç±»ä¼¼çš„å·¥å…·è¿˜æœ‰ï¼šProcess Explorerï¼ŒPCHunter ç­‰ã€‚\næ³¨å†Œè¡¨å¯ä»¥é€šè¿‡åœ¨æ³¨å†Œè¡¨ä¸­è¿›è¡Œé…ç½®ï¼Œè®©æ“ä½œç³»ç»Ÿåœ¨ç¨‹åºå´©æºƒæ—¶è‡ªåŠ¨ç”Ÿæˆ dmp æ–‡ä»¶ï¼Œå¹¶æ”¾åˆ°æŒ‡å®šä½ç½®ã€‚\nåœ¨æ³¨å†Œè¡¨é¡¹ HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error Reporting\\LocalDumps ä¸‹é¢æ ¹æ®è¿›ç¨‹åï¼ˆå«.exeï¼‰æ–°å»ºå­é¡¹ï¼Œå¹¶é…ç½®å¦‚ä¸‹å€¼ï¼š\n\nåç§°ï¼šDumpCountï¼Œç±»å‹ï¼šREG_DWORDï¼Œæœ€å¤§ä¿ç•™ Dump ä¸ªæ•°ï¼Œé»˜è®¤ä¸º 10.\nåç§°ï¼šDumpTypeï¼Œç±»å‹ï¼šREG_DWORDï¼ŒDump ç±»å‹(1-Mini dump, 2-Full dump)ï¼Œé»˜è®¤ä¸º 1.\nåç§°ï¼šDumpFolderï¼Œç±»å‹ï¼šREG_EXPAND_SZï¼ŒDump æ–‡ä»¶ä¿å­˜çš„ä½ç½®ã€‚\n\n\nWindbgç”Ÿæˆæ–¹æ³•ï¼šFile èœå•â€“&gt;Attach to Processâ€“&gt;è¾“å…¥å‘½ä»¤.dump /ma /u d:\\test.dmp&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æç¤ºæˆåŠŸä¹‹åï¼Œå¯ä»¥åœ¨ D ç›˜çœ‹åˆ°ç”Ÿæˆ dmp æ–‡ä»¶åˆ° test_0bf0_2017-08-13_23-46-37-244_11cc.dmp æ–‡ä»¶ã€‚\n0bf0_2017-08-13_23-46-37-244_11cc æ˜¯&#x2F;u å‚æ•°é™„åŠ ä¸Šå»çš„ï¼Œæ„æ€æ˜¯ 2017 å¹´ 08 æœˆ 13 æ—¥ 23 æ—¶ 46 åˆ† 37 ç§’ 244 æ¯«ç§’ï¼Œè¿›ç¨‹ PID ä½ 11ccã€‚\n.dump å‘½ä»¤å‚æ•°æ¯”è¾ƒå¤šï¼Œå¸¸ç”¨çš„ç»„åˆå°±æ˜¯/maï¼Œ&#x2F;m è¡¨ç¤ºç”Ÿæˆ minidumpï¼Œ&#x2F;a è¡¨ç¤º dmp åŒ…å«æ‰€æœ‰ä¿¡æ¯ï¼Œ&#x2F;u å‚æ•°å°±æ˜¯ä¸Šé¢è¯´çš„é™„åŠ æ—¶é—´å’Œ PID ä¿¡æ¯åˆ°æ–‡ä»¶åã€‚\nWindbg -IWindbg -IÂ  å¯ä»¥å°† Windbg è®¾ç½®ä¸ºåŠæ—¶è°ƒè¯•å™¨ï¼ˆå¼€å¯äº† UAC çš„ç³»ç»Ÿä¸Šé¢ï¼Œéœ€è¦ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ JIT è°ƒè¯•å™¨ã€‚è®¾ç½®æˆåŠŸä¹‹åï¼Œå¦‚é‡åˆ°ç¨‹åºå´©æºƒï¼ŒWindbg ä¼šè‡ªåŠ¨è¿è¡Œå¹¶é™„åŠ åˆ°å´©æºƒè¿›ç¨‹ã€‚\nè®¾ç½®æˆåŠŸä¹‹åä¼šå¼¹å‡ºå¯¹è¯æ¡†æç¤ºè®¾ç½®æˆåŠŸã€‚å¦‚æœä¸æƒ³å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå¯ä»¥åŠ ä¸Š Sï¼ˆslient é¦–å­—æ¯ï¼‰Windbg -IS.\nä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨é¡¹ AeDebug æ¥å®ç°å’Œ windbg -I åŒæ ·çš„åŠŸèƒ½ã€‚æ ¹æ® windbg ä½æ•°ï¼ˆ32&#x2F;64ï¼‰å’Œç³»ç»Ÿçš„ä½æ•°ï¼ˆ32&#x2F;64ï¼‰çš„ä¸åŒï¼Œä¿®æ”¹çš„æ³¨å†Œè¡¨é¡¹çš„ä½ç½®ä¹Ÿä¸åŒï¼š\n\n32 ä½ windbgâ€“32 ä½ç³»ç»Ÿï¼šHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\AeDebug\n32 ä½ windbgâ€“64 ä½ç³»ç»Ÿï¼šHKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\Windows NT\\CurrentVersion\\AeDebug\n64 ä½ windbgâ€“64 ä½ç³»ç»Ÿï¼šHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\AeDebug\n\nAeDebug é¡¹ä¸‹é¢æœ‰ 2 ä¸ªå€¼ï¼šåç§°ï¼šAutoï¼Œç±»å‹ï¼šREG_SZï¼Œ0 è¡¨ç¤ºå‡ºç°å´©æºƒå¼¹å‡ºå¯¹è¯æ¡†ï¼Œè®©ç”¨æˆ·é€‰æ‹©å…³é—­ç¨‹åºè¿˜æ˜¯è°ƒè¯•ç¨‹åºï¼›1 è¡¨ç¤ºè‡ªåŠ¨å¼¹å‡ºè®¾ç½®è°ƒè¯•å™¨ã€‚åç§°ï¼šDebuggerï¼Œç±»å‹ï¼šREG_SZï¼Œè°ƒè¯•å™¨å€¼ã€‚é»˜è®¤ä¸ºâ€C:\\WINDOWS\\system32\\vsjitdebugger.exeâ€ -p %ld -e %ldï¼Œè®¾ç½®ä¸º windbg éœ€æ›´æ”¹ä¸ºâ€C:\\Debuggers\\WinDbg\\x86\\windbg.exeâ€ -p %ld -e %ld -g\nçœ‹èµ·æ¥æŒºå¤æ‚ï¼Œå…¶å®æŒºå¥½ç†è§£çš„ã€‚\nAdplusadplus å·¥å…·ä½äº windbg å®‰è£…ç›®å½•ï¼Œæœ€æ—©å« adplus.vbsï¼Œä»¥ VBScript è„šæœ¬æä¾›ï¼Œæœ€æ–°ç‰ˆæ”¹æˆäº† adplus.exeã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nä¸ä»…å¯ä»¥åœ¨ç¨‹åºå´©æºƒæ—¶æ‰‹åŠ¨è¿è¡Œ adplus.exe æ¥ç”Ÿæˆ dmp æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨ç¨‹åºå´©æºƒä¹‹å‰å°±å…ˆè¿è¡Œ adplus.exeï¼Œå½“ç¨‹åºå´©æºƒæ—¶å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆ dmp æ–‡ä»¶ï¼›ç”šè‡³å¯ä»¥åœ¨ç¨‹åºæ²¡æœ‰è¿è¡Œä¹‹å‰å°±å…ˆè¿è¡Œ adplusï¼Œå½“ç¨‹åºå´©æºƒæ—¶å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆ dmp æ–‡ä»¶ã€‚\nå¦‚ï¼šadplus -pn powerpnt.exe -pn wincmd32.exe -hang -o c:\\test\nAdplus ç”¨æ³•ï¼š\nADPlus &lt;RunMode&gt; -o &lt;OutputDirectory&gt; [Options]RunModeï¼š-hangæˆ–-crashÂ Â Â Â Â -hangÂ é™„åŠ åˆ°è¿›ç¨‹ï¼Œç”Ÿæˆdmpï¼Œç„¶åè§£é™¤é™„åŠ (detach)ã€‚å¤šç”¨äºç¨‹åºå¡æ­»çš„æƒ…å†µä¸‹ã€‚Â Â Â Â Â -crashÂ é™„åŠ åˆ°è¿›ç¨‹ï¼Œç›´åˆ°ç¨‹åºå´©æºƒæˆ–è€…å…¶ä»–äº‹ä»¶å‘ç”Ÿï¼Œç”Ÿæˆdmpæ–‡ä»¶ï¼Œç„¶åè§£é™¤é™„åŠ ã€‚\n\nå¸¸ç”¨å‚æ•°ï¼š\n\n-o ç›®å½•æŒ‡å®šç”Ÿæˆæ–‡ä»¶å­˜å‚¨ç›®å½•ã€‚\n\n-p è¿›ç¨‹ IDæŒ‡å®šè¿›ç¨‹ IDï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šæ¬¡-p æ¥æŒ‡å®šå¤šä¸ªè¿›ç¨‹ã€‚\n\n-pn è¿›ç¨‹åæŒ‡å®šè¿›ç¨‹åï¼Œæ”¯æŒé€šé…ç¬¦ï¼Œä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šæ¬¡-pn æ¥æŒ‡å®šå¤šä¸ªè¿›ç¨‹ï¼Œä½†è¿›ç¨‹åå¿…é¡»å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™å¤±è´¥ã€‚\n\n-po è¿›ç¨‹åå’Œ-pn ç±»ä¼¼ï¼Œä½†-po ä¸è¦æ±‚è¿›ç¨‹åå¿…é¡»å­˜åœ¨ã€‚å¯ä»¥åœ¨è¿›ç¨‹å¯åŠ¨ä¹‹å‰å°±å…ˆå¯åŠ¨ Adplus.\n\n-pmn è¿›ç¨‹åpmn ä¸º Process Monitor ç¼©å†™ã€‚é¡¾åæ€ä¹‰ï¼Œå¯ä»¥ç›‘è§†è¿›ç¨‹åˆ—è¡¨ï¼Œä¸€æ—¦æŒ‡å®šè¿›ç¨‹è¿è¡Œï¼Œåˆ™é™„åŠ ä¸Šå»ã€‚åªé€‚ç”¨äº-crashÂ  æ¨¡å¼ã€‚\n\n\nä½¿ç”¨ä»£ç ç”Ÿæˆä½¿ç”¨ä»£ç ç”Ÿæˆ dump æ–‡ä»¶çš„åŸç†å¤§è‡´æ˜¯ï¼š\n\næ•è·å¼‚å¸¸ï¼Œå¦‚SetUnhandledExceptionFilterã€__try...__exceptç­‰ã€‚\nä½¿ç”¨ MiniDumpWriteDump å†™å…¥ dump åˆ°æ–‡ä»¶ã€‚\n\nä¸ºäº†ä¾¿äºä½¿ç”¨ï¼Œæˆ‘å°è£…äº†ä¸€ä¸ªæ•è·å¼‚å¸¸å¹¶å†™å…¥ dump çš„è¾…åŠ©ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n// EasyDump.h#pragma once#include &lt;windows.h&gt;#include &lt;tchar.h&gt;#include &lt;strsafe.h&gt;namespace cpp4j &#123;\ttypedef struct _EXCEPTION_POINTERS EXCEPTION_POINTERS, *PEXCEPTION_POINTERS;\tint __cdecl RecordExceptionInfo(PEXCEPTION_POINTERS pExceptPtrs, const TCHAR *szDumpNamePrefix);\tTCHAR *lstrrchr(LPCTSTR string, int ch);\tvoid DumpMiniDump(HANDLE hFile, PEXCEPTION_POINTERS excpInfo);&#125;#define WINMAIN_BEGIN(szDumpNamePrefix) \\    int __96A9695E_RUN_WINMAIN_FUNC(HINSTANCE hInstance, LPTSTR lpCmdLine);\\    LONG WINAPI __96A9695E_UnhandledExceptionHandler( _EXCEPTION_POINTERS *pExceptionInfo ) \\    &#123; \\        OutputDebugString(TEXT(&quot;Create a dump file sine an exception occurred in sub-thread.\\n&quot;)); \\        int iRet = cpp4j::RecordExceptionInfo(pExceptionInfo, szDumpNamePrefix); \\        return iRet; \\    &#125; \\    int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow) \\    &#123; \\        UNREFERENCED_PARAMETER(hPrevInstance); \\        UNREFERENCED_PARAMETER(nCmdShow); \\        ::SetUnhandledExceptionFilter( __96A9695E_UnhandledExceptionHandler );\\        int ret = 0;\\        __try\\        &#123;\\            ret = __96A9695E_RUN_WINMAIN_FUNC(hInstance, lpCmdLine);\\        &#125;\\        __except(cpp4j::RecordExceptionInfo(GetExceptionInformation(), szDumpNamePrefix))\\        &#123;\\            OutputDebugString(TEXT(&quot;Create a dump file sine an exception occurred in main-thread.\\n&quot;)); \\        &#125;\\        return ret;\\    &#125;\\    int __96A9695E_RUN_WINMAIN_FUNC(HINSTANCE hInstance, LPTSTR lpCmdLine) \\    &#123;#define WINMAIN_END &#125;#define MAIN_BEGIN(szDumpName) \\    int __96A9695E_RUN_MAIN_FUNC(int argc, _TCHAR* argv[]);\\    LONG WINAPI __96A9695E_UnhandledExceptionHandler( _EXCEPTION_POINTERS *pExceptionInfo ) \\    &#123; \\        OutputDebugString(TEXT(&quot;Create a dump file since an exception occurred in sub-thread.\\n&quot;)); \\        int iRet = cpp4j::RecordExceptionInfo(pExceptionInfo, szDumpName); \\        return iRet; \\    &#125; \\    int _tmain(int argc, _TCHAR* argv[])\\    &#123; \\        ::SetUnhandledExceptionFilter( __96A9695E_UnhandledExceptionHandler );\\        int ret = 0;\\        __try\\        &#123;\\            ret = __96A9695E_RUN_MAIN_FUNC(argc, argv);\\        &#125;\\        __except(cpp4j::RecordExceptionInfo(GetExceptionInformation(), szDumpName))\\        &#123;\\            OutputDebugString(TEXT(&quot;Create a dump file since an exception occurred in main-thread.\\n&quot;)); \\        &#125;\\        return ret;\\    &#125;\\    int __96A9695E_RUN_MAIN_FUNC(int argc, _TCHAR* argv[]) \\    &#123;#define MAIN_END &#125;\n\n// EasyDump.cpp#include &quot;EasyDump.h&quot;#include &lt;DbgHelp.h&gt;#pragma comment(lib, &quot;Dbghelp.lib&quot;)namespace cpp4j &#123;\tTCHAR *lstrrchr(LPCTSTR string, int ch) &#123;\t\tTCHAR *start = (TCHAR *)string;\t\twhile (*string++)\t\t\t;\t\twhile (--string != start &amp;&amp; *string != (TCHAR)ch)\t\t\t;\t\tif (*string == (TCHAR)ch)\t\t\treturn (TCHAR *)string;\t\treturn NULL;\t&#125;\tinline void DumpMiniDump(HANDLE hFile, PEXCEPTION_POINTERS excpInfo) &#123;\t\tif (!excpInfo) &#123;\t\t\tstatic int iTimes = 0;\t\t\tif (iTimes++ &gt; 1)\t\t\t\treturn;\t\t\t__try &#123;\t\t\t\tRaiseException(EXCEPTION_BREAKPOINT, 0, 0, NULL);\t\t\t&#125;\t\t\t__except (DumpMiniDump(hFile, GetExceptionInformation()),\t\t\t\tEXCEPTION_CONTINUE_EXECUTION) &#123;\t\t\t&#125;\t\t&#125;\t\telse &#123;\t\t\tMINIDUMP_EXCEPTION_INFORMATION eInfo;\t\t\teInfo.ThreadId = GetCurrentThreadId();\t\t\teInfo.ExceptionPointers = excpInfo;\t\t\teInfo.ClientPointers = FALSE;\t\t\tMiniDumpWriteDump(\t\t\t\tGetCurrentProcess(),\t\t\t\tGetCurrentProcessId(),\t\t\t\thFile,\t\t\t\tMiniDumpNormal,\t\t\t\texcpInfo ? &amp;eInfo : NULL,\t\t\t\tNULL,\t\t\t\tNULL);\t\t&#125;\t&#125;\tint __cdecl RecordExceptionInfo(PEXCEPTION_POINTERS pExceptPtrs, const TCHAR *szDumpNamePrefix) &#123;\t\tstatic bool bFirstTime = true;\t\tif (!bFirstTime)\t\t\treturn EXCEPTION_CONTINUE_SEARCH;\t\tbFirstTime = false;\t\t// Dmpæ–‡ä»¶å‘½åï¼šå‰ç¼€_å¹´æœˆæ—¥.æ—¶.åˆ†.ç§’.æ¯«ç§’.dmp\t\t//\t\tTCHAR szLocalTime[50] = &#123; 0 &#125;;\t\tSYSTEMTIME st;\t\tGetLocalTime(&amp;st);\t\tStringCchPrintf(szLocalTime, 50, TEXT(&quot;%04d%02d%02d.%02d.%02d.%02d.%04d&quot;), st.wYear, st.wMonth, st.wDay, st.wHour, st.wMinute, st.wSecond, st.wMilliseconds);\t\tTCHAR szExeDir[MAX_PATH + 1] = &#123; 0 &#125;;\t\tGetModuleFileName(NULL, szExeDir, MAX_PATH);\t\tif (TCHAR *p = lstrrchr(szExeDir, TEXT(&#x27;\\\\&#x27;))) &#123;\t\t\t*(p + 1) = 0;\t\t&#125;\t\tTCHAR szDumpFileName[MAX_PATH + 1] = &#123; 0 &#125;;\t\t_stprintf_s(szDumpFileName, MAX_PATH, TEXT(&quot;%s%s_%s.dmp&quot;), szExeDir, szDumpNamePrefix, szLocalTime);\t\tHANDLE hMiniDumpFile = CreateFile(\t\t\tszDumpFileName,\t\t\tGENERIC_WRITE,\t\t\t0,\t\t\tNULL,\t\t\tCREATE_ALWAYS,\t\t\tFILE_ATTRIBUTE_NORMAL | FILE_FLAG_WRITE_THROUGH,\t\t\tNULL);\t\tif (hMiniDumpFile != INVALID_HANDLE_VALUE) &#123;\t\t\tDumpMiniDump(hMiniDumpFile, pExceptPtrs);\t\t\tCloseHandle(hMiniDumpFile);\t\t\thMiniDumpFile = NULL;\t\t&#125;\t\treturn EXCEPTION_EXECUTE_HANDLER;\t&#125;&#125;\n\nMAIN_BEGINå’ŒWINMAIN_BEGINä¸­çš„å‚æ•°ä¸ºç”Ÿæˆçš„ dump æ–‡ä»¶çš„å‰ç¼€ï¼Œdump æ–‡ä»¶å‘½åæ–¹å¼: å‰ç¼€*å¹´æœˆæ—¥.æ—¶.åˆ†.ç§’.æ¯«ç§’.dmpã€‚\nä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨MAIN_BEGINæ›¿æ¢mainï¼ŒWINMAIN_BEGINæ›¿æ¢WinMainå³å¯ï¼š\n#include &quot;EasyDump.h&quot;MAIN_BEGIN(TEXT(&quot;Test&quot;))int i = 0;int *p = &amp;i;p = NULL;*p = 5;return 0;MAIN_END\n\nä¸Šé¢çš„ä»£ç ä¼šåœ¨ç¨‹åºçš„å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªåä¸º Test_20171101.14.49.57.0264.dmp çš„ dump æ–‡ä»¶ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windows APIçš„è¿”å›å€¼ç±»å‹","url":"/post/2510508225.html","content":"åœ¨Windowsç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸æ¥è§¦åˆ°çš„Windows APIè¿”å›å€¼ç±»å‹æœ‰ï¼š\n\nBOOL\nHRESULT\nLSTATUS\n\n\n\né”™è¯¯ç BOOLç±»å‹é€šå¸¸æ˜¯0è¡¨ç¤ºå¤±è´¥ï¼Œé0è¡¨ç¤ºæˆåŠŸï¼Œåœ¨BOOLç±»å‹è¿”å›å¤±è´¥æ—¶ï¼Œé€šå¸¸è¿˜å¯ä»¥é€šè¿‡GetLastErrorå‡½æ•°è·å–é”™è¯¯ç ã€‚é”™è¯¯ç ä¸è°ƒç”¨çº¿ç¨‹ç›¸å…³è”ï¼Œæ¯ä¸ªçº¿ç¨‹çš„é”™è¯¯ç æ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨è°ƒç”¨å®ŒWindows APIåï¼Œå¦‚ä¸‹è·å–é”™è¯¯ç ï¼Œåˆ™éœ€è¦ç«‹å³è·å–ï¼Œå¦åˆ™å¯èƒ½ä¼šè¢«åé¢è°ƒç”¨APIæ‰€è®¾ç½®çš„é”™è¯¯ç æ‰€è¦†ç›–ã€‚\nåº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥é€šè¿‡SetLastErrorå‡½æ•°æ¥è®¾ç½®é”™è¯¯ç ã€‚\nWindows APIé€šå¸¸åœ¨æ²¡æœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå°†é”™è¯¯ç è®¾ç½®ä¸º0ï¼Œæœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼Œè§†å…·ä½“é”™è¯¯è€Œè®¾ç½®ä¸ºå…¶ä»–é0å€¼ã€‚\n\nå¾®è½¯å®˜æ–¹æ–‡æ¡£ï¼šDebug system error codes\n\nå¸¸è§çš„é”™è¯¯ç ERROR_SUCCESS = 0  // æˆåŠŸERROR_OUTOFMEMORY  // å†…å­˜ä¸è¶³...\n\nHRESULTHRESULTç»“æ„HRESULTæ˜¯COMè¿”å›çš„é”™è¯¯ç ï¼Œæ€»å…±32ä½ï¼Œå®ƒç”±ä¸‰ä¸ªåŸºæœ¬éƒ¨åˆ†ç»„æˆï¼š\n\né«˜1ä½è¡¨ç¤ºæˆåŠŸæˆ–å¤±è´¥ï¼ˆ0è¡¨ç¤ºæˆåŠŸï¼Œ1è¡¨ç¤ºå¤±è´¥ï¼‰ã€‚\nä¸­é—´11ä½ç¼–ç æŒ‡ç¤ºé”™è¯¯æ¥æºçš„è®¾æ–½&#x2F;è®¾å¤‡ã€‚\nä½16ä½ç¼–ç é”™è¯¯ç¼–å·ã€‚\n\n0~32ä½çš„ä½œç”¨åˆ†åˆ«å¦‚ä¸‹ï¼š\nS - ä¸¥é‡åº¦ - è¡¨ç¤ºæˆåŠŸ/å¤±è´¥    0 - æˆåŠŸ    1 - å¤±è´¥ (COERROR)R - reserved portion of the facility code, corresponds to NT&#x27;s second severity bit.C - reserved portion of the facility code, corresponds to NT&#x27;s C field.N - reserved portion of the facility code. Used to indicate a mapped NT status value.r - reserved portion of the facility code. Reserved for internal        use. Used to indicate HRESULT values that are not status        values, but are instead message ids for display strings.Facility - è®¾å¤‡/è®¾æ–½ç Code - è®¾å¤‡/è®¾æ–½çš„çŠ¶æ€ç \n\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸éœ€è¦å…³å¿ƒå…¶æ¯ä¸€ä½çš„å…·ä½“ä½œç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨æ›´å¤šçš„æ˜¯ä¸‹é¢çš„å‡ ä¸ªå®ï¼š\n\nä½¿ç”¨SUCCEEDED(hr)å®åˆ¤æ–­æ˜¯å¦æˆåŠŸï¼ˆå³hr&gt;&#x3D; 0ï¼‰ï¼ŒFAILED(hr)åˆ¤æ–­æ˜¯å¦å¤±è´¥(å³hr&lt; 0)ã€‚\nä½¿ç”¨HRESULT_CODE(hr)å®è·å–é”™è¯¯ç ã€‚\nä½¿ç”¨HRESULT_FACILITY(hr)å®è·å–è®¾å¤‡ç ã€‚\n\n\n4å­—èŠ‚ï¼ˆ32ä½ï¼‰æ•´æ•°èƒ½è¡¨ç¤ºçš„æœ€å¤§æ­£æ•´æ•°ä¸º7FFF FFFFFï¼ˆæœ€é«˜ä½ä¸º0ï¼‰ï¼Œå½“æœ€é«˜ä½ä¸º1æ—¶ï¼Œåˆ™ä¸ºè´Ÿæ•°ã€‚æ‰€ä»¥HRESULTèƒ½é€šè¿‡æ˜¯å¦ä¸ºè´Ÿæ•°æ¥åˆ¤æ–­æˆåŠŸä¸å¦ã€‚\n\nå¸¸è§çš„HRESULTå€¼S_OK     // æˆåŠŸS_FALSE  // å¤±è´¥E_FAIL   // å¤±è´¥\n\nAPIé”™è¯¯ç ä¸HRESULTæˆ‘ä»¬å¯ä»¥ä½¿ç”¨HRESULT_FROM_WIN32å®å°†ä¸Šä¸€èŠ‚ä»‹ç»çš„â€œWindows APIçš„é”™è¯¯ç â€è½¬æˆHRESULTã€‚\nLSTATUSåœ¨Windows APIä¸­å¯¹LSTATUSçš„å®šä¹‰æ¯”è¾ƒæ¨¡ç³Šï¼Œæ¯”å¦‚æ³¨å†Œè¡¨APIï¼ˆå¦‚RegCreateExç­‰ï¼‰è¿”å›çš„LSTATUSå®é™…å°±æ˜¯ç¬¬ä¸€èŠ‚ä»‹ç»çš„Windowsé”™è¯¯ç ã€‚\næ‰€ä»¥å½“é‡åˆ°è¿”å›LSTATUSç±»å‹çš„APIæ—¶ï¼Œéœ€è¦å‚è€ƒAPIçš„æ–‡æ¡£è¯´æ˜ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowsç¨‹åºå¦‚ä½•åˆ é™¤è‡ªèº«","url":"/post/3102005562.html","content":"æœ¬æ–‡ä»‹ç»å‡ ç§å®ç°åœ¨ç¨‹åºé€€å‡ºåï¼Œä»ç£ç›˜åˆ é™¤è‡ªèº« exe æ–‡ä»¶çš„æ–¹å¼ã€‚è¯¥æŠ€æœ¯é€šå¸¸åº”ç”¨äºå®‰è£…åŒ…å¸è½½ç¨‹åºä¸­ã€‚\n\n\nä¸€ã€å€Ÿç”¨ choice å‘½ä»¤å®ç°Windows æä¾›äº† choice å‘½ä»¤ï¼Œå…è®¸ç”¨æˆ·ä»é€‰æ‹©åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªé¡¹ç›®å¹¶è¿”å›æ‰€é€‰é¡¹ç›®çš„ç´¢å¼•ã€‚\nC:\\Users\\akx&gt;choice /?CHOICE [/C choices] [/N] [/CS] [/T timeout /D choice] [/M text]æè¿°:    è¯¥å·¥å…·å…è®¸ç”¨æˆ·ä»é€‰æ‹©åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªé¡¹ç›®å¹¶è¿”å›æ‰€é€‰é¡¹ç›®çš„ç´¢å¼•ã€‚å‚æ•°åˆ—è¡¨:   /C    choices       æŒ‡å®šè¦åˆ›å»ºçš„é€‰é¡¹åˆ—è¡¨ã€‚é»˜è®¤åˆ—è¡¨æ˜¯ &quot;YN&quot;ã€‚   /N                  åœ¨æç¤ºç¬¦ä¸­éšè—é€‰é¡¹åˆ—è¡¨ã€‚æç¤ºå‰é¢çš„æ¶ˆæ¯å¾—åˆ°æ˜¾ç¤ºï¼Œ                       é€‰é¡¹ä¾æ—§å¤„äºå¯ç”¨çŠ¶æ€ã€‚   /CS                 å…è®¸é€‰æ‹©åˆ†å¤§å°å†™çš„é€‰é¡¹ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå·¥å…·                       æ˜¯ä¸åˆ†å¤§å°å†™çš„ã€‚   /T    timeout       åšå‡ºé»˜è®¤é€‰æ‹©ä¹‹å‰ï¼Œæš‚åœçš„ç§’æ•°ã€‚å¯æ¥å—çš„å€¼æ˜¯ä» 0                       åˆ° 9999ã€‚å¦‚æœæŒ‡å®šäº† 0ï¼Œå°±ä¸ä¼šæœ‰æš‚åœï¼Œé»˜è®¤é€‰é¡¹                       ä¼šå¾—åˆ°é€‰æ‹©ã€‚   /D    choice        åœ¨ nnnn ç§’ä¹‹åæŒ‡å®šé»˜è®¤é€‰é¡¹ã€‚å­—ç¬¦å¿…é¡»åœ¨ç”¨ /C é€‰                       é¡¹æŒ‡å®šçš„ä¸€ç»„é€‰æ‹©ä¸­; åŒæ—¶ï¼Œå¿…é¡»ç”¨ /T æŒ‡å®š nnnnã€‚   /M    text          æŒ‡å®šæç¤ºä¹‹å‰è¦æ˜¾ç¤ºçš„æ¶ˆæ¯ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå·¥å…·åª                       æ˜¾ç¤ºæç¤ºã€‚ç¤ºä¾‹:   CHOICE /?   CHOICE /C YNC /M &quot;ç¡®è®¤è¯·æŒ‰ Yï¼Œå¦è¯·æŒ‰ Nï¼Œæˆ–è€…å–æ¶ˆè¯·æŒ‰ Cã€‚&quot;   CHOICE /T 10 /C ync /CS /D y   CHOICE /C ab /M &quot;é€‰é¡¹ 1 è¯·é€‰æ‹© aï¼Œé€‰é¡¹ 2 è¯·é€‰æ‹© bã€‚&quot;   CHOICE /C ab /N /M &quot;é€‰é¡¹ 1 è¯·é€‰æ‹© aï¼Œé€‰é¡¹ 2 è¯·é€‰æ‹© bã€‚&quot;\n\nå®ç°æ–¹å¼å¦‚ä¸‹ï¼š\nbool DeleteSelf &#123;    wchar_t szSystemDir[MAX_PATH] = &#123;0&#125;;    if (GetSystemDirectoryW(szSystemDir, MAX_PATH) &gt; 0) &#123;        PathAddBackslashW(szSystemDir);    &#125;    wchar_t szFullCmd[MAX_PATH] = &#123;0&#125;;    StringCchPrintfW(szFullCmd, MAX_PATH, L&quot;%scmd.exe /C choice /C Y /N /D Y /T 4 &amp; rmdir \\&quot;%s\\&quot; /Q&quot;,                    szSystemDir, szPath);    STARTUPINFOW si = &#123;sizeof(STARTUPINFOW)&#125;;    PROCESS_INFORMATION pi;    if (CreateProcessW(NULL, szFullCmd, NULL, NULL, FALSE, CREATE_NO_WINDOW, NULL, szSystemDir, &amp;si,                        &amp;pi)) &#123;        if (pi.hThread)            CloseHandle(pi.hThread);        if (pi.hProcess)            CloseHandle(pi.hProcess);        return true;    &#125;    return false;&#125;int main() &#123;   bool ret = DeleteSelf();   return 0;&#125;\n\näºŒã€ä½¿ç”¨è®¡åˆ’ä»»åŠ¡å®ç°åœ¨ç¨‹åºé€€å‡ºå‰æ·»åŠ  Windows è®¡åˆ’ä»»åŠ¡ï¼Œè®¡åˆ’ä»»åŠ¡åœ¨ç¨‹åºé€€å‡ºå‡ ç§’åæ‰§è¡Œåˆ é™¤æ–‡ä»¶çš„æ“ä½œã€‚\nè¿™ç§å®ç°æ–¹å¼éœ€è¦ç¨‹åºå…·æœ‰ç®¡ç†å‘˜æƒé™ã€‚\næ­¤å¤„çœç•¥å…·ä½“çš„å®ç°æ–¹å¼ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowsçš„DLLå…¨å±€å…±äº«å˜é‡","url":"/post/3002178342.html","content":"åŒä¸€ä¸ªDLLæ–‡ä»¶å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹åŠ è½½ã€‚å½“ä¸åŒçš„è¿›ç¨‹å°†DLLæ˜ å°„åˆ°è‡ªå·±çš„å†…å­˜ç©ºé—´æ—¶ï¼Œç³»ç»Ÿä¼šä¸ºDLLä¸­çš„å…¨å±€å’Œé™æ€å˜é‡åˆ›å»ºä¸åŒçš„å®ä¾‹ï¼Œè€Œä¸ä¼šå…±äº«åŒä¸€ä¸ªå˜é‡å®ä¾‹ã€‚\né‚£æˆ‘ä»¬å¦‚ä½•å®ç°åœ¨è¿›ç¨‹é—´å…±äº«DLLå…¨å±€å˜é‡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨DLLä¸­ä½¿ç”¨å¦‚ä¸‹è¯­å¥æ¥åˆ›å»ºä¸€ä¸ªæ®µï¼Œç”¨æ¥å­˜æ”¾é‚£äº›éœ€è¦å…±äº«çš„å˜é‡ï¼š\n#pragma data_seg(&quot;AnyName&quot;)  // å¼€å§‹// å£°æ˜å˜é‡// ....#pragma data_seg()   // ç»“æŸ\n\nå…±äº«çš„å˜é‡éœ€è¦è¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”è¿˜è¦è®¾ç½®é“¾æ¥å™¨å¼€å…³ï¼Œä½¿è¯¥æ®µåœ¨æ‰€æœ‰æ˜ å°„DLLçš„è¿›ç¨‹ä¸­æˆä¸ºå…±äº«è¯»å†™å±æ€§ï¼š\n// å…±äº«è¯»å†™#pragma comment(linker,&quot;/SECTION:AnyName,RWS&quot;)\n\n\nç»è¿‡ä¸Šè¿°æ“ä½œï¼Œå…±äº«çš„å˜é‡å°±å¯ä»¥è·¨ä¸åŒè¿›ç¨‹è¿›è¡Œè¯»å†™æ“ä½œäº†ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowsçš„æ¶ˆæ¯æœºåˆ¶","url":"/post/4206756384.html","content":"æ¶ˆæ¯é˜Ÿåˆ—é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸ªè§‚ç‚¹ï¼šçª—å£æ˜¯å’Œçº¿ç¨‹ç›¸å…³è”çš„ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ˜¯å’Œçº¿ç¨‹ç›¸å…³è”çš„ï¼Œè¿™ä¸ªçº¿ç¨‹æ— è®ºæ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯å­çº¿ç¨‹ã€‚\nå½“ä¸€ä¸ªçº¿ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œç³»ç»Ÿå‡å®šè¯¥çº¿ç¨‹ä¸ä¼šè¢«ç”¨äºä»»ä½•ä¸ç”¨æˆ·ç•Œé¢ç›¸å…³çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ä¸ä¼šä¸ºå®ƒåˆ†é…ç›¸åº”çš„èµ„æºï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥å‡å°‘çº¿ç¨‹å¯¹ç³»ç»Ÿèµ„æºçš„å ç”¨ã€‚\nä½†æ˜¯ï¼Œä¸€æ—¦è¿™ä¸ªçº¿ç¨‹è°ƒç”¨ä¸€ä¸ªä¸å›¾å½¢ç”¨æˆ·ç•Œé¢æœ‰å…³çš„å‡½æ•°ï¼ˆä¾‹å¦‚æ£€æŸ¥å®ƒçš„æ¶ˆæ¯é˜Ÿåˆ—æˆ–å»ºç«‹ä¸€ä¸ªçª—å£ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šä¸ºè¯¥çº¿ç¨‹åˆ†é…ä¸€äº›é¢å¤–çš„èµ„æºï¼Œä»¥ä¾¿å®ƒèƒ½å¤Ÿæ‰§è¡Œä¸ç”¨æˆ·ç•Œé¢æœ‰å…³çš„ä»»åŠ¡ã€‚ç‰¹åˆ«æ˜¯ï¼Œç³»ç»Ÿä¼šåˆ†é…ä¸€ä¸ªTHREADINFOç»“æ„ï¼Œå¹¶å°†è¿™ä¸ªæ•°æ®ç»“æ„ä¸çº¿ç¨‹å…³è”èµ·æ¥ã€‚\n\nTHREADINFOç»“æ„æ˜¯å¾®è½¯å†…éƒ¨çš„ã€æ²¡æœ‰è¢«å…¬å¼€çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬æ— æ³•æ‰¾åˆ°è¿™ä¸ªç»“æ„ä½“çš„å‡†ç¡®çš„å®šä¹‰ã€‚ä½†ä»å…¶ä»–æ–‡æ¡£ä¸­å¯ä»¥å¾—çŸ¥ï¼ŒTHREADINFOç»“æ„åŒ…å«ï¼š\n\nä¸€ç»„æˆå‘˜å˜é‡ï¼Œåˆ©ç”¨è¿™ç»„æˆå‘˜ï¼Œçº¿ç¨‹å¯ä»¥è®¤ä¸ºå®ƒæ˜¯åœ¨è‡ªå·±ç‹¬å çš„ç¯å¢ƒä¸­è¿è¡Œã€‚\nç™»è®°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆposted-message queueï¼‰\nå‘é€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ send-message queueï¼‰\nåº”ç­”æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ reply -message queueï¼‰\nè™šæ‹Ÿè¾“å…¥é˜Ÿåˆ—ï¼ˆvirtualized-input queueï¼‰\nå”¤é†’æ ‡å¿—ï¼ˆwake flagï¼‰\nç”¨æ¥æè¿°çº¿ç¨‹å±€éƒ¨è¾“å…¥çŠ¶æ€çš„è‹¥å¹²å˜é‡ã€‚\n\n\nä¸Šå›¾æè¿°äº†THREADINFOç»“æ„ä¸­çš„å„ä¸ªæˆå‘˜ã€‚çº¿ç¨‹æ‹¥æœ‰äº†THREADINFOç»“æ„ä¹Ÿå°±æœ‰äº†å„ç§æ¶ˆæ¯é˜Ÿåˆ—ã€‚\nçª—å£æ¶ˆæ¯å¤„ç†å‡½æ•°ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€ç®€å•çš„åˆ›å»º Windows çª—ä½“çš„ C++ä»£ç ï¼š\n#include &lt;windows.h&gt;LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)&#123;\tswitch (message) &#123;\tcase WM_DESTROY:\t\tPostQuitMessage(0);\t\treturn 0;\t&#125;\treturn DefWindowProc(hwnd, message, wParam, lParam);&#125;int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, int iCmdShow)&#123;\tWNDCLASS wndclass;\twndclass.style = CS_HREDRAW | CS_VREDRAW;\twndclass.cbClsExtra = 0;\twndclass.cbWndExtra = 0;\twndclass.hInstance = hInstance;\twndclass.hIcon = LoadIcon(NULL, IDI_APPLICATION);\twndclass.hCursor = LoadCursor(NULL, IDC_ARROW);\twndclass.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);\twndclass.lpszMenuName = NULL;\twndclass.lpfnWndProc = WndProc; //è®¾ç½®çª—ä½“æ¶ˆæ¯å¤„ç†å‡½æ•°\twndclass.lpszClassName = TEXT(&quot;SimpleWindow&quot;);\tif (!RegisterClass(&amp;wndclass)) &#123;  //æ³¨å†Œçª—ä½“ç±»\t\treturn 0;\t&#125;;\tHWND hwnd = CreateWindow(TEXT(&quot;SimpleWindow&quot;), // window class name\t\tTEXT(&quot;SimpleWindow&quot;),   // window caption\t\tWS_OVERLAPPEDWINDOW, // window style\t\tCW_USEDEFAULT,// initial x position\t\tCW_USEDEFAULT,// initial y position\t\tCW_USEDEFAULT,// initial x size\t\tCW_USEDEFAULT,// initial y size\t\tNULL, // parent window handle\t\tNULL, // window menu handle\t\thInstance, // program instance handle\t\tNULL);\tShowWindow(hwnd, SW_SHOW);\tMSG msg;\twhile (GetMessage(&amp;msg, NULL, 0, 0)) &#123;\t\tTranslateMessage(&amp;msg);\t\tDispatchMessage(&amp;msg);\t&#125;\treturn msg.wParam;&#125;\n\nä¸Šé¢ä»£ç ä¸­çš„WndProcå‡½æ•°å°±æ˜¯çª—å£æ¶ˆæ¯å¤„ç†å‡½æ•°ã€‚æ¶ˆæ¯å¾ªç¯ä¸­çš„DispatchMessageå‡½æ•°æ´¾å‘æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿå°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚\næ¶ˆæ¯å¾ªç¯æ¶ˆæ¯å¾ªç¯æ˜¯ç¨‹åºå‘˜è‡ªå·±ç¼–å†™çš„ä»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—ä¸­å¾ªç¯è·å–ï¼ˆGet æˆ– Peekï¼‰æ¶ˆæ¯çš„å¾ªç¯ä½“ï¼Œä»£ç å¤§è‡´å¦‚ä¸‹ï¼š\nwhile(GetMessage(&amp;Msg, NULL, 0, 0))&#123;    TranslateMessage(&amp;Msg);    DispatchMessage(&amp;Msg);&#125;\n\nå¾ªç¯ä½•æ—¶ç»“æŸï¼ŸGetMessageå‡½æ•°çš„è¿”å›å€¼å¦‚ä¸‹ï¼š\næ”¶åˆ°WM_QUITæ¶ˆæ¯ï¼Œè¿”å›0æ”¶åˆ°éWM_QUITæ¶ˆæ¯ï¼Œè¿”å›é0é”™è¯¯ï¼Œè¿”å›-1\n\nåˆ©ç”¨GetMessageå‡½æ•°è¿”å›å€¼çš„ç‰¹æ€§ï¼Œåœ¨æ”¶åˆ°WM_QUITæ¶ˆæ¯ä¹‹åï¼Œæ¶ˆæ¯å¾ªç¯å°±ä¼šç»“æŸã€‚\nTranslateMessageTranslateMessageå‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†è™šæ‹Ÿé”®å€¼ä¿¡æ¯è½¬æ¢ä¸ºå­—ç¬¦ä¿¡æ¯ã€‚è¿™ä¸€æ­¥å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚\nDispatchMessageå°†æ¶ˆæ¯æ´¾å‘åˆ°çª—å£çš„æ¶ˆæ¯å¤„ç†å‡½æ•°ï¼ˆå¦‚ç¬¬ 2 èŠ‚ä¸­çš„WndProcå‡½æ•°ï¼‰ã€‚\nPostMessagePostMessage åŸç†BOOL PostMessage(   HWND hwnd,   UINT uMsg,   WPARAM wParam,   LPARAM lParam);\n\nå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œç³»ç»Ÿè¦ç¡®å®šæ˜¯å“ªä¸€ä¸ªçº¿ç¨‹å»ºç«‹äº†ç”¨hwndå‚æ•°æ ‡è¯†çš„çª—å£ã€‚ç„¶åç³»ç»Ÿåˆ†é…ä¸€å—å†…å­˜ï¼Œå°†è¿™ä¸ªæ¶ˆæ¯å‚æ•°å­˜å‚¨åœ¨è¿™å—å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™å—å†…å­˜å¢åŠ åˆ°ç›¸åº”çº¿ç¨‹çš„ç™»è®°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªå‡½æ•°è¿˜è®¾ç½®QS_POSTMESSAGEå”¤é†’ä½ã€‚PostMessageå‡½æ•°åœ¨ç™»è®°äº†æ¶ˆæ¯ä¹‹åç«‹å³è¿”å›ï¼Œè°ƒç”¨è¯¥å‡½æ•°çš„çº¿ç¨‹ä¸çŸ¥é“ç™»è®°çš„æ¶ˆæ¯æ˜¯å¦è¢«æŒ‡å®šçª—å£çš„çª—å£è¿‡ç¨‹æ‰€å¤„ç†ã€‚å®é™…ä¸Šï¼Œæœ‰å¯èƒ½è¿™ä¸ªæŒ‡å®šçš„çª—å£æ°¸è¿œä¸ä¼šæ”¶åˆ°ç™»è®°çš„æ¶ˆæ¯ã€‚\nPostThreadMessageè¿˜å¯ä»¥é€šè¿‡è°ƒç”¨PostThreadMessageå°†æ¶ˆæ¯æ”¾ç½®åœ¨çº¿ç¨‹çš„ç™»è®°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚\nBOOL PostThreadMessage(   DWORD dwThreadId,   UINT uMsg,   WPARAM wParam,   LPARAM lParam);\n\nPostQuitMessageä¸ºäº†ç»ˆæ­¢çº¿ç¨‹çš„æ¶ˆæ¯å¾ªç¯ï¼Œå¯ä»¥è°ƒç”¨PostQuitMessageå‡½æ•°ã€‚PostQuitMessageå‡½æ•°ç±»ä¼¼äºï¼šPostThreadMessage(GetCurrentThreadId(), WM_QUIT, nExitCode, 0);ä½†æ˜¯ï¼ŒPostQuitMessageå¹¶ä¸å®é™…ç™»è®°ä¸€ä¸ªæ¶ˆæ¯åˆ°ä»»ä½•ä¸€ä¸ªTHREADINFOç»“æ„çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚åªæ˜¯åœ¨å†…éƒ¨ï¼ŒPostQuitMessageä¼šè®¾å®šQS_QUITå”¤é†’æ ‡å¿—ï¼Œå¹¶å¯¹THREADINFOç»“æ„çš„nExitCodeæˆå‘˜è¿›è¡Œè®¾ç½®ã€‚å› ä¸ºè¿™äº›æ“ä½œæ°¸è¿œä¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥PostQuitMessageçš„åŸå‹è¢«å®šä¹‰æˆVOIDè¿”å›ç±»å‹ã€‚\nSendMessageSendMessageçš„å®ç°åˆ†ä¸º 2 ç§æƒ…å†µï¼šå‘æœ¬çº¿ç¨‹çš„çª—å£å‘é€æ¶ˆæ¯ã€å‘å…¶ä»–çº¿ç¨‹çš„çª—å£å‘é€æ¶ˆæ¯ã€‚\nå‘æœ¬çº¿ç¨‹çš„çª—å£å‘é€æ¶ˆæ¯å¦‚æœè°ƒç”¨SendMessageçš„çº¿ç¨‹å‘æœ¬çº¿ç¨‹æ‰€å»ºç«‹çš„ä¸€ä¸ªçª—å£å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼ŒSendMessageçš„åšæ³•å¾ˆç®€å•ï¼šç›´æ¥è°ƒç”¨æŒ‡å®šçª—å£çš„â€œçª—å£æ¶ˆæ¯å¤„ç†å‡½æ•°â€ï¼Œå°†å…¶ä½œä¸ºä¸€ä¸ªå­ä¾‹ç¨‹ã€‚å½“â€œçª—å£æ¶ˆæ¯å¤„ç†å‡½æ•°â€å®Œæˆå¯¹æ¶ˆæ¯çš„å¤„ç†åï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå€¼ç»™SendMessageï¼ŒSendMessageå†å°†è¿™ä¸ªå€¼è¿”å›ç»™è°ƒç”¨çº¿ç¨‹ã€‚\nå‘å…¶ä»–çº¿ç¨‹çš„çª—å£å‘é€æ¶ˆæ¯ä½†æ˜¯ï¼Œå½“è°ƒç”¨SendMessageçš„çº¿ç¨‹å‘å…¶ä»–çº¿ç¨‹æ‰€å»ºç«‹çš„çª—å£å‘é€æ¶ˆæ¯æ—¶ï¼ŒSendMessageçš„å†…éƒ¨å·¥ä½œå°±å¤æ‚å¾—å¤šï¼ˆå³ä½¿ä¸¤ä¸ªçº¿ç¨‹åœ¨åŒä¸€è¿›ç¨‹ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚\nWindows è¦æ±‚å»ºç«‹çª—å£çš„çº¿ç¨‹æ¥å¤„ç†è¯¥çª—å£çš„æ¶ˆæ¯ã€‚æ‰€ä»¥å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨SendMessageå‘ä¸€ä¸ªç”±å…¶ä»–è¿›ç¨‹æ‰€å»ºç«‹çš„çª—å£å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯å‘å…¶ä»–çš„çº¿ç¨‹å‘é€æ¶ˆæ¯ï¼Œå‘é€çº¿ç¨‹ä¸å¯èƒ½å¤„ç†çª—å£æ¶ˆæ¯ï¼Œå› ä¸ºå‘é€çº¿ç¨‹ä¸æ˜¯è¿è¡Œåœ¨æ¥æ”¶è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼Œå› æ­¤ä¸èƒ½è®¿é—®ç›¸åº”çª—å£è¿‡ç¨‹çš„ä»£ç å’Œæ•°æ®ã€‚å®é™…ä¸Šï¼Œå‘é€çº¿ç¨‹è¦æŒ‚èµ·ï¼Œè€Œç”±å¦å¤–çš„çº¿ç¨‹å¤„ç†æ¶ˆæ¯ã€‚æ‰€ä»¥ä¸ºäº†å‘å…¶ä»–çº¿ç¨‹å»ºç«‹çš„çª—å£å‘é€ä¸€ä¸ªçª—å£æ¶ˆæ¯ï¼Œç³»ç»Ÿå¿…é¡»æ‰§è¡Œä¸‹é¢çš„åŠ¨ä½œï¼š\né¦–å…ˆï¼Œå‘é€çš„æ¶ˆæ¯è¦è¿½åŠ åˆ°æ¥æ”¶çº¿ç¨‹çš„å‘é€æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒåŒæ—¶è¿˜ä¸ºè¿™ä¸ªçº¿ç¨‹è®¾å®šQS_SENDMESSAGEæ ‡å¿—ï¼ˆåé¢å°†è®¨è®ºï¼‰ã€‚å…¶æ¬¡ï¼Œå¦‚æœæ¥æ”¶çº¿ç¨‹å·²ç»åœ¨æ‰§è¡Œä»£ç å¹¶ä¸”æ²¡æœ‰ç­‰å¾…æ¶ˆæ¯ï¼ˆç­‰å¾…æ¶ˆæ¯æ˜¯æŒ‡ï¼šå¦‚è°ƒç”¨GetMessageã€PeekMessageæˆ–WaitMessageç­‰ï¼‰ï¼Œå‘é€çš„æ¶ˆæ¯ä¸ä¼šè¢«å¤„ç†ï¼Œç³»ç»Ÿä¸èƒ½ä¸­æ–­çº¿ç¨‹æ¥ç«‹å³å¤„ç†æ¶ˆæ¯ã€‚å½“æ¥æ”¶è¿›ç¨‹åœ¨ç­‰å¾…æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆæ£€æŸ¥çº¿ç¨‹çš„QS_SENDMESSAGEå”¤é†’æ ‡å¿—æ˜¯å¦è¢«è®¾å®šï¼Œå¦‚æœæ˜¯ï¼Œç³»ç»Ÿæ‰«æå‘é€æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¶ˆæ¯çš„åˆ—è¡¨ï¼Œå¹¶æ‰¾åˆ°ç¬¬ä¸€ä¸ªå‘é€çš„æ¶ˆæ¯ã€‚æœ‰å¯èƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­æœ‰å‡ ä¸ªå‘é€çš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œå‡ ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å‘ä¸€ä¸ªçª—å£åˆ†åˆ«å‘é€æ¶ˆæ¯ã€‚å½“å‘ç”Ÿè¿™æ ·çš„äº‹æ—¶ï¼Œç³»ç»Ÿåªæ˜¯å°†è¿™äº›æ¶ˆæ¯è¿½åŠ åˆ°æ¥æ”¶çº¿ç¨‹çš„å‘é€æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚\nå½“æ¥æ”¶çº¿ç¨‹ç­‰å¾…æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä»å‘é€æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºç¬¬ä¸€ä¸ªæ¶ˆæ¯å¹¶è°ƒç”¨é€‚å½“çš„çª—å£è¿‡ç¨‹æ¥å¤„ç†æ¶ˆæ¯ã€‚å¦‚æœåœ¨å‘é€æ¶ˆæ¯é˜Ÿåˆ—ä¸­å†æ²¡æœ‰æ¶ˆæ¯äº†ï¼Œåˆ™QS_SENDMESSAGEå”¤é†’æ ‡å¿—è¢«å…³é—­ã€‚å½“æ¥æ”¶çº¿ç¨‹å¤„ç†æ¶ˆæ¯çš„æ—¶å€™ï¼Œè°ƒç”¨SendMessageçš„çº¿ç¨‹è¢«è®¾ç½®æˆç©ºé—²çŠ¶æ€ï¼ˆidleï¼‰ï¼Œç­‰å¾…ä¸€ä¸ªæ¶ˆæ¯å‡ºç°åœ¨å®ƒçš„åº”ç­”æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚åœ¨å‘é€çš„æ¶ˆæ¯å¤„ç†ä¹‹åï¼Œçª—å£è¿‡ç¨‹çš„è¿”å›å€¼è¢«ç™»è®°åˆ°å‘é€çº¿ç¨‹çš„åº”ç­”æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚å‘é€çº¿ç¨‹ç°åœ¨è¢«å”¤é†’ï¼Œå–å‡ºåŒ…å«åœ¨åº”ç­”æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„è¿”å›å€¼ã€‚è¿™ä¸ªè¿”å›å€¼å°±æ˜¯SendMessageçš„è¿”å›å€¼ã€‚è¿™æ—¶ï¼Œå‘é€çº¿ç¨‹ç»§ç»­æ­£å¸¸æ‰§è¡Œã€‚\nå½“ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…SendMessageè¿”å›æ—¶ï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯å¤„äºç©ºé—²çŠ¶æ€ã€‚ä½†å®ƒå¯ä»¥æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼šå¦‚æœç³»ç»Ÿä¸­å¦å¤–ä¸€ä¸ªçº¿ç¨‹å‘ä¸€ä¸ªçª—å£å‘é€æ¶ˆæ¯ï¼Œè¿™ä¸ªçª—å£æ˜¯ç”±è¿™ä¸ªç­‰å¾…SendMessageè¿”å›çš„çº¿ç¨‹æ‰€å»ºç«‹çš„ï¼Œåˆ™ç³»ç»Ÿè¦ç«‹å³å¤„ç†å‘é€çš„æ¶ˆæ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¸å¿…ç­‰å¾…çº¿ç¨‹å»è°ƒç”¨GetMessageã€PeekMessageæˆ–WaitMessageã€‚\nç”±äº Windows ä½¿ç”¨ä¸Šè¿°æ–¹æ³•å¤„ç†çº¿ç¨‹ä¹‹é—´å‘é€çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥æœ‰å¯èƒ½é€ æˆçº¿ç¨‹æŒ‚èµ·ã€‚ä¾‹å¦‚ï¼Œå½“å¤„ç†å‘é€æ¶ˆæ¯çš„çº¿ç¨‹å«æœ‰é”™è¯¯æ—¶ï¼Œä¼šå¯¼è‡´è¿›å…¥æ­»å¾ªç¯ã€‚é‚£ä¹ˆå¯¹äºè°ƒç”¨SendMessageçš„çº¿ç¨‹ä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Ÿå®ƒä¼šæ¢å¤æ‰§è¡Œå—ï¼Ÿè¿™æ˜¯å¦æ„å‘³ç€ä¸€ä¸ªç¨‹åºä¸­çš„ bug ä¼šå¯¼è‡´å¦ä¸€ä¸ªç¨‹åºæŒ‚èµ·ï¼Ÿç­”æ¡ˆæ˜¯ç¡®å®æœ‰è¿™ç§å¯èƒ½ã€‚\nåˆ©ç”¨ 4 ä¸ªå‡½æ•°â€”â€” SendMessageTimeOutã€SendMessageCallbackã€SendNotifyMessageå’ŒReplayMessageï¼Œå¯ä»¥ç¼–å†™ä¿æŠ¤æ€§ä»£ç é˜²æ­¢å‡ºç°è¿™ç§æƒ…å†µã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowsç³»ç»Ÿå„ç‰ˆæœ¬å æ¯”å¯¹æŠ€æœ¯é€‰å‹çš„å½±å“","url":"/post/2306363290.html","content":"æ—¢ç„¶æ˜¯ä» Windows ç³»ç»Ÿå æ¯”æ¥è°ˆæŠ€æœ¯é€‰å‹ï¼Œè¿™ä¸ªæŠ€æœ¯é€‰å‹å½“ç„¶åªç°å®šäºå¼€å‘ Windows å®¢æˆ·ç«¯äº§å“çš„é€‰å‹äº†ã€‚\nåœ¨èŠæŠ€æœ¯é€‰å‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ç›®å‰ä¸åŒå¸‚åœºä¸Š Windows ç³»ç»Ÿå„ä¸ªç‰ˆæœ¬çš„å æ¯”æƒ…å†µã€‚\n\n\nä¸‹å›¾å±•ç¤ºäº†æˆ‘ä»¬å…¬å¸çš„ Aã€Bä¸¤ä¸ªäº§å“ï¼ˆé¢å‘ C ç«¯ç”¨æˆ·ï¼‰åœ¨ 2024 å¹´åº¦çš„è£…æœºé‡çš„ç»Ÿè®¡ä¿¡æ¯ã€‚\n\nä¸‹å›¾æ˜¯ Steam ç»Ÿè®¡çš„ Windows ç³»ç»Ÿå„ç‰ˆæœ¬çš„å æ¯”æƒ…å†µï¼ŒSteam ä»¥æ¸¸æˆç”¨æˆ·ä¸ºä¸»ï¼Œå› æ­¤æœºå™¨é…ç½®ä¼šé«˜ä¸€äº›ï¼Œå‡çº§ç³»ç»Ÿçš„æ„æ„¿ä¹Ÿä¼šå¼ºçƒˆä¸€äº›ã€‚\n\n\nSteam ç¡¬ä»¶å’Œè½¯ä»¶è°ƒæŸ¥: October 2024\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä»ä¸Šé¢çš„ä¸¤ä¸ªç»Ÿè®¡ç»“æœå¯ä»¥å¾—å‡ºï¼š\n\nWindows XPã€Windows Vistaã€ Windows 8 ç³»ç»Ÿå·²ç»ç»è¿¹ã€‚\nWin7 ç³»ç»Ÿåœ¨éæ¸¸æˆæ¶ˆè´¹å¸‚åœºçš„å æ¯”ä»ç„¶è¾ƒå¤§ï¼Œåœ¨é¢å‘ B ç«¯ç”¨æˆ·çš„é¢†åŸŸï¼Œå¦‚å·¥ä¸šè½¯ä»¶ç­‰ï¼Œå æ¯”åªä¼šæ›´é«˜ï¼Œå› æ­¤åœ¨æŠ€æœ¯é€‰å‹æ—¶ï¼Œè¿˜ä¸èƒ½å¿½ç•¥å¯¹ Win7 çš„æ”¯æŒã€‚\nWin10 å’Œ Win11 å·²æ˜¯å½“å‰çš„ä¸»æµç³»ç»Ÿï¼Œè™½ç„¶ Win11 çš„å æ¯”åœ¨é€æ­¥æå‡ï¼Œä½† Win10 ç³»ç»Ÿä¾ç„¶å æ®äº†è¿‘ä¹åŠå£æ±Ÿå±±ã€‚å› æ­¤å¦‚æœé‡‡ç”¨ Microsoft Edge WebView2 æŠ€æœ¯æ¶æ„ï¼Œå¯èƒ½æœ‰è¿‘ä¸€åŠçš„ç”¨æˆ·è¦å…ˆåœ¨çº¿å®‰è£… Microsoft Edge WebView2 è¿è¡Œæ—¶æ‰èƒ½è¿è¡Œã€‚\nç›®å‰ï¼Œåœ¨ä¸ªäººæ¶ˆè´¹è€…å¸‚åœºä¸Šï¼Œç»å¤§éƒ¨åˆ†ç³»ç»Ÿå·²ç»æ˜¯ 64 ä½ï¼Œä»…æœ‰å°‘éƒ¨åˆ† Win7 è¿˜æ˜¯ 32 ä½çš„ï¼Œå› æ­¤é¢å‘ä¸ªäººæ¶ˆè´¹è€…å¸‚åœºçš„è½¯ä»¶å¯ä»¥å®Œå…¨é‡‡ç”¨ 64 ä½æ¶æ„å¼€å‘ï¼Œè€Œé¢å‘ B ç«¯çš„è½¯ä»¶åˆ™è¿˜å¯èƒ½éœ€è¦æ”¯æŒ 32 ä½æ¶æ„ã€‚\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"WindowséŸ³é¢‘ç¯å›å½•åˆ¶","url":"/post/2236960039.html","content":"æ‰€è°“éŸ³é¢‘ç¯å›å½•åˆ¶å°±æ˜¯å½•åˆ¶æ‰¬å£°å™¨æ’­æ”¾çš„å£°éŸ³ã€‚æ’­æ”¾åˆ°æ‰¬å£°å™¨çš„å£°éŸ³å·²ç»è¿‡æ··åˆï¼ŒWindows æä¾›äº† WASAPI æ¥è·å–è¿™ç§æ··åˆçš„éŸ³é¢‘ä¿¡å·ã€‚\næœ¬æ–‡å°†å½•åˆ¶åˆ°åŸå§‹éŸ³é¢‘æ ·æœ¬æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨Audacityå¯¼å…¥åŸå§‹æ•°æ®è¯•å¬ã€‚\n\n\nåœ¨ Audacity ä¸­å¯¼å…¥åŸå§‹æ•°æ®æ—¶éœ€è¦é€‰æ‹©æ­£ç¡®çš„éŸ³é¢‘å‚æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— æ³•æ’­æ”¾ã€‚\nåˆå§‹åŒ–è®¾å¤‡å£°æ˜ç›¸å…³å˜é‡ï¼š&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nIMMDeviceEnumerator* pDeviceEnum = NULL;IMMDevice* pDevice = NULL;IAudioClient* pAudioClient = NULL;WAVEFORMATEX* pWaveFormat = NULL;IAudioCaptureClient* pAudioCaptureClient = NULL;\n\nè·å–é»˜è®¤éŸ³é¢‘è¾“å‡ºè®¾å¤‡å¹¶åˆå§‹åŒ–ç¯å›å½•åˆ¶æœåŠ¡ï¼š\nHRESULT InitRecord() &#123;    HRESULT hr;    hr = CoCreateInstance(CLSID_MMDeviceEnumerator, NULL, CLSCTX_ALL, IID_IMMDeviceEnumerator, (void**)&amp;pDeviceEnum);    if (FAILED(hr)) &#123;        printf(&quot;Create device enumerator failed, hr: 0x%x&quot;, hr);        return hr;    &#125;    hr = pDeviceEnum-&gt;GetDefaultAudioEndpoint(eRender, eConsole, &amp;pDevice);    if (FAILED(hr)) &#123;        printf(&quot;Get default audio device failed, hr: 0x%x&quot;, hr);        return hr;    &#125;    hr = pDevice-&gt;Activate(IID_IAudioClient, CLSCTX_ALL, NULL, (void**)&amp;pAudioClient);    if (FAILED(hr)) &#123;        printf(&quot;Create audio client failed, hr: 0x%x&quot;, hr);        return hr;    &#125;    hr = pAudioClient-&gt;GetMixFormat(&amp;pWaveFormat);    if (FAILED(hr)) &#123;        printf(&quot;Get mix format failed, hr: 0x%x&quot;, hr);        return hr;    &#125;    printf(&quot;Channel: %d, SamplesPerSec: %d, BitsPerSample: %d\\n&quot;, pWaveFormat-&gt;nChannels, pWaveFormat-&gt;nSamplesPerSec, pWaveFormat-&gt;wBitsPerSample);    hr = pAudioClient-&gt;Initialize(AUDCLNT_SHAREMODE_SHARED, AUDCLNT_STREAMFLAGS_LOOPBACK, BUFFER_TIME_100NS, 0, pWaveFormat, NULL);    if (FAILED(hr)) &#123;        // å…¼å®¹NahimicéŸ³é¢‘é©±åŠ¨        // https://github.com/rainmeter/rainmeter/commit/0a3dfa35357270512ec4a3c722674b67bff541d6        // https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/bd8cd9f2-974f-4a9f-8e9c-e83001819942/iaudioclient-initialize-failure        // åˆå§‹åŒ–å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨ç«‹ä½“å£°æ ¼å¼è¿›è¡Œåˆå§‹åŒ–        pWaveFormat-&gt;nChannels = 2;        pWaveFormat-&gt;nBlockAlign = (2 * pWaveFormat-&gt;wBitsPerSample) / 8;        pWaveFormat-&gt;nAvgBytesPerSec = pWaveFormat-&gt;nSamplesPerSec * pWaveFormat-&gt;nBlockAlign;        hr = pAudioClient-&gt;Initialize(AUDCLNT_SHAREMODE_SHARED, AUDCLNT_STREAMFLAGS_LOOPBACK, BUFFER_TIME_100NS, 0, pWaveFormat, NULL);        if (FAILED(hr)) &#123;            printf(&quot;Initialize audio client failed, hr: 0x%x&quot;, hr);            return hr;        &#125;    &#125;    hr = pAudioClient-&gt;GetService(IID_IAudioCaptureClient, (void**)&amp;pAudioCaptureClient);    if (FAILED(hr)) &#123;        printf(&quot;Get audio capture client failed, hr: 0x%x&quot;, hr);        return hr;    &#125;    return S_OK;&#125;\n\né‡‡æ ·åœ¨åˆå§‹åŒ–æˆåŠŸåï¼Œå¼€å¯ç‹¬ç«‹çº¿ç¨‹æŒ‰å›ºå®šé—´éš”è·å–ç¼“å†²åŒºä¸­çš„éŸ³é¢‘æ ·æœ¬ã€‚exitFlagç”¨äºæ§åˆ¶çº¿ç¨‹æ˜¯å¦é€€å‡ºã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n// çº¿ç¨‹å¤„ç†å‡½æ•°void QueryAudioSampleThread() &#123;    UINT32 bufferFrameCount = 0;    HRESULT hr = pAudioClient-&gt;GetBufferSize(&amp;bufferFrameCount);    if (FAILED(hr)) &#123;        printf(&quot;Get buffer frame count failed, hr: 0x%x&quot;, hr);        return;    &#125;    // æ ¹æ®å®é™…ç¼“å†²åŒºä¸­çš„æ ·æœ¬æ•°è®¡ç®—å®é™…å¡«æ»¡ç¼“å†²åŒºéœ€è¦çš„æ—¶é—´    REFERENCE_TIME  hnsActualDuration = (double)BUFFER_TIME_100NS *        bufferFrameCount / pWaveFormat-&gt;nSamplesPerSec;    UINT32 packetLength = 0;    BYTE* buffer = NULL;    UINT32 numFramesAvailable = 0;    DWORD flags = 0;    while (!exitFlag.load())    &#123;        // ç­‰å¾…åŠä¸ªç¼“å†²å‘¨æœŸ        Sleep(hnsActualDuration / 10000 / 2);        hr = pAudioCaptureClient-&gt;GetNextPacketSize(&amp;packetLength);        if (FAILED(hr)) &#123;            printf(&quot;Get next package size failed, hr: 0x%x&quot;, hr);            break;        &#125;        while (packetLength &gt; 0)        &#123;            hr = pAudioCaptureClient-&gt;GetBuffer(&amp;buffer, &amp;numFramesAvailable, &amp;flags, NULL, NULL);            if (FAILED(hr)) &#123;                printf(&quot;Get capture buffer failed, hr: 0x%x&quot;, hr);                break;            &#125;            // å°†æ•è·åˆ°çš„æ ·æœ¬å†™å…¥æ–‡ä»¶            if (!WriteSample(buffer, numFramesAvailable * pWaveFormat-&gt;nChannels * pWaveFormat-&gt;wBitsPerSample / 8)) &#123;                printf(&quot;Write sample to file failed&quot;);            &#125;            hr = pAudioCaptureClient-&gt;ReleaseBuffer(numFramesAvailable);            if (FAILED(hr)) &#123;                printf(&quot;Release capture buffer failed, hr: 0x%x&quot;, hr);                break;            &#125;            hr = pAudioCaptureClient-&gt;GetNextPacketSize(&amp;packetLength);            if (FAILED(hr)) &#123;                printf(&quot;Get next package size failed, hr: 0x%x&quot;, hr);                break;            &#125;        &#125;    &#125;&#125;\n\nSampleå’ŒFrameçš„å«ä¹‰pWaveFormat-&gt;nSamplesPerSecè¡¨ç¤ºæ¯ç§’é‡‡æ ·çš„æ¬¡æ•°ï¼Œå¦‚48000çš„é‡‡æ ·ç‡å°±æ˜¯æ¯ç§’é‡‡48000ä¸ªSampleï¼Œä¸€ä¸ªSample æ˜¯ä¸€ä¸ªå£°é“çš„ä¸€ä¸ªé‡‡æ ·ã€‚\nè€ŒFrame åˆ™æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹çš„Sampleé›†åˆï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªçº¿æ€§çš„PCM åŒå£°é“éŸ³é¢‘æ–‡ä»¶æ¯ä¸ªFrameæœ‰2ä¸ªSampleï¼Œä¸€ä¸ªå·¦å£°é“Sampleï¼Œå’Œä¸€ä¸ªå³å£°é“Sampleã€‚\né‡Šæ”¾è®¾å¤‡å’Œå†…å­˜åœ¨å½•åˆ¶ç»“æŸåé‡Šæ”¾è®¾å¤‡å’Œå†…å­˜ï¼š\nvoid UnInitRecord() &#123;    if (pWaveFormat) &#123;        CoTaskMemFree(pWaveFormat);        pWaveFormat = NULL;    &#125;    SAFE_RELEASE(pDeviceEnum);    SAFE_RELEASE(pDevice);    SAFE_RELEASE(pAudioClient);    SAFE_RELEASE(pAudioCaptureClient);&#125;\n\nğŸ“Œé™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"x64dbgé€ŸæŸ¥æ‰‹å†Œ","url":"/post/2358498140.html","content":"x64dbg æ˜¯ä¸€æ¬¾å¼€æºçš„ x64&#x2F;x32 ä½ Windows åŠ¨æ€è°ƒè¯•å·¥å…·ã€‚å®ƒé›†æˆäº†åæ±‡ç¼–ã€å†…å­˜æŸ¥çœ‹ã€æ–­ç‚¹ç®¡ç†ç­‰å¤šç§åŠŸèƒ½ï¼Œç•Œé¢ç›´è§‚ï¼Œæ’ä»¶æ¶æ„çµæ´»ã€‚ä½œä¸º OllyDbg çš„ç°ä»£ç»§æ‰¿è€…ï¼Œå®ƒä»¥å…¶å¼ºå¤§çš„åŠ¨æ€åˆ†æèƒ½åŠ›ã€æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒå’Œå¯¹é€†å‘å·¥ç¨‹å¸ˆçš„å‹å¥½æ€§ï¼Œæˆä¸ºè½¯ä»¶åˆ†æã€æ¼æ´ç ”ç©¶å’Œå®‰å…¨è°ƒè¯•é¢†åŸŸçš„å¸¸ç”¨åˆ©å™¨ã€‚\n\n\nè™½ç„¶å¤è¯äº‘â€œå·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨â€ï¼Œä½† x64dbg ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè¿˜éœ€è¦ç»“åˆå¼ºå¤§çš„å†…åŠŸï¼Œæ‰èƒ½ä½¿å…¶å‘æŒ¥æ›´å¤§çš„å¨åŠ›ã€‚\nå¸¸ç”¨å¿«æ·é”®ä¸‹é¢åˆ—ä¸¾çš„å¿«æ·é”®å¾ˆå¤šä¸æ˜¯å¿…é¡»è®°ä½çš„ï¼Œåœ¨ UI ç•Œé¢ä¸Šé€šè¿‡é¼ æ ‡ç‚¹å‡»ã€å³é”®èœå•ç­‰ï¼Œå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœã€‚\n\n\n\nåŠŸèƒ½\nå¿«æ·é”®\n\n\n\næ‰“å¼€æ–‡ä»¶\nF3\n\n\né™„åŠ è¿›ç¨‹\nAlt + A\n\n\né‡æ–°è¿è¡Œ\nCtrl + F2\n\n\nè·³è½¬åˆ°ä¸Šä¸€ä¸ªä½ç½®\n-\n\n\nè·³è½¬åˆ°ä¸‹ä¸€ä¸ªä½ç½®\n+\n\n\næ·»åŠ æ–­ç‚¹\nF2\n\n\nå¯ç”¨&#x2F;ç¦ç”¨æ–­ç‚¹(æ–­ç‚¹è§†å›¾)\nSpace\n\n\nç»§ç»­è¿è¡Œ\nF9\n\n\nå•æ­¥æ­¥è¿‡\nF8\n\n\nå•æ­¥æ­¥è¿›\nF7\n\n\næš‚åœè¿è¡Œ\nF12\n\n\nç»“æŸè¿è¡Œ\nAlt + F2\n\n\nè¿è¡Œåˆ°å‡½æ•°è¿”å›\nCtrl + F9\n\n\nè¿è¡Œåˆ°ç”¨æˆ·ä»£ç \nAlt + F9\n\n\næœç´¢æ±‡ç¼–æŒ‡ä»¤(å½“å‰åŒºåŸŸ)\nCtrl + F\n\n\næœç´¢æœºå™¨ç (å½“å‰åŒºåŸŸ)\nCtrl + B\n\n\næœç´¢å­—ç¬¦ä¸²(å½“å‰æ¨¡å—)\nShift + D\n\n\næœç´¢å¯¹å½“å‰åœ°å€çš„å¼•ç”¨\nCtrl + R\n\n\nä¿®æ”¹æ±‡ç¼–æŒ‡ä»¤\nSpace\n\n\nå¤åˆ¶æœºå™¨ç \nShift + C\n\n\nç²˜è´´æœºå™¨ç \nShift + V\n\n\næ¢å¤å¯¹é€‰åŒºçš„æ“ä½œ\nCtrl + BackSpace\n\n\næ·»åŠ æ³¨é‡Š\n;\n\n\nåˆ‡æ¢åˆ°æµç¨‹å›¾\nG\n\n\nCPU è§†å›¾\nAlt + C\n\n\næ–­ç‚¹è§†å›¾\nAlt + B\n\n\nå†…å­˜å¸ƒå±€è§†å›¾\nAlt + M\n\n\nè°ƒç”¨å †æ ˆè§†å›¾\nAlt + K\n\n\næ¨¡å—è§†å›¾\nAlt + E\n\n\nçº¿ç¨‹è§†å›¾\nAlt + T\n\n\nè®¡ç®—å™¨\n?\n\n\nå¸¸ç”¨å‘½ä»¤","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","é€ŸæŸ¥æ‰‹å†Œ","x64dbg"]},{"title":"Windowsç”¨æˆ·ç•Œé¢ç‰¹æƒéš”ç¦»(UIPI)","url":"/post/2701401097.html","content":"åœ¨æ—©æœŸçš„ Windows æ“ä½œç³»ç»Ÿä¸­ï¼Œåœ¨åŒä¸€ç”¨æˆ·ä¸‹è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹æœ‰ç€ç›¸åŒçš„å®‰å…¨ç­‰çº§ï¼Œæ‹¥æœ‰ç›¸åŒçš„æƒé™ã€‚æ­¤æ—¶è¿›ç¨‹å¯ä»¥è‡ªç”±åœ°å‘é€Windows æ¶ˆæ¯åˆ°å…¶ä»–è¿›ç¨‹çš„çª—å£ã€‚\nä» Windows Vista å¼€å§‹ï¼Œå¯¹äºæŸäº› Windows æ¶ˆæ¯ï¼Œè¿™ä¸€æ–¹å¼å†ä¹Ÿè¡Œä¸é€šäº†ï¼Œè¿›ç¨‹ï¼ˆæˆ–è€…å…¶ä»–çš„å¯¹è±¡ï¼‰å¼€å§‹æ‹¥æœ‰ä¸€ä¸ªæ–°çš„å±æ€§â€“ç‰¹æƒç­‰çº§(Privilege Level)ã€‚æ­¤æ—¶ä¸€ä¸ªç‰¹æƒç­‰çº§è¾ƒä½çš„è¿›ç¨‹ä¸å†å¯ä»¥å‘ç‰¹æƒç­‰çº§è¾ƒé«˜çš„è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œå³ä¾¿ä»–ä»¬åœ¨ç›¸åŒçš„ç”¨æˆ·æƒé™ä¸‹è¿è¡Œä¹Ÿä¸è¡Œï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç”¨æˆ·ç•Œé¢ç‰¹æƒéš”ç¦»(User Interface Privilege Isolation, ç®€ç§° UIPI)ã€‚\n\n\nå¼•å…¥ UIPI çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢æ¶æ„ç¨‹åºå‘é€æ¶ˆæ¯ç»™é‚£äº›æ‹¥æœ‰è¾ƒé«˜æƒé™çš„çª—å£ï¼Œä»è€Œåˆ©ç”¨è¯¥è¿›ç¨‹çš„é«˜æƒé™è¾¾åˆ°æŸç§ç›®çš„ç­‰ç­‰ã€‚\nUIPI çš„è¿è¡Œæœºåˆ¶åœ¨ Windows 7 ä¸­ï¼Œå½“ UAC(User Account Control)å¯ç”¨çš„æ—¶å€™ï¼ŒUIPI çš„è¿è¡Œå¯ä»¥å¾—åˆ°æœ€æ˜æ˜¾çš„ä½“ç°ã€‚åœ¨ UAC ä¸­ï¼Œå½“ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·ç™»å½•ç³»ç»Ÿåï¼Œæ“ä½œç³»ç»Ÿä¼šåˆ›å»ºä¸¤ä¸ªä»¤ç‰Œå¯¹è±¡(Token Object)ï¼šä¸€ä¸ªæ˜¯ç®¡ç†å‘˜ä»¤ç‰Œï¼Œæ‹¥æœ‰å¤§å¤šæ•°ç‰¹æƒ(ç±»ä¼¼äº Windows Vista ä¹‹å‰çš„ System ä¸­çš„ç”¨æˆ·)ï¼Œè€Œå¦ä¸€ä¸ªæ˜¯ç»è¿‡è¿‡æ»¤åçš„ç®€åŒ–ç‰ˆæœ¬ï¼Œåªæ‹¥æœ‰æ™®é€šç”¨æˆ·çš„æƒé™ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œä»¥æ™®é€šç”¨æˆ·æƒé™å¯åŠ¨çš„è¿›ç¨‹æ‹¥æœ‰æ™®é€šç‰¹æƒç­‰çº§ã€UIPI çš„ç­‰çº§åˆ’åˆ†ä¸ºä½ç­‰çº§(low)ï¼Œæ™®é€š(normal)ï¼Œé«˜ç­‰çº§(high)ï¼Œç³»ç»Ÿ(system)ã€‘ã€‚åŒæ ·çš„ï¼Œä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œçš„è¿›ç¨‹ï¼ˆä¾‹å¦‚ç”¨æˆ·å³é”®å•å‡»é€‰æ‹©â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€æˆ–è€…æ˜¯é€šè¿‡æ·»åŠ â€œrunasâ€å‚æ•°è°ƒç”¨ ShellExecute è¿è¡Œçš„è¿›ç¨‹ï¼‰æ‹¥æœ‰é«˜(high)ç‰¹æƒç­‰çº§ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ç³»ç»Ÿä¸­ä¼šè¿è¡Œå¤šç§ä¸åŒç±»å‹ã€ä¸åŒç‰¹æƒç­‰çº§çš„è¿›ç¨‹(å½“ç„¶ï¼Œä»æŠ€æœ¯ä¸Šè®²è¿™ä¸¤ä¸ªè¿›ç¨‹éƒ½æ˜¯åœ¨åŒä¸€ç”¨æˆ·ä¸‹)ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Windows Sysinternalså·¥å…·é›†ä¸­çš„Process ExploreræŸ¥çœ‹å„ä¸ªè¿›ç¨‹çš„ç‰¹æƒç­‰çº§ã€‚\n\næ‰€ä»¥ï¼Œå½“å‘ç°è¿›ç¨‹ä¹‹é—´ Windows æ¶ˆæ¯é€šä¿¡å‘ç”Ÿé—®é¢˜æ—¶ï¼Œä¸å¦¨ä½¿ç”¨Process ExploreræŸ¥çœ‹ä¸€ä¸‹ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´æ˜¯å¦æœ‰åˆé€‚çš„ç‰¹æƒç­‰çº§ã€‚\nUIPI æ‰€å¸¦æ¥çš„é™åˆ¶æ­£å¦‚æˆ‘ä»¬å‰æ–‡æ‰€è¯´ï¼Œç­‰çº§çš„åˆ’åˆ†ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢ä»¥ä¸‹çŠ¯ä¸Šã€‚æ‰€ä»¥ï¼Œæœ‰äº†ç”¨æˆ·ç•Œé¢ç‰¹æƒéš”ç¦»ï¼Œä¸€ä¸ªè¿è¡Œåœ¨è¾ƒä½ç‰¹æƒç­‰çº§çš„åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå°±å—åˆ°äº†è¯¸å¤šé™åˆ¶ï¼Œå®ƒä¸å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š\n\néªŒè¯ç”±è¾ƒé«˜ç‰¹æƒç­‰çº§è¿›ç¨‹åˆ›å»ºçš„çª—å£å¥æŸ„\né€šè¿‡è°ƒç”¨ SendMessage å’Œ PostMessage å‘ç”±è¾ƒé«˜ç‰¹æƒç­‰çº§è¿›ç¨‹åˆ›å»ºçš„çª—å£å‘é€ Windows æ¶ˆæ¯\nä½¿ç”¨çº¿ç¨‹é’©å­å¤„ç†è¾ƒé«˜ç‰¹æƒç­‰çº§è¿›ç¨‹\nä½¿ç”¨æ™®é€šé’©å­(SetWindowsHookEx)ç›‘è§†è¾ƒé«˜ç‰¹æƒç­‰çº§è¿›ç¨‹\nå‘ä¸€ä¸ªè¾ƒé«˜ç‰¹æƒç­‰çº§è¿›ç¨‹æ‰§è¡Œ DLL æ³¨å…¥\n\nä½†æ˜¯ï¼Œä¸€äº›ç‰¹æ®Š Windows æ¶ˆæ¯æ˜¯è¢«å®¹è®¸çš„ï¼Œå› ä¸ºè¿™äº›æ¶ˆæ¯å¯¹è¿›ç¨‹çš„å®‰å…¨æ€§æ²¡æœ‰å¤ªå¤§å½±å“ã€‚è¿™äº› Windows æ¶ˆæ¯åŒ…æ‹¬ï¼š\nã€€ã€€0x000 - WM_NULLã€€ã€€0x003 - WM_MOVEã€€ã€€0x005 - WM_SIZEã€€ã€€0x00D - WM_GETTEXTã€€ã€€0x00E - WM_GETTEXTLENGTHã€€ã€€0x033 - WM_GETHOTKEYã€€ã€€0x07F - WM_GETICONã€€ã€€0x305 - WM_RENDERFORMATã€€ã€€0x308 - WM_DRAWCLIPBOARDã€€ã€€0x30D - WM_CHANGECBCHAINã€€ã€€0x31A - WM_THEMECHANGEDã€€ã€€0x313, 0x31B (WM_???)\n\nä¿®å¤ UIPI é—®é¢˜åŸºäº Windows Vista ä¹‹å‰çš„æ“ä½œç³»ç»Ÿè¡Œä¸ºæ‰€è®¾è®¡çš„åº”ç”¨ç¨‹åºï¼Œå¯èƒ½å¸Œæœ› Windows æ¶ˆæ¯èƒ½å¤Ÿåœ¨è¿›ç¨‹ä¹‹é—´è‡ªç”±çš„ä¼ é€’ä»¥å®Œæˆä¸€äº›ç‰¹æ®Šçš„å·¥ä½œã€‚å½“è¿™äº›åº”ç”¨ç¨‹åºåœ¨ Windows 7&#x2F;10&#x2F;11 ä¸Šè¿è¡Œæ—¶ï¼Œå› ä¸º UIPI æœºåˆ¶çš„å­˜åœ¨ï¼Œè¿™ç§æ¶ˆæ¯ä¼ é€’è¢«é˜»æ–­äº†ï¼Œåº”ç”¨ç¨‹åºå°±ä¼šé‡åˆ°å…¼å®¹æ€§é—®é¢˜ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒWindows Vista å¼•å…¥äº†æ–°çš„ API å‡½æ•°ChangeWindowMessageFilterå’ŒChangeWindowMessageFilterExã€‚åœ¨ç‰¹æƒç­‰çº§è¾ƒé«˜çš„è¿›ç¨‹ä¸­åˆ©ç”¨è¿™ 2 ä¸ªå‡½æ•°å¯ä»¥æ·»åŠ æˆ–è€…åˆ é™¤èƒ½å¤Ÿé€šè¿‡ç‰¹æƒç­‰çº§éš”ç¦»çš„ Windows æ¶ˆæ¯ã€‚è¿™å°±åƒæ‹¥æœ‰è¾ƒé«˜ç‰¹æƒç­‰çº§çš„è¿›ç¨‹è®¾ç½®äº†ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¢«å…è®¸é€šè¿‡çš„ Windows æ¶ˆæ¯éƒ½å°†è¢«æ·»åŠ åˆ°è¿™ä¸ªè¿‡æ»¤å™¨çš„ç™½åå•ï¼Œåªæœ‰åœ¨è¿™ä¸ªç™½åå•ä¸Šçš„æ¶ˆæ¯æ‰å…è®¸ä¼ é€’è¿›æ¥ã€‚\nä¸‹é¢å¯¹æ·»åŠ &#x2F;ç§»é™¤ç™½åå•åŠŸèƒ½è¿›è¡Œäº†ç®€å•å°è£…ï¼ˆUIPIMsgFilterå‡½æ•°ï¼‰ï¼Œè¯¥å‡½æ•°å¯ä»¥é’ˆå¯¹ç‰¹å®šçš„çª—ä½“æ·»åŠ ã€ç§»é™¤æ¶ˆæ¯ç™½åå•ï¼š\nBOOL UIPIMsgFilter(HWND hWnd, UINT uMessageID, BOOL bAllow) &#123;    OSVERSIONINFO VersionTmp;    VersionTmp.dwOSVersionInfoSize = sizeof(OSVERSIONINFO);    GetVersionEx(&amp;VersionTmp);    BOOL res = FALSE;    if (VersionTmp.dwMajorVersion &gt;= 6) &#123; // vista above.        BOOL(WINAPI * pfnChangeMessageFilterEx)(HWND, UINT, DWORD, PCHANGEFILTERSTRUCT);        BOOL(WINAPI * pfnChangeMessageFilter)(UINT, DWORD);        CHANGEFILTERSTRUCT filterStatus;        filterStatus.cbSize = sizeof(CHANGEFILTERSTRUCT);        HINSTANCE hlib = LoadLibrary(_T(&quot;user32.dll&quot;));        if (hlib != NULL) &#123;            (FARPROC &amp;)pfnChangeMessageFilterEx = GetProcAddress(hlib, &quot;ChangeWindowMessageFilterEx&quot;);            if (pfnChangeMessageFilterEx != NULL &amp;&amp; hWnd != NULL) &#123;                res = pfnChangeMessageFilterEx(hWnd, uMessageID, (bAllow ? MSGFLT_ADD : MSGFLT_REMOVE), &amp;filterStatus);            &#125;            // If failed, try again.            if (!res) &#123;                (FARPROC &amp;)pfnChangeMessageFilter = GetProcAddress(hlib, &quot;ChangeWindowMessageFilter&quot;);                if (pfnChangeMessageFilter != NULL) &#123;                    res = pfnChangeMessageFilter(uMessageID, (bAllow ? MSGFLT_ADD : MSGFLT_REMOVE));                &#125;            &#125;        &#125;        if (hlib != NULL) &#123;            FreeLibrary(hlib);        &#125;    &#125;    else &#123;        res = TRUE;    &#125;    return res;&#125;\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"x86æ¶æ„å¸¸ç”¨å¯„å­˜å™¨åŠæ±‡ç¼–æŒ‡ä»¤","url":"/post/470495318.html","content":"x86æ¶æ„ä½œä¸ºä¸ªäººè®¡ç®—æœºå’ŒæœåŠ¡å™¨é¢†åŸŸçš„ä¸»æµè®¡ç®—æ¶æ„ï¼Œå…¶æ±‡ç¼–è¯­è¨€æ˜¯ç†è§£è®¡ç®—æœºåº•å±‚è¿è¡Œæœºåˆ¶ã€è¿›è¡Œé€†å‘å·¥ç¨‹ã€æ€§èƒ½ä¼˜åŒ–åŠåµŒå…¥å¼å¼€å‘çš„æ ¸å¿ƒåŸºç¡€ã€‚æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç†x86æ¶æ„ä¸­çš„å¸¸ç”¨å¯„å­˜å™¨â€‹å’Œå¸¸ç”¨æ±‡ç¼–æŒ‡ä»¤â€‹ï¼Œå¹¶ç»“åˆå®é™…åº”ç”¨åœºæ™¯è¯´æ˜å…¶ä½œç”¨ã€‚\n\n\nx86å¸¸ç”¨å¯„å­˜å™¨å¯„å­˜å™¨æ˜¯CPUå†…éƒ¨çš„é«˜é€Ÿå­˜å‚¨å•å…ƒï¼Œç”¨äºä¸´æ—¶å­˜æ”¾æ•°æ®ã€åœ°å€æˆ–æ§åˆ¶ä¿¡æ¯ã€‚x86å¯„å­˜å™¨æŒ‰åŠŸèƒ½å¯åˆ†ä¸ºé€šç”¨å¯„å­˜å™¨ã€æ®µå¯„å­˜å™¨ã€æ ‡å¿—å¯„å­˜å™¨ã€æŒ‡ä»¤æŒ‡é’ˆã€æ§åˆ¶å¯„å­˜å™¨ã€è°ƒè¯•å¯„å­˜å™¨åŠæµ®ç‚¹&#x2F;SIMDå¯„å­˜å™¨ç­‰ç±»åˆ«ã€‚\né€šç”¨å¯„å­˜å™¨ï¼ˆGeneral-Purpose Registers, GPRsï¼‰é€šç”¨å¯„å­˜å™¨æ˜¯æœ€å¸¸ç”¨çš„å¯„å­˜å™¨ï¼Œæ”¯æŒæ•°æ®å­˜å‚¨ã€ç®—æœ¯è¿ç®—ã€å†…å­˜å¯»å€åŠæ ˆæ“ä½œç­‰åŠŸèƒ½ã€‚æ ¹æ®æ¶æ„ä½å®½ï¼ˆ16&#x2F;32&#x2F;64ä½ï¼‰æ‰©å±•ï¼Œä»¥ä¸‹ä¸ºæ ¸å¿ƒå¯„å­˜å™¨ï¼š\n32ä½é€šç”¨å¯„å­˜å™¨\n\n\nç¼©å†™\nè‹±æ–‡å…¨ç¨‹\nåŠŸèƒ½æè¿°\n\n\n\nEAX\nExtended Accumulator Reister\nç´¯åŠ å™¨ï¼Œç”¨äºç®—æœ¯è¿ç®—ï¼ˆå¦‚ADDã€MULï¼‰ã€å‡½æ•°è¿”å›å€¼å­˜å‚¨ï¼›é«˜16ä½ä¸ºAXï¼Œä½8ä½ALï¼Œé«˜8ä½AHã€‚\n\n\nEBX\nExtended Base Register\nåŸºå€å¯„å­˜å™¨ï¼Œå¸¸ç”¨ä½œå†…å­˜è®¿é—®çš„åŸºåœ°å€ï¼ˆå¦‚æ•°ç»„ç´¢å¼•ï¼‰ï¼Œæ”¯æŒç›¸å¯¹å¯»å€ï¼ˆ[ebx+offset]ï¼‰ï¼›é«˜16ä½BXï¼Œä½8ä½BLï¼Œé«˜8ä½BHã€‚\n\n\nECX\nExtended Counter Register\nè®¡æ•°å™¨ï¼Œç”¨äºå¾ªç¯è®¡æ•°ï¼ˆå¦‚LOOPæŒ‡ä»¤è‡ªåŠ¨é€’å‡ECXï¼‰æˆ–å­—ç¬¦ä¸²æ“ä½œé‡å¤æ¬¡æ•°ï¼ˆREP MOVSBï¼‰ï¼›é«˜16ä½CXï¼Œä½8ä½CLï¼ˆä½ç§»é‡å¸¸ç”¨ï¼‰ã€‚\n\n\nEDX\nExtended Data Register\næ•°æ®å¯„å­˜å™¨ï¼Œä¸EAXé…åˆå®Œæˆå¤§æ•°è¿ç®—ï¼ˆå¦‚32ä½MUL EDX:EAXå¾—64ä½ç»“æœï¼‰ï¼›é«˜16ä½DXï¼Œä½8ä½DLï¼Œé«˜8ä½DHã€‚\n\n\nESI\nExtended Source Index Register\næºå˜å€å¯„å­˜å™¨\n\n\nEDI\nExtended Distination Index Register\nç›®çš„å˜å€å¯„å­˜å™¨\n\n\nEBP\nExtended Base Pointer Register\nåŸºæŒ‡é’ˆå¯„å­˜å™¨ï¼ŒæŒ‡å‘å½“å‰æ ˆå¸§åŸºåœ°å€ï¼ˆ[ebp+8]è®¿é—®å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ï¼›é«˜16ä½BPï¼Œæ— 8ä½æ¨¡å¼ã€‚\n\n\nESP\nExtended Stack Pointer Register\næ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼ŒæŒ‡å‘å½“å‰æ ˆé¡¶åœ°å€ï¼ŒéšPUSH&#x2F;POP&#x2F;CALLè‡ªåŠ¨è°ƒæ•´ï¼›é«˜16ä½SPï¼Œæ— 8ä½æ¨¡å¼ã€‚\n\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n64ä½é€šç”¨å¯„å­˜å™¨x86-64ï¼ˆAMD64ï¼‰æ‰©å±•äº†8ä¸ª64ä½å¯„å­˜å™¨ï¼ˆRAX-RDIï¼‰åŠæ–°å¢8ä¸ªï¼ˆR8-R15ï¼‰ï¼Œä½32ä½å…¼å®¹32ä½å¯„å­˜å™¨ï¼š\n\n\n\nç¼©å†™\nåŠŸèƒ½æè¿°\n\n\n\nRAX ~ RDI\n64ä½ç‰ˆæœ¬ï¼Œä½32ä½ä¸ºEAX-EDIï¼Œç”¨äº64ä½è¿ç®—æˆ–å­˜å‚¨æ›´å¤§èŒƒå›´æ•°æ®ã€‚\n\n\nR8 ~ R15\næ–°å¢å¯„å­˜å™¨ï¼Œä½32ä½ä¸ºR8D-R15Dï¼Œå¸¸ç”¨äº64ä½æ¨¡å¼å‡½æ•°å‚æ•°ä¼ é€’ï¼ˆå¦‚Win64ä½å‰4ä¸ªæ•´æ•°&#x2F;æŒ‡é’ˆå‚æ•°ç”¨RCXã€RDXã€R8ã€R9ä¼ é€’ï¼Œåé¢çš„å‚æ•°å†ä»å³å‘å·¦å‹æ ˆï¼‰\n\n\næ®µå¯„å­˜å™¨ï¼ˆSegment Registersï¼‰æ®µå¯„å­˜å™¨å­˜å‚¨å†…å­˜æ®µçš„åŸºåœ°å€æˆ–é€‰æ‹©å­ï¼Œåœ¨å®æ¨¡å¼å’Œä¿æŠ¤æ¨¡å¼ä¸‹ä½œç”¨ä¸åŒï¼š\nå®æ¨¡å¼é€šè¿‡â€œæ®µåœ°å€Ã—16 + åç§»åœ°å€â€è®¡ç®—20ä½ç‰©ç†åœ°å€ï¼š\nä¿æŠ¤æ¨¡å¼&#x2F;é•¿æ¨¡å¼å­˜å‚¨æ®µé€‰æ‹©å­ï¼ˆ16ä½ï¼‰ï¼ŒæŒ‡å‘å…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰&#x2F;å±€éƒ¨æè¿°ç¬¦è¡¨ï¼ˆLDTï¼‰ä¸­çš„æ®µæè¿°ç¬¦ï¼š\n\n\n\nç¼©å†™\nè‹±æ–‡å…¨ç¨‹\nåŠŸèƒ½æè¿°\n\n\n\nCS\nCode Segment Register\nä»£ç æ®µå¯„å­˜å™¨\n\n\nDS\nData Segment Register\næ•°æ®æ®µå¯„å­˜å™¨\n\n\nES\nExtra Segment Register\né™„åŠ æ®µå¯„å­˜å™¨\n\n\nSS\nStack Segment Register\næ ˆæ®µå¯„å­˜å™¨\n\n\nFS\næ— ä¸¥æ ¼å…¨ç§°\nç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œ32ä½è¿›ç¨‹å¯ä»¥é€šè¿‡ FS è·å– TEB å’Œ PEBæŒ‡é’ˆ32ä½Windowså†…æ ¸æ¨¡å¼ä¸‹ï¼Œé€šè¿‡FSè·å–KPCRæŒ‡é’ˆ\n\n\nGS\næ— ä¸¥æ ¼å…¨ç§°\nç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œ64ä½è¿›ç¨‹å¯ä»¥é€šè¿‡ GS è·å– TEBå’Œ PEBæŒ‡é’ˆ64ä½Windowså†…æ ¸æ¨¡å¼ä¸‹ï¼Œé€šè¿‡GSè·å–KPCRæŒ‡é’ˆ\n\n\næ ‡å¿—å¯„å­˜å™¨è®°å½•è¿ç®—çŠ¶æ€æˆ–æ§åˆ¶CPUè¡Œä¸ºï¼Œ32ä½ä¸ºEFLAGSï¼Œ64ä½ä¸ºRFLAGSï¼ˆä½32ä½å…¼å®¹EFLAGSï¼‰ã€‚\n\n\n\n\nç¼©å†™\nè‹±æ–‡å…¨ç¨‹\nåŠŸèƒ½æè¿°\n\n\n\nCF\nCarry Flag\nè¿›ä½æ ‡å¿—\n\n\nPF\nParity Flag\nå¥‡å¶æ ‡å¿—ï¼Œç»“æœä½8ä½ä¸­1çš„ä¸ªæ•°ä¸ºå¶æ•°æ—¶ç½®1ï¼ˆç”¨äºæ ¡éªŒï¼‰\n\n\nAF\nAuxiliary Carry Flag\nè¾…åŠ©è¿›ä½æ ‡å¿—\n\n\nZF\nZero Flag\nè¿ç®—ç»“æœä¸º0æ—¶ç½®1ï¼ˆå¦‚CMP EAX, EBXåZF&#x3D;1ï¼Œè¡¨ç¤ºEAX&#x3D;&#x3D;EBXï¼‰\n\n\nSF\nSign Flag\nç»“æœæœ€é«˜ä½ï¼ˆç¬¦å·ä½ï¼‰ä¸º1æ—¶ç½®1ï¼ˆè¡¨ç¤ºè´Ÿæ•°ï¼‰\n\n\nTF\nTrap Flag\nç½®1æ—¶CPUè¿›å…¥å•æ­¥è°ƒè¯•æ¨¡å¼ï¼ˆæ¯æ¡æŒ‡ä»¤åè§¦å‘ä¸­æ–­ï¼‰\n\n\nIF\nInterrupt Enable Flag\nç½®1æ—¶å…è®¸å¤–éƒ¨å¯å±è”½ä¸­æ–­ï¼ˆINTRï¼‰\n\n\nDF\nDirection Flag\næ§åˆ¶å­—ç¬¦ä¸²æ“ä½œæŒ‡é’ˆå¢å‡ï¼ˆCLDæ¸…é›¶â†’é€’å¢ï¼›STDç½®1â†’é€’å‡ï¼‰\n\n\nOF\nOverflow Flag\næœ‰ç¬¦å·è¿ç®—æº¢å‡ºï¼ˆå¦‚8ä½åŠ æ³•ç»“æœè¶…-128~127ï¼‰\n\n\næŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨\n\n\nç¼©å†™\nè‹±æ–‡å…¨ç§°\nåŠŸèƒ½æè¿°\n\n\n\nEIP\nExtended Instruction Pointer\n32ä½æŒ‡ä»¤æŒ‡é’ˆï¼Œå­˜å‚¨ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€\n\n\nRIP\nInstruction Pointer (64-bit)\n64ä½æŒ‡ä»¤æŒ‡é’ˆï¼Œå­˜å‚¨ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€\n\n\nx86å¸¸ç”¨æ±‡ç¼–æŒ‡ä»¤æŒ‡ä»¤æŒ‰åŠŸèƒ½åˆ†ä¸ºæ•°æ®ä¼ è¾“ã€ç®—æœ¯è¿ç®—ã€é€»è¾‘æ“ä½œã€ç§»ä½ã€æ¯”è¾ƒä¸è·³è½¬ç­‰ç±»åˆ«ã€‚å¤šæ•°æŒ‡ä»¤ä¼šä¿®æ”¹æ ‡å¿—å¯„å­˜å™¨ï¼ˆå¦‚CFã€ZFï¼‰ï¼Œå°‘æ•°ä¾‹å¤–ï¼ˆå¦‚PUSHFï¼‰ã€‚\næ•°æ®ä¼ è¾“æŒ‡ä»¤åŠŸèƒ½â€‹ï¼šå¯„å­˜å™¨ã€å†…å­˜æˆ–I&#x2F;Oç«¯å£é—´æ•°æ®ç§»åŠ¨ï¼Œâ€‹é€šå¸¸ä¸å½±å“æ ‡å¿—å¯„å­˜å™¨ã€‚\n\n\n\næŒ‡ä»¤ç¼©å†™\nè‹±æ–‡å…¨ç§°\nåŠŸèƒ½æè¿°\nå½±å“æ ‡å¿—\n\n\n\nMOV\nMove\nå¯„å­˜å™¨&#x2F;å†…å­˜ä¸å¯„å­˜å™¨&#x2F;ç«‹å³æ•°ä¼ æ•°æ®ï¼ˆå¦‚MOV EAX, 1ï¼‰ã€‚\næ— \n\n\nXCHG\nExchange\näº¤æ¢ä¸¤ä¸ªå¯„å­˜å™¨æˆ–å¯„å­˜å™¨ä¸å†…å­˜å†…å®¹ï¼ˆå¦‚XCHG EAX, EBXï¼‰ã€‚\næ— \n\n\nPUSH\nPush\næ“ä½œæ•°å‹å…¥æ ˆï¼ˆESP&#x2F;SPé€’å‡ï¼Œå¦‚PUSH EAXï¼‰ã€‚\næ— ï¼ˆé™¤éæ“ä½œæ•°æ˜¯æ ‡å¿—å¯„å­˜å™¨ï¼‰\n\n\nPOP\nPop\nä»æ ˆé¡¶å¼¹å‡ºæ•°æ®åˆ°æ“ä½œæ•°ï¼ˆESP&#x2F;SPé€’å¢ï¼Œå¦‚POP EBXï¼‰ã€‚\næ— ï¼ˆé™¤éæ“ä½œæ•°æ˜¯æ ‡å¿—å¯„å­˜å™¨ï¼‰\n\n\nLEA\nLoad Effective Address\nåŠ è½½æœ‰æ•ˆåœ°å€åˆ°å¯„å­˜å™¨ï¼ˆè®¡ç®—åœ°å€ä½†ä¸è®¿é—®å†…å­˜ï¼Œå¦‚LEA EAX, [EBX+4]ï¼‰ã€‚\næ— \n\n\nPUSHF(Push Flags)\nPush Flags onto Stack\nå°†æ ‡å¿—å¯„å­˜å™¨ï¼ˆEFLAGS&#x2F;RFLAGSï¼‰å‹æ ˆï¼ˆå¦‚PUSHFï¼‰ã€‚\næ— \n\n\nPOPF(Pop Flags)\nPop Flags from Stack\nä»æ ˆå¼¹å‡ºæ•°æ®åˆ°æ ‡å¿—å¯„å­˜å™¨ï¼ˆç›´æ¥ä¿®æ”¹æ‰€æœ‰æ ‡å¿—ï¼Œæ…ç”¨ï¼å¦‚POPFï¼‰ã€‚\nä¿®æ”¹æ‰€æœ‰æ ‡å¿—\n\n\nç®—æœ¯è¿ç®—æŒ‡ä»¤åŠŸèƒ½ï¼šåŠ å‡ä¹˜é™¤æˆ–å¸¦è¿›ä½è¿ç®—ï¼Œæ˜¾è‘—ä¿®æ”¹çŠ¶æ€æ ‡å¿—ï¼ˆCFã€ZFã€OFç­‰ï¼‰ã€‚\n\n\n\næŒ‡ä»¤ç¼©å†™\nè‹±æ–‡å…¨ç§°\nåŠŸèƒ½æè¿°\nå½±å“æ ‡å¿—\n\n\n\nADD\nAdd\nåŠ æ³•ï¼ˆdst &#x3D; dst + srcï¼Œå¦‚ADD EAX, EBXï¼‰ã€‚\nCFã€ZFã€OFã€SFã€PFã€AF\n\n\nSUB\nSubtract\nå‡æ³•ï¼ˆdst &#x3D; dst - srcï¼Œå¦‚SUB ECX, 10ï¼‰ã€‚\nåŒADD\n\n\nADC\nAdd with Carry\nå¸¦è¿›ä½åŠ æ³•ï¼ˆdst &#x3D; dst + src + CFï¼Œå¦‚ADC EDX, EAXï¼‰ã€‚\nåŒADD\n\n\nINC\nIncrement\nåŠ 1ï¼ˆdst &#x3D; dst + 1ï¼Œå¦‚INC ESIï¼‰ã€‚\nZFã€OFã€SFã€PFï¼ˆä¸å½±å“CFï¼‰\n\n\nMUL\nUnsigned Multiply\næ— ç¬¦å·ä¹˜æ³•ï¼ˆALr&#x2F;m8â†’AXï¼›EAXr&#x2F;m32â†’EDX:EAXï¼‰ã€‚\nCF&#x3D;1æˆ–OF&#x3D;1ï¼ˆç»“æœè¶…å¯„å­˜å™¨å®½åº¦æ—¶ç½®1ï¼Œå¦åˆ™æ¸…é›¶ï¼‰ï¼›å…¶ä»–æ ‡å¿—æ— å®šä¹‰\n\n\nDIV\nUnsigned Divide\næ— ç¬¦å·é™¤æ³•ï¼ˆè¢«é™¤æ•°åœ¨AX&#x2F;EDX:EAXï¼Œå•†â†’AL&#x2F;EAXï¼Œä½™æ•°â†’AH&#x2F;EDXï¼‰ã€‚\né™¤æ•°ä¸º0æˆ–å•†æº¢å‡ºæ—¶è§¦å‘#DEå¼‚å¸¸ï¼›æ ‡å¿—æ— å®šä¹‰\n\n\né€»è¾‘æ“ä½œæŒ‡ä»¤åŠŸèƒ½ï¼šæŒ‰ä½ä¸ã€æˆ–ã€å¼‚æˆ–ç­‰æ“ä½œï¼Œå½±å“ZFã€SFã€PFï¼Œæ¸…é™¤CF&#x2F;OFã€‚\n\n\n\næŒ‡ä»¤ç¼©å†™\nè‹±æ–‡å…¨ç§°\nåŠŸèƒ½æè¿°\nå½±å“æ ‡å¿—\n\n\n\nAND\nAnd\næŒ‰ä½ä¸ï¼ˆdst &#x3D; dst &amp; srcï¼Œå¦‚AND EDX, 0xFFï¼‰ã€‚\nZFã€SFã€PFï¼›CF&#x3D;0ï¼ŒOF&#x3D;0\n\n\nOR\nOr\næŒ‰ä½æˆ–ï¼ˆdst &#x3D; dst | srcï¼Œå¦‚OR EAX, 1ï¼‰ã€‚\nåŒAND\n\n\nXOR\nExclusive Or\næŒ‰ä½å¼‚æˆ–ï¼ˆdst &#x3D; dst ^ srcï¼Œå¦‚XOR ECX, ECXæ¸…é›¶ECXï¼‰ã€‚\nåŒAND\n\n\nTEST\nTest\næµ‹è¯•ä½ï¼ˆdst &amp; srcï¼Œä¸ä¿å­˜ç»“æœï¼Œå¦‚TEST EAX, 0x80æ£€æŸ¥æœ€é«˜ä½ï¼‰ã€‚\nåŒAND\n\n\nç§»ä½ä¸å¾ªç¯ç§»ä½æŒ‡ä»¤åŠŸèƒ½ï¼šå·¦ç§»ã€å³ç§»æˆ–å¾ªç¯ç§»ä½ï¼Œå½±å“CFã€OFï¼ˆå•æ¬¡ç§»ä½ï¼‰æˆ–ZFã€SFã€PFï¼ˆå¤šæ¬¡ç§»ä½ï¼‰ã€‚\n\n\n\næŒ‡ä»¤ç¼©å†™\nè‹±æ–‡å…¨ç§°\nåŠŸèƒ½æè¿°\nå½±å“æ ‡å¿—\n\n\n\nSHL\nShift Left Logical\né€»è¾‘å·¦ç§»ï¼ˆé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0ï¼Œå¦‚SHL EAX, 1ï¼‰ã€‚\nå•æ¬¡ï¼šCF&#x3D;ç§»å‡ºçš„æœ€é«˜ä½ï¼›ZF&#x2F;SF&#x2F;PFï¼›OF&#x3D;ç¬¦å·ä½æ˜¯å¦æ”¹å˜å¤šæ¬¡ï¼šCF&#x3D;æœ€åç§»å‡ºçš„ä½ï¼›OFæ— å®šä¹‰\n\n\nSHR\nShift Right Logical\né€»è¾‘å³ç§»ï¼ˆä½ä½ä¸¢å¼ƒï¼Œé«˜ä½è¡¥0ï¼Œå¦‚SHR EBX, 2ï¼‰ã€‚\nåŒSHL\n\n\nSAR\nShift Right Arithmetic\nç®—æœ¯å³ç§»ï¼ˆä½ä½ä¸¢å¼ƒï¼Œé«˜ä½è¡¥ç¬¦å·ä½ï¼Œå¦‚SAR ECX, 1ä¿æŒç¬¦å·ï¼‰ã€‚\nåŒSHL\n\n\nROL\nRotate Left\nå¾ªç¯å·¦ç§»ï¼ˆé«˜ä½ç§»åˆ°ä½ä½ï¼Œå¦‚ROL EDX, 3ï¼‰ã€‚\nå•æ¬¡ï¼šCF&#x3D;ç§»å‡ºçš„æœ€é«˜ä½ï¼›å¤šæ¬¡ï¼šCF&#x3D;æœ€åç§»å‡ºçš„ä½ï¼›OFæ— å®šä¹‰\n\n\nRCL\nRotate Left with Carry\nå¸¦è¿›ä½å¾ªç¯å·¦ç§»ï¼ˆCFå‚ä¸ï¼Œæœ€é«˜ä½â†’CFâ†’æœ€ä½ä½ï¼Œå¦‚RCL EAX, 1ï¼‰ã€‚\nå•æ¬¡ï¼šCF&#x3D;ç§»å‡ºçš„æœ€é«˜ä½ï¼›å¤šæ¬¡ï¼šCF&#x3D;æœ€åç§»å‡ºçš„ä½ï¼›OFæ— å®šä¹‰\n\n\næ¯”è¾ƒä¸æ¡ä»¶è·³è½¬æŒ‡ä»¤CMPå’ŒTESTé€šè¿‡éšå«å‡æ³•&#x2F;ä¸æ“ä½œè®¾ç½®æ ‡å¿—ï¼Œä¾›æ¡ä»¶è·³è½¬åˆ¤æ–­ã€‚\n\n\n\næŒ‡ä»¤ç¼©å†™\nè‹±æ–‡å…¨ç§°\nåŠŸèƒ½æè¿°\nå½±å“æ ‡å¿—&#x2F;ä¾èµ–æ ‡å¿—\n\n\n\nCMP\nCompare\næ¯”è¾ƒï¼ˆdst - srcï¼Œå¦‚CMP EAX, EBXï¼‰ï¼Œç­‰ä»·äº SUB dst, srcï¼ˆä¸ä¿å­˜ç»“æœï¼‰ï¼Œé€šè¿‡è®¾ç½®æ ‡å¿—å¯„å­˜å™¨åæ˜ å¤§å°å…³ç³»ã€‚\ndst &#x3D;&#x3D; srcæ—¶ï¼Œâ€‹ZF&#x3D;1  dst &gt; srcæ—¶ï¼ŒZF&#x3D;0 CF&#x3D;0 SF&#x3D;0  dst &lt; srcæ—¶ï¼ŒZF&#x3D;0 CF&#x3D;1 SF&#x3D;1\n\n\nJE&#x2F;JZ\nJump if Equal&#x2F;Zero\nZF&#x3D;1ï¼ˆdst == srcï¼Œæˆ–è¿ç®—ç»“æœä¸º0ï¼‰\nç›¸ç­‰&#x2F;ä¸ºé›¶æ—¶è·³è½¬ï¼ˆå¦‚ CMP EAX, EBX å JE Label è¡¨ç¤º EAX&#x3D;EBX æ—¶è·³è½¬ï¼‰\n\n\nJNE&#x2F;JNZ\nJump if Not Equal&#x2F;Not Zero\nZF&#x3D;0ï¼ˆdst != srcï¼Œæˆ–è¿ç®—ç»“æœé0ï¼‰\nä¸ç›¸ç­‰&#x2F;éé›¶æ—¶è·³è½¬\n\n\nJG&#x2F;JNLE\nJump if Greater&#x2F;Not Less or Equal\nZF&#x3D;0 ä¸” SF&#x3D;OFï¼ˆæœ‰ç¬¦å·æ¯”è¾ƒï¼šdst &gt; srcï¼Œä¸åŒ…æ‹¬ç­‰äºï¼‰\næœ‰ç¬¦å·å¤§äºæ—¶è·³è½¬ï¼ˆå¦‚ CMP EAX, EBX å JG Label è¡¨ç¤º EAX&gt;EBX æ—¶è·³è½¬ï¼‰\n\n\nJGE\nJump if Greater or Equal\nSF&#x3D;OFï¼ˆæœ‰ç¬¦å·æ¯”è¾ƒï¼šdst â‰¥ srcï¼ŒåŒ…æ‹¬ç­‰äºï¼‰\næœ‰ç¬¦å·å¤§äºç­‰äºæ—¶è·³è½¬ï¼ˆdst == src æ—¶ ZF&#x3D;1ï¼Œä»æ»¡è¶³ SF&#x3D;OFï¼‰\n\n\nJL\nJump if Less\nSFâ‰ OFï¼ˆæœ‰ç¬¦å·æ¯”è¾ƒï¼šdst &lt; srcï¼‰\næœ‰ç¬¦å·å°äºæ—¶è·³è½¬\n\n\nJLE\nJump if Less or Equal\nZF&#x3D;1 æˆ– SF!&#x3D;OFï¼ˆæœ‰ç¬¦å·æ¯”è¾ƒï¼šdst â‰¤ srcï¼ŒåŒ…æ‹¬ç­‰äºï¼‰\næœ‰ç¬¦å·å°äºç­‰äºæ—¶è·³è½¬\n\n\nJB&#x2F;JC\nJump if Below&#x2F;Jump if Carry\nCF&#x3D;1ï¼ˆæ— ç¬¦å·æ¯”è¾ƒï¼šdst &lt; srcï¼Œæˆ–å‡æ³•äº§ç”Ÿå€Ÿä½ï¼‰\næ— ç¬¦å·å°äºæ—¶è·³è½¬ï¼ˆå¦‚ CMP AL, BL å JB Label è¡¨ç¤º AL&lt;BL æ—¶è·³è½¬ï¼‰\n\n\nJAE&#x2F;JNB\nJump if Above or Equal&#x2F;Jump if Not Below\nCF&#x3D;0ï¼ˆæ— ç¬¦å·æ¯”è¾ƒï¼šdst â‰¥ srcï¼Œæˆ–å‡æ³•æ— å€Ÿä½ï¼‰\næ— ç¬¦å·å¤§äºç­‰äºæ—¶è·³è½¬\n\n\nJA\nJump if Above\nCF&#x3D;0 ä¸” ZF&#x3D;0ï¼ˆæ— ç¬¦å·æ¯”è¾ƒï¼šdst &gt; srcï¼‰\næ— ç¬¦å·å¤§äºæ—¶è·³è½¬\n\n\nCALL\nCall Procedure\næ— ï¼ˆå‹è¿”å›åœ°å€åˆ°æ ˆï¼Œè·³è½¬åˆ°å­ç¨‹åºï¼‰\nè°ƒç”¨å­å‡½æ•°ï¼ˆå¦‚ CALL Funcï¼‰\n\n\nRET\nReturn\næ— ï¼ˆå¼¹å‡ºæ ˆé¡¶è¿”å›åœ°å€ï¼Œè¿”å›è°ƒç”¨å¤„ï¼‰\nå­å‡½æ•°è¿”å›\n\n\n\nå®Œæ•´çš„æŒ‡ä»¤æ–‡æ¡£å¯ä»¥å‚è€ƒï¼šhttps://shell-storm.org/x86doc/\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["æ±‡ç¼–"]},{"title":"ä¸ºä»€ä¹ˆSetParentä¼šå¤±è´¥","url":"/post/3832058229.html","content":"SetParentæ˜¯Windowsæä¾›çš„è®¾ç½®çª—å£çˆ¶çª—ä½“çš„APIï¼Œå‡½æ•°åŸå‹æ¯”è¾ƒç®€å•ï¼š\nHWND SetParent(  [in]           HWND hWndChild,  [in, optional] HWND hWndNewParent);\n\næˆ‘ä»¬é€šå¸¸çš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š\nif(!SetParent(hChild, hParent)) &#123;  // Failed&#125;\n\nè¿™ç§ä½¿ç”¨æ–¹æ³•åœ¨å¤§å¤šæƒ…å†µä¸‹ä¸ä¼šå¤±è´¥ï¼Œä½†æœ‰æ—¶å´ä¼šå¤±è´¥ã€‚ç©¶å…¶åŸå› ï¼Œå…¶åœ¨å¾®è½¯å®˜æ–¹æ–‡æ¡£ä¸­å·²æœ‰è¯´æ˜SetParent Docã€‚\nç”±äºå…¼å®¹æ€§é—®é¢˜ï¼ŒSetParentå‡½æ•°ä¸ä¼šä¿®æ”¹hWndChildçª—å£çš„WS_CHILDå’ŒWS_POPUPæ ·å¼ï¼Œå› æ­¤ï¼š\n\nå¦‚æœhWndNewParentä¸ºNULLï¼Œä½ éœ€è¦åœ¨è°ƒç”¨SetParentå‡½æ•°åæ¸…é™¤WS_CHILDå¹¶è®¾ç½®WS_POPUPæ ·å¼ã€‚\nå¦‚æœhWndNewParentä¸ä¸ºNULLå¹¶ä¸”hWndChildä¹‹å‰æ˜¯æ¡Œé¢çš„å­çª—å£ï¼Œä½ éœ€è¦åœ¨è°ƒç”¨SetParentå‡½æ•°å‰æ¸…é™¤WS_POPUPå¹¶è®¾ç½®WS_CHILDæ ·å¼ã€‚\n\næ€»ç»“ä¸Šè¿°åŸå› ï¼ŒSetParentçš„æ­£ç¡®ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\nbool SetWinParent(HWND hChild, HWND hNewParent) &#123;    HWND hOldParent = NULL;    if (hNewParent) &#123;        LONG newStyle = GetWindowLong(hChild, GWL_STYLE);        newStyle &amp;= ~WS_POPUP;        newStyle |= WS_CHILD;        SetWindowLong(hChild, GWL_STYLE, newStyle);        hOldParent = ::SetParent(hChild, hNewParent);    &#125;    else &#123;        hOldParent = ::SetParent(hChild, hNewParent);        LONG newStyle = GetWindowLong(hChild, GWL_STYLE);        newStyle &amp;= ~WS_CHILD;        newStyle |= WS_POPUP;        SetWindowLong(hChild, GWL_STYLE, newStyle);    &#125;    return !!hOldParent;&#125;\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"Windowsèµ„æºç®¡ç†å™¨å›¾æ ‡è¦†ç›–ä¼˜å…ˆçº§è®¾å®š","url":"/post/2567544627.html","content":"æˆ‘ä»¬åœ¨å®‰è£…äº†TortoiseSVNæˆ–TortoiseGitåï¼Œä¼šè‡ªåŠ¨åœ¨èµ„æºç®¡ç†å™¨çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å›¾æ ‡ä¸Šæ˜¾ç¤ºè¦†ç›–å›¾æ ‡ï¼ˆIcon Overlayï¼‰ï¼Œè¿™æ ·å¯ä»¥æ¯”è¾ƒæ–¹ä¾¿çš„æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ã€‚\nä½†æœ‰æ—¶å€™æˆ‘ä»¬å®‰è£…çš„å…¶ä»–è½¯ä»¶ï¼Œå¦‚Dropboxç­‰ï¼Œä¹Ÿä¼šåœ¨èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤ºè¦†ç›–å›¾æ ‡ã€‚å¤šä¸ªè½¯ä»¶éƒ½æ˜¾ç¤ºè¦†ç›–å›¾æ ‡æ—¶ï¼Œä¼šç”±äºä¼˜å…ˆçº§é—®é¢˜å¯¼è‡´è¦†ç›–å›¾æ ‡ä¸æ˜¾ç¤ºçš„é—®é¢˜ã€‚\næœ¬æ–‡è®²è¿°å¦‚ä½•é€šè¿‡è°ƒæ•´è½¯ä»¶è¦†ç›–å›¾æ ‡çš„ä¼˜å…ˆçº§æ¥è§£å†³è¯¸å¦‚æ­¤ç±»çš„é—®é¢˜ã€‚\n\næ‰“å¼€æ³¨å†Œè¡¨ï¼š\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\n\né€šè¿‡ä¿®æ”¹ShellIconOverlayIdentifiersçš„å„ä¸ªå­é¡¹çš„åç§°æ¥æ”¹å˜è¦†ç›–å›¾æ ‡æ˜¾ç¤ºçš„ä¼˜å…ˆçº§ã€‚\nå¦‚ï¼š1Tortoise1Normalå°±æ’åœ¨2Tortoise2Modifiedçš„å‰é¢ã€‚\n\n\nå‚è€ƒï¼šmanaging-overlay-icons\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"äº†è§£æ•°å­—è¯ä¹¦","url":"/post/3462229631.html","content":"æ‰“å¼€ä»»ä½•ä¸€ä¸ªæ•°å­—è¯ä¹¦å”®å–ç½‘ç«™éƒ½å¯ä»¥çœ‹åˆ°å®ƒä»¬é€šå¸¸å°†æ•°å­—è¯ä¹¦åˆ†ä¸ºä¸¤ä¸ªå¤§ç±»ï¼šSSLè¯ä¹¦å’Œæ•°å­—ç­¾åè¯ä¹¦ã€‚\nSSLè¯ä¹¦çš„ä¸»è¦ä½œç”¨æ˜¯å¯¹ç½‘ç«™è¿›è¡Œèº«ä»½éªŒè¯å’Œä¼ è¾“æ•°æ®åŠ å¯†ï¼›\næ•°å­—ç­¾åä¸»è¦ç”¨äºéªŒè¯ä¿¡æ¯çš„çœŸå®æ€§å’Œå®Œæ•´æ€§ï¼Œæ ¹æ®ä½¿ç”¨åœºæ™¯çš„ä¸åŒå¤§è‡´åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š\n\nå¯¹å®¢æˆ·ç«¯ç¨‹åºï¼ˆ.exeã€.dllã€.sysç­‰æ–‡ä»¶ï¼‰ç­¾åçš„ä»£ç ç­¾åè¯ä¹¦ã€‚\nå¯¹PDFç­‰æ–‡æ¡£ç­¾åçš„æ–‡æ¡£ç­¾åè¯ä¹¦ã€‚\nå¯¹ç”µå­é‚®ä»¶åŠå…¶é™„ä»¶ç­¾åå’ŒåŠ å¯†çš„é‚®ä»¶å®‰å…¨è¯ä¹¦ã€‚\n\n\n\n\né¢å‘æœºæ„æœ‰å¾ˆå¤šæœºæ„éƒ½å¯ä»¥é¢å‘æ•°å­—è¯ä¹¦ï¼Œæ¯”å¦‚ GlobalSignã€DigiCertã€Geotrustã€Sectigoã€WoTrusã€Entrust ç­‰ï¼Œæœ‰çš„æœºæ„åªèƒ½é¢å‘SSLè¯ä¹¦ï¼Œæœ‰çš„æœºæ„å¯ä»¥é¢å‘æ‰€æœ‰ç±»å‹çš„è¯ä¹¦ã€‚\næœºæ„æœ‰å¤§å°ä¹‹åˆ†ï¼Œæ‰€é¢å‘çš„è¯ä¹¦ä¹Ÿæœ‰çŸ¥ååº¦å’Œè®¤å¯åº¦ä¹‹åˆ†ï¼Œä»·æ ¼ä¹Ÿæœ‰é«˜ä½ä¹‹åˆ†ã€‚\n\nDVã€OVã€EVçš„åŒºåˆ«é¦–å…ˆä»‹ç»ä¸€ä¸‹å®ƒä»¬çš„å…¨ç§°ï¼š\nDV = Domain Validation åŸŸåéªŒè¯OV = Organization Validation æœºæ„éªŒè¯EV = Extended Validation æ‰©å±•éªŒè¯\n\nè¦äº†è§£ DVã€OV å’Œ EV è¿™ä¸‰ç±»è¯ä¹¦ä¹‹é—´çš„åŒºåˆ«ï¼Œé¦–å…ˆè¦äº†è§£ DigiCert ç­‰è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰æ˜¯å¦‚ä½•é¢å‘è¯ä¹¦çš„ã€‚\nCA ä½œä¸ºå—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ï¼Œå®ƒé€šè¿‡éªŒè¯ç”³è¯·è€…çš„å‡ ä¸ªç»†èŠ‚æ¥ç¡®å®šæ˜¯å¦å¯ä»¥é¢å‘è¯ä¹¦ã€‚ç”³è¯·ä¸‰ç§ç±»å‹çš„è¯ä¹¦æ‰€éœ€è¦éªŒè¯çš„æ¡ä»¶ä» DV -&gt; OV -&gt; EV ä¾æ¬¡å¢åŠ ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´äº†ä¸‰ç§ç±»å‹çš„è¯ä¹¦çš„å¯ä¿¡åº¦ä¹Ÿæ˜¯ä¾æ¬¡å¢åŠ çš„ã€‚\nåœ¨ DV çº§åˆ«ï¼ŒéªŒè¯æµç¨‹ç›¸å½“çŸ­ï¼Œåªè¦æ±‚è´­ä¹°è€…è¯æ˜å…¶å¯¹åŸŸåçš„æ‰€æœ‰æƒã€‚éªŒè¯æ–¹å¼æ˜¯CAå‘ï¼ˆWHOISæ•°æ®åº“æ‰€åˆ—çš„ï¼‰åŸŸåæ‰€æœ‰è€…å‘é€ç”µå­é‚®ä»¶ã€‚å¦‚æœæ‚¨ç«‹å³éœ€è¦è¯ä¹¦ï¼Œè¿™ç®—æ˜¯ä¸€ç§ä¾¿æ·çš„éªŒè¯æ–¹æ³•ï¼Œä½†è¿™ç§åªè¿›è¡Œä¸€é¡¹æ£€æŸ¥çš„éªŒè¯å½¢å¼æ˜¯äº’è”ç½‘ä¸­æœ€ä½æ ‡å‡†çš„éªŒè¯å½¢å¼ï¼Œå…¶ç›¸åº”çš„ä¿¡ä»»åº¦ä¹Ÿåº”è¯¥æ˜¯æœ€ä½çš„ã€‚ç”±äº DV è¯ä¹¦åªéªŒè¯åŸŸåçš„æ‰€æœ‰æƒï¼Œå› æ­¤ DV ç±»å‹çš„è¯ä¹¦åªå­˜åœ¨äº SSL è¯ä¹¦ä¸­ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;OV å’Œ EV è¯ä¹¦çš„åŒºåˆ«åœ¨äºè·å–è¯ä¹¦æ‰€éœ€è¦çš„é¢å¤–çš„éªŒè¯æ¡ä»¶å’Œæ­¥éª¤ã€‚å¯¹äºEVå’ŒOVè¯ä¹¦ï¼ŒCAå¿…é¡»éªŒè¯åŸŸåæ‰€æœ‰è€…ä»¥åŠä¸è¯ä¹¦ç›¸å…³è”çš„ä¼ä¸šçš„ç›¸å…³è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€ç±»å‹ã€çŠ¶æ€å’Œå®é™…åœ°å€ã€‚\nè€Œè¦è·å¾—EVï¼Œè¿˜éœ€è¦å‡ ä¸ªé¢å¤–æ­¥éª¤ï¼ŒåŒ…æ‹¬éªŒè¯ä¼ä¸šçš„å¯¹å¤–ç”µè¯å·ç ã€å¼€å±•ä¸šåŠ¡çš„å¹´é™ã€æ³¨å†Œå·å’Œç®¡è¾–æƒï¼Œä»¥åŠåŸŸåæ¬ºè¯ˆæ£€æŸ¥ã€è”ç³»äººé»‘åå•æ£€æŸ¥å¹¶è‡´ç”µä»¥éªŒè¯ç”³è¯·è€…çš„å°±ä¸šæƒ…å†µã€‚\n\næˆ‘ä»¬è´­ä¹°è¯ä¹¦é€šå¸¸æ˜¯é€šè¿‡CAæœºæ„åœ¨å›½å†…çš„ä»£ç†å•†æ¥ç”³è¯·å’Œè´­ä¹°çš„ï¼Œå› æ­¤å…·ä½“éœ€è¦éªŒè¯å“ªäº›ææ–™ï¼Œå¯ä»¥å’¨è¯¢ä»£ç†å•†ï¼ˆå¦‚äºšæ´²è¯šä¿¡ã€é”æˆä¿¡æ¯ã€æ•°å®‰æ—¶ä»£ç­‰ç­‰ï¼Œå¤šå¦‚ç‰›æ¯›ï¼‰ï¼Œé€šå¸¸æ²¡æœ‰é‚£ä¹ˆå¤æ‚ï¼Œéƒ½æ˜¯é’±çš„äº‹æƒ…ã€‚\n\nSmartScreenåœ¨ä»‹ç» OV å’Œ EV ç±»å‹çš„ä»£ç ç­¾åè¯ä¹¦çš„åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ Windows ä¸Šçš„ SmartScreen ç‰¹æ€§ã€‚\nSmartScreen å…¨ç§° Microsoft Defender SmartScreenï¼Œæ˜¯ Windowsã€Internet Explorer å’Œ Microsoft Edge æä¾›çš„ä¸€ä¸ªå¯é˜²æ­¢ç½‘ç»œé’“é±¼ã€æ¶æ„è½¯ä»¶ç½‘ç«™ã€åº”ç”¨ç¨‹åºä»¥åŠæ½œåœ¨æ¶æ„æ–‡ä»¶ä¸‹è½½çš„å®‰å…¨åŠŸèƒ½ã€‚\nSmartScreen é€šè¿‡è”æœºæœåŠ¡æ£€æŸ¥æœ‰å…³ä¸‹è½½çš„åº”ç”¨ç¨‹åºçš„æ•°å­—ç­¾åä¿¡æ¯ï¼Œä»¥ç¡®å®šä¸‹è½½ç¨‹åºçš„ä¿¡èª‰ã€‚å¦‚æœæ­¤åº”ç”¨ç¨‹åºæ²¡æœ‰å»ºç«‹ä¿¡èª‰ï¼ŒSmartScreen ä¼šè®¤ä¸ºå®ƒæ˜¯æ¶æ„ç¨‹åºçš„é£é™©è¾ƒé«˜ï¼Œå°±ä¼šå‘ç”¨æˆ·æ˜¾ç¤ºè¯¸å¦‚â€œæœªçŸ¥å‘å¸ƒè€…â€çš„è­¦å‘Šã€‚\nä¸‹é¢æ˜¯å‡ ç§å¯èƒ½å‡ºç°çš„ SmartScreen è­¦å‘Šçš„æ ·å¼ï¼š\n\n\n\n\n\n\nå¯¹äºæ­¤ç±»è­¦å‘Šï¼Œå¾®è½¯çš„å»ºè®®æ˜¯â€œä½¿ç”¨ä»£ç ç­¾åå¯¹ç¨‹åºè¿›è¡Œæ•°å­—ç­¾åâ€ï¼Œâ€œä½¿ç”¨å±äº Windows æ ¹è¯ä¹¦è®¡åˆ’çš„è¯ä¹¦é¢å‘æœºæ„(CA)é¢å‘çš„ä»£ç ç­¾åè¯ä¹¦â€ï¼Œä»¥éªŒè¯å‘å¸ƒè€…çš„çœŸå®èº«ä»½ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºä»£ç çš„å®Œæ•´æ€§ã€‚\nä½¿ç”¨ OV ç±»å‹è¯ä¹¦ç­¾åçš„ç¨‹åºå¯èƒ½ä¸ä¼šç«‹å³æ¶ˆé™¤ SmartScreen è­¦å‘Šï¼Œéœ€è¦ç´¯è®¡ä¸€å®šçš„ä¸‹è½½é‡åæ‰ä¼šæ¶ˆé™¤ï¼Œå¾®è½¯æ²¡æœ‰å…¬å¸ƒå…·ä½“çš„æ¶ˆé™¤è§„åˆ™ã€‚ä½†ç”±äº EV ç±»å‹ç­¾åè¯ä¹¦çš„å®¡æ ¸è§„åˆ™æ›´åŠ ä¸¥æ ¼ï¼Œå› æ­¤ä½¿ç”¨ EV ç±»å‹è¯ä¹¦ç­¾åçš„ç¨‹åºå¯ä»¥ç«‹å³æ¶ˆé™¤è¯¥è­¦å‘Šã€‚\nä»£ç ç­¾åè¯ä¹¦OVå’ŒEVçš„åŒºåˆ«&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸‹é¢åˆ—å‡ºäº†OVå’ŒEVç±»å‹çš„ä»£ç ç­¾åè¯ä¹¦çš„ä¸åŒä¹‹å¤„ã€‚\n\nOVç±»å‹çš„ä»£ç ç­¾åè¯ä¹¦ä¹Ÿç§°ä¹‹ä¸ºæ™®é€šæˆ–æ ‡å‡†å‹ä»£ç ç­¾åè¯ä¹¦ã€‚\n\n\n\n\nåŒºåˆ«\nOVä»£ç ç­¾åè¯ä¹¦\nEVä»£ç ç­¾åè¯ä¹¦\n\n\n\nå®¡æ ¸å†…å®¹\nä¼ä¸šä¿¡æ¯\nä¼ä¸šä¿¡æ¯åŠå…¶ä»–çš„ä¿¡æ¯ã€‚ç»å¤§å¤šæ•°å…¬å¸éƒ½æ˜¯å¯ä»¥ç”³è¯·çš„ï¼Œåªæ˜¯éœ€è¦ç­¾ç½²æ›´å¤šçš„ææ–™è€Œå·²\n\n\né¢å‘å‘¨æœŸ\næ—¶é—´ä¸å›ºå®šï¼Œ1å‘¨å·¦å³\næ—¶é—´ä¸å›ºå®šï¼Œ1~2å‘¨å·¦å³\n\n\nå¯ç­¾åçš„è½¯ä»¶ç±»å‹\nåªæ”¯æŒç­¾ååº”ç”¨è½¯ä»¶ï¼Œå¦‚.exeã€.dllã€.cabã€.ocxã€.msiã€.xpiï¼Œä¸èƒ½ç­¾åé©±åŠ¨ç¨‹åº\næ”¯æŒç­¾ååº”ç”¨è½¯ä»¶å’Œé©±åŠ¨ç¨‹åº\n\n\nWindowsç¡¬ä»¶è®¤è¯ï¼ˆWHQLï¼‰äº¦ç§°å¾½æ ‡è®¤è¯\nä¸æ”¯æŒ\næ”¯æŒ\n\n\nSmartScreenå³æ—¶ä¿¡èª‰\né€šè¿‡ç´¯è®¡è·å¾—ä¿¡èª‰ï¼Œä½†å¾®è½¯æœªå…¬å¸ƒå…·ä½“è§„åˆ™\nç«‹å³è·å¾—\n\n\nå¦‚ä½•åŒºåˆ†OVå’ŒEVä»£ç ç­¾å\n\nä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒEVè¯ä¹¦æ¯”OVè¯ä¹¦å¤šäº†å¾ˆå¤šå­—æ®µã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"ä½¿ç”¨WinDbgè°ƒè¯•äº’æ–¥ä½“æ­»é”","url":"/post/1092140776.html","content":"æœ¬æ–‡é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥è®²è§£å¦‚ä½•ä½¿ç”¨ WinDbg æ¥è°ƒè¯• Windows Mutex æ­»é”çš„é—®é¢˜ã€‚\n\n\næ¼”ç¤ºç”¨ä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªä¼šå¯¼è‡´ Mutex æ­»é”çš„ç¨‹åºã€‚\n#include &lt;windows.h&gt;#include &lt;tchar.h&gt;#include &lt;process.h&gt;HANDLE hMutexA = NULL;HANDLE hMutexB = NULL;unsigned __stdcall ThreadProc1(void * pArg) &#123;\tWaitForSingleObject(hMutexA, INFINITE);\tSleep(500);\tWaitForSingleObject(hMutexB, INFINITE);\tprintf(&quot;+++\\n&quot;);\tReleaseMutex(hMutexB);\tReleaseMutex(hMutexA);\treturn 0;&#125;unsigned __stdcall ThreadProc2(void * pArg) &#123;\tWaitForSingleObject(hMutexB, INFINITE);\tSleep(500);\tWaitForSingleObject(hMutexA, INFINITE);\tprintf(&quot;...\\n&quot;);\tReleaseMutex(hMutexA);\tReleaseMutex(hMutexB);\treturn 0;&#125;int main()&#123;\thMutexA = CreateMutex(NULL, FALSE, TEXT(&quot;MutexA&quot;));\thMutexB = CreateMutex(NULL, FALSE, TEXT(&quot;MutexB&quot;));\t// å¯åŠ¨çº¿ç¨‹\tHANDLE hThread1 = (HANDLE)_beginthreadex(NULL, 0, ThreadProc1, NULL, 0, NULL);\tHANDLE hThread2 = (HANDLE)_beginthreadex(NULL, 0, ThreadProc2, NULL, 0, NULL);\tgetchar();\t// ç­‰å¾…çº¿ç¨‹é€€å‡ºå¹¶å…³é—­å¥æŸ„\tif (hThread1) &#123;\t\tWaitForSingleObject(hThread1, INFINITE);\t\tCloseHandle(hThread1);\t&#125;\tif (hThread2) &#123;\t\tWaitForSingleObject(hThread2, INFINITE);\t\tCloseHandle(hThread2);\t&#125;\t// å…³é—­å¥æŸ„\tif(hMutexA)\t\tCloseHandle(hMutexA);\tif(hMutexB)\t\tCloseHandle(hMutexB);    return 0;&#125;\n\næ­»é”åŸå› ç¨‹åºç”Ÿæˆäº† 2 ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹ 1ã€çº¿ç¨‹ 2ï¼‰å’Œ 2 ä¸ªäº’æ–¥ä½“ MutexA å’Œ MutexBã€‚è§‚å¯Ÿçº¿ç¨‹æ‰§è¡Œä»£ç å¯çŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ­»é”ç”¨ä¾‹ï¼Œ2 ä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…ã€‚\nçº¿ç¨‹ 1ï¼š æ‹¥æœ‰ MutexA â€“&gt; è¿‡ä¸€æ®µæ—¶é—´(sleep) â€”&gt; æƒ³æ‹¥æœ‰ MutexB\nçº¿ç¨‹ 2ï¼š æ‹¥æœ‰ MutexB â€“&gt; è¿‡ä¸€æ®µæ—¶é—´(sleep) â€”&gt; æƒ³æ‹¥æœ‰ MutexA\nçº¿ç¨‹ 1 æƒ³æ‹¥æœ‰å±äºçº¿ç¨‹ 2 çš„ MutexBï¼Œè€Œçº¿ç¨‹ 2 å´æƒ³æ‹¥æœ‰å±äºçº¿ç¨‹ 1 çš„ MutexAï¼Œäº’ä¸æ¾æ‰‹ï¼Œå°±åªèƒ½éƒ½ç­‰ç€äº†ã€‚\nWindbg è°ƒè¯•~*kvnæŸ¥çœ‹æ‰€æœ‰çº¿ç¨‹è°ƒç”¨å †æ ˆï¼š\nä»çº¿ç¨‹#1 æ ˆå¸§ 03 å¯ä»¥çœ‹åˆ°å…¶æ­£åœ¨ç­‰å¾…å¥æŸ„ 00000038ã€‚ä»çº¿ç¨‹#2 æ ˆå¸§ 03 å¯ä»¥çœ‹åˆ°å…¶æ­£åœ¨ç­‰å¾…å¥æŸ„ 00000034ã€‚å³ï¼šçº¿ç¨‹#1ï¼ˆIDï¼š22f4ï¼‰â€”&gt;ç­‰å¾…å¥æŸ„ 38çº¿ç¨‹#2ï¼ˆIDï¼š33bcï¼‰â€”&gt; ç­‰å¾…å¥æŸ„ 34\nä½¿ç”¨!handleå‘½ä»¤æŸ¥çœ‹å¥æŸ„ 00000034 å’Œ 00000038 æ˜¯ä»€ä¹ˆç±»å‹ï¼š\nä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼šå¥æŸ„ 00000034 ä¸ºåä¸º MutexA çš„äº’æ–¥ä½“ï¼Œè¢«çº¿ç¨‹ IDï¼š2264 æ‹¥æœ‰ã€‚å¥æŸ„ 00000038 ä¸ºåä¸º MutexB çš„äº’æ–¥ä½“ï¼Œè¢«çº¿ç¨‹ IDï¼š33bc æ‹¥æœ‰ã€‚\nå³ï¼šçº¿ç¨‹#1ï¼ˆIDï¼š22f4ï¼‰ç­‰å¾… 00000038ï¼ˆäº’æ–¥ä½“ MutexA ï¼‰ï¼Œæ‹¥æœ‰ 00000034ï¼ˆäº’æ–¥ä½“ MutexB)çº¿ç¨‹#2ï¼ˆIDï¼š33bcï¼‰ç­‰å¾…å¥æŸ„ 00000034ï¼ˆäº’æ–¥ä½“ MutexB ï¼‰ï¼Œæ‹¥æœ‰ 00000038ï¼ˆäº’æ–¥ä½“ MutexA)\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","Windbg"]},{"title":"ä½¿ç”¨WinDbgè°ƒè¯•å…³é”®åŒºæ­»é”","url":"/post/3177767322.html","content":"æœ¬æ–‡é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥è®²è§£å¦‚ä½•ä½¿ç”¨ WinDbg æ¥è°ƒè¯• Windows CriticalSection æ­»é”çš„é—®é¢˜ã€‚\næ¼”ç¤ºç¤ºä¾‹è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®åŒºé”æ­»é—®é¢˜çš„ç¨‹åºï¼Œè¿è¡Œä¹‹åä¾æ¬¡ç‚¹å‡»â€œCS é”æ­»â€æŒ‰é’®ã€å³ä¸Šè§’é€€å‡ºæŒ‰é’®ï¼Œç¨‹åºå°±ä¼šå¡æ­»ã€‚\n\nå¯¹äºçœ¼ä¸‹çš„è¿™ä¸ªé—®é¢˜ï¼Œç•Œé¢å®Œå…¨å¤±å»å“åº”ï¼Œè¿™è¯´æ˜è´Ÿè´£æ¶ˆæ¯å¤„ç†çš„ UI çº¿ç¨‹é˜»å¡äº†ã€‚\nå¯¹äºå‡ ä¹æ‰€æœ‰çš„ windows GUI ç¨‹åºï¼Œç¼–å·ä¸º 0 çš„åˆå§‹çº¿ç¨‹å°±æ˜¯ UI çº¿ç¨‹ï¼Œwindows å‘ç°è¯¥ç•Œé¢ä¸€æ®µæ—¶é—´æ²¡æœ‰æ¶ˆæ¯å“åº”ä¹‹åå°±ä¼šåœ¨æ ‡é¢˜åé¢åŠ ä¸Šâ€œï¼ˆæœªå“åº”ï¼‰â€ã€‚\n\n\nWinDbg è°ƒè¯•å¯åŠ¨ Windbgï¼Œé™„åŠ åˆ°æ‰§è¡Œè¿›ç¨‹ï¼ˆF6ï¼‰ã€‚\n~*knv3æŸ¥çœ‹å„ä¸ªçº¿ç¨‹çš„è°ƒç”¨å †æ ˆï¼Œæ•°å­— 3 è¡¨ç¤ºæ˜¾ç¤ºçš„å †æ ˆæ·±åº¦ï¼Œçœç•¥å³æ˜¾ç¤ºå®Œæ•´å †æ ˆã€‚\n\n#0 å·çº¿çš„æ ˆå¸§ 0 è¡¨ç¤ºçº¿ç¨‹ç¨‹é˜»å¡åœ¨NtWaitForSingleObjectå‡½æ•°ï¼ŒMSDN å¾—çŸ¥è¯¥å‡½æ•°åŸå‹ä¸ºï¼š\nNTSTATUS WINAPI NtWaitForSingleObject( _In_ HANDLE         Handle,  _In_ BOOLEAN        Alertable,  _In_ PLARGE_INTEGER Timeout);\n\nç¬¬ä¸€ä¸ªå‚æ•° Handle ä¸ºå…¶ç­‰å¾…çš„å¥æŸ„ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° TimeOut ä¸ºè¶…æ—¶æ—¶é—´ã€‚åŒæ ·ä»æ ˆå¸§ 0 å¾—çŸ¥ NtWaitForSingleObject æ­£åœ¨ç­‰å¾…å¥æŸ„ 000000c4ï¼Œè¶…æ—¶æ—¶é—´ä¸º 0ï¼ˆå³æ²¡ä¿¡å·å°±ä¸€ç›´ç­‰å¾…ï¼‰ã€‚\n!handle 000000c4 f å‘½ä»¤æŸ¥çœ‹ 000000c4 å¥æŸ„çš„ä¿¡æ¯ï¼š\n\nç°åœ¨æˆ‘ä»¬çŸ¥é“ c4 å¥æŸ„å°±æ˜¯çº¿ç¨‹ ID:20d0 çš„å¥æŸ„ï¼Œä¸»çº¿ç¨‹åœ¨é€€å‡ºçš„æ—¶å€™ç­‰å¾…è¯¥çº¿ç¨‹é€€å‡ºï¼Œè€Œè¯¥çº¿ç¨‹ä¸€ç›´æ²¡æœ‰é€€å‡ºï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹å¡æ­»äº†ã€‚\næ ¹æ®å›¾ 3 å¾—çŸ¥ 20d0 çº¿ç¨‹å°±æ˜¯#1 çº¿ç¨‹ï¼Œ~1kvnæŸ¥çœ‹è¯¥çº¿ç¨‹å®Œæ•´å †æ ˆï¼š\n\næ ˆå¸§ 00 NtWaitForSingleObjectè¡¨ç¤ºçº¿ç¨‹åœ¨ç­‰å¾… 000000c0 å¥æŸ„ã€‚\n!handle!handle 000000c0 fæŸ¥çœ‹å¥æŸ„ä¿¡æ¯ï¼Œå¾—çŸ¥ c0 å¥æŸ„ä¸ºäº‹ä»¶å¥æŸ„ï¼š\n0:002&gt; !handle c0 fHandle c0  Type         \tEvent  Attributes   \t0  GrantedAccess\t0x100003:         Synch         QueryState,ModifyState  HandleCount  \t2  PointerCount \t4  Name         \t&lt;none&gt;  Object Specific Information    Event Type Auto Reset    Event is Waiting\n\n!locks!locksæŸ¥çœ‹è¿›ç¨‹ä¸­å“ªäº›é”å¤„äºé”å®šçŠ¶æ€ï¼š\n\nä»ç¬¬ä¸€è¡Œç»“æœå¯ä»¥å¾—çŸ¥æ˜¯ gcsName ä¸´ç•ŒåŒºï¼ˆéœ€è¦æœ‰ pdb æ‰ä¼šæ˜¾ç¤ºå…·ä½“å˜é‡åï¼‰å¤„äºé”å®šçŠ¶æ€ã€‚\n\nå…¶å®ï¼Œæˆ‘ä»¬ä»æ ˆå¸§ 02 RtlEnterCriticalSectionä¹Ÿå¯ä»¥å¾ˆå¿«çš„çŸ¥é“è¯¥çº¿ç¨‹ä¸€ç›´åœ¨ç­‰å¾…è¿›å…¥å…³é”®åŒºã€‚\n\nç»è¿‡åˆ†æï¼ŒçŸ¥é“ç¨‹åºæ— æ³•é€€å‡ºçš„åŸå› äº†ï¼šçº¿ç¨‹#1 ä¸­çš„å…³é”®åŒº gcsName å¤„äºé”å®šçŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯ä¸€ç›´ç­‰å¾…è¿›å…¥å…³é”®åŒºï¼‰ï¼Œå¯¼è‡´çº¿ç¨‹#1 é˜»å¡æ— æ³•æ‰§è¡Œã€‚åˆå› ä¸»çº¿ç¨‹åœ¨é€€å‡ºçš„æ—¶å€™æ‰§è¡Œäº† WaitForSingleObject ç­‰å¾…#1 çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ä¸»çº¿ç¨‹å¡æ­»ã€‚\nRTL_CRITICAL_SECTION ç»“æ„å…³é”®åŒºæœºåˆ¶ä¸»è¦æ˜¯é€šè¿‡ä¸‹é¢è¿™æ ·çš„ RTL_CRITICAL_SECTION ç»“æ„æ¥å®ç°çš„ï¼Œå¯ä»¥é€šè¿‡dtå‘½ä»¤æŸ¥çœ‹è¯¥ç»“æ„å®šä¹‰ï¼š\n0:002&gt; dt RTL_CRITICAL_SECTIONTest1!RTL_CRITICAL_SECTION   +0x000 DebugInfo        : Ptr32 _RTL_CRITICAL_SECTION_DEBUG   +0x004 LockCount        : Int4B   +0x008 RecursionCount   : Int4B   +0x00c OwningThread     : Ptr32 Void   +0x010 LockSemaphore    : Ptr32 Void   +0x014 SpinCount        : Uint4B\n\nå…¶ä¸­ï¼ŒLockCount å­—æ®µç”¨æ¥æ ‡è¯†å…³é”®åŒºçš„é”çŠ¶æ€ï¼ŒRecursionCount å­—æ®µç”¨æ¥è®°å½•é€’å½’æ¬¡æ•°ï¼Œç”¨æ¥æ”¯æŒåŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è¿›å…¥å…³é”®åŒºï¼ŒOwningThread å­—æ®µç”¨æ¥è®°å½•è¿›å…¥ï¼ˆæ‹¥æœ‰ï¼‰å…³é”®åŒºçš„çº¿ç¨‹ IDï¼ŒLockSemaphore ç”¨æ¥è®°å½•è¿™ä¸ªå…³é”®åŒºå¯¹åº”çš„äº‹ä»¶å¯¹è±¡ï¼Œå½“æœ‰çº¿ç¨‹éœ€è¦ç­‰å¾…è¿™ä¸ªå…³é”®åŒºæ—¶ï¼Œä¾¿æ˜¯é€šè¿‡ç­‰å¾…è¿™ä¸ªäº‹ä»¶æ¥åšåˆ°çš„ï¼Œè¿™ä¸ªäº‹ä»¶å¯¹è±¡æ˜¯æŒ‰éœ€åˆ›å»ºçš„ï¼Œå¦‚æœ LockSemaphore ä¸º NULL è¡¨ç¤ºè¿™ä¸ªå…³é”®åŒºä»æ¥æ²¡æœ‰çº¿ç¨‹åœ¨æ­¤ç­‰å¾…è¿‡ã€‚\né€šè¿‡å›¾ 6 ä¸­çš„ OwningThread&#x3D;738 å¾—çŸ¥ï¼Œå…³é”®åŒºè¢«çº¿ç¨‹ ID ä¸º 738 çš„çº¿ç¨‹æ‰€æ‹¥æœ‰ï¼Œå³ Enter ä¹‹åä¸€ç›´æ²¡æœ‰ Leaveã€‚\nçŸ¥é“äº†æ˜¯å“ªä¸ªçº¿ç¨‹è·å–äº†å…³é”®åŒºä½†æ²¡æœ‰é‡Šæ”¾ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨ä»£ç ä¸­å®šä½é—®é¢˜äº†ã€‚\n!cs -l!locksæ²¡æœ‰æ˜¾ç¤º LockSemaphore å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡!cs -lå‘½ä»¤è·å–æ›´ä¸ºå…¨é¢çš„å…³é”®åŒºä¿¡æ¯ï¼š\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ° LockSemaphore&#x3D;0xC0ï¼Œæ­£å¥½æ˜¯#1 çº¿ç¨‹ NtWaitForSingleObject çš„äº‹ä»¶å¯¹è±¡ã€‚\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","Windbg"]},{"title":"å®¢æˆ·ç«¯è½¯ä»¶æ—¥å¿—è¾“å‡ºè§„èŒƒ","url":"/post/449620601.html","content":"ä¼—æ‰€å‘¨çŸ¥ï¼Œè½¯ä»¶æ—¥å¿—å¯¹é—®é¢˜çš„æ’æŸ¥å¯ä»¥èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œä½†åœ¨å¤šäººååŒå¼€å‘çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸åŒçš„äººä½¿ç”¨ä¸åŒçš„æ—¥å¿—æ‰“å°é£æ ¼ï¼Œå¯¼è‡´æ—¥å¿—å¯é˜…è¯»æ€§ä¸é«˜ã€‚çºµè§‚å„å¤§çŸ¥åè½¯ä»¶çš„è¾“å‡ºæ—¥å¿—ï¼Œæ— ä¸æœ‰ç€è§„èŒƒçš„æ ¼å¼ï¼Œéå¸¸åˆ©äºé˜…è¯»ã€‚\n\næœ¬æ—¥å¿—è¾“å‡ºè§„èŒƒä»…é€‚ç”¨äºå®¢æˆ·ç«¯è½¯ä»¶ï¼Œä¸é€‚ç”¨äºæœåŠ¡å™¨ç«¯è½¯ä»¶ã€‚\n\næ—¥å¿—ä¸­ä½¿ç”¨è‹±æ–‡ï¼Œä¸ä½¿ç”¨ä¸­æ–‡ã€‚\n\næ—¥å¿—æ–‡ä»¶é‡‡ç”¨UTF-8ç¼–ç ã€‚\n\næ¯æ¡æ—¥å¿—çš„ç¬¬ä¸€ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ï¼Œè€Œä¸”æ¯æ¡æ—¥å¿—ä»¥å›è½¦æ¢è¡Œç¬¦(\\r\\n)ç»“æŸï¼Œä¸éœ€è¦å†™å¥å·.ï¼Œå¦‚ï¼š\n // RTC_LOGä¼šè‡ªåŠ¨åœ¨æ—¥å¿—ç»“å°¾æ·»åŠ \\r\\nRTC_LOG(LS_INFO) &lt;&lt; &quot;Forced software decoder fallback enabled&quot;;\n\nä¸åŒè¯­ä¹‰é—´ä½¿ç”¨é€—å·,åˆ†éš”ï¼Œkey-valueé—´ä½¿ç”¨å†’å·:åˆ†éš”ï¼Œå¦‚ï¼š\n RTC_LOG(LS_INFO) &lt;&lt; &quot;DataChannel received DATA message, sid: &quot; &lt;&lt; sid;RTC_LOG(LS_INFO) &lt;&lt; &quot;Session: &quot; &lt;&lt; session_id() &lt;&lt; &quot; is destroyed&quot;;RTC_LOG(LS_ERROR) &lt;&lt; &quot;Invalid configuration: &quot; &lt;&lt; config_error.message();\n\næ¯æ¡æ—¥å¿—éœ€è¦åŒ…å«æ—¥å¿—æ‰“å°çš„æ—¶é—´ï¼ˆæ—¥æœŸ+æ—¶é—´+æ—¶åŒºï¼Œç²¾ç¡®åˆ°æ¯«ç§’ï¼‰ã€æ—¥å¿—çº§åˆ«ã€‚\n\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"äº†è§£DPIç¼©æ”¾","url":"/post/50218900.html","content":"dpi æ˜¯â€œDots Per Inchâ€çš„ç¼©å†™ï¼Œè¡¨ç¤ºæ¯è‹±å¯¸çš„åƒç´ ç‚¹ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯åƒç´ ç‚¹çš„å¯†é›†åº¦ã€‚\ndpiä¸æ˜¯ç”¨æ¥è¡¨ç¤ºå±å¹•åˆ†è¾¨ç‡çš„ï¼Œä¹Ÿä¸æ˜¯ç”¨æ¥è¡¨ç¤ºå±å¹•ç‰©ç†å°ºå¯¸çš„ã€‚\n\n\ndpi = æ€»åƒç´ ç‚¹ / ç‰©ç†é¢ç§¯\næ¯”å¦‚ä¸€ä¸ª 32 å¯¸çš„æ˜¾ç¤ºï¼Œä½†åˆ†è¾¨ç‡åªæœ‰1920*1440ï¼Œè€Œä¸€ä¸ª 24 å¯¸çš„æ˜¾ç¤ºå™¨ï¼Œåˆ†è¾¨ç‡å´è¾¾åˆ°3840*2160ï¼Œå¾ˆæ˜æ˜¾åé¢è¿™ä¸ªæ˜¾ç¤ºå™¨çš„æ¯è‹±å¯¸çš„åƒç´ ç‚¹çš„ä¸ªæ•°å¤šï¼Œæ˜¾ç¤ºçš„ç”»é¢æ›´åŠ ç»†è…»ã€‚æ‰€ä»¥ï¼šé«˜åˆ†è¾¨ç‡ä¸ç­‰äºé«˜ dpiã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;è‹¹æœçš„è§†ç½‘è†œå±å¹•çš„æ ¸å¿ƒå°±æ˜¯é«˜ dpiï¼šå±å¹•ç‰©ç†é¢ç§¯å°ï¼Œè€Œåˆ†è¾¨ç‡é«˜è¾¾ 5kï¼Œæ¯è‹±å¯¸çš„åƒç´ ç‚¹ï¼ˆdpiï¼‰å›ºç„¶å¤šï¼Œç”»é¢è‡ªç„¶ç»†è…»ã€‚\nè½¯ä»¶æ˜¾ç¤ºå¼‚å¸¸ä¸ºä»€ä¹ˆé«˜ DPI æ˜¾ç¤ºå™¨ä¼šå¯¼è‡´æŸäº›è½¯ä»¶æ˜¾ç¤ºå¼‚å¸¸äº†ï¼Ÿ\néšç€ 2Kã€4K æ˜¾ç¤ºå™¨çš„æ™®åŠï¼Œåœ¨ä½¿ç”¨è¿™äº›é«˜ DPI æ˜¾ç¤ºå™¨æ—¶ï¼Œæˆ‘ä»¬ä¸ºäº†ä½¿è½¯ä»¶ç•Œé¢çœ‹èµ·æ¥ä¸è‡³äºå¤ªå°ï¼Œå¯¼è‡´è§†è§‰ç–²åŠ³ï¼Œä¸€èˆ¬ä¼šåœ¨ç³»ç»Ÿä¸­è®¾ç½®ç¼©æ”¾æ¯”ä¾‹ã€‚\nWindows æ“ä½œç³»ç»Ÿå¯¹é«˜ dpi æ˜¾ç¤ºå™¨ç¼©æ”¾æ”¯æŒæœ€å¥½çš„æ˜¯ windows 10+ï¼Œå»ºè®®åœ¨ä½¿ç”¨é«˜ DPI æ˜¾ç¤ºå™¨æ—¶æ­é… Windows 10+æ“ä½œç³»ç»Ÿã€‚\nå‡è®¾ç°æœ‰ä¸€ä¸ªè½¯ä»¶ï¼Œå…¶ç•Œé¢å®½ 950 åƒç´ ï¼Œé«˜ 700 åƒç´ ï¼Œè¯¥è½¯ä»¶åœ¨ 24 å¯¸ã€åˆ†è¾¨ç‡ä¸º1900*1400çš„æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºæ­£å¸¸ï¼Œä½†æ”¾åˆ°é«˜ dpi æ˜¾ç¤ºå™¨ï¼ˆåŒæ ·æ˜¯ 24 å¯¸ï¼Œä½†åˆ†è¾¨ç‡ä¸º3800*2800ï¼‰ä¸Šæ˜¾ç¤ºæ•ˆæœä¼šå¦‚ä½•ï¼Ÿ\n\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ ·å°ºå¯¸çš„è½¯ä»¶ç•Œé¢ï¼Œåœ¨é«˜ dpi æ˜¾ç¤ºå™¨ä¸Šä¼šæ˜¾å¾—éå¸¸å°ï¼Œä¼šå¯¹ä½¿ç”¨è€…ä¼šé€ æˆä¸¥é‡çš„è§†è§‰ç–²åŠ³ã€‚\næ‰€ä»¥æˆ‘ä»¬çš„è½¯ä»¶éœ€è¦é’ˆå¯¹é«˜ dpi è¿›è¡Œé€‚é…å’Œç¼©æ”¾ï¼Œä»è€Œå‘æŒ¥å‡ºé«˜dpiæ˜¾ç¤ºå™¨çš„ä¼˜åŠ¿ï¼Œè®©ç•Œé¢æ˜¾ç¤ºæ›´åŠ æ¸…æ™°å’Œç»†è…»ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ç›®å‰å¤§å¤šæ•°å®¢æˆ·ç«¯æ¡†æ¶ï¼ˆå¦‚Qtã€Electronã€WPFã€WinFormï¼‰éƒ½å·²ç»èƒ½å¾ˆå¥½çš„æ”¯æŒdpiç¼©æ”¾äº†ï¼Œä¸éœ€è¦å¼€å‘äººå‘˜èŠ±è´¹ç»å†å»å¤„ç†è¿™äº›äº‹æƒ…ã€‚\nWindows 10+ç³»ç»Ÿçš„DPIç¼©æ”¾è§„åˆ™Windows 10+æ“ä½œç³»ç»Ÿé’ˆå¯¹ dpi ç¼©æ”¾åˆ¶å®šäº† 3 ç§è§„åˆ™ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½å¿…é¡»åŒ¹é…ä¸‹é¢çš„ä¸€ç§è§„åˆ™ï¼Œé»˜è®¤ä¸ºPROCESS_DPI_UNAWAREï¼š\n\nPROCESS_DPI_UNAWAREåœ¨è½¯ä»¶å¯åŠ¨æ—¶ï¼Œ æ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨å°†è½¯ä»¶è¿›è¡Œç¼©æ”¾æ‹‰ä¼¸ï¼›åœ¨ç³»ç»Ÿ dpi ç¼©æ”¾æ”¹å˜æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¼šå°†è½¯ä»¶è‡ªåŠ¨è¿›è¡Œç¼©æ”¾æ‹‰ä¼¸ï¼Œä½†è½¯ä»¶ä¸ä¼šæ”¶åˆ° WM_DPICHANGED æ¶ˆæ¯ã€‚\nPROCESS_SYSTEM_DPI_AWAREåœ¨è½¯ä»¶å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¸ä¼šå°†è½¯ä»¶è¿›è¡Œç¼©æ”¾æ‹‰ä¼¸ï¼›ä½†åœ¨ç³»ç»Ÿ dpi ç¼©æ”¾æ”¹å˜æ—¶ï¼Œç³»ç»Ÿä¼šå°†è½¯ä»¶è¿›è¡Œç¼©æ”¾æ‹‰ä¼¸ï¼Œä½†è½¯ä»¶ä»ç„¶ä¸ä¼šæ”¶åˆ° WM_DPICHANGED æ¶ˆæ¯ã€‚\nPROCESS_PER_MONITOR_DPI_AWAREåœ¨è½¯ä»¶å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¸ä¼šå°†è½¯ä»¶è¿›è¡Œç¼©æ”¾æ‹‰ä¼¸ï¼›åŒæ ·ï¼Œåœ¨ç³»ç»Ÿ dpi ç¼©æ”¾æ”¹å˜æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¸ä¼šå°†è½¯ä»¶è¿›è¡Œç¼©æ”¾æ‹‰ä¼¸ï¼Œä½†è½¯ä»¶ä¼šæ”¶åˆ° WM_DPICHANGED æ¶ˆæ¯ã€‚\n\n\nè¯¦è§ï¼šdpi_awareness\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"æ¸¸æˆåŠ é€Ÿå™¨çš„åŸç†åŠå®ç°","url":"/post/714268304.html","content":"\n  0c2e8fc22e23fc6a95492c4a31d13ed29a46ab1fc64f1f5d0db4435702d2547829f323d9472502c3de8becc5941b6146f9b6b87b7633318bc168648cf97edf9139d57c0819506ac508940bf39119a194663688d342a14c60d213397ae58ddf9b0d5567fee0312856630a55c46e3135a8251e171c33e854ea6c56ee608a815c64a8524abfd7c91bcf96b1abf4a89b86d303dc51d2f212024ce39dcbed9c6ea4d993fb552ba9cb4f11c55d4dd3d7d9cc7b9673784c090ec8b41dc90ec329c8deae48182427f5bfa6828feb0fb3e5a50be5bb9236705822b532d96ad426c7a8cdd253da2356e460886aad0bfc308cbdaf352f1e092028094fe93cb20263e0b84782c629e70197cc932a3e0b4757ecf520301127e8b8bf6da2e183a46ab9e0b5aa63f028e8cfe8643a22eabb9bcd166d16b2b2e2160c9a8dc99ea45f5bd9843bf6c7b5bbd7a0798f2cd01517f9075d6f8e5dc1b5a133d4967844950d93e7563f0716a40b16873e286bdda0bbb681213741b42aa47247a174f6bb8b62e4b13be5477f6d3883ec2232f98ce6ea330600b81b2b0c73d157527586f413bbc7f48f00eebcbb60626da4de01b099ad4f38e4c108c5e912854ad25a7830bfb9bccc85d63fa30d26c797572333c8b49deb6d54a04120206ced279d1a66629510ef133f11e9bb228e757f4e3cde64221cafe55f97af6431f6d1819bbe8c03e7aa328fad7cbb98c0e084a9bd0c2d5dfe74c5269e52b750e71449e5acb6b81829ce49bb63be15f5032cdfb232708b43842d8c7c18044bbc\n  \n    \n      \n      \n        è¯·è¾“å…¥å¯†ç \n      \n    \n  \n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["å†…æ ¸"]},{"title":"ä»£ç çš„éšå½¢æˆ˜åœºï¼šWindowsè¿›ç¨‹æ³¨å…¥ä¸API Hookå®Œå…¨æŒ‡å—","url":"/post/3573459553.html","content":"åœ¨æ•°å­—æ—¶ä»£çš„æ”»é˜²æˆ˜åœºä¸Šï¼ŒWindows æ³¨å…¥ä¸ Hook æŠ€æœ¯å¦‚å½±éšå½¢ï¼Œå®ƒä»¬å§‹ç»ˆæ˜¯å¼€å‘è€…ä¸å®‰å…¨ç ”ç©¶å‘˜çš„â€œç»ˆæå…µå™¨åº“â€ã€‚æ— è®ºæ˜¯é€†å‘å·¥ç¨‹å¸ˆé€šè¿‡åŠ¨æ€è°ƒè¯•ç ´è§£åŠ å¯†ç®—æ³•ï¼Œè¿˜æ˜¯æ¶æ„è½¯ä»¶é€šè¿‡è¿›ç¨‹æ³¨å…¥çªƒå–æ•æ„Ÿä¿¡æ¯ï¼Œè¿™é¡¹æŠ€æœ¯å§‹ç»ˆæ¸¸èµ°åœ¨åˆæ³•ä¸éæ³•çš„ç°è‰²è¾¹ç¼˜ã€‚å®ƒæ—¢æ˜¯ç³»ç»Ÿåº•å±‚æœºåˆ¶çš„â€œæ½˜å¤šæ‹‰é­”ç›’â€ï¼Œä¹Ÿæ˜¯å®ˆæŠ¤è½¯ä»¶å®‰å…¨çš„â€œè¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘â€â€”â€”æŒæ¡å®ƒï¼Œä½ æ—¢èƒ½ä¿®å¤é«˜å±æ¼æ´ï¼Œä¹Ÿå¯èƒ½æˆä¸ºæ”»å‡»è€…çš„å¸®å‡¶ã€‚\n\n\næ³¨å†Œè¡¨æ–¹å¼æ³¨å…¥è¿™æ˜¯ä¸€ç§æœ€ç®€å•çš„æ³¨å…¥æ–¹å¼ï¼Œæˆ‘ä»¬åªéœ€è¦å¼€å‘æ­£å¸¸çš„ DLLï¼Œç„¶ååœ¨æ³¨å†Œè¡¨AppInit_DLLsé¡¹ä¸­æŒ‡å®šè¯¥ DLL çš„åç§°ï¼Œå¾…ç³»ç»ŸUser32.dllè¢«åŠ è½½åˆ°æ–°è¿›ç¨‹æ—¶ï¼Œè¯¥ DLL ä¹Ÿä¼šè¢«åŠ è½½åˆ°ç›®æ ‡è¿›ç¨‹ã€‚è¿™æ˜¯å› ä¸º User32.dll ä¼šåœ¨ DLL_PROCESS_ATTACH é€šçŸ¥å¤„ç†è¿‡ç¨‹ä¸­è¯»å–è¯¥æ³¨å†Œè¡¨å€¼ï¼Œå¹¶ä¾æ¬¡åŠ è½½è¯¥é¡¹ä¸­çš„æ¯ä¸ª DLLã€‚\nAppInit_DLLs æ³¨å†Œè¡¨é¡¹çš„è·¯å¾„å¦‚ä¸‹ï¼š\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Windows\\AppInit_DLLs\n\nå¦‚æœæ˜¯åœ¨ x64 ç³»ç»Ÿä¸Šï¼Œå°† 32 ä½ DLL æ³¨å…¥åˆ° 32 ä½è¿›ç¨‹ï¼Œéœ€è¦ä½¿ç”¨Wow6432Nodeè·¯å¾„ï¼ˆä¸‹é¢çš„ LoadAppInit_DLLs ä¹Ÿæ˜¯ä¸€æ ·ï¼‰ï¼š\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\Windows NT\\CurrentVersion\\Windows\\AppInit_DLLs\n\nAppInit_DLLs ä¸­çš„æ–‡ä»¶åé€šè¿‡é€—å·æˆ–ç©ºæ ¼æ¥åˆ†å‰²ï¼Œå› æ­¤åœ¨æ–‡ä»¶åä¸­è¦é¿å…ä½¿ç”¨ç©ºæ ¼ã€‚å¦å¤– AppInit_DLLs ä¸­åªæœ‰ç¬¬ä¸€ä¸ªæ–‡ä»¶å¯ä»¥åŒ…å«è·¯å¾„ï¼Œåé¢çš„æ–‡ä»¶çš„è·¯å¾„åˆ™å°†è¢«å¿½ç•¥ï¼Œå‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬æœ€å¥½å°† DLL æ–‡ä»¶æ‹·è´åˆ° Windows çš„ç³»ç»Ÿç›®å½•ä¸­ã€‚\nä¸€åˆ‡å‡†å¤‡å¦¥å½“åï¼Œè¿˜éœ€å°† LoadAppInit_DLLs æ³¨å†Œè¡¨é¡¹çš„å€¼ä¿®æ”¹ä¸º 1ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Windows\\LoadAppInit_DLLs\n\nè¿™ç§æ³¨å…¥æ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†å­˜åœ¨å¾ˆå¤§çš„å¼Šç«¯ï¼Œå› ä¸º DLL æ˜¯é€šè¿‡ User32.dll åŠ è½½åˆ°ç›®æ ‡è¿›ç¨‹ä¸­å»çš„ï¼Œè¿™ä¹Ÿå°±è¦æ±‚è¢«æ³¨å…¥çš„ç›®æ ‡è¿›ç¨‹å¿…é¡»ä½¿ç”¨äº† User32.dllï¼Œè™½ç„¶åŸºäº GUI çš„ç¨‹åºéƒ½ä¼šä½¿ç”¨è¿™ä¸ª DLL æ–‡ä»¶ï¼Œä½†å‘½ä»¤è¡Œç¨‹åºä¸€èˆ¬ä¸ä¼šåŠ è½½ User32.dllï¼Œæ‰€ä»¥å¯èƒ½æ— æ³•é€šè¿‡è¿™ç§æ–¹å¼è¢«æ³¨å…¥ã€‚è€Œä¸”è¿™ç§æ–¹å¼ä¼šå¯¼è‡´ç³»ç»Ÿä¸Šæ‰€æœ‰ä½¿ç”¨äº† User32.dll çš„ç¨‹åºéƒ½ä¼šè¢«æ³¨å…¥ DLLï¼Œå¾ˆå¤šæ—¶å€™è¿™ä¹Ÿå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚\nDLL æ¬ºéª—æ³¨å…¥æˆ‘ä»¬åœ¨å¯åŠ¨ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå…ˆä¸ºè¿›ç¨‹åˆ›å»ºè™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œç„¶åæŠŠå¯æ‰§è¡Œæ¨¡å—æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼Œä¹‹åä¼šéå†å¯¼å…¥æ®µï¼ˆå³ PE çš„å¯¼å…¥è¡¨ï¼‰ï¼Œå®šä½æ‰€ä¾èµ–çš„ DLL å¹¶æ˜ å°„åˆ°è¯¥è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚ç”±äºå¯¼å…¥æ®µä¸­åªåŒ…å«äº† DLL çš„åç§°ï¼Œä¸åŒ…å« DLL çš„è·¯å¾„ï¼Œå› æ­¤åŠ è½½ç¨‹åºä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºåœ¨ç£ç›˜ä¸ŠæŸ¥æ‰¾ DLLï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š\n\nåŒ…å«å¯æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•ã€‚\nWindows ç³»ç»Ÿç›®å½•ï¼Œé€šå¸¸ä¸º C:\\Windows\\System32ï¼Œå¯ä»¥ä½¿ç”¨ GetSystemDirectory å‡½æ•°è·å–ã€‚\nWindows ç›®å½•ï¼Œé€šå¸¸ä¸º C:\\Windowsï¼Œå¯ä»¥ä½¿ç”¨ GetWindowsDirectory å‡½æ•°è·å–ã€‚\nè¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ã€‚\nPATH ç¯å¢ƒå˜é‡ä¸­æ‰€åˆ—å‡ºçš„ç›®å½•ã€‚\n\n\nä¸Šé¢æ˜¯ç¨‹åºå¯åŠ¨æ—¶ï¼Œæ“ä½œç³»ç»ŸæŸ¥æ‰¾ç¨‹åºä¾èµ– DLL çš„æ ‡å‡†æµç¨‹ã€‚åœ¨ä½¿ç”¨ LoadLibrary åŠ è½½ DLL æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šå…¨è·¯å¾„ï¼Œè€Œæ˜¯ä»…ä»…æŒ‡å®šäº†æ–‡ä»¶åæˆ–ç›¸å¯¹è·¯å¾„ï¼ŒLoadLibrary ä¹Ÿä¼šä½¿ç”¨ä¸Šé¢é¡ºåºè¿›è¡Œæœç´¢ã€‚ä½†å¦‚æœä½¿ç”¨ SetDllDirectroy å‡½æ•°è®¾ç½®äº† DLL æœç´¢ç›®å½•ï¼Œæˆ–è€…ä½¿ç”¨ LoadLibraryEx å‡½æ•°å¹¶è®¾ç½®äº† LOAD_WITH_ALTERED_SEARCH_PATH æ ‡å¿—ï¼Œæ­¤æ—¶ç¨‹åºæœç´¢ DLL çš„æ–¹å¼ä¼šä¸ä¸Šé¢çš„æ ‡å‡†æœç´¢é¡ºåºæ‰€æœ‰ä¸åŒï¼Œè¯¦è§ã€ŠWindows æ ¸å¿ƒç¼–ç¨‹ã€‹ã€‚\n\nDLL æ¬ºéª—æ³¨å…¥ä¹Ÿå« DLL åŠ«æŒï¼Œå°±æ˜¯åœ¨ä¸Šé¢ DLL çš„æœç´¢è·¯å¾„ä¸­æ”¾å…¥æˆ‘ä»¬è‡ªå·± DLLï¼Œæ¥æ¬ºéª—ç³»ç»Ÿæˆ–åº”ç”¨è¿›è¡ŒåŠ è½½ã€‚\nä½¿ç”¨ Depends å·¥å…·æŸ¥çœ‹ç¨‹åºä¾èµ–çš„ DLLï¼Œé€‰æ‹©ä¸€ä¸ª DLL æ¥ä¼ªé€ ã€‚\néœ€è¦æ³¨æ„ï¼ŒHKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\KnownDLLsæ³¨å†Œè¡¨ä¸­æŒ‡å®šçš„ DLL ä¸èƒ½ä¼ªé€ ã€‚\nä¼ªé€  DLL éœ€è¦ä¸åŸ DLL çš„å¯¼å‡ºå‡½æ•°å®Œå…¨ä¸€è‡´ï¼Œå¹¶æä¾›ç›¸åŒçš„åŠŸèƒ½ï¼Œå¦åˆ™ç¨‹åºä¼šåŠ è½½å¤±è´¥æˆ–åŠŸèƒ½å¼‚å¸¸ï¼Œå› æ­¤æˆ‘ä»¬åœ¨é€‰æ‹© DLL æ—¶ï¼Œå°½é‡é€‰æ‹©åŠŸèƒ½ç®€å•çš„ DLLï¼Œå¦‚ version.dllã€hid.dll ç­‰ã€‚\nç¼–å†™ä¼ªé€  DLL çš„æµç¨‹é€šå¸¸å¦‚ä¸‹ï¼š\n\nåœ¨ DllMain å‡½æ•°ä¸­åŠ è½½åŸ DLLã€‚\né€šå¸¸åœ¨ DllMain å‡½æ•°ä¸­è¿˜ä¼šæ‰§è¡Œç›¸å…³é€»è¾‘ï¼Œå¦‚ Hook æŸä¸ªå‡½æ•°ç­‰ï¼ˆéå¿…é¡»ï¼‰ã€‚\nä½¿ç”¨å‡½æ•°è½¬å‘å™¨æŠ€æœ¯å°†å¯¼å‡ºå‡½æ•°çš„åŠŸèƒ½è½¬å‘åˆ°è·³æ¿å‡½æ•°ï¼Œå¹¶åœ¨è·³æ¿å‡½æ•°ä¸­è°ƒç”¨åŸ DLL ä¸­å¯¹åº”å‡½æ•°çš„åŠŸèƒ½ï¼Œç¡®ä¿ä¼ªé€  DLL èƒ½å¤Ÿæä¾›ä¸åŸ DLL ä¸€è‡´çš„åŠŸèƒ½ã€‚\n\nä¸Šè¿°æ“ä½œæ˜¯ä¸€ä»¶ç¹ççš„ã€è´¹æ—¶è´¹åŠ›çš„äº‹æƒ…ï¼Œå¥½åœ¨å·²æœ‰å‰è¾ˆå¼€å‘äº†å·¥å…·æ¥æ ¹æ®åŸ DLL è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ VS å·¥ç¨‹ï¼Œä¸‹é¢æ˜¯æˆ‘ä¿®æ”¹åçš„ç‰ˆæœ¬ï¼Œæ”¯æŒ x86 å’Œ x64 æ¶æ„ï¼šhttps://github.com/winsoft666/AheadLib\næ¶ˆæ¯é’©å­æ³¨å…¥Windows æä¾›äº† SetWindowsHookEx å‡½æ•°æ¥ä¸ºæŒ‡å®šçº¿ç¨‹å®‰è£…ä¸€ä¸ªæ¶ˆæ¯é’©å­ã€‚å½“æŒ‡å®šçº¿ç¨‹ä¸­çš„ç‰¹å®šæ¶ˆæ¯è¢«é’©ä½æ—¶ï¼Œç³»ç»Ÿå°±ä¼šå°†æˆ‘ä»¬çš„ DLLï¼ˆå‰ææ˜¯é’©å­çš„å¤„ç†è¿‡ç¨‹æ˜¯ä½äº DLL ä¸­çš„ï¼‰åŠ è½½åˆ°è¯¥çº¿ç¨‹æ‰€å±è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼Œå¹¶ä¸”åœ¨è¯¥åœ°å€ç©ºé—´ä¸­è°ƒç”¨æˆ‘ä»¬çš„ DLL ä¸­çš„é’©å­å¤„ç†è¿‡ç¨‹å‡½æ•°ï¼Œä»è€Œå®ç° DLL æ³¨å…¥åŠŸèƒ½ã€‚\nHHOOK SetWindowsHookExA(  [in] int       idHook,  [in] HOOKPROC  lpfn,  [in] HINSTANCE hmod,  [in] DWORD     dwThreadId);\n\næ“ä½œç³»ç»ŸåŒæ—¶å…è®¸å¼€å‘äººå‘˜ä¸ºâ€œåŒä¸€ä¸ªçº¿ç¨‹â€çš„â€œåŒä¸€ä¸ªæ¶ˆæ¯ç±»å‹â€æŒ‡å®šå¤šä¸ªé’©å­ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªâ€œé’©å­é“¾â€ï¼ˆHook Chainï¼‰ï¼Œå½“æˆ‘ä»¬çš„é’©å­å¤„ç†å‡½æ•°ï¼ˆç”± lpfn å‚æ•°æŒ‡å®šï¼‰å°†æ¶ˆæ¯å¤„ç†å®Œä¹‹åï¼Œå¯ä»¥é€‰æ‹©å°†æ¶ˆæ¯ä¸¢å¼ƒï¼Œä¸è®©é’©å­é“¾åé¢çš„é’©å­è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå¯ä»¥åœ¨é’©å­å¤„ç†å‡½æ•°çš„æœ€åè°ƒç”¨ CallNextHookEx å‡½æ•°ï¼Œè®©æ¶ˆæ¯ç»§ç»­ä¼ é€’ä¸‹å»ï¼Œä»è€Œè®©å…¶ä»–é’©å­æœ‰å¤„ç†çš„æœºä¼šã€‚\nSetWindowsHookEx å‡½æ•°è¿”å›äº†HHOOKç±»å‹çš„é’©å­å¥æŸ„ï¼Œè€Œä¸” CallNextHookEx å’Œ UnhookWindowsHookEx å‡½æ•°éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªå¥æŸ„ä½œä¸ºå‚æ•°ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å°†â€œæ³¨å…¥é€»è¾‘â€æ”¾åœ¨ç‹¬ç«‹çš„ exe ä¸­ï¼Œå°†â€œé’©å­å¤„ç†è¿‡ç¨‹â€æ”¾åˆ°ç‹¬ç«‹çš„ dll ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦é€šè¿‡å…¶ä»–é€”å¾„å°†è¯¥å¥æŸ„ä» exe ä¼ é€’åˆ° dll ä¸­ï¼Œç¡®ä¿åœ¨â€œé’©å­å¤„ç†è¿‡ç¨‹â€ä¸­èƒ½å¤Ÿä½¿ç”¨è¯¥å¥æŸ„è°ƒç”¨ CallNextHookExã€‚\nä¸ºäº†é¿å…ä¼ é€’é’©å­å¥æŸ„çš„éº»çƒ¦ï¼Œæˆ‘ä»¬é€šå¸¸å°†æ³¨å…¥ã€å–æ¶ˆæ³¨å…¥ã€é’©å­å¤„ç†è¿‡ç¨‹éƒ½å†™åœ¨ä¸€ä¸ª DLL ä¸­ã€‚åœ¨ DLL ä¸­å¯¼å‡ºå¼€å§‹å’Œåœæ­¢å‡½æ•°ï¼Œå¤–éƒ¨ç¨‹åºè°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°å°±å¯ä»¥å®ç°æ³¨å…¥å’Œå–æ¶ˆæ³¨å…¥çš„åŠŸèƒ½äº†ã€‚\nè¿œç¨‹çº¿ç¨‹æ³¨å…¥æ³¨å…¥åŸç†è¿œç¨‹çº¿ç¨‹æ³¨å…¥æ–¹å¼ä½¿ç”¨çš„å…³é”®ç³»ç»Ÿ API ä¸º CreateRemoteThreadï¼ŒåŸå‹å¦‚ä¸‹ï¼š\nHANDLE WINAPI CreateRemoteThread(  _In_  HANDLE                 hProcess,  _In_  LPSECURITY_ATTRIBUTES  lpThreadAttributes,  _In_  SIZE_T                 dwStackSize,  _In_  LPTHREAD_START_ROUTINE lpStartAddress,  _In_  LPVOID                 lpParameter,  _In_  DWORD                  dwCreationFlags,  _Out_ LPDWORD                lpThreadId);\n\nCreateRemoteThread ç›¸æ¯” CreateThread åªæ˜¯æ–°å¢äº† hProcess å¥æŸ„å‚æ•°ï¼Œè¯¥å‚æ•°ç”¨äºæŒ‡å®šè¿œç¨‹çº¿ç¨‹æ‰€åœ¨çš„ç›®æ ‡è¿›ç¨‹ã€‚\nå¯ä»¥é€šè¿‡ä»»æ„æ–¹å¼è·å–ç›®æ ‡è¿›ç¨‹çš„å¥æŸ„ï¼Œä½†éœ€è¦ç¡®ä¿è¯¥å¥æŸ„å…·æœ‰åˆé€‚çš„è®¿é—®æƒé™ï¼Œé¿å…åç»­çš„å‡½æ•°è°ƒç”¨å¤±è´¥ï¼Œé€šå¸¸åº”å…·æœ‰å¦‚ä¸‹æƒé™ï¼Œå…·ä½“è§ API æ–‡æ¡£ï¼š\nPROCESS_CREATE_THREAD | PROCESS_QUERY_INFORMATION | PROCESS_VM_OPERATION | PROCESS_VM_WRITE | PROCESS_VM_READ\n\né€šè¿‡è¿œç¨‹çº¿ç¨‹æ–¹å¼å®ç° DLL æ³¨å…¥ä¸»è¦æ˜¯åœ¨lpStartAddresså’ŒlpParameterè¿™ 2 ä¸ªå‚æ•°ä¸Šé¢åšæ–‡ç« ã€‚\nlpStartAddress å‚æ•°ç”¨äºæŒ‡å®šè¿œç¨‹çº¿ç¨‹çš„å¤„ç†è¿‡ç¨‹å‡½æ•°ï¼Œå‡½æ•°åŸå‹åˆ†åˆ«å¦‚ä¸‹ï¼š\nDWORD WINAPI ThreadProc(LPVOID lpParameter);\n\nè¯¥å‡½æ•°åŸå‹ä¸åŠ è½½ DLL æ‰€ä½¿ç”¨çš„ APIï¼ˆKernel32::LoadLibraryA æˆ– Kernel32::LoadLibraryWï¼‰çš„åŸå‹åŸºæœ¬ç›¸åŒï¼š\nHMODULE WINAPI LoadLibrary(LPCTSTR lpFileName);\n\nè™½ç„¶ä¸æ˜¯å®Œå…¨ç›¸åŒï¼Œä½†éƒ½æ˜¯æ¥æ”¶ä¸€ä¸ªæŒ‡é’ˆå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼ï¼ˆåœ¨ä¸åŒæ¶æ„çš„è½¯ä»¶ä¸­ï¼Œè¿”å›å€¼æ‰€å å­—èŠ‚æ•°æœ‰åŒºåˆ«ï¼Œè§ä¸‹é¢æ³¨è§£ï¼‰ï¼Œå¹¶ä¸”è°ƒç”¨çº¦å®šä¹Ÿéƒ½æ˜¯WINAPIã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼ŒæŠŠçº¿ç¨‹å¤„ç†å‡½æ•°çš„åœ°å€è®¾ä¸º LoadLibraryA æˆ– LoadLibraryW çš„å‡½æ•°åœ°å€ã€‚\n\nåœ¨ 32 ä½ç¨‹åºä¸­ï¼ŒDWORD å’Œ HMODULE éƒ½å  4 å­—èŠ‚ï¼Œè€Œåœ¨ 64 ä½ç¨‹åºä¸­ï¼ŒDWORD å  4 å­—èŠ‚ï¼ŒHMODULE å  8 å­—èŠ‚ã€‚å› æ­¤ä¸‹é¢ä»‹ç»çš„è·å– DLL å¥æŸ„çš„æ–¹å¼åªé€‚ç”¨äº 32 ä½ç¨‹åºã€‚\n\nç›®æ ‡è¿›ç¨‹çš„ LoadLibrary çš„åœ°å€æ˜¯å¤šå°‘å‘¢ï¼Ÿ\né€šå¸¸æ¥è¯´ï¼Œæ— è®ºæ˜¯å¦å¼€å¯ ASLRï¼ˆåœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–ï¼‰ï¼ŒDLL åŠ è½½åˆ°ç›®æ ‡è¿›ç¨‹çš„åŸºåœ°å€éƒ½ä¸ä¼šæ˜¯å›ºå®šçš„ï¼Œå› æ­¤æ¨¡å—ä¸­å‡½æ•°çš„åœ°å€ä¹Ÿä¸æ˜¯å›ºå®šçš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç¡®å®šç›®æ ‡è¿›ç¨‹ä¸­çš„ Kernel32::LoadLibraryA çš„åœ°å€å‘¢ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œkernel32.dllã€user32.dllã€ ntdll.dll ç­‰ç³»ç»Ÿ DLL åœ¨ä¸åŒçš„è¿›ç¨‹ä¸­çš„åŸºåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å½“å‰è¿›ç¨‹ä¸­çš„ LoadLibraryA å‡½æ•°åœ°å€ã€‚\n\nä¸‹åˆ—ç³»ç»Ÿ DLL åœ¨æ‰€æœ‰è¿›ç¨‹ä¸­çš„åŸºåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼škernel32.dllã€user32.dllã€ntdll.dllã€gdi32.dllã€gdi32full.dllã€comdlg32.dllã€shell32.dllã€advapi32.dllã€msvcrt.dllâ€‹ã€ ucrtbase.dllã€ole32.dllã€oleaut32.dllã€rpcrt4.dllã€ws2_32.dllã€shcore.dllã€imm32.dllã€crypt32.dll\n\nä½†ä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥ä¼ é€’ LoadLibraryA æˆ– LoadLibraryW çš„åœ°å€ï¼Œå› ä¸ºç›´æ¥ä½¿ç”¨ LoadLibraryA ä¼šè¢«è§£æä¸ºæˆ‘ä»¬ç¨‹åºå¯¼å…¥æ®µä¸­çš„ LoadLibraryA è½¬æ¢å‡½æ•°çš„åœ°å€ï¼Œè¿™ä¸ªè½¬æ¢å‡½æ•°çš„åœ°å€åªåœ¨å½“å‰è¿›ç¨‹æœ‰æ•ˆã€‚\nCreateRemoteThread(hTargeProcess, NULL, 0, LoadLibraryA, ...);\n\næ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡ GetProAdress æ–¹å¼è·å– LoadLibraryA åœ°å€ï¼š\nLPVOID pLoadLibraryAddr = (LPVOID)GetProcAddress(GetModuleHandle(TEXT(&quot;kernel32.dll&quot;)), &quot;LoadLibraryA&quot;);CreateRemoteThread(hTargeProcess, NULL, 0, pLoadLibraryAddr, ...);\n\nè§£å†³äº† LoadLibraryA å‡½æ•°åœ°å€çš„é—®é¢˜ï¼Œå†æ¥è§£å†³ DLL è·¯å¾„çš„é—®é¢˜ã€‚DLL è·¯å¾„å­—ç¬¦ä¸²ï¼ˆå¦‚â€C:\\InjectDll.dllâ€ï¼‰çš„å†…å­˜åœ°å€ä½äºè°ƒç”¨è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼Œå¹¶ä¸ä½äºè¢«æ³¨å…¥çš„ç›®æ ‡è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚æ‰€ä»¥ï¼Œåœ¨ç›®æ ‡è¿›ç¨‹ä¸­ä½¿ç”¨ LoadLibraryA è®¿é—®è¯¥åœ°å€æ—¶ï¼Œä¼šå‡ºç°è®¿é—®è¿è§„ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ DLL è·¯å¾„å­—ç¬¦ä¸²å­˜å‚¨åˆ°è¢«æ³¨å…¥è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚é€šè¿‡ Windows æä¾›çš„ VirtualAllocEx å’Œ WriteProcessMemory å‡½æ•°ï¼Œå¯ä»¥å®ç°åœ¨ç›®æ ‡è¿›ç¨‹åœ°å€ç©ºé—´ä¸­åˆ†é…å†…å­˜å’Œå†™å…¥å†…å­˜ã€‚\nSIZE_T size = strlen(pszDllPath) + 1;LPVOID buffer = VirtualAllocEx(hTargeProcess, NULL, size, MEM_RESERVE | MEM_COMMIT, PAGE_EXECUTE_READWRITE);if (buffer) &#123;    if (!WriteProcessMemory(hTargeProcess, buffer, pszDllPath, size, NULL)) &#123;        // ......    &#125;&#125;\n\næœ€åï¼Œè°ƒç”¨ CreateRemoteThread åˆ›å»ºè¿œç¨‹çº¿ç¨‹ï¼š\nLPVOID pLoadLibraryAddr = (LPVOID)GetProcAddress(GetModuleHandle(TEXT(&quot;kernel32.dll&quot;)), &quot;LoadLibraryA&quot;);HANDLE hDll = CreateRemoteThread(hTargeProcess,\tNULL,\t0,\tpLoadLibraryAddr,\tbuffer,\t0,\tNULL);\n\nå½“ CreateRemoteThread æ‰€åˆ›å»ºçš„çº¿ç¨‹åœ¨è¿œç¨‹è¿›ç¨‹åœ°å€ç©ºé—´ä¸­è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå°±ä¼šç«‹å³è°ƒç”¨ LoadLibraryA å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ DLL è·¯å¾„ä½œä¸ºå…¶å‚æ•°ï¼Œä»è€Œå®ç° DLL çš„åŠ è½½ã€‚\nè·å– DLL å¥æŸ„æ­£å¸¸æƒ…å†µä¸‹ï¼ŒCreateRemoteThread è¿”å›äº†çº¿ç¨‹å¥æŸ„ï¼Œå¾…çº¿ç¨‹ç»“æŸåé€šè¿‡ GetExitCodeThread å‡½æ•°è·å–çš„çº¿ç¨‹é€€å‡ºç ï¼Œçº¿ç¨‹é€€å‡ºç æ˜¯çº¿ç¨‹å¤„ç†è¿‡ç¨‹å‡½æ•°çš„è¿”å›å€¼ï¼Œåœ¨ä½¿ç”¨ä¸Šé¢æ–¹å¼è¿›è¡Œè¿œç¨‹çº¿ç¨‹æ³¨å…¥æ—¶ï¼ŒGetExitCodeThread å‡½æ•°è·å–çš„é€€å‡ºç åˆ™å®é™…æ˜¯ LoadLibraryA å‡½æ•°çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹çš„å¥æŸ„ã€‚\nHMODULE hDll = NULL;GetExitCodeThread(hRemoteThread, (LPDWORD)&amp;hDll);\n\næ­£å¦‚ä¸Šé¢ä¸€èŠ‚æ³¨è§£ä¸­æ‰€ä»‹ç»çš„é‚£æ ·ï¼Œè¿™ç§è·å–æ³¨å…¥ DLL å¥æŸ„çš„æ–¹å¼ä»…é€‚ç”¨ä¸ 32 ä½ç¨‹åºï¼Œå› ä¸º 64 ä½ç¨‹åºçš„å¥æŸ„å  8 å­—èŠ‚ï¼Œä½¿ç”¨ 4 å­—èŠ‚çš„ DWORD ç±»å‹å­˜å‚¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®æˆªæ–­ã€‚ä½†å¦‚æœä¸éœ€è¦è·å– DLL å¥æŸ„æˆ–è€…æ³¨å…¥åå†é€šè¿‡éå†è¿›ç¨‹æ¨¡å—çš„æ–¹å¼è·å– DLL å¥æŸ„ï¼Œåˆ™è¿™ç§æ³¨å…¥æ–¹å¼ä¹ŸåŒæ—¶é€‚ç”¨äº 32&#x2F;64 ä½ç¨‹åºã€‚\nå–æ¶ˆæ³¨å…¥å–æ¶ˆæ³¨å…¥å°±æ˜¯å°† DLL ä»ç›®æ ‡è¿›ç¨‹å¸è½½ï¼Œå¸è½½ DLL æ‰€ç”¨çš„ API æ˜¯FreeLibraryï¼Œä½†æˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºç›´æ¥è°ƒç”¨çš„è¯æ˜¯åœ¨æˆ‘ä»¬çš„è¿›ç¨‹ä¸­å¸è½½ DLLï¼Œè€Œä¸æ˜¯ç›®æ ‡è¿›ç¨‹ä¸­å¸è½½ï¼Œå¾ˆæ˜¾ç„¶è¿™æ ·è¾¾ä¸åˆ°å¸è½½çš„ç›®çš„ã€‚æˆ‘ä»¬éœ€è¦å’ŒåŠ è½½ DLL æ—¶ä¸€æ ·ï¼Œå°†FreeLibraryçš„åœ°å€ä½œä¸ºç¬¬ 4 ä¸ªå‚æ•°ä¼ ç»™ CreateRemoteThread å‡½æ•°ï¼š\nCreateRemoteThread(hTargeProcess, NULL, 0, FreeLibrary, hDll, 0, NULL);\n\nShellCode ç‰ˆè¿œç¨‹çº¿ç¨‹æ³¨å…¥ShellCode ç‰ˆè¿œç¨‹çº¿ç¨‹æ³¨å…¥æ˜¯ä¸Šä¸€èŠ‚æ™®é€šè¿œç¨‹çº¿ç¨‹æ³¨å…¥çš„å‡çº§ç‰ˆï¼Œä¸ä»…å¯ä»¥å¼¥è¡¥ 64 ä½è¿œç¨‹çº¿ç¨‹æ³¨å…¥æ— æ³•è·å– DLL å¥æŸ„çš„é—æ†¾ï¼ˆæ™®é€šè¿œç¨‹çº¿ç¨‹æ³¨å…¥çš„é—æ†¾åœ¨äº 4 å­—èŠ‚çš„ DWORD ä¸è¶³ä»¥å­˜å‚¨ 64 ä½çš„å¥æŸ„ï¼‰ï¼Œè€Œä¸”å¯¹äºåé¢ä»‹ç»çš„ RIP&#x2F;EIP åŠ«æŒæ³¨å…¥ä¹Ÿæœ‰ä¸€å®šçš„é“ºå«ä½œç”¨ã€‚\næœ¬èŠ‚ä»‹ç»çš„ ShellCode ä½¿ç”¨çš„éƒ½æ˜¯ 64 ä½å¯„å­˜å™¨ï¼Œä¸»è¦é’ˆå¯¹ 64 ä½ç¨‹åºï¼Œ32 ä½ç¨‹åºè¿˜éœ€è¦åšç›¸åº”çš„ä¿®æ”¹ã€‚\nShellCode ç‰ˆè¿œç¨‹çº¿ç¨‹æ³¨å…¥çš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š\n\nè·å–ç›®æ ‡è¿›ç¨‹å¥æŸ„ï¼ˆä¸æ™®é€šç‰ˆä¸€æ ·ï¼‰ã€‚\nåœ¨ç›®æ ‡è¿›ç¨‹åˆ†é…å†…å­˜ï¼ˆè®°ä½œ M1ï¼‰ï¼Œå¹¶å†™å…¥ DLL è·¯å¾„ï¼ˆä¸æ™®é€šç‰ˆä¸€æ ·ï¼‰ã€‚\nåœ¨ç›®æ ‡è¿›ç¨‹ä¸­åˆ†é… 8 å­—èŠ‚å†…å­˜åŒºåŸŸï¼ˆè®°ä½œ M2ï¼‰ï¼Œç”¨äºå­˜å‚¨è¿”å›çš„ DLL å¥æŸ„ã€‚\næ„é€  ShellCodeï¼Œè¯¥ ShellCode ç”¨äºåœ¨ç›®æ ‡è¿›ç¨‹ä¸­è°ƒç”¨ LoadLibraryï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°æ­¥éª¤ 3 åˆ†é…çš„ M2 å†…å­˜ã€‚\nåœ¨ç›®æ ‡è¿›ç¨‹åˆ†é…å†…å­˜ï¼ˆè®°ä½œ M3ï¼‰ï¼Œå¹¶å†™å…¥æ­¥éª¤ 4 æ„é€ çš„ ShellCodeï¼ŒM3 éœ€è¦æœ‰ PAGE_EXECUTE_READWRITE ä¿æŠ¤å±æ€§ã€‚\nå°† ShellCode æ‰€åœ¨å†…å­˜ M3 çš„åœ°å€ä½œä¸º lpStartAddress å‚æ•°ä¼ é€’ç»™ CreateRemoteThread å‡½æ•°ï¼Œè€Œä¸å†æ˜¯ LoadLibrary çš„åœ°å€ã€‚\nç­‰å¾…çº¿ç¨‹ç»“æŸåï¼Œä» M2 è¯»å– DLL å¥æŸ„çš„å€¼ã€‚\n\nShellCode çœ‹èµ·æ¥å¾ˆç¥ç§˜ï¼Œå…¶å®å¹¶ä¸é«˜æ·±ï¼Œå®ƒå°±æ˜¯ä¸€æ®µæ±‡ç¼–ä»£ç æ‰€å¯¹åº”çš„æœºå™¨ç è€Œå·²ã€‚æˆ‘ä»¬ä½¿ç”¨ç®€å•çš„æ±‡ç¼–æŒ‡ä»¤å³å¯å®Œæˆæ±‡ç¼–ä»£ç çš„ç¼–å†™å·¥ä½œï¼Œå¦‚ movã€addã€subã€leaã€callã€ret ç­‰ï¼Œç„¶åå°†æ±‡ç¼–æŒ‡ä»¤è½¬æˆæœºå™¨ç ã€‚\nå¦‚ä½•å°†æ±‡ç¼–æŒ‡ä»¤è½¬æœºå™¨ç ï¼Ÿ\nç½‘ä¸Šæœ‰å¾ˆå¤šå·¥å…·å¯ä»¥ä½¿ç”¨ï¼Œå¦‚ ASM to Hex Convertã€Online-Assembler-and-Disassemblerï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© x64dbgï¼Œåœ¨å…¶ä¸­ä¿®æ”¹æ±‡ç¼–ä»£ç ï¼ˆå¿«æ·é”® Spaceï¼‰ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æœºå™¨ç ã€‚\nä¸‹é¢æ¥è®²è®²å¦‚ä½•ä½¿ç”¨æ±‡ç¼–ä»£ç æ¥æ„é€ ä¸€ä¸ªå‡½æ•°ã€‚\n// CreateRemoteThreadåœ¨è°ƒç”¨ä¸‹é¢å‡½æ•°æ—¶ï¼Œä¼šå°† pDllPathAddress ä¼šä½œä¸ºå‚æ•°å­˜å…¥åˆ° rcxsub rsp, 0x28                     // åœ¨æ ˆä¸Šåˆ†é…0x28å­—èŠ‚çš„åŒºåŸŸmov [rsp+0x8], rcx                // å°†å½“å‰çš„rcxå€¼ä¿å­˜åˆ°æ ˆï¼Œæ–¹ä¾¿è°ƒç”¨ç»“æŸåæ¢å¤rcxçš„å€¼mov [rsp+0x10], rax               // å°†å½“å‰çš„raxå€¼ä¿å­˜åˆ°æ ˆï¼Œæ–¹ä¾¿è°ƒç”¨ç»“æŸåæ¢å¤raxçš„å€¼mov rax, LoadLibraryAddress       // å°†LoadLibraryå‡½æ•°åœ°å€å­˜å‚¨åˆ°raxcall rax                          // è°ƒç”¨LoadLibraryå‡½æ•°ï¼Œrcxæ˜¯å…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå› ä¸ºå‰é¢ä¸€ç›´æ²¡æœ‰ä¿®æ”¹rcxï¼Œæ‰€ä»¥å…¶ä¸­å­˜æ”¾çš„å°±æ˜¯DLLè·¯å¾„åœ°å€mov rcx, SaveResultAddress        // å°†SaveResultAddressåœ°å€ï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰åˆ†é…çš„M2å†…å­˜ï¼‰å­˜å‚¨åˆ°rcxmov [rcx], rax                    // å°†LoadLibraryå‡½æ•°çš„è¿”å›å€¼raxå­˜å‚¨åˆ°SaveResultAddressåœ°å€mov rax, [rsp+0x10]               // æ¢å¤raxçš„å€¼mov rcx, [rsp+0x8]                // æ¢å¤rcxçš„å€¼add rsp, 0x28                     // é‡Šæ”¾æ ˆç©ºé—´ret                               // å‡½æ•°è¿”å›ï¼Œè™½ç„¶æ˜¯WINAPIè°ƒç”¨çº¦å®šï¼ŒæŒ‰ç†éœ€è¦å‡½æ•°è‡ªèº«æ¥å¹³è¡¡å †æ ˆï¼Œ                                  // ä½†64ä½ç¨‹åºç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨rcxä¼ é€’ï¼Œå› æ­¤ä¸éœ€è¦åœ¨æ­¤é¢å¤–å°†æ ˆæŒ‡é’ˆå¢åŠ  0x8 å­—èŠ‚å¹³è¡¡å †æ ˆ\n\nç”±äº ShellCode ä¸­çš„åœ°å€éƒ½æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œåœ¨æ¯æ¬¡æ³¨å…¥æ—¶éƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ä½¿ç”¨çš„ç¡¬ç¼–ç ç»å¯¹åœ°å€ä¸ä¼šå‡ºç°åœ°å€å¤±æ•ˆçš„é—®é¢˜ã€‚\nåˆå› ä¸ºåœ¨ä¸Šè¿°æ±‡ç¼–ä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨å †æ ˆè·å–å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ä½¿ç”¨å’Œæš‚å­˜ rbp å¯„å­˜å™¨ï¼Œè€Œåœ¨ 32 ä½ç¨‹åºä¸­éœ€è¦ä½¿ç”¨ ebp å¯„å­˜å™¨æ¥è·å–å‚æ•°ã€‚\næ­¤å¤–ï¼Œåœ¨æ±‡ç¼–ç¨‹åºä¸­ï¼Œæ²¡æœ‰ç›´æ¥çš„ call 0x12345678 ç«‹å³æ•°ç»å¯¹åœ°å€å½¢å¼ï¼Œcall æŒ‡ä»¤åçš„ç«‹å³æ•°ä¼šè¢«è®¤ä¸ºæ˜¯ç›¸å¯¹ RIP&#x2F;EIP çš„åç§»é‡ã€‚å¦‚æœéœ€è¦è°ƒç”¨ç»å¯¹åœ°å€éœ€è¦é€šè¿‡é—´æ¥æ–¹å¼ï¼Œå¦‚ä¸Šé¢æ±‡ç¼–ä»£ç ä¸­çš„ï¼š\n; âŒ é”™è¯¯call LoadLibraryAddress; âœ… æ­£ç¡®mov rax, LoadLibraryAddresscall rax\n\nè€Œä¸”æ±‡ç¼–ç¨‹åºä¹Ÿä¸æ”¯æŒä½¿ç”¨ç«‹å³æ•°ä½œä¸ºå†…å­˜æ“ä½œæ•°ï¼Œéœ€è¦é€šè¿‡å¯„å­˜å™¨ä¸­è½¬æ–¹å¼ï¼Œå¦‚ä¸Šé¢æ±‡ç¼–ä»£ç ä¸­çš„ï¼š\n; âŒ é”™è¯¯mov [SaveResultAddress], rax; âœ… æ­£ç¡®mov rcx, SaveResultAddressmov [rcx], rax\n\nä¸Šè¿°æ±‡ç¼–ä»£ç è½¬æˆçš„å­—èŠ‚ç å¦‚ä¸‹ï¼š\nBYTE shellCode[] = &#123;    0x48, 0x83, 0xEC, 0x28,                                     // sub rsp, 0x28    0x48, 0x89, 0x4C, 0x24, 0x08,                               // mov [rsp+0x8], rcx    0x48, 0x89, 0x44, 0x24, 0x10,                               // mov [rsp+0x10], rax    0x48, 0xB8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rax, LoadLibraryAddress    0xFF, 0xD0,                                                 // call rax    0x48, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rcx, SaveResultAddress    0x48, 0x89, 0x01,                                           // mov [rcx], rax    0x48, 0x8B, 0x44, 0x24, 0x10,                               // mov rax, [rsp+0x10]    0x48, 0x8B, 0x4C, 0x24, 0x10,                               // mov rcx, [rsp+0x8]    0x48, 0x83, 0xC4, 0x28,                                     // add rsp, 0x28;    0xC3                                                        // ret&#125;;\n\nå…¶ä¸­ç¬¬ 5ã€7 ä¸¤è¡Œä¸­çš„ 0x00 æ˜¯å ä½ç¬¦ï¼Œéœ€è¦æ›¿æ¢ä¸ºå®é™…çš„å†…å­˜åœ°å€ï¼š\n*(DWORD64*)(&amp;shellCode[16]) = (DWORD64)pLoadLibraryAddr;*(DWORD64*)(&amp;shellCode[28]) = (DWORD64)pSaveResultAddress;\n\næœ€åé€šè¿‡ CreateRemoteThread è°ƒç”¨è¯¥ ShellCode å‡½æ•°ï¼Œå¹¶ä¼ å…¥ DLL è·¯å¾„åœ°å€ä½œä¸ºå‚æ•°ï¼š\nHANDLE hRemoteThread = CreateRemoteThread(hTargeProcess, NULL, 0, (LPTHREAD_START_ROUTINE)pShellCodeAddress, pDllPathAddress, 0, NULL);if (hRemoteThread)    // ç­‰å¾…çº¿ç¨‹ç»“æŸ    WaitForSingleObject(hRemoteThread, INFINITE);    // è¯»å–DLLå¥æŸ„    if (ReadProcessMemory(hTargeProcess, pSaveResultAddress, &amp;hDll, sizeof(HMODULE), NULL)) &#123;    &#125;&#125;\n\nEIP&#x2F;RIP åŠ«æŒæ³¨å…¥EIP&#x2F;RIP åŠ«æŒä¸ä¸Šé¢ä»‹ç»çš„ ShellCode ç‰ˆè¿œç¨‹çº¿ç¨‹æ³¨å…¥æœ‰å¼‚æ›²åŒå·¥ä¹‹å¤„ï¼Œä½†æœ€å¤§çš„åŒºåˆ«åœ¨äº EIP&#x2F;RIP åŠ«æŒæ³¨å…¥ä¸ç”¨è°ƒç”¨ CreateRemoteThread å‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹çº¿ç¨‹çš„ EIP&#x2F;RIPã€‚\nç”±äºå·²åœ¨ä¸Šé¢ ShellCode ç‰ˆè¿œç¨‹çº¿ç¨‹æ³¨å…¥ä¸­åšäº†ç›¸å…³çŸ¥è¯†çš„é“ºå«ï¼Œæ‰€ä»¥æœ¬èŠ‚ä¸ä¼šä»‹ç»çš„é‚£ä¹ˆè¯¦ç»†ã€‚\nä¸‹é¢ä»¥ 64 ä½ç¨‹åºä¸ºä¾‹ï¼Œä»‹ç» RIP åŠ«æŒæ³¨å…¥çš„å¤§è‡´æ­¥éª¤ï¼š\n\nè·å–ç›®æ ‡è¿›ç¨‹çš„å¥æŸ„ã€‚\nåœ¨ç›®æ ‡è¿›ç¨‹åˆ†é…å†…å­˜ï¼ˆè®°ä½œ M1ï¼‰ï¼Œå¹¶å†™å…¥ DLL è·¯å¾„ã€‚\nåœ¨ç›®æ ‡è¿›ç¨‹åˆ†é… 8 å­—èŠ‚çš„å†…å­˜ï¼ˆè®°ä½œ M2ï¼‰ï¼Œç”¨äºå­˜å‚¨è¿”å›çš„ DLL å¥æŸ„ã€‚\néå†ç›®æ ‡è¿›ç¨‹çš„çº¿ç¨‹ï¼Œè°ƒç”¨ SuspendThread å‡½æ•°æŒ‚èµ·ä¸€ä¸ªç›®æ ‡çº¿ç¨‹ã€‚\nè°ƒç”¨ GetThreadContext å‡½æ•°è·å–æŒ‚èµ·çº¿ç¨‹çš„ RIPï¼Œç”¨äº ShellCode æ‰§è¡Œå®Œåè·³è½¬åˆ°è¯¥ä½ç½®ç»§ç»­æ‰§è¡Œï¼Œä¸å½±å“ç›®æ ‡è¿›ç¨‹çš„åŸæœ‰é€»è¾‘ã€‚\næ„é€  ShellCodeï¼Œè¯¥ ShellCode ç”¨äºåœ¨ç›®æ ‡è¿›ç¨‹ä¸­è°ƒç”¨ LoadLibraryï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°æ­¥éª¤ 3 åˆ†é…çš„ M2 å†…å­˜ï¼Œç„¶åè·³è½¬ä¹‹å‰çš„ RIPã€‚\nåœ¨ç›®æ ‡è¿›ç¨‹åˆ†é…å†…å­˜ï¼ˆè®°ä½œ M3ï¼‰ï¼Œå¹¶å†™å…¥æ­¥éª¤ 6 æ„é€ çš„ ShellCodeï¼ŒM3 éœ€è¦æœ‰ PAGE_EXECUTE_READWRITE ä¿æŠ¤å±æ€§ã€‚\nè°ƒç”¨ SetThreadContext å‡½æ•°ä¿®æ”¹ RIP çš„å€¼ä¸º ShellCode åœ°å€ã€‚\nè°ƒç”¨ ResumeThread å‡½æ•°æ¢å¤çº¿ç¨‹ã€‚\nç­‰å¾…çŸ­æš‚åœ°æ—¶é—´åï¼Œä» M2 è¯»å– DLL å¥æŸ„çš„å€¼ã€‚\n\nShellCode å¯¹åº”çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š\nsub rsp, 0x28mov [rsp+0x8], rcxmov [rsp+0x10], raxmov rcx, DllPathAddress      // å°†DLLè·¯å¾„åœ°å€å­˜å‚¨åˆ°rcxï¼Œä½œä¸º LoadLibrary çš„å‚æ•°mov rax, LoadLibraryAddresscall rax                     // è°ƒç”¨ LoadLibrarymov rcx, SaveResultAddressmov [rcx], rax               // å°†LoadLibrary è¿”å›å€¼å­˜å‚¨åˆ° SaveResultAddressmov rax, [rsp+0x10]mov rcx, [rsp+0x8]add rsp, 0x28mov r11, OriginalRipjmp rll                      // è·³è½¬åˆ°ä¹‹å‰çš„RIP\n\nç”±äºæ˜¯ç›´æ¥ä¿®æ”¹ RIP è¿›è¡Œçš„æ‰§è¡Œæµç¨‹è·³è½¬ï¼Œå› è€Œä¼šç¼ºå°‘æ­£å¸¸å‡½æ•°è°ƒç”¨æ—¶çš„ RIP å…¥æ ˆã€å‚æ•°ä¼ é€’ç­‰è¿‡ç¨‹ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å°† DllPathAddress èµ‹å€¼ç»™ rcxï¼Œå¹¶ä¸”åœ¨ä»£ç æœ€åä¸èƒ½è°ƒç”¨ retã€‚\nå¯¹äº jmp æŒ‡ä»¤ï¼Œä¸èƒ½ä½¿ç”¨jmp OriginalRipè¿™æ ·çš„æ–¹å¼æ¥å®ç°è·³è½¬åˆ°ç»å¯¹åœ°å€ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå¯„å­˜å™¨æ¥åšé—´æ¥è·³è½¬ã€‚\nä¸Šè¿°æ±‡ç¼–ä»£ç è½¬æˆçš„å­—èŠ‚ç å¦‚ä¸‹ï¼š\nBYTE shellCode[] = &#123;    0x48, 0x83, 0xEC, 0x28,                                     // sub rsp, 0x28    0x48, 0x89, 0x4C, 0x24, 0x08,                               // mov [rsp+0x8], rcx    0x48, 0x89, 0x44, 0x24, 0x10,                               // mov [rsp+0x10], rax    0x48, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rcx, DllPathAddress    0x48, 0xB8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rax, LoadLibraryAddress    0xFF, 0xD0,                                                 // call rax    0x48, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rcx, SaveResultAddress    0x48, 0x89, 0x01,                                           // mov [rcx], rax    0x48, 0x8B, 0x44, 0x24, 0x10,                               // mov rax, [rsp+0x10]    0x48, 0x8B, 0x4C, 0x24, 0x10,                               // mov rcx, [rsp+0x8]    0x48, 0x83, 0xC4, 0x28,                                     // add rsp, 0x28    0x49, 0xBB, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov r11, OriginalRip    0x41, 0xFF, 0xE3                                            // jmp rll&#125;;\n\nè°ƒç”¨ ResumeThread å‡½æ•°æ¢å¤çº¿ç¨‹åï¼Œçº¿ç¨‹å°±ä¼šæ‰§è¡Œ ShellCodeã€‚ç”±äºæ²¡æœ‰åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œæ‰€ä»¥ä¸èƒ½åƒè¿œç¨‹çº¿ç¨‹æ³¨å…¥é‚£æ ·ç­‰å¾…çº¿ç¨‹ç»“æŸåå†è¯»å– DLL å¥æŸ„ï¼Œå¯ä»¥ç­‰å¾…ä¸€ä¸ªåˆé€‚çš„æ—¶é—´åå°±å°è¯•è¯»å– DLL å¥æŸ„ã€‚\nSleep(200);ReadProcessMemory(hTargeProcess, pSaveResultAddress, &amp;hDll, sizeof(HMODULE), NULL);\n\nè·å–åˆ° DLL å¥æŸ„åï¼Œå¯ä»¥å†æ¬¡æ³¨å…¥ ShellCode æ¥è°ƒç”¨ FreeLibrary æ¥é‡Šæ”¾ DLLã€‚\nåŸºäºæ–‡ä»¶æ˜ å°„æ–¹å¼çš„å†…å­˜è®¿é—®åœ¨å‰é¢çš„è¿œç¨‹çº¿ç¨‹æ³¨å…¥å’Œ EIP&#x2F;RIP æ³¨å…¥ç« èŠ‚ï¼Œéƒ½ä½¿ç”¨äº† VirtualAllocExã€WriteProcessMemoryã€ReadProcessMemory ç­‰å‡½æ•°åœ¨è¿œç¨‹è¿›ç¨‹ä¸­åˆ†é…å†…å­˜ã€è¯»å†™å†…å­˜ï¼Œç”±äºè¿™äº›å‡½æ•°è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå·²ç»ä½œä¸ºé«˜å±å‡½æ•°è¢« AV&#x2F;EDR è½¯ä»¶æ‰€ç›‘æ§ã€‚æœ¬èŠ‚å¹¶ä¸æ˜¯ä»‹ç»ä¸€ç§æ–°çš„æ³¨å…¥æ–¹æ³•ï¼Œè€Œæ˜¯ä»‹ç»ä¸€ç§ä¸ä½¿ç”¨ä¸Šè¿°å‡½æ•°ï¼Œé€šè¿‡ä½¿ç”¨æ–‡ä»¶æ˜ å°„æ–¹å¼æ¥è¯»å†™è¿œç¨‹å†…å­˜çš„æ–¹æ³•ã€‚\n\nè¿™ç§æ–¹å¼ç›®å‰è‚¯å®šæ— æ³• 100% èº²é¿ AV&#x2F;EDRï¼Œæ¯•ç«Ÿæ”»é˜²ä¹‹è·¯æ°¸ä¸æ­¢å¢ƒã€‚\n\nä½¿ç”¨æ–‡ä»¶æ˜ å°„è®¿é—®ç›®æ ‡è¿›ç¨‹å†…å­˜åŠæ³¨å…¥çš„å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š\n\nè°ƒç”¨ CreateFileMapping å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ˜ å°„å¯¹è±¡ï¼Œå¹¶æŒ‡å®šè¶³å¤Ÿçš„å¤§å°ï¼Œä½¿å…¶å¯ä»¥å­˜å‚¨ DLL è·¯å¾„ã€‚å¦‚æœä½¿ç”¨ EIP&#x2F;RIP åŠ«æŒæ–¹å¼æ³¨å…¥ï¼Œè¿˜éœ€è¦å­˜å‚¨è¿”å›çš„ DLL å¥æŸ„ã€ShellCodeã€‚\nè°ƒç”¨ MapViewOfFile å‡½æ•°å°†æ–‡ä»¶æ˜ å°„å¯¹è±¡æ˜ å°„åˆ°å½“å‰è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œå¾—åˆ°è™šæ‹Ÿåœ°å€ Aã€‚\nå°† DLL è·¯å¾„ã€ShellCode ç­‰å†™å…¥åˆ°è™šæ‹Ÿåœ°å€ Aã€‚\nè°ƒç”¨ MapViewOfFile2 å‡½æ•°å°†æ–‡ä»¶æ˜ å°„å¯¹è±¡æ˜ å°„åˆ°ç›®æ ‡è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œå¾—åˆ°è™šæ‹Ÿåœ°å€ Bã€‚\næ ¹æ®è™šæ‹Ÿåœ°å€ B æ¥è®¡ç®— DLL è·¯å¾„åœ¨ç›®æ ‡è¿›ç¨‹ä¸­çš„çœŸå®åœ°å€ï¼Œä»¥åŠå¡«å…… ShellCode ä¸­çš„åœ°å€å ä½ç¬¦ã€‚\nç­‰å¾…çº¦ 50msã€‚\nè°ƒç”¨ CreateRemoteThread æˆ–è€…ä¿®æ”¹ RIP æ¥å®ç°æ³¨å…¥ã€‚\nè·å– DLL å¥æŸ„ã€‚å¦‚æœä½¿ç”¨ EIP&#x2F;RIP æ³¨å…¥ï¼Œåˆ™ä½¿ç”¨è™šæ‹Ÿåœ°å€ A è¯»å– DLL å¥æŸ„ï¼Œå› ä¸º CPU ä¼šè´Ÿè´£æ•°æ®çš„åŒæ­¥ï¼›å¦‚æœä½¿ç”¨è¿œç¨‹çº¿ç¨‹æ³¨å…¥ï¼Œåˆ™ç›´æ¥é€šè¿‡çº¿ç¨‹é€€å‡ºç æ¥è·å– DLL å¥æŸ„ã€‚\n\nä¸ºä»€ä¹ˆç¬¬ 6 æ­¥éœ€è¦ç­‰å¾… 50msï¼Ÿå› ä¸ºåœ¨å¤šæ ¸ç³»ç»Ÿä¸­ï¼ŒCPU è¿›è¡ŒåŒæ­¥æ—¶å¯èƒ½ä¼šæœ‰ä¸€ä¸ªçŸ­æš‚çš„å»¶è¿Ÿï¼Œç­‰å¾… 50msï¼Œç¡®ä¿ç¬¬ 5 æ­¥ä¿®æ”¹çš„æ•°æ®å·²ç»åŒæ­¥åˆ°ç›®æ ‡è¿›ç¨‹ã€‚\nå¦å¤–ï¼Œåœ¨ DLL æ³¨å…¥ä¹‹åï¼Œæœ€å¥½ä¸è¦è°ƒç”¨ UnmapViewOfFile2 å‡½æ•°æ¥å–æ¶ˆå¯¹ç›®æ ‡è¿›ç¨‹çš„æ˜ å°„ï¼Œå¦åˆ™ç›®æ ‡è¿›ç¨‹ä¸­çš„ç›¸å…³æ•°æ®ä¼šè¢«æ¸…é™¤ï¼Œå¯èƒ½å¯¼è‡´å…¶ä»–é”™è¯¯ã€‚\n\nç”±äº MapViewOfFile2 å‡½æ•°åœ¨ Windows 10 1703 ç‰ˆæœ¬æ‰å¼•å…¥ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ”¯æŒçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬æœ‰é™ã€‚\n\nä¸‹é¢æ˜¯ä½¿ç”¨æ–‡ä»¶æ˜ å°„æ–¹å¼ç»“åˆ RIP åŠ«æŒå®ç°çš„ DLL æ³¨å…¥çš„å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š\nHMODULE MapRipHijackInjectDll64(DWORD dwProcessID, LPCTSTR pszDllPath, DWORD&amp; dwGLE) &#123;    HMODULE hDll = NULL;    HANDLE hTargeProcess = NULL;    HANDLE hMapping = NULL;    LPVOID pLocalAddress = NULL;    LPVOID pRemoteAddress = NULL;    SetLastError(0);    __try &#123;        if (pszDllPath == NULL || dwProcessID == 0)            __leave;        LPVOID pLoadLibraryAddr = GetLoadLibarayAddress();        if (!pLoadLibraryAddr)            __leave;        hTargeProcess = OpenProcess(PROCESS_VM_OPERATION, FALSE, dwProcessID);        if (!hTargeProcess)            __leave;        // clang-format off        BYTE shellCode[] = &#123;            0x48, 0x83, 0xEC, 0x28,                                     // sub rsp, 0x28            0x48, 0x89, 0x4C, 0x24, 0x08,                               // mov [rsp+0x8], rcx            0x48, 0x89, 0x44, 0x24, 0x10,                               // mov [rsp+0x10], rax            0x48, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rcx, DllPathAddress            0x48, 0xB8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rax, LoadLibraryAddress            0xFF, 0xD0,                                                 // call rax            0x48, 0xB9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov rcx, SaveResultAddress            0x48, 0x89, 0x01,                                           // mov [rcx], rax            0x48, 0x8B, 0x44, 0x24, 0x10,                               // mov rax, [rsp+0x10]            0x48, 0x8B, 0x4C, 0x24, 0x10,                               // mov rcx, [rsp+0x8]            0x48, 0x83, 0xC4, 0x28,                                     // add rsp, 0x28            0x49, 0xBB, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // mov r11, OriginalRip            0x41, 0xFF, 0xE3                                            // jmp rll        &#125;;        // clang-format on        const SIZE_T dllPathSize = (_tcslen(pszDllPath) + 1) * sizeof(TCHAR);        const SIZE_T totalSize = dllPathSize + sizeof(shellCode) + sizeof(HMODULE);        hMapping = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_EXECUTE_READWRITE, 0, totalSize, NULL);        if (!hMapping)            __leave;        pLocalAddress = MapViewOfFile(hMapping, FILE_MAP_WRITE, 0, 0, dllPathSize);        if (!pLocalAddress)            __leave;        const LPVOID pLocalDllPath = pLocalAddress;        const LPVOID pLocalSaveResult = (BYTE*)pLocalDllPath + dllPathSize;        BYTE* pLocalShellCode = (BYTE*)pLocalSaveResult + sizeof(HMODULE);        // å…ˆå°†æ•°æ®æ‹·è´åˆ°æœ¬åœ°çš„å†…å­˜        memcpy(pLocalDllPath, pszDllPath, dllPathSize);        memcpy(pLocalShellCode, shellCode, sizeof(shellCode));        HANDLE hSnap = CreateToolhelp32Snapshot(TH32CS_SNAPTHREAD, 0);        if (hSnap == INVALID_HANDLE_VALUE)            __leave;        THREADENTRY32 te32 = &#123;sizeof(te32)&#125;;        for (bool fOk = Thread32First(hSnap, &amp;te32); fOk; fOk = Thread32Next(hSnap, &amp;te32)) &#123;            if (te32.th32OwnerProcessID == dwProcessID) &#123;                // ç¬¬ä¸€ä¸ªçº¿ç¨‹é€šå¸¸æ˜¯ä¸»çº¿ç¨‹                HANDLE hTargetThread = OpenThread(THREAD_SUSPEND_RESUME | THREAD_GET_CONTEXT | THREAD_SET_CONTEXT, FALSE, te32.th32ThreadID);                if (!hTargetThread)                    continue;                if (SuspendThread(hTargetThread) == (DWORD)-1) &#123;                    CloseHandle(hTargetThread);                    continue;                &#125;                CONTEXT threadCtx = &#123;0&#125;;                threadCtx.ContextFlags = CONTEXT_FULL;                if (!GetThreadContext(hTargetThread, &amp;threadCtx)) &#123;                    CloseHandle(hTargetThread);                    continue;                &#125;                // æ˜ å°„åˆ°è¿œç¨‹å†…å­˜                pRemoteAddress = MapViewOfFile2(hMapping, hTargeProcess, 0, NULL, 0, 0, PAGE_EXECUTE_READWRITE);                if (!pRemoteAddress) &#123;                    CloseHandle(hTargetThread);                    break;                &#125;                // æ ¹æ®è¿œç¨‹å†…å­˜çš„åœ°å€æ¥å¡«å……ShellCodeä¸­çš„å ä½ç¬¦                *(DWORD64*)(&amp;pLocalShellCode[16]) = (DWORD64)pRemoteAddress + ((BYTE*)pLocalDllPath - (BYTE*)pLocalAddress);                *(DWORD64*)(&amp;pLocalShellCode[26]) = (DWORD64)pLoadLibraryAddr;                *(DWORD64*)(&amp;pLocalShellCode[38]) = (DWORD64)pRemoteAddress + ((BYTE*)pLocalSaveResult - (BYTE*)pLocalAddress);                *(DWORD64*)(&amp;pLocalShellCode[65]) = (DWORD64)threadCtx.Rip;                // åœ¨å¤šæ ¸ç³»ç»Ÿä¸­ï¼ŒCPUåŒæ­¥ä¼šæœ‰çŸ­æš‚å»¶è¿Ÿ                Sleep(50);                // ShellCodeåœ¨è¿œç¨‹å†…å­˜ä¸­çš„åœ°å€                LPVOID pRemoteShellCodeAddress = (BYTE*)pRemoteAddress + ((BYTE*)pLocalShellCode - (BYTE*)pLocalAddress);                threadCtx.Rip = (DWORD64)pRemoteShellCodeAddress;                if (!SetThreadContext(hTargetThread, &amp;threadCtx)) &#123;                    CloseHandle(hTargetThread);                    break;                &#125;                if (ResumeThread(hTargetThread) == (DWORD)-1) &#123;                    CloseHandle(hTargetThread);                    break;                &#125;                Sleep(100);                // è¯»å–DLLå¥æŸ„                hDll = *(HMODULE*)pLocalSaveResult;                CloseHandle(hTargetThread);                break;            &#125;        &#125;        CloseHandle(hSnap);    &#125; __finally &#123;        dwGLE = GetLastError();        if (!hDll) &#123;            // æ³¨å…¥æˆåŠŸåï¼Œä¸è¦å–æ¶ˆå¯¹ç›®æ ‡è¿›ç¨‹çš„æ˜ å°„            if (hTargeProcess &amp;&amp; pRemoteAddress) &#123;                UnmapViewOfFile2(hTargeProcess, pRemoteAddress, 0);                pRemoteAddress = NULL;            &#125;        &#125;        if (pLocalAddress)            UnmapViewOfFile(pLocalAddress);        if (hMapping)            CloseHandle(hMapping);        if (hTargeProcess)            CloseHandle(hTargeProcess);    &#125;    return hDll;&#125;\n\nç”¨æˆ·æ¨¡å¼ APC æ³¨å…¥QueueUserAPCæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª APC é˜Ÿåˆ—ï¼Œå½“çº¿ç¨‹è¿›å…¥å¯è­¦å‘ŠçŠ¶æ€ï¼ˆAlertableï¼‰æ—¶ï¼Œä¼šæŒ‰ç…§ FIFO çš„é¡ºåºæ‰§è¡Œ APCï¼ˆå¼‚æ­¥è¿‡ç¨‹è°ƒç”¨ï¼‰ã€‚\nåœ¨ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼éƒ½å¯ä»¥å®ç° APC æ³¨å…¥ï¼Œæœ¬èŠ‚ä»‹ç»å¦‚ä½•åœ¨ç”¨æˆ·æ¨¡å¼å®ç° APC æ³¨å…¥ã€‚ç”¨æˆ·æ¨¡å¼å®ç° APC æ³¨å…¥ä¸»è¦ä½¿ç”¨ QueueUserAPC å‡½æ•°å‘ç›®æ ‡çº¿ç¨‹æ’å…¥ APCã€‚\nDWORD QueueUserAPC(  [in] PAPCFUNC  pfnAPC,  [in] HANDLE    hThread,  [in] ULONG_PTR dwData);\n\nä¸è¿œç¨‹çº¿ç¨‹æ³¨å…¥çš„æ€è·¯ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨å°† LoadLibrary åœ°å€ä½œä¸º pfnAPC å‚æ•°ä¼ å…¥ï¼ŒDLL è·¯å¾„ä½œä¸º dwData å‚æ•°ä¼ å…¥ï¼ˆä¹Ÿéœ€è¦æå‰åœ¨ç›®æ ‡è¿›ç¨‹åˆ†é…å†…å­˜å’Œèµ‹å€¼ï¼‰ï¼Œæ¥å®ç°åœ¨ç›®æ ‡è¿›ç¨‹ä¸­çš„åŠ è½½ DLL ã€‚\nAPC æ³¨å…¥çš„å¼Šç«¯åœ¨äºï¼Œå½“ APC æ’å…¥åˆ°é˜Ÿåˆ—ä¹‹åï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è¦ç­‰å¾…çº¿ç¨‹è¿›å…¥å¯è­¦å‘ŠçŠ¶æ€æ—¶æ‰ä¼šä¾æ¬¡æ‰§è¡Œï¼Œé‚£ä¹ˆçº¿ç¨‹ä½•æ—¶è¿›å…¥å¯è­¦å‘ŠçŠ¶æ€å‘¢ï¼Ÿ\nçº¿ç¨‹åªæœ‰è°ƒç”¨ SleepExã€SignalObjectAndWaitã€WaitForSingleObjectExã€WaitForMultipleObjectsEx æˆ– MsgWaitForMultipleObjectsEx å‡½æ•°åæ‰ä¼šè¿›å…¥å¯è­¦å‘ŠçŠ¶æ€ã€‚\nå› æ­¤å½“æ’å…¥ APC åï¼Œæˆ‘ä»¬è¿˜è¦ç¥ˆç¥·çº¿ç¨‹èµ¶å¿«æ‰§è¡Œä¸Šè¿°å‡½æ•°ï¼Œå¦åˆ™ DLL æ°¸è¿œä¸ä¼šè¢«æ³¨å…¥ã€‚è™½ç„¶ä¸ºäº†æé«˜æ³¨å…¥çš„æˆåŠŸç‡ï¼Œé€šå¸¸ä¼šåœ¨ç›®æ ‡è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹ä¸­éƒ½æ‰§è¡Œ APC æ’å…¥æ“ä½œï¼Œä½†è¿™æ ·æˆåŠŸç‡ä¾ç„¶æ— æ³•å¾—åˆ°ä¿è¯ã€‚\né€šè¿‡æœªå…¬å¼€çš„ NtTestAlert å‡½æ•°è™½ç„¶ä¹Ÿå¯ä»¥ä½¿çº¿ç¨‹æ‰§è¡Œå¹¶æ¸…ç©ºå½“å‰ APC é˜Ÿåˆ—ï¼Œå½“è¯¥å‡½æ•°åªèƒ½ä½œç”¨äºå½“å‰è¿›ç¨‹ä¸­çš„å½“å‰çº¿ç¨‹ï¼Œæ— æ³•æ“ä½œè¿œç¨‹çº¿ç¨‹ã€‚\nç›®å‰ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æœªå…¬å¼€çš„ NtQueueApcThreadEx å‡½æ•°è¿›è¡Œ APC æ³¨å…¥ï¼Œä½¿ç”¨è¯¥å‡½æ•°æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„ APCï¼Œå¯ä»¥ä¸ç”¨ç­‰å¾…çº¿ç¨‹è¿›å…¥ Alertable çŠ¶æ€ï¼Œä½†è¿™ç§æ–¹å¼å¯¹ç³»ç»Ÿçš„ç‰ˆæœ¬æœ‰é™åˆ¶ã€‚\nEarly BirdEarly Bird ç¿»è¯‘ä¸ºä¸­æ–‡å«â€œæ—©èµ·çš„é¸Ÿå„¿â€ã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ³¨å…¥çš„æ—¶æœºå¾ˆæ—©ã€‚\nEarly Bird æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ APC æ³¨å…¥æŠ€æœ¯ï¼Œå…¶é—´æ¥åˆ©ç”¨äº† NtTestAlert å‡½æ•°ã€‚å› ä¸ºçº¿ç¨‹åœ¨åˆå§‹åŒ–æ—¶ä¼šä¸»åŠ¨è°ƒç”¨ NtTestAlert å‡½æ•°æ¥æ¸…ç©ºå’Œå¤„ç† APC é˜Ÿåˆ—ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒ‚èµ·çš„è¿›ç¨‹ï¼ˆå½“ç„¶å…¶ä¸»çº¿ç¨‹ä¹Ÿä¼šè¢«æŒ‚èµ·ï¼‰ï¼Œå¹¶è°ƒç”¨ QueueUserAPC å‡½æ•°åœ¨è¯¥çº¿ç¨‹ä¸­æ’å…¥ä¸€ä¸ª APCï¼Œç„¶åæ¢å¤çº¿ç¨‹ã€‚å½“çº¿ç¨‹è¿›å…¥åˆå§‹åŒ–æµç¨‹åä¼šè‡ªåŠ¨è°ƒç”¨ NtTestAlert æ¥æ¸…ç©ºå¹¶å¤„ç† APC é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œè¿™æ ·æˆ‘ä»¬æ’å…¥çš„ APC å°±å¾—ä»¥æ‰§è¡Œã€‚\nä¸‹é¢ä»£ç é€šè¿‡å°† LoadLibrary åœ°å€æ’å…¥ APC çš„æ–¹å¼æ¥å±•ç¤ºäº† Early Bird çš„åŸºæœ¬æµç¨‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶æ¢æˆ ShellCode çš„åœ°å€ã€‚\nPFN_NtTestAlert pfnNtTestAlert = (PFN_NtTestAlert)GetProcAddress(LoadLibraryW(L&quot;ntdll.dll&quot;), &quot;NtTestAlert&quot;);LPVOID pLoadLibraryAddr = GetLoadLibarayAddress();// é€‰æ‹©åˆé€‚çš„ç¨‹åº#ifdef _WIN64    WCHAR szPath[MAX_PATH] = &#123;L&quot;a 64bit process path&quot;&#125;;#else    WCHAR szPath[MAX_PATH] = &#123;L&quot;a 32bit process path&quot;&#125;;#endifSTARTUPINFOW si = &#123;sizeof(si)&#125;;PROCESS_INFORMATION pi = &#123;0&#125;;// åˆ›å»ºæŒ‚èµ·çš„è¿›ç¨‹CreateProcessW(NULL, szPath, NULL, NULL, FALSE, CREATE_SUSPENDED, NULL, NULL, &amp;si, &amp;pi);const SIZE_T dllPathSize = (_tcslen(pszDllPath) + 1) * sizeof(TCHAR);LPVOID pRemoteDllPath = VirtualAllocEx(pi.hProcess, NULL, dllPathSize, MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);WriteProcessMemory(pi.hProcess, pRemoteDllPath, pszDllPath, dllPathSize, NULL);// æ’å…¥APCQueueUserAPC((PAPCFUNC)pLoadLibraryAddr, pi.hThread, (ULONG_PTR)pRemoteDllPath);ResumeThread(pi.hThread);\n\nInline HookInline Hookï¼ˆå†…è”æŒ‚é’©ï¼‰æ˜¯ä¸€ç§ç›´æ¥ä¿®æ”¹ç›®æ ‡å‡½æ•°å¼€å¤´çš„æŒ‡ä»¤ï¼Œä½¿å…¶è·³è½¬åˆ°è‡ªå®šä¹‰çš„ä»£ç†å‡½æ•°ï¼Œä»è€Œå®ç° Hook çš„æŠ€æœ¯ã€‚\nåŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š\nåŸå§‹å‡½æ•°ï¼š7FFA12345678: 55                    push rbp7FFA12345679: 48 89 E5              mov rbp, rsp7FFA1234567C: 48 83 EC 20           sub rsp, 20h...Inline Hook åï¼š7FFA12345678: E9 83 11 22 33        jmp MyHookFunction  ; ä¿®æ”¹ä¸ºè·³è½¬æŒ‡ä»¤7FFA1234567D: EC 20                 ; è¢«è¦†ç›–çš„åŸæœ‰æŒ‡ä»¤ï¼ˆéƒ¨åˆ†ç ´åï¼‰\n\nä»ä¸Šé¢åŸºæœ¬æ­¥éª¤å¯ä»¥çœ‹å‡ºï¼Œjmp MyHookFunctionæŒ‡ä»¤å ç”¨ 5 å­—èŠ‚ï¼Œä½¿ç”¨æ›¿æ¢ä¹‹å‰æŒ‡ä»¤ï¼Œä¼šå¯¼è‡´ç¬¬ 3 æ¡æŒ‡ä»¤ä»…éƒ¨åˆ†è¢«æ›¿æ¢ï¼Œè¿™ä¹Ÿæ˜¯ Inline Hook çš„æŠ€æœ¯æŒ‘æˆ˜ä¹‹ä¸€ï¼šä¸åŒæŒ‡ä»¤é•¿åº¦ä¸åŒï¼Œéœ€è¦å®Œæ•´è¦†ç›–æŒ‡ä»¤è¾¹ç•Œã€‚\nå¦å¤–ï¼Œjmp æŒ‡ä»¤ä½¿ç”¨ç›¸å¯¹è·³è½¬ï¼ˆç›®æ ‡åœ°å€ &#x3D; å½“å‰ EIP + ç›¸å¯¹åç§»ï¼‰ï¼Œå› æ­¤è¿˜éœ€è¦è®¡ç®—å½“å‰æŒ‡ä»¤ç›¸å¯¹ EIP çš„åç§»åœ°å€ã€‚\nåœ¨æ‰§è¡Œå®Œ MyHookFunction å‡½æ•°åï¼Œå¦‚æœéœ€è¦ç»§ç»­æ‰§è¡ŒåŸå§‹å‡½æ•°æ€ä¹ˆå‘¢ï¼Ÿå¯ä»¥åœ¨ MyHookFunction ä¸­è¿˜åŸè¢«è¦†ç›–çš„åŸæœ‰æŒ‡ä»¤å—ï¼Ÿç±»ä¼¼ä¸‹é¢çš„åšæ³•ï¼š\n// å‡è®¾åœ¨è°ƒç”¨å‰è¿˜åŸï¼Œè°ƒç”¨åé‡æ–°hookvoid MyHookFunction() &#123;    // è¿˜åŸåŸå§‹ä»£ç     RestoreOriginalCode();    // è°ƒç”¨åŸå§‹å‡½æ•°    OriginalFunction();    // é‡æ–°hook â† âŒ è¿™é‡Œæœ‰é—®é¢˜ï¼    RehookFunction();&#125;\n\nè¿™æ˜¯é”™è¯¯çš„ï¼Œè¿™æ ·åšåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°ç«æ€æ¡ä»¶é—®é¢˜ï¼Œçº¿ç¨‹ A æ­£åœ¨æ‰§è¡ŒåŸå§‹å‡½æ•°ï¼Œè€Œçº¿ç¨‹ B å¯èƒ½ä¼šåœ¨è¿›è¡Œé‡æ–° Hookï¼Œå¯¼è‡´æ— æ³•æ‹¦æˆªã€‚è€Œä¸”æ¯æ¬¡ä¿®æ”¹æŒ‡ä»¤éƒ½éœ€è¦æ›´æ”¹å†…å­˜ä¿æŠ¤å±æ€§ï¼Œè¿™ç§åå¤ä¿®æ”¹çš„ä»£ä»·ä¹Ÿå¾ˆé«˜ã€‚\nå¯ä»¥é€šè¿‡å¼•å…¥è·³æ¿æœºåˆ¶æ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä»¥ Hook MessageBoxA ä¸ºä¾‹ï¼š\n; åŸå§‹å‡½æ•°è¢«ä¿®æ”¹åï¼šMessageBoxA:    jmp MyMessageBoxA  ; 5å­—èŠ‚ï¼ˆx86ï¼‰æˆ–14å­—èŠ‚ï¼ˆx64ï¼‰    ... è¢«è¦†ç›–çš„åŸå§‹æŒ‡ä»¤ ...; è·³æ¿å‡½æ•°ï¼šMessageBoxA_Trampoline:    ; 1. è¢«è¦†ç›–çš„åŸå§‹æŒ‡ä»¤    push ebp    mov ebp, esp    sub esp, 20h    ; 2. è·³å›åŸå§‹å‡½æ•°çš„å‰©ä½™éƒ¨åˆ†    jmp MessageBoxA+5\n\nåœ¨ä»»ä½•æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨åŸå§‹ MessageBoxA æ—¶ï¼Œç›´æ¥è°ƒç”¨ MessageBoxA_Trampoline å³å¯ã€‚\n\nä¸Šé¢çš„å®ç°æ–¹æ³•è™½ç„¶ä¸éš¾ï¼Œä½†ä»ç„¶æœ‰å¾ˆå¤šéœ€è¦è€ƒè™‘çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯è¦å¼€å‘ä¸€ä¸ªé€šç”¨çš„ Inline Hook åº“ï¼Œæ­¤æ—¶éœ€è¦è€ƒè™‘å¦‚ä½•ç•Œå®šä»»æ„å¾… Hook å‡½æ•°çš„æŒ‡ä»¤è¾¹ç•Œï¼Œç¡®ä¿æ²¡æœ‰å‡ºç°æœ¬èŠ‚ä¸€å¼€å§‹çš„éƒ¨åˆ†æŒ‡ä»¤è¢«æ›¿æ¢çš„æƒ…å†µã€‚\nè¯´åˆ°è¿™é‡Œå°±ä¸å¾—ä¸æ¨å‡ºä»Šå¤©çš„ä¸»è§’ â€“ minhookï¼Œè¯¥åº“æ˜¯ç›®å‰ Windows ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ Inline Hook è§£å†³æ–¹æ¡ˆï¼Œå®Œç¾è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œä¸‹é¢é€šè¿‡å‡ è¡Œä»£ç æ¥æ¼”ç¤ºè¯¥åº“çš„ä½¿ç”¨ã€‚\ntypedef int(WINAPI * PFN_MessageBoxW)(HWND hWnd, LPCWSTR lpText, LPCWSTR lpCaption, UINT uType);LPVOID pfnTraget = NULL;                // ç­‰åŒäºMessageBoxWçš„åŸå§‹åœ°å€PFN_MessageBoxW pfnTrampoline = NULL;   // è·³æ¿å‡½æ•°ï¼Œç”¨äºåœ¨Detourå‡½æ•°ä¸­è°ƒç”¨åŸå§‹çš„MessageBoxWï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨pfnTragetint WINAPI MyMessageBoxW(HWND hWnd, LPCWSTR lpText, LPCWSTR lpCaption, UINT uType) &#123;    return pfnTrampoline(hWnd, L&quot;MessageBoxW has been hooked by IAT-Hook!&quot;, TITLE, uType);&#125;// åˆå§‹åŒ–MinHookMH_STATUS mhStatus = MH_Initialize();// Hook User32.dll::MessageBoxWmhStatus = MH_CreateHookApiEx(    L&quot;User32.dll&quot;,    &quot;MessageBoxW&quot;,    (LPVOID)MyMessageBoxW,    (LPVOID*)&amp;pfnTrampoline,    (LPVOID*)&amp;pfnTraget);// å¯ç”¨æŒ‡å®šé’©å­mhStatus = MH_EnableHook(pfnTraget);// ......// å½“ä¸éœ€è¦é’©å­æ—¶ï¼Œç§»é™¤æŒ‡å®šé’©å­MH_RemoveHook(pfnTraget);// æœ€åï¼Œååˆå§‹åŒ–MinHookmhStatus = MH_Uninitialize();\n\nIAT HookIAT çš„å¯¼å…¥åœ°å€è¡¨ï¼ˆImport Address Tableï¼‰çš„ç®€å†™ï¼Œè¯¥è¡¨è®°å½•äº†ç¨‹åºä»å“ªäº› DLL å¯¼å…¥äº†å“ªäº›å‡½æ•°ã€‚\nWindows åº”ç”¨ç¨‹åºéƒ½ä¼šä¾èµ–ç³»ç»Ÿåº“æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼Œè™½ç„¶é€šè¿‡ MT(d)ç¼–è¯‘çš„ç¨‹åºä¼šé™æ€é“¾æ¥ CRTï¼Œä½†å…¶ä»–ç³»ç»Ÿåº“ä»ç„¶ä¼šå‡ºç°åœ¨ IAT ä¸­ï¼Œå› ä¸ºè¿™äº›ç³»ç»Ÿåº“æ— æ³•è¢«é™æ€é“¾æ¥åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚\nIAT Hook çš„åŸç†ï¼šé’ˆå¯¹éšå¼è°ƒç”¨çš„å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨ç”Ÿæˆä»£ç æ—¶ï¼Œä¼šå°† call MessageBox æŒ‡ä»¤æŒ‡å‘ IAT ä¸­çš„ä¸€ä¸ªæ¡ç›®ï¼Œæˆ‘ä»¬ Hook æ‰è¿™ä¸ªæ¡ç›®ï¼ˆå°†å…¶ä¸­çš„åœ°å€æ”¹ä¸ºè‡ªå·±å‡½æ•°åœ°å€ï¼‰ï¼Œç¨‹åºæ‰§è¡Œæ—¶å°±ä¼šè·³è½¬åˆ°æˆ‘ä»¬è‡ªå·±çš„ä»£ç ã€‚\nä½†æ˜¯ IAT Hook å¯¹æ˜¾å¼è°ƒç”¨ï¼ˆLoadLibrary -&gt; GetProcAddressï¼‰è°ƒç”¨æ²¡æœ‰æ•ˆæœï¼Œå› ä¸º GetProcAddress å‡½æ•°æ˜¯ä» DLL çš„å¯¼å‡ºè¡¨ï¼ˆEATï¼‰ä¸­æŸ¥æ‰¾çš„å‡½æ•°åŸå§‹å†…å­˜åœ°å€ï¼Œè¿™ä¸ªè¿‡ç¨‹æ ¹æœ¬ä¸æŸ¥é˜…è°ƒç”¨è€…è‡ªèº«çš„ IAT è¡¨ï¼Œæ‰€ä»¥ Hook æ— æ³•ç”Ÿæ•ˆã€‚\n\nå¦‚æœè¦å¯¹æ˜¾ç¤ºè°ƒç”¨çš„å‡½æ•°è¿›è¡Œ Hookï¼Œå¯ä»¥ä½¿ç”¨åé¢ç« èŠ‚ä»‹ç»çš„ EAT Hookã€‚\n\næ—¢ç„¶æ˜¯ IAT Hookï¼Œé‚£ä¹ˆè‚¯å®šå…ˆè¦æ‰¾ IAT è¡¨ã€‚æ ¹æ®ä¸‹å›¾æè¿°çš„ PE æ–‡ä»¶ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥è§£æå‡º IAT æ•°æ®ã€‚\n\nåœ¨è§£æ IAT æ•°æ®ä¹‹å‰ï¼Œå…ˆè¦æ‰¾åˆ°ä¸å¯¼å…¥è¡¨ç›¸å…³çš„æ•°æ®ç›®å½•é¡¹ï¼Œå¤§è‡´æ­¥éª¤ä¸ºï¼š\n\né¦–å…ˆæ ¹æ® DOS å¤´ä¸­çš„ e_lfanew å­—æ®µå®šä½åˆ° NT å¤´ã€‚\nç„¶åæ‰¾åˆ° NT å¤´ä¸­çš„ Optional å¤´ã€‚\nåœ¨ Optional å¤´çš„å°¾éƒ¨å­˜å‚¨äº†ä¸€ä¸ª DataDirectorys æ•°ç»„ï¼ˆæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ IMAGE_DATA_DIRECTORY ç±»å‹ï¼‰ï¼Œè¯¥æ•°ç»„ä¸­ç´¢å¼•ä¸º 1 çš„é¡¹ä¸­å­˜å‚¨çš„æ˜¯â€œå¯¼å…¥è¡¨â€çš„åç§»å’Œå¤§å°ã€‚\næ ¹æ®é•œåƒåŸºåœ°å€åŠ ä¸Šåç§»å°±æ‰¾åˆ°äº†â€œå¯¼å…¥è¡¨æ•°æ®ç›®å½•é¡¹â€äº†ã€‚\n\nIMAGE_DATA_DIRECTORY ç±»å‹å®šä¹‰å¦‚ä¸‹ï¼š\ntypedef struct _IMAGE_DATA_DIRECTORY &#123;    DWORD   VirtualAddress;    DWORD   Size;&#125; IMAGE_DATA_DIRECTORY, *PIMAGE_DATA_DIRECTORY;\n\nå…¶ä¸­ï¼ŒVirtualAddress ä¸­å­˜å‚¨çš„ä¸æ˜¯ç»å¯¹åœ°å€ï¼Œè€Œæ˜¯ç›¸å¯¹ä¸é•œåƒåŸºå€çš„åç§»ï¼ˆRVAï¼‰ï¼Œåœ¨ä¸‹é¢ä»‹ç»çš„ç»“æ„ä½“ä¸­çš„å…ƒç´ æ‰€å­˜å‚¨çš„åœ°å€ä¹Ÿéƒ½æ˜¯ RVAã€‚\nVirtualAddress æ‰€æŒ‡å‘çš„æ˜¯ IMAGE_IMPORT_DESCRIPTOR æ•°ç»„ï¼ˆå¯¼å…¥è¡¨æè¿°ç¬¦ï¼‰ï¼Œæ•°ç»„ä¸­æ¯ä¸€ä¸ª IMAGE_IMPORT_DESCRIPTOR å…ƒç´ ä»£è¡¨ä¸€ä¸ªä¾èµ–çš„ DLLã€‚\nIMAGE_IMPORT_DESCRIPTOR å®šä¹‰å¦‚ä¸‹ï¼š\ntypedef struct _IMAGE_IMPORT_DESCRIPTOR &#123;    union &#123;        DWORD   Characteristics;        DWORD   OriginalFirstThunk;   // å­˜å‚¨å¯¼å…¥åç§°è¡¨INTçš„ RVA    &#125; DUMMYUNIONNAME;    DWORD   TimeDateStamp;    DWORD   ForwarderChain;    DWORD   Name;               // å­˜å‚¨å¯¹åº” DLL æ–‡ä»¶åå­—ç¬¦ä¸²çš„ RVA    DWORD   FirstThunk;         // å­˜å‚¨å¯¼å…¥åœ°å€è¡¨IATçš„ RVAã€‚åŠ è½½åˆ°å†…å­˜åï¼ŒåŠ è½½å™¨ä¼šå°†å‡½æ•°çš„çœŸå®å†…å­˜åœ°å€å¡«å……åˆ°æ­¤è¡¨ä¸­&#125; IMAGE_IMPORT_DESCRIPTOR;\n\næˆ‘ä»¬çŸ¥é“ DLL çš„å¯¼å‡ºå‡½æ•°åˆ†ä¸ºæŒ‰åç§°å¯¼å‡ºå’ŒæŒ‰åºå·å¯¼å‡ºï¼ŒåŒæ ·ä» DLL ä¸­å¯¼å…¥å‡½æ•°ä¹Ÿå¯¹åº”è¿™ä¸¤ç§æƒ…å†µã€‚\nIMAGE_IMPORT_DESCRIPTOR ç»“æ„ä¸­çš„ OriginalFirstThunk å­—æ®µæ‰€æŒ‡å‘çš„æ•°ç»„ç”¨äºå­˜å‚¨å¯¼å…¥å‡½æ•°çš„åç§°æˆ–åºå·ï¼Œæˆ‘ä»¬å°†è¯¥æ•°ç»„ç§°ä¸ºå¯¼å…¥åç§°è¡¨ï¼ˆINTï¼‰ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸º IMAGE_THUNK_DATA ç±»å‹ï¼š\ntypedef struct _IMAGE_THUNK_DATA32 &#123;    union &#123;        DWORD ForwarderString;      // PBYTE        DWORD Function;             // PDWORD        DWORD Ordinal;        DWORD AddressOfData;        // PIMAGE_IMPORT_BY_NAME    &#125; u1;&#125; IMAGE_THUNK_DATA32;\n\nè€Œ IMAGE_IMPORT_DESCRIPTOR ç»“æ„ä¸­çš„ FirstThunk å­—æ®µæ‰€æ•°ç»„ç”¨äºå­˜å‚¨å‡½æ•°å¯¼å…¥åçš„çœŸå®å†…å­˜åœ°å€ï¼Œæˆ‘ä»¬å°†è¯¥æ•°ç»„ç§°ä¸ºå¯¼å…¥åœ°å€è¡¨ï¼ˆIATï¼‰ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯ IMAGE_THUNK_DATA ç±»å‹ã€‚\nä¸¤ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹éƒ½æ˜¯ IMAGE_THUNK_DATA ç±»å‹ï¼Œä½†åœ¨ INT è¡¨ä¸­ä¸»è¦ä½¿ç”¨ AddressOfData å’Œ Ordinal å­—æ®µï¼Œå…¶ä¸­ AddressOfData å­—æ®µå­˜å‚¨å‡½æ•°åç§°çš„ RAVï¼ŒOrdinal å­—æ®µç”¨äºåˆ¤æ–­å½“å‰å‡½æ•°æ˜¯æŒ‰åç§°è¿˜æ˜¯æŒ‰åºå·å¯¼å…¥ï¼ˆ1 ä¸ºå‡½æ•°åï¼Œå¦åˆ™ä¸ºåºå·ï¼‰ï¼Œè€Œåœ¨ IAT è¡¨ä¸­åˆ™ä¸»è¦ä½¿ç”¨ Function å­—æ®µï¼Œå…¶ä¸­å­˜å‚¨çš„æ˜¯å‡½æ•°çœŸå®åœ°å€ã€‚\nä¸Šé¢å‡ºç°çš„ 3 ä¸ªæ•°ç»„ï¼ˆIMAGE_IMPORT_DESCRIPTOR æ•°ç»„ã€INT æ•°ç»„ã€IAT æ•°ç»„ï¼‰éƒ½æ²¡æœ‰æä¾›ä¸“é—¨çš„å­—æ®µæ¥è·å–æ•°ç»„å…ƒç´ çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆåœ¨éå†æ•°ç»„æ—¶ï¼Œå¦‚ä½•åˆ¤æ–­æœ€åä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿ\né€šè¿‡æŒ‡é’ˆé€’å¢çš„æ–¹å¼æ¥ä¾æ¬¡éå†æ¯ä¸ªå…ƒç´ ï¼Œä½†å…ƒç´ ä¸­çš„æ‰€æœ‰å­—æ®µéƒ½ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºè¯¥å…ƒç´ ä¸ºæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚\nè¯´äº†è¿™ä¹ˆå¤šï¼Œè¯»è€…å¯èƒ½æœ‰äº›æ··ä¹±äº†ï¼Œæˆ‘ç”»äº†ä¸€ä¸ªå›¾å¯èƒ½ä¼šå¯¹ç†è§£æ•´ä¸ªæµç¨‹æœ‰æ‰€å¸®åŠ©ã€‚\n\nåœ¨æ‰¾åˆ°æŒ‡å®šæ¨¡å—çš„æŒ‡å®šå‡½æ•°ä¹‹åï¼Œå°†u1.Functionæ‰€æŒ‡å‘çš„å¯¼å…¥å‡½æ•°åœ°å€ä¿®æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±å‡½æ•°çš„åœ°å€ï¼Œå°±å¯ä»¥å®ç° Hook äº†ã€‚å½“ç„¶åˆ«å¿˜äº†ä¿å­˜åŸå§‹çš„å‡½æ•°åœ°å€ï¼Œä»¥ä¾¿åé¢è¿›è¡Œ Unhook æˆ–è°ƒç”¨ã€‚\nä¸‹é¢æ˜¯ 32 ä½ç¨‹åºä½¿ç”¨ IAT Hook user32.dll::MessageBoxW çš„å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ˆ64 ä½ç¨‹åºå°†ä»£ç ä¸­çš„ç»“æ„ä½“ä¿®æ”¹ä¸ºå¯¹åº”çš„çš„ 64 ä½ç»“æ„ä½“å³å¯ï¼‰ã€‚\nPFN_MessageBoxW originalMessageBoxW = NULL;bool InitIATHook86() &#123;    // åŸºåœ°å€    uint8_t* pModule = (uint8_t*)GetModuleHandle(NULL);    // DOSå¤´    PIMAGE_DOS_HEADER pDosHeader = (PIMAGE_DOS_HEADER)pModule;    // NTå¤´    PIMAGE_NT_HEADERS32 pNTHeaders = (PIMAGE_NT_HEADERS32)(pModule + pDosHeader-&gt;e_lfanew);    // å¯¼å…¥è¡¨æ•°æ®ç›®å½•é¡¹    const IMAGE_DATA_DIRECTORY importDir = pNTHeaders-&gt;OptionalHeader.DataDirectory[1];    bool result = false;    PIMAGE_IMPORT_DESCRIPTOR pImportDesc = (PIMAGE_IMPORT_DESCRIPTOR)(pModule + importDir.VirtualAddress);    do &#123;        if (pImportDesc-&gt;Characteristics == 0)  break; // æœ€åä¸€ä¸ª        // å¯¼å…¥çš„æ¨¡å—å        const std::string dllName = ReadStringUntilZero((const char*)(pModule + pImportDesc-&gt;Name));        if (StrToLower(dllName) != &quot;user32.dll&quot;) &#123;            pImportDesc += 1;            continue;        &#125;        // å¯¼å…¥æ¨¡å—ä¸­çš„å‡½æ•°åç§°        PIMAGE_THUNK_DATA32 pINT_Thunk = (PIMAGE_THUNK_DATA32)(pModule + pImportDesc-&gt;OriginalFirstThunk);  // OriginalFirstThunk = INT        PIMAGE_THUNK_DATA32 pIAT_Thunk = (PIMAGE_THUNK_DATA32)(pModule + pImportDesc-&gt;FirstThunk);          // FirstThunk = IAT        do &#123;            if (pINT_Thunk-&gt;u1.Ordinal == 0)  // æœ€åä¸€ä¸ª                break;            if (!(pINT_Thunk-&gt;u1.Ordinal &amp; IMAGE_ORDINAL_FLAG32)) &#123;  //é«˜ä½ä¸ä¸º1æ—¶ï¼Œä½¿ç”¨åç§°å¯¼å…¥                const PIMAGE_IMPORT_BY_NAME pImportByName = (PIMAGE_IMPORT_BY_NAME)(pModule + pINT_Thunk-&gt;u1.AddressOfData);                const std::string funName = ReadStringUntilZero(pImportByName-&gt;Name);                if (funName == &quot;MessageBoxW&quot;) &#123;                    originalMessageBoxW = (PFN_MessageBoxW)pIAT_Thunk-&gt;u1.Function;                    DWORD oldProtect = 0;                    if (VirtualProtect(&amp;pIAT_Thunk-&gt;u1.Function, sizeof(DWORD), PAGE_READWRITE, &amp;oldProtect)) &#123;                        pIAT_Thunk-&gt;u1.Function = (DWORD)MyMessageBoxW;                        VirtualProtect(&amp;pIAT_Thunk-&gt;u1.Function, sizeof(DWORD), oldProtect, &amp;oldProtect);                        result = true;                    &#125;                &#125;            &#125;            pINT_Thunk += 1;            pIAT_Thunk += 1;        &#125; while (true);        pImportDesc += 1;    &#125; while (true);    return result;&#125;\n\nEAT HookEAT æ˜¯å¯¼å…¥åœ°å€è¡¨ï¼ˆExport Address Tableï¼‰çš„ç®€å†™ï¼Œè¯¥è¡¨è®°å½•äº† DLL å¯¼å‡ºäº†å“ªäº›å‡½æ•°ã€‚ä¸ä¸Šé¢ä»‹ç»çš„ IAT Hook ä¸åŒï¼ŒIAT Hook ä¿®æ”¹çš„æ˜¯ç¨‹åºè‡ªèº«çš„å¯¼å…¥è¡¨ï¼Œè€Œ EAT Hook ä¿®æ”¹çš„æ˜¯ DLL çš„å¯¼å‡ºè¡¨ã€‚\næŸ¥æ‰¾ EAT çš„æ­¥éª¤ä¸ä¸Šé¢çš„æŸ¥æ‰¾ IAT çš„æ­¥éª¤ç±»ä¼¼ã€‚å…ˆæ‰¾åˆ°å¯¼å‡ºè¡¨æ•°æ®ç›®å½•é¡¹ï¼ˆä½äº Optional-&gt;DataDirectorys æ•°ç»„çš„ç¬¬ 0 é¡¹ï¼‰ï¼Œç„¶åå®šä½å¹¶è§£æ IMAGE_EXPORT_DIRECTORY æ•°ç»„ã€‚\nIMAGE_EXPORT_DIRECTORY å®šä¹‰å¦‚ä¸‹ï¼š\ntypedef struct _IMAGE_EXPORT_DIRECTORY&#123;    DWORD   Characteristics;       // ä¿ç•™,æ’ä¸º0x00000000    DWORD   TimeDateStamp;         // æ–‡ä»¶çš„äº§ç”Ÿæ—¶é—´æˆ³    WORD    MajorVersion;          // ä¸»ç‰ˆæœ¬å·    WORD    MinorVersion;          // æ¬¡ç‰ˆæœ¬å·    DWORD   Name;                  // æŒ‡å‘æ–‡ä»¶åçš„RVA    DWORD   Base;                  // å¯¼å‡ºå‡½æ•°çš„èµ·å§‹åºå·    DWORD   NumberOfFunctions;     // å¯¼å‡ºå‡½æ•°æ€»æ•°    DWORD   NumberOfNames;         // ä»¥åç§°å¯¼å‡ºå‡½æ•°çš„æ€»æ•°    DWORD   AddressOfFunctions;    // å¯¼å‡ºå‡½æ•°åœ°å€è¡¨çš„RVAï¼Œä¹Ÿå°±æ˜¯EAT    DWORD   AddressOfNames;        // å‡½æ•°åç§°åœ°å€è¡¨çš„RVAï¼Œè¿™ä¸ªè¡¨é‡Œé¢çš„ç´¢å¼•éœ€è¦é€šè¿‡AddressOfNameOrdinalsè·å–    DWORD   AddressOfNameOrdinals; // å‡½æ•°ååºå·è¡¨çš„RVAï¼Œå°†åºå·è¡¨é‡Œé¢çš„å…ƒç´ ä½œä¸ºç´¢å¼•ä¼ å…¥AddressOfNamesï¼Œè·å–å‡½æ•°åœ°å€&#125; IMAGE_EXPORT_DIRECTORY, *PIMAGE_EXPORT_DIRECTORY;\n\nIMAGE_EXPORT_DIRECTORY ä¸­å„ä¸ªå­—æ®µçš„ä½œç”¨åŠå…³ç³»å¦‚ä¸‹ï¼š\nå…¶ä¸­ï¼ŒNumberOfNames å­—æ®µè®°å½•äº†å½“å‰ DLL æŒ‰åç§°å¯¼å‡ºçš„å‡½æ•°çš„æ€»æ•°ï¼›\nAddressOfNames å­—æ®µæ‰€æŒ‡å‘çš„è¡¨ä¸­å­˜å‚¨äº†å¯¼å‡ºå‡½æ•°çš„åç§°ï¼ˆæŒ‰åºå·å¯¼å‡ºçš„å‡½æ•°ä¸åœ¨è¯¥è¡¨ï¼‰ï¼Œè€Œ AddressOfFunctions å­—æ®µæ‰€æŒ‡å‘çš„è¡¨ä¸­å­˜å‚¨äº†æ¯ä¸ªå‡½æ•°çš„åœ°å€ï¼ˆåŒ…å«æŒ‰åç§°å¯¼å‡ºå’ŒæŒ‰åºå·å¯¼å‡ºçš„å‡½æ•°ï¼‰ã€‚å› æ­¤ AddressOfNames å’Œ AddressOfFunctions è¡¨ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼ŒAddressOfFunctions è¡¨ä¸­çš„å…ƒç´ å¯èƒ½æ¯” AddressOfNames è¡¨å¤šã€‚å®ƒä»¬ä¹‹é—´é€šè¿‡ AddressOfNameOrdinals è¡¨å»ºç«‹è¿æ¥ï¼ŒAddressOfNames ä¸ AddressOfNameOrdinals è¡¨æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œé€šè¿‡ AddressOfNames è¡¨çš„ç´¢å¼•å¯ä»¥åœ¨ AddressOfNameOrdinals è¡¨ä¸­æŸ¥è¯¢åˆ°å‡½æ•°åœ¨ AddressOfFunctions è¡¨ä¸­çš„ç´¢å¼•ã€‚\néœ€è¦æ³¨æ„ï¼š\n\nAddressOfNameOrdinals æ‰€æŒ‡å‘çš„æ˜¯ WORD æ•°ç»„ï¼Œè€Œä¸æ˜¯ DWORD æ•°ç»„ã€‚\nIMAGE_EXPORT_DIRECTORY ä¸­å­˜å‚¨çš„ RAV æ˜¯ç›¸å¯¹äºæ¨¡å—åŸºåœ°å€çš„åç§»ï¼Œè€Œä¸” AddressOfFunctions ä¸­å­˜å‚¨çš„ä¹Ÿæ˜¯ RAVï¼ˆIAT ä¸­å­˜å‚¨çš„å´æ˜¯ç»å¯¹åœ°å€ï¼‰ã€‚\n\nä¸‹é¢æ˜¯ 32 ä½ç¨‹åºä½¿ç”¨ EAT Hook user32.dll::MessageBoxW çš„å®Œæ•´ç¤ºä¾‹ä»£ç ï¼ˆ64 ä½ç¨‹åºå°†ä»£ç ä¸­çš„ç»“æ„ä½“ä¿®æ”¹ä¸ºå¯¹åº”çš„çš„ 64 ä½ç»“æ„ä½“å³å¯ï¼‰ã€‚\nPFN_MessageBoxW originalMessageBoxW = NULL;bool InitEATHook86() &#123;    uint8_t* pBase = (uint8_t*)LoadLibrary(TEXT(&quot;User32.dll&quot;));    // DOSå¤´    PIMAGE_DOS_HEADER pDosHeader = (PIMAGE_DOS_HEADER)pBase;    // NTå¤´    PIMAGE_NT_HEADERS32 pNTHeaders = (PIMAGE_NT_HEADERS32)(pBase + pDosHeader-&gt;e_lfanew);    const PIMAGE_EXPORT_DIRECTORY pExportDir = (PIMAGE_EXPORT_DIRECTORY)(pBase + exportDir.VirtualAddress);    const WORD* pNameIndexTable = (WORD*)(pBase + pExportDir-&gt;AddressOfNameOrdinals);  // 2ä¸ªå­—èŠ‚    const DWORD* pNameAddressTable = (DWORD*)(pBase + pExportDir-&gt;AddressOfNames);    DWORD* pFuncAddressTable = (DWORD*)(pBase + pExportDir-&gt;AddressOfFunctions); // EAT    bool result = false;    for (DWORD j = 0; j &lt; pExportDir-&gt;NumberOfNames; j++) &#123;        const WORD index = pNameIndexTable[j];  // 2ä¸ªå­—èŠ‚        const char* pName = (const char*)(pBase + pNameAddressTable[j]);        const std::string funName = ReadStringUntilZero(pName);        if (funName == &quot;MessageBoxW&quot;) &#123;            originalMessageBoxW = (PFN_MessageBoxW)(pBase + pFuncAddressTable[index]);            DWORD oldProtect;            if (VirtualProtect((LPVOID)&amp;pFuncAddressTable[index], sizeof(DWORD), PAGE_READWRITE, &amp;oldProtect)) &#123;                pFuncAddressTable[index] = (DWORD)MyMessageBoxW - (DWORD)pBase;  // æ­¤å¤„å­˜å‚¨çš„æ˜¯RAV                VirtualProtect((LPVOID)&amp;pFuncAddressTable[index], sizeof(DWORD), oldProtect, &amp;oldProtect);                result = true;                break;            &#125;        &#125;    &#125;    return result;&#125;\n\nä¸€äº›è¿‡æ—¶çš„å†…æ ¸ Hook æŠ€æœ¯Windows è‡ª Vista ç‰ˆæœ¬ä»¥æ¥ï¼Œå°±åœ¨ x64 ç³»ç»Ÿä¸­æä¾›äº†ä¸€ç§å†…ç½®çš„å®‰å…¨åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ç§°ä¸º PatchGuardï¼ˆPGï¼‰ï¼Œç”¨äºä¿æŠ¤å†…æ ¸çš„å…³é”®åŒºåŸŸå…é­ä¿®æ”¹ï¼Œå¦‚æœè§¦å‘è¯¥æœºåˆ¶å°±ä¼šå¯¼è‡´ç³»ç»Ÿè“å±ï¼ˆBSODï¼‰ã€‚\nPatchGuard é€šè¿‡å†…æ ¸æ¨¡å¼çº¿ç¨‹å®šæ—¶æ£€æµ‹ä»¥ä¸‹å…³é”®åŒºåŸŸçš„å®Œæ•´æ€§ï¼š\n\nç³»ç»ŸæœåŠ¡æè¿°ç¬¦è¡¨ï¼ˆSSDTï¼‰ï¼šç›‘æ§å‡½æ•°å…¥å£åœ°å€æ˜¯å¦è¢«ç¯¡æ”¹ã€‚\nå…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰ï¼šæ ¡éªŒä¸­æ–­å¤„ç†ç¨‹åºçš„åˆæ³•æ€§ã€‚\nä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆIDTï¼‰ï¼šä¿æŠ¤å†…å­˜æ®µæè¿°ç¬¦ç»“æ„ã€‚\nç³»ç»Ÿæ˜ åƒï¼ˆntoskrnl.exeã€ndis.sysã€hal.dllï¼‰ã€‚\nå¤„ç†å™¨ MSRï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰\nå†…æ ¸æ¨¡å—åˆ—è¡¨ï¼šéªŒè¯åŠ è½½é©±åŠ¨æ¨¡å—æ˜¯å¦æœ‰æ•ˆçš„æ•°å­—ç­¾åã€‚\n\nå› æ­¤ï¼Œåœ¨ x64 ç³»ç»Ÿä¸Šï¼Œé’ˆå¯¹ä¸Šé¢åŒºåŸŸçš„ Hook éƒ½å·²ä¸å†ç¨³å®šæœ‰æ•ˆã€‚\nVT HookTODO\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["Hook","æ³¨å…¥"]},{"title":"ä»æ±‡ç¼–çš„è§’åº¦åˆ†æå‡½æ•°è°ƒç”¨è¿‡ç¨‹","url":"/post/4168021185.html","content":"æœ¬æ–‡ä»æ±‡ç¼–çš„è§†è§’åˆ†æäº†å‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼ŒæŒæ¡è¯¥çŸ¥è¯†å¯¹ä½¿ç”¨ OllyDbg ç­‰åŠ¨æ€è°ƒè¯•å·¥å…·ä¼šå¤§æœ‰è£¨ç›Šã€‚\n\n\nå‡½æ•°å‚æ•°ä¼ é€’å½¢å¼å‡½æ•°çš„å‚æ•°ä¼ é€’æœ‰ 2 ç§æ–¹å¼ï¼š\n\nå †æ ˆæ–¹å¼\nå¯„å­˜å™¨æ–¹å¼\n\nå¦‚æœæ˜¯å †æ ˆæ–¹å¼ä¼ é€’çš„ï¼Œå°±éœ€è¦å®šä¹‰å‡½æ•°å‚æ•°åœ¨å †æ ˆä¸­çš„ä¼ é€’é¡ºåºï¼Œå¹¶çº¦å®šå‡½æ•°è¢«è°ƒç”¨ä¹‹åï¼Œæ˜¯ç”±å‡½æ•°æ¥å¹³è¡¡å †æ ˆï¼Œè¿˜æ˜¯ç”±è°ƒç”¨è€…æ¥å¹³è¡¡å †æ ˆï¼›\nå¦‚æœæ˜¯å¯„å­˜å™¨æ–¹å¼ä¼ é€’çš„ï¼Œå°±éœ€è¦ç¡®å®šå‚æ•°å­˜æ”¾åœ¨å“ªä¸ªå¯„å­˜å™¨ä¸­ã€‚\nä¸¤ç§æ–¹å¼éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œè€Œä¸”ä¸ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æœ‰å…³ç³»ã€‚\næˆ‘ä»¬åœ¨å¼€å‘ä¸­ç»å¸¸é‡åˆ°è°ƒç”¨çº¦å®šç±»å‹ï¼Œå¦‚__cdeclã€stdcallã€PASCALã€fastcallï¼Œè¿™äº›è°ƒç”¨çº¦å®šç±»å‹å°±ç”¨æ¥æŒ‡å®šå‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼çš„ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸Šé¢å‡ ç§çº¦å®šç±»å‹ï¼Œé™¤äº†fastcallæ˜¯ä½¿ç”¨å¯„å­˜å™¨æ–¹å¼ä¼ é€’å‚æ•°å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯ä½¿ç”¨å †æ ˆä¼ é€’å‚æ•°çš„ã€‚\n\nVisual Studio ä¸­çš„ C++å·¥ç¨‹ï¼Œå¯ä»¥C++ â€“&gt; é«˜çº§ â€“&gt; è°ƒç”¨çº¦å®šä¸­è¿›è¡Œè°ƒç”¨çº¦å®šçš„è®¾ç½®ï¼š\n\n\nä½¿ç”¨å †æ ˆæ–¹å¼ä¼ é€’å‡½æ•°å‚æ•°å †æ ˆæ˜¯ä¸€ç§â€œåè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„ï¼ŒESPå¯„å­˜å™¨å§‹ç»ˆæŒ‡å‘æ ˆé¡¶ã€‚\n\nESPï¼šæ ˆæŒ‡é’ˆå¯„å­˜å™¨(Extended Stack Pointer)ï¼Œæ°¸è¿œæŒ‡å‘æ ˆé¡¶ã€‚\n\næ ˆä¸­æ•°æ®çš„åœ°å€ä»åº•éƒ¨åˆ°é¡¶éƒ¨ä¾æ¬¡å‡å°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ ˆåº•å¯¹åº”é«˜åœ°å€ï¼Œæ ˆé¡¶å¯¹åº”ä½åœ°å€ã€‚\nè°ƒç”¨å‡½æ•°æ—¶ï¼Œè°ƒç”¨è€…ä¾æ¬¡æŠŠå‚æ•°å‹æ ˆï¼Œç„¶åè°ƒç”¨å‡½æ•°ï¼Œå‡½æ•°è¢«è°ƒç”¨ä¹‹åï¼Œåœ¨å †æ ˆä¸­å–å¾—å‚æ•°æ•°æ®ã€‚å‡½æ•°è°ƒç”¨ç»“æŸä»¥åï¼Œå †æ ˆéœ€è¦æ¢å¤åˆ°å‡½æ•°è°ƒç”¨ä¹‹å‰çš„æ ·å­ï¼Œè€Œåˆ°åº•æ˜¯ç”±è°ƒç”¨è€…æ¥æ¢å¤è¿˜æ˜¯å‡½æ•°è‡ªèº«æ¥æ¢å¤ï¼Œæ ¹æ®ä¸åŒçš„è°ƒç”¨çº¦å®šç±»å‹é‡‡ç”¨çš„æ–¹å¼ä¸åŒã€‚\n\n\n\nçº¦å®šç±»å‹\n__cdecl\nstdcall\nPASCAL\nfastcall\n\n\n\nå‚æ•°ä¼ é€’é¡ºåº\nä»å³åˆ°å·¦\nä»å³åˆ°å·¦\nä»å·¦åˆ°å³\nä½¿ç”¨å¯„å­˜å™¨\n\n\nå †æ ˆå¹³è¡¡è€…\nè°ƒç”¨è€…\nå‡½æ•°è‡ªèº«\nå‡½æ•°è‡ªèº«\nå‡½æ•°è‡ªèº«\n\n\n\n__cdcelæ˜¯ C&#x2F;C++&#x2F;MFC ç¨‹åºé»˜è®¤çš„è°ƒç”¨çº¦å®šã€‚\n\nstdcallæ˜¯ç»å¤§å¤šæ•° Win32 API å‡½æ•°çš„çº¦å®šæ–¹å¼ï¼Œä¹Ÿæœ‰å°‘éƒ¨åˆ†ä½¿ç”¨__cdcelçº¦å®šæ–¹å¼ï¼ˆå¦‚ wsprintf ç­‰ï¼‰ã€‚\n\n\nåœ¨ Windows C&#x2F;C++å¼€å‘ä¸­å¸¸ç”¨çš„å°±æ˜¯__cdeclå’Œstdcallè¿™ä¸¤ç§è°ƒç”¨çº¦å®šã€‚\nä¸¾ä¾‹è¯´æ˜ï¼ŒæŒ‰ç…§ä¸åŒçš„â€œè°ƒç”¨çº¦å®šâ€è°ƒç”¨å‡½æ•°int add(int a, int b)ã€‚ä»è°ƒç”¨è€…çš„è§†è§’æ¥çœ‹ï¼Œå…¶æ±‡ç¼–ä»£ç åˆ†åˆ«è¡¨ç¤ºå¦‚ä¸‹ï¼š\n__cdecl\npush b     ;å‚æ•°æŒ‰ä»å³åˆ°å·¦ä¼ é€’push acall addadd esp, 8 ;è°ƒç”¨è€…åœ¨å‡½æ•°å¤–éƒ¨å¹³è¡¡å †æ ˆ\n\nstdcall\npush b     ;å‚æ•°æŒ‰ä»å³åˆ°å·¦ä¼ é€’push acall add   ;å‡½æ•°è‡ªå·±å†…éƒ¨å¹³è¡¡å †æ ˆï¼Œè°ƒç”¨è€…ä¸éœ€è¦å¹³è¡¡å †æ ˆ\n\nåœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå‚æ•°å…¥æ ˆçš„è¿‡ç¨‹å¦‚å›¾ï¼š\n\nä¸Šå›¾ä¸­ï¼ŒEBPå’Œå‡½æ•°è¿”å›åœ°å€retéƒ½æ˜¯ 32 ä½åœ°å€ï¼Œå †æ ˆä¸­å¤‡ä»½äº†è€çš„EBPå€¼ï¼Œåœ¨å‡½æ•°è°ƒç”¨å®Œä¹‹åä¼šå°†EBPæ¢å¤ä¸ºå¤‡ä»½åœ¨å †æ ˆä¸­çš„è€EBPå€¼ï¼Œæ‰€ä»¥ä»è°ƒç”¨è€…è§’åº¦æ¥çœ‹ï¼Œåœ¨å‡½æ•°çš„è°ƒç”¨å¼€å§‹å‰å’Œç»“æŸåï¼ŒEBPæ˜¯ä¸ä¼šå˜åŒ–çš„ã€‚\né€šå¸¸å‡½æ•°ä¸­çš„å‰2æ¡æŒ‡ä»¤éƒ½æ˜¯ï¼š\npush        ebp mov         ebp,esp\n\né€šå¸¸ä½¿ç”¨æ–°çš„EBPè·å–å‡½æ•°å„ä¸ªå‚æ•°çš„å€¼ï¼š\nå‚æ•°a = EBP + 0x8å‚æ•°b = EBP + 0xC\n\nå½“ç„¶ä½¿ç”¨ESPè·å–å‚æ•°å€¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†ä½¿ç”¨EBPä¼šæ›´åŠ æ–¹ä¾¿ï¼Œå› ä¸ºESPä¸€ç›´æŒ‡å‘æ ˆé¡¶ï¼Œå› æ­¤ä¼šéšç€å±€éƒ¨å˜é‡çš„å‹æ ˆè€Œå˜åŒ–ï¼Œè€ŒESPæ˜¯ä¸ä¼šéšç€å…¥æ ˆ&#x2F;å‡ºæ ˆè€Œå˜åŒ–çš„ã€‚\nè°ƒç”¨è¿‡ç¨‹åˆ†æ#include &lt;stdio.h&gt;int add(int a, int b) &#123;\tint c = 0;\tc = a + b;\treturn c;&#125;int main()&#123;    int r = add(1, 2);    return 0;&#125;\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\næˆ‘ä»¬ä½¿ç”¨Visual Studio 2017ç¼–è¯‘ä¸Šé¢ä»£ç ï¼Œå¹¶åœ¨åœ¨å·¥ç¨‹é…ç½®ä¸­å°†å‡½æ•°è°ƒç”¨çº¦å®šè®¾ç½®ä¸º__cdeclã€‚\nåœ¨ç¨‹åºè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åœ¨Visual Studioçš„â€œåæ±‡ç¼–çª—å£â€ä¸­çœ‹åˆ° C++ä»£ç å¯¹åº”çš„æ±‡ç¼–ä»£ç ï¼Œä»¥åŠå¯„å­˜å™¨çª—å£ä¸­çœ‹åˆ°å„ä¸ªå¯„å­˜å™¨çš„å€¼ã€‚\nmainå‡½æ•°çš„åæ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š\nint main()&#123;00DD1720  push        ebp          // å‚è§addå‡½æ•°ä¸­å…³äºè¿™ä¸€éƒ¨åˆ†çš„è§£æ00DD1721  mov         ebp,esp00DD1723  sub         esp,0CCh00DD1729  push        ebx00DD172A  push        esi00DD172B  push        edi00DD172C  lea         edi,[ebp-0CCh]00DD1732  mov         ecx,33h00DD1737  mov         eax,0CCCCCCCCh00DD173C  rep stos    dword ptr es:[edi]\tint r = add(1, 2);00DD173E  push        2                 // å‚æ•°bå…¥æ ˆ00DD1740  push        1                 // å‚æ•°aå…¥æ ˆ// è°ƒç”¨addå‡½æ•°ã€‚// CALLæŒ‡ä»¤ç›¸å½“äºæ‰§è¡Œä¸€æ¡PUSHæŒ‡ä»¤åŠ ä¸€æ¡JMPæŒ‡ä»¤ï¼ŒPUSHæŒ‡ä»¤ç”¨äºå‹å…¥è¯¥æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€åˆ°æ ˆä¸­ï¼Œç”¨äºæ‰§è¡Œå®Œå­å‡½æ•°ä¹‹åè¿”å›æ¥ã€‚// JMPæŒ‡ä»¤ç”¨äºè·³è½¬åˆ°å­å‡½æ•°æ‰€åœ¨ä½ç½®å¼€å§‹æ‰§è¡Œå­å‡½æ•°ã€‚00DD1742  call        add (0DD1276h)    00DD1747  add         esp,8            // å› ä¸ºæ˜¯__cdeclï¼Œæ‰€ä»¥ç”±è°ƒç”¨è€…æ¥å¹³è¡¡å †æ ˆ.00DD174A  mov         dword ptr [r],eax    return 0;00DD174D  xor         eax,eax&#125;\n\næ‰§è¡Œè¿›å…¥addå‡½æ•°åï¼Œaddå‡½æ•°å†…çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š\nint add(int a, int b) &#123;00DD16D0  push        ebp      // ebpå…¥æ ˆï¼Œç›¸å½“äºå¤‡ä»½ebpçš„å€¼00DD16D1  mov         ebp,esp  // å°†espèµ‹å€¼ç»™ebpï¼Œåœ¨è¯¥å‡½æ•°ä¹‹åçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šå†æ”¹å˜ebpçš„å€¼ã€‚00DD16D3  sub         esp,0CCh // åœ¨æ ˆä¸Šåˆ†é…0xCCå¤§å°çš„å±€éƒ¨å˜é‡å­˜å‚¨åŒºåŸŸ00DD16D9  push        ebx      // æš‚å­˜ebx00DD16DA  push        esi      // æš‚å­˜esi00DD16DB  push        edi      // æš‚å­˜edi00DD16DC  lea         edi,[ebp-0CCh]  //ä¸‹é¢4è¡Œä»£ç ï¼ˆå«è¯¥æ¡ï¼‰å®ç°å°†0xCCå¤§å°çš„å±€éƒ¨å˜é‡å­˜å‚¨åŒºåŸŸå…¨éƒ¨èµ‹å€¼ä¸º0xCC00DD16E2  mov         ecx,33h         // ecxå­˜å‚¨å¾ªç¯æ¬¡æ•°ï¼Œç»“åˆrepæŒ‡ä»¤ä½¿ç”¨ã€‚ä¸ºä»€ä¹ˆæ˜¯0x33æ¬¡äº†ï¼Ÿå› ä¸ºæ˜¯æŒ‰ç…§4ä¸ªå­—èŠ‚èµ‹å€¼çš„ï¼Œ0x33 * 0x4 = 0xCC00DD16E7  mov         eax,0CCCCCCCCh00DD16EC  rep stos    dword ptr es:[edi]  // å¾ªç¯èµ‹å€¼\tint c = 0;00DD16EE  mov         dword ptr [c],0     // å°†å±€éƒ¨å˜é‡cèµ‹å€¼ä¸º0\tc = a + b;00DD16F5  mov         eax,dword ptr [a]00DD16F8  add         eax,dword ptr [b]00DD16FB  mov         dword ptr [c],eax\treturn c;00DD16FE  mov         eax,dword ptr [c]  // å°†ç»“æœå­˜å‚¨åˆ°eaxä¸­ã€‚åœ¨å‡½æ•°è°ƒç”¨ä¸­è¿”å›ç»“æœéƒ½æ˜¯å­˜å‚¨åœ¨eaxä¸­çš„ã€‚&#125;01191701  pop         edi  // å°†ediçš„å€¼è¿˜åŸåˆ°å‡½æ•°è°ƒç”¨å‰01191702  pop         esi  // å°†esiçš„å€¼è¿˜åŸåˆ°å‡½æ•°è°ƒç”¨å‰01191703  pop         ebx  // å°†ebxçš„å€¼è¿˜åŸåˆ°å‡½æ•°è°ƒç”¨å‰01191704  mov         esp,ebp  // ç§»åŠ¨æ ˆé¡¶åˆ°ebpä½ç½®ï¼Œä»è€Œè·³è¿‡äº†å±€éƒ¨å˜é‡å­˜å‚¨åŒºåŸŸ01191706  pop         ebp      // å°†ebpçš„å€¼è¿˜åŸåˆ°å‡½æ•°è°ƒç”¨å‰01191707  ret                  // retæŒ‡ä»¤ç­‰åŒäºï¼šå¼¹å‡ºæ­¤æ—¶æ ˆé¡¶çš„å€¼ç»™eipï¼Œ                               // å› ä¸ºæ­¤æ—¶æ ˆé¡¶å­˜å‚¨çš„åˆšå¥½æ˜¯å‡½æ•°è¿”å›åœ°å€ï¼Œæ‰€ä»¥ç›¸å½“äºå°†è¿”å›åœ°å€èµ‹å€¼ç»™eipï¼Œä»è€Œå®ç°äº†è¿”å›åˆ°å‡½æ•°è°ƒç”¨çš„åœ°æ–¹ã€‚\n\nåœ¨ä¸Šé¢ä»£ç çš„æ³¨é‡Šä¸­å·²ç»åŒ…å«äº†è¯¦ç»†çš„è§£é‡Šï¼Œç‰¹åˆ«å€¼å¾—æ³¨æ„çš„å‡ ä¸ªåœ°æ–¹æ˜¯ï¼š\n\nrep stos    dword ptr es:[edi]ç»“åˆedi, ecxæ¥åˆå§‹åŒ–å±€éƒ¨å­˜å‚¨åŒºåŸŸã€‚\nå‡½æ•°callæŒ‡ä»¤ä¹‹å‰çš„å‚æ•°å‹æ ˆé¡ºåºã€‚\nCALLæŒ‡ä»¤ç›¸å½“äºæ‰§è¡Œä¸€æ¡PUSHæŒ‡ä»¤åŠ ä¸€æ¡JMPæŒ‡ä»¤ï¼ŒPUSHæŒ‡ä»¤ç”¨äºå‹å…¥è¯¥æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€åˆ°æ ˆä¸­ï¼Œç”¨äºæ‰§è¡Œå®Œå­å‡½æ•°ä¹‹åè¿”å›æ¥ã€‚JMPæŒ‡ä»¤ç”¨äºè·³è½¬åˆ°å­å‡½æ•°æ‰€åœ¨ä½ç½®å¼€å§‹æ‰§è¡Œå­å‡½æ•°ã€‚\nå› ä¸ºæ˜¯__cdeclè°ƒç”¨çº¦å®šï¼Œå› æ­¤åœ¨å‡½æ•°è°ƒç”¨å®Œä¹‹åï¼Œè°ƒç”¨æ–¹éœ€è¦ä½¿ç”¨add esp,8æŒ‡ä»¤æ¥å¹³è¡¡å †æ ˆã€‚\nretæŒ‡ä»¤ç­‰åŒäºï¼šå¼¹å‡ºæ­¤æ—¶æ ˆé¡¶çš„å€¼ç»™ eipï¼Œå·§å¦™ä¹‹å¤„åœ¨äºæ­¤æ—¶æ ˆé¡¶å­˜å‚¨çš„åˆšå¥½æ˜¯å‡½æ•°è¿”å›åœ°å€ï¼Œå› æ­¤å¯ä»¥ç»§ç»­æ‰§è¡Œå‡½æ•°ä¸‹é¢çš„è¯­å¥ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•","æ±‡ç¼–"]},{"title":"ç¦ç”¨F12ä½œä¸ºè°ƒè¯•çƒ­é”®","url":"/post/4077884774.html","content":"åœ¨Windowsç³»ç»Ÿä¸­ï¼ŒF12æ°¸è¿œä¸ºè°ƒè¯•å™¨æ‰€é¢„ç•™ï¼Œä¸èƒ½è¢«ç”¨æ¥æ³¨å†Œä¸ºå¿«æ·é”®ï¼Œå¦‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨F12æ‰“å¼€æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·ã€‚å³ä¾¿å½“å‰æœªè°ƒè¯•åº”ç”¨ç¨‹åºï¼Œå¦‚æœå†…æ ¸æ¨¡å¼è°ƒè¯•å™¨æˆ–å®æ—¶è°ƒè¯•å™¨æœ‰é©»ç•™ï¼ŒF12ä¹Ÿä¼šè¢«é¢„ç•™ã€‚\nè¯¦è§ï¼šhttps://msdn.microsoft.com/en-us/library/windows/desktop/ms646309.aspx\nå¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨æ¥æŒ‡å®šå…¶ä»–çš„æŒ‰é”®ä½œä¸ºè°ƒè¯•å™¨é¢„ç•™å¿«æ·é”®ï¼š\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\AeDebug] UserDebuggerHotKey=dword:00000000\n\næ¯”å¦‚0x13 (Pauseé”®)ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•"]},{"title":"ç”±å­—ç¬¦ä¸²æ ¼å¼åŒ–å‡½æ•°å¼•èµ·çš„å´©æºƒ","url":"/post/432875265.html","content":"æœ¬æ–‡è®°å½•ä¸€ä¸ªç”±äºé”™è¯¯ä½¿ç”¨ StringCchVPrintf ç­‰æ ¼å¼åŒ–å‡½æ•°æ‰€å¯¼è‡´çš„å´©æºƒé—®é¢˜ã€‚\n\n\né—®é¢˜æè¿°æˆ‘ä»¬å¸¸ç”¨çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²å‡½æ•°æœ‰ï¼š\nHRESULT StringCchVPrintf(  _Out_ LPTSTR  pszDest,  _In_  size_t  cchDest,  _In_  LPCTSTR pszFormat,  _In_  va_list argList);\n\nint printf ( const char * format, ... );\n\nå¯¹äºå¦‚ä¸‹çš„è°ƒç”¨ï¼š\nchar buf[100] = &#123;0&#125;;StringCchVPrintf(buf, 100, &quot;select * from member where name like &#x27;%sjj%&#x27;;&quot;);\n\næ­¤æ—¶bufä¸­å­˜å‚¨çš„å¹¶ä¸æ˜¯æœŸæœ›çš„select * from member where name like &#39;%sjj%&#39;;å­—ç¬¦ä¸²ã€‚ä¸å‡ºæ„å¤–ï¼Œ%sjj%å¤„çš„%sä¼šå˜æˆä¹±ç ã€‚\nå› ä¸ºå‡½æ•°å°†%sjj%ä¸­çš„%så½“åšäº†å­—ç¬¦ä¸²æ ¼å¼åŒ–ä¸²äº†ï¼Œè€Œæˆ‘ä»¬åˆæ²¡æœ‰ç»™æœ€åä¸€ä¸ªå‚æ•°ï¼ˆå³å¯å˜å‚æ•°ï¼‰ä¼ å€¼ï¼Œæ ¹æ®å¯å˜å‚æ•°çš„åŸç†ï¼Œé»˜è®¤ä¼šæ ¹æ® format å‚æ•°çš„åœ°å€æ¥å–ä¸€ä¸ªåœ°å€è®©%sè¿›è¡Œè¾“å‡ºã€‚\nå…·ä½“è®¡ç®—æ–¹å¼å‚è€ƒva_startå®å®šä¹‰:&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n#define va_start _crt_va_start#define _crt_va_start(ap,v)  ( ap = (va_list)_ADDRESSOF(v) + _INTSIZEOF(v) )\n\nè¿™ä¸ªåœ°å€çš„å†…å®¹æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥å°±å¯èƒ½å‡ºç°ä¹±ç æˆ–å´©æºƒã€‚\nè§£å†³æ–¹æ¡ˆè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦ç¡®ä¿åœ¨è°ƒç”¨StringCchVPrintfã€vsprintfã€vswprintfã€_vstprintfã€printfç­‰å‡½æ•°æ—¶ï¼Œä¸€å®šä¸è¦å°†å›ºå®šå­—ç¬¦ä¸²ä¼ å…¥åˆ°pszFormatå‚æ•°ï¼Œå¦‚ï¼š\nStringCchVPrintf(szBuf, 512, &quot;æˆ‘æƒ³è¾“å‡ºå•çº¯çš„%sï¼Œæˆ‘æ˜¯é”™è¯¯çš„æ ¼å¼ç¤ºèŒƒ&quot;);  // é”™è¯¯çš„\n\nè¿™ä¸ªæ—¶å€™ï¼Œå•çº¯çš„%sä¸­çš„%så·²ç»ä¸åœ¨å•çº¯ã€‚\næ­£ç¡®çš„åšæ³•æ˜¯ï¼š\nStringCchVPrintf(szBuf, 512, &quot;%s&quot;, &quot;æˆ‘æƒ³è¾“å‡ºå•çº¯çš„%sï¼Œæˆ‘æ˜¯æ­£ç¡®çš„æ ¼å¼ç¤ºèŒƒ&quot;);\n\nåŒç†ï¼Œä¸‹é¢çš„è°ƒç”¨æ–¹å¼ä¹Ÿæ˜¯é”™è¯¯çš„ã€å±é™©çš„ï¼š\nstd::string strInfo = GetInfo();printf(strInfo.c_str());\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"],"tags":["è½¯ä»¶è°ƒè¯•"]},{"title":"ç”±HANDLEè¿”å›å€¼ä¸ç¡®å®šæ€§å¼•å‘çš„æ€è€ƒ","url":"/post/3906615635.html","content":"HANDLEç±»å‹è¿”å›å€¼çš„ä¸ç¡®å®šæ€§æŒ‡çš„æ˜¯Windows APIå‡½æ•°çš„è¿”å›å€¼ä¸ºHANDLEç±»å‹æ—¶ï¼Œæœ‰ä¸¤ç§è¡¨ç¤ºå¤±è´¥çš„æ–¹å¼ï¼š\n\nHANDLE &#x3D;&#x3D; NULLï¼Œå¦‚CreateEventç­‰\nHANDLE &#x3D;&#x3D; INVALID_HANDLE_VALUEï¼Œå¦‚CreateFileç­‰\n\nå…¶ä¸­ï¼ŒNULLçš„å€¼å§‹ç»ˆä¸º0ï¼Œè€ŒINVALID_HANDLE_VALUEçš„å€¼ä¸º-1ï¼Œå…¶åœ¨32ä½å’Œ64ä½ç¨‹åºä¸­åˆ†åˆ«ç­‰äº0xFFFFFFFFå’Œ0xFFFFFFFFFFFFFFFFã€‚\nå…·ä½“å“ªäº›å‡½æ•°å¤±è´¥æ—¶è¿”å›NULLï¼Œå“ªäº›è¿”å›INVALID_HANDLE_VALUEäº†ï¼Ÿè¿™ä¸ªéœ€è¦æŸ¥é˜…MSDNæ–‡æ¡£æ¥ç¡®å®šã€‚\n\n\nä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸¤ç§æƒ…å†µäº†ï¼Ÿæ ¹æ®Windowså¼ºå¤§çš„å…¼å®¹æ€§ï¼Œæˆ‘ä»¬ä¸èƒ½çŒœæµ‹å‡ºè¿™ä¹ˆåšæ˜¯ä¸ºäº†å‘å‰å…¼å®¹ï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„16ä½ç¨‹åºï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰æ”¹å˜ã€‚\n\nåœ¨16ä½ç¨‹åºä¸­æ— æ•ˆçš„HANDLEå€¼ä¸ºINVALID_HANDLE_VALUEï¼Œåœ¨16ä½ç¨‹åºä¸­-1ä¸º0xFFFFï¼Œè€Œåˆ°äº†32ä½ï¼ˆæˆ–64ä½ï¼‰æ—¶ä»£ï¼Œ-1åˆ™ä¸º0xFFFFFFFFï¼ˆæˆ–0xFFFFFFFFFFFFFFFFï¼‰ã€‚\n\næ‰€ä»¥æˆ‘ä»¬åœ¨åˆ¤æ–­HANDLEæ˜¯å¦åˆæ³•æ—¶ï¼Œè¦ç‰¹åˆ«ç•™æ„ï¼Œéœ€è¦æ ¹æ®APIçš„ä¸åŒæ¥åšä¸åŒçš„åˆ¤æ–­ã€‚\néœ€è¦æ³¨æ„GetCurrentProcess()ç”¨äºè·å–å½“å‰è¿›ç¨‹çš„ä¼ªå¥æŸ„ï¼Œå½“å‰è¿›ç¨‹çš„ä¼ªå¥æŸ„å€¼æ˜¯-1ï¼Œæ°å¥½ä¸INVALID_HANDLE_VALUEå€¼ç›¸ç­‰ã€‚\nå› æ­¤ç”¨ WaitForSingleObject ç­‰å¾… INVALID_HANDLE_VALUE ä¹Ÿå°±æ˜¯ç­‰åŒäºç­‰å¾…å½“å‰è¿›ç¨‹ç»“æŸã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"çª—å£å¦‚ä½•é€ƒè„±æ˜¾ç¤ºæ¡Œé¢æŒ‡ä»¤","url":"/post/2065788833.html","content":"åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬æŒ‰ä¸‹ Win+D å¿«æ·é”®æ‰§è¡Œâ€œæ˜¾ç¤ºæ¡Œé¢â€æ—¶ï¼Œä¼šå°†æ¡Œé¢ä¸Šçš„æ‰€æœ‰çª—å£éƒ½æœ€å°åŒ–åˆ°ä»»åŠ¡æ ï¼Œå†æ¬¡æŒ‰ä¸‹è¿˜ä¼šè¿˜åŸçª—å£çŠ¶æ€ã€‚å¦‚æœåœ¨æ‰§è¡Œæ˜¾ç¤ºæ¡Œé¢æ“ä½œæ—¶ï¼Œæœ‰äº›çª—å£ä»ç„¶ä¿æŒæ˜¾ç¤ºçŠ¶æ€ï¼Œä¸è¢«æœ€å°åŒ–ï¼Œè¿™äº›çª—å£ç§°ä¹‹ä¸ºé€ƒè„±äº†æ˜¾ç¤ºæ¡Œé¢æŒ‡ä»¤ã€‚\nå®ç°é€ƒè„±æ˜¾ç¤ºæ¡Œé¢çš„æ–¹å¼æœ‰ä¸‰ç§ï¼Œæ¯ç§æ–¹å¼æœ‰ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚\n\n\nä¸€ã€ç½®é¡¶çª—å£çš„æ–¹å¼ä¸ºçª—å£æŒ‡å®šWS_EX_TOOLWINDOWå’ŒWS_EX_TOPMOSTæ ·å¼ï¼Œå› ä¸ºWS_EX_TOOLWINDOW é£æ ¼çš„çª—å£ä¸ä¼šå‡ºç°åœ¨ä»»åŠ¡æ ï¼Œå³ä¾¿æŒ‰ALT+TABæ—¶ä¹Ÿä¸ä¼šæ˜¾ç¤ºï¼Œè€ŒWS_EX_TOPMOST æ ·å¼å¯ä»¥ä½¿çª—å£å§‹ç»ˆç½®é¡¶ã€‚\nå¯ä»¥åœ¨åˆ›å»ºçª—å£æ—¶é€šè¿‡æ‰©å±•æ ·å¼æ¥åŒæ—¶æŒ‡å®šWS_EX_TOOLWINDOWå’ŒWS_EX_TOPMOSTæ ·å¼ï¼š\nHWND hWnd = CreateWindowExW(    WS_EX_TOOLWINDOW | WS_EX_TOPMOST,    szWindowClass,    szTitle,    WS_OVERLAPPEDWINDOW,    CW_USEDEFAULT,    0,    CW_USEDEFAULT,    0,    nullptr,    nullptr,    hInstance,    nullptr);\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¹Ÿå¯ä»¥å…ˆåˆ›å»ºçª—å£ï¼Œç„¶åä¿®æ”¹çª—å£æ ·å¼ï¼š\nLONG_PTR oldStyle = GetWindowLongPtr(hWnd, GWL_EXSTYLE);oldStyle |= WS_EX_TOOLWINDOW;SetWindowLongPtr(hWnd, GWL_EXSTYLE, oldStyle);\n\nå¹¶é€šè¿‡SetWindowPoså‡½æ•°æ¥ç½®é¡¶çª—å£ï¼š\nSetWindowPos(hWnd, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOSIZE | SWP_NOMOVE);\n\nè¿™ç§æ–¹å¼å¯¹ç³»ç»Ÿçš„å…¼å®¹æ€§æ¯”è¾ƒå¥½ï¼Œç»æµ‹è¯•å¯ä»¥æ”¯æŒWindows XP&#x2F;7&#x2F;8&#x2F;10&#x2F;11ç³»ç»Ÿã€‚ä½†è¿™ç§æ–¹å¼ä¼šå¯¼è‡´çª—å£ä¸€ç›´ç½®é¡¶æ˜¾ç¤ºï¼Œå¯¹äºä¸éœ€è¦ç½®é¡¶æ˜¾ç¤ºçš„çª—å£ï¼Œè¿™ç§æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚\näºŒã€æ”¹å˜çª—å£æ‰€æœ‰è€…çš„æ–¹å¼åœ¨æ‰§è¡Œæ˜¾ç¤ºæ¡Œé¢æŒ‡ä»¤æ—¶ï¼Œæ¡Œé¢ä»ç„¶ä¼šæ˜¾ç¤ºï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†çª—å£çš„æ‰€æœ‰è€…è®¾ç½®ä¸ºæ¡Œé¢çª—å£ï¼Œæ¥ç¡®ä¿çª—å£ä¸å—â€œæ˜¾ç¤ºæ¡Œé¢â€æŒ‡ä»¤çš„å½±å“ã€‚\n2.1 æŸ¥æ‰¾æ¡Œé¢çª—å£åœ¨Win7åŠä¹‹å‰çš„ç³»ç»Ÿä¸­ï¼Œæ¡Œé¢çª—å£æ˜¯Program Managerçª—å£çš„å­çª—å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nè€Œåœ¨Win8åŠä»¥åçš„ç³»ç»Ÿï¼Œæ¡Œé¢çª—å£å˜æˆäº†WorkerWçª—å£çš„å­çª—å£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå› æ­¤åœ¨æŸ¥æ‰¾æ¡Œé¢çª—å£å¥æŸ„æ—¶ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ç³»ç»Ÿç¯å¢ƒé‡‡ç”¨ä¸åŒçš„æŸ¥æ‰¾æ–¹å¼ã€‚\nHWND FindShellDefViewWnd() &#123;    HWND hShellDefView = nullptr;    // Try Win7 and later    HWND hProgmanWnd = FindWindowW(L&quot;Progman&quot;, L&quot;Program Manager&quot;);    if (hProgmanWnd) &#123;        hShellDefView = FindWindowExW(hProgmanWnd, NULL, L&quot;SHELLDLL_DefView&quot;, NULL);    &#125;    // Try &gt; Win7    if (!hShellDefView) &#123;        // When this fails, then look for the WorkerW windows list to get the correct desktop list handle.        HWND hDesktop = GetDesktopWindow();        HWND hWorkerW = NULL;        do &#123;            hWorkerW = FindWindowExW(hDesktop, hWorkerW, L&quot;WorkerW&quot;, NULL);            hShellDefView = FindWindowExW(hWorkerW, NULL, L&quot;SHELLDLL_DefView&quot;, NULL);        &#125; while (hShellDefView == NULL &amp;&amp; hWorkerW != NULL);    &#125;    return hShellDefView;&#125;\n\n2.2 è®¾ç½®çª—å£æ‹¥æœ‰è€…ç°åœ¨æˆ‘ä»¬å°†çª—å£çš„æ‹¥æœ‰è€…è®¾ç½®ä¸ºSHELLDLL_DefViewçª—å£å³å¯é€ƒè„±æ˜¾ç¤ºæ¡Œé¢çš„æŒ‡ä»¤äº†ã€‚\nbool EscapeShowDesktop(HWND hWnd) &#123;    HWND hShellDefView = FindShellDefViewWnd();    if (hShellDefView) &#123;        SetWindowLongPtr(hWnd, GWL_HWNDPARENT, (LONG_PTR)hShellDefView);        return true;    &#125;    return false;&#125;\n\n\néœ€è¦æ³¨æ„ï¼š \né‡‡ç”¨è¿™ç§æ–¹å¼å¯èƒ½ä¼šå¯¼è‡´å½“å‰çš„æ´»åŠ¨æ¡Œé¢å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªè¡Œä¸ºä¼šå¯¹æŸäº›Windows APIäº§ç”Ÿå½±å“ï¼Œå¦‚ä¼šå¯¼è‡´GetAsyncKeyStateå¤±æ•ˆã€‚\n\nä¸‰ã€ä½¿ç”¨Appbaræœºåˆ¶å®ç°Windowsæä¾›äº†APIæ¥ä½¿åº”ç”¨ç¨‹åºå…·æœ‰æ¨¡æ‹Ÿç³»ç»Ÿä»»åŠ¡æ çš„èƒ½åŠ›ï¼Œé€šå¸¸å°†æ¨¡æ‹Ÿç³»ç»Ÿä»»åŠ¡æ çš„ç¨‹åºæˆä¸ºAppbarï¼ˆapplication desktop toolbarï¼‰ã€‚Appbarçª—å£ä¸å—æ˜¾ç¤ºæ¡Œé¢æŒ‡ä»¤çš„æ§åˆ¶ï¼Œä½†è¯¥çª—å£ä¼šå’Œä»»åŠ¡æ ä¸€æ ·å æ®ä¸€éƒ¨åˆ†æ¡Œé¢å¯ç”¨ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡APIæ§åˆ¶å ç”¨ç©ºé—´çš„å¤§å°å’Œä½ç½®ã€‚\nå…³äºå¦‚ä½•ä½¿ç”¨Appbarçš„APIï¼Œå¯ä»¥å‚è€ƒWindowså®˜æ–¹æ–‡æ¡£:Using Application Desktop Toolbars\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"ç†è§£ Visual C/C++ è¿è¡Œæ—¶åº“","url":"/post/782629701.html","content":"è¿è¡Œæ—¶åº“ï¼ˆRuntime libraryï¼‰é€šä¿—çš„è¯´å°±æ˜¯æˆ‘ä»¬çš„ç¨‹åºè¿è¡Œçš„æ—¶å€™æ‰€ä¾èµ–çš„åº“æ–‡ä»¶ã€‚åœ¨ Windows å¹³å°ï¼Œè¿™äº›åº“ç”±å¾®è½¯æä¾›ï¼Œç§°ä¹‹ä¸º Visual C++ è¿è¡Œæ—¶åº“ï¼Œè™½ç„¶å« C++ è¿è¡Œæ—¶åº“ï¼Œä½†ä¹ŸåŒ…å«äº† C è¿è¡Œæ—¶åº“ã€‚\nè¿™äº›åº“ä»¥ä¸¤ç§å½¢å¼è¢«æä¾›ï¼šé™æ€åº“(lib)ã€åŠ¨æ€åº“(lib + dll)ï¼Œæ¯ä¸ªåº“è¿˜åˆ†åˆ«æä¾›äº† Debug å’Œ Release ä¸¤ä¸ªç‰ˆæœ¬ã€‚\n\n\nä¸€ã€ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶åº“C&#x2F;C++è¿è¡Œæ—¶åº“ä»å½¢å¼ä¸Šæ¥è®²å’Œæˆ‘ä»¬è‡ªå·±å¼€å‘çš„é™æ€åº“ã€åŠ¨æ€åº“æ²¡ä»€ä¹ˆä¸¤æ ·ï¼Œåªæ˜¯å®ƒä»¬ç”±å¾®è½¯å¼€å‘å’Œç»´æŠ¤ï¼Œå¹¶æä¾›äº†ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½æ”¯æŒï¼ˆå¦‚malloc, free, printfç­‰ç­‰ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬çš„ç¨‹åºéœ€è¦ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼ˆäº‹å®ä¸Šï¼Œåªè¦æ˜¯ C&#x2F;C++ç¨‹åºå°±ä¸€å®šä¼šç”¨åˆ°è¿è¡Œæ—¶åº“æä¾›çš„åŠŸèƒ½ï¼‰ï¼Œå°±è¦é“¾æ¥ C&#x2F;C++è¿è¡Œæ—¶åº“ã€‚æˆ‘ä»¬å¯ä»¥è‡ªä¸»é€‰æ‹©æ˜¯é“¾æ¥â€œé™æ€åº“â€è¿˜æ˜¯â€œåŠ¨æ€åº“â€ï¼Œæ˜¯é“¾æ¥â€œdebug ç‰ˆæœ¬â€çš„è¿˜æ˜¯â€œrelease ç‰ˆæœ¬â€çš„ã€‚\näºŒã€å¦‚ä½•é“¾æ¥è¿è¡Œæ—¶åº“å¤§å®¶å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘ä¸­ä»æ¥æ²¡æœ‰æ˜¾å¼çš„æ¥é“¾æ¥è¿™äº›åº“ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆäº†ï¼Ÿ&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å› ä¸ºæˆ‘ä»¬çš„ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬æä¾›äº†ä¾¿åˆ©ï¼Œæˆ‘ä»¬åªéœ€è¦å‘ç¼–è¯‘å™¨æŒ‡å®šç‰¹å®šçš„ç¼–è¯‘é€‰é¡¹ï¼ˆå¦‚MTã€MDã€MTdã€MDdï¼‰ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨é“¾æ¥å¯¹åº”çš„åº“ã€‚\nåŒæ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®MTå’ŒMDæ¥å®šä¹‰ç›¸åº”çš„é¢„å¤„ç†å®ï¼šMT å¯¹åº” _MTå®ï¼ŒMDå¯¹åº”_MDå®ã€‚\nä¾‹å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡Visual Studioå¼€å‘ C&#x2F;C++ç¨‹åºæ—¶ï¼Œåœ¨å·¥ç¨‹å±æ€§ä¸­é…ç½®â€œè¿è¡Œåº“â€ä¸ºMTã€MDã€MTdã€MDdä¸­çš„ä¸€ä¸ªï¼š\n\nå°±ç›¸å½“äºé—´æ¥çš„å‘ç¼–è¯‘å™¨æŒ‡å®šç¼–è¯‘é€‰é¡¹å’Œå®šä¹‰ç›¸åº”çš„å®ã€‚\nä¸‰ã€ä¸åŒç‰ˆæœ¬å’Œå½¢æ€çš„è¿è¡Œæ—¶åº“3.1 è¿è¡Œæ—¶åº“å¯¹åº”çš„æ–‡ä»¶ä¸‹è¡¨åˆ—å‡ºå„ç§ç¼–è¯‘é€‰é¡¹çš„å«ä¹‰ä»¥åŠå¯¹åº”çš„åº“æ–‡ä»¶ï¼š\n\n\n\nç±»å‹\nå…¨ç§°\nå«ä¹‰\nå¯¹åº”çš„åº“æ–‡ä»¶\nå¤‡æ³¨\n\n\n\nML\nSingle-Threaded\nRelease ç‰ˆçš„å•çº¿ç¨‹é™æ€åº“\nlibc.lib\nä» VS2005 èµ·è¢«åºŸå¼ƒ\n\n\nMLd\nSingle-Threaded Debug\nDebug ç‰ˆçš„å•çº¿ç¨‹é™æ€åº“\nlibcd.lib\nä» VS2005 èµ·è¢«åºŸå¼ƒ\n\n\nMT\nMulti-threaded\nRelease ç‰ˆçš„å¤šçº¿ç¨‹é™æ€åº“\nlibcmt.lib\n\n\n\nMTd\nMulti-threaded Debug\nDebug ç‰ˆçš„å¤šçº¿ç¨‹é™æ€åº“\nlibcmtd.lib\n\n\n\nMD\nMulti-threaded DLL\nRelease ç‰ˆçš„å¤šçº¿ç¨‹åŠ¨æ€åº“\nmsvcrt.lib + msvcrxxx.dll msvcprt.lib+msvcpxxx.dll\n\n\n\nMDd\nMulti-threaded DLL Debug\nDebug ç‰ˆçš„å¤šçº¿ç¨‹åŠ¨æ€åº“\nmsvcrtd.lib + msvcrxxxd.dll msvcprtd.lib + msvcpxxxd.dll\n\n\n\nå¦‚æœè®¡ç®—æœºä¸Šå®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„ VC++è¿è¡Œç¯å¢ƒï¼ˆæˆ–è€…å¤šä¸ªç‰ˆæœ¬çš„ Visual Studioï¼‰ï¼Œåˆ™ç›¸åŒåç§°çš„ lib æˆ– dll å°±ä¼šå­˜åœ¨å¤šä»½ã€‚å¦‚msvcrt.libæ–‡ä»¶ï¼š\n\n3.2 è¿è¡Œæ—¶åº“æ–‡ä»¶å‘½åè§„åˆ™MSVCRTå¾®è½¯çš„Cè¯­è¨€è¿è¡Œæ—¶åº“ï¼Œä»¥msvcr100d.dllä¸ºä¾‹ï¼š\nms = Microsoftv = Visualc = C Programr = Run-time100 = Versiond = Debug   (ä¸å¸¦då³ä¸ºreleaseç‰ˆæœ¬)\n\nUCRTå¾®è½¯å¼€å‘çš„é€šç”¨Cè¯­è¨€è¿è¡Œæ—¶åº“ï¼Œä»Visual Studio 2015å¼€å§‹ä½¿ç”¨ Universal CRT æ¥å–ä»£ä¸Šé¢ä»‹ç»çš„MSVCRTï¼Œç®€ç§° UCRTï¼ŒWindows 8 åŠä»¥ä¸Šç³»ç»Ÿä¼šè‡ªå¸¦è¯¥è¿è¡Œæ—¶åº“ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ç³»ç»Ÿè‡ªå¸¦çš„è¿è¡Œæ—¶æ–‡ä»¶ä½äºC:\\Windows\\System32å’ŒC:\\Windows\\SysWOW64ç›®å½•ã€‚\nå¦‚æœå®‰è£…äº†Windows SDKï¼Œè¿è¡Œæ—¶æ–‡ä»¶è¿˜ä¼šå­˜åœ¨äºå¦‚ä¸‹ç›®å½•ï¼š\nC:\\Program Files (x86)\\Windows Kits\\10\\Redist\\XXX.XXX.XXX.XXX\\ucrt\\DLLs\n\n\nMSVCPå¾®è½¯C++è¿è¡Œæ—¶åº“ï¼Œä»¥msvcp100d.dllä¸ºä¾‹ï¼š\nms = Microsoftv = Visualcp = C Plus Plus å³C++100 = Versiond = Debug   (ä¸å¸¦då³ä¸ºreleaseç‰ˆæœ¬)\n\nä» Visual Studio 2015 å¼€å§‹ï¼Œç‰ˆæœ¬å·å›ºå®šä¸º140ï¼Œæœ‰å¦‚ä¸‹ä¸‰ä¸ªæ–‡ä»¶ï¼š\n\nmsvcp140.dll\nmsvcp140_1.dll (the memory_resource satellite)\nmsvcp140_2.dll (the special math satellite)\n\nç”±äºå¾®è½¯çš„ STL æ˜¯å¼€æºçš„ï¼Œå› æ­¤æ¯ä¸ªæ–‡ä»¶æä¾›çš„å…·ä½“åŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒ STL çš„ CMakeLists.txtã€‚\nå››ã€è¿è¡Œæ—¶åº“ä½¿ç”¨æ³¨æ„äº‹é¡¹\nä¸è¦æ··åˆä½¿ç”¨è¿è¡Œæ—¶åº“çš„é™æ€åº“ç‰ˆå’ŒåŠ¨æ€åº“ç‰ˆã€‚\nä¸è¦æ··åˆä½¿ç”¨è¿è¡Œæ—¶åº“çš„debugç‰ˆå’Œreleaseç‰ˆã€‚\nä¸è¦æ··åˆä½¿ç”¨ Visual Studio 2013 åŠæ›´æ—©ç‰ˆæœ¬çš„è¿è¡Œæ—¶åº“ï¼Œä½†åœ¨ Visual Studio 2015 åŠæ›´é«˜ç‰ˆæœ¬ä¸­æä¾›çš„è¿è¡Œæ—¶åº“å¯ä»¥ä¿è¯äºŒè¿›åˆ¶å…¼å®¹ã€‚\n\nå‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼šABIå…¼å®¹æ€§\näº”ã€Visual StudioåŠMSVCç‰ˆæœ¬å¾®è½¯ä»1998å¹´å‘å¸ƒVisual C++ 6.0ä»¥æ¥ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä»¥æ¯2å¹´ä¸€ä¸ªIDEçš„é€Ÿåº¦å‘å¸ƒæ–°çš„å¼€å‘å¹³å°ã€‚\nMicrosoft Visual C++ ç¼–è¯‘å™¨ç‰ˆæœ¬ç”±å››ä¸ªå­—æ®µç»„æˆï¼š\nM - ä¸»ç‰ˆæœ¬ï¼ˆä¸¤ä½æ•°ï¼‰N - æ¬¡è¦ç‰ˆæœ¬ï¼ˆä¸¤ä½æ•°ï¼‰B - å†…éƒ¨ç‰ˆæœ¬ï¼ˆäº”ä½æ•°ï¼‰R - ä¿®è®¢ç‰ˆæœ¬\nMicrosoft ç‰¹å®šçš„ç¼–è¯‘å™¨å®æŒ‰ä»¥ä¸‹æ–¹å¼å¯¹è¿™äº›å­—æ®µè¿›è¡Œç¼–ç ï¼š\n_MSC_VER &#x3D; MMNN_MSC_FULL_VER &#x3D; MMNNBBBBB_MSC_BUILD &#x3D; R\n\n\n\nIDE\nå‘å¸ƒæ—¶é—´\nå·¥å…·é›†ç‰ˆæœ¬\n_MSC_VERå®\nMSVC++\nç³»ç»Ÿæ”¯æŒ\n\n\n\nVisual C++ 6.0\n1998\nV60\n1200\nMSVC++ 6.0\nXP+\n\n\nVisual Studio 2002\n2002\nV70\n1300\nMSVC++ 7.0\nXP+\n\n\nVisual Studio 2003\n2003\nV71\n1310\nMSVC++ 7.1\nXP+\n\n\nVisual Studio 2005\n2005\nV80\n1400\nMSVC++ 8.0\nXP+\n\n\nVisual Studio 2008\n2008\nV90\n1500\nMSVC++ 9.0\nXP+\n\n\nVisual Studio 2010\n2010\nV100\n1600\nMSVC++ 10.0\nXP+\n\n\nVisual Studio 2012\n2012\nV110\n1700\nMSVC++ 11.0\nXP+\n\n\nVisual Studio 2013\n2013\nV120\n1800\nMSVC++ 12.0\nWin7+\n\n\nVisual Studio 2015\n2015\nV140\n1900\nMSVC++ 14.0\nWin7+\n\n\nVisual Studio 2017\n2017\nV141\n1910 ~ 1916\nMSVC++ 14.1\nWin7+\n\n\nVisual Studio 2019\n2019\nV142\n1920 ~ 1929\nMSVC++ 14.2\nWin7+\n\n\nVisual Studio 2022\n2022\nV143\n1930 ~ 1942 (éšç€å‡çº§å¯èƒ½è¿˜ä¼šå¢åŠ )\nMSVC++ 14.3\nWin7+\n\n\nå‚è€ƒï¼šMicrosoft Visual C++ compiler versioning\nå…­ã€æ‰©å±•é˜…è¯»VC-LTLVC-LTLæ˜¯ä¸€ä¸ªåŸºäºå¾®è½¯VCä¿®æ”¹çš„å¼€æºè¿è¡Œæ—¶ï¼Œæœ‰æ•ˆå‡å°‘åº”ç”¨ç¨‹åºä½“ç§¯å¹¶æ‘†è„±å¾®è½¯è¿è¡Œæ—¶DLLï¼Œæ¯”å¦‚msvcr120.dllã€api-ms-win-crt-time-l1-1-0.dllç­‰ä¾èµ–ã€‚\nåœ¨å¤§å‹é¡¹ç›®ä¸­å¾€å¾€æœ‰ä¼—å¤šæ¨¡å—ï¼Œå¦‚æœéƒ½é‡‡ç”¨é™æ€ç¼–è¯‘é‚£ä¹ˆé€ æˆçš„ç©ºé—´æµªè´¹å…ˆä¸è¯´ï¼Œæœ€åä¹Ÿä¼šå› ä¸ºFlsä¸Šé™å¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œã€‚\nä½¿ç”¨VC-LTLåå¯ä»¥å°†ç¨‹åºåŠ¨æ€é“¾æ¥åˆ°ç³»ç»Ÿè‡ªå¸¦çš„msvcrt.dllæˆ–è€…ucrtbase.dllä¸­ï¼Œæ¥å‡å°‘ç¨‹åºä½“ç§¯ã€‚ç›®å‰ä½¿ç”¨CRTã€STLä»¥åŠMFCçš„å·¥ç¨‹ä¸€èˆ¬éƒ½å¯ä»¥ä½¿ç”¨ã€‚è€ŒVC-LTLèƒ½è®©ä½ çš„é¡¹ç›®å¦‚åŒç³»ç»Ÿæ–‡ä»¶ä¸€æ ·å…±äº«ç³»ç»Ÿå†…ç½®msvcrt.dllæˆ–è€…ucrtbase.dllï¼Œæœ‰æ•ˆçš„è§£å†³Flsä¸Šé™ä»¥åŠè¿è¡Œæ—¶éƒ¨ç½²é—®é¢˜ï¼ŒåŒæ—¶å¤§å¤§ç¼©å‡ç¨‹åºä½“ç§¯ï¼Œå¯ä»¥è¯´ä¸€ç®­ä¸‰é›•ï¼\nä½¿ç”¨VC-LTLåå¯ä»¥å°†ç¨‹åºåŠ¨æ€é“¾æ¥åˆ°ç³»ç»Ÿè‡ªå¸¦çš„msvcrt.dllæˆ–è€…ucrtbase.dllä¸­ï¼Œæ¥å‡å°‘ç¨‹åºä½“ç§¯ã€‚ç›®å‰ä½¿ç”¨CRTã€STLä»¥åŠMFCçš„å·¥ç¨‹ä¸€èˆ¬éƒ½å¯ä»¥ä½¿ç”¨ã€‚\nè¯¥é¡¹ç›®çš„ç¨³å®šæ€§æœ‰å¾…éªŒè¯ï¼Œåœ¨çº¿ä¸Šäº§å“ä¸­è°¨æ…ä½¿ç”¨\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"è®¤è¯†Windowsé¡¶çº§(top-level)çª—å£","url":"/post/1431775047.html","content":"åœ¨Windows APIä¸­ç»å¸¸ä¼šå‡ºç°å…³äºé¡¶çº§çª—å£çš„æè¿°ï¼Œå¦‚ EnumWindowså‡½æ•°çš„è¯´æ˜ï¼š\nEnumerates all top-level windows on the screen by passing the handle to each window, in turn, to an application-defined callback function. EnumWindows continues until the last top-level window is enumerated or the callback function returns FALSE.\né‚£ä¹ˆä»€ä¹ˆæ ·çš„çª—å£æ‰ç®—å¾—ä¸Šæ˜¯é¡¶çº§çª—å£äº†ï¼Ÿ\nç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æ²¡æœ‰WM_CHILDå±æ€§çš„çª—å£éƒ½å¯ä»¥ç§°ä¸ºé¡¶çº§çª—å£ã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"ç»˜åˆ¶Windowsçš„ç•Œé¢ï¼šæ¢ç´¢çª—å£ã€GDIä¸GDI+çš„å›¾å½¢ä¸–ç•Œ","url":"/post/3832899600.html","content":"å½“ä½ ç‚¹å‡»æ¡Œé¢å›¾æ ‡ï¼Œä¸€ä¸ªçª—å£ç¼“ç¼“å±•å¼€ï¼›æ»šåŠ¨ç½‘é¡µæ—¶ï¼Œæ–‡å­—ä¸å›¾ç‰‡åœ¨å±å¹•ä¸Šä¸æ»‘æ¸¸èµ°ï¼›æ‰“å¼€ç»˜å›¾è½¯ä»¶ï¼Œç¬”è§¦è½ä¸‹çš„ç¬é—´ï¼Œè‰²å½©ä¾¿åœ¨è™šæ‹Ÿç”»å¸ƒä¸Šæ™•æŸ“å¼€æ¥â€”â€”è¿™äº›ä¹ ä»¥ä¸ºå¸¸çš„ç•Œé¢äº¤äº’ï¼Œæ„æˆäº†æˆ‘ä»¬ä¸æ•°å­—ä¸–ç•Œå¯¹è¯çš„æ¡¥æ¢ã€‚ä½†ä½ æ˜¯å¦æƒ³è¿‡ï¼šè¿™äº›â€œç†æ‰€å½“ç„¶â€çš„è§†è§‰ä½“éªŒï¼Œç©¶ç«Ÿæ˜¯å¦‚ä½•ä»ä»£ç çš„æµ·æ´‹é‡Œâ€œç”Ÿé•¿â€å‡ºæ¥çš„ï¼Ÿçª—å£çš„è½®å»“å¦‚ä½•è¢«ç²¾å‡†å‹¾å‹’ï¼Ÿè‰²å½©ä¸çº¿æ¡æ€æ ·ç©¿è¶Šç¡¬ä»¶ä¸ç³»ç»Ÿçš„è¾¹ç•Œï¼Œæœ€ç»ˆè·ƒå…¥äººçœ¼ï¼Ÿ\n\n\nWindowså›¾å½¢ç¼–ç¨‹çš„æ ¸å¿ƒéª¨æ¶åœ¨æ·±å…¥æ¢ç´¢Windowså›¾å½¢ç¼–ç¨‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸ªæœ€åŸºæœ¬çš„Windowsçª—å£ç¨‹åºéª¨æ¶ã€‚è¿™ä¸ªéª¨æ¶ç¨‹åºåŒ…å«äº†åˆ›å»ºçª—å£ã€å¤„ç†æ¶ˆæ¯å’ŒåŸºæœ¬ç»˜å›¾çš„å…¨éƒ¨è¦ç´ ï¼š\n#include &lt;Windows.h&gt;// å£°æ˜çª—å£è¿‡ç¨‹å‡½æ•°LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);// ç¨‹åºå…¥å£ç‚¹int WINAPI WinMain(    _In_ HINSTANCE hInstance,    _In_opt_ HINSTANCE hPrevInstance,    _In_ LPSTR lpCmdLine,    _In_ int nCmdShow) &#123;  // 1. æ³¨å†Œçª—å£ç±»  const wchar_t CLASS_NAME[] = L&quot;SampleWindowClass&quot;;  WNDCLASSEX wcex = &#123;&#125;;  wcex.cbSize = sizeof(WNDCLASSEX);                 // ç»“æ„ä½“å¤§å°  wcex.lpfnWndProc = WindowProc;                    // çª—å£è¿‡ç¨‹å‡½æ•°  wcex.hInstance = hInstance;                       // ç¨‹åºå®ä¾‹å¥æŸ„  wcex.lpszClassName = CLASS_NAME;                  // çª—å£ç±»å  wcex.hCursor = LoadCursor(NULL, IDC_ARROW);       // å…‰æ ‡æ ·å¼  wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);  // çª—å£èƒŒæ™¯  RegisterClassEx(&amp;wcex);  // 2. åˆ›å»ºçª—å£  HWND hwnd = CreateWindowEx(      0,                       // æ‰©å±•æ ·å¼      CLASS_NAME,              // çª—å£ç±»å      L&quot;Windowså›¾å½¢ç¼–ç¨‹ç¤ºä¾‹&quot;,  // çª—å£æ ‡é¢˜      WS_OVERLAPPEDWINDOW,     // çª—å£æ ·å¼      // ä½ç½®å’Œå¤§å°      CW_USEDEFAULT, CW_USEDEFAULT,      800, 600,      NULL,       // çˆ¶çª—å£      NULL,       // èœå•      hInstance,  // å®ä¾‹å¥æŸ„      NULL        // é™„åŠ æ•°æ®  );  if (hwnd == NULL) &#123;    return 0;  &#125;  // 3. æ˜¾ç¤ºçª—å£  ShowWindow(hwnd, nCmdShow);  UpdateWindow(hwnd);  // 4. æ¶ˆæ¯å¾ªç¯  MSG msg = &#123;&#125;;  while (GetMessage(&amp;msg, NULL, 0, 0)) &#123;    TranslateMessage(&amp;msg);    DispatchMessage(&amp;msg);  &#125;  return (int)msg.wParam;&#125;// çª—å£è¿‡ç¨‹å‡½æ•°LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) &#123;  switch (uMsg) &#123;    case WM_DESTROY:      PostQuitMessage(0);      return 0;    case WM_PAINT: &#123;      PAINTSTRUCT ps;      HDC hdc = BeginPaint(hwnd, &amp;ps);      // åœ¨è¿™é‡Œæ·»åŠ ç»˜å›¾ä»£ç       // ä¾‹å¦‚: TextOut(hdc, 50, 50, L&quot;Hello, Windows!&quot;, 15);      EndPaint(hwnd, &amp;ps);    &#125;      return 0;  &#125;  return DefWindowProc(hwnd, uMsg, wParam, lParam);&#125;\n\nè¿™ä¸ªåŸºç¡€ç¨‹åºåŒ…å«äº†Windowså›¾å½¢ç¼–ç¨‹çš„æ ¸å¿ƒè¦ç´ ï¼š\n\nâ€‹WinMainå…¥å£ç‚¹â€‹ - Windows GUIåº”ç”¨ç¨‹åºçš„èµ·ç‚¹â€‹2. çª—å£ç±»æ³¨å†Œâ€‹ - å®šä¹‰çª—å£çš„åŸºæœ¬ç‰¹æ€§â€‹3. çª—å£åˆ›å»ºâ€‹ - æ ¹æ®æ³¨å†Œçš„ç±»åˆ›å»ºçª—å£å®ä¾‹\nâ€‹æ¶ˆæ¯å¾ªç¯â€‹ - Windowsç¨‹åºçš„å¿ƒè„ï¼Œè´Ÿè´£æ¥æ”¶å’Œåˆ†å‘ç³»ç»Ÿå‘é€ç»™çª—å£çš„å„ç§æ¶ˆæ¯â€‹5. çª—å£è¿‡ç¨‹å‡½æ•°â€‹ - å¯ä»¥åœ¨æ­¤å¤„ç†å‘é€åˆ°çª—å£çš„æ‰€æœ‰æ¶ˆæ¯\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨Windowsçª—å£åˆ›å»ºå’Œå›¾å½¢ç»˜åˆ¶çš„å„ä¸ªæ–¹é¢ã€‚\nçª—å£ç±»çª—å£ç±»æ˜¯çª—å£çš„æ¨¡æ¿ï¼Œå®šä¹‰äº†çª—å£çš„åŸºæœ¬ç‰¹æ€§ï¼Œä½¿ç”¨åŒä¸€ä¸ªçª—å£ç±»åˆ›å»ºçš„çª—å£æ‹¥æœ‰ç›¸åŒçš„ç‰¹æ€§ï¼Œå¦‚èƒŒæ™¯è‰²ã€å…‰æ ‡æ ·å¼ç­‰ã€‚\nWNDCLASSEX wcex = &#123;&#125;;wcex.cbSize = sizeof(WNDCLASSEX);     // å¿…é¡»è®¾ç½®ç»“æ„ä½“å¤§å°wcex.lpfnWndProc = WindowProc;        // çª—å£è¿‡ç¨‹å‡½æ•°wcex.hInstance = hInstance;           // åº”ç”¨ç¨‹åºå®ä¾‹å¥æŸ„wcex.lpszClassName = L&quot;MyWindowClass&quot;; // çª—å£ç±»åwcex.hCursor = LoadCursor(NULL, IDC_ARROW); // å…‰æ ‡æ ·å¼wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1); // èƒŒæ™¯ç”»åˆ·wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION); // ä¸»å›¾æ ‡wcex.hIconSm = LoadIcon(NULL, IDI_WINLOGO); // å°å›¾æ ‡ï¼ˆä»»åŠ¡æ å›¾æ ‡ï¼‰// æ³¨å†Œçª—å£ç±»RegisterClassEx(&amp;wcex);\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;çª—å£ç±»åä¸åŒºåˆ†å¤§å°å†™ã€‚\nç³»ç»Ÿé¢„å®šä¹‰çª—å£ç±»Windowsæä¾›äº†ä¸€äº›é¢„å®šä¹‰çš„çª—å£ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚â€‹Buttonã€Editã€ListBoxâ€‹ã€Staticâ€‹ã€ComboBoxã€ScrollBarç­‰ã€‚\nè¯¦è§ï¼šabout-window-classes#system-classes\nç³»ç»Ÿçª—å£ç±»æ˜¯ç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨æ³¨å†Œçš„ç”¨æˆ·è¿›ç¨‹çš„çª—å£ç±»ã€‚æ“ä½œç³»ç»Ÿä¼šåœ¨ç”¨æˆ·è¿›ç¨‹é¦–æ¬¡è°ƒç”¨Windowså›¾å½¢è®¾å¤‡æ¥å£ï¼ˆGDIï¼‰å‡½æ•°æ—¶ï¼Œä¸ºå…¶æ³¨å†Œç›¸åº”çš„ç³»ç»Ÿçª—å£ç±»ã€‚\nè™½ç„¶å°†ç³»ç»Ÿçª—å£ç±»ç”¨æ¥åˆ›å»ºä¸»çª—å£æ˜¯è¢«å…è®¸çš„ï¼Œæ¯”å¦‚ç”¨Buttonçª—å£ç±»æ¥åˆ›å»ºä¸€ä¸ªä¸»çª—å£ï¼Œä½†è¿™æ ·åªä¼šåˆ›å»ºä¸€ä¸ªå¤§å¤§çš„æŒ‰é’®ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå› æ­¤é€šå¸¸ä¸å°†ç³»ç»Ÿçª—å£ç±»ç”¨æ¥åˆ›å»ºä¸»çª—å£ï¼Œä»…ç”¨äºåˆ›å»ºå­çª—å£ï¼ˆå­æ§ä»¶ï¼‰ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºæ˜¯ç³»ç»Ÿçª—å£ç±»è¿˜æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„çª—å£ç±»ï¼Œéƒ½æ˜¯æ˜¯ä¸è¿›ç¨‹ç›¸å…³è”çš„ï¼Œè€Œä¸æ˜¯çº¿ç¨‹ï¼Œä¸€æ—¦çª—å£ç±»è¢«æ³¨å†Œï¼Œè¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥ä½¿ç”¨ã€‚\nè‡ªå®šä¹‰çª—å£ç±»è‡ªå®šä¹‰çª—å£ç±»å…è®¸å¼€å‘è€…å®Œå…¨æ§åˆ¶çª—å£çš„è¡Œä¸ºå’Œå¤–è§‚ï¼š\nWNDCLASSEX wcex = &#123;&#125;;wcex.cbSize = sizeof(WNDCLASSEX);wcex.style = CS_HREDRAW | CS_VREDRAW; // çª—å£æ”¹å˜å¤§å°æ—¶é‡ç»˜wcex.lpfnWndProc = WindowProc;wcex.cbClsExtra = 0;wcex.cbWndExtra = 0;wcex.hInstance = hInstance;wcex.hIcon = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_APPLICATION));wcex.hIconSm = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_SMALL)); // å°å›¾æ ‡wcex.hCursor = LoadCursor(NULL, IDC_ARROW);wcex.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH); // åªèƒ½æ˜¯HBRUSHç”»åˆ·ç±»å‹wcex.lpszMenuName = NULL;wcex.lpszClassName = L&quot;CustomWindowClass&quot;;RegisterClassEx(&amp;wcex);\n\nçª—å£ç±»æ ·å¼çª—å£ç±»æ ·å¼ï¼ˆWNDCLASSEX.styleï¼‰æ˜¯åœ¨æ³¨å†Œçª—å£ç±»æ—¶è®¾ç½®çš„ï¼Œå®ƒå®šä¹‰äº†çª—å£ç±»çš„ä¸€äº›é€šç”¨è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºå°†åº”ç”¨äºæ‰€æœ‰ä½¿ç”¨è¿™ä¸ªç±»åˆ›å»ºçš„çª—å£ã€‚\nçª—å£ç±»æ ·å¼ä¸»è¦å½±å“çª—å£çš„è¡Œä¸ºï¼ˆå¦‚é‡ç»˜ã€åŒå‡»ç­‰ï¼‰ï¼Œè€Œçª—å£çš„å¤–è§‚ã€è¾¹æ¡†ã€æ ‡é¢˜æ è¿™äº›æ ·å¼åˆ™æœ‰CreateWindowå‡½æ•°ä¸­çš„çª—å£æ ·å¼æ‰€æŒ‡å®šã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¸¸è§çš„ç±»æ ·å¼åŒ…æ‹¬ï¼š\n\nCS_HREDRAW | CS_VREDRAW: å½“çª—å£çš„å®½åº¦æˆ–é«˜åº¦æ”¹å˜æ—¶ï¼Œé‡ç»˜æ•´ä¸ªçª—å£ã€‚\nCS_DBLCLKS: å…è®¸çª—å£æ¥æ”¶åŒå‡»æ¶ˆæ¯ï¼ˆWM_LBUTTONDBLCLKç­‰ï¼‰ã€‚\nCS_OWNDC: ä¸ºæ¯ä¸ªçª—å£å®ä¾‹åˆ†é…ä¸€ä¸ªç‹¬æœ‰çš„è®¾å¤‡ä¸Šä¸‹æ–‡ï¼ˆDCï¼‰ã€‚\nCS_CLASSDC: ä¸ºçª—å£ç±»åˆ†é…ä¸€ä¸ªå…±äº«çš„è®¾å¤‡ä¸Šä¸‹æ–‡ï¼ˆDCï¼‰ã€‚\nCS_NOCLOSE: ç¦ç”¨ï¼ˆè€Œééšè—ï¼‰çª—å£ç³»ç»Ÿèœå•ä¸­çš„å…³é—­æŒ‰é’®ã€‚\nCS_SAVEBITS: å°†çª—å£å›¾åƒä¿å­˜ä¸ºä½å›¾ï¼Œä»¥ä¾¿åœ¨çª—å£è¢«é®æŒ¡åå¿«é€Ÿé‡ç»˜ï¼ˆå¸¸ç”¨äºå°çª—å£ï¼Œå¦‚èœå•ï¼‰ã€‚\nCS_GLOBALCLASS: è¡¨ç¤ºè¿™ä¸ªçª—å£ç±»æ˜¯åº”ç”¨ç¨‹åºå…¨å±€çš„ï¼Œå¯ä»¥è¢«åŒä¸€è¿›ç¨‹ä¸­çš„å…¶ä»–æ¨¡å—ä½¿ç”¨ï¼ˆé€šå¸¸åœ¨DLLä¸­ä½¿ç”¨ï¼‰ã€‚\n\nçª—å£é»˜è®¤èƒŒæ™¯è‰²WNDCLASSEX.hbrBackgroundç”¨äºæŒ‡å®šçª—å£ç±»çš„é»˜è®¤èƒŒæ™¯ç”»åˆ·ã€‚å½“çª—å£éœ€è¦é‡ç»˜èƒŒæ™¯æ—¶ï¼ˆæ”¶åˆ° WM_ERASEBKGNDæ¶ˆæ¯ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨è¿™ä¸ªç”»åˆ·å¡«å……èƒŒæ™¯ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨WM_ERASEBKGNDæ¶ˆæ¯å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨è‡ªå®šä¹‰èƒŒæ™¯è‰²è¿›è¡Œå¡«å……ã€‚\nç”±äºçª—å£æ˜¯å…ˆæ”¶åˆ°WM_ERASEBKGNDæ¶ˆæ¯ï¼Œåæ”¶åˆ°WM_PAINTæ¶ˆæ¯çš„ï¼Œå› æ­¤å¯¹äºå¤æ‚ç•Œé¢ï¼Œåœ¨èƒŒæ™¯æ“¦é™¤å’Œå†…å®¹ç»˜åˆ¶ä¹‹é—´å°±å¯èƒ½å‡ºç°äººçœ¼å¯è§é—´éš”ï¼ˆé—ªçƒï¼‰ã€‚ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼šå°†WNDCLASSEX.hbrBackground è®¾ç½®ä¸ºNULLï¼Œå¹¶åœ¨WM_ERASEBKGNDå¤„ç†è¿‡ç¨‹ä¸­ç›´æ¥è¿”å›TRUEï¼ˆè¿™é‡Œçš„è¿”å›å€¼è¡¨ç¤ºèƒŒæ™¯æ˜¯å¦å·²ç»æ“¦é™¤ï¼Œå®é™…ä¼šå½±å“PAINTSTRUCT.fEraseçš„å€¼ï¼‰ï¼Œç„¶ååœ¨WM_PAINTå¤„ç†è¿‡ç¨‹ä¸­é‡‡ç”¨åŒç¼“å†²çš„æ–¹å¼ç»˜åˆ¶èƒŒæ™¯å’Œå†…å®¹ã€‚\nWNDCLASSEX.hbrBackgroundæ˜¯HBRUSHç±»å‹ï¼Œåˆ›å»ºHBRUSHç±»å‹çš„æ–¹å¼æœ‰å‡ ç§ã€‚\nä½¿ç”¨ç³»ç»Ÿé¢œè‰²å¸¸é‡åˆ›å»º\n// ä½¿ç”¨æ ‡å‡†çª—å£èƒŒæ™¯è‰²ï¼ˆé€šå¸¸æ˜¯ç™½è‰²ï¼‰wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1); // å¿…é¡»åŠ  +1ï¼Œè¿™æ˜¯ Windows API çš„å†å²è®¾è®¡ï¼Œè¡¨ç¤ºä½¿ç”¨ç³»ç»Ÿé¢œè‰²ç´¢å¼•// ä½¿ç”¨æŒ‰é’®è¡¨é¢é¢œè‰²ï¼ˆç°è‰²ï¼‰wcex.hbrBackground = (HBRUSH)(COLOR_BTNFACE + 1);// ä½¿ç”¨æ¡Œé¢èƒŒæ™¯è‰²wcex.hbrBackground = (HBRUSH)(COLOR_BACKGROUND + 1);\n\nä½¿ç”¨å†…ç½®ç”»åˆ·\n// è·å–ç™½è‰²ç”»åˆ·wcex.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);// è·å–é»‘è‰²ç”»åˆ·wcex.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);// è·å–ç°è‰²ç”»åˆ·wcex.hbrBackground = (HBRUSH)GetStockObject(GRAY_BRUSH);// è·å–ç©ºç”»åˆ·ï¼ˆé€æ˜èƒŒæ™¯ï¼‰wcex.hbrBackground = (HBRUSH)GetStockObject(NULL_BRUSH);\n\nåˆ›å»ºè‡ªå®šä¹‰ç”»åˆ·\n// åˆ›å»ºçº¯è‰²ç”»åˆ·HBRUSH hBlueBrush = CreateSolidBrush(RGB(0, 0, 255));wcex.hbrBackground = hBlueBrush;// åˆ›å»ºä½å›¾ç”»åˆ·HBITMAP hBmp = LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_BACKGROUND));HBRUSH hPatternBrush = CreatePatternBrush(hBmp);wcex.hbrBackground = hPatternBrush;// åˆ›å»ºé˜´å½±ç”»åˆ·HBRUSH hHatchBrush = CreateHatchBrush(HS_CROSS, RGB(255, 0, 0)); // HS_CROSSè¡¨ç¤ºæ¨ªç«–å‚ç›´äº¤å‰wcex.hbrBackground = hHatchBrush;\n\n\nä¸åŒçª—å£æ ·å¼çš„åŒºåˆ«ä¸åº”ç”¨è™½ç„¶çª—å£ç±»ä¸­ä¹ŸåŒ…å«æ ·å¼ï¼Œä½†çª—å£ç±»æ ·å¼ä¸»è¦å¯¹çª—å£çš„è¡Œä¸ºï¼ˆå¦‚é‡ç»˜ã€åŒå‡»ç­‰ï¼‰è¿›è¡Œå°‘é‡çš„è®¾ç½®ï¼Œæ›´å¤šçš„çª—å£å¤–è§‚å’ŒåŠŸèƒ½éƒ½ç”±çª—å£æ ·å¼æ‰€æŒ‡å®šã€‚\næˆ‘ä»¬é€šè¿‡CreateWindowExå‡½æ•°ä¸­çš„dwStyleå’ŒdwExStyleå‚æ•°æŒ‡å®šçª—å£æ ·å¼ã€‚\ndwStyledwStyleå®šä¹‰äº†çª—å£çš„åŸºæœ¬å¤–è§‚å’ŒåŠŸèƒ½ç‰¹æ€§ï¼Œæ˜¯åˆ›å»ºçª—å£æ—¶å¿…é¡»æŒ‡å®šçš„å‚æ•°ã€‚\nçª—å£ç±»å‹æ ·å¼ï¼š\n\nWS_OVERLAPPED æœ‰æ ‡é¢˜æ å’Œè¾¹æ¡†ï¼Œä¸èƒ½è°ƒæ•´çª—å£å¤§å°ï¼Œæ²¡æœ‰æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€å…³é—­æŒ‰é’®\nWS_POPUP å¼¹çª—ï¼Œé¡¶çº§çª—å£ï¼Œä¸èƒ½æŒ‡å®šçˆ¶çª—å£ï¼Œæ²¡æœ‰æ ‡é¢˜æ å’Œè¾¹æ¡†\nWS_CHILD å­çª—å£ï¼Œå¿…é¡»æŒ‡å®šçˆ¶çª—å£\nWS_OVERLAPPEDWINDOW ç»„åˆæ ·å¼ï¼Œåˆ›å»ºçš„çª—å£åŒ…å«ï¼šæ ‡é¢˜æ ã€è¾¹æ¡†ã€çª—å£èœå•ï¼ˆç³»ç»Ÿèœå•ï¼‰ã€æœ€å°åŒ–æŒ‰é’®ã€æœ€å¤§åŒ–æŒ‰é’®ã€å¯è°ƒæ•´å¤§å°çš„è¾¹æ¡†\n\nå¯è§æ€§ï¼ˆéƒ½æ˜¯æŒ‡å®šçš„åˆå§‹å¯è§æ€§ï¼Œåé¢å¯ä»¥é€šè¿‡ç¨‹åºæ”¹å˜ï¼‰ï¼š\n\nWS_VISIBLE çª—å£åˆå§‹å¯è§\nWS_DISABLED çª—å£åˆå§‹ç¦ç”¨\nWS_MINIMIZE çª—å£åˆå§‹æœ€å°åŒ–\nWS_MAXIMIZE çª—å£åˆå§‹æœ€å¤§åŒ–\n\nè¾¹æ¡†ä¸æ ‡é¢˜æ æ ·å¼\n\nWS_BORDER   ç»†è¾¹æ¡†ï¼Œä¸èƒ½è°ƒæ•´çª—å£å¤§å°\nWS_DLGFRAME å¯¹è¯æ¡†é£æ ¼è¾¹æ¡†\nWS_CAPTION  æ ‡é¢˜æ ï¼ˆåŒ…å«WS_BORDERï¼‰\nWS_THICKFRAME å¯è°ƒæ•´å¤§å°çš„è¾¹æ¡†\nWS_SYSMENU  ç³»ç»Ÿèœå•\nWS_MINIMIZEBOX æœ€å°åŒ–æŒ‰é’®\nWS_MAXIMIZEBOX æœ€å¤§åŒ–æŒ‰é’®\n\næ»šåŠ¨æ¡æ ·å¼\n\nWS_HSCROLL çª—å£å§‹ç»ˆæœ‰æ°´å¹³æ»šåŠ¨æ¡\nWS_VSCROLL çª—å£å§‹ç»ˆæœ‰å‚ç›´æ»šåŠ¨æ¡\n\ndwExStyledwExStyleå®šä¹‰äº†çª—å£çš„é«˜çº§ç‰¹æ€§å’Œç‰¹æ®Šæ•ˆæœï¼Œé€šå¸¸ç”¨äºå®ç°æ›´å¤æ‚çš„ç•Œé¢éœ€æ±‚ã€‚\nåˆ†å±‚ä¸é€æ˜åº¦æ ·å¼\n\nWS_EX_LAYERED åˆ†å±‚çª—å£ï¼ˆæ”¯æŒé€æ˜åº¦ï¼‰\nWS_EX_TRANSPARENT é€æ˜çª—å£ï¼ˆé¼ æ ‡ç‚¹å‡»ç©¿é€ï¼‰\n\nä½ç½®ä¸è¡Œä¸ºæ ·å¼\n\nWS_EX_TOPMOST çª—å£å§‹ç»ˆç½®é¡¶\nWS_EX_TOOLWINDOW å·¥å…·çª—å£ï¼ˆä¸åœ¨ä»»åŠ¡æ æ˜¾ç¤ºï¼‰\nWS_EX_NOACTIVATE çª—å£æ¿€æ´»æ—¶ä¸å¸¦åˆ°å‰å°\nWS_EX_APPWINDOW å¼ºåˆ¶çª—å£åœ¨ä»»åŠ¡æ æ˜¾ç¤º\n\nè¾¹æ¡†æ•ˆæœæ ·å¼WS_EX_WINDOWEDGE å‡¸èµ·è¾¹æ¡†\n\nWS_EX_CLIENTEDGE å‡¹é™·è¾¹æ¡†\nWS_EX_STATICEDGE é™æ€è¾¹æ¡†ï¼ˆæ— 3Dæ•ˆæœï¼‰\n\nå…¶ä»–é«˜çº§æ ·å¼\n\nWS_EX_CONTEXTHELP æ ‡é¢˜æ æ·»åŠ å¸®åŠ©æŒ‰é’®\nWS_EX_ACCEPTFILES æ¥å—æ–‡ä»¶æ‹–æ”¾\nWS_EX_COMPOSITED åŒç¼“å†²ç»˜åˆ¶æ‰€æœ‰å­çª—å£ï¼Œåœ¨å¯åŠ¨äº†DWMçš„ç³»ç»Ÿä¸Šæ²¡æœ‰æ•ˆæœï¼Œå› ä¸ºDWMå·²ç»æ”¯æŒæ¡Œé¢çº§çš„åˆæˆ\nWS_EX_RIGHT çª—å£å³å¯¹é½ï¼Œæ¯”å¦‚åœ¨é˜¿æ‹‰ä¼¯è¯­ç­‰ç¯å¢ƒä¸‹æ¯”è¾ƒæœ‰ç”¨\nWS_EX_RTLREADING ä»å³åˆ°å·¦æ˜¾ç¤ºæ–‡æœ¬ï¼Œæ¯”å¦‚åœ¨é˜¿æ‹‰ä¼¯è¯­ç­‰ç¯å¢ƒä¸‹æ¯”è¾ƒæœ‰ç”¨\n\nè¿è¡Œæ—¶ä¿®æ”¹çª—å£æ ·å¼// è·å–å½“å‰æ ·å¼LONG_PTR style = GetWindowLongPtr(hWnd, GWL_STYLE);LONG_PTR exStyle = GetWindowLongPtr(hWnd, GWL_EXSTYLE);// æ£€æŸ¥çª—å£æ˜¯å¦ç½®é¡¶BOOL isTopmost = exStyle &amp; WS_EX_TOPMOST;// æ·»åŠ æ–°æ ·å¼style |= WS_VISIBLE;exStyle |= WS_EX_TOPMOST;// ç§»é™¤æ ·å¼style &amp;= ~WS_MAXIMIZEBOX;// åº”ç”¨æ–°æ ·å¼SetWindowLongPtr(hWnd, GWL_STYLE, style);SetWindowLongPtr(hWnd, GWL_EXSTYLE, exStyle);// é‡ç»˜çª—å£SetWindowPos(hWnd, NULL, 0, 0, 0, 0,              SWP_NOMOVE | SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED);\n\n\nçª—å£æ¶ˆæ¯å¤„ç†è¿‡ç¨‹WNDCLASSEX.lpfnWndProc å‡½æ•°æŒ‡é’ˆæŒ‡å‘åº”ç”¨ç¨‹åºå®šä¹‰çš„çª—å£è¿‡ç¨‹å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£å¤„ç†å‘é€åˆ°è¯¥çª—å£ç±»çš„æ‰€æœ‰æ¶ˆæ¯ã€‚\næˆ‘ä»¬é€šå¸¸ä¼šå¯¹ä¸€äº›å¸¸ç”¨çš„æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œå¯¹äºæœªå¤„ç†çš„æ¶ˆæ¯åˆ™è°ƒç”¨DefWindowProcå‡½æ•°ä½¿ç”¨é»˜è®¤çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚\n\nWM_DESTROY \tçª—å£é”€æ¯æ—¶å‘é€ï¼Œå¦‚æœè¦é€€å‡ºç¨‹åºï¼Œåº”åœ¨æ­¤å¤„è°ƒç”¨ PostQuitMessage\nWM_CLOSE      çª—å£å…³é—­å‰è¯·å‘é€ï¼Œå¯åœ¨æ­¤å–æ¶ˆçª—å£å…³é—­æ“ä½œ\nWM_CREATE     çª—å£å·²è¢«åˆ›å»ºï¼Œä½†è¿˜æœªå¯è§æ—¶å‘é€ï¼Œå¯ä»¥åœ¨æ­¤å¤„åˆå§‹åŒ–èµ„æº\nWM_PAINT      çª—å£éœ€è¦ç»˜åˆ¶æ—¶å‘é€ï¼Œå¯ä»¥åœ¨æ­¤å¤„è¿›è¡Œçª—å£ç»˜åˆ¶\n\nçª—å£è¿‡ç¨‹å‡½æ•°çš„è¿”å›å€¼è™½ç„¶ä¸ºLRESULTç±»å‹ï¼Œä½†å´æ²¡æœ‰å›ºå®šçš„å€¼ï¼Œéœ€è¦æ ¹æ®æ¶ˆæ¯çš„ç±»å‹çš„ä¸åŒï¼Œè¿”å›ä¸åŒçš„å€¼ã€‚\nGDIç»˜å›¾åŸºç¡€GDIï¼ˆGraphics Device Interfaceï¼‰æ˜¯Windowsçš„å›¾å½¢è®¾å¤‡æ¥å£ï¼Œå…¶æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡ä¸€ä¸ªæŠ½è±¡çš„â€œè®¾å¤‡ä¸Šä¸‹æ–‡â€ï¼ˆDCï¼‰æ¥å±è”½ä¸åŒç¡¬ä»¶è®¾å¤‡çš„å·®å¼‚ï¼Œå®ç°è®¾å¤‡æ— å…³çš„å›¾å½¢ç»˜åˆ¶ï¼Œåº”ç”¨ç¨‹åºä¸éœ€è¦ç›´æ¥æ“ä½œç‰©ç†è®¾å¤‡ã€‚\nå¯ä»¥å°†DCæƒ³è±¡æˆä¸€å¼ ç”»å¸ƒï¼Œåœ¨å¼€å§‹ç»˜ç”»å‰ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ï¼ˆSelectObjectå‡½æ•°ï¼‰ç”»ç¬”Penã€ç”»åˆ·Brushã€å­—ä½“Fontã€ä½å›¾Bitmapç­‰å·¥å…·ï¼Œç„¶åè¿›è¡Œç»˜åˆ¶ï¼Œç»˜åˆ¶å®Œæˆåéœ€è¦åˆ é™¤åˆ›å»ºçš„å·¥å…·ï¼Œå¹¶å°†è€çš„å·¥å…·é€‰å…¥åˆ°DCä¸­ã€‚\nè®¾å¤‡ä¸Šä¸‹æ–‡è®¾å¤‡ä¸Šä¸‹æ–‡ï¼ˆDevice Contextï¼ŒDCï¼‰æ˜¯GDIçš„æ ¸å¿ƒæ¦‚å¿µï¼Œä»£è¡¨ä¸€ä¸ªç»˜å›¾è¡¨é¢ã€‚\n// è·å–è®¾å¤‡ä¸Šä¸‹æ–‡çš„å‡ ç§æ–¹å¼HDC hdc = GetDC(hWnd);           // è·å–çª—å£DCHDC hdc = BeginPaint(hWnd, &amp;ps); // åœ¨WM_PAINTä¸­è·å–DCHDC hdc = CreateDC(L&quot;DISPLAY&quot;, NULL, NULL, NULL); // åˆ›å»ºæ˜¾ç¤ºè®¾å¤‡DC// ä½¿ç”¨åå¿…é¡»é‡Šæ”¾DCï¼Œå¦åˆ™ä¼šèµ„æºæ³„éœ²ReleaseDC(hWnd, hdc);EndPaint(hWnd, &amp;ps);DeleteDC(hdc);\n\nåŸºæœ¬ç»˜å›¾å‡½æ•°// ç»˜åˆ¶çº¿æ¡MoveToEx(hdc, 10, 10, NULL);  // ç§»åŠ¨åˆ°èµ·ç‚¹LineTo(hdc, 100, 100);        // ç”»çº¿åˆ°ç»ˆç‚¹// ç»˜åˆ¶å½¢çŠ¶Rectangle(hdc, 50, 50, 150, 150);  // çŸ©å½¢Ellipse(hdc, 50, 50, 150, 150);    // æ¤­åœ†RoundRect(hdc, 50, 50, 150, 150, 20, 20); // åœ†è§’çŸ©å½¢// å¡«å……çŸ©å½¢RECT rc = &#123;0,0,100,100&#125;;HBRUSH hbrWhite = CreateSolidBrush(RGB(255,255,255));FillRect(hdc, &amp;rc, hbrWhite);DeleteObject(hbrWhite);// ç»˜åˆ¶æ–‡æœ¬SetBkMode(hdcMem, TRANSPARENT);        // é€æ˜èƒŒæ™¯SetTextColor(hdcMem, RGB(0, 0, 255));  // è“è‰²æ–‡æœ¬TextOut(hdc, 10, 10, L&quot;Hello, GDI!&quot;, 11);DrawText(hdcMem, L&quot;Hello, GDI!&quot;, -1, &amp;rcClient, DT_CENTER | DT_VCENTER | DT_SINGLELINE);\n\nGDIå¯¹è±¡ï¼šç”»ç¬”ã€ç”»åˆ·å’Œå­—ä½“// åˆ›å»ºç”»ç¬”ï¼ˆç»˜åˆ¶çº¿æ¡ï¼‰HPEN hPen = CreatePen(PS_SOLID, 1, RGB(255, 0, 0)); // çº¢è‰²å®çº¿ç”»ç¬”HPEN hOldPen = (HPEN)SelectObject(hdc, hPen); // é€‰å…¥DCå¹¶ä¿å­˜æ—§ç”»ç¬”// åˆ›å»ºç”»åˆ·ï¼ˆå¡«å……åŒºåŸŸï¼‰HBRUSH hBrush = CreateSolidBrush(RGB(0, 0, 255)); // è“è‰²å®å¿ƒç”»åˆ·HBRUSH hOldBrush = (HBRUSH)SelectObject(hdc, hBrush);// ä½¿ç”¨åæ¢å¤æ—§å¯¹è±¡å¹¶åˆ é™¤æ–°å¯¹è±¡SelectObject(hdc, hOldPen);SelectObject(hdc, hOldBrush);DeleteObject(hPen);DeleteObject(hBrush);\n\nåŒç¼“å†²ï¼ˆGDIç‰ˆï¼‰åŒç¼“å†²æŠ€æœ¯é€šè¿‡åœ¨å†…å­˜ä¸­ç»˜åˆ¶å†ä¸€æ¬¡æ€§æ˜¾ç¤ºæ¥æ¶ˆé™¤é—ªçƒã€‚\n// GDIåŒç¼“å†²å®ç°case WM_PAINT: &#123;    PAINTSTRUCT ps;    HDC hdc = BeginPaint(hWnd, &amp;ps);        // åˆ›å»ºå†…å­˜DCå’Œä½å›¾    HDC hdcMem = CreateCompatibleDC(hdc);    HBITMAP hbmMem = CreateCompatibleBitmap(hdc, width, height);    SelectObject(hdcMem, hbmMem);        // åœ¨å†…å­˜DCä¸Šç»˜åˆ¶    // ... æ‰€æœ‰ç»˜åˆ¶æ“ä½œéƒ½åœ¨hdcMemä¸Šè¿›è¡Œ ...        // å°†å†…å­˜ä½å›¾æ‹·è´åˆ°å±å¹•    BitBlt(hdc, 0, 0, width, height, hdcMem, 0, 0, SRCCOPY);        // æ¸…ç†èµ„æº    DeleteObject(hbmMem);    DeleteDC(hdcMem);        EndPaint(hWnd, &amp;ps);    break;&#125;\n\nGDI+ç»˜å›¾åŸºç¡€GDI+æ˜¯GDIçš„å¢å¼ºç‰ˆï¼Œæä¾›äº†æ›´ç°ä»£ã€æ›´å¼ºå¤§çš„ç»˜å›¾åŠŸèƒ½ã€‚GDIæ˜¯é¢å‘è¿‡ç¨‹çš„ï¼Œæœ‰ç‚¹OpenGLçŠ¶æ€æœºçš„å‘³é“ï¼Œè€ŒGDI+æ˜¯é¢å‘å¯¹è±¡çš„ã€‚\nåˆå§‹åŒ–ä¸æ¸…ç†åœ¨ä½¿ç”¨GDI+ä¹‹å‰éœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨å®Œä¹‹åè¿›è¡Œæ¸…ç†ï¼Œè¿™äº›æ“ä½œé€šå¸¸åœ¨ç¨‹åºå¯åŠ¨å’Œé€€å‡ºæ—¶è¿›è¡Œã€‚\n#include &lt;gdiplus.h&gt;using namespace Gdiplus;// åˆå§‹åŒ–GDI+ULONG_PTR gdiplusToken;GdiplusStartupInput gdiplusStartupInput;GdiplusStartup(&amp;gdiplusToken, &amp;gdiplusStartupInput, NULL);// ç¨‹åºé€€å‡ºæ—¶æ¸…ç†GDI+GdiplusShutdown(gdiplusToken);\n\nåŸºæœ¬ç»˜å›¾æ“ä½œ// åˆ›å»ºGraphicså¯¹è±¡ï¼ˆç›¸å½“äºDCï¼‰Graphics graphics(hdc);// å¼€å¯æŠ—é”¯é½¿graphics.SetSmoothingMode(SmoothingModeAntiAlias);graphics.SetTextRenderingHint(TextRenderingHintAntiAlias);// åˆ›å»ºç”»ç¬”å’Œç”»åˆ·Pen redPen(Color(255, 255, 0, 0), 2.0f);          // çº¢è‰²ç”»ç¬”ï¼Œå®½åº¦2SolidBrush blueBrush(Color(255, 0, 0, 255));      // è“è‰²ç”»åˆ·// ç»˜åˆ¶å›¾å½¢graphics.DrawLine(&amp;redPen, 10, 10, 100, 100);     // ç»˜åˆ¶ç›´çº¿graphics.DrawRectangle(&amp;redPen, 50, 50, 100, 80); // ç»˜åˆ¶çŸ©å½¢graphics.FillRectangle(&amp;blueBrush, 50, 50, 100, 80); // å¡«å……çŸ©å½¢graphics.DrawEllipse(&amp;redPen, 50, 50, 100, 80);   // ç»˜åˆ¶æ¤­åœ†// ç»˜åˆ¶æ–‡æœ¬Font font(L&quot;Arial&quot;, 16);SolidBrush blackBrush(Color(255, 0, 0, 0));graphics.DrawString(L&quot;Hello, GDI+!&quot;, -1, &amp;font, PointF(10, 10), &amp;blackBrush);// åˆ›å»ºçº¿æ€§æ¸å˜ç”»åˆ·LinearGradientBrush linGrBrush(    Point(0, 0),    Point(100, 0),    Color(255, 255, 0, 0),   // çº¢è‰²    Color(255, 0, 0, 255)     // è“è‰²);// ä½¿ç”¨æ¸å˜ç”»åˆ·ç»˜åˆ¶graphics.FillRectangle(&amp;linGrBrush, 0, 0, 100, 100);// åŠ è½½å’Œæ˜¾ç¤ºå›¾åƒImage image(L&quot;picture.jpg&quot;);graphics.DrawImage(&amp;image, 10, 10, image.GetWidth(), image.GetHeight());// å›¾åƒå˜æ¢graphics.RotateTransform(45.0f);  // æ—‹è½¬45åº¦graphics.DrawImage(&amp;image, 50, 50);graphics.ResetTransform();        // é‡ç½®å˜æ¢\n\nåŒç¼“å†²ï¼ˆGDI+ï¼‰åœ¨GDI+ä¸­ä»ç„¶éœ€è¦ä½¿ç”¨åŒç¼“å†²æŠ€æœ¯æ¥å‡å°‘é—ªçƒï¼Œæå‡ç»˜åˆ¶æ•ˆç‡ã€‚\n// GDI+åŒç¼“å†²å®ç°case WM_PAINT: &#123;    PAINTSTRUCT ps;    HDC hdc = BeginPaint(hWnd, &amp;ps);        // è·å–å®¢æˆ·åŒºå¤§å°    RECT rc;    GetClientRect(hWnd, &amp;rc);    int width = rc.right - rc.left;    int height = rc.bottom - rc.top;        // åˆ›å»ºå†…å­˜ä½å›¾    Bitmap buffer(width, height);    Graphics* memGraphics = Graphics::FromImage(&amp;buffer);        // åœ¨å†…å­˜ä¸­ç»˜åˆ¶    //...        // å¤åˆ¶åˆ°å±å¹•    Graphics screenGraphics(hdc);    screenGraphics.DrawImage(&amp;buffer, 0, 0);        // æ¸…ç†èµ„æº    delete memGraphics;        EndPaint(hWnd, &amp;ps);&#125;\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"ç»™è¿›ç¨‹ä¼ªé€ ä¸€ä¸ªçˆ¶äº²","url":"/post/2963045346.html","content":"ä¼ ç»Ÿçš„è¿›ç¨‹æ ‘æ¨¡å‹ä¸ä»…æ˜¯ç³»ç»Ÿç®¡ç†çš„å›¾è°±ï¼Œæ›´æ˜¯å®‰å…¨å®¡è®¡ä¸è°ƒæŸ¥çš„å…³é”®çº¿ç´¢ã€‚ç„¶è€Œï¼Œé€šè¿‡ç‰¹å®šçš„æŠ€æœ¯æ‰‹æ®µï¼Œä¸€ä¸ªè¿›ç¨‹å®Œå…¨å¯ä»¥â€œè®¤è´¼ä½œçˆ¶â€â€”â€”å°†å…¶çˆ¶è¿›ç¨‹ä¿¡æ¯ä¼ªè£…æˆå¦ä¸€ä¸ªåˆæ³•æˆ–é«˜æƒé™è¿›ç¨‹ï¼Œä»è€ŒéšåŒ¿è‡ªå·±çš„çœŸå®èµ·æºï¼Œé€ƒé€¸ç›‘æ§ï¼Œæ··æ·†ä¾¦æŸ¥è§†çº¿ã€‚è¿™ä¸ä»…æ˜¯æ”»å‡»è€…ç”¨äºè§„é¿æ£€æµ‹çš„æ–¹æ³•ï¼Œä¹Ÿä¸ºé˜²å¾¡æ–¹æ·±å…¥ç†è§£ç³»ç»Ÿåº•å±‚æœºåˆ¶æ‰“å¼€äº†å¦ä¸€æ‰‡çª—ã€‚æœ¬æ–‡å°†æ¢ç´¢è¿™é¡¹æŠ€æœ¯åœ¨ Windows ç³»ç»Ÿä¸‹çš„å®ç°åŸç†ã€‚\n\n\nè¯¥æŠ€æœ¯å®ç°èµ·æ¥å¹¶ä¸éš¾ã€‚é¦–å…ˆéœ€è¦é€‰æ‹©ä¸€ä¸ªæœ‰æƒé™æ‰“å¼€çš„è¿›ç¨‹ä½œä¸ºä¼ªçˆ¶è¿›ç¨‹ï¼Œæ¯”å¦‚ explorer.exeï¼Œç„¶åä½¿ç”¨ ProcThreadAttribute ç­‰ç³»åˆ—å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªå±æ€§åˆ—è¡¨ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸­çš„ PROC_THREAD_ATTRIBUTE_PARENT_PROCESS ä¿¡æ¯ã€‚æœ€ååœ¨åˆ›å»ºè¿›ç¨‹æ—¶ï¼Œè¿˜éœ€è¦æŒ‡å®š EXTENDED_STARTUPINFO_PRESENT æ ‡å¿—ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nè¯¦ç»†ä»£ç å¦‚ä¸‹ï¼š\n#include &lt;windows.h&gt;int main()&#123;\tHANDLE hFakeParent = NULL;\tLPPROC_THREAD_ATTRIBUTE_LIST pAttrList = NULL;\tdo\t&#123;\t\thFakeParent = OpenProcess(PROCESS_ALL_ACCESS, FALSE, 13244);\t\tif (!hFakeParent)\t\t\tbreak;\t\tSIZE_T attrBufferSize = 0;\t\t// å°†ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸ºNULLæ¥è·å–å±æ€§ç¼“å†²åŒºçš„å¤§å°\t\t// ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œä¼šå§‹ç»ˆè¿”å›å¤±è´¥ï¼Œè§MSDN\t\tInitializeProcThreadAttributeList(NULL, 1, 0, &amp;attrBufferSize);\t\tpAttrList = (LPPROC_THREAD_ATTRIBUTE_LIST)malloc(attrBufferSize);\t\tif (!pAttrList)\t\t\tbreak;\t\tif (!InitializeProcThreadAttributeList(pAttrList, 1, 0, &amp;attrBufferSize))\t\t\tbreak;\t\tif (!UpdateProcThreadAttribute(pAttrList, 0, PROC_THREAD_ATTRIBUTE_PARENT_PROCESS, &amp;hFakeParent, sizeof(HANDLE), NULL, NULL))\t\t\tbreak;\t\tSTARTUPINFOEXW si = &#123; sizeof(STARTUPINFOEXW) &#125;;\t\tsi.lpAttributeList = pAttrList;\t\tPROCESS_INFORMATION pi = &#123; 0 &#125;;\t\tWCHAR szCMD[] = &#123; L&quot;mspaint.exe&quot; &#125;;\t\tBOOL ret = CreateProcessW(NULL, szCMD, NULL, NULL, FALSE,\t\t\tEXTENDED_STARTUPINFO_PRESENT, // éœ€è¦æŒ‡å®šè¯¥æ ‡å¿—\t\t\tNULL,\t\t\tL&quot;C:\\\\Windows\\\\System&quot;, // éœ€è¦æŒ‡å®šä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œä¸èƒ½ä¼ NULLï¼Œå¦åˆ™ä¼šä½¿ç”¨å½“å‰è¿›ç¨‹çš„å·¥ä½œç›®å½•\t\t\t(LPSTARTUPINFOW)&amp;si, &amp;pi);\t\tif (!ret) &#123;\t\t\tstd::wcerr &lt;&lt; L&quot;CreateProcessW failed, error: &quot; &lt;&lt; GetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\tCloseHandle(pi.hThread);\t\tCloseHandle(pi.hProcess);\t&#125; while (false);\tif (hFakeParent) &#123;\t\tCloseHandle(hFakeParent);\t\thFakeParent = NULL;\t&#125;\tif (pAttrList) &#123;\t\tDeleteProcThreadAttributeList(pAttrList);\t\tfree(pAttrList);\t\tpAttrList = NULL;\t&#125;\treturn 0;&#125;\n\né€šè¿‡ä¸Šè¿°æ–¹å¼ä¼ªé€ çš„çˆ¶è¿›ç¨‹ IDï¼Œæ— è®ºæ˜¯åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œé€šè¿‡ NtQueryInformationProcess æŸ¥è¯¢ pbi.InheritedFromUniqueProcessIdï¼Œè¿˜æ˜¯åœ¨å†…æ ¸æ¨¡å¼ä¸‹ï¼Œé€šè¿‡_EPROCESS.InheritedFromUniqueProcessId æŸ¥è¯¢ï¼Œéƒ½æŒ‡å‘çš„æ˜¯ä¼ªçˆ¶è¿›ç¨‹ IDã€‚\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"å²é“ç”Ÿï¼šèŒä¸šäº‹ä¸šï¼ˆèŠ‚é€‰ï¼‰","url":"/post/1173742882.html","content":"é€‰æ‹©ä¸€é¡¹äº‹ä¸šï¼ˆæˆ–è€…æ‰¾ä¸€æ¡èƒ½å¤Ÿè½½æ¸¡ç²¾ç¥çš„èˆ¹ï¼‰çš„æ—¶å€™ï¼Œåº”è¯¥æƒ³èµ·å…µä¹¦ä¸Šçš„ä¸€å¥è¯ï¼šçŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†ã€‚æ²¡æœ‰è°æ˜¯ä¸ºäº†å¤±è´¥è€Œå·¥ä½œçš„ï¼Œå› ä¸ºæ³¨å®šçš„å¤±è´¥ä¸èƒ½å¼•å¯¼å‡ºä¸€ä¸ªå¦‚é†‰å¦‚ç—´çš„è¿‡ç¨‹ã€‚\næ‰€è°“çŸ¥å·±ï¼Œå°±æ˜¯è¦çŸ¥é“è‡ªå·±çš„å…´è¶£ä½•åœ¨ï¼Ÿè‡ªå·±çš„ç¦€èµ‹ä½•åœ¨ï¼Ÿå¦‚æœä½ å–œæ¬¢æ–‡å­¦ï¼Œå¯ä½ ååä¸è‚¯èˆå¼ƒä¸€ä¸ªå­¦åŒ–å­¦çš„æœºä¼šï¼Œä¸”ä¸è¯´æ²¡æœ‰å…´è¶£ä½ çš„åŒ–å­¦å¾ˆéš¾å­¦å¥½ï¼Œå³ä¾¿ä½ å°æœ‰æˆå°±é‚£ä¹Ÿæ˜¯ä½ çš„æ‚²å‰§ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªæ•°å­¦å¤©æ‰ï¼Œæ¯”å¦‚è¯´æ˜¯ä¸€ä¸ªæ½œåœ¨çš„é™ˆæ™¯æ¶¦ï¼Œå¯ä½ å¯¹æ­¤æ˜ç„¶ä¸çŸ¥åè¦å»å½“ä¸€ä¸ªå†™å°è¯´çš„ï¼Œç»“æœå¤šåŠä¸å¦™ã€‚\næ‰€è°“çŸ¥å½¼ï¼Œå°±æ˜¯å¾—çŸ¥é“å®¢è§‚æ¡ä»¶å…è®¸ä½ å¹²ä»€ä¹ˆã€‚å¦‚æœä½ çƒ­çˆ±èµ·è¶³çƒçš„æ—¶å€™å·²ç» 40 å¤šå²ï¼Œä½ æœ€å¥½å®‰å¿ƒä½œä¸€ä¸ªçƒè¿·ï¼Œåƒä¸‡åˆ«å­¦é©¬æ‹‰å¤šçº³äº†ã€‚å¦‚æœä½ ç¾¡æ…•ä¸‰æ¯›ï¼Œä½ ä¹Ÿæœ‰æ–‡å­¦æ‰èƒ½ï¼Œä½†æ˜¯ä½ çš„åŒè…¿ä¸€åŠ¨éƒ½ä¸èƒ½åŠ¨ï¼Œä½ å°±ä¸è¦å‘å¾€æ’’å“ˆæ‹‰ï¼Œä½ ä¸å¦‚å†™ä¸€å†™è‡ªå·±å¿ƒä¸­çš„æ²™æ¼ ã€‚\næˆ‘ä¸€è´¯ç›¸ä¿¡ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„æ‰€é•¿ï¼Œå€˜èƒ½æ‰¬é•¿é¿çŸ­è°éƒ½èƒ½æœ‰æ‰€ä½œä¸ºï¼›ç›¸åå¦‚æœå¼ƒé•¿å–çŸ­ï¼Œå¤©æ‰ä¹Ÿèƒ½æˆä¸ºè ¢æ‰ï¼Œä¸ä¿¡è®©é™ˆæ™¯æ¶¦ä¸æ‰˜å°”æ–¯æ³°è°ƒæ¢ä¸€ä¸‹å·¥ä½œè¯•è¯•çœ‹ã€‚å¯¹äº‹ä¸šçš„é€‰æ‹©ï¼Œè¦æ ¹æ®â€œçŸ¥å·±çŸ¥å½¼â€çš„åŸåˆ™ï¼Œå¯åˆ«ä¸ºâ€œçƒ­é—¨â€æˆ–æ—¶é«¦æ‰€å·¦å³ã€‚\n\n\nç„¶åè¿˜å¾—éœ€è¦ç‚¹å‹‡æ°”ï¼Œéœ€è¦å†’ä¸€ç‚¹é£é™©ï¼Œæ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½ä¿è¯ä½ è‚¯å®šæœ‰ä¸€æ¡é‡‘å…‰å¤§é“ã€‚æˆ‘å¼€å§‹æƒ³å†™ä½œçš„æ—¶å€™ï¼Œäººä»¬æé†’æˆ‘è¯´ï¼Œä½ å“ªå„¿éƒ½å»ä¸äº†ä¸èƒ½æ·±å…¥ç”Ÿæ´»ï¼Œä½ å‡­ä»€ä¹ˆèƒ½å¹²è¿™ä¸€è¡Œå‘¢ï¼Ÿæˆ‘è‡ªå·±å¿ƒé‡Œä¹Ÿæ‰“é¼“ã€‚å¯æ˜¯æˆ‘å¿ä¸ä½åœ°æƒ³å†™ã€‚æˆ‘æœ‰çº¸ä¹Ÿæœ‰ç¬”ï¼Œè¿˜æœ‰å¥½å¤šæƒ³æ³•ï¼Œåˆ«äººä¸€å¤©æœ‰ 24 å°æ—¶çš„ç”Ÿæ´»ï¼Œæˆ‘ä¸€å¤©ä¹Ÿæœ‰ 24 å°æ—¶çš„ç”Ÿæ´»ï¼Œæ‰€æœ‰çš„ç”Ÿæ´»ä¸€æ ·éƒ½æœ‰å“å‘³ä¸å°½çš„æ·±æ„ï¼Œæˆ‘å°±å·å·åœ°å†™äº†ä¸€ç‚¹ï¼Œè‡ªå·±è§‰å¾—è¿˜æœ‰å¸Œæœ›ï¼Œäºæ˜¯è±å‡ºå»äº†ï¼Œå†™ï¼å¦‚æœä½ çœ‹ä¸å‡ºä½ çš„é€‰æ‹©æœ‰ä»€ä¹ˆä¸å¯¹å¤´ï¼Œä½ å¾—è±å¾—å‡ºå»ï¼Œä½ å¾—æ•¢äºè¯•è¯•ï¼Œä¸€æ¡é“èµ°åˆ°é»‘æˆ–è€…ä¸æ’å—å¢™ä¸å›å¤´ã€‚å½“ç„¶é‚£æ—¶æˆ‘å·²ç»åœ¨è¡—é“ç”Ÿæ´»ç»„æŒ£ç€è‡ªå·±çš„é¥­é’±äº†ï¼Œæˆ‘æƒ³æˆ‘æœ€ä¸æµæ˜¯ä¸ª 0ï¼Œä¸ä¼šæ˜¯ä¸ªè´Ÿæ•°äº†ã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"èŠèŠæ¡Œé¢å®¢æˆ·ç«¯å¼€å‘çš„æŠ€æœ¯é€‰å‹","url":"/post/3110746169.html","content":"æ¡Œé¢å®¢æˆ·ç«¯ä¹Ÿå« PC å®¢æˆ·ç«¯ï¼Œæ¡Œé¢æ“ä½œç³»ç»Ÿï¼ˆå¦‚Windowsã€MacOSã€Ubuntu ç­‰ç³»ç»Ÿï¼‰ä¸Šçš„è½¯ä»¶éƒ½å¯ä»¥ç§°ä¸ºæ¡Œé¢å®¢æˆ·ç«¯è½¯ä»¶ï¼Œå®¢æˆ·ç«¯è½¯ä»¶çš„å¼€å‘æœ‰å¤šç§æŠ€æœ¯é€‰å‹æ–¹å¼ï¼Œè€Œä¸”æ¯ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚\né‡‡ç”¨ä¸åŒçš„æ–¹å¼é€šå¸¸ä¼šå¯¼è‡´åœ¨å¼€å‘å‘¨æœŸã€æŠ€æœ¯äººå‘˜æ‹›è˜ã€è½¯ä»¶æ€§èƒ½ã€å®‰è£…åŒ…ä½“ç§¯ç­‰æ–¹é¢æœ‰æ¯”è¾ƒå¤§çš„å·®åˆ«ã€‚æœ¬æ–‡ç»“åˆæˆ‘è¿™äº›å¹´çš„å®¢æˆ·ç«¯å¼€å‘ç»éªŒï¼ŒèŠä¸€èŠåœ¨å®¢æˆ·ç«¯å¼€å‘æ–¹é¢çš„å„ç§æŠ€æœ¯é€‰å‹ä»¥åŠä»–ä»¬çš„ä¼˜åŠ£ã€‚\n\n\næŠ€æœ¯æ–¹æ¡ˆæ±‡æ€»WinFormsWinFormsï¼ˆWindows Formsï¼‰æ˜¯å¾®è½¯æ¨å‡ºçš„ UI æ¡†æ¶ï¼Œå¯ä»¥ä½¿ç”¨ C# å’Œ Visual Basic ä½œä¸ºå¼€å‘è¯­è¨€ã€‚\nWinForms æ¡†æ¶é€‚åˆå¼€å‘ä¼ ç»Ÿ UI å…ƒç´ å’Œç•Œé¢çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚å·¥ä¸šã€åŒ»ç–—é¢†åŸŸçš„ç®¡ç†ã€æ§åˆ¶è½¯ä»¶ã€‚\n\n\nå½“ç„¶ï¼ŒWinForms ä¹Ÿèƒ½å¼€å‘å‡ºç»šä¸½ã€éæ ‡å‡†åŒ–çš„ç•Œé¢æ•ˆæœï¼Œä½†éœ€è¦èŠ±è´¹è¾ƒå¤šçš„æ—¶é—´ï¼Œå¯¹å¼€å‘äººå‘˜çš„æŠ€æœ¯è¦æ±‚ä¹Ÿæ›´é«˜ã€‚\n\nåŸºäº WinForms å¼€å‘çš„åº”ç”¨ç¨‹åºéœ€è¦ä¾èµ–.Net Framework è¿è¡Œæ—¶ï¼Œå¦‚æœç”¨æˆ·ç”µè„‘ä¸Šæœªå®‰è£….Net Framework è¿è¡Œæ—¶ï¼Œè½¯ä»¶å®‰è£…åŒ…éœ€è¦è‡ªå¸¦è¿è¡Œæ—¶ï¼Œå¹¶è‡ªåŠ¨ä¸ºç”¨æˆ·å®‰è£…ï¼Œå¦åˆ™ç¨‹åºä¼šæ— æ³•è¿è¡Œã€‚\nä½¿ç”¨ WinForms å¼€å‘çš„åº”ç”¨ç¨‹åºä½“ç§¯æœ¬èº«å¾ˆå°ï¼Œä½†ä¸ºäº†é€‚åº”ä¸åŒçš„ç”¨æˆ·ç”µè„‘ç¯å¢ƒï¼Œå®‰è£…åŒ…éœ€è¦æ£€æµ‹ç”¨æˆ·ç”µè„‘ä¸Šçš„.Net Framework è¿è¡Œæ—¶ç‰ˆæœ¬æ˜¯å¦ä¸è½¯ä»¶æ‰€éœ€ç‰ˆæœ¬åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…åˆ™éœ€è¦è‡ªåŠ¨å®‰è£…ç›¸åº”çš„.Net Framework è¿è¡Œæ—¶ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;.Net Framework å¾ˆéš¾åšæˆä¾¿æºç‰ˆï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨å¾®è½¯æä¾›çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£…ï¼Œå®‰è£….Net Framework è¿è¡Œæ—¶åˆ†ä¸ºåœ¨çº¿å’Œç¦»çº¿å®‰è£…ä¸¤ç§æ–¹å¼ï¼š\n\nç¦»çº¿å®‰è£…æ–¹å¼ã€‚å°†å¾®è½¯æä¾›çš„.Net Framework ç¦»çº¿å®‰è£…åŒ…ï¼ˆä¸åŒç‰ˆæœ¬ä½“ç§¯ä¸åŒï¼Œå¦‚ 4.8 ç‰ˆæœ¬çš„ç¦»çº¿å®‰è£…åŒ…çº¦ 115M å·¦å³ï¼‰æ‰“åŒ…è¿›ç¨‹åºå®‰è£…åŒ…ï¼Œå®‰è£…æ—¶è¿›è¡Œé‡Šæ”¾å’Œå®‰è£…ã€‚è¿™ç§æ–¹å¼ä¼šå¢åŠ ç¨‹åºå®‰è£…åŒ…çš„ä½“ç§¯ã€‚\nåœ¨çº¿å®‰è£…æ–¹å¼ã€‚å°†å¾®è½¯æä¾›çš„.Net Framework åœ¨çº¿å®‰è£…å·¥å…·ï¼ˆä½“ç§¯å¾ˆå°ï¼Œçº¦ 1.5M å·¦å³ï¼‰æ‰“åŒ…è¿›ç¨‹åºå®‰è£…åŒ…ï¼Œå®‰è£…æ—¶è¿›è¡Œé‡Šæ”¾å’Œåœ¨çº¿å®‰è£…ï¼Œè¿™ç§æ–¹å¼è™½ç„¶å¯ä»¥å‡å°‘å®‰è£…åŒ…ä½“ç§¯ï¼Œä½†åœ¨çº¿å®‰è£…éœ€è¦å®æ—¶ä»å¾®è½¯æœåŠ¡å™¨ä¸‹è½½èµ„æºï¼Œå—é™äºç”¨æˆ·ç½‘ç»œç¯å¢ƒï¼Œå¾ˆå¯èƒ½ä¼šå®‰è£…å¤±è´¥ã€‚\n\n1.1.1 .Net Framework ç‰ˆæœ¬å…¼å®¹æ€§åœ¨.Net Framework 4.5 ç‰ˆæœ¬ä¹‹å‰ï¼Œå…¶å„ä¸ªç‰ˆæœ¬ä¹‹é—´ä¸ç›¸äº’å…¼å®¹ï¼ˆæ— è®ºæ˜¯å‘å‰è¿˜æ˜¯å‘åéƒ½æ— æ³•å…¼å®¹ï¼‰ï¼Œä½†ä» 4.5 åŠä»¥åçš„ç‰ˆæœ¬å°±å¯ä»¥ä¿è¯å‘åå…¼å®¹äº†ã€‚\nä¸¾ä¾‹è¯´æ˜ï¼š\n\nå¦‚æœç¨‹åºä½¿ç”¨.Net Framework 3.5 ç‰ˆæœ¬å¼€å‘ï¼Œåˆ™åªèƒ½åŸºäºè¯¥ç‰ˆæœ¬çš„è¿è¡Œæ—¶è¿è¡Œã€‚\nå¦‚æœç¨‹åºä½¿ç”¨.Net Framework 4.6 ç‰ˆæœ¬å¼€å‘ï¼Œåˆ™ç”¨æˆ·ç”µè„‘ä¸Šåªéœ€è¦å®‰è£…&gt;=4.6 ç‰ˆæœ¬çš„è¿è¡Œæ—¶å³å¯è¿è¡Œã€‚\n\n1.1.2 ç³»ç»Ÿè‡ªå¸¦.Net Framework ç‰ˆæœ¬ä» Windows Vista å¼€å§‹ï¼ŒWindows ç³»ç»Ÿä¼šè‡ªå¸¦.Net Framework è¿è¡Œæ—¶ï¼Œä½†å„ä¸ªç³»ç»Ÿè‡ªå¸¦çš„è¿è¡Œæ—¶ç‰ˆæœ¬ä¸åŒã€‚\nä¸‹è¡¨åˆ—å‡ºäº†ä¸åŒç³»ç»Ÿè‡ªå¸¦çš„.Net Framework è¿è¡Œæ—¶çš„æœ€ä½ç‰ˆæœ¬ï¼š\n\nä¸ºä»€ä¹ˆæ˜¯æœ€ä½ç‰ˆæœ¬äº†ï¼Ÿå› ä¸ºç”¨æˆ·å¯èƒ½é€šè¿‡ç³»ç»Ÿå‡çº§çš„æ–¹å¼æ›´æ–°äº†.Net Framework è¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚\n\n\n\n\næ“ä½œç³»ç»Ÿ\n.Net Framework è¿è¡Œæ—¶ç‰ˆæœ¬\n\n\n\nWindows XP\n1.0\n\n\nWindows Vista\n2.0\n\n\nWindows 7\n3.5\n\n\nWindows 8\n4.5\n\n\nWindows 10\n4.6 ~ 4.7\n\n\nWindows 11\n4.8+\n\n\nä¸åŒç³»ç»Ÿæ‰€æ”¯æŒçš„.Net Framework æœ€é«˜ç‰ˆæœ¬ä¹Ÿæœ‰æ‰€ä¸åŒï¼š\n\nWindows XP æœ€é«˜æ”¯æŒ.NET Framework 4.0\nWindows 7 æœ€é«˜æ”¯æŒ.NET Framework 4.6.2\nWindows 8.1 æœ€é«˜æ”¯æŒ.NET Framework 4.6.2\nWindows 10 å’Œ Windows 11 å¯ä»¥æ”¯æŒä»»æ„ç‰ˆæœ¬çš„.NET Framework\n\n1.1.3 .Net Core\n.Net Core å®˜ç½‘ï¼š\nhttps://dotnet.microsoft.com/en-us/\n\n.Net Core æ˜¯å¾®è½¯å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„ï¼ˆæ”¯æŒ Windowsã€MacOSã€Linux ç­‰ç³»ç»Ÿï¼‰é€šç”¨è½¯ä»¶å¼€å‘æ¡†æ¶ã€‚åœ¨.Net Core å‡ºç°ä¹‹å‰ï¼Œå¼€å‘äººå‘˜åªèƒ½åŸºäº.Net Framwork å¼€å‘ WinForms åº”ç”¨ç¨‹åºï¼Œ.Net Core å‡ºç°ä¹‹åï¼Œå¼€å‘äººå‘˜å¤šäº†ä¸€ç§é€‰æ‹©ã€‚\n.Net Core ä¸.Net Framework æœ€å¤§çš„ä¸åŒåœ¨äº.Net Core æ˜¯å¼€æºå’Œè·¨å¹³å°çš„ï¼ŒåŸºäº.Net Core å¼€å‘çš„åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šï¼Œå¦‚ Windowsã€Linuxã€MacOSã€‚\n.Net Core è¿˜å¤„äºå¿«é€Ÿçš„æ›´æ–°è¿­ä»£ä¸­ï¼Œä¹‹å‰çš„è€ç‰ˆæœ¬å¯¹ WinForms åŠ WPF çš„æ”¯æŒä¸å¤ªå¥½ï¼ˆç”šè‡³ä¸æ”¯æŒï¼‰ï¼Œå»ºè®®é‡‡ç”¨æœ€æ–°ç‰ˆæœ¬çš„.Net Core è¿›è¡Œå¼€å‘ã€‚\nä½¿ç”¨.Net Core å¼€å‘çš„åº”ç”¨çš„ä½“ç§¯æœ¬èº«éå¸¸å°ï¼Œä½†åœ¨æ‰“åŒ…åˆ†å‘æ—¶ä¹Ÿéœ€è¦æºå¸¦.Net Core è¿è¡Œæ—¶ã€‚ä¸åŒäº.Net Frameworkï¼Œ.Net Core è¿è¡Œæ—¶æ—¢æ”¯æŒå®‰è£…åŒ…çš„æ–¹å¼ï¼Œä¹Ÿæ”¯æŒä¾¿æºç‰ˆçš„æ–¹å¼ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä»¥.Net Core 6.0 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œå¾®è½¯å®˜æ–¹æä¾›çš„ WindowsDesktop çš„è¿è¡Œæ—¶å¤§å°ä¸º 50Mï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç¨‹åºå®é™…ä¾èµ–æƒ…å†µï¼Œå®‰è£…åŒ…åªåŒ…å«ç¨‹åºä¾èµ–çš„æ–‡ä»¶ï¼Œä»è€Œç¼©å‡å®‰è£…åŒ…ä½“ç§¯ï¼ˆç¼©å‡åçº¦ 20M å·¦å³ï¼‰ã€‚\nWPFWPFï¼ˆWindows Presentation Foundationï¼‰ä¹Ÿæ˜¯å¾®è½¯æ¨å‡ºçš„ UI æ¡†æ¶ã€‚ä¸ WinForms ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ C#å’Œ Visual Basic è¯­è¨€è¿›è¡Œå¼€å‘ï¼ŒWPFä¹Ÿæ”¯æŒ.Net Framework å’Œ.Net Core ä¸¤ç§å¼€å‘å¹³å°ã€‚\nä½¿ç”¨ WPF æ¡†æ¶å¼€å‘çš„åº”ç”¨ç¨‹åºç•Œé¢æ›´åŠ ç‚«é…·ï¼Œç•Œé¢ç»„ä»¶å¯éšæ„å®šåˆ¶åŒ–ï¼Œé€‚åˆç”¨äºå¯¹ç•Œé¢è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ã€‚\nWPF ç¨‹åºçš„æ€§èƒ½ç¨é€Šä¸ WinForms åº”ç”¨ï¼Œä¸è¿‡è¿™ç§æ€§èƒ½å·®åˆ«åœ¨è®¡ç®—æœºç¡¬ä»¶æ€§èƒ½å¿«é€Ÿæå‡çš„ä»Šå¤©å·²åœ¨é€æ¸çš„è¢«æ·¡åŒ–ï¼Œå› æ­¤åœ¨è¿›è¡ŒæŠ€æœ¯é€‰å‹æ—¶åŸºæœ¬å¯ä»¥å¿½ç•¥çš„ WPF æ€§èƒ½é—®é¢˜äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒWPF åº”ç”¨åœ¨å¯åŠ¨æ—¶é€šå¸¸è¾ƒæ…¢ï¼Œæ¯”å¦‚ç”¨æˆ·æ‰“å¼€åº”ç”¨åéœ€è¦èŠ±è´¹å¤§æ¦‚ 1 ç§’å·¦å³çš„æ—¶é—´æ‰èƒ½çœ‹è§ä¸»ç•Œé¢ã€‚\nMFCMFCï¼ˆMicrosoft Foundation Classesï¼‰æ˜¯å¾®è½¯æä¾›çš„ä¸€ä¸ªåŸºç¡€ç±»åº“ï¼Œå¯¹ Windows ç³»ç»Ÿ API è¿›è¡Œäº†å°è£…ï¼ŒåŒ…å«ä¸€äº›åŸºç¡€æ§ä»¶ï¼Œä»è€Œå‡å°‘åº”ç”¨å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚MFC åº”ç”¨ç¨‹åºçš„å¼€å‘è¯­è¨€ä¸º C++ï¼ŒMFC æä¾›çš„æ§ä»¶éƒ½æ˜¯å¸¸è§„çš„ Windows é£æ ¼ï¼Œå’Œ WinForms ä¸€æ ·ï¼Œå¦‚æœéœ€è¦å¼€å‘ç‚«ä¸½ã€äº¤äº’å¤æ‚çš„ç•Œé¢ï¼Œéœ€è¦å¼€å‘äººå‘˜èŠ±è´¹ç²¾åŠ›è‡ªå·±ç»˜åˆ¶ï¼Œä¼šé™ä½ä¸å°‘å¼€å‘æ•ˆç‡ã€‚\nMFC æ¯”è¾ƒé€‚åˆåº”ç”¨åœ¨å¯¹è½¯ä»¶æ€§èƒ½è¦æ±‚è¾ƒé«˜ã€è°ƒç”¨ç³»ç»Ÿ API è¾ƒå¤šã€ç•Œé¢äº¤äº’è¾ƒç®€å•çš„è½¯ä»¶ä¸Šã€‚\n\nå°çŸ¥è¯†ï¼šMFCåˆè¢«æˆç§°ä¸ºâ€œéº»çƒ¦Câ€ï¼Œå¤§æŠµæ˜¯å› ä¸ºç”¨å®ƒå¼€å‘ç•Œé¢æ¯”è¾ƒéº»çƒ¦å§ã€‚\n\nDirectUIDirectUI æ˜¯ä¸€ç±»æŠ€æœ¯çš„ç»Ÿç§°ï¼Œå³ Paint on parent dc directlyï¼Œç›´æ¥åœ¨çˆ¶çª—ä½“ä¸Šè¿›è¡Œç»˜åˆ¶ã€‚è¯¥æŠ€æœ¯æ˜¯å¯¹ MFC çš„ä¸€ç§æ”¹è¿›ï¼Œä½¿ç”¨DirectUIå¼€å‘çš„ç•Œé¢ï¼Œæ•´ä¸ªçª—å£åªæœ‰ä¸€ä¸ªå¥æŸ„ï¼Œè€Œä¸æ˜¯åƒ MFC ä¸€æ ·ï¼Œæ¯ä¸ªæ§ä»¶éƒ½æœ‰ä¸€ä¸ªå¥æŸ„ã€‚\nç›®å‰æµè¡Œçš„ DirectUI ç•Œé¢åº“å¤§å¤šç”±ä¸ªäººå¼€å‘å¹¶å¼€æºï¼Œç”±äºæ²¡æœ‰ä¸“é—¨çš„å›¢é˜Ÿè¿›è¡Œç»´æŠ¤ï¼Œå› æ­¤ä½¿ç”¨è¯¥ç±»ç•Œé¢åº“çš„å…¬å¸é€šå¸¸éœ€è¦è‡ªå·±ç»´æŠ¤ä¸€ä¸ªåˆ†æ”¯è¿›è¡Œ Bug ä¿®å¤å’Œæ·»åŠ æ–°åŠŸèƒ½ã€‚\nå¸¸ç”¨çš„ DirectUI ç•Œé¢åº“æœ‰ï¼š\n\nduilib ä½œè€…å·²åŸºæœ¬ä¸ç»´æŠ¤ã€‚\nDuiLib_Ultimate å…¶ä»–äººç»´æŠ¤çš„ä¸€ä¸ª duilib ç‰ˆæœ¬ã€‚\nGacUI\nâ€¦â€¦\n\nå»ºè®®é€‰æ‹©å…¬å¸æŠ€æœ¯äººå‘˜æ¯”è¾ƒç†Ÿæ‚‰çš„DirectUIåº“ï¼Œæœ€å¥½èƒ½ç†Ÿæ‚‰æºç ï¼Œå¯ä»¥è¿›è¡Œ Bug ä¿®å¤å’ŒåŠŸèƒ½å®šåˆ¶å¼€å‘ã€‚\nDirectUI ç•Œé¢åº“é€šå¸¸éƒ½æ˜¯è½»é‡çº§çš„ï¼Œå› æ­¤å…¶å¼€å‘çš„åº”ç”¨ç¨‹åºä½“ç§¯éƒ½ä¼šæ¯”è¾ƒå°ã€‚\nQtQt æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ C++å›¾åƒç•Œé¢å¼€å‘æ¡†æ¶ï¼Œä¸ä»…æ”¯æŒ Windowsã€MacOSã€Linux ç­‰ PC æ“ä½œç³»ç»Ÿï¼Œè¿˜æ”¯æŒåµŒå…¥å¼ QNXã€VxWorks åŠ Androidã€iOS ç­‰æ“ä½œç³»ç»Ÿã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;Qt çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿çš„ C++ å›¾åƒç•Œé¢æ¡†æ¶ã€‚Qt åº”ç”¨ç¨‹åºçš„å¼€å‘è¯­è¨€ä¸º C++ï¼ŒQt æ¯” MFC ä¸Šæ‰‹æ›´å¿«ï¼Œè€Œä¸”åœ¨æ§ä»¶å®šåˆ¶ã€ UI ç»˜åˆ¶ä¸Šä¹Ÿæ¯” MFC æ–¹ä¾¿ã€‚\n\nä»¥ Qt 5.15.2 ç‰ˆæœ¬ä¸ºä¾‹ï¼ŒQt åº”ç”¨ç¨‹åºæ‰“åŒ…åçš„ä½“ç§¯æœ€å°åˆ° 6MB å·¦å³ï¼Œå¦‚æœä½¿ç”¨æ›´è€ç‰ˆæœ¬çš„ Qtï¼Œä½“ç§¯è¿˜å¯ä»¥æ›´å°ã€‚\n1.5.1 Qt ç‰ˆæƒé—®é¢˜Qt åˆ†ä¸ºå¼€æºç‰ˆæœ¬å’Œå•†ä¸šç‰ˆæœ¬ï¼Œå¼€æºç‰ˆæœ¬å¯ä»¥å…è´¹ä½¿ç”¨ï¼Œå•†ä¸šç‰ˆæœ¬éœ€è¦ä»˜è´¹æ‰èƒ½ä½¿ç”¨ã€‚\nå¼€æºç‰ˆæœ¬æ—¢å¯ä»¥å…è´¹ä½¿ç”¨ä¹Ÿå¯ä»¥ç”¨äºå•†ä¸šç”¨é€”ï¼Œä½†éœ€è¦éµå®ˆç›¸åº”çš„è§„åˆ™ã€‚Qtä¸­çš„å¤§å¤šæ•°æ¨¡å—é‡‡ç”¨LGPLå¼€æºåè®®ï¼Œå°‘éƒ¨åˆ†æ¨¡å—é‡‡ç”¨çš„æ˜¯GPLåè®®ï¼Œåœ¨å¼€å‘å•†ä¸šè½¯ä»¶æ˜¯æˆ‘ä»¬åº”é€‰æ‹©LGPLåè®®çš„æ¨¡å—ï¼Œå¹¶é‡‡ç”¨QtåŠ¨æ€é“¾æ¥åº“çš„æ–¹å¼ï¼ˆè€Œä¸æ˜¯é™æ€åº“çš„æ–¹å¼ï¼‰ã€‚\n\nå¯¹åº”æœ‰äº›å¿…é¡»é™æ€é“¾æ¥çš„æ¨¡å—ï¼Œå¦‚QtMainï¼ŒQté‡‡ç”¨BSDåè®®ï¼Œå…è®¸åœ¨å•†ä¸šè½¯ä»¶ä¸­ä½¿ç”¨ã€‚\n\næ…ç”¨é‡‡ç”¨GPLåè®®çš„æ¨¡å—ï¼Œè¯¥åè®®å…·æœ‰ä¼ æŸ“æ€§ï¼Œå®ƒè¦æ±‚æ‰€æœ‰ä½¿ç”¨è¿™äº›æ¨¡å—çš„è½¯ä»¶éƒ½è¦å¼€æºï¼Œå› æ­¤è¦æ…ç”¨GPLåè®®çš„æ¨¡å—ã€‚\nå¯ä»¥åœ¨ https://www.qt.io/product/features ç½‘ç«™æŸ¥è¯¢Qtæ¨¡å—å¯¹åº”çš„å¼€æºåè®®ã€‚\nå¦å¤–å¦‚æœæœ‰å¯¹ Qt æºç è¿›è¡Œä¿®æ”¹ï¼Œéœ€è¦å…¬å¸ƒä¿®æ”¹éƒ¨åˆ†çš„æºç ã€‚\n1.5.2 Qt ç‰ˆæœ¬é€‰æ‹©Qt 5.6ç‰ˆæœ¬æ˜¯Qtæœ€åä¸€ä¸ªæ”¯æŒWindows XPçš„ç‰ˆæœ¬ï¼Œè€ŒQt 6 ä¹Ÿä¸å†æ”¯æŒWindows 7åŠå…¶ä»¥ä¸‹çš„ç‰ˆæœ¬ã€‚\nå¦å¤–ï¼Œä»Qt 6ç‰ˆæœ¬å¼€å§‹ï¼Œå®˜æ–¹ä¸åœ¨æä¾›32ä½çš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\nCEF\nCEF å®˜ç½‘ï¼š\nhttps://bitbucket.org/chromiumembedded/cef/wiki/Homeã€‚\n\nCEFï¼ˆChromium Embedded Framework ï¼‰æ˜¯ Google å…¬å¸å¼€å‘çš„ä¸€ä¸ªè·¨å¹³å°çš„æµè§ˆå™¨å†…æ ¸æ¡†æ¶ï¼ˆå·ç§°ä¸ Chrome æµè§ˆå™¨ä¸ºåŒä¸€å†…æ ¸ï¼‰ï¼Œä»¥å¼€æºåº“çš„æ–¹å¼æä¾›ï¼Œå¯ä»¥å†…åµŒåˆ°ç¬¬ä¸‰æ–¹ç¨‹åºä¸­ç”¨äºæ˜¾ç¤ºç½‘é¡µä»¥åŠä¸ç½‘é¡µè¿›è¡Œäº¤äº’ã€‚\nCEF è‡ªèº«ä¸»è¦ä½¿ç”¨ C++è¿›è¡Œå¼€å‘ï¼Œç›®å‰ä¹Ÿæœ‰ CEF çš„å…¶ä»–è¯­è¨€çš„ç»‘å®šï¼Œæ¯”å¦‚ CefSharp å°±æ˜¯ C# çš„ç»‘å®šã€‚å› æ­¤åŸºäº CEF æŠ€æœ¯æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ C++ã€C#æˆ–å…¶ä»–è¯­è¨€ä½œä¸ºå¼€å‘è¯­è¨€ï¼Œä½†æ®æˆ‘äº†è§£å¤§å¤šä½¿ç”¨çš„è¿˜æ˜¯ C++ã€‚\nåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æ¥ä½¿ç”¨ CEFï¼Œè€Œæ˜¯è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œå°†å…¶å°è£…æˆç»„ä»¶ï¼Œè¯¥ç»„ä»¶ç”¨äºæ‰“å¼€ Web é¡µé¢ï¼Œç”± Web é¡µé¢è´Ÿè´£ç•Œé¢äº¤äº’ï¼Œå¹¶é€šè¿‡Javascript å’Œ C++æˆ– C#äº¤äº’ã€‚\nCEF è™½ç„¶æ˜¯ä½œä¸ºä¸€ä¸ªåº“æ¥æä¾›çš„ï¼Œä½†å…¶æ¥å£å´åŠå…¶å¤æ‚éš¾ç”¨ï¼ˆåƒä¸€å¨å±ä¸€æ ·ï¼‰ï¼Œç›®å‰è¿˜æ²¡æœ‰ä¸€ä¸ªå¯¹å…¶å°è£…çš„æ¯”è¾ƒå¥½çš„åº“ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±ç¡¬ç€å¤´çš®å°è£…çš„ QCefWidget ä¹Ÿä¸æ˜¯é‚£ä¹ˆå®Œå–„ï¼Œä¹Ÿæœ‰ä¸€äº›å°é—®é¢˜ã€‚\nCEF ç»å†äº† CEF1 å’Œ CEF3 ä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼ŒCEF1 ç°å·²åŸºæœ¬è¢«æ·˜æ±°ï¼Œç›®å‰ä¸»æµçš„æ˜¯ CEF3ï¼ˆCEF 2623 ç‰ˆæœ¬æ˜¯æœ€åä¸€ä¸ªæ”¯æŒ Windows XP çš„ç‰ˆæœ¬ï¼‰ã€‚\nç”±äºç‰ˆæƒé—®é¢˜ï¼ŒCEF é»˜è®¤ä¸æ”¯æŒ MP4 è§£ç ï¼Œå¦‚éœ€æ”¯æŒï¼Œéœ€è¦è‡ªè¡Œä¸‹è½½æºç è¿›è¡Œç¼–è¯‘ï¼ˆè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šè€—æ—¶ 1 å¤©å·¦å³ï¼‰ã€‚\n\näº¦å¯ä»¥ä½¿ç”¨æˆ‘ç¼–è¯‘å¥½çš„CEFï¼šhttps://github.com/winsoft666/cef_binary\n\né‡‡ç”¨ CEF å†…åµŒ Web é¡µé¢çš„æ–¹å¼ï¼Œè™½ç„¶å¯ä»¥å€ŸåŠ© Web å¼€å‘çš„ä¼˜åŠ¿ï¼Œæå¤§æå‡è½¯ä»¶å¼€å‘æ•ˆç‡ï¼ŒWeb é¡µé¢æ›´æ–°èµ·æ¥ä¹Ÿæ¯”å®¢æˆ·ç«¯çš„å‡çº§æ›´åŠ æ–¹ä¾¿ï¼Œä½†ç”±äºå…¶æœ¬è´¨è¿˜æ˜¯å®¢æˆ·ç«¯å†…åµŒæµè§ˆå™¨ï¼Œå› æ­¤è½¯ä»¶å†…å­˜å ç”¨ä¼šæ¯”è¾ƒé«˜ï¼Œé€šå¸¸ä¸€ä¸ªç®€å•çš„ç¨‹åºå¯èƒ½ä¼šå ç”¨ 100MB å·¦å³å†…å­˜ã€‚åœ¨æ€§èƒ½æ–¹é¢ï¼Œä¹Ÿè¿œè¿œä¸åŠä¸Šé¢ä»‹ç»çš„å…¶ä»–åŸç”Ÿå¼€å‘æ–¹å¼ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;CEF ä¸åŒç‰ˆæœ¬çš„ä½“ç§¯å·®è·è¾ƒå¤§ï¼Œ2623 ç‰ˆæœ¬å‹ç¼©åå¤§çº¦ 25MBï¼Œè€Œ 89.0.18 ç‰ˆæœ¬å‹ç¼©åå¤§çº¦ 60MBã€‚ä¸åŒç‰ˆæœ¬å¯¹ Web æ–°ç‰¹æ•ˆçš„æ”¯æŒç¨‹åº¦ä¸åŒï¼Œåœ¨ä¸åœ¨ä¹å®‰è£…åŒ…ä½“ç§¯çš„æƒ…å†µä¸‹å¯ä»¥é€‰æ‹©æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœéœ€è¦è€ƒè™‘å®‰è£…åŒ…ä½“ç§¯ï¼Œåˆ™éœ€è¦åšå‡ºæƒè¡¡ã€‚\né‡‡ç”¨è¯¥æŠ€æœ¯æ–¹æ¡ˆéœ€è¦ç”± Web å¼€å‘è€…å¼€å‘å®¢æˆ·ç«¯å†…åµŒé¡µé¢ï¼ŒC++å¼€å‘è€…å¼€å‘å®¢æˆ·ç«¯ä¸»ä½“æ¡†æ¶ã€‚ç”±äº Web é¡µé¢æ— æ³•ç›´æ¥è®¿é—®ç³»ç»Ÿèµ„æºï¼Œå› æ­¤è¿˜éœ€ Web ä¸ C++è¿›è¡Œäº¤äº’ï¼Œå¹¶ç”± C++å®Œæˆç³»ç»ŸåŠŸèƒ½çš„å¼€å‘ã€‚\nMicrosoft WebView2å¾®è½¯åŸºäº Chromium å¼€æºé¡¹ç›®å¼€å‘äº†Edgeæµè§ˆå™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† WebView2 ç»„ä»¶ï¼ŒåŸºäºè¯¥ç»„ä»¶å¯ä»¥å®ç°åœ¨å®¢æˆ·ç«¯ä¸­åµŒå…¥Webé¡µé¢ï¼Œå®ç° JavaScript å’Œæœ¬åœ°ç¨‹åºçš„ç›¸äº’è°ƒç”¨ã€‚\nWebView2 ç»„ä»¶æ”¯æŒ Windows7 åŠä»¥ä¸Šå¹³å°ï¼Œä½† Windows7 ç³»ç»Ÿè‚¯å®šæ˜¯æ²¡æœ‰è‡ªå¸¦è¯¥ç»„ä»¶çš„ï¼Œéœ€è¦å•ç‹¬ä¸‹è½½å®‰è£…ã€‚å¦‚æœç”¨æˆ·æœ‰æ›´æ–°è¿‡ Windows 10ã€11ç³»ç»Ÿï¼Œå¾ˆå¯èƒ½ç³»ç»Ÿå·²é›†æˆç»„ä»¶ï¼Œä¸éœ€è¦é¢å¤–ä¸‹è½½å®‰è£…ã€‚\nMicrosoft WebView2 çš„æ¥å£ä½¿ç”¨èµ·æ¥æ¯” CEF èˆ’çˆ½å¤šäº†ã€‚\nElectronå‰é¢æåˆ°ä½¿ç”¨ CEF æ—¶éœ€è¦äºŒæ¬¡å°è£…ï¼Œè€Œ CEF çš„æ¥å£åˆä¸æ˜¯é‚£ä¹ˆæ˜“äºä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç¨³å®šè¿è¡Œçš„ CEF ç»„ä»¶éœ€è¦èŠ±è´¹ä¸å°‘æ—¶é—´ã€‚Electron åˆ™æ˜¯åŸºäº CEF è¿›è¡Œäº†æ·±å±‚æ¬¡çš„å°è£…ï¼ŒElectron ç›¸æ¯”è‡ªå·±å°è£… CEF ä¼šæ›´åŠ ç¨³å®šï¼Œè¿˜å¯ä»¥èŠ‚çœå¼€å‘å’ŒåæœŸç»´æŠ¤çš„æ—¶é—´ã€‚\nElectron å’Œ CEF æœ€å¤§çš„ä¸åŒä¹‹å¤„æ˜¯ Electron å¯ä»¥ç›´æ¥è°ƒç”¨ Node.js çš„æ¨¡å—ï¼Œå¦‚æ–‡ä»¶ã€ç³»ç»Ÿã€ç½‘ç»œç­‰æ¨¡å—ï¼ŒåŸºäºè¿™äº›æ¨¡å—ï¼Œç†è®ºä¸Šå¯ä»¥ä½¿ç”¨ JavaScript å®Œæˆå®¢æˆ·ç«¯åº”ç”¨çš„å¼€å‘ï¼Œä½†è¿™ä¹Ÿä»…é™äºç†è®ºä¸Šï¼Œå®é™…ä¸Šå¤§å¤šæ•°çš„ Web å¼€å‘è€…ç¼ºå°‘å®¢æˆ·ç«¯è½¯ä»¶å¼€å‘ç»éªŒï¼Œç”šè‡³ç¼ºå°‘ç³»ç»Ÿæ–¹é¢çš„ç†è®ºåŸºç¡€ï¼Œå› æ­¤å¾ˆéš¾å®Œå…¨ä¾é  Web å¼€å‘è€…å¼€å‘å‡ºåŠŸèƒ½å®Œå¤‡çš„å®¢æˆ·ç«¯è½¯ä»¶ã€‚\nåŸºäº Electron å¼€å‘å®¢æˆ·ç«¯æ—¶ï¼Œå¤§å¤šæ•°æ—¶å€™è¿˜éœ€è¦ C++å¼€å‘è€…å¼€å‘ Node æ¨¡å—æ¥ä¾› JavaScript è°ƒç”¨ã€‚\nå…¶ä»–å›¾åƒç•Œé¢åº“é™¤äº†ä¸Šé¢ä»‹ç»çš„æ–¹æ¡ˆï¼Œè¿˜è¦å¾ˆå¤šå…¶ä»–çš„ä¼˜ç§€ç•Œé¢åº“ï¼Œè¿™äº›åº“å„æœ‰ç‰¹è‰²ï¼Œç›®å‰å®ƒä»¬çš„ä½¿ç”¨è€…è¿˜æ²¡æœ‰ä¸Šé¢çš„å¤šã€‚\nä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›æˆ‘æ‰€çŸ¥é“çš„ä¼˜ç§€ç•Œé¢åº“ï¼Œæ¬¢è¿è¡¥å……ï¼š\n\nRmlUi\nyue\nelements\nimgui\nâ€¦â€¦\n\né€‰å‹å»ºè®®åœ¨è¿›è¡ŒæŠ€æœ¯é€‰å‹æ—¶ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘å®¢æˆ·ç«¯éœ€è¦æ”¯æŒçš„ç³»ç»Ÿç¯å¢ƒã€å®‰è£…åŒ…å¤§å°ã€ç•Œé¢æ•ˆæœã€åŠ¨ç”»æ€§èƒ½ã€ç³»ç»ŸåŠŸèƒ½çš„æ•°é‡ã€å¼€å‘å‘¨æœŸã€æŠ€æœ¯äººå‘˜å‚¨å¤‡ç­‰å› ç´ ï¼Œé€šå¸¸æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆã€‚\nä¸‹é¢æ ¹æ®å‡ ç§å¸¸è§çš„æƒ…å†µï¼Œç»™å‡ºäº†ä¸€ç‚¹ç‚¹å»ºè®®ï¼Œä»…ä¾›å‚è€ƒã€‚\n\nå¦‚æœç¨‹åºåªéœ€è¦æ”¯æŒ Windows å¹³å°ï¼Œå¯¹å®‰è£…åŒ…å¤§å°ä¸æ•æ„Ÿï¼Œå¼€å‘å‘¨æœŸæƒ³è¦å°½å¯èƒ½ç¼©çŸ­ï¼Œå¯ä»¥é€‰æ‹©çš„æ¯”è¾ƒå¤šï¼Œå¦‚ Microsoft WebView2ã€ WinFormsã€ WPFã€CEF ç­‰ã€‚\n\nå¦‚æœç¨‹åºåªéœ€è¦æ”¯æŒ Windows å¹³å°ï¼Œå¯¹å®‰è£…åŒ…å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼Œå¼€å‘æ—¶é—´å……è£•å¯ä»¥é€‰æ‹©åŸç”Ÿå¼€å‘ MFCã€DirectUIã€Qtï¼Œæƒ³åŠ å¿«å¼€å‘è¿›åº¦å¯ä»¥ä½¿ç”¨ç½‘é¡µå¼€å‘ Microsoft WebView2ã€‚\n\nå¦‚æœç¨‹åºåªéœ€è¦æ”¯æŒ Windows å¹³å°ï¼Œå¯¹å®‰è£…åŒ…å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼Œç•Œé¢æ•ˆæœè¦æ±‚è¾ƒé«˜ï¼Œå¼€å‘å‘¨æœŸæƒ³è¦å°½å¯èƒ½ç¼©çŸ­ï¼Œå¯ä»¥é€‰æ‹© Microsoft WebView2ã€‚\n\nå¦‚æœç¨‹åºåªéœ€è¦æ”¯æŒ Windows å¹³å°ï¼Œå¯¹å®‰è£…åŒ…å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼ŒåŠŸèƒ½ä»¥ç³»ç»ŸåŠŸèƒ½ä¸ºä¸»ï¼Œå¯ä»¥é€‰æ‹© MFCã€DirectUIã€Qtã€‚\n\nå¦‚æœç¨‹åºéœ€è¦æ”¯æŒ Windowsã€macOS å¹³å°ï¼Œå¯¹å®‰è£…åŒ…å¤§å°ä¸æ•æ„Ÿï¼Œå¼€å‘å‘¨æœŸæƒ³è¦å°½å¯èƒ½ç¼©çŸ­ï¼Œé€‰æ‹© Electronã€‚\n\nå¦‚æœç¨‹åºéœ€è¦æ”¯æŒ Windowsã€macOS å¹³å°ï¼Œå¯¹å®‰è£…åŒ…å¤§å°æ¯”è¾ƒæ•æ„Ÿï¼Œé€‰æ‹© Qtã€‚\n\nå¦‚æœç¨‹åºéœ€è¦æ”¯æŒå›½äº§ç³»ç»Ÿï¼ˆå¦‚éº’éºŸç³»ç»Ÿã€ç»Ÿä¿¡ç³»ç»Ÿç­‰ï¼‰ï¼Œå¯èƒ½åªèƒ½é€‰æ‹© Qt äº†ï¼Œå› ä¸º Electronã€.Net Core ç­‰æ¡†æ¶å¯èƒ½è¿˜æœªå¯¹è¿™äº›ç³»ç»Ÿè¿›è¡Œå®Œå…¨é€‚é…ï¼Œéœ€è¦è‡ªå·±å»å¡«å‘ï¼Œè€Œä¸”è¿˜éœ€è¦è€ƒè™‘æ˜¯å¦åœ¨ä¿¡åˆ›ç™½åå•ä¸­ã€‚\n\n\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"è·å–å…¶ä»–è¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°","url":"/post/3666245140.html","content":"æœ¬æ–‡ä»‹ç»å¦‚ä½•æ ¹æ®è¿›ç¨‹ ID è·å–è¿›ç¨‹å‘½ä»¤è¡Œå‚æ•°ï¼Œä½¿ç”¨ Windows NTDLL æä¾›çš„æœªå…¬å¼€ API å®ç°ã€‚\n\n\nç”±äºéœ€è¦ä½¿ç”¨åˆ° Windows åº”ç”¨å±‚æœªå…¬å¼€çš„ APIï¼Œè€Œä¸”è¿™äº› API åœ¨ Windows å¤´æ–‡ä»¶ä¸­æœªæä¾›å‡½æ•°å®šä¹‰ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ GetProcessAddress åŠ¨æ€åœ°ä» ntdll.dll ä¸­è·å–å‡½æ•°åœ°å€ã€‚\nåŠ¨æ€è·å–å‡½æ•°åœ°å€æœ¬ä¸æ˜¯ä¸€ä»¶å›°éš¾çš„äº‹æƒ…ï¼Œä½†æ˜¯å½“æ¶‰åŠè°ƒç”¨å‡½æ•°æ¯”è¾ƒå¤šæ—¶ï¼Œè¿™ä¸ªæ“ä½œå°±æ˜¾å¾—æ¯”è¾ƒç¹çäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„åº“æ¥ç®€åŒ–ä¸Šè¿°æ“ä½œã€‚https://github.com/winsoft666/ntdll\nä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ntdllåº“æ¥æ ¹æ®è¿›ç¨‹ ID è·å–è¿›ç¨‹å‘½ä»¤è¡Œå‚æ•°ã€‚\né¦–å…ˆéœ€è¦åŒ…å«å¤´æ–‡ä»¶ï¼š\n#include &quot;ntdll.h&quot;\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¹¶å¼•å…¥å¯¹åº” libï¼šx86\\ntdll.libæˆ–x64\\ntdll.libã€‚\næ‹¿å»ç”¨å§å…·ä½“è·å–å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼å·²å°è£…åˆ°ä¸‹é¢GetProcessCommandLineå‡½æ•°ï¼Œæ–¹ä¾¿è¯»è€…é£Ÿç”¨ã€‚\n// è¿”å›å€¼ä¸º0è¡¨ç¤ºæˆåŠŸDWORD GetProcessCommandLine(unsigned int pid, std::wstring&amp; strResult) &#123;    BOOL result = false;    SetLastError(0);    HANDLE hProcess = NULL;    PPEB ppebCopy = NULL;    PRTL_USER_PROCESS_PARAMETERS pRtlProcParamCopy = NULL;    PWSTR wBufferCopy = NULL;    do    &#123;        hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);        if (!hProcess)            break;        PROCESS_BASIC_INFORMATION basicInfo;        ZeroMemory(&amp;basicInfo, sizeof(PROCESS_BASIC_INFORMATION));        NTSTATUS status = NtQueryInformationProcess(hProcess,            ProcessBasicInformation,            &amp;basicInfo,            sizeof(PROCESS_BASIC_INFORMATION),            NULL);        if (!NT_SUCCESS(status))            break;        PPEB ppeb = basicInfo.PebBaseAddress;        ppebCopy = (PPEB)malloc(sizeof(PEB));        if (!ppebCopy)            break;        result = ReadProcessMemory(hProcess,            ppeb,            ppebCopy,            sizeof(PEB),            NULL);        if (!result)            break;        PRTL_USER_PROCESS_PARAMETERS pRtlProcParam = ppebCopy-&gt;ProcessParameters;        pRtlProcParamCopy = (PRTL_USER_PROCESS_PARAMETERS)malloc(sizeof(RTL_USER_PROCESS_PARAMETERS));        if (!pRtlProcParamCopy)            break;        result = ReadProcessMemory(hProcess,            pRtlProcParam,            pRtlProcParamCopy,            sizeof(RTL_USER_PROCESS_PARAMETERS),            NULL);        if (!result)            break;        PWSTR wBuffer = pRtlProcParamCopy-&gt;CommandLine.Buffer;        USHORT len = pRtlProcParamCopy-&gt;CommandLine.Length;        wBufferCopy = (PWSTR)malloc(len + 2);        if (!wBufferCopy)            break;        memset(wBufferCopy, 0, len + 2);        result = ReadProcessMemory(hProcess,            wBuffer,            wBufferCopy, // command line goes here            len,            NULL);        if (result)            strResult = wBufferCopy;    &#125; while (false);    DWORD dwGLE = 0;    if (!result) &#123;        dwGLE = GetLastError();    &#125;    if (ppebCopy)        free(ppebCopy);    if (pRtlProcParamCopy)        free(pRtlProcParamCopy);    if (wBufferCopy)        free(wBufferCopy);    if (hProcess)        CloseHandle(hProcess);    return dwGLE;&#125;\n","categories":["â‘¤Windowså¼€å‘ä¸è°ƒè¯•ç§˜ç±"]},{"title":"åŸºäºJoplinå’ŒWebDAVæ­å»ºç§æœ‰äº‘ç¬”è®°","url":"/post/2173106656.html","content":"æœ¬æ–‡ä»‹ç»å¦‚ä½•è‡ªå·±æ­å»ºJoplinäº‘ç¬”è®°ã€‚\n\n\nç§æœ‰Dockeræ­å»ºWebDAVæœåŠ¡ä»æˆ‘çš„Githubä¸Šä¸‹è½½WebDAVçš„Dockeré…ç½®æ–‡ä»¶ï¼š\ngit clone https://github.com/winsoft666/docker-webdev\n\næ ¹æ®docker-compose.yml.sampleæ–‡ä»¶æ¥æ–°å»ºdocker-compose.ymlæ–‡ä»¶ï¼š\ncp docker-compose.yml.sample docker-compose.yml\n\nä¿®æ”¹docker-compose.ymlæ–‡ä»¶ä¸­çš„ç›¸åº”å­—æ®µï¼š\nversion: &#x27;3&#x27;services:  webdav:    build: .    restart: always    ports:      - &quot;9443:443&quot;      - &quot;9080:80&quot;    environment:      SERVER_NAME: www.xxx.com,xxx.com      AUTH_TYPE: Basic      SSL_CERT: selfsigned    volumes:      - /webdav-server:/var/lib/dav      - /root/webdav/user.passwd:/user.passwd\n\nå­—æ®µå«ä¹‰å¦‚ä¸‹ï¼š\n\nportsä¸ºå®¹å™¨å’Œå®¿ä¸»æœºå™¨çš„ç«¯å£æ˜ å°„ï¼Œå†’å·å‰é¢çš„ç«¯å£å¯ä»¥è‡ªå®šä¹‰ï¼›\nSERVER_NAMEä¸ºæœåŠ¡å™¨ç»‘å®šçš„åŸŸåï¼Œå¦‚æœæ²¡æœ‰ç»‘å®šåŸŸåï¼Œå¯ä»¥ç›´æ¥å†™æœåŠ¡å™¨çš„å¤–ç½‘IPã€‚\nJoplinåªæ”¯æŒBasicéªŒè¯æ¨¡å¼ï¼›\n\n/root/webdav/user.passwdä¸ºWebDAVçš„ç”¨æˆ·åå’Œå¯†ç å­˜å‚¨æ–‡ä»¶ï¼Œå­˜åœ¨åœ¨å®¿ä¸»æœºå™¨ä¸Šï¼Œé€šè¿‡æ˜ å°„çš„æ–¹å¼æ˜ å°„åˆ°å®¹å™¨ä¸­ï¼Œç”Ÿæˆæ­¥éª¤å¦‚ä¸‹ï¼š\n# åœ¨CentOS7ç³»ç»Ÿä¸Šå®‰è£…httpdyum -y install httpdcd /root/webdav/touch user.passwdhtpasswd -B user.passwd zhanghua\n\nåœ¨docker-compose.ymlæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œï¼š\ndocker-compose up -d\nä¸Šé¢å‘½ä»¤ä¼šéƒ¨ç½²å¹¶å¯åŠ¨WebDAVæœåŠ¡ã€‚\näºŒã€æµ‹è¯•WebDAVæœåŠ¡åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€http://xxx.com:9080ï¼Œä¼šå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†ï¼Œè¾“å…¥ä½¿ç”¨htpasswd å‘½ä»¤åˆ›å»ºçš„ç”¨æˆ·å’Œå¯†ç ï¼Œç‚¹å‡»ç™»å½•ï¼Œå¦‚æœå¯ä»¥ç™»å½•è¿›å»ï¼Œè¯´æ˜æœåŠ¡æ­å»ºæˆåŠŸã€‚\nä¸‰ã€æ–°å»ºJoplinæ•°æ®ç›®å½•åœ¨å®¿ä¸»æœºå™¨çš„/webdav-server/dataç›®å½•ä¸‹ï¼Œæ–°å»ºå­ç›®å½•joplinã€‚å› ä¸º/webdav-server/ç›®å½•å·²ç»æ˜ å°„åˆ°å®¹å™¨ä¸­ï¼Œæ‰€ä»¥å®¹å™¨å¯ä»¥ç›´æ¥è®¿é—®ã€‚\né‡å¯Dockerï¼š\ndocker ps -a # æŸ¥çœ‹å®¹å™¨IDdocker stop XXXdocker start XXX\n\nä»Joplinå®˜ç½‘ï¼ˆhttps://joplinapp.org/ï¼‰ä¸‹è½½Joplinå®¢æˆ·ç«¯ï¼Œåœ¨â€œåŒæ­¥â€é€‰é¡¹ä¸­è®¾ç½®WebDAVï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n\nè®¾ç½®å®Œæˆä¹‹åï¼Œç‚¹å‡»â€œæ£€æŸ¥åŒæ­¥é…ç½®â€ï¼Œæç¤ºâ€œæˆåŠŸâ€åˆ™è¯´æ˜é…ç½®æ­£ç¡®ã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"åšäººåšäº‹åšç®¡ç†ã€è½¬è½½ã€‘","url":"/post/1719474789.html","content":"å¤§é“è‡³ç®€ï¼Œè¶Šæ˜¯æ ¹æºå’ŒåŸºæœ¬çš„é—®é¢˜ï¼Œé“ç†å®é™…ä¸Šè¶Šç®€å•ã€‚å…³äºå¦‚ä½•åšäººã€åšäº‹ã€åšç®¡ç†çš„ä¹¦å¾ˆå¤šï¼Œæˆ‘çœ‹å¾—ä¸å¤šï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™äº›ä¹¦æ›´å¤šæ˜¯ä¾§é‡æŠ€æœ¯å’Œå®ç°ç»†èŠ‚ä¸Šçš„ï¼Œè€Œå¾ˆå°‘ä»äººçš„æ€æƒ³å’Œè§‚å¿µå»è®²ã€‚ä»å®é™…æ ¹æœ¬ä¸Šå»è¯´ï¼Œå¦‚ä½•åšäººåšäº‹æ˜¯ä¸–ç•Œè§‚çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå“²å­¦è¯é¢˜ã€‚å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·ï¼Œå·²ç»åˆ°äº†30çš„å¹´çºªï¼Œæ˜¯éœ€è¦å»æ€è€ƒä¸€ä¸‹åº”è¯¥å¦‚ä½•åšäººå¦‚ä½•åšäº‹çš„ï¼Œä¹Ÿéœ€è¦ä¸€å¥—ç®€å•ã€æœ‰æ•ˆã€å®Œæ•´çš„ä½“ç³»æ¥æŒ‡å¯¼è‡ªå·±ï¼Œè€Œè¿™å¥—ä½“ç³»å°†æ˜¯è®©è‡ªå·±å®‰èº«ç«‹å‘½äºè¿™ä¸ªä¸–ç•Œçš„åŸºçŸ³ã€‚\n\n\nèŒåœºä¸Šå¦‚ä½•åšäººå…³äºåœ¨èŒåœºä¸Šå¦‚ä½•åšäººï¼Œæˆ‘åªè°¨è®°ä¸¤ä¸ªå­—ï¼ï¼æœåŠ¡ã€‚\nä½ è¦æŠŠè‡ªå·±å½“æˆä¸€ä¸ªå“ç‰Œå»çˆ±æƒœï¼Œå½“æˆä¸€å®¶å…¬å¸å»ç»è¥ï¼Œä½ è¦ç‰¢ç‰¢è®°ä½ä½ ä¹‹æ‰€ä»¥èƒ½åœ¨ä¸€å®¶å…¬å¸ç«‹è¶³ï¼Œæ˜¯å› ä¸ºå…¬å¸éœ€è¦ä½ çš„æœåŠ¡ã€‚\næˆ‘ä»¬ç»å¸¸ä¼šæŠ±æ€¨æŸæŸé“¶è¡Œçš„å·¥ä½œäººå‘˜æœåŠ¡æ€åº¦ä¸å¥½ã€æŸæŸå•†å“çš„å”®åæœåŠ¡ä¸å¥½ï¼Œä½†ä»æ¥ä¸å»æ€è€ƒè‡ªå·±å¯¹å…¬å¸çš„æœåŠ¡å¥½ä¸å¥½ï¼Ÿå…¬å¸çš„ä»»åŠ¡æœ‰æ²¡æœ‰å¦‚æœŸå®Œæˆï¼Œæœ‰æ²¡æœ‰å“ªä¸ªä»»åŠ¡æ˜¯æå‰å®Œæˆçš„ï¼Œæ˜¯å¦æ‰€æœ‰ä»»åŠ¡éƒ½æ‹–åˆ°â€œæœ€åæœŸé™â€ï¼Ÿå·¥ä½œå®Œæˆçš„å¤Ÿä¸å¤Ÿå½»åº•ï¼Œæ˜¯ä¸æ˜¯ç­”å¤å·²ç»å®Œæˆäº†ï¼Œç»“æœåé¢åˆå‡ºçŠ¶å†µï¼Ÿå®Œæˆåæœ‰æ²¡æœ‰å‘ä¸Šçº§åé¦ˆï¼Œæ˜¯ä¸æ˜¯ç­‰åˆ°ä¸Šçº§é—®ä½ å®Œæˆäº†æ²¡æœ‰ï¼Œä½ æ‰å»æŠ¥å‘Šè¿›åº¦ï¼Ÿæ‹–å»¶çš„ä»»åŠ¡æœ‰æ²¡æœ‰æŒç»­è·Ÿè¿›ï¼Œæ˜¯ä¸æ˜¯ä¸Šçº§ä¸è¿½äº†è¿™ä¸ªä»»åŠ¡æœ€åå°±ä¸äº†äº†ä¹‹äº†ï¼Ÿä¸Šé¢è¿™äº›é—®é¢˜æˆ‘éƒ½æ˜¯åå¤é‡è§ï¼Œå…¶å®æ ¹æœ¬åŸå› å°±æ˜¯æ²¡æœ‰æ„è¯†åˆ°ä½ å…¶å®åœ¨åšä¸€é¡¹æœåŠ¡ï¼Œä½ åœ¨å…¬å¸çš„å‘å±•å‰æ™¯ï¼Œå…¨éƒ½å–å†³ä½ å¯¹å…¬å¸çš„æœåŠ¡å¤Ÿä¸å¤Ÿå¥½ã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœäº¤ç»™ä½ çš„æ¯ä»¶äº‹æƒ…éƒ½å¯ä»¥è¿åˆƒè€Œè§£ã€åŒ–é™©ä¸ºå¤·ï¼Œè®©äººæ„Ÿè§‰ç¨³å¦¥ã€æ”¾å¿ƒã€è¸å®ï¼Œä½ è‡ªç„¶ä¼šæ”¶åˆ°æ›´å¤šæ›´é‡è¦çš„â€œè®¢å•â€ã€‚å½“ä½ çš„å•å¤šåˆ°ä½ å¿™ä¸è¿‡æ¥çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿæ‹›ä¸‹å±å•Šï¼Œå‘µå‘µï¼Œæ­å–œä½ ï¼Œä½ å·²ç»æ˜¯é¢†å¯¼äº†ï¼ˆå½“ç„¶æˆ‘ä»¬ä¹Ÿè¦æ’é™¤æå°‘æ•°çš„ä»»äººå”¯äº²çš„å…¬å¸ï¼Œå¤§å±€é¢æ˜¯ç§¯æå‘ä¸Šçš„ï¼‰ã€‚åä¹‹ï¼Œå¦‚æœç»™ä½ ä¸€ä»¶äº‹æƒ…ä½ è¦æ‹–å»¶ï¼Œç»™ä½ ä¸€ä»¶äº‹æƒ…ä½ åŠä¸å¥½ï¼Œç»™ä½ ä¸€ä»¶äº‹æƒ…å°±æ²¡äº†ä¸‹æ–‡äº†ï¼Œè®©äººä¸æ”¾å¿ƒï¼Œä¹…è€Œä¹…ä¹‹ä½ å°±â€œæ— å•å¯åšâ€äº†ï¼Œé‚£ä¹ˆå…¬å¸é‡æ–°è¯·ä¸€ä¸ªäººå°±å¯ä»¥äº†ï¼Œå¹²å˜›éè¦ç”¨ä½ å‘¢ï¼Ÿ\næœåŠ¡ä¸å…‰æ˜¯å¯¹äºè‡ªå·±ä¾›èŒçš„å…¬å¸ï¼Œå¯¹äºå…¬å¸çš„å®¢æˆ·ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ¯ä¸€æ¬¡å»å®¢æˆ·é‚£é‡Œå‡ºå·®å‰ï¼Œæˆ‘æ€»æ˜¯å†ä¸‰å®å˜±è‡ªå·±ï¼Œæˆ‘æ­¤æ¬¡ä¹‹è¡Œæ˜¯ä¸ºå®¢æˆ·åšæœåŠ¡çš„ï¼Œæ˜¯å»ä¸ºå®¢æˆ·è§£å†³é—®é¢˜çš„ã€‚è¿™ä¸ªå¿ƒæ€éå¸¸é‡è¦ï¼Œæˆ‘ä»¬åšè½¯ä»¶ç³»ç»Ÿçš„ï¼Œå»è§å®¢æˆ·é™¤äº†åšæ¼”ç¤ºã€åšåŸ¹è®­ï¼Œå¾ˆå¤šæ—¶å€™å°±æ˜¯å¤„ç†ç°åœºé—®é¢˜ï¼Œéš¾å…é‡åˆ°å®¢æˆ·å¯¹ç³»ç»Ÿçš„æŠ•è¯‰ï¼Œæ¯”å¦‚ç³»ç»Ÿé€Ÿåº¦æ…¢ã€bugå¤šç­‰é—®é¢˜ã€‚å½“ä½ æœ‰äº†è¿™æ ·çš„å¿ƒæ€ï¼Œä½ å°±ä¼šè°¦è™šåœ°æ¥å—å®¢æˆ·çš„æ‰¹è¯„ï¼Œç»†è‡´åœ°è®°å½•å®¢æˆ·æå‡ºçš„é—®é¢˜ï¼Œç„¶åä¸€é¡¹é¡¹åœ°å»æ€è€ƒå¦‚ä½•è§£å†³ï¼Œå¹¶ä¸”åº”è¯¥ç»™å®¢æˆ·ä¸€ä»½è¯¦å°½çš„è§£å†³æ–¹æ¡ˆã€‚æœ‰äº†è¿™æ ·çš„å¿ƒæ€ï¼Œä½ ä¼šä¸è‡ªè§‰åœ°ã€è‡ªç„¶è€Œç„¶åœ°ä¸å®¢æˆ·ç«™åœ¨ä¸€è¾¹ï¼Œè®©ä»–æ„Ÿåˆ°ä½ æ˜¯åœ¨ä¸ºä»–ç€æƒ³ï¼Œå¸®åŠ©ä»–å»è§£å†³é—®é¢˜çš„ã€‚åœ¨ä½ é¢å¯¹å®¢æˆ·æ—¶ï¼Œåº”è¯¥æœ‰è¿™æ ·ä¸€ä¸ªè™”è¯šçš„ä¿¡å¿µï¼šæˆ‘æ˜¯å»ä¸ºå®¢æˆ·æœåŠ¡çš„ï¼Œä¸ºä»–è§£å†³ä»–æ‰€è§£å†³ä¸äº†çš„é—®é¢˜çš„ã€‚å¦‚æœä½ æ²¡æœ‰è¿™æ ·çš„å¿ƒæ€ï¼Œé¢å¯¹æŠ•è¯‰å¾ˆå¯èƒ½å°±ä¼šäº§ç”ŸåŒçƒ¦ï¼Œè€Œä¸”å®¹æ˜“ä¸ºè‡ªå·±çš„é—®é¢˜è¿›è¡Œè¾©è§£ã€‚è¿™ç§åšæ³•ç»™å®¢æˆ·çš„æ„Ÿè§‰å°±æ˜¯ä½ ç«­åŠ›åœ¨è¯æ˜ä½ æ˜¯å¯¹çš„ä»–æ˜¯é”™çš„ï¼Œè¿™æ ·ä½ å°±ç«™åœ¨å®¢æˆ·çš„å¯¹é¢äº†ã€‚\nåœ¨å®¢æˆ·é¢å‰çš„è¡¨ç°å¯¹ä½ çš„èŒåœºå‘å±•ä¹Ÿæ˜¯éå¸¸æœ‰å¥½å¤„çš„ï¼Œå°¤å…¶æ˜¯æ¥è§¦åˆ°ä¸€äº›è·¨å›½ä¼ä¸šæ—¶ï¼Œä½ ä¼˜è‰¯çš„èŒä¸šç´ å…»ä¼šä¸ºä½ èµ¢æ¥å®¢æˆ·çš„è®¤åŒä¸å°Šæ•¬ã€‚è¿™æ ·å½“ä½ å“ªå¤©å¸Œæœ›å¯»æ‰¾æ›´é«˜çš„å¹³å°ï¼Œåªè¦æ”¾ä¸ªå£é£å‡ºå»ï¼Œç«‹å³å°±ä¼šæœ‰Offeräº†ã€‚æ‰€ä»¥è®¤çœŸæœåŠ¡å¥½å®¢æˆ·åªèµšä¸èµ”ã€‚\nèŒåœºä¸Šå¦‚ä½•åšäº‹å…³äºå¦‚ä½•åšäº‹ï¼Œä¹Ÿæœ‰å¾ˆå¤šçš„ç†è®ºï¼Œæ¯”å¦‚è¦äº‹ç¬¬ä¸€ï¼ŒæŠŠäº‹æƒ…åˆ†ä¸ºç´§æ€¥ã€é‡è¦ç­‰ç­‰ï¼Œè¿™äº›æˆ‘éƒ½ä¸è®¨è®ºäº†ï¼Œæˆ‘åªå°±æˆ‘è‡ªå·±çš„ç»éªŒæ¥è°ˆä¸€è°ˆã€‚\nå¯¹äºå¦‚ä½•åšäº‹ï¼Œæˆ‘ä¹Ÿæªå®ˆä¸€ä¸ªä¿¡æ¡ï¼šä¸ç„¦ä¸ç‡¥ï¼ŒæŠŠå¿ƒæ²‰ä¸‹å»ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­äºè¦è§£å†³çš„é—®é¢˜ä¸Šã€‚\næˆ‘çœ‹è¿‡è¿™æ ·ä¸€ä¸ªæ•…äº‹ï¼Œæ˜¯è¯´ä»å‰æœ‰ä¸€æˆ·äººå®¶ï¼Œå®¶é‡Œçš„èœå›­ä¸­æœ‰ä¸€å—å¤§çŸ³å¤´ï¼Œç»å¸¸ä¼šæœ‰äººä¸å°å¿ƒæ’åˆ°ï¼›å„¿å­å°±é—®ï¼šä¸ºä»€ä¹ˆä¸æŠŠä»–æŒ–èµ°å‘¢ï¼Ÿä»–çš„çˆ¸çˆ¸è¯´ï¼šè¿™ä¸ªçŸ³å¤´çˆ·çˆ·çš„æ—¶ä»£å°±æœ‰äº†ï¼Œå°±æ˜¯å› ä¸ºå®ƒé‚£ä¹ˆå¤§ï¼Œä¸å¥½æŒ–æ‰ä¸€ç›´åœ¨é‚£é‡Œï¼›åˆè¿‡äº†ä¸€ä»£äººï¼Œå®¶é‡Œçš„ä¸€ä¸ªåª³å¦‡å®åœ¨å—ä¸äº†ï¼Œå°±æ‰›ç€é”„å¤´å»æŒ–äº†ï¼Œå¥¹å·²ç»åšå¥½äº†å¿ƒç†å‡†å¤‡è¦æŒ–å‡ å¤©çš„æ—¶é—´ï¼Œç»“æœä¸€å¤©å°±æŒ–å®Œäº†â€¦ â€¦åŸæ¥é‚£ä¸ªçŸ³å¤´çš„ä¸­é—´æ˜¯ç©ºçš„ã€‚\næˆ‘ä»¬é‡åˆ°çš„å¾ˆå¤šäº‹æƒ…ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œçœ‹ä¼¼æ£˜æ‰‹ã€éš¾ä»¥è§£å†³ï¼Œå®é™…ä¸Šåªè¦ä½ è®¤çœŸåœ°å»åˆ†æã€å»æ€è€ƒï¼Œç„¶åæ”¾æ‰‹å»åšï¼Œå¾€å¾€å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå›°éš¾ã€‚ä½ éœ€è¦å…‹æœå¿ƒä¸­çš„é¡½çŸ³ã€‚æˆ‘å‘ç°ä¸€äº›äººé‡åˆ°é—®é¢˜åï¼Œå¾ˆè½»æ˜“åœ°å°±ä¼šè¯´ï¼šè¿™ä¸ªæˆ‘åšä¸äº†ï¼Œè¿™ä¸ªå®ç°ä¸äº†ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿæ²¡åŠæ³•ã€‚å…¶å®å°±å¥½åƒçœ‹åˆ°è¿™å—å¤§çŸ³å¤´ä¸€æ ·ï¼Œè¢«å®ƒçš„â€œå¤–è¡¨â€å“ä½äº†ï¼Œè€Œæ”¾å¼ƒäº†åº”æœ‰çš„è¡ŒåŠ¨ã€‚\nè€Œä¸”æˆ‘å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œä¸ç®¡å¤šä¹ˆå›°éš¾çš„é—®é¢˜ï¼Œåªè¦ä½ æ²‰ä¸‹å¿ƒå»æ€è€ƒå¦‚ä½•è§£å†³ï¼Œå°±å¥½åƒåœ¨å†¥å†¥ä¹‹ä¸­ä¸Šè‹åœ¨çœ‹ç€ä½ ä¸€æ ·ï¼Œå½“ä½ æ‹¼åˆ°æœ€åå°±è¦æ‰“ç®—è®¤è¾“çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šå‡ºç°æ–°çš„å¥‘æœºå’Œæ–¹æ³•ã€‚\nå¦å¤–ï¼Œæˆ‘å‘ç°æœ‰äº›äººé‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œä»–æƒ³çš„æ˜¯è¿™ä»¶äº‹å¦‚ä½•å›°éš¾å¦‚ä½•éš¾ä»¥å®Œæˆï¼Œè¿™æ ·çš„æ€ç»´æ–¹å¼æ˜¯æœ‰é—®é¢˜çš„ï¼Œæ˜¯ä¸€ç§ä¿å®ˆä¸”é€€ç¼©çš„æ€ç»´ï¼›é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œæƒ³çš„åº”è¯¥æ˜¯å¦‚ä½•æ‰èƒ½å¤Ÿå®Œæˆã€‚æˆ‘ä¸€èˆ¬é‡‡å–è¿™æ ·å‡ ä¸ªæ­¥éª¤ï¼š1ã€åˆ—å‡ºæ‰€æœ‰çš„å¯èƒ½æ€§ï¼›2ã€åˆ†æå„ç§å¯èƒ½æ€§ï¼›3ã€é€‰æ‹©ä¸€ç§å®ç°èµ·æ¥æœ€ç®€å•ã€å¿«é€Ÿçš„å¯èƒ½æ€§ï¼›4ã€å»å®ç°ã€‚\né™¤æ­¤ä»¥å¤–ï¼Œæˆ‘å‘ç°ä¸€äº›äººåœ¨åšäº‹çš„æ—¶å€™ï¼Œä¼šä»¥â€œè¿™æ ·åšå¾ˆéº»çƒ¦â€æ¥ä½œä¸ºä¸é‡‡çº³æ–¹æ¡ˆçš„ç†ç”±ï¼Œè€Œä¸æ˜¯â€œè¿™æ ·æ˜¯å¦å¿…è¦â€æˆ–è€…â€œè¿™æ ·æ˜¯å¦æ›´å¥½â€æ¥ä½œä¸ºæ ‡å‡†ï¼Œå®é™…ä¸Šâ€œéº»çƒ¦â€åº”è¯¥æ˜¯æ’åœ¨â€œæ˜¯å¦å¿…è¦â€ã€â€œæ˜¯å¦æ›´å¥½â€åé¢è¿›è¡Œè€ƒè™‘çš„ã€‚å¦‚æœä¸€ç§å®ç°æ–¹å¼ï¼Œè™½ç„¶éº»çƒ¦ï¼Œä½†æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œä¸”å¯¹å®¢æˆ·æ¥è¯´æ›´å¥½ï¼Œé‚£ä¹ˆå°±ç®—éº»çƒ¦ä¹Ÿè¦å»åšã€‚ä½†æ˜¯ç¨‹åºå‘˜å¾€å¾€å…³å¿ƒçš„æ˜¯ä¼šä¸ä¼šå¾ˆéº»çƒ¦ï¼Œæ˜¯ä¸æ˜¯è¦ä¿®æ”¹å¾ˆå¤šåœ°æ–¹ï¼Œæ˜¯ä¸æ˜¯ç»™è‡ªå·±å¸¦æ¥å¾ˆå¤šå·¥ä½œé‡â€¦ â€¦å‘Šè¯‰ä½ ï¼Œä½ å…³å¿ƒçš„è¿™äº›ä¸æ˜¯æœ€é‡è¦çš„ã€‚\nèŒåœºä¸Šå¦‚ä½•åšç®¡ç†å’Œä¸Šé¢ä¸€æ ·ï¼Œåšç®¡ç†ä¹Ÿæœ‰å¾ˆå¤šçš„ç»†èŠ‚ï¼Œæˆ‘ä¹Ÿéƒ½ä¸è°ˆäº†ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯ä¸€æœ¬ä¹¦ä¸€æœ¬ä¹¦çš„è®²ï¼Œè€Œæˆ‘è§‰å¾—è¦ç®€å•ã€æœ‰æ•ˆã€å¥½æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä¹Ÿåªè¯´ä¸‰ç‚¹ã€‚\næˆ‘è§‰å¾—åšå¥½ä¸€ä¸ªæŠ€æœ¯ç»ç†ï¼Œåªè¦ä¸‹é¢çš„ä¸‰ç‚¹å°±å¥½äº†ï¼š\n1ã€å¾·è¡Œå¾·è¡Œå…¶å®å°±æ˜¯å“å¾·ï¼Œç®€å•åœ°è®²å°±æ˜¯è¦å–„è‰¯ã€è¯šæ³ã€‚æœ€é‡è¦çš„ï¼Œä½ åšäº‹çš„å‡ºå‘ç‚¹è¦æ˜¯å¥½çš„ï¼Œå¯¹åˆ«äººæ˜¯æ²¡æœ‰åå¿ƒçš„ã€‚\nä¸ºä»€ä¹ˆè¯´å‡ºå‘ç‚¹ä¸€å®šè¦æ˜¯å¥½çš„å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä»¥æœåŠ¡å®¢æˆ·çš„ä¾‹å­æ¥è¯´ï¼Œåœ¨ä¸ºå®¢æˆ·è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬çš„å‡ºå‘ç‚¹æ˜¯å¥½çš„ï¼Œæ˜¯ç«™åœ¨å®¢æˆ·ä¸€è¾¹å°½å¿ƒå°½åŠ›å»ä¸ºå®¢æˆ·è§£å†³é—®é¢˜çš„ï¼Œé‚£ä¹ˆå³ä¾¿ç”±äºæ–¹æ³•ã€èƒ½åŠ›ã€æ¡ä»¶ç­‰å„æ–¹é¢çš„åŸå› ï¼Œäº‹æƒ…æç ¸äº†æˆ–è€…æ²¡æœ‰åšå¥½ï¼Œä¹Ÿå¾ˆå®¹æ˜“è·å¾—å®¢æˆ·çš„ç†è§£å’ŒåŸè°…ã€‚å¾ˆå¯èƒ½çš„æƒ…å½¢æ˜¯ï¼Œä½ å°±ç®—åšå¤±è´¥äº†ä¹Ÿä¸€æ ·èµ¢å¾—å®¢æˆ·ï¼›ç›¸åï¼Œå¦‚æœä½ çš„å‡ºå‘ç‚¹æ˜¯â€œçœéº»çƒ¦â€ï¼Œâ€œèµ¶ç´§äº¤å·®äº†äº‹â€ï¼Œâ€œå®Œæˆä»»åŠ¡â€ï¼Œå¦‚æœäº‹æƒ…åšæˆäº†ä¹Ÿå°±ç®—äº†ï¼Œä¸€æ—¦å¤±è´¥äº†ï¼Œä½ çœ‹çœ‹å®¢æˆ·ä¼šæ€ä¹ˆæ ·ï¼Ÿå‘Šè¯‰ä½ ï¼Œå¥½çš„å®¢æˆ·ä¼šæ‰¹è¯„ä½ ã€æŠ•è¯‰ä½ ï¼Œå› ä¸ºä»–å¯¹ä½ è¿˜æœ‰æœŸæœ›ï¼›æ›´å¤šçš„å®¢æˆ·æ˜¯ä»€ä¹ˆè¯ä¹Ÿä¸è¯´ï¼Œç›´æ¥æ¢ä¸ªä¾›åº”å•†å°±æ˜¯äº†ï¼Œæ‰æ‡’å¾—ç†ä½ ã€‚\nè®°ä½æ°¸è¿œä¸è¦æŠŠå®¢æˆ·å½“æˆå‚»ç“œï¼Œä½ æ˜¯å¦‚ä½•åšäº‹æƒ…çš„ï¼Œå®¢æˆ·æ˜¯å¾ˆå®¹æ˜“æ„Ÿå—å¾—åˆ°çš„ã€‚æ‰€ä»¥ï¼Œé¢å¯¹å’ŒæœåŠ¡å®¢æˆ·æ²¡æœ‰é‚£ä¹ˆå¤šçš„æŠ€å·§ï¼Œä½ ä¸éœ€è¦æœ‰å¤šå¥½çš„å£æ‰å’Œé­…åŠ›ï¼Œä¹Ÿç”¨ä¸ç€å¿½æ‚ å’Œå¤¸å¤§å…¶è¯(æˆ‘å‘ç°å¾ˆå¤šé”€å”®äººå‘˜éƒ½æ˜¯è¿™æ ·ï¼Œä½ å¯ä»¥éª—å®¢æˆ·ä¸€æ¬¡ï¼Œä½†å°±æ²¡æœ‰ç¬¬äºŒæ¬¡äº†)ï¼Œä½ åªéœ€è¦æ”¾ä¸‹èº«æ®µï¼Œå…¢å…¢ä¸šä¸šåœ°ä¸ºå®¢æˆ·ç€æƒ³ï¼Œè®¾èº«å¤„åœ°åœ°è§£å†³ä»–çš„é—®é¢˜å°±å¯ä»¥ã€‚å¯¹å¾…ä¸‹å±ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½ å¯¹ä»–çš„å¥–åŠ±ä¹Ÿå¥½ï¼Œæƒ©ç½šä¹Ÿå¥½ï¼Œå‡ºå‘ç‚¹ä¸€å®šè¦æ˜¯å¥½çš„ã€‚æˆ‘å¯¹å¾…ä¸‹å±éµå¾ªçš„åŸåˆ™å°±æ˜¯ï¼šæˆ‘æ˜¯åœ¨å¸®åŠ©ä½ ï¼Œå¸®ä½ æŠŠå·¥ä½œåšçš„æ›´å¥½ï¼Œå¸®ä½ è·å¾—æ›´å¤§çš„æé«˜ï¼Œè€Œä¸æ˜¯è¯´æ‰¾ä½ èŒ¬å„¿ï¼Œè·Ÿä½ è¿‡æ„ä¸å»ï¼Œæˆ–è€…æ˜¯æŒ¤å…‘ä½ å‹è¿«ä½ ã€‚å¾·è¡Œæ˜¯åŸºæœ¬çš„ï¼Œæœ‰ä¸€ä¸ªå¥½çš„å¾·è¡Œï¼Œè‡³å°‘å¯ä»¥ä¿è¯ä½ çš„ä¸‹å±ä¸ä¼šè®¨åŒä½ ã€‚\n\nè¿™ä¸€ç‚¹æ”¾åœ¨åšäº§å“ä¸Šä»ç„¶æœ‰æ•ˆï¼Œåšä¸€ä¸ªå¥½çš„äº§å“åŒæ ·ä¸éœ€è¦é‚£ä¹ˆå¤šçš„æŠ€å·§å’ŒèŠ±æ ·ï¼Œä»ç”¨æˆ·å®é™…éœ€æ±‚å‡ºå‘ï¼Œæƒ³ç”¨æˆ·æ‰€æƒ³ï¼Œåšç”¨æˆ·æƒ³è¦çš„ï¼Œç”¨æˆ·è‡ªç„¶ä¹°å•ï¼Œç›ˆåˆ©ä¹Ÿæ˜¯æ°´åˆ°æ¸ æˆçš„äº‹æƒ…ã€‚\n\n2ã€æ•¬ä¸šå¦‚æœæœ‰äººé—®æˆ‘ï¼Œä¸‹å±å’Œç»ç†çš„åŒºåˆ«æ˜¯ä»€ä¹ˆã€‚æˆ‘ä¼šå‘Šè¯‰ä»–ï¼šä¸‹å±ç­‰ç€åˆ«äººäº¤ä»£äº‹æƒ…åšï¼Œç»ç†æƒ³ç€è¿˜æœ‰å“ªäº›äº‹æƒ…å¯ä»¥åšã€‚\nè¿™å…¶å®æ˜¯ä¸€ä¸ªç§¯æå¿ƒæ€çš„é—®é¢˜ï¼Œä½œä¸ºä¸€ä¸ªä¸­å±‚å¹²éƒ¨ï¼Œä½ éœ€è¦å°†å…¬å¸çš„äº‹æƒ…å½“æˆè‡ªå·±å®¶çš„äº‹æƒ…æ¥å¤„ç†ï¼Œå½“ä½ æœ‰è¿™æ ·çš„å¿ƒæ€ï¼Œä½ å°±æ˜¯å†æ€ä¹ˆåŠ ç­éƒ½ä¸ä¼šæœ‰æ€¨è¨€çš„ï¼Œå³ä¾¿åˆ†æ–‡ä¸å–â€¦ ï¼ˆæœ‰è°è§è¿‡ç»™è‡ªå·±å®¶è£…ä¿®å«è‹¦ä¸è¿­çš„ï¼Ÿï¼‰å¦‚æœä½ å¯ä»¥é•¿æœŸä¿æŒè¿™æ ·çš„çŠ¶æ€ï¼Œä½ çš„è¿™ç§çŒ®èº«ç²¾ç¥å’Œæ•¬ä¸šç²¾ç¥ï¼Œä¼šå¾ˆè½»æ˜“åœ°æ„ŸæŸ“ä½ çš„ä¸‹å±å’Œä½ çš„åŒäº‹ï¼Œä½ ä¼šæ„Ÿè§‰åˆ°åœ¨å…¬å¸å·¦å³é€¢æºï¼Œè€Œä¸”ä½ ä¹Ÿä¼šæ›´æœ‰è¯è¯­æƒï¼Œå¤§å®¶ä¼šæ›´é‡è§†ä½ çš„æ„è§ï¼ŒåŒäº‹å’Œä¸‹å±ä¹Ÿä¼šå¯¹ä½ æŠ¥ä»¥æ›´å¤šçš„ä¿¡ä»»ã€‚å½“è¿™ç§æƒ…å†µå‡ºç°æ—¶ï¼Œç®¡ç†èµ·ä¸‹å±è¿˜ä¼šå›°éš¾å—ï¼Ÿä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ çš„æ•¬ä¸šç²¾ç¥ä¸æ˜¯è¯´ä½“ç°åœ¨æ— ä¼‘æ­¢çš„åŠ ç­ä¸Šï¼Œå·¥ä½œå¼‚å¸¸ç¹å¿™ã€ç»å¸¸æ€§åŠ ç­å…¶å®æ˜¯å·¥ä½œæ²¡æœ‰åšå¥½çš„è¡¨ç°ä¹‹ä¸€ï¼ŒåŠ ç­åªåº”è¯¥å‡ºç°åœ¨ç´§æ€¥æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œè€Œä¸åº”è¯¥æ˜¯ä¸€ç§å¸¸æ€ã€‚\n3ã€æŠ€æœ¯å¦‚æœæœ‰äººé—®æˆ‘ï¼ŒæŠ€æœ¯äººå‘˜å’Œå…¶ä»–äººå‘˜æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆã€‚æˆ‘ä¼šå‘Šè¯‰ä»–ï¼šæŠ€æœ¯äººå‘˜ä¸ªä¸ªè‡ªä»¥ä¸ºæ˜¯ï¼Œè®¤ä¸ºåˆ«äººçš„æŠ€æœ¯éƒ½ä¸å¦‚è‡ªå·±ã€‚\nå¯èƒ½å¤§å®¶ä¸çˆ±å¬ï¼Œä½†æˆ‘è§‚å¯Ÿåˆ°çš„ç°è±¡å°±æ˜¯è¿™æ ·çš„ï¼Œè€Œä¸”å¾€å¾€é‚£äº›è‡ªè®¤ä¸ºæ‡‚å¾—å¾ˆå¤šçš„äººï¼Œå®é™…æ˜¯è¿˜æ²¡æ•²å¼€çŸ¥è¯†çš„å¤§é—¨ã€‚\nå¾ˆå°‘æœ‰äººæ„¿æ„å»è¯»åˆ«äººçš„ä»£ç ï¼Œå½¼æ­¤éƒ½è§‰å¾—å†™å¾—å¥½çƒ‚ã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³èµ¢å¾—æŠ€æœ¯äººå‘˜çš„é’¦ä½©ï¼Œä½ éœ€è¦æœ‰å‹å€’æ€§çš„æŠ€æœ¯èƒ½åŠ›ã€‚è¿™ä¸ªå‹å€’æ€§çš„ä¼˜åŠ¿ï¼Œä¸æ˜¯ä¸‹å±70åˆ†ï¼Œä½ 80åˆ†ï¼Œè€Œæ˜¯ä¸‹å±70åˆ†ï¼Œä½ è¦åšåˆ°100åˆ†ï¼›ä¸‹å±100åˆ†ï¼Œä½ è¦åšåˆ°150åˆ†ã€‚æ‰€ä»¥ï¼Œç¼ºä¹æŠ€æœ¯èƒ½åŠ›çš„äººå»ç®¡ç†æŠ€æœ¯äººå‘˜å¾€å¾€æ˜¯åƒåŠ›ä¸è®¨å¥½çš„ï¼Œå¯èƒ½ä¸‹å±è¡¨é¢ä¸Šæœä»ä½ ï¼Œå¿ƒé‡Œæ ¹æœ¬ä¸å½“ä½ ä¸€å›äº‹å„¿ï¼Œè¿™æ ·ç®¡ç†èµ·æ¥å°±å­˜åœ¨éšœç¢äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä½ çš„å¾·è¡Œéå¸¸å¥½ï¼Œä¹Ÿéå¸¸æ•¬ä¸šï¼ŒæŠ€æœ¯å°±æ˜¾å¾—ä¸é‚£ä¹ˆé‡è¦äº†ï¼›è€Œå¦‚æœä½ å·²ç»æ»¡è¶³äº†å‰é¢ä¸¤æ¡ï¼ŒåŒæ—¶æŠ€æœ¯ä¹Ÿå¾ˆç²¾æ¹›ï¼Œé‚£è‡ªç„¶æ˜¯é”¦ä¸Šæ·»èŠ±äº†ã€‚\nä¸Šé¢å°±æ˜¯ä¸€ç‚¹ç‚¹å¿ƒå¾—ï¼Œæ¬¢è¿äº¤æµã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"äº’è”ç½‘çš„é»‘è¯","url":"/post/3924191794.html","content":"å¯¹äºé»‘è¯æˆ‘æ˜¯æ‹’ç»çš„ï¼Œä½†åœ¨è¿™ä¸ªåœˆå­æ··ï¼Œåˆä¸å¾—ä¸æ‡‚ä¸€äº›é»‘è¯ï¼Œä»¥é˜²äº§ç”Ÿæ²Ÿé€šéšœç¢ã€‚å…³é”®æ—¶å€™è¯´ä¸€ä¸¤å¥é»‘è¯ä¼¼ä¹è¿˜èƒ½æ˜¾å¾—æœ‰Bæ ¼ã€‚\nä¸‹é¢æ˜¯åœ¨ç½‘ä¸Šæ”¶é›†çš„ä¸€äº›é»‘è¯ï¼Œè¿›è¡Œäº†ç¨è®¸æ•´ç†ï¼Œä»…ä¾›å¨±ä¹ï¼Œè¯·å‹¿å½“çœŸã€‚\n\nåè¯è§£é‡Š\nPM: äº’è”ç½‘äº§å“ç»ç†ï¼Œæ˜¯äº’è”ç½‘å…¬å¸ä¸­çš„ä¸€ç§èŒèƒ½ï¼Œè´Ÿè´£äº’è”ç½‘äº§å“çš„è®¡åˆ’å’Œæ¨å¹¿ï¼Œä»¥åŠäº’è”ç½‘äº§å“ç”Ÿå‘½å‘¨æœŸçš„æ¼”åŒ–ã€‚\n\nRDï¼šåç«¯å¼€å‘ï¼Œå±äºè½¯ä»¶ç ”å‘å·¥ç¨‹å¸ˆçš„ä¸€ç§ï¼Œä¸»è¦èŒè´£æ˜¯åå°ç³»ç»Ÿè®¾è®¡ä¸å¼€å‘ã€æ¥å£è®¾è®¡å’ŒåŠŸèƒ½å®ç°ã€‚\n\nFEï¼šå‰ç«¯å¼€å‘ï¼Œå±äºè½¯ä»¶ç ”å‘å·¥ç¨‹å¸ˆçš„ä¸€ç§ï¼Œä½¿ç”¨ HTMLã€CSSã€JavaScript ç­‰ä¸“ä¸šæŠ€èƒ½å’Œå·¥å…·å°†äº§å“UIè®¾è®¡ç¨¿å®ç°æˆç”¨æˆ·å¯è§†çš„appé¡µé¢ã€ç½‘ç«™é¡µé¢ç­‰ã€‚\n\nQAï¼šæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œå±äºè½¯ä»¶æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œå·¥ä½œèŒè´£åŒ…æ‹¬ï¼šæ£€æŸ¥è½¯ä»¶æœ‰æ²¡æœ‰ç¼ºé™·ï¼ˆBugï¼‰ã€æµ‹è¯•è½¯ä»¶æ˜¯å¦å…·æœ‰ç¨³å®šæ€§ï¼ˆRobustnessï¼‰ã€å®‰å…¨æ€§ã€æ˜“æ“ä½œæ€§ç­‰æ€§èƒ½ã€‚\n\nUIï¼šç”¨æˆ·ç•Œé¢è®¾è®¡å¸ˆï¼ŒæŒ‡ä»äº‹å¯¹è½¯ä»¶çš„äººæœºäº¤äº’ã€æ“ä½œé€»è¾‘ã€ç•Œé¢ç¾è§‚çš„æ•´ä½“è®¾è®¡å·¥ä½œçš„äººã€‚\n\nUE or UXï¼šUser Experience ç”¨æˆ·ä½“éªŒï¼ŒæŒ‡ä»¥ç”¨æˆ·ä½“éªŒä¸ºä¸­å¿ƒçš„è®¾è®¡ã€‚\n\nUED ï¼šUser Experience Design ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼ŒæŒ‡ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„ä¸€ç§è®¾è®¡æ‰‹æ®µï¼Œä»¥ç”¨æˆ·éœ€æ±‚ä¸ºç›®æ ‡è€Œè¿›è¡Œçš„è®¾è®¡ã€‚\n\nHMIï¼šHuman Machine Interface äººæœºç•Œé¢ï¼Œäººæœºç•Œé¢æ˜¯ç³»ç»Ÿå’Œç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤äº’å’Œä¿¡æ¯äº¤æ¢çš„åª’ä»‹ï¼Œ å®ƒå®ç°ä¿¡æ¯çš„å†…éƒ¨å½¢å¼ä¸äººç±»å¯ä»¥æ¥å—å½¢å¼ä¹‹é—´çš„è½¬æ¢ã€‚\n\nCLIï¼šCommand-line Interface å‘½ä»¤è¡Œç•Œé¢ï¼Œå®ƒé€šå¸¸ä¸æ”¯æŒé¼ æ ‡ï¼Œç”¨æˆ·é€šè¿‡é”®ç›˜è¾“å…¥æŒ‡ä»¤ï¼Œè®¡ç®—æœºæ¥æ”¶åˆ°æŒ‡ä»¤åï¼Œäºˆä»¥æ‰§è¡Œã€‚\n\nCEOï¼šChief Executive Officerã€Œé¦–å¸­æ‰§è¡Œå®˜ã€\n\nCTOï¼šChief Technology Officerã€Œé¦–å¸­æŠ€æœ¯å®˜ã€\n\nCOOï¼šChief Operations Officerã€Œé¦–å¸­è¿è¥å®˜ã€\n\nCFOï¼šé¦–å¸­è´¢åŠ¡å®˜ï¼ˆChief Financial Officerï¼‰ï¼Œè´Ÿè´£å…¬å¸çš„è´¢åŠ¡ç®¡ç†ï¼ŒåŒ…æ‹¬è´¢åŠ¡æŠ¥å‘Šã€é¢„ç®—è§„åˆ’å’Œèµ„æœ¬æŠ•èµ„å†³ç­–ã€‚\n\nHRBPï¼šä¸ºHuman Resource Business Partnerï¼ˆäººåŠ›èµ„æºä¸šåŠ¡åˆä½œä¼™ä¼´ï¼‰ï¼Œæ˜¯ä¼ä¸šæ´¾é©»åˆ°å„ä¸ªä¸šåŠ¡æˆ–äº‹ä¸šéƒ¨çš„äººåŠ›èµ„æºç®¡ç†è€…ï¼Œä¸»è¦ååŠ©å„ä¸šåŠ¡å•å…ƒé«˜å±‚åŠç»ç†åœ¨å‘˜å·¥å‘å±•ã€äººæ‰å‘æ˜ã€èƒ½åŠ›åŸ¹å…»ç­‰æ–¹é¢çš„å·¥ä½œã€‚\n\nSEMï¼šSearch Engine Marketing æœç´¢å¼•æ“è¥é”€ã€‚æ˜¯ä¸€ç§ç½‘ç»œè¥é”€å½¢å¼ï¼Œå°±æ˜¯å…¨é¢è€Œæœ‰æ•ˆçš„åˆ©ç”¨æœç´¢å¼•æ“æ¥è¿›è¡Œç½‘ç»œè¥é”€å’Œæ¨å¹¿ã€‚\n\nSEOï¼šSearch Engine Optimization æœç´¢å¼•æ“ä¼˜åŒ–ã€‚åˆ©ç”¨æœç´¢å¼•æ“çš„æœç´¢è§„åˆ™æ¥æé«˜å±•ç¤ºæ’åã€‚\n\nASOï¼šApp Store Optimizatio è‹¹æœåº”ç”¨å•†åº—æœç´¢ã€‚æŒ‡æå‡APPåœ¨å„ç±»APPè‹¹æœç”µå­å¸‚åœºæ’è¡Œæ¦œå’Œæœç´¢ç»“æœæ’åçš„è¿‡ç¨‹ã€‚\n\nUGCï¼šUser Generated Content ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼Œç”¨æˆ·å°†è‡ªå·±åŸåˆ›çš„å†…å®¹åœ¨ç½‘ä¸Šå¯¹ä»–äººå‘ˆç°ã€‚\n\nVCï¼šVenture Capital é£é™©æŠ•èµ„ï¼Œå¤§å¤šæ˜¯åˆ›ä¸šæŠ•èµ„ã€‚\n\nBPï¼šBusiness Plan å•†ä¸šè®¡åˆ’ä¹¦ï¼Œæ˜¯å…¬å¸ã€ä¼ä¸šæˆ–é¡¹ç›®å•ä½ä¸ºäº†è¾¾åˆ°æ‹›å•†èèµ„å’Œå…¶å®ƒå‘å±•ç›®æ ‡ï¼Œæ ¹æ®ä¸€å®šçš„æ ¼å¼å’Œå†…å®¹è¦æ±‚è€Œç¼–è¾‘æ•´ç†çš„ä¸€ä¸ªå‘å—ä¼—å…¨é¢å±•ç¤ºå…¬å¸å’Œé¡¹ç›®ç›®å‰çŠ¶å†µã€æœªæ¥å‘å±•æ½œåŠ›çš„ä¹¦é¢ææ–™ã€‚\n\nVRï¼šVirtual Reality è™šæ‹Ÿç°å®ï¼Œç»¼åˆåˆ©ç”¨è®¡ç®—æœºå›¾å½¢ç³»ç»Ÿå’Œå„ç§ç°å®åŠæ§åˆ¶ç­‰æ¥å£è®¾å¤‡ï¼Œåœ¨è®¡ç®—æœºä¸Šç”Ÿæˆçš„ï¼Œå¯äº¤äº’çš„ä¸‰ç»´ç¯å¢ƒä¸­æä¾›æ²‰æµ¸æ„Ÿè§‰çš„æŠ€æœ¯ã€‚\n\nARï¼šAugmented Reality å¢å¼ºç°å®,å®ƒæ˜¯ä¸€ç§å°†çœŸå®ä¸–ç•Œä¿¡æ¯å’Œè™šæ‹Ÿä¸–ç•Œä¿¡æ¯â€œæ— ç¼â€é›†æˆçš„æ–°æŠ€æœ¯ã€‚çœŸå®çš„ç¯å¢ƒå’Œè™šæ‹Ÿçš„ç‰©ä½“å®æ—¶åœ°å åŠ åˆ°äº†åŒä¸€ä¸ªç”»é¢æˆ–ç©ºé—´åŒæ—¶å­˜åœ¨ã€‚\n\nMRï¼šMediated Reality ä»‹å¯¼ç°å®ï¼ŒVRæ˜¯çº¯è™šæ‹Ÿæ•°å­—ç”»é¢ï¼ŒåŒ…æ‹¬ARåœ¨å†…çš„Mixed Realityæ˜¯è™šæ‹Ÿæ•°å­—ç”»é¢+è£¸çœ¼ç°å®ï¼ŒMRæ˜¯æ•°å­—åŒ–ç°å®+è™šæ‹Ÿæ•°å­—ç”»é¢ã€‚\n\nB2Bï¼šBusiness to Business ä¼ä¸šå¯¹ä¼ä¸šçš„ç”µå­å•†åŠ¡ï¼Œå¦‚é˜¿é‡Œå·´å·´ã€‚\n\nB2Cï¼šBusiness to Customer ä¼ä¸šå¯¹ä¸ªäººçš„ç”µå­å•†åŠ¡ï¼Œå¦‚äº¬ä¸œã€‚\n\nC2Cï¼šCustomer to Customer ä¸ªäººå¯¹ä¸ªäººçš„ç”µå­å•†åŠ¡ï¼Œå¦‚æ·˜å®ã€‚\n\nO2Oï¼šOnline to Offline çº¿ä¸Šå¯¹çº¿ä¸‹ï¼Œçº¿ä¸‹å•†åŠ¡ä¸çº¿ä¸Šæ¨å¹¿ç›¸ç»“åˆã€‚\n\næ–°é›¶å”®ï¼šæœªæ¥ç”µå­å•†åŠ¡å¹³å°å³å°†æ¶ˆå¤±ï¼Œçº¿ä¸Šçº¿ä¸‹å’Œç‰©æµç»“åˆåœ¨ä¸€èµ·ï¼Œæ‰ä¼šäº§ç”Ÿæ–°é›¶å”®ã€‚çº¿ä¸Šæ˜¯æŒ‡äº‘å¹³å°ï¼Œçº¿ä¸‹æ˜¯æŒ‡é”€å”®é—¨åº—æˆ–ç”Ÿäº§å•†ï¼Œæ–°ç‰©æµæ¶ˆç­åº“å­˜ï¼Œå‡å°‘å›¤è´§é‡ã€‚ï¼ˆç”µå­å•†åŠ¡å¹³å°æ¶ˆå¤±æ˜¯æŒ‡ï¼Œç°æœ‰çš„ç”µå•†å¹³å°åˆ†æ•£ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç”µå•†å¹³å°ï¼‰\n\nGMV: Gross Merchandise Volumn å•†å“æ€»äº¤æ˜“é‡ã€‚\n\nCLVï¼šæ¯ä¸ªå®¢æˆ·åœ¨æœªæ¥å¯èƒ½ä¸ºä¼ä¸šå¸¦æ¥çš„æ”¶ç›Šæ€»å’Œã€‚\n\nIAASï¼šInfrastructure-as-a-Service åŸºç¡€è®¾æ–½å³æœåŠ¡ï¼Œæ¶ˆè´¹è€…é€šè¿‡Internet å¯ä»¥ä»å®Œå–„çš„è®¡ç®—æœºåŸºç¡€è®¾æ–½è·å¾—æœåŠ¡ã€‚è¿™ç±»æœåŠ¡ç§°ä¸ºåŸºç¡€è®¾æ–½å³æœåŠ¡ã€‚\n\nPAASï¼šPlatform-as-a-Service å¹³å°å³æœåŠ¡ï¼ŒæŠŠæœåŠ¡å™¨å¹³å°ä½œä¸ºä¸€ç§æœåŠ¡æä¾›çš„å•†ä¸šæ¨¡å¼ã€‚\n\nSAASï¼šSoftware-as-a-Service è½¯ä»¶å³æœåŠ¡ï¼Œä¸€ç§é€šè¿‡Internetæä¾›è½¯ä»¶çš„æ¨¡å¼ï¼Œå‚å•†å°†åº”ç”¨è½¯ä»¶ç»Ÿä¸€éƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·å¯ä»¥æ ¹æ®è‡ªå·±å®é™…éœ€æ±‚ï¼Œé€šè¿‡äº’è”ç½‘å‘å‚å•†å®šè´­æ‰€éœ€çš„åº”ç”¨è½¯ä»¶æœåŠ¡ï¼ŒæŒ‰å®šè´­çš„æœåŠ¡å¤šå°‘å’Œæ—¶é—´é•¿çŸ­å‘å‚å•†æ”¯ä»˜è´¹ç”¨ï¼Œå¹¶é€šè¿‡äº’è”ç½‘è·å¾—å‚å•†æä¾›çš„æœåŠ¡ã€‚\n\nASPï¼šApplication Service provider åº”ç”¨æœåŠ¡æä¾›å•†ï¼Œé€šè¿‡æ„å»ºåº”ç”¨ç³»ç»Ÿè¿è¡Œå¹³å°ï¼Œç„¶åå†ç§Ÿç»™å„ä¸ªä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œæ˜¯ä»¥â€œæœˆç§Ÿâ€ä»£æ›¿â€œè´­ä¹°â€ã€‚\n\nCRMï¼šCustomer Relationship Management å®¢æˆ·å…³ç³»ç®¡ç†ï¼ŒæŒ‡ç”¨è®¡ç®—æœºè‡ªåŠ¨åŒ–åˆ†æé”€å”®ã€å¸‚åœºè¥é”€ã€å®¢æˆ·æœåŠ¡ä»¥åŠåº”ç”¨ç­‰æµç¨‹çš„è½¯ä»¶ç³»ç»Ÿ\n\nERPï¼šEnterprise Resource Planning ä¼ä¸šèµ„æºè®¡åˆ’ï¼Œä¼ä¸šèµ„æºè®¡åˆ’æ˜¯æŒ‡å»ºç«‹åœ¨ä¿¡æ¯æŠ€æœ¯åŸºç¡€ä¸Šï¼Œä»¥ç³»ç»ŸåŒ–çš„ç®¡ç†æ€æƒ³ï¼Œä¸ºä¼ä¸šå†³ç­–å±‚åŠå‘˜å·¥æä¾›å†³ç­–è¿è¡Œæ‰‹æ®µçš„ç®¡ç†å¹³å°ã€‚\n\nBPMï¼šä¸šåŠ¡æµç¨‹ç®¡ç†ç³»ç»Ÿ\n\nMRDï¼šMarket Requirements Document å¸‚åœºéœ€æ±‚æ–‡æ¡£ï¼Œå¸¸è§çš„ä¸ºç«å“åˆ†æï¼Œä¸€èˆ¬ç”¨äºç«‹é¡¹ï¼ŒåŸºäºç›®å‰å¸‚åœºæ•°æ®åŠç«å“ç­‰è¿›è¡Œé¡¹ç›®æå‡ºï¼Œä¸€èˆ¬ç”¨äºææ¡ˆã€‚\n\nPRDï¼šProduct Requirement Document äº§å“éœ€æ±‚æ–‡æ¡£ï¼Œä¸€èˆ¬æ˜¯è¯´æ˜å®ç°çš„è¿‡ç¨‹ï¼Œè¾ƒä¸ºè¯¦ç»†ã€‚æœ‰äº›å…¬å¸ä¸ºäº†æ•æ·å¼€å‘éœ€è¦å¾ˆå¤šæ—¶å€™ä¼šç›´æ¥åœ¨åŸå‹å›¾ä¸Šé¢é€šè¿‡æ³¨é‡Šæ–¹å¼è¿›è¡Œæ›´ç›´è§‚çš„å±•ç¤ºã€‚\n\nPMDï¼šProgram Managment Document é¡¹ç›®ç®¡ç†æ–‡æ¡£ï¼Œä¸€èˆ¬åŒ…æ‹¬é¡¹ç›®è¿›åº¦ã€é¡¹ç›®èµ„æºã€è´£ä»»äººå’Œé¡¹ç›®è¾“å‡ºç‰©ï¼Œå¸¸è§„é€šè¿‡visioè¿›è¡Œç”˜ç‰¹å›¾ç»˜åˆ¶ç®¡ç†ã€‚è¯¥æ–‡æ¡£ä¸€èˆ¬è´¯ç©¿æ•´ä¸ªé¡¹ç›®å…¨ç¨‹ï¼Œè¡¡é‡é¡¹ç›®è¿›åº¦ã€‚\n\nBRDï¼šBusiness Requirement Document å•†ä¸šéœ€æ±‚æ–‡æ¡£ï¼Œæ˜¯åŸºäºå•†ä¸šç›®æ ‡æˆ–ä»·å€¼æ‰€æè¿°çš„äº§å“éœ€æ±‚å†…å®¹æ–‡æ¡£ï¼ˆæŠ¥å‘Šï¼‰ã€‚å…¶æ ¸å¿ƒçš„ç”¨é€”å°±æ˜¯ç”¨äºäº§å“åœ¨æŠ•å…¥ç ”å‘ä¹‹å‰ï¼Œç”±ä¼ä¸šé«˜å±‚ä½œä¸ºå†³ç­–è¯„ä¼°çš„é‡è¦ä¾æ®ã€‚å…¶å†…å®¹æ¶‰åŠå¸‚åœºåˆ†æï¼Œé”€å”®ç­–ç•¥ï¼Œç›ˆåˆ©é¢„æµ‹ç­‰ï¼Œé€šå¸¸æ˜¯ä¾›å†³ç­–å±‚ä»¬è®¨è®ºçš„æ¼”ç¤ºæ–‡æ¡£ï¼Œä¸€èˆ¬æ¯”è¾ƒçŸ­å°ç²¾ç‚¼ï¼Œæ²¡æœ‰äº§å“ç»†èŠ‚ã€‚\n\nDRDï¼šDesign Requirement Drawing äº¤äº’è®¾è®¡æ–‡æ¡£ï¼Œä¸€èˆ¬ç”¨æ¥æ‰¿è½½äº¤äº’è¯´æ˜ï¼Œå¹¶äº¤ä»˜ç»™å‰ç«¯ã€æµ‹è¯•ä»¥åŠå¼€å‘å·¥ç¨‹å¸ˆå‚è€ƒçš„æ–‡æ¡£ã€‚\n\nFSDï¼šFunctional Specifications Document åŠŸèƒ½è¯¦ç»†è¯´æ˜ï¼Œå®šä¹‰äº§å“åŠŸèƒ½éœ€æ±‚çš„å…¨éƒ¨ç»†èŠ‚ã€‚FSDä¸€èˆ¬é€šè¿‡ä¸€å¼ å¼ çš„æˆªå±å’Œä¸€æ¡æ¡åŠŸèƒ½ç‚¹æ¥å®šä¹‰äº§å“è§„æ ¼ã€‚è¿™æ˜¯ä¸€ä»½å¯ä»¥ç›´æ¥è®©å·¥ç¨‹å¸ˆåˆ›å»ºäº§å“çš„æ–‡æ¡£ã€‚\n\nPSDï¼šProduct Specifications Document äº§å“è§„æ ¼æ–‡æ¡£ï¼ŒPSDæ˜¯ä¸€ä¸ªè¾ƒä¸æµè¡Œçš„ç¼©å†™ï¼Œä½†æ˜¯åœ¨æœ‰è¿™æ ·ä¸€ä¸ªæ–‡æ¡£çš„æœºæ„ä¸­ï¼Œå®ƒå¤§ä½“å’Œä¸Šé¢æè¿°çš„åŠŸèƒ½è§„æ ¼æ–‡æ¡£ï¼ˆFSDï¼‰ç›¸åŒã€‚\n\nSRSï¼šSoftware Requirements Specification è½¯ä»¶éœ€æ±‚æ–‡æ¡£ï¼Œè½¯ä»¶éœ€æ±‚æ–‡æ¡£ï¼ˆSRSï¼‰æ˜¯å¦ä¸€è¾ƒä¸æµè¡Œçš„ç¼©å†™ï¼Œåœ¨åˆ›å»ºSRSçš„æœºæ„ä¸­ï¼Œå®ƒåœ¨å†…å®¹å’Œç»†èŠ‚ä¸Šå’Œä¸Šé¢æè¿°çš„PRDæˆ–FSDæœ‰äº›æƒ³åƒã€‚\n\nAARRRæ¨¡å‹ï¼šAcquisitionã€Activationã€Retentionã€Revenueã€Refer è¿™ä¸ªäº”ä¸ªå•è¯çš„ç¼©å†™ï¼Œåˆ†åˆ«å¯¹åº”è¿™ä¸€æ¬¾ç§»åŠ¨åº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­çš„5ä¸ªé‡è¦ç¯èŠ‚ã€‚åˆ†åˆ«ä¸ºï¼šè·å–ç”¨æˆ·ã€æé«˜æ´»è·ƒåº¦ã€æé«˜ç•™å­˜ç‡ã€è·å–æ”¶å…¥ã€è‡ªä¼ æ’­ã€‚\n\nRFMç”¨æˆ·æ¨¡å‹ï¼šR(Recency)è¡¨ç¤ºå®¢æˆ·æœ€è¿‘ä¸€æ¬¡è´­ä¹°çš„æ—¶é—´æœ‰å¤šè¿œï¼ŒF(Frequency)è¡¨ç¤ºå®¢æˆ·åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…è´­ä¹°çš„æ¬¡æ•°ï¼ŒM (Monetary)è¡¨ç¤ºå®¢æˆ·åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…è´­ä¹°çš„é‡‘é¢ã€‚\n\nç”¨æˆ·å¢é•¿çš„Så‹æ›²çº¿ã€Jå‹æ›²çº¿ï¼šæŒ‡å¤§å¤šæ•°äº§å“ï¼Œåœ¨äº§å“å‘å±•å‘¨æœŸä¸­ï¼Œéƒ½ä¼šéµå¾ªSå‹æ›²çº¿çš„å¢é•¿æ–¹å¼ï¼›ä½†æœ‰äº›äº§å“ï¼Œå¯èƒ½äº§ç”ŸJå‹æ›²çº¿æ— é™å¢é•¿ã€‚\n\nç”¨æˆ·é‡‘å­—å¡”æ¨¡å‹ï¼šç¬¬ä¸€çº§æ˜¯ç¤¾åŒºçš„ç®¡ç†äººå‘˜ã€‚ç¬¬äºŒçº§æ˜¯ç”¨æˆ·ç®¡ç†å·¥å…·ã€‚ç¬¬ä¸‰çº§æ˜¯æœ‰ä»·å€¼ç”¨æˆ·ï¼ŒåŸºæœ¬å°±æ˜¯åœ¨ç¤¾åŒºé‡Œé¢è¶³å¤Ÿæ´»è·ƒï¼Œå¹¶ä¸”ç»™ä½ çš„ç¤¾åŒºè´¡çŒ®æœ‰æ•ˆä»·å€¼çš„é‚£äº›ç”¨æˆ·ã€‚ç¬¬å››çº§ä¸€èˆ¬æ€§ç”¨æˆ·ã€‚\n\nOOï¼šObject Oriented é¢å‘å¯¹è±¡ï¼Œæ˜¯ä¸€ç§æŠŠé¢å‘å¯¹è±¡çš„æ€æƒ³åº”ç”¨äºè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒæŒ‡å¯¼å¼€å‘æ´»åŠ¨çš„ç³»ç»Ÿæ–¹æ³•ï¼Œæ˜¯å»ºç«‹åœ¨â€œå¯¹è±¡â€æ¦‚å¿µåŸºç¡€ä¸Šçš„æ–¹æ³•å­¦ã€‚\n\nOOAï¼šObject Oriented Analysis é¢å‘å¯¹è±¡åˆ†æï¼Œæ˜¯ç¡®å®šéœ€æ±‚æˆ–è€…ä¸šåŠ¡çš„è§’åº¦ï¼ŒæŒ‰ç…§é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥åˆ†æä¸šåŠ¡ã€‚\n\nOODï¼šObject Oriented Design é¢å‘å¯¹è±¡è®¾è®¡ï¼Œæ˜¯OOæ–¹æ³•ä¸­ä¸€ä¸ªä¸­é—´è¿‡æ¸¡ç¯èŠ‚ã€‚å…¶ä¸»è¦ä½œç”¨æ˜¯å¯¹OOAåˆ†æçš„ç»“æœä½œè¿›ä¸€æ­¥çš„è§„èŒƒåŒ–æ•´ç†ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¢«OOPç›´æ¥æ¥å—ã€‚\n\nOOPï¼šObject Oriented Programming é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼ŒOOP çš„ä¸€æ¡åŸºæœ¬åŸåˆ™æ˜¯è®¡ç®—æœºç¨‹åºæ˜¯ç”±å•ä¸ªèƒ½å¤Ÿèµ·åˆ°å­ç¨‹åºä½œç”¨çš„å•å…ƒæˆ–å¯¹è±¡ç»„åˆè€Œæˆã€‚\n\nCMSï¼šContent Management System å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§ä½äºWEB å‰ç«¯ï¼ˆWeb æœåŠ¡å™¨ï¼‰å’Œåç«¯åŠå…¬ç³»ç»Ÿæˆ–æµç¨‹ï¼ˆå†…å®¹åˆ›ä½œã€ç¼–è¾‘ï¼‰ä¹‹é—´çš„è½¯ä»¶ç³»ç»Ÿã€‚å†…å®¹çš„åˆ›ä½œäººå‘˜ã€ç¼–è¾‘äººå‘˜ã€å‘å¸ƒäººå‘˜ä½¿ç”¨å†…å®¹ç®¡ç†ç³»ç»Ÿæ¥æäº¤ã€ä¿®æ”¹ã€å®¡æ‰¹ã€å‘å¸ƒå†…å®¹ã€‚\n\nAdsensï¼šGoogle AdSense æ˜¯ä¸€ç§è·å–æ”¶å…¥çš„å¿«é€Ÿç®€ä¾¿çš„æ–¹æ³•ï¼Œé€‚åˆäºå„ç§è§„æ¨¡çš„ç½‘ç«™å‘å¸ƒå•†ã€‚å®ƒå¯ä»¥åœ¨ç½‘ç«™çš„å†…å®¹ç½‘é¡µä¸Šå±•ç¤ºç›¸å…³æ€§è¾ƒé«˜çš„ Googleå¹¿å‘Šï¼Œå¹¶ä¸”è¿™äº›å¹¿å‘Šä¸ä¼šè¿‡åˆ†å¤¸å¼ é†’ç›®ã€‚\n\nPPCï¼šPay Per Click ç‚¹å‡»ä»˜è´¹å¹¿å‘Šï¼Œè§„åˆ™æ˜¯å¹¿å‘Šä¸»åªæœ‰å½“ä½¿ç”¨è€…å®é™…ä¸Šç‚¹å‡»å¹¿å‘Šä»¥æ‹œè®¿å¹¿å‘Šä¸»çš„ç½‘ç«™æ—¶ï¼Œæ‰éœ€è¦æ”¯ä»˜è´¹ç”¨ã€‚\n\nDSPï¼šDemand-Side Platform éœ€æ±‚æ–¹å¹³å°å¹¿å‘Šï¼Œå®ƒæœåŠ¡äºå¹¿å‘Šä¸»ï¼Œå¸®åŠ©å¹¿å‘Šä¸»åœ¨äº’è”ç½‘æˆ–è€…ç§»åŠ¨äº’è”ç½‘ä¸Šè¿›è¡Œå¹¿å‘ŠæŠ•æ”¾ï¼ŒDSPå¯ä»¥ä½¿å¹¿å‘Šä¸»æ›´ç®€å•ä¾¿æ·åœ°éµå¾ªç»Ÿä¸€çš„ç«ä»·å’Œåé¦ˆæ–¹å¼ï¼Œå¯¹ä½äºå¤šå®¶å¹¿å‘Šäº¤æ˜“å¹³å°çš„åœ¨çº¿å¹¿å‘Š,ä»¥åˆç†çš„ä»·æ ¼å®æ—¶è´­ä¹°é«˜è´¨é‡çš„å¹¿å‘Šåº“å­˜ã€‚\n\nSSPï¼šSell-Side Platform ä¾›åº”æ–¹å¹³å°ï¼Œé€šè¿‡è¿™ä¸€å¹³å°ï¼Œåª’ä½“ä¸»å¸Œæœ›ä»–ä»¬çš„åº“å­˜å¹¿å‘Šå¯ä»¥è·å¾—æœ€é«˜çš„æœ‰æ•ˆæ¯åƒæ¬¡å±•ç¤ºè´¹ç”¨ï¼Œè€Œä¸å¿…ä»¥ä½ä»·é”€å”®å‡ºå»ã€‚\n\nDMPï¼šData-Management Platform æ•°æ®ç®¡ç†å¹³å°ï¼Œæ•°æ®ç®¡ç†å¹³å°èƒ½å¤Ÿå¸®åŠ©æ‰€æœ‰æ¶‰åŠå¹¿å‘Šåº“å­˜è´­ä¹°å’Œå‡ºå”®çš„å„æ–¹ç®¡ç†å…¶æ•°æ®ã€æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ç¬¬ä¸‰æ–¹æ•°æ®ã€å¢å¼ºä»–ä»¬å¯¹æ‰€æœ‰è¿™äº›æ•°æ®çš„ç†è§£ã€ä¼ å›æ•°æ®æˆ–å°†å®šåˆ¶æ•°æ®ä¼ å…¥æŸä¸€å¹³å°ï¼Œä»¥è¿›è¡Œæ›´å¥½åœ°å®šä½ã€‚\n\nRTBï¼šReal Time Bidding å®æ—¶ç«ä»·ï¼ŒRTBæ˜¯ä¸€ç§æŠ€æœ¯ä¸ºç‹çš„ç²¾å‡†è¥é”€æ‰‹æ®µï¼Œå½“ä¸€ä¸ªç”¨æˆ·åœ¨å…¨ç½‘æµè§ˆè¿‡æŸç§å•†å“ï¼Œæˆ–ç‚¹å‡»è¿‡ç‰¹æ®Šç±»ç›®çš„å¹¿å‘Šåï¼Œå…¶æµè§ˆç—•è¿¹éƒ½ä¼šé€šè¿‡cookieè®°å½•åœ¨æ¡ˆï¼Œè€Œé€šè¿‡å¹¿å‘Šäº¤æ˜“å¹³å°ï¼Œä½ åœ¨ä¸‹ä¸€æ¬¡æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼Œå°†è¢«æ¨é€ç¬¦åˆåå¥½çš„å¹¿å‘Šã€‚\n\nSPAMï¼šæœç´¢å¼•æ“åƒåœ¾æŠ€æœ¯ï¼Œæœç´¢å¼•æ“åƒåœ¾æŠ€æœ¯æ˜¯åˆ©ç”¨ä¸é“å¾·çš„æŠ€å·§å»æé«˜è‡ªå·±æœç´¢å¼•æ“ä¸Šçš„æ’åã€‚\n\nCPC : ç½‘ç»œä¸­æœ€å¸¸è§çš„ä¸€ç§å¹¿å‘Šå½¢å¼ï¼Œå®ƒæ˜¯è‹±æ–‡å•è¯ Cost Per Click çš„ç¼©å†™æ„æ€å°±æ˜¯æ¯æ¬¡ç‚¹å‡»ä»˜è´¹å¹¿å‘Šã€‚\n\nCPM : Cost Per Thousand å¹¿å‘ŠæŠ•æ”¾è¿‡ç¨‹ä¸­ï¼Œ1000æ¬¡å±•ç°çš„è´¹ç”¨ã€‚\n\nCPAï¼šCost Per Action æ¯è¡ŒåŠ¨æˆæœ¬ã€‚æŒ‡æŠ•æ”¾æŒ‰å¹¿å‘Šå®é™…æ•ˆæœï¼Œå³æŒ‰å›åº”çš„æœ‰æ•ˆé—®å·æˆ–å®šå•æ¥è®¡è´¹ï¼Œè€Œä¸é™å¹¿å‘ŠæŠ•æ”¾é‡ã€‚\n\nCPRï¼šæ¯å›åº”æˆæœ¬ï¼ŒCost Per Responseï¼Œä»¥æµè§ˆè€…çš„æ¯ä¸€ä¸ªå›åº”è®¡è´¹ã€‚\n\nCPP: æ¯è´­ä¹°æˆæœ¬,Cost Per Purchase,å¹¿å‘Šä¸»ä¸ºè§„é¿å¹¿å‘Šè´¹ç”¨é£é™©ï¼Œåªæœ‰åœ¨ç½‘ç»œç”¨æˆ·ç‚¹å‡»æ——å¸œå¹¿å‘Šå¹¶è¿›è¡Œåœ¨çº¿äº¤æ˜“åï¼Œæ‰æŒ‰é”€å”®ç¬”æ•°ä»˜ç»™å¹¿å‘Šç«™ç‚¹è´¹ç”¨ã€‚\n\nCPSï¼šCost Per Sales æ¯é”€å”®æˆæœ¬ï¼Œä»¥å®é™…é”€å”®äº§å“æ•°é‡æ¥è®¡ç®—å¹¿å‘Šè´¹ç”¨çš„å¹¿å‘Šï¼Œè¿™ç§å¹¿å‘Šæ›´å¤šçš„é€‚åˆè´­ç‰©ç±»ã€å¯¼è´­ç±»ã€ç½‘å€å¯¼èˆªç±»çš„ç½‘ç«™ï¼Œéœ€è¦ç²¾å‡†çš„æµé‡æ‰èƒ½å¸¦æ¥è½¬åŒ–ã€‚\n\nCPTï¼šCost Per Time æŒ‰æ—¶é—´æˆæœ¬ï¼Œè¿™ç§æ–¹å¼çš„ç‰¹ç‚¹æ˜¯æŒ‰ç”¨æˆ·ä½¿ç”¨æ—¶é•¿æˆ–ä½¿ç”¨å‘¨æœŸè®¡è´¹ï¼Œå¯ä»¥ä»æ ¹æœ¬ä¸Šæœç»åˆ·æµé‡ã€æ¿€æ´»ä½œå¼Šï¼Œæ˜¯æœ€çœŸå®çš„ã€æœ‰æ•ˆçš„è¥é”€æ–¹å¼ä¹‹ä¸€ã€‚\n\nDAUï¼šDaily Active User æ—¥æ´»è·ƒç”¨æˆ·æ•°é‡ï¼Œç»Ÿè®¡ä¸€æ—¥ï¼ˆç»Ÿè®¡æ—¥ï¼‰ä¹‹å†…ï¼Œç™»å½•æˆ–ä½¿ç”¨äº†æŸä¸ªäº§å“çš„ç”¨æˆ·æ•°ï¼ˆå»é™¤é‡å¤ç™»å½•çš„ç”¨æˆ·ï¼‰ã€‚\n\nWAUï¼šWeekly Active Users ä¸ƒå¤©å†…ç™»é™†è¿‡äº§å“çš„ç”¨æˆ·æ•°ã€‚ç»Ÿè®¡ä¸€å‘¨ä¹‹å†…ï¼ˆç»Ÿè®¡æ—¥ï¼‰ä¹‹å†…ï¼Œç™»å½•æˆ–ä½¿ç”¨äº†æŸä¸ªäº§å“çš„ç”¨æˆ·æ•°ï¼ˆå»é™¤é‡å¤ç™»å½•çš„ç”¨æˆ·ï¼‰ã€‚\n\nMAUï¼šMonthly Active User æœˆæ´»è·ƒç”¨æˆ·é‡ï¼Œç»Ÿè®¡ä¸€æœˆä¹‹å†…ï¼ˆç»Ÿè®¡æ—¥ï¼‰ä¹‹å†…ï¼Œç™»å½•æˆ–ä½¿ç”¨äº†æŸä¸ªäº§å“çš„ç”¨æˆ·æ•°ï¼ˆå»é™¤é‡å¤ç™»å½•çš„ç”¨æˆ·ï¼‰ã€‚\n\nDOUï¼šDay Old User æ—¥è€ç©å®¶ç”¨æˆ·ï¼Œè¡¨ç¤ºå½“å¤©ç™»å½•æ¸¸æˆçš„è€ç©å®¶ï¼ŒæŒ‡éå½“å¤©æ–°å¢çš„ç”¨æˆ·ã€‚\n\nDNUï¼šDay New User æ—¥æ–°å¢ç”¨æˆ·ï¼Œè¡¨ç¤ºå½“å¤©çš„æ–°å¢ç”¨æˆ·ã€‚\n\nACUï¼šAverage Concurrent Users å¹³å‡åŒæ—¶åœ¨çº¿äººæ•°ã€‚\n\nPCUï¼šPeak Concurrent Users æœ€é«˜åŒæ—¶åœ¨çº¿äººæ•°ã€‚\n\nUVï¼šUnique Visitor å”¯ä¸€è®¿é—®é‡ï¼Œå¯ä»¥ç†è§£ä¸ºé¡µé¢è¢«å¤šå°‘äººçœ‹è¿‡ã€‚\n\nPVï¼šPage View é¡µé¢æµè§ˆé‡ï¼Œå¯ä»¥ç†è§£ä¸ºé¡µé¢è¢«äººçœ‹è¿‡çš„æ€»æ¬¡æ•°ã€‚ç”¨æˆ·æ¯1æ¬¡å¯¹ç½‘ç«™ä¸­çš„æ¯ä¸ªç½‘é¡µè®¿é—®å‡è¢«è®°å½•1æ¬¡ã€‚ç”¨æˆ·å¯¹åŒä¸€é¡µé¢çš„å¤šæ¬¡è®¿é—®ï¼Œè®¿é—®é‡ç´¯è®¡ã€‚\n\nRV: Repeat Visitors é‡å¤è®¿å®¢ã€‚ \n\nARPUï¼šAverage Revenue Per User å¹³å‡æ¯æ´»è·ƒç”¨æˆ·æ”¶ç›Šã€‚è½¬åŒ–ç‡ï¼šç”¨æˆ·ç‚¹å‡»é¡µé¢åï¼Œäº§ç”Ÿè¢«æœŸæœ›çš„ç‰¹å®šè¡Œä¸ºçš„æ•°é‡ï¼Œå æ€»é‡çš„æ¯”ã€‚\n\nARPPUï¼šAverage Revenue Per Paying User æ¯ä»˜è´¹ç”¨æˆ·å¹³å‡æ”¶ç›Šã€‚ç»Ÿè®¡å‘¨æœŸå†…ï¼Œä»˜è´¹ç”¨æˆ·å¯¹äº§å“äº§ç”Ÿçš„å¹³å‡æ”¶å…¥ã€‚\n\nLTVï¼šLife Time Value LTV ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼Œæ˜¯äº§å“ä»ç”¨æˆ·æ‰€æœ‰çš„äº’åŠ¨ä¸­æ‰€å¾—åˆ°çš„å…¨éƒ¨ç»æµæ”¶ç›Šçš„æ€»å’Œã€‚\n\nCACï¼šCustomer Acquisition Cost ç”¨æˆ·è·å–æˆæœ¬ï¼Œè·å–ç”¨æˆ·æ‰€èŠ±è´¹çš„æˆæœ¬ã€‚\n\nKPIï¼šKey Performance Indicator å…³é”®ç»©æ•ˆæŒ‡æ ‡ï¼Œæ˜¯ä¼ä¸šç»©æ•ˆè€ƒæ ¸çš„æ–¹æ³•ä¹‹ä¸€ã€‚\n\nROIï¼šReturn On Investment æŠ•èµ„å›æŠ¥ç‡ï¼ŒæŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰&#x3D;åˆ©æ¶¦æ€»é¢&#x2F;æŠ•å…¥æˆæœ¬æ€»é¢Ã—100%\n\næŠ½ç¦»é€ä¼ ï¼šâ€œæŠ½ç¦»ä¸»è§‚æ„Ÿå—â€ç„¶åè¿›è¡Œâ€œé€æ˜ä¼ æ’­â€ï¼Œå°±æ˜¯è¯´åœ¨ä¼ é€’ä¿¡æ¯æ—¶ï¼Œä¸è¦ä¼ é€’å¸¦ç€ä½ çš„æƒ…ç»ªã€åˆ¤æ–­ï¼ŒæŠŠä½ å¾—åˆ°çš„ä¿¡æ¯é€æ˜åœ°ä¼ é€’å‡ºå»ã€‚\n\né¡¶å±‚è®¾è®¡ï¼šåŸºæœ¬æ¦‚å¿µæ˜¯è¿ç”¨ç³»ç»Ÿè®ºçš„æ–¹æ³•ï¼Œä»å…¨å±€çš„è§’åº¦ï¼Œå¯¹æŸé¡¹ä»»åŠ¡æˆ–è€…æŸä¸ªé¡¹ç›®çš„å„æ–¹é¢ã€å„å±‚æ¬¡ã€å„è¦ç´ ç»Ÿç­¹è§„åˆ’ï¼Œä»¥é›†ä¸­æœ‰æ•ˆèµ„æºï¼Œé«˜æ•ˆå¿«æ·åœ°å®ç°ç›®æ ‡ã€‚\n\nåº•å±‚é€»è¾‘ï¼šå³æ˜¯å“²å­¦ä¸­æ‰€è®²çš„äº‹ç‰©å‘å±•çš„ä¸»è¦çŸ›ç›¾ï¼Œç­–åˆ’æ–¹æ¡ˆä¸­ï¼Œå¤šç”¨ä¸åˆ†æéƒ¨åˆ†ï¼ŒæŒ‡ç°è±¡æˆ–è€…äº‹ä»¶çš„æ ¹æœ¬åŸå›  ã€‚\n\nå‚ç›´é¢†åŸŸï¼šå‚ç›´é¢†åŸŸï¼Œäº’è”ç½‘è¡Œä¸šæœ¯è¯­ï¼Œä¸ºé™å®šç¾¤ä½“æä¾›ç‰¹å®šæœåŠ¡ï¼ŒåŒ…æ‹¬å¨±ä¹ã€åŒ»ç–—ã€ç¯ä¿ã€æ•™è‚²ã€ä½“è‚²ç­‰äº§ä¸šã€‚\n\nå­˜é‡åšå¼ˆï¼šå­˜é‡åšå¼ˆæ˜¯æŒ‡åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹äº‰å¤ºå¸‚åœºä»½é¢\n\nå¢é‡åšå¼ˆï¼šå¢é‡åšå¼ˆæ˜¯åœ¨åšå¤§è›‹ç³•çš„è¿‡ç¨‹ä¸­é€šè¿‡åšå¼ˆè·å–æ›´å¤šæˆ–æ›´å°‘çš„ä»½é¢ï¼Œåœ¨è¥é”€ä¸­æŒ‡åœ¨å¢é‡å¸‚åœºï¼ŒæŠ¢å å¸‚åœºä»½é¢ã€‚\n\nç»„åˆæ‹³ï¼šæœ¬æ„æ˜¯åœ¨æ‹³æ³•å½“ä¸­åˆ©ç”¨å„ç§å•ä¸€æ‹³æ³•çš„ç»„åˆè¿ç»­æ”»å‡»ï¼Œåœ¨è¥é”€ç­–åˆ’ä¸­ï¼ŒæŒ‡é‡‡ç”¨å¤šç§è¥é”€æ‰‹æ®µæ¥è¾¾åˆ°æœ€ç»ˆè¥é”€è¯‰æ±‚ ã€‚\n\nå‡»ç©¿ï¼šæ¯”å–»ç»å—å·¨å¤§çš„å†²å‡»å¯¼è‡´æ•ˆæœæ˜¾è‘—ã€‚è´¬ä¹‰ä¸ŠæŒ‡æ‰¿å—ä¸ä½å†²å‡»å´©æºƒã€‚\n\né—­ç¯ï¼šç”¨æ¥æè¿°ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥ä¸å€ŸåŠ©å¤–åŠ›å®Œæˆä¸€å¥—å®Œæ•´çš„å•†ä¸šé€»è¾‘ã€‚\n\nå’¬åˆï¼šç”¨æ¥æè¿°åœ¨è·¨éƒ¨é—¨é¡¹ç›®ä¸Šï¼Œéƒ¨é—¨äººå‘˜ä¹‹é—´çš„è”åŠ¨æ•ˆæœã€‚\n\nå£å’ï¼šå¤æ—¶å€™æŒ‡æˆ˜äº‰ä¸­çš„é˜²å¾¡å·¥äº‹ï¼Œåœ¨ç­–åˆ’æ¡ˆä¸­ï¼ŒæŒ‡å“ç‰Œä¸å¯å¤åˆ¶ã€ä¸å¯è¶…è¶Šçš„ä¸“å±æ€§ä¼˜åŠ¿ï¼Œå¤šç”¨äºæˆ˜ç•¥å’Œç­–ç•¥éƒ¨åˆ† ã€‚\n\næä¾›æƒ…ç»ªä»·å€¼ï¼šæ‹é©¬å±\n\n\næ±‡æ€»è½åœ°ã€æ²‰æ·€ã€ç»™åˆ°ã€å“åº”ã€åŒæ­¥ã€å¯¹é½ã€å¯¹æ ‡ã€è¿­ä»£ã€ä¼˜åŒ–ã€è·Ÿè¿›ã€å‡çº§ã€äº¤ä»˜ã€èšç„¦ã€å€’é€¼ã€å¤ç›˜ã€æ¢³ç†ã€è¾“å‡ºã€æç‚¼ã€åŒ…è£…ã€ä¸Šå‡ã€æ–¹æ¡ˆã€æ‘¸ç´¢ã€è¸©å‘ã€å¡«å‘ã€æŠ¥å¤‡ã€ä¸²è”ã€ååŒã€è”åŠ¨ã€é€ä¼ æ‰“é€šã€æ‰“å¹³ã€æŠ¹å¹³ã€å‘åŠ›ã€å…¼å®¹ã€é‡åŒ–ã€ç»†åˆ†ã€é‡å¡‘ã€è“„èƒ½ã€å¼•çˆ†ã€æŒ–æ˜ã€èƒŒä¹¦ã€èƒŒé”…ã€æ”¯æŒã€æ”¯æ’‘ã€åè°ƒã€æ”¯æ´ã€åŠ æŒã€åŠ é€Ÿã€å…±å»ºã€å…±åˆ›ã€èåˆã€æ‹‰é€šã€æ‹‰å‡ã€æ´å¯Ÿã€æ¸—é€ã€å’¬åˆã€ç©¿æ¢­ã€è¾å°„æ‰©å±•ã€å¼€æ‹“ã€å…œåº•ã€é™çº§ã€å®¹é”™ã€å®¹ç¾ã€è§£è€¦ã€è€¦åˆã€å¤ç”¨ã€å°è£…ã€æŠ½è±¡ã€èšåˆã€é›†æˆã€æ‹†è§£ã€æŠ“åŒ…ã€è§‚å¯Ÿã€ç›‘æ§ã€ä¸ŠæŠ¥ã€æ•è·ã€åˆ†å‘ã€åˆ†å±‚ã€è¿ç§»ã€å›æº¯ã€å›å½’ã€å›æµã€å›è·³ã€èµ‹èƒ½ã€é€šæ™’ã€åƒé€ã€æ­»ç£•ã€æ ‘ç«‹ã€è·¨ç•Œã€å…±æƒ…ã€æ¼”ç»ã€ç”»é¥¼ã€æ‰“é€ ã€åå“ºã€è¾“è¡€ã€é€ è¡€ã€é€ åŠ¿ã€é€ å¸‚ã€é€ äº‹ã€ä¸‹æ²‰ã€æ‹‰æ–°ã€è½¬åŒ–ã€ç•™å­˜ã€ä¿ƒæ´»ã€ä»˜è´¹ã€è¥æ”¶ã€ç›ˆåˆ©ã€è·å®¢ã€é‚€è¯·ã€åŠ©åŠ›ã€æ¿€åŠ±ã€æ¿€æ´»ã€æ¨å¹¿ã€æŠ•æ”¾ã€å¯¼æµçœ‹ç›–ã€æ›å…‰ã€è£‚å˜ã€å¢é•¿ã€ä¼˜ç§€ã€æ„Ÿæ©ã€æ¯”å¿ƒã€ç¬”èŠ¯ã€ä¸‹è·ªã€è‡´æ•¬ã€è®¢é˜…ã€è®¤è¯ã€æ¨é€ã€å”¤é†’ã€æµå¤±ã€å¬å›ã€æˆæƒã€æ¥å…¥ã€é“¸é€ ã€æ„ç­‘ã€æ„å»ºã€æ­å»ºã€å¸ƒå±€ã€ç»„å±€ã€æ‘¸é±¼ã€åˆ’æ°´ã€ä¼—ç­¹ã€æ”¶å‰²ã€å…±äº«é‡ç»„ã€æ”¶å£ã€è½¬å‹ã€å›´ç»•ã€å‡ºå‡»ã€è¯è¨€ã€ç¡®è®¤ã€æ˜ç¡®ã€è¯„ä¼°ã€è¯„å®¡ã€åŠ¡å®ã€å¤¯å®ã€é¢„åˆ¤ã€é¢„è¨€ã€å˜è¿ã€è¿”ä½£ã€æ·±å…¥ã€æ‰“ç£¨ã€æ”»åšã€å‡»ç©¿ã€ç ´å†°ã€ç ´é¢˜ã€è§£é¢˜ã€ç ´åœˆã€ç ´å±€ã€å®šé‡ã€å®šæ€§ã€åˆ¶çº¦ã€çº¦æŸè§¦åŠã€è§¦è¾¾ã€è§¦å‘ã€æ“ç›˜ã€æ€è€ƒã€åæ€ã€ç²¾ç®€ã€æ·±è€•ã€çªå›´ã€è¡¥ä½ã€æŠ½ç¦»ã€å±¥çº¦ã€è¿›åŒ–ã€è¿›å†›ã€èµ·é£çš®å®ã€æœ¬åˆ†ã€é‡ç£…ã€å‚ç›´ã€çœŸé¦™ã€è‡ªæ²»ã€ç²¾å‡†ã€æŒç»­ã€çµæ´»ã€ç¨³å®šã€å¯æ§ã€æ´»è·ƒ\n\næŠ“æ‰‹ã€æ¼æ–—ã€ä¸­å°ã€å¹³å°ã€é—­ç¯ã€é£å£ã€æ‰“æ³•ã€ç©æ³•ã€çŸ©é˜µã€çº½å¸¦ã€åˆºæ¿€ã€è§„æ¨¡ã€åœºæ™¯ã€æ¸ é“ã€å…¥å£ã€ç»´åº¦ã€æ ¼å±€ã€å½¢æ€ã€ç”Ÿæ€ã€ä½“ç³»ã€è®¤çŸ¥ã€ä½“æ„Ÿã€æ„ŸçŸ¥ã€å¿ƒæ™ºã€è°ƒæ€§ã€æˆ˜å½¹ã€åˆåŠ›ã€å¿ƒåŠ›ã€èµ›é“åŸºçŸ³ã€åŸºå› ã€å› å­ã€æ¨¡å‹ã€é€šé“ã€é“¾è·¯ã€æ°´ä½ã€æ°´å‡†ã€å§¿æ€ã€å¡ç‚¹ã€å¡ä½ã€å¤´éƒ¨ã€è…°éƒ¨ã€è¸éƒ¨ã€ç—›ç‚¹ã€çˆ½ç‚¹ã€ç—’ç‚¹ã€å…¨åŸŸã€å…¬åŸŸã€ç§åŸŸã€æœ¬æˆ‘ã€è‡ªæˆ‘ã€è¶…æˆ‘ã€è“æµ·ã€çº¢æµ·ã€çºµå‘ã€æ¨ªå‘ã€ä¸Šé™ã€ä¸‹é™ä¸Šæ¸¸ã€ä¸‹æ¸¸ã€é—½å€¼ã€åœºåŸŸã€æ¶æ„ã€ç³»ç»Ÿã€æ ‡é…ã€é•¿å°¾ã€æ€åŠ¿ã€é”šç‚¹ã€æ ‡æ†ã€å£å’ã€å˜é‡ã€æœŸæƒã€è¾¹ç•Œã€å“ç‰Œã€é˜µåœ°ã€é«˜åœ°ã€æ´¼åœ°ã€é«˜ç©ºã€é©å‘½ã€å˜é©ã€å†…å·ã€å¤–åŒ…ã€ç¦æŠ¥ã€è„‘æš´ã€è„‘æ´ã€åœˆå±‚ã€å±‚çº§æ®µä½ã€ç¯èŠ‚ã€é—²å±€ã€è¯æœ¯ã€æ–‡æ¡ˆã€è®®ç¨‹ã€å…¬å…³ã€PRç¨¿ã€é…ç§°ã€åŠ›åœºã€é­”æ–¹ã€è§¦ç‚¹ã€åŠ¿èƒ½ã€æµé‡ã€èµ„æºã€æ’æœŸã€å»¶æœŸã€å¼¹çª—ã€æµ®å±‚ã€å¼•å¯¼ã€è’™å±‚ã€å¹•å¸˜ã€é®ç½©ã€åŸ‹ç‚¹ã€å‘ä½ã€æ¥¼å±‚ã€æŒ‰é’®ã€æ¨é€ã€çº¢åŒ…å³°å€¼ã€æ¼æ´ã€é£é™©ã€ç“¶é¢ˆã€ç­–ç•¥ã€ä»·å€¼ã€æˆæœ¬ã€å¤åˆ©ã€äººæ€§ã€åˆ©å™¨ã€æ·±åº¦ã€ç©å®¶ã€å°ç™½ã€éèœã€ç¾Šæ¯›ã€ç¦åˆ©ã€å¥—è·¯ã€æƒ…æ€€ã€æ ‡å‡†ã€è§„èŒƒã€æŠ¥å¤‡ã€ç¤¾ç¾¤ã€äº§ä¸šã€è½½ä½“ã€æœåŠ¡ã€ç²˜æ€§ã€å±æ€§ã€åœ°åŸŸã€ç»ˆç«¯ç‰ˆæœ¬ã€å£ç¢‘ã€æŒ‡æ ‡ã€å¹´æ¡†ã€è¯•ç‚¹ã€æ¯ä½“ã€ç©ºç™½ã€é“¶å¼¹\n\nå¯¹ä¸€ä¸‹ã€ç¢°ä¸€ä¸‹ã€è¿‡ä¸€ä¸‹ã€æŠ¢å“ç±»ã€å¡è®¤çŸ¥ã€å åœºæ™¯ã€è§‚è¡Œä¸šã€æ˜ç«äº‰ã€æ´è‡ªèº«ã€å¼€åœºå­ã€æè°ƒå­ã€å†·å¯åŠ¨ã€ç§€è‚Œè‚‰ã€å€Ÿä¸œé£ã€æ–­èˆç¦»ã€å©·ç¾Šæ¯›ã€ç ä¸€åˆ€ã€èµ°å‡ºå»ã€è®²æ•…äº‹æ‰å¹³åŒ–ã€å·®å¼‚åŒ–ã€å¹³å°åŒ–ã€ç»“æ„åŒ–ã€ç²¾ç»†åŒ–ã€çŸ­å¹³å¿«ã€å¸¸æ€åŒ–ã€å¼ºä¾èµ–ã€ä¸å¯æ§\n\næ„ŸçŸ¥åº¦ã€é¢—ç²’åº¦ã€æ–¹æ³•è®ºã€ç»„åˆæ‹³ã€å¼•çˆ†ç‚¹ã€æŠ¤åŸæ²³ã€å½±å“åŠ›ã€èµ„æºä½ã€ä¼˜å…ˆçº§ã€åˆ¶é«˜ç‚¹ã€å¯ç”¨æ€§æ˜“ç”¨æ€§ã€ç¨³å®šæ€§ã€ä¾¿æ·æ€§ã€è€¦åˆæ€§ã€ä¸€è‡´æ€§ã€ç³»ç»Ÿæ€§ã€ç«¯åˆ°ç«¯ã€ç‚¹å¯¹ç‚¹ã€ç‚¹çº¿é¢ã€ä¸ŠåŠåœºã€ä¸‹åŠåœºä¸»æˆ˜åœºã€åŸºæœ¬é¢ã€åŸºæœ¬ç›˜ã€æ“ç›˜æ‰‹ã€è¿›åŒ–è®ºã€è§£é‡Šæƒã€æœ€ä¼˜è§£ã€æ‰§è¡ŒåŠ›ã€é©±åŠ¨åŠ›ã€é„™è§†é“¾äººè´§åœºç”Ÿæ€é“¾ã€ç”Ÿæ€åœˆå…¨æ¸ é“å…¨æ–¹ä½ã€å…¨åª’ä½“ã€æµé‡æ± ã€å¤©èŠ±æ¿ã€ä¼ è¯ç­’ã€è½¬åŒ–ç‡ç”Ÿæ€ä½ã€å…¨åœºæ™¯ã€æ–°é›¶å”®ã€æ–°ç‰©ç§ã€æ–°å“ç‰Œã€æ´»è·ƒåº¦ã€é¢—ç²’æ„Ÿç™»äº‘æ¢¯ã€å†²å‡»åŠ›ã€è§†è§‰é”¤ã€å­µåŒ–å™¨ã€æ–°ç¯‡ç« ã€æ–°å±€åŠ¿æ–°èµ›é“ã€æ–°åŠ¿èƒ½ã€æ–°å›½è´§ã€æ–°å›½æ½®ã€æ–°åŠ¨åŠ›ã€åŒç†å¿ƒæ°”æ°›ç»„ã€ç«äº‰åŠ›ã€å­˜åœ¨æ„Ÿã€è®¤åŒæ„Ÿã€å‚ä¸æ„Ÿå½’å±æ„Ÿã€ä½¿å‘½æ„Ÿã€å¿ è¯šåº¦ã€é¢„çƒ­æœŸã€é«˜å³°æœŸã€é«˜æ½®æœŸã€ä¸Šå‡æœŸã€ç“¶é¢ˆæœŸã€å¤§æ•°æ®ã€äº‘è®¡ç®—.ä»·å€¼è§‚ã€!åŒºå—é“¾ã€æ¯”ç‰¹å¸ã€è™šæ‹Ÿå¸ã€å¤©ä½¿è½®ã€è‡ªåª’ä½“ã€æ–°åª’ä½“ã€ä»·æ ¼é—¨ã€è¶…é¢„æœŸã€å°å‰å°ã€å¤§ä¸­å°ã€å‡èšåŠ›ã€å‘å¿ƒåŠ›\n\næ”¯æ£±èµ·æ¥ã€å¿«é€Ÿå“åº”ã€å°æ­¥å¿«è·‘ã€ä»·å€¼è½¬åŒ–ã€å¼ºåŒ–è®¤çŸ¥ã€èµ„æºç½®æ¢ã€èµ„æºå€¾æ–œã€èµ„æºé…ç½®ã€å®Œå–„é€»è¾‘ã€å»ä¸­å¿ƒåŒ–ã€æ¸ é“ä¸‹æ²‰ã€ç”¨æˆ·ä¸‹æ²‰ã€é™ç»´æ‰“å‡»ã€ä½“éªŒåº¦é‡ã€é«˜é¢‘è§¦è¾¾ã€å¿«é€Ÿè¿­ä»£ã€æŒç»­è¿­ä»£ã€æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­è§‚å¯Ÿã€èº¬èº«å…¥å±€ã€é¡ºåŠ¿è€Œä¸ºã€æ‰“ç ´ç»“ç•Œã€å‡ç»´å®šä½ã€æœ‰æœºç»“åˆã€èµ·æ‰¿è½¬åˆã€å­˜é‡ç»´æŒã€å¢é‡åšå¼ˆã€å¿ƒæ™ºè§’é€ã€æŠ½ç¦»é€ä¼ ã€æ‹¨å‡ å‚ä¼šã€åå¤ç¡®è®¤ã€ç»¼åˆè¯„ä¼°ã€åˆ»æ„ç»ƒä¹ ã€æ‰“ç ´åˆ¶çº¦.ç»å¢ƒæ±‚ç”Ÿã€å“ç‰Œéœ²å‡ºã€æ‹¥æŠ±å˜åŒ–ã€é‡æ–°å®šä¹‰ã€å€ŸåŠ¿è¥é”€ã€å†…å®¹åˆ›ä¸šã€å½’å› åˆ†æã€é€»è¾‘æ¨ç†ã€å»ºç«‹èŒƒå¼ã€æ€»ç»“æ²‰æ·€ã€è§£å†³é—®é¢˜ã€å é¢†å¿ƒæ™ºã€é«˜ä¸¾é«˜æ‰“ã€é«˜å¼€ä½èµ°ã€é«˜å°è·³æ°´ã€æ·±å…¥äº§ä¸šã€æ‹‰é½æ°´ä½ã€å…¨æƒ…æŠ•å…¥ã€å¦‚ä½•æ”¶å£ã€å…¨é¢å°é”ã€ååŒä½œæˆ˜ã€å‰‘èµ°åé”‹ã€å¼¹å°„èµ·é£\n\nç»“æœå¯¼å‘ã€ä¸šåŠ¡å¯¼å‘ã€èµ„æºç´§å¼ ã€äººåŠ›ä¸è¶³ã€ä½“æ„Ÿä¸å¥½ã€é£é™©å¯æ§ã€é€»è¾‘è‡ªæ´½ã€å“æ•ˆåˆä¸€ã€å…¨çƒé¢†å…ˆã€äººæ— æˆ‘æœ‰/äººæœ‰æˆ‘ä¼˜/äººä¼˜æˆ‘å˜ã€åŠ¿å¦‚ç ´ç«¹ã€åŠ¿ä¸å¯æŒ¡ã€çŸ³ç ´å¤©æƒŠ\n\nç”Ÿå‘½å‘¨æœŸã€å¤ç”¨æ‰“æ³•ã€å•†ä¸šæ¨¡å¼ã€å¹³å°æˆ˜ç•¥ã€é›†å›¢æˆ˜ç•¥ã€æˆ˜ç•¥å¼•è­¦ã€å…³é”®è·¯å¾„ã€å†³ç­–è·¯å¾„ã€å¤©ä½¿æŠ•èµ„ã€ç›ˆåˆ©æ¨¡å¼ã€åº•å±‚é€»è¾‘ã€é¡¶å±‚è®¾è®¡ã€é¥¥é¥¿è¥é”€ã€è¡Œä¸šå£å’ã€ä¸‹æ²‰å¸‚åœºã€æ¶ˆè´¹è®¤çŸ¥ã€äººå·¥æ™ºèƒ½ã€èµ›åšæ˜å…‹ã€æ™ºæ…§åŸå¸‚ã€è§£å†³ä¸‡æ¡ˆã€çŸ¥è¯†ä»˜è´¹ã€ç§åŸŸæµé‡ã€äº¤ä»˜ä»·å€¼ã€æ—¶é—´ä»·å€¼ã€å…±äº«ç»æµã€é€šè¯ç»æµã€ä¸­å¤®å¨æˆ¿ã€å…ˆå‘ä¼˜åŠ¿ã€çœŸå®åœºæ™¯ã€ä¸´é—¨ä¸€è„šã€çœŸé¦™å®šå¾‹ã€æ­£æ€åˆ†å¸ƒã€å¹‚å¾‹åˆ†å¸ƒã€äºŒå…«å®šå¾‹ã€é•¿å°¾ç†è®ºå åŠ æ•ˆåº”ã€é©¬å¤ªæ•ˆåº”ã€æ²‰æ²¡æˆæœ¬ã€è¾¹é™…æˆæœ¬ã€æœºä¼šæˆæœ¬ã€åå¥½æ¤å…¥ã€èš‚èšå¸‚åœºã€åœºæ™¯å ä½ã€äº§ä¸šé›†ç¾¤ã€äº§ä¸šæœåŠ¡ã€æ ‡æ†å¸‚åœºã€å¿ƒåŠ¨æƒ…å¢ƒã€åˆ©åŸºå¸‚åœºã€ç¬¬äºŒæ›²çº¿ã€å¢é•¿é£è½®ã€å‚ç›´é¢†åŸŸã€å¯æŒç»­æ€§ã€å¯æ›¿ä»£æ€§ã€è®¤çŸ¥ä¼˜åŠ¿ã€æ–°å¢é•¿ç‚¹ã€é¢ è¦†æ€åŠ¿ã€æœ€é«˜è§„åˆ¶ã€ä¸‰ä½ä¸€ä½“ã€èµ„æ·±ç©å®¶ã€ä¸ç ´ä¸ç«‹ã€ç²¾ç¥SPAã€ç”¨æˆ·å¿ƒæ™ºã€ç”¨æˆ·ç²˜æ€§ã€ç”¨æˆ·ä½“éªŒã€ç”¨æˆ·è®¤çŸ¥ã€ç”¨æˆ·ç”»åƒã€ç”¨æˆ·è°ƒç ”ã€é‡åº¦ç”¨æˆ·ã€æ²‰é»˜ç”¨æˆ·ã€æ´»è·ƒç”¨æˆ·ã€ç”¨æˆ·é»æ€§ã€åƒäººåƒé¢ã€åƒäººä¸€é¢ã€ä¿¡æ¯èŒ§æˆ¿ã€æµé‡çº¢åˆ©ã€æµé‡ä¸ºç‹ã€ä»·æ ¼æ­§è§†ã€æ„è¯†å½¢æ€ã€å¿ƒç†è´¦æˆ·ã€æƒ…ç»ªGç‚¹ã€å“ç‰ŒåŠ¿èƒ½ã€æœåŠ¡äº§ä¸šã€å…³é”®æ—¶æœŸã€æ²Ÿé€šåä½œã€æˆ˜ç•¥åˆåŠ›ã€å“ç‰Œèˆªæ¯ã€å“ç±»æˆ˜èˆ°ã€è¡Œå†›è·¯çº¿äº§å“å°–å…µã€æ‹³å¤´äº§å“ã€è¶…çº§ç¬¦å·ã€æŒ½ç•™å¼¹çª—ã€æ—¶é—´çª—å£ã€å®šæ€§å®šé‡ã€æˆ˜ç•¥æ”¯ç‚¹ã€å£°éŸ³å°è®°ã€ç¤¾äº¤è´§å¸ã€ä»˜è´¹ç¤¾ç¾¤ã€ç¥äº¤å·²ä¹…ã€è´¢åŠ¡è‡ªç”±\n\nå¤§æ•°æ®åˆ†æã€å¤§æ•°æ®æ€ç†Ÿã€å»¶è¿Ÿæ»¡è¶³æ„Ÿã€åœ°æ¯¯å¼è½°ç‚¸ã€é¥±å’Œå¼æ”»å‡»ã€å››ä¸¤æ‹¨åƒæ–¤ã€å¼€è¾Ÿæ–°è·¯å¾„ã€å»ºç«‹æ–°ä¹ æƒ¯ç”¨æˆ·æ— æ„ŸçŸ¥ã€å«å¥½åˆå«åº§ã€ä¼˜å…ˆçº§å¾ˆé«˜ã€æ‹‰æ–°æˆæœ¬é«˜ã€æ‰“å¼€ç‡æé«˜ã€ç•™å­˜ç‡å¥‡é«˜ã€æ´»è·ƒåº¦æ–°é«˜é¢ è¦†å¼åˆ›æ–°ã€è¿ç»­åˆ›ä¸šè€…ã€æŠ•å…¥äº§å‡ºæ¯”ã€äº’è”ç½‘æ€ç»´ã€äº’è”ç½‘çº¢åˆ©ã€å›½æ°‘æ€»æ—¶é—´ã€æœ€åä¸€å…¬é‡Œã€æµ·è±šæ¹¾æ¨¡å¼ã€æœ€å¤§å…¬çº¦æ•°ã€ç°è±¡çº§äº‹ä»¶ã€æ²‰æµ¸å¼ä½“éªŒã€ç”¨æˆ·å¿ è¯šåº¦ã€è‡ªåª’ä½“çŸ©é˜µã€ç—…æ¯’å¼è¥é”€ã€é£å£ä¸Šçš„çŒªã€æˆ˜ç•¥æ€§æŠ•èµ„ã€æˆ˜ç•¥æ€§äºæŸã€ç³»ç»Ÿæ€§é£é™©\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"å°æ‡’ï¼ˆè½¬è½½ï¼‰","url":"/post/2501563677.html","content":"äººç”Ÿäºä¸–ï¼Œä¸€å‘³å‹¤ï¼Œä¸è§å¾—æ˜¯å¥½äº‹ã€‚\nä¸äººå¤„ï¼Œå¾—å°æ‡’ã€‚ç®¡å¤´ç®¡è„šï¼Œå¤§åˆ°åŸåˆ™é—®é¢˜ï¼Œå°è‡³é¸¡æ¯›è’œçš®ï¼Œæ ·æ ·éƒ½æƒ³æ’ä¸€æ‰‹ã€‚è¿™æ ·çš„ç›¸å¤„æ¨¡å¼ï¼Œé™¤äº†æƒ¹äººåŒï¼Œå†éš¾æœ‰å…¶ä»–ç»“æœã€‚å®¹ä»–äººè—ç‚¹éšç§ï¼Œç»™å½¼æ­¤ç•™ç‚¹ç©ºé—´ï¼Œè¿™æ ·çš„å°æ‡’ï¼Œæ¯”èµ·æ‰€è°“çš„æ— å¾®ä¸è‡³æ›´ä»¤äººæ¬£èµã€‚\nä¸äººè¨€ï¼Œä¹Ÿå¾—å°æ‡’ã€‚è¯ä¸èƒ½è¯´å¾—å¤ªæ»¡ï¼Œæ„çŠ¹æœªå°½ä¹‹å¤„ï¼Œäºäººäºå·²éƒ½æ˜¯ä½™åœ°ã€‚ç•™æœ‰è¿™æ ·çš„ä½™åœ°ï¼Œæ—¥åæ‰å¥½è½¬åœœã€‚åŒæ ·çš„æ„æ€ï¼Œæ¨ªå†²ç›´æ’ä¸å©‰è½¬ç•™ä½™ï¼Œå¯èƒ½å¸¦æ¥ä¸åŒçš„ç»“æœã€‚ç•™ä¸€çº¿ï¼Œå¥½ç›¸è§ï¼Œè¿™æ ·çš„ç•™ï¼Œè‡ªç„¶æ˜¯å°æ‡’ã€‚\n\n\nè¨€è¯­ä¸­çš„å°æ‡’ï¼Œè¿˜åœ¨äºå€¾å¬ã€‚è¯ä¸è¯´æ»¡ï¼Œè¿™æ»¡æ˜¯è¯æ„ï¼Œä¹Ÿæ˜¯è¯é¢‘ã€‚ä¸€å‘³ç…§ç€è‡ªå·±çš„é¢‘ç‡è¯´ï¼Œä¸é¡¾å¯¹æ–¹çš„æ„Ÿå—ï¼Œä¹Ÿä¸ç†ä¼šå¯¹æ–¹çš„æƒ³æ³•ã€‚è¿™ç§å•æ–¹é¢çš„æ‰€è°“æ²Ÿé€šï¼Œæ¯”èµ·æ— è¨€çš„æ§›å°¬ï¼Œæ›´ä»¤äººå¿ƒç”Ÿåº†çƒ¦ã€‚è¯ä¸èƒ½è¯´å¾—å¤ªæ»¡ï¼Œä¹Ÿä¸èƒ½è¯´å¾—å¤ªå‹¤ï¼Œæ—¶æ—¶å¸¦ç€ç‚¹å°æ‡’ï¼Œå…³æ³¨å¯¹æ–¹çš„å¿ƒæ€ï¼Œç»™å¯¹æ–¹è¡¨è¾¾çš„æœºä¼šï¼Œè¿™æ‰æ˜¯ä¸¤ç›¸å®œçš„æ²Ÿé€šæ–¹å¼ã€‚\nç‹¬å¤„ï¼Œä¹Ÿå¾—å¸¦ç‚¹å°æ‡’ã€‚å¿™å¿™ç¢Œç¢Œï¼Œä¿—åŠ¡ç¼ èº«ï¼Œè¿™æ˜¯å¾ˆå¤šäººçš„å¸¸æ€ã€‚ä½†å†å¿™ï¼Œæ€»å¾—æœ‰é‚£ä¹ˆä¸€äº›æ—¶å…‰ï¼Œä¸€ä¸ªäººï¼Œä¸€æœ¬ä¹¦ï¼Œä¸€ç›èŒ¶ï¼Œé™äº«é—²æš‡ä¹‹ä¹ã€‚ç´§ç»·ä¸å°æ‡’ï¼ŒåŠ³ä¸é€¸ï¼Œä¸¤ç›¸ç»“åˆï¼Œäººç”Ÿçš„è·¯æ‰èƒ½èµ°å¾—æ›´è¿œã€‚\nå…»å„¿è‚²å¥³ï¼Œå…¶å®ä¹Ÿéœ€è¦å°æ‡’ã€‚èƒ½å¹²çš„çˆ¶æ¯ï¼Œå®¹æ˜“å…»å‡ºæ‡’æƒ…çš„å„¿å¥³ã€‚äº‹æ— å·¨ç»†ï¼Œå¤§åŒ…å¤§æ½ï¼Œè‡ªç„¶ä¼šè®©å„¿å¥³å…»æˆä¾èµ–çš„ä¹ æƒ¯ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œä¹ æƒ¯å°±æˆäº†æœ¬æ€§ã€‚åˆ°é‚£æ—¶ï¼Œå†æ€ä¹ˆæ€¨å¹ï¼Œä¹Ÿæ— æµäºäº‹ã€‚\näººç”Ÿçš„å°æ‡’ï¼Œä¸åŒäºå½»åº•èººå¹³çš„å¤§æ‡’ï¼Œä¹Ÿä¸æ˜¯ä»»ç”±æœ¬æ€§çš„æ”¾çºµã€‚ä¸€è·¯å¥”è·‘ä¹‹ä½™ï¼Œæ€»å¾—ç•™æœ‰é‚£ä¹ˆä¸€ç‚¹å„¿æ—¶å…‰ï¼Œæ¥æ”¾ä»»è‡ªå·±çš„å°æ‡’ã€‚è¿™æ ·çš„å°æ‡’ï¼Œå¦‚æ˜¥æ—¥çš„é˜³å…‰ï¼Œåˆä¼¼ç§‹æ—¥çš„å¾®é£ï¼Œä¸å¤šä¸å°‘ï¼Œå´åˆšåˆšå¥½ã€‚\n\nä½œè€…ï¼šéƒ­åæ‚¦\n\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"æœ€ä¸åƒå¹²è´§çš„33æ¡å¹²è´§ï¼ˆè½¬è½½ï¼‰","url":"/post/3534906950.html","content":"\næˆåŠŸçš„å”¯ä¸€ç§˜è¯€å°±æ˜¯é’»ç©ºå­ã€‚é’»èŒåœºäººé™…å…³ç³»çš„ç©ºå­ã€é’»å¸‚åœºç›‘ç®¡çš„ç©ºå­ã€é’»ä¿¡æ¯ä¸å¯¹ç§°çš„ç©ºå­ï¼Œé’»ä½ å‘ç°çš„ä¸€åˆ‡ç©ºå­çš„ç©ºå­ã€‚å½“ç„¶ï¼ŒåšæŒã€åŠªåŠ›ã€é€‰æ‹©è¿™äº›å› ç´ ï¼Œå¯¹äºæˆåŠŸä¹Ÿå¾ˆé‡è¦ï¼Œä½†ç®—ä¸ä¸Šç§˜è¯€ã€‚åªæœ‰é’»ç©ºå­æ‰æ˜¯å”¯ä¸€çš„ç§˜è¯€ã€‚\n\nä¸è¦åšæ°¸è¿œæ­£ç¡®çš„ç©·äººã€‚å°‘è·Ÿäººäº‰è¾©ï¼Œä½ è§‰å¾—å¯¹å°±å»åšï¼Œåšæˆäº†è‡ªç„¶åˆ«äººå°±é—­å˜´äº†ã€‚è¯´æœåˆ«äººå¹¶æ²¡æœ‰å®é™…çš„æ„ä¹‰ï¼Œæµªè´¹å£èˆŒå’Œæ—¶é—´ã€‚å½“ç„¶ï¼Œåˆ©ç›Šç›¸å…³çš„äº‹æƒ…ï¼Œæœ‰äººå†¤æ‰ä½ çš„æƒ…å†µé™¤å¤–ã€‚\n\n\n\n\nè„¸çš®å˜åšä¸€å€ï¼ŒæˆåŠŸçš„å¯èƒ½æ€§è¦ç¿»å€ã€‚ä¸è¦æ€•ä¸¢è„¸ï¼Œä½ è§‰å¾—ä¸¢è„¸çš„äº‹æƒ…ï¼Œå¤§å®¶å…¶å®å‹æ ¹ä¸åœ¨ä¹ï¼Œä¸¢è„¸å¤šåŠæ˜¯ä½ ä¸ªäººçš„è‡†æƒ³ã€‚\n\né¡¹ç›®ä¸åšè°ƒç ”ï¼Œå°±åƒå«–å¨¼ä¸æˆ´å¥—ï¼Œéå¸¸å±é™©ã€‚ä»»ä½•é¡¹ç›®å¯åŠ¨å‰ä¸€å®šè¦åšé€‚å½“çš„è°ƒç ”ï¼Œå“ªæ€•å¾ˆç²—ç³™ï¼Œä¹Ÿè¿œèƒœäºæ— ã€‚\n\nåˆ›ä¸šåšç”Ÿæ„å°±æ˜¯è¦æŠ„ï¼ŒæŠ„äº§å“ã€æŠ„æ¨¡å¼ã€æŠ„æ¶æ„ï¼Œè¿™æ˜¯è§„é¿é£é™©ï¼Œå‡å°‘è¯•é”™æˆæœ¬çš„æœ€å¥½æ–¹æ³•ã€‚ä½†æ˜¯ä¹Ÿä¸èƒ½å…¨æŠ„ã€‚å¤§åŸåˆ™æ˜¯ï¼šæ‹¿å¾—å‡†çš„ç¯èŠ‚åˆ›æ–°ï¼Œæ‹¿ä¸å‡†çš„åœ°æ–¹æŠ„ã€‚\n\næ¯ä¸ªæœˆèŠ±åŠå¤©æ—¶é—´ï¼Œæ‰«æå’Œæ¢³ç†è‡ªå·±æ‰€åœ¨é¢†åŸŸå’ŒåŒºåŸŸçš„è¡Œä¸šæ–°æœºä¼šã€‚\n\næœ‰æ£æ²¡æ£ï¼Œæ‰“ä¸€ç«¿å­ã€‚å¤šå»åšä¸€äº›å°è¯•ã€‚ä¸ä¸€å®šæ¯ä¸€ä»¶äº‹éƒ½è¦åŠªåŠ›å»åšï¼Œä½†é‚£äº›èˆ’é€‚åŒºå¤–çš„äº‹æƒ…ï¼Œå¯ä»¥è¯•ç€å»åšã€‚\n\nå¤§å®¶éƒ½å»æ‰¾é‡‘çŸ¿çš„æ—¶å€™ï¼Œç»™æ·˜é‡‘çš„äººå–é“²å­å°±æ˜¯æœ€å¥½çš„ç”Ÿæ„ï¼Œå¤šè€ƒè™‘å¿«é€Ÿå¢é•¿è¡Œä¸šçš„å‘¨è¾¹ç”Ÿæ„ã€‚\n\nå–æ‰‹æœºä¸å¦‚ä¿®æ‰‹æœºï¼Œä¿®æ‰‹æœºä¸å¦‚åšäºŒæ‰‹å›æ”¶ã€‚ä¸€ä¸ªè¡Œä¸šè¶Šæ˜¯ä¿¡æ¯ä¸å¯¹ç§°ï¼Œè¶Šæ˜¯ä¸æ ‡å‡†åŒ–ï¼Œå®ƒçš„åˆ©æ¶¦å°±è¶Šé«˜ï¼Œèµšé’±çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚\n\nè¦æŠ•èµ„ä¸€ä¸ªé¢†åŸŸï¼Œä¸‹é¢ä¸¤ä¸ªæ¡ä»¶è‡³å°‘è¦ä¸€ä¸ªæ¡ä»¶æˆç«‹ï¼š1. ä½ è‡ªå·±æ‡‚è¡Œï¼›2. ä½ èƒ½æ‰¾åˆ°æ‡‚è¡Œåˆé è°±çš„äººæ¥å¸®ä½ æŠŠå…³ã€‚\n\nä¸è¦ç”¨ä¸ªäººçš„å¥½æ¶ä»£æ›¿å•†ä¸šé€»è¾‘ã€‚å¦‚æœä½ è§‰å¾—ç½—è¾‘æ€ç»´ã€å’ªè’™ã€æ¯”ç‰¹å¸éƒ½æ˜¯éª—å­ï¼Œé‚£ä½ æ°¸è¿œçœ‹ä¸åˆ°èƒŒåçš„éœ€æ±‚ã€æœºä¼šå’Œè¡Œä¸šçº¢åˆ©ã€‚\n\nåšè¥é”€å°±å’Œåšå°å§ä¸€æ ·ï¼Œè¶Šlowçš„æ–¹å¼åå€’è¶Šæœ‰æ•ˆã€‚ä¸å…¶æ‰­æ‰­ææã€æ•…ä½œé€¼æ ¼ï¼Œä¸å¦‚å¤§å¤§æ–¹æ–¹ç®€å•ç²—æš´ã€èµ¤è£¸ç›¸å¾…ã€‚\n\né‡åˆ°è‡ªå·±ä¸æ‡‚æˆ–è€…æ²¡å¬è¿‡çš„æ–°åè¯ï¼Œç”¨æ‰‹æœºè®°ä¸‹æ¥ã€‚æœ‰ç©ºå¯ä»¥ç ”ç©¶ä¸€ä¸‹ï¼Œè¯´ä¸å®šé‡Œé¢æœ‰æ–°çš„æœºä¼šå’Œæ€è·¯ã€‚\n\nå¯¹äºèµšé’±çš„äº‹ï¼Œå¤šç¢ç£¨ï¼Œå¤šå°è¯•ã€‚å½“ä½ ç¬¬ä¸€æ¬¡å°åˆ°ç”œå¤´ï¼Œä½ å°±èµ°åœ¨ä¸€æ¡å¿«è½¦é“ä¸Šäº†ã€‚\n\nè®©ä½ è§‰å¾—å¬äº†ä¸èˆ’æœçš„è¯ï¼Œå¾€å¾€æ˜¯çœŸè¯ã€‚åˆ«äººå¯¹ä½ çš„æœ‰ä»·å€¼çš„æ‰¹è¯„ï¼Œå¾€å¾€æ˜¯ä½ æˆé•¿å’Œè¿›æ­¥çš„æœºä¼šã€‚\n\nå‡å°‘æ— æ•ˆæ€è€ƒã€‚80%çš„äººéƒ½æ˜¯æ— èƒ½çš„ï¼Œå³ä½¿æ˜¯æœ‰èƒ½åŠ›çš„äººå½“ä¸­ï¼Œ80%çš„æ€è€ƒä¹Ÿæ˜¯æ— æ•ˆçš„ã€‚å°½å¯èƒ½å‡å°‘æ— æ•ˆçš„æ€è€ƒæ—¶é—´ï¼Œå¤šæŠŠç²¾åŠ›å’Œæ—¶é—´æŠ•å…¥åˆ°è¡ŒåŠ¨ä¸­ã€‚\n\nåˆ«è¢«é‚£äº›ä¸€å¤œæš´å¯Œçš„äº‹æƒ…å¿½æ‚ äº†ï¼Œç›¸ä¿¡æ—¶é—´ï¼Œç›¸ä¿¡ç§¯ç´¯ï¼Œé¡ºç€å¤§è¶‹åŠ¿æ…¢æ…¢åšï¼Œæ€»ä¼šèµ·æ¥ã€‚\n\né€‰æ‹©æ¯”åŠªåŠ›æ›´é‡è¦ã€‚æ€è€ƒæ–¹å¼çš„è½¬å˜æ¯”èƒ½åŠ›æå‡æ›´é‡è¦ï¼Œè¿™æ–¹é¢çš„å­¦ä¹ å’Œç ”ç©¶å¾ˆæœ‰ä»·å€¼ã€‚\n\nå¦‚æœä½ æ— æ³•é‡Šæ€€è¿‡å»çš„ç—›è‹¦ï¼Œä¸è¦è´£æ€ªä½ è‡ªå·±ï¼Œå°½å¯èƒ½å®‰æ’ä¸€ä¸‹æœªæ¥ç”Ÿæ´»çš„å…´å¥‹ç‚¹ã€‚\n\nå¿§è™‘çš„æ—¶å€™å°½å¯èƒ½ä¿æŒå¿™ç¢Œï¼ŒæŠŠèº«ä½“çš„èƒ½é‡ç”¨å®Œäº†ï¼Œå°±æ²¡æ—¶é—´ã€ç²¾åŠ›å¿§è™‘äº†ã€‚\n\næ¯å‘¨è‡³å°‘çº¦ä¸€ä¸ªå¯¹è‡ªå·±äº‹ä¸šã€ç”Ÿæ´»æœ‰å¸®åŠ©çš„æœ‹å‹åƒé¥­ã€‚\n\näººä¸äººä¹‹é—´å¾ˆéš¾çœŸæ­£ç†è§£ï¼Œä½ ä¹Ÿä¸éœ€è¦è¿™ä¹ˆå¤šäººç†è§£ä½ ï¼Œä¹Ÿä¸è¦ä¸ºäº†è®©åˆ«äººç†è§£ä½ åšå¤ªå¤šå°è¯•ã€‚ä¸“æ³¨äºæå‡è‡ªå·±çš„å®åŠ›ï¼Œå¤šåšä¸€äº›è®©åˆ«äººæ•¬ä½©ä½ çš„äº‹æƒ…ã€‚\n\nç›¸æ¯”äºè®¤æ¸…ä¸–ç•Œï¼Œæ›´éš¾çš„æ˜¯è®¤æ¸…è‡ªå·±ã€‚å¯¹è‡ªå·±æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†åï¼Œéœ€è¦åšå–èˆåšé€‰æ‹©ï¼Œæ‰ä¼šæœ‰åˆ¤æ–­ä¾æ®ã€‚\n\né è°±ä¸ä»…æ˜¯ä¸€ç§äººæ ¼ï¼Œä¹Ÿæ˜¯ä¸€ç§è¥é”€ç­–ç•¥ã€‚å› ä¸ºè¿™ä¸ªä¸–ç•Œå¤§éƒ¨åˆ†äººéƒ½ä¸é è°±ï¼Œä½ è¦æ˜¯ç›¸å¯¹é è°±ï¼Œå¥½çš„èµ„æºã€æœºä¼šéƒ½ä¼šé¦–å…ˆæƒ³åˆ°ä½ ã€æ‰¾åˆ°ä½ ã€‚èƒ½åœ¨æ··æ²Œä¸€ç‰‡çš„ä¸–ç•Œé‡Œå¿«é€ŸæŠŠè‡ªå·±çš„å“ç‰Œè¥é”€å‡ºå»ã€‚\n\næ€æƒ³æ·±åº¦å’Œå¿«ä¹æ˜¯æˆåæ¯”çš„ï¼Œé™¤äº†èµšé’±ç›¸å…³çš„äº‹æƒ…ï¼Œå…¶ä»–äº‹æƒ…æ²¡å¿…è¦æ·±ç©¶ï¼Œå¾’å¢çƒ¦æ¼ã€‚ä¸è¦è§‰å¾—å‡å°‘å°±å˜æˆä¸€ä¸ªå¿«ä¹çš„ç¬¨è›‹äº†ï¼Œä½ æ€è€ƒå¤ªå¤šã€å¿§è™‘å¤ªå¤šï¼Œä½ åªæ˜¯å˜æˆä¸€ä¸ªå¿§å¿ƒå¿¡å¿¡çš„ç¬¨è›‹ç½¢äº†ã€‚\n\nå­¦ä¹ æœ€é‡è¦çš„ï¼Œä¸æ˜¯æŠŠ10åˆ†çš„ç²¾åŠ›éƒ½èŠ±åœ¨å¸æ”¶æ–°çŸ¥è¯†ä¸Šï¼Œè€Œæ˜¯3åˆ†å­¦ä¹ ï¼Œ7åˆ†ç»ƒä¹ å’Œå®è·µã€‚\n\nç®€å•çš„äº‹æƒ…åå¤åšï¼Œå°±èƒ½æˆé•¿ï¼›å¤æ‚çš„äº‹æƒ…ç®€å•åšï¼Œå°±èƒ½æˆåŠŸã€‚åŒä¸€ä¸ªæŠ€èƒ½åå¤ç»ƒä¹ 100æ¬¡ï¼Œé‚£ä¸ªæŠ€èƒ½å°±æ˜¯ä½ çš„ï¼›åŒä¸€ä¸ªé¢†åŸŸçš„äº‹æƒ…åšå¯¹100æ¬¡ï¼Œé‚£ä¸ªé¢†åŸŸçš„é’±å°±æ˜¯ä½ çš„ã€‚\n\nè¿·èŒ«çš„æ—¶å€™ï¼Œå°±æŠŠèƒ½åšå¥½çš„äº‹æƒ…è¸å®åšå¥½å°±è¡Œã€‚å¤šå…³æ³¨è‡ªå·±åŠ›æ‰€èƒ½åŠçš„å°äº‹ï¼Œå°æˆåŠŸç§¯ç´¯å¤šäº†ï¼Œå°±æœ‰å¤§æˆåŠŸçš„æœºä¼šã€‚ã€‚\n\näººç”Ÿå¸¸å¸¸å°±åƒå µè½¦ï¼Œå¿ƒé‡Œåˆ«æ·»å µã€‚å¾ˆå¤šæ—¶å€™å µåœ¨é‡Œé¢ï¼Œä½ ä¹Ÿä¸è¦å¿ƒæ€¥ã€‚èƒ½èµ°å‡ æ­¥èµ°å‡ æ­¥ï¼Œèµ°ä¸åŠ¨çš„æ—¶å€™æ­‡ç€ï¼Œç­‰è½¦æµæ…¢æ…¢æ¢å¤äº†ï¼Œåˆç»§ç»­èµ°ã€‚\n\næœ‰è´£ä»»æ„Ÿæœ‰æ‹…å½“çš„äººï¼Œå¾€å¾€éƒ½æ´»å¾—æ¯”è¾ƒç´¯ï¼Œå› ä¸ºè¦æ“å¿ƒçš„äº‹å„¿å¤ªå¤šã€‚ä½ å¦‚æœæ˜¯è¿™æ ·çš„äººï¼Œæ¥å—è¿™æ ·çš„äº‹å®ï¼Œå°½å¯èƒ½å¦ç„¶é¢å¯¹äº‹ä¸šã€ç”Ÿæ´»ã€å®¶åº­ä¸­çš„è‹¦ä¸ä¹ã€‚\n\nåšäººä¸è¦å¤ªå®¹æ˜“å¤šæ„å–„æ„Ÿï¼Œä¸ç„¶å®¹æ˜“æˆä¸ºloserã€‚\n\nç”Ÿæ´»çš„å¸¸æ€å°±æ˜¯å¹³æ·¡ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨è§„åˆ’æœªæ¥çš„æ—¶å€™ï¼Œå°½å¯èƒ½è¿˜æ˜¯ä¸ºç”Ÿæ´»å®‰æ’ä¸€äº›å…´å¥‹ç‚¹ã€‚\n\næ¯ä¸ªäººçš„ç”Ÿæ´»éƒ½éœ€è¦æœ‰ä¸€ä¸ªæ”¯ç‚¹ï¼Œä¸ç®¡æ˜¯è®©ä½ å……æ»¡æˆå°±æ„Ÿçš„äº‹ä¸šã€è¿˜æ˜¯ä½ ç–¼çˆ±çš„çˆ±äººï¼Œè¿˜æ˜¯ä½ çš„æ¸©æš–å®¶åº­ï¼Œè¿˜æ˜¯ä½ çš„çŸ¥å¿ƒæŒšå‹ã€è€å¸ˆã€è´µäººï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªçˆ±å¥½ã€‚è‡³å°‘è¦æœ‰ä¸€ä¸ªè¿™æ ·çš„æ”¯ç‚¹ï¼Œèƒ½å¤Ÿæ”¯æ’‘èµ·ä½ çš„ç”Ÿå‘½ã€‚å³ä½¿åœ¨ä½ è¿·èŒ«ã€æ— åŠ©ã€æ‚²ä¼¤çš„æ—¶å€™ï¼Œè¿™ä¸ªæ”¯ç‚¹èƒ½æ”¯æ’‘ä½ èµ°è¿‡æœ€è‰°éš¾çš„æ—¶åˆ»ã€‚èƒ½è®©ä½ çš„ç²¾ç¥éšæ—¶æœ‰åœ°æ–¹å¯ä»¥å€šé ã€‚\n\n\n\nè½¬è½½è‡ªï¼š\nhttp://mp.weixin.qq.com/s/PjlLbikJHSM4PKwpmTkL9g\n\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"åŸºäºHexoæ­å»ºé™æ€åšå®¢","url":"/post/2737986840.html","content":"Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œä½¿ç”¨Hexoå¯ä»¥å¿«é€Ÿåœ°ç”Ÿæˆé™æ€åšå®¢æ¡†æ¶ã€‚åœ¨æ¡†æ¶ç”Ÿæˆå®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„æ–‡æœ¬ç¼–è¾‘å™¨è¯­æ³•ä¹¦å†™åšå®¢ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Markdownè¯­æ³•ä¹¦å†™åšå®¢ï¼ŒHexoåœ¨ç”Ÿæˆåšå®¢æ—¶ä¼šè‡ªåŠ¨å°†Markdownè§£ææˆHtmlé™æ€é¡µé¢ã€‚\n\nHexoå®˜ç½‘ï¼šhttps://hexo.io/zh-cn/Hexoä¸­æ–‡æ–‡æ¡£ï¼šhttps://hexo.io/zh-cn/docs/\n\n\nç©æ³•è¯´æ˜ä½¿ç”¨Hexoå†™åšå®¢çš„å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\n\nç”Ÿæˆåšå®¢æ¡†æ¶\né…ç½®åšå®¢\né€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜\né…ç½®åšå®¢å’Œä¸»é¢˜\nå†™æ–‡ç« \nç”Ÿæˆåšå®¢\nå‘å¸ƒåšå®¢åˆ°æœåŠ¡å™¨\n\nå…¶ä¸­ï¼Œç¬¬1~4æ­¥ä¸ºå‰ç½®æ“ä½œï¼Œåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ã€‚\nHexoåªè´Ÿè´£ç”Ÿæˆé™æ€çš„HTMLæ–‡ä»¶ï¼Œä¸æä¾›æœåŠ¡å™¨ã€‚å¦‚éœ€å¯¹å¤–å‘å¸ƒåšå®¢ï¼Œæˆ‘ä»¬è¿˜éœ€å°†HTMLæ–‡ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥é€‰æ‹©å¦‚ä¸‹çš„æ–¹å¼ï¼š\n\nGithub Pagesã€GitLab Pagesï¼Œå…è´¹ï¼Œè®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚\nGitee Pagesï¼Œæ”¶è´¹ã€‚\nå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå¦‚é˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSã€ä¸ƒç‰›äº‘OSSç­‰ã€‚å½“è®¿é—®é‡å¤§æ—¶ï¼Œéœ€æ­é…CDNä½¿ç”¨ï¼Œé¿å…å› æ•°æ®å›æºäº§ç”Ÿå·¨é¢æµé‡è´¹ç”¨ã€‚\nè‡ªå·±è´­ä¹°æœåŠ¡å™¨ä½¿ç”¨Nginxæ­å»ºWebæœåŠ¡å™¨ã€‚å½“è®¿é—®é‡å¤§æ—¶ï¼ŒæœåŠ¡å™¨å‡ºå£å¸¦å®½è¦æ±‚è¾ƒé«˜ï¼Œæ­¤æ—¶ä»ç„¶éœ€è¦æ­é…å¯¹è±¡å­˜å‚¨æœåŠ¡å’ŒCDNä½¿ç”¨ã€‚\n\nç”Ÿæˆåšå®¢æ¡†æ¶ç¯å¢ƒå‡†å¤‡åœ¨æ­å»ºåšå®¢æ¡†æ¶ä¹‹å‰ï¼Œç¡®ä¿ç”µè„‘ä¸Šå·²ç»å®‰è£…å¦‚ä¸‹è½¯ä»¶ï¼ˆå»ºè®®å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Node.jsï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿å…¼å®¹æœ€æ–°ç‰ˆæœ¬çš„Hexoï¼‰ï¼š\n\nNode.js\nGit\n\nå®‰è£…Hexoåœ¨æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å…¨å±€å®‰è£… Hexoå·¥å…·ï¼š\nnpm install -g hexo-cli\n\nç”Ÿæˆåšå®¢æ¡†æ¶å®‰è£… Hexo å®Œæˆåï¼Œåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨ç›®å½•ä¸‹æ–°å»ºåšå®¢æ‰€éœ€çš„æ–‡ä»¶ï¼š\nhexo init &lt;folder&gt;cd &lt;folder&gt;npm install\n\n\nå¦‚æœé‡åˆ°ç½‘ç»œé”™è¯¯ç­‰é—®é¢˜ï¼Œè¯·æ’é™¤æ˜¯å¦å› ä¸ºè®¿é—®å›½å¤–åŸŸåå¤±è´¥å¯¼è‡´ï¼Œå¯ä»¥å°è¯•å°†npmæºåˆ‡æ¢åˆ°å›½å†…ï¼Œå‚è€ƒï¼š NPMå’ŒYarnè®¾ç½®å›½å†…æº\n\næ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¤§è‡´å¦‚ä¸‹ï¼š\n.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source|   â”œâ”€â”€ _drafts|   â””â”€â”€ _postsâ””â”€â”€ themes\n\n\n_config.yml\nç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ï¼Œéœ€è¦åŒºåˆ«äºä¸»é¢˜çš„_config.ymlé…ç½®æ–‡ä»¶ã€‚\n\npackage.json\nåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚\n\nscaffolds\næ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexoä¼šæ ¹æ®scaffoldæ¥åˆ›å»ºæ–‡ä»¶ã€‚Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„æ–‡ç« æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¿®æ”¹ scaffold&#x2F;post.md ä¸­çš„ Front-matter ï¼ˆå³ä¸¤ä¸ª---ä¸­é—´çš„å†…å®¹ï¼‰å†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚\n\nsource\nèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚åœ¨ç”Ÿæˆåšå®¢æ—¶ï¼ŒMarkdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«ç›´æ¥æ‹·è´è¿‡å»ã€‚\n\nthemes\nä¸»é¢˜æ–‡ä»¶å¤¹ã€‚å°†ä¸‹è½½çš„ä¸»é¢˜æ–‡ä»¶æ”¾ç½®åˆ°è¯¥ç›®å½•ï¼ŒHexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚\n\n\né…ç½®åšå®¢Hexoçš„é…ç½®åˆ†åˆ«ç«™ç‚¹é…ç½®å’Œä¸»é¢˜é…ç½®ï¼Œç«™ç‚¹é…ç½®æ–‡ä»¶ä¸ºåšå®¢æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œä¸»é¢˜é…ç½®æ–‡ä»¶ä¸ºä½äºthemes\\&lt;ä¸»é¢˜ç›®å½•&gt;ä¸­çš„_config.ymlæ–‡ä»¶ã€‚\nç«™ç‚¹é…ç½®æœ¬èŠ‚ä»‹ç»åšå®¢çš„ç«™ç‚¹é…ç½®ï¼Œéƒ¨åˆ†é…ç½®çš„å«ä¹‰å¦‚ä¸‹ï¼š\n\ntitle\tç½‘ç«™æ ‡é¢˜\nsubtitle\tç½‘ç«™å‰¯æ ‡é¢˜\ndescription\tç½‘ç«™æè¿°ï¼Œä¸»è¦ç”¨äºSEO\nkeywords\tç½‘ç«™çš„å…³é”®è¯ã€‚æ”¯æŒå¤šä¸ªå…³é”®è¯ã€‚\nauthor ä½œè€…åå­—\nlanguage\tç½‘ç«™ä½¿ç”¨çš„è¯­è¨€ã€‚å¯¹äºç®€ä½“ä¸­æ–‡ç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨ä¸åŒçš„ä¸»é¢˜å¯èƒ½éœ€è¦è®¾ç½®æˆä¸åŒçš„å€¼ï¼Œè¯·å‚è€ƒä½ çš„ä¸»é¢˜çš„æ–‡æ¡£è‡ªè¡Œè®¾ç½®ï¼Œå¸¸è§çš„æœ‰ zh-Hanså’Œ zh-CNã€‚\ntimezone\tç½‘ç«™æ—¶åŒºã€‚å¯¹äºä¸­å›½å¤§é™†åœ°åŒºå¯ä»¥ä½¿ç”¨ Asia&#x2F;Shanghaiã€‚\ntheme\tå½“å‰ä¸»é¢˜åç§°ï¼Œåç§°ä¸ºthemesç›®å½•ä¸­çš„å­ç›®å½•åç§°ã€‚å€¼ä¸ºfalseæ—¶ç¦ç”¨ä¸»é¢˜ã€‚\nper_page\tæ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡ (0 &#x3D; å…³é—­åˆ†é¡µåŠŸèƒ½)ã€‚\npagination_dir\tæŒ‡å®šåšå®¢ç”Ÿæˆåï¼Œæ¯é¡µçš„index.htmlæ–‡ä»¶å­˜æ”¾ç›®å½•ã€‚\n\nåˆ©ç”¨Hexo-abbrlinkæ’ä»¶ç”Ÿæˆå”¯ä¸€æ–‡ç« é“¾æ¥Hexoåœ¨ç”Ÿæˆåšå®¢æ–‡ç« é“¾æ¥æ—¶ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å¹´/æœˆ/æ—¥/æ ‡é¢˜æ ¼å¼æ¥ç”Ÿæˆçš„ï¼Œå¯ä»¥åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šnew_post_nameçš„å€¼ï¼Œé»˜è®¤æ˜¯:year&#x2F;:month&#x2F;:day&#x2F;:titleè¿™æ ·çš„æ ¼å¼ã€‚å¦‚æœä½ çš„æ ‡é¢˜æ˜¯ä¸­æ–‡çš„è¯ï¼Œä½ çš„URLé“¾æ¥è¿˜ä¼šåŒ…å«ä¸­æ–‡ã€‚è€Œä¸”å½“æˆ‘ä»¬ä¿®æ”¹åŸæ–‡ç« çš„æ—¥æœŸæˆ–æ ‡é¢˜åï¼Œä¹‹å‰ç”Ÿæˆçš„é“¾æ¥å°†ä¼šå¤±æ•ˆã€‚\nä¸ºäº†ç»™æ¯ä¸€ç¯‡æ–‡ç« æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ä¸å«ä¸­æ–‡çš„é“¾æ¥ï¼Œå¯ä»¥åˆ©ç”¨hexo-abbrlinkæ’ä»¶ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nå…ˆå®‰è£…ä¸‹hexo-abbrlinkï¼š\nnpm install hexo-abbrlink --save\n\nä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶(_config.yml)ï¼š\npermalink: post/:abbrlink.htmlabbrlink:  alg: crc32  # ç®—æ³•ï¼šcrc16(default) and crc32  rep: hex    # è¿›åˆ¶ï¼šdec(default) and hex\n\nç”Ÿæˆå®ŒååŸæ–‡ç« .mdæ–‡ä»¶çš„Front-matter å†…ä¼šå¢åŠ abbrlinkå­—æ®µï¼Œå€¼ä¸ºç”Ÿæˆçš„IDã€‚è¿™ä¸ªå­—æ®µç¡®ä¿äº†åœ¨æˆ‘ä»¬ä¿®æ”¹äº†Front-matterå†…çš„titleæˆ–dateå­—æ®µä¹‹åé“¾æ¥åœ°å€ä¸ä¼šæ”¹å˜ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯æœ¬ç¯‡æ–‡ç« æœ‰äº†è‡ªå·±çš„ä¸“å±é“¾æ¥ã€‚\nå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸åŒçš„ç®—æ³•å’Œè¿›åˆ¶ï¼š\n\ncrc16 &amp; hex\nhttps://post.zz173.com/posts/66c8.html\n\ncrc16 &amp; dec\nhttps://post.zz173.com/posts/65535.html\n\ncrc32 &amp; hex\nhttps://post.zz173.com/posts/8ddf18fb.html\n\ncrc32 &amp; dec\nhttps://post.zz173.com/posts/1690090958.html\n\n\næ³¨æ„ï¼Œé…ç½®å®Œæˆä¹‹åï¼Œä¹‹å‰çš„æ–‡ç« çš„é“¾æ¥æœ‰å¯èƒ½ä¼šå˜æˆäº†undefinedï¼Œéœ€è¦æ‰§è¡Œhexo cleanå¹¶é‡æ–°ç”Ÿæˆéƒ¨ç½²ã€‚\né…ç½®ä¸»é¢˜æ¯ä¸ªä¸»é¢˜çš„é…ç½®å†…å®¹éƒ½ä¸ä¸€æ ·ï¼Œå…·ä½“å‚è€ƒä½¿ç”¨ä¸»é¢˜çš„å¸®åŠ©æ–‡æ¡£ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯hexo-theme-materyä¸»é¢˜ã€‚\næ¨èä¸»é¢˜\nhexo-theme-aircloud\nhexo-theme-new-yilia\nhexo-theme-vexo\nhexo-theme-next\nhexo-theme-butterfly\nhexo-theme-volantis\nhexo-theme-icarus\n\nå¯ä»¥åœ¨Githubä¸­æœç´¢Hexo Themeå‘ç°æ›´å¤šä¸»é¢˜ã€‚\nå†™æ–‡ç« ç”Ÿæˆæ–‡ç« ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆæ–°çš„æ–‡ç« :\nhexo new &lt;æ–‡ç« æ ‡é¢˜&gt;\n\næ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œä¼šåœ¨source_postsç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„.mdæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\nFront-matterFront-matter æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ --- åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ã€‚Hexoé¢„å®šä¹‰äº†ä¸€äº›å˜é‡ï¼ŒåŒæ—¶æ¯ä¸ªä¸»é¢˜ä¹Ÿä¼šå®šä¹‰ä¸€äº›å˜é‡ã€‚\nHexoé¢„å®šä¹‰å˜é‡\ntitle\tæ ‡é¢˜ï¼Œé»˜è®¤ä¸ºæ–‡ç« çš„æ–‡ä»¶å\ndate\tå»ºç«‹æ—¥æœŸï¼Œé»˜è®¤ä¸ºæ–‡ä»¶å»ºç«‹æ—¥æœŸ\nupdated\tæ›´æ–°æ—¥æœŸï¼Œé»˜è®¤æ–‡ä»¶æ›´æ–°æ—¥æœŸ\ncomments\tæ˜¯å¦å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ï¼Œtrue&#x2F;false.\ntags\tæ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ï¼Œæ”¯æŒå¤šä¸ªã€‚\ncategories\tåˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ï¼Œæ”¯æŒå¤šä¸ªã€‚\npermalink\tè¦†ç›–æ–‡ç« çš„æ°¸ä¹…é“¾æ¥ï¼Œæ°¸ä¹…é“¾æ¥åº”è¯¥ä»¥&#x2F;æˆ–.htmlç»“å°¾ã€‚\nkeywords: æ–‡ç« å…³é”®å­—ï¼Œç”¨äºSEOã€‚\n\nå¦‚ï¼š\n---title: ä»æ±‡ç¼–çš„è§’åº¦åˆ†æå‡½æ•°è°ƒç”¨è¿‡ç¨‹categories:  - C++  - æ±‡ç¼–abbrlink: 4168021185date: 2022-01-21 15:53:01updated: 2023-01-21 15:53:01keywords:  - å‡½æ•°  - C++  - æ±‡ç¼–tags:  - C++\t- ä¼ å‚å½¢å¼---\n\nhexo-theme-materyä¸»é¢˜å®šä¹‰å˜é‡\n\n\né…ç½®é€‰é¡¹\né»˜è®¤å€¼\næè¿°\n\n\n\ntitle\nMarkdown çš„æ–‡ä»¶æ ‡é¢˜\næ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹\n\n\ndate\næ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´\nå‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹\n\n\nauthor\næ ¹ _config.yml ä¸­çš„ author\næ–‡ç« ä½œè€…\n\n\nimg\nfeatureImages ä¸­çš„æŸä¸ªå€¼\næ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: http://xxx.com/xxx.jpg\n\n\ntop\ntrue\næ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ top å€¼ä¸º trueï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« \n\n\nhide\nfalse\néšè—æ–‡ç« ï¼Œå¦‚æœhideå€¼ä¸ºtrueï¼Œåˆ™æ–‡ç« ä¸ä¼šåœ¨é¦–é¡µæ˜¾ç¤º\n\n\ncover\nfalse\nv1.0.2ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­\n\n\ncoverImg\næ— \nv1.0.2ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡\n\n\npassword\næ— \næ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® password çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ SHA256 åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† verifyPassword é€‰é¡¹\n\n\ntoc\ntrue\næ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† toc é€‰é¡¹\n\n\nmathjax\nfalse\næ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ\n\n\nsummary\næ— \næ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦\n\n\ncategories\næ— \næ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»\n\n\ntags\næ— \næ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾\n\n\nkeywords\næ–‡ç« æ ‡é¢˜\næ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦\n\n\nreprintPolicy\ncc_by\næ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª\n\n\n\næ³¨æ„:\n\nå¦‚æœ img å±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ hashcode çš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« çš„ç‰¹è‰²å›¾å„æœ‰ç‰¹è‰²ã€‚\nå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨ Front-matter ä¸­è®¾ç½®é‡‡ç”¨äº† SHA256 åŠ å¯†çš„ password çš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml ä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼šå¼€æºä¸­å›½åœ¨çº¿å·¥å…·ã€chahuoã€ç«™é•¿å·¥å…·ã€‚\næ‚¨å¯ä»¥åœ¨æ–‡ç« mdæ–‡ä»¶çš„ front-matter ä¸­æŒ‡å®š reprintPolicy æ¥ç»™å•ä¸ªæ–‡ç« é…ç½®è½¬è½½è§„åˆ™\n\n\nä»¥ä¸‹ä¸ºæ–‡ç« çš„ Front-matter ç¤ºä¾‹ã€‚\næœ€ç®€ç¤ºä¾‹---title: typora-vue-themeä¸»é¢˜ä»‹ç»date: 2018-09-07 09:25:00---\n\næœ€å…¨ç¤ºä¾‹---title: typora-vue-themeä¸»é¢˜ä»‹ç»date: 2018-09-07 09:25:00author: èµµå¥‡img: /source/images/xxx.jpgtop: truehide: falsecover: truecoverImg: /images/1.jpgpassword: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92toc: falsemathjax: falsesummary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categories: Markdowntags:  - Typora  - Markdown---\n\nå¼•ç”¨ç«™å†…æ–‡ç« è¯­æ³•å¦‚ä¸‹ï¼š\n&#123;% post_link slug [title] %&#125;\n\nå…¶ä¸­ï¼Œslug è¡¨ç¤º _post ç›®å½•ä¸‹çš„ Markdown æ–‡ä»¶åã€‚å¯ä»¥é€šè¿‡ title æŒ‡å®šé“¾æ¥æ ‡é¢˜ã€‚\næŒ‰é’®è¯­æ³•å¦‚ä¸‹ï¼š\n&#123;% button /path/to/url/, text, icon [class], [alt] %&#125;\n\nå¦‚ï¼š\n&#123;% button https://jiangxueqiao.com, æ±Ÿé›ªæ¡¥çš„åšå®¢, home fa-fw fa-lg, æ±Ÿé›ªæ¡¥ %&#125;\n\næ’å…¥å›¾ç‰‡Markdown å¹¶ä¸ä¼šä¿å­˜æ’å…¥çš„å›¾ç‰‡èµ„æºæœ¬èº«ï¼Œåªæ˜¯è®°å½•äº†è·å–èµ„æºçš„é“¾æ¥ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€æ¬¾åˆé€‚çš„å›¾åºŠæ¥æ”¯æŒåšå®¢å†™ä½œï¼Œç›®å‰å„å¤§äº‘æœåŠ¡å•†éƒ½æä¾›äº†å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå¦‚ä¸ƒç‰›äº‘ KODOã€åˆæ‹äº‘ USSã€è…¾è®¯äº‘ COSã€é˜¿é‡Œäº‘ OSS ç­‰ã€‚\nå¯ä»¥ä½¿ç”¨PicGoå·¥å…·ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠä¸Šã€‚\næ”¯æŒemojiè¡¨æƒ…Hexoé»˜è®¤çš„ Markdown æ¸²æŸ“å™¨æ˜¯ hexo-renderer-markedï¼Œè¿™ä¸ªæ¸²æŸ“å™¨ä¸æ”¯æŒ emoji è¡¨æƒ…ã€‚å¯ä»¥åˆ©ç”¨ hexo-filter-github-emojisæ’ä»¶å®ç°æ”¯æŒ emoji è¡¨æƒ…ã€‚\nå®‰è£…æ’ä»¶ï¼š\nnpm install hexo-filter-github-emojis --save\n\nä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼ˆ_config.ymlï¼‰æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\ngithubEmojis:  enable: true  className: github-emoji  inject: true  styles:  customEmojis:\n\nåœ¨emoji-cheat-sheetä¸­æ‰¾åˆ°æƒ³è¦çš„è¡¨æƒ…ï¼Œç²˜è´´åˆ°æ–‡ç« ä¸­å³å¯ã€‚\nå‘å¸ƒä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆé™æ€HTMLæ–‡ä»¶ï¼š\nhexo g\n\nç”Ÿæˆçš„HTMLæ–‡ä»¶ä½äºåšå®¢æ ¹ç›®å½•çš„publicä¸­ï¼Œå°†è¯¥ç›®å½•éƒ¨ç½²ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨å³å¯ã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"å»ºç«‹ä¸“å±çš„è´¦å·å¯†ç ä½“ç³»","url":"/post/737594544.html","content":"åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦è®°å¿†6ä½æ•°å­—çš„é“¶è¡Œå¡å¯†ç ï¼Œè¿˜éœ€è¦è®°å¿†å„å¼å„æ ·ç½‘ç«™å’Œåº”ç”¨çš„è´¦å·å¯†ç ï¼Œå¯èƒ½æˆ‘ä»¬è‡ªå·±ä¹Ÿä¸è®°å¾—æ›¾ç»æ³¨å†Œè¿‡å¤šå°‘ä¸ªè´¦å·ã€‚è´¦å·å’Œå¯†ç å¦‚æ­¤ç¹å¤šï¼Œç®¡ç†è¿™äº›è´¦å·å’Œå¯†ç ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ã€‚\næœ€åŸå§‹çš„æ–¹æ³•æ˜¯å°†å¯†ç å†™çº¸ä¸Šï¼Œæ”¾åœ¨ä¸€ä¸ªå®‰å…¨çš„åœ°æ–¹ï¼Œä½†çº¸å¼ å­˜åœ¨ä¸¢å¤±ã€æŸåçš„é£é™©ï¼Œè€Œä¸”ä¸æ–¹ä¾¿å­˜å–ã€‚\næ”¹è¿›ç‰ˆåˆ™æ˜¯å°†çº¸å¼ ç”µå­åŒ–ï¼Œå¦‚ Excelï¼Œå¹¶è¾…ä»¥äº‘ç›˜å®ç°å¤šç«¯åŒæ­¥ï¼Œè¿™æ ·è™½ç„¶å­˜å–ä¾¿åˆ©æ€§ä¸Šæœ‰ä¸€å®šçš„æ”¹å–„ï¼Œä½†å®‰å…¨æ€§å´é™ä½äº†å¾ˆå¤šï¼Œå¦‚æœäº‘ç›˜æ²¡æœ‰å†å²ç‰ˆæœ¬åŠŸèƒ½ï¼Œåœ¨ç¼–è¾‘æ—¶ç¨æœ‰å¤±è¯¯ï¼Œå¯èƒ½å¯¼è‡´å¯†ç å…¨éƒ¨ä¸¢å¤±ï¼Œå¦å¤–å¦‚æœäº‘ç›˜å¯†ç æ³„éœ²ã€ç”µè„‘ä¸­æ¯’æˆ–ç³»ç»ŸæŸåï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å¯†ç æ³„éœ²æˆ–ä¸¢å¤±ã€‚å¦‚æœæŸä¸€å¤©äº‘ç›˜è½¯ä»¶çªç„¶å€’é—­äº†ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\nç›®å‰å·²ç»æœ‰å¾ˆå¤šè´¦å·å¯†ç ç®¡ç†è½¯ä»¶ï¼Œæ¥å¸®åŠ©äººä»¬ç®¡ç†è´¦å·å’Œå¯†ç ï¼Œå¦‚ 1Passwordã€KeePass ç­‰ï¼Œä½†å®ƒä»¬ä¹Ÿæˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼š\n\n\n\nå¯¹ç³»ç»Ÿå’Œå¹³å°ï¼ˆWindowsã€Linuxã€macOSã€å®‰å“ã€iOSç­‰ï¼‰æ”¯æŒå®Œå–„çš„å·¥å…·å¤§å¤šéœ€è¦æ”¶è´¹ï¼Œè€Œä¸”è´¹ç”¨ä¸ä¾¿å®œï¼›å…è´¹çš„å·¥å…·é€šå¸¸å¯¹ç³»ç»Ÿå’Œå¹³å°çš„æ”¯æŒä¸å¤Ÿå®Œå–„ï¼Œä¹Ÿä¸å¥½ç”¨ã€‚\nåœ¨å¤šç«¯åŒæ­¥æ–¹é¢ï¼Œæ”¶è´¹è½¯ä»¶é€šå¸¸æ”¯æŒäº‘ç«¯åŒæ­¥ï¼Œä½†è¿™æ ·å°†è´¦å·å¯†ç å­˜å‚¨åœ¨ä»–äººæœåŠ¡å™¨æ€»å½’ä¸æ”¾å¿ƒï¼›å…è´¹è½¯ä»¶é€šå¸¸ä¸æ”¯æŒäº‘ç«¯ä¸åŒï¼Œéœ€è¦è‡ªå·±ä½¿ç”¨äº‘ç›˜æ¥åŒæ­¥ï¼Œæ“ä½œéº»çƒ¦ã€‚\nè½¯ä»¶å¯èƒ½å­˜åœ¨åé—¨ï¼Œå¯¼è‡´è´¦å·å¯†ç æ³„éœ²ã€‚\nè½¯ä»¶å¯èƒ½éšæ—¶åœæ­¢è¿è¥æˆ–æ— æ³•æ‰“å¼€ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘è®¤ä¸ºåªæœ‰è®°åœ¨å¤§è„‘ä¸­çš„å¯†ç æ‰æ˜¯æœ€å®‰å…¨å’Œæ–¹ä¾¿çš„ã€‚é‚£ä¹ˆï¼Œå¯¹äºå¤§å¤šæ•°æ²¡æœ‰ä»€ä¹ˆå¯†ç å­¦åŸºç¡€çš„æ™®é€šäººæ¥è¯´ï¼Œå¦‚ä½•å½¢æˆä¸€å¥—è‡ªå·±çš„ä¸ªäººè´¦å·å¯†ç è®¾ç½®ä½“ç³»å‘¢ï¼Ÿ\nè´¦å·å¯†ç ä½“ç³»ç”±è´¦å·å’Œå¯†ç äºŒè€…æ„æˆï¼Œä¸€ä¸€å¯¹åº”ï¼Œéœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å¿˜è®°å¯†ç ï¼ŒåŒæ ·æˆ‘ä»¬ä¹Ÿå¯èƒ½å¿˜è®°è´¦å·ï¼Œå› æ­¤è´¦å·å’Œå¯†ç åŒæ ·é‡è¦ã€‚\nè´¦å·æ ¹æ®ä½¿ç”¨åœºæ™¯ï¼ˆå›½å†…ã€ç½‘ç«™ï¼‰å’Œç³»ç»Ÿæ³¨å†Œè¦æ±‚çš„ä¸åŒï¼Œé€šå¸¸éœ€è¦å‡†å¤‡å¦‚ä¸‹ç±»å‹çš„è´¦å·ã€‚\næ‰‹æœºå·ç ç°åœ¨åŸºæœ¬æ¯ä¸ªäººéƒ½æœ‰æ‰‹æœºå·ç ï¼Œè€Œä¸”å›½å†…æ‰‹æœºå·éƒ½å·²å®åè®¤è¯ï¼Œæ³¨å†Œå›½å†…ç½‘ç«™ã€åº”ç”¨æ—¶ä¼˜å…ˆä½¿ç”¨æ‰‹æœºå·ç è¿›è¡Œæ³¨å†Œï¼Œå¦‚æœæ”¯æŒçŸ­ä¿¡éªŒè¯ç ç™»å½•ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨çŸ­ä¿¡éªŒè¯ç ç™»å½•ã€‚\nç”µå­é‚®ä»¶éœ€è¦å‡†å¤‡å›½å†…å’Œå›½å¤–ä¸¤ä¸ªç”µå­é‚®ä»¶ï¼Œåˆ†åˆ«ç”¨äºæ³¨å†Œå›½å†…ã€å¤–çš„ç½‘ç«™å’Œåº”ç”¨ã€‚å› ä¸ºå›½å¤–å¹³å°å¯èƒ½ä¸æ”¯æŒå›½å†…çš„é‚®ä»¶æœåŠ¡å•†ï¼Œè€Œå¦‚æœä½¿ç”¨å›½å¤–é‚®ä»¶æœåŠ¡æ³¨å†Œå›½å†…å¹³å°ï¼Œåˆå¯èƒ½å¯¼è‡´é‚®ä»¶æ”¶å–ç¼“æ…¢æˆ–æ— æ³•æ”¶å–ï¼Œå› æ­¤å»ºè®®æ ¹æ®å›½å†…å¤–åº”ç”¨åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å›½å†…å¤–é‚®ä»¶æœåŠ¡ã€‚\nå›½å†…é‚®ä»¶æœåŠ¡æ¨èï¼š\n\n163\nQQ\n\nå›½å¤–é‚®ä»¶æœåŠ¡æ¨èï¼š\n\nGmail\nOutlook\n\nä¸å»ºè®®ä½¿ç”¨å°ä¼—é‚®ç®±ï¼Œè¿™äº›é‚®ç®±å¯èƒ½éšæ—¶å› ä¸ºå…¬å¸ç»è¥ä¸å–„è€Œå€’é—­æˆ–åœæ­¢æœåŠ¡ã€‚\nè‹±æ–‡æ•°å­—è´¦å·æœ‰çš„ç½‘ç«™æ”¯æŒä½¿ç”¨â€œè‹±æ–‡+æ•°å­—â€å½¢å¼çš„è´¦å·è¿›è¡Œæ³¨å†Œï¼ˆå½“ç„¶åæœŸå¯èƒ½å› ä¸ºè´¦å·å®‰å…¨æ€§ï¼Œè¦æ±‚ç»‘å®šæ‰‹æœºå·æˆ–é‚®ç®±ï¼‰ï¼Œå»ºè®®ä½¿ç”¨ç»Ÿä¸€çš„ã€ä¸æš´éœ²éšç§çš„è‹±æ–‡æ•°å­—è´¦å·ã€‚\nä¸å»ºè®®åœ¨è´¦å·ä¸­ä½¿ç”¨ä¸­æ–‡ã€ä¸‹åˆ’çº¿ã€æ¨ªçº¿ï¼Œå› ä¸ºè™½ç„¶æœ‰äº›çš„ç½‘ç«™æ”¯æŒè¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œä½†æ— æ³•ä¿è¯æ‰€æœ‰ç½‘ç«™éƒ½æ”¯æŒè¿™äº›å­—ç¬¦ã€‚\néšç§æ€§åœ¨æ³¨å†Œå›½å†…ç½‘ç«™&#x2F;åº”ç”¨æ—¶ï¼Œä¸éœ€è¦çº ç»“ä½¿ç”¨å›½å†…æ‰‹æœºå·ã€é‚®ç®±çš„éšç§æ€§ï¼Œå› ä¸ºæ ¹æ®å›½å†…ç›®å‰çš„æ”¿ç­–å’Œç°çŠ¶ï¼Œå›½å†…ç½‘ç«™å’Œåº”ç”¨åŸºæœ¬æ²¡æœ‰éšç§æ€§å¯è¨€ã€‚\nå¯†ç æœ€å®‰å…¨çš„å¯†ç æ–¹æ¡ˆè‚¯å®šæ˜¯ä¸åŒçš„ç½‘ç«™å’Œåº”ç”¨ä½¿ç”¨ä¸åŒçš„éšæœºå­—ç¬¦ä¸²ä½œä¸ºå¯†ç ï¼Œä½†æ˜¯è¿™æ ·ä¸æ–¹ä¾¿è®°å¿†ï¼Œè€Œä¸”å¤§å¤šæ•°æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦è¿™ä¹ˆé«˜å¼ºåº¦çš„å®‰å…¨æ€§ã€‚\nä¸‹é¢æ˜¯ä¸€ç§æŠ˜ä¸­çš„å¯†ç ç”Ÿæˆæ–¹æ¡ˆï¼Œç”Ÿæˆçš„å¯†ç å¯ä»¥ç¬¦åˆç»å¤§å¤šæ•°åº”ç”¨çš„è¦æ±‚ï¼Œè¯¥æ–¹æ¡ˆå¯ä»¥åœ¨ä¿è¯å¯†ç å®‰å…¨çš„å‰æä¸‹ï¼Œæ–¹ä¾¿è®°å¿†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nè¯¥æ–¹æ¡ˆè¿˜æœ‰å¾ˆå¤šå¯æ”¹è¿›ä¹‹å¤„ï¼Œä¾‹å¦‚åº”ç”¨åç§°ä¹Ÿå¯ä»¥é€šè¿‡æŸç§å›ºå®šè§„åˆ™æ¥ç¼©å†™ç­‰ã€‚\n\nå›ºå®šå‰ç¼€å’Œç‰¹æ®Šå­—ç¬¦åç¼€éœ€è¦æ ¹æ®è‡ªå·±å–œå¥½æ¥è®¾å®šï¼Œå¦‚å›ºå®šå­—ç¬¦å‰ç¼€ä¸ºâ€œheâ€ï¼Œç‰¹æ®Šå­—ç¬¦åç¼€ä¸ºâ€œ?â€ã€‚\næ··æ·†ç åˆ™æ ¹æ®åº”ç”¨åç§°ç¼©å†™é•¿åº¦ï¼ˆè¡¥é›¶ä¹‹å‰çš„é•¿åº¦ï¼‰çš„ä¸åŒè€Œä¸åŒï¼Œéœ€è¦è‡ªå·±å®šä¹‰ä¸€å¥—è§„åˆ™ï¼Œå¦‚ï¼š\n\n\n\né•¿åº¦\næ··æ·†ç \n\n\n\n1 ~ 2\n1111\n\n\n3 ~ 4\n2222\n\n\n5 ~ 7\n3333\n\n\n8 ~ 10\n4444\n\n\n10 ä»¥ä¸Š\n5555\n\n\n\nä¸Šè¡¨ä»…ç”¨ä½œç¤ºä¾‹ï¼ŒæŠ›ç –å¼•ç‰ã€‚\n\næ ¹æ®ä¸Šè¿°ç¤ºä¾‹è§„åˆ™ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªç½‘ç«™çš„å¯†ç ç¤ºä¾‹ã€‚\nçŸ¥ä¹heZ00H1111?ä»Šæ—¥å¤´æ¡heJrtT2222?ChromeheChromE3333?\n\nä¸é‡è¦çš„è´¦å·å¯†ç ä¸ºäº†é˜²æ­¢è´¦å·å’Œå¯†ç æ³„éœ²ï¼Œä»è€Œè¢«ä»–äººçŒœæµ‹å‡ºå¯†ç çš„ç”Ÿæˆè§„åˆ™ï¼Œå› æ­¤åœ¨æ³¨å†Œå°å‹ã€éæ­£è§„ã€ä¸é‡è¦çš„ç½‘ç«™å’Œåº”ç”¨æ—¶ï¼Œå»ºè®®ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„è´¦å·å’Œå¯†ç ï¼Œå³ä¾¿å¯†ç æ³„éœ²ä¹Ÿæ— å…³ç´§è¦ã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"æœ‰è¶£çš„Unicodeè¡¨æƒ…ç¬¦å·","url":"/post/3984616957.html","content":"æœ¬æ–‡äº†è½¬è½½å’Œæ”¶é›†äº†ä¸€äº›å¸¸ç”¨çš„ Unicode è¡¨æƒ…ç¬¦å·ï¼Œæ–¹ä¾¿æŸ¥é˜…ã€‚å®Œæ•´çš„ Unicode è¡¨æƒ…ç¬¦å·å¯ä»¥æŸ¥è¯¢ä¸‹é¢çš„ç½‘ç«™ï¼š\n\nunicodeå®˜ç½‘emojiåˆ—è¡¨\nwikipedia List_of_emojis\n\n\n\nå‡ ä½•å›¾å½¢ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ‡ğŸ‰ğŸŒğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸšğŸ›ğŸœğŸğŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ââœ”âœ…â˜‘ï¸ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸŸ€ğŸŸ‚ğŸŸƒğŸŸ„ğŸŸ†ğŸŸ‡ğŸŸˆğŸŸ‰ğŸŸŠğŸŸŒğŸŸğŸŸğŸŸğŸŸ’ğŸŸ”ğŸŸ ğŸŸ¡ğŸŸ¢ğŸŸ£ğŸŸ¤ğŸŸ¥ğŸŸ¦ğŸŸ§ğŸŸ¨ğŸŸ©ğŸŸªğŸŸ«\nè¡¨æƒ…ğŸ¤—ğŸ¤«ğŸ¤£ğŸ™ƒğŸ™‚ğŸ¥°ğŸ¤©ğŸ¤ªğŸ¤‘ğŸ¤­ğŸ¤”ğŸ¤ğŸ¤¬ğŸ¥±ğŸ˜©ğŸ¥ºğŸ§ğŸ¤“ğŸ˜ğŸ¤ ğŸ¥³ğŸ˜µâ€ğŸ’«ğŸ¤¯ğŸ¤§ğŸ˜·ğŸ¤’ğŸ¤•ğŸ¤¢ğŸ¤®ğŸ¥µğŸ¥¶ğŸ¥´ğŸ¤¤ğŸ¤¥ğŸ¤¨ğŸ¤–ğŸ¤¡ğŸ’©\nğŸ™ˆ ğŸ™‰ ğŸ™Š\nğŸ˜€ğŸ˜ğŸ˜‚ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šâ˜ºğŸ˜‡ğŸ˜ğŸ˜‘ğŸ˜¶ğŸ˜ğŸ˜£ğŸ˜¥ğŸ˜®ğŸ˜¯ğŸ˜ªğŸ˜«ğŸ˜´ğŸ˜ŒğŸ˜›ğŸ˜œğŸ˜ğŸ˜’ğŸ˜“ğŸ˜”ğŸ˜•ğŸ˜²ğŸ˜·ğŸ˜–ğŸ˜ğŸ˜ŸğŸ˜¤ğŸ˜¢ğŸ˜­ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜¬ğŸ˜°ğŸ˜±ğŸ˜³ğŸ˜µğŸ˜¡ğŸ˜ \næƒ…æ„ŸğŸ’‹ğŸ’¯ğŸ’¢ğŸ’¥ğŸ’«ğŸ’¦ğŸ’¨ğŸ•³ğŸ’¬ğŸ‘ï¸â€ğŸ—¨ï¸ğŸ—¨ğŸ—¯ğŸ’­ğŸ’¤\näººç‰©ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘´ğŸ‘µğŸ‘¶ğŸ‘±ğŸ‘®ğŸ‘²ğŸ‘³ğŸ‘·ğŸ‘¸ğŸ’‚ğŸ…ğŸ‘°ğŸ‘¼ğŸ’†ğŸ’‡ğŸ™ğŸ™ğŸ™…ğŸ™†ğŸ’ğŸ™‹ğŸ™‡ğŸ™ŒğŸ™ğŸ‘¤ğŸ‘¥ğŸš¶ğŸƒğŸ‘¯ğŸ’ƒğŸ‘«ğŸ‘¬ğŸ‘­ğŸ’ğŸ’‘ğŸ‘ª\nä¸åŒè‚¤è‰²ã€å‘å‹ã€æ€§åˆ«çš„äººğŸ‘´ğŸ‘´ğŸ»ğŸ‘´ğŸ¼ğŸ‘´ğŸ½ğŸ‘´ğŸ¾ğŸ‘´ğŸ¿ğŸ’‡ğŸ¦°ğŸ¦±ğŸ¦³ğŸ¦²ğŸ§‘ğŸ‘¨ğŸ‘©ğŸ‘«\næ‰‹åŠ¿ğŸ’ªğŸ‘ˆğŸ‘‰â˜ğŸ‘†ğŸ‘‡âœŒâœ‹ğŸ‘ŒğŸ‘ğŸ‘âœŠğŸ‘ŠğŸ‘‹ğŸ‘ğŸ‘âœ\næ‰‹æœºç”µè¯ğŸ“±ğŸ“²ğŸ“¶ğŸ“³ğŸ“´â˜ğŸ“ğŸ“ŸğŸ“ \nå…¬å…±ç¤¾ä¼šâ™»ğŸ§ğŸš®ğŸš°â™¿ğŸš¹ğŸšºğŸš»ğŸš¼ğŸš¾âš ğŸš¸â›”ğŸš«ğŸš³ğŸš­ğŸš¯ğŸš±ğŸš·ğŸ”ğŸ’ˆ\nåŠ¨ç‰©ğŸ™ˆğŸ™‰ğŸ™ŠğŸµğŸ’ğŸ¶ğŸ•ğŸ©ğŸºğŸ±ğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾ğŸˆğŸ¯ğŸ…ğŸ†ğŸ´ğŸğŸ®ğŸ‚ğŸƒğŸ„ğŸ·ğŸ–ğŸ—ğŸ½ğŸğŸ‘ğŸğŸªğŸ«ğŸ˜ğŸ­ğŸğŸ€ğŸ¹ğŸ°ğŸ‡ğŸ»ğŸ¨ğŸ¼ğŸ¾ğŸ”ğŸ“ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¸ğŸŠğŸ¢ğŸğŸ²ğŸ‰ğŸ³ğŸ‹ğŸ¬ğŸŸğŸ ğŸ¡ğŸ™ğŸšğŸŒğŸ›ğŸœğŸğŸğŸ¦‹\næ¤ç‰©ğŸ’ğŸŒ¸ğŸ’®ğŸŒ¹ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ·ğŸŒ±ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒµğŸŒ¾ğŸŒ¿ğŸ€ğŸğŸ‚ğŸƒ\nè‡ªç„¶å¤©æ°”ğŸŒğŸŒğŸŒğŸŒğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœâ˜€ğŸŒğŸŒâ­ğŸŒŸğŸŒ â˜â›…â˜”âš¡â„ğŸ”¥ğŸ’§ğŸŒŠğŸŒˆ\né£Ÿç‰©ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ…ğŸ†ğŸŒ½ğŸ„ğŸŒ°ğŸğŸ–ğŸ—ğŸ”ğŸŸğŸ•ğŸ³ğŸ²ğŸ±ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸ ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¡ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ‚ğŸ°ğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ¼â˜•ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ´\næ–‡ä½“ğŸªğŸ­ğŸ¨ğŸ°ğŸš£ğŸ›€ğŸ«ğŸ†âš½âš¾ğŸ€ğŸˆğŸ‰ğŸ¾ğŸ±ğŸ³â›³ğŸ£ğŸ½ğŸ¿ğŸ‚ğŸ„ğŸ‡ğŸŠğŸš´ğŸšµğŸ¯ğŸ®ğŸ²ğŸ·ğŸ¸ğŸºğŸ»ğŸ¬\nææ€–ğŸ˜ˆğŸ‘¿ğŸ‘¹ğŸ‘ºğŸ’€â˜ ğŸ‘»ğŸ‘½ğŸ‘¾ğŸ’£\nåäºŒç”Ÿè‚–ğŸğŸ‚ğŸ…ğŸ‡ğŸ‰ğŸğŸğŸğŸ’ğŸ“ğŸ•ğŸ–\næ—¶é’ŸğŸ•›ğŸ•§ğŸ•ğŸ•œğŸ•‘ğŸ•ğŸ•’ğŸ•ğŸ•“ğŸ•ŸğŸ•”ğŸ• ğŸ••ğŸ•¡ğŸ•–ğŸ•¢ğŸ•—ğŸ•£ğŸ•˜ğŸ•¤ğŸ•™ğŸ•¥ğŸ•šğŸ•¦âŒ›â³âŒšâ°â±â²ğŸ•°\nçˆ±å¿ƒâ¤ğŸ’ŒğŸ’â¤ï¸â€ğŸ”¥â¤ï¸â€ğŸ©¹ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ¤ğŸ–¤ğŸ¤ğŸ’˜â¤ğŸ’“ğŸ’”ğŸ’•ğŸ’–ğŸ’—ğŸ’™ğŸ’šğŸ’›ğŸ’œğŸ’ğŸ’ğŸ’Ÿâ£\näº¤é€šğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸšğŸšğŸš‹ğŸšŒğŸšğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸššğŸš›ğŸšœğŸš²â›½ğŸš¨ğŸš¥ğŸš¦ğŸš§âš“â›µğŸš£ğŸš¤ğŸš¢âœˆğŸ’ºğŸšğŸšŸğŸš ğŸš¡ğŸš€\nåŠå…¬ğŸ“±ğŸ“²â˜ğŸ“ğŸ“ŸğŸ“ ğŸ”‹ğŸ”ŒğŸ’»ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ¥ğŸ“ºğŸ“·ğŸ“¹ğŸ“¼ğŸ”ğŸ”ğŸ”¬ğŸ”­ğŸ“¡ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ““ğŸ“ƒğŸ“œğŸ“„ğŸ“°ğŸ“‘ğŸ”–ğŸ’³âœ‰ğŸ“§ğŸ“¨ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®âœâœ’ğŸ“ğŸ“ğŸ“‚ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“âœ‚ğŸ”’ğŸ”“ğŸ”ğŸ”ğŸ”‘\nç®­å¤´â¬†â†—â¡â†˜â¬‡â†™â¬…â†–â†•â†”â†©â†ªâ¤´â¤µğŸ”ƒğŸ”„ğŸ”™ğŸ”šğŸ”›ğŸ”œğŸ”\nå…«å¦â˜°â˜±â˜²â˜³â˜´â˜µâ˜¶â˜·\nä·€ä·ä·‚ä·ƒä·„ä·…ä·†ä·‡ä·ˆä·‰ä·Šä·‹ä·Œä·ä·ä·ä·ä·‘ä·’ä·“ä·”ä·•ä·–ä·—ä·˜ä·™ä·šä·›ä·œä·ä·ä·Ÿä· ä·¡ä·¢ä·£ä·¤ä·¥ä·¦ä·§ä·¨ä·©ä·ªä·«ä·¬ä·­ä·®ä·¯ä·°ä·±ä·²ä·³ä·´ä·µä·¶ä··ä·¸ä·¹ä·ºä·»ä·¼ä·½ä·¾ä·¿\næ‰‘å…‹ç‰ŒğŸ‚ ğŸ‚¡ğŸ‚¢ğŸ‚£ğŸ‚¤ğŸ‚¥ğŸ‚¦ğŸ‚§ğŸ‚¨ğŸ‚©ğŸ‚ªğŸ‚«ğŸ‚¬ğŸ‚­ğŸ‚®ğŸ‚±ğŸ‚²ğŸ‚³ğŸ‚´ğŸ‚µğŸ‚¶ğŸ‚·ğŸ‚¸ğŸ‚¹ğŸ‚ºğŸ‚»ğŸ‚¼ğŸ‚½ğŸ‚¾ğŸ‚¿ğŸƒğŸƒ‚ğŸƒƒğŸƒ„ğŸƒ…ğŸƒ†ğŸƒ‡ğŸƒˆğŸƒ‰ğŸƒŠğŸƒ‹ğŸƒŒğŸƒğŸƒğŸƒğŸƒ‘ğŸƒ’ğŸƒ“ğŸƒ”ğŸƒ•ğŸƒ–ğŸƒ—ğŸƒ˜ğŸƒ™ğŸƒšğŸƒ›ğŸƒœğŸƒğŸƒğŸƒŸğŸƒ ğŸƒ¡ğŸƒ¢ğŸƒ£ğŸƒ¤ğŸƒ¥ğŸƒ¦ğŸƒ§ğŸƒ¨ğŸƒ©ğŸƒªğŸƒ«ğŸƒ¬ğŸƒ­ğŸƒ®ğŸƒ¯ğŸƒ°ğŸƒ±ğŸƒ²ğŸƒ³ğŸƒ´ğŸƒµ\néº»å°†ç‰ŒğŸ€€ğŸ€ğŸ€‚ğŸ€ƒğŸ€„ğŸ€…ğŸ€†ğŸ€‡ğŸ€ˆğŸ€‰ğŸ€ŠğŸ€‹ğŸ€ŒğŸ€ğŸ€ğŸ€ğŸ€ğŸ€‘ğŸ€’ğŸ€“ğŸ€”ğŸ€•ğŸ€–ğŸ€—ğŸ€˜ğŸ€™ğŸ€šğŸ€›ğŸ€œğŸ€ğŸ€ğŸ€ŸğŸ€ ğŸ€¡ğŸ€¢ğŸ€£ğŸ€¤ğŸ€¥ğŸ€¦ğŸ€§ğŸ€¨ğŸ€©ğŸ€ªğŸ€«\nå¤šç±³è¯ºéª¨ç‰ŒğŸ€°ğŸ€±ğŸ€²ğŸ€³ğŸ€´ğŸ€µğŸ€¶ğŸ€·ğŸ€¸ğŸ€¹ğŸ€ºğŸ€»ğŸ€¼ğŸ€½ğŸ€¾ğŸ€¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸğŸŸğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ°ğŸ±ğŸ²ğŸ³ğŸ´ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿ğŸ‚€ğŸ‚ğŸ‚‚ğŸ‚ƒğŸ‚„ğŸ‚…ğŸ‚†ğŸ‚‡ğŸ‚ˆğŸ‚‰ğŸ‚ŠğŸ‚‹ğŸ‚ŒğŸ‚ğŸ‚ğŸ‚ğŸ‚ğŸ‚‘ğŸ‚’ğŸ‚“\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"æˆ´å»ºä¸šï¼šé˜…è¯»ä¹ æƒ¯ä¸äººç”Ÿæœªæ¥ï¼ˆè½¬è½½ï¼‰","url":"/post/1878076142.html","content":"äººæœ‰ä¸‘ä¿Šï¼Œä¹¦æœ‰æµ…æ·±ã€‚å°±åƒäººæœ‰ç§ç§è‰²è‰²ä¸€æ ·ï¼Œä¹¦ä¹Ÿåˆ†ä¸åŒçš„æ€§è´¨å’Œå±‚æ¬¡ã€‚\n\n\nä¸œæ±‰æ€æƒ³å®¶ç‹å……å°†å½“æ—¶çš„ä¹¦åˆ†ä¸ºä¸‰ç§ï¼šä½œã€è¿°ã€è®ºã€‚ä»–çš„åè‘—ã€Šè®ºè¡¡ã€‹åˆšæ€é’æ—¶ï¼Œæœ‰äººæ­ç»´ä»–â€œå¯è°“ä½œè€…â€ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–çš„è‘—ä½œç®—å¾—ä¸Šæ˜¯â€œä½œâ€ã€‚ç‹å……è°¦é€Šåœ°è¯´è‡ªå·±çš„ä¹¦â€œéä½œä¹Ÿï¼Œäº¦éè¿°ä¹Ÿï¼Œè®ºä¹Ÿâ€ã€‚ä»–æŠŠè‡ªå·±çš„ä»£è¡¨ä½œå–åä¸ºã€Šè®ºè¡¡ã€‹ã€‚åŸåˆ›æ€§è‘—ä½œå¯ç§°ä¸ºâ€œä½œâ€ï¼Œå®ƒä»¬æ¨ªç©ºå‡ºä¸–è€Œè‡ªé“¸ä¼Ÿè¯ï¼Œå±äºå‰æ— å¤äººä¸”åå¯æ¥è€…çš„ç»å…¸ã€‚æˆ–é˜è¿°ä»–äººä¹‹æ€ï¼Œæˆ–ç»¼è´¯ç™¾å®¶ä¹‹ç»ªï¼Œæˆ–å¼•ç”³å‰äººä¹‹å­¦ï¼Œè™½ç„¶æ²¡æœ‰åŸåˆ›æ€§ï¼Œä½†èƒ½è‡ªæˆä¸€å®¶è¨€ï¼Œè¿™ä¸€ç±»ä¹¦ç±ç§°ä¸ºâ€œè¿°â€ï¼›æˆ–è®°å½•â€œæ€æƒ³ç«èŠ±â€ï¼Œæˆ–æ›´æ­£å½“æ—¶é‚ªè¯´ï¼Œæˆ–åˆ†æä¸€æ—¶å˜æ•…ï¼ŒæŒ‰ç‹å……çš„è¯´æ³•ï¼Œå±äºâ€œæ‚è¯´â€ä¸€ç±»çš„ä¸œè¥¿ç»Ÿç§°ä¹‹ä¸ºâ€œè®ºâ€ã€‚\nä»Šå¤©ä¹¦ç±çš„ç§ç±»æ›´ä¸ºç¹å¤šï¼Œæœ‰ç»å…¸è‘—ä½œä¸æµè¡Œä¹¦ç±ä¹‹åˆ«ï¼Œæœ‰ä¸“ä¸šè‘—ä½œä¸å¤§ä¼—è¯»ç‰©ä¹‹æ®Šï¼Œæœ‰æ–‡å­—è¯»ç‰©ä¸è§†é¢‘è¯»ç‰©ä¹‹å¼‚â€¦â€¦ç½‘ç»œä¸Šçš„ç»å¤§å¤šæ•°è¯»ç‰©æ²¡æœ‰â€œä¹¦â€çš„å½¢æ€ï¼Œä½†å®ƒä»¬èµ¢å¾—äº†ç»å¤§å¤šæ•°è¯»è€…ã€‚è¿™äº›ä¸œè¥¿å¤šæ•°ä¸ä¼šæˆä¹¦ï¼Œå®ƒä»¬çš„ä½œè€…ä¹Ÿä¸æƒ³è‘—ä¹¦ã€‚\nå¯å–œçš„æ˜¯ï¼Œéšç€äº’è”ç½‘çš„å‘è¾¾å’Œæ‰‹æœºçš„æ™®åŠï¼Œäººç±»æœ‰å¯èƒ½çœŸæ­£å®ç°â€œçŸ¥è¯†çš„æ™®æƒ â€ï¼Œä»»ä½•å±‚æ¬¡ä»»ä½•å½¢å¼çš„ä¹¦ç±éƒ½èƒ½è½»æ˜“å¾—åˆ°ï¼Œå‰äººè”‘è§†çš„â€œå¼•è½¦å–æµ†ä¹‹æµâ€éƒ½èƒ½é˜…è¯»ã€‚åœ°é“é‡Œï¼Œå…¬äº¤ä¸Šï¼Œä¼‘æ¯æ—¶ï¼Œéšæ—¶éšåœ°éƒ½èƒ½çœ‹åˆ°â€œä½å¤´ä¸€æ—â€ã€‚\n\nâ€œå¼•è½¦å–æµ†ä¹‹æµâ€æ„æ€æ˜¯æ‹‰å¤§è½¦çš„ï¼Œåšå°ä¹°å–çš„ã€‚æŒ‡å¹³æ°‘ç™¾å§“ã€‚\n\nä¸è¿‡ï¼Œè¿™ç§æƒ…å†µè®©äººâ€œäº¦å–œäº¦å¿§â€â€”â€”éšç€çŸ¥è¯†çš„æ—¥ç›Šæ™®åŠåŒ–ï¼ŒçŸ¥è¯†ä¹Ÿæ—¥ç›Šæµ…è¡¨åŒ–å’Œç¢ç‰‡åŒ–ã€‚\nçŸ¥è¯†çš„æµ…è¡¨åŒ–ä¸ä»…åœ¨ç¤¾ä¼šå¤§ä¼—ä¸­å­˜åœ¨ï¼Œåœ¨ç ”ç©¶ç”Ÿå’Œå­¦è€…ä¸­ä¹Ÿå¾ˆæ™®éï¼ŒåŒºåˆ«åªåœ¨äº”åæ­¥ä¸ç™¾æ­¥ä¹‹é—´ã€‚è­¬å¦‚è¦å†™ä¸€ç¯‡æç™½è¯—ä¸­â€œæœˆäº®â€æ„è±¡çš„è®ºæ–‡ï¼Œå‰äººå°±å¾—é€šè¯»æç™½å…¨é›†ï¼Œä»Šäººåªéœ€è¦åœ¨ç”µè„‘ä¸­æ•²ä¸Šâ€œæœˆäº®â€äºŒå­—ï¼Œæç™½è¯—æ­Œä¸­æ‰€æœ‰ä¸â€œæœˆäº®â€æœ‰å…³çš„è¯—å¥éƒ½è¹¦äº†å‡ºæ¥ã€‚ä½ æ ¹æœ¬ç”¨ä¸ç€è¯»æç™½é›†ï¼Œç”šè‡³ç”¨ä¸ç€å»å®Œæ•´åœ°è¯»ä¸€é¦–æç™½è¯—ï¼Œä¸€ç¯‡ä¸Šä¸‡å­—çš„è®ºæ–‡å°±ç³Šå¼„å‡ºæ¥äº†ã€‚å‰äººè¯´æç™½è¯—â€œè±ªæ”¾é£˜é€¸â€ï¼Œæè¯—ä½•ä»¥â€œè±ªæ”¾â€ï¼Œåˆå¦‚ä½•â€œé£˜é€¸â€ï¼Œå†™æ–‡ç« çš„ä½œè€…å¯èƒ½ä¸¤çœ¼èŒ«ç„¶ï¼Œå¯¹å‰äººçš„è¯„è®ºç¼ºä¹æ·±åˆ»çš„ç†è§£ï¼Œå¯¹æç™½è¯—æ­Œä¹Ÿç¼ºä¹æ·±åº¦çš„ä½“éªŒã€‚é’±é”ºä¹¦è°ˆåˆ°æç™½è¯—ä¸­çš„æœˆäº®ï¼Œä»Šå¤©å­¦è€…ä¹Ÿè°ˆåˆ°æç™½è¯—ä¸­çš„æœˆäº®ï¼Œè¡¨é¢ä¸Šçœ‹â€œæœˆäº®è¿˜æ˜¯é‚£ä¸ªæœˆäº®â€ï¼Œä½†æ­¤â€œæœˆäº®â€éå½¼â€œæœˆäº®â€ã€‚\nçŸ¥è¯†ç¢ç‰‡åŒ–çš„æƒ…å†µæ›´ä¸ºä¸¥é‡ã€‚è¿‡å»è·å–çŸ¥è¯†å¤§å¤šæ¥äºä¹¦æœ¬ï¼Œä¹¦æœ¬ä¸Šçš„çŸ¥è¯†å…·æœ‰ä¸€å®šçš„ç³»ç»Ÿæ€§ï¼Œè€Œä¸”è¿˜éœ€è¦ä¸€å®šçš„é€»è¾‘è¯æ˜æˆ–äº‹å®ä¾æ®ï¼Œè¿™ç§çŸ¥è¯†å¾€å¾€ç³»ç»Ÿå®Œæ•´ï¼Œè€Œä¸”è¿˜å…·æœ‰é€»è¾‘ä¸Šçš„è¿è´¯æ€§ã€‚ä»Šå¤©ï¼Œæ— è®ºæ˜¯æ—¥å¸¸ç”Ÿæ´»ï¼Œè¿˜æ˜¯å­¦æœ¯ç ”ç©¶ï¼Œæˆ‘ä»¬éƒ½ä¸å¿…ç§¯ç´¯å¤§é‡çš„çŸ¥è¯†ï¼Œæ›´ä¸å¿…å»ºç«‹è‡ªå·±çš„çŸ¥è¯†ç»“æ„ï¼Œä»€ä¹ˆçŸ¥è¯†éƒ½å¯ä»¥â€œè°·æ­Œâ€â€œç™¾åº¦â€ï¼Œä»€ä¹ˆææ–™éƒ½å¯ä»¥å»æ–‡çŒ®æ£€ç´¢ã€‚æ— é¡»ç©·ç»çš“é¦–ï¼Œæ— é¡»åšé—»å¼ºè®°ï¼Œæ— é¡»å­¦è¯†æ¸Šåšï¼Œåœ¨ç”Ÿæ´»ä¸ç ”ç©¶ä¸­ç…§æ ·ç•…é€šæ— é˜»ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªé¢†åŸŸéƒ½æ½‡æ´’æ— å¿§ã€‚åªè¦ä½ ä¼šâ€œè°·æ­Œâ€ï¼Œä¼šâ€œç™¾åº¦â€ï¼Œä¼šæœç´¢ï¼Œæ— çŸ¥å¯ä»¥æ˜¾å¾—æœ‰çŸ¥ï¼Œä¸å­¦ä¹Ÿå¯ä»¥æ˜¾å¾—åšå­¦ã€‚\né•¿æ­¤ä»¥å¾€ï¼Œæˆ‘ä»¬æ—¢éš¾ä»¥è®¤çŸ¥å“²äººç†è®ºä½“ç³»çš„æ·±åˆ»ä¸¥è°¨ï¼Œä¹Ÿéš¾ä»¥ä½“éªŒè¯—äººæƒ…æ„Ÿçš„åšå¤§å´‡é«˜ï¼Œç”šè‡³æ— æ³•æ„Ÿå—è‰ºæœ¯ä½œå“çš„ç»†è…»ç¾å¦™ï¼Œå› è€Œè®¤è¯†ä¼šè¶Šæ¥è¶Šæµ®æµ…ï¼Œå¿ƒçµä¼šè¶Šæ¥è¶Šè’èŠœï¼Œå®¡ç¾ä¼šè¶Šæ¥è¶Šåº¸ä¿—ã€‚ä»æ¥ä¸å»ç¢°ä¸€ç¢°åŸåˆ›æ€§çš„ç»å…¸ï¼Œæˆ‘ä»¬è‡ªå·±æ€ä¹ˆå¯èƒ½ä¼šæœ‰åŸåˆ›æ€§ï¼Ÿ\né˜…è¯»å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼šæ¶ˆé£æ€§é˜…è¯»ã€é‰´èµæ€§é˜…è¯»ä¸æŒ‘æˆ˜æ€§é˜…è¯»ã€‚\næ¶ˆé£æ€§é˜…è¯»çº¯ç²¹æ˜¯ä¸ºäº†æ¶ˆç£¨æ—¶å…‰ï¼Œæ¯”å¦‚åœ¨æ‰‹æœºä¸Šåˆ·åˆ·å¤©å—åœ°åŒ—çš„å¥‡é—»ï¼Œçœ‹çœ‹ç”·å¥³æ˜æ˜Ÿçš„æ©æ€¨ï¼Œä¸Šè´­ç‰©ç½‘ä¸Šçœ‹çœ‹ä»Šå¹´ç©¿ä»€ä¹ˆè£™å­ï¼Œä¸Šæ—…æ¸¸ç½‘ä¸Šçœ‹çœ‹å»å“ªäº›åœ°æ–¹è‡ªé©¾æ¸¸â€¦â€¦è¿™ç§é˜…è¯»è¡¨é¢ä¸Šæ˜¯åœ¨â€œçœ‹â€ï¼Œå…¶å®æ˜¯ä¸€æ— æ‰€â€œçœ‹â€ï¼Œå› ä¸ºä»–æœ¬æ¥å°±æ²¡æœ‰æ‰“ç®—å»â€œçœ‹â€ä»€ä¹ˆï¼Œæ‰€ä»¥ä»–æ‰ä¼šä»€ä¹ˆéƒ½â€œçœ‹â€ã€‚ä»–é˜…è¯»åªæ˜¯ä¸ºäº†æ’é£æ— èŠï¼Œå¸Œæœ›è¿™ç™¾æ— èŠèµ–çš„æ—¥å­èµ¶å¿«æºœèµ°ï¼Œç›¼åªç›¼â€œé©¬å„¿å‘€å¿«å¿«åœ°èµ°â€ï¼Œè¿™å°±æ˜¯æ‰€è°“â€œä¸åšæ— èŠä¹‹äº‹ï¼Œä½•ä»¥é£æœ‰æ¶¯ä¹‹ç”Ÿâ€ã€‚\né‰´èµæ€§é˜…è¯»åŒ…æ‹¬å¬è½»ç›ˆä¼˜ç¾çš„éŸ³ä¹ï¼Œçœ‹èµå¿ƒæ‚¦ç›®çš„ç”»å†Œï¼Œè¯»æ–‡å­—ä¼˜ç¾çš„æ¸¸è®°ï¼Œè¯»æƒ…èŠ‚æ›²æŠ˜çš„å°è¯´ç­‰ç­‰ã€‚è¿™ç±»é˜…è¯»è½»æ¾æ„‰å¿«ï¼Œç´§å¼ æ€è€ƒä¹‹ä½™ï¼Œä¸‹ç­å½’æ¥ä¹‹åï¼Œå¬å¬éŸ³ä¹ï¼Œç¿»ç¿»ç”»å†Œï¼Œå“å“å­—å¸–ï¼Œè¯»è¯»å°å“ï¼Œæ—¢èƒ½ä½¿è‡ªå·±èº«å¿ƒæ”¾æ¾ï¼Œåˆèƒ½æé«˜è‡ªå·±çš„å®¡ç¾èƒ½åŠ›ï¼Œè¿˜å¯ä»¥ä½¿è‡ªå·±æƒ…æ„Ÿä¸°å¯Œç»†è…»ï¼Œè¿™ç§é˜…è¯»æœ‰â€œä¸€çŸ³ä¸‰é¸Ÿâ€çš„å¤šé‡å¥½å¤„ã€‚\næœ€åä¸€ç§é˜…è¯»å°±æ˜¯æŒ‘æˆ˜æ€§é˜…è¯»ã€‚äººç±»æµä¼ ä¸‹æ¥çš„ä¼Ÿå¤§ç»å…¸ï¼Œè¿˜æœ‰ä¸“ä¸šå…¬è®¤çš„åè‘—ï¼Œè¿™ä¸€ç±»ç»å…¸è‘—ä½œéƒ½æ˜¯æŒ‘æˆ˜æ€§é˜…è¯»çš„è¯»ç‰©ã€‚è¦æƒ³æŒ‘æˆ˜è‡ªå·±çš„æ™ºåŠ›æé™ï¼Œè¦æƒ³æ”€ç™»çµé­‚çš„ç ç©†æœ—ç›å³°ï¼Œæœ€ä½³é€‰æ‹©å°±æ˜¯æŒ‘æˆ˜æ€§é˜…è¯»ï¼Œå»é˜…è¯»é‚£äº›ä¼Ÿå¤§çš„ç»å…¸ï¼Œå»ç»“äº¤é‚£äº›éå‡¡çš„æ™ºè€…æˆ–å´‡é«˜çš„ä¼Ÿäººã€‚\nä¸€ä½è¥¿æ–¹ä½œå®¶æ›¾ä¸æ— è°ƒä¾ƒåœ°è¯´ï¼Œæ‰€è°“â€œç»å…¸è‘—ä½œâ€å°±æ˜¯äººäººè¯´å¥½ï¼Œä½†äººäººä¸è¯»çš„é‚£äº›ä¹¦ç±ã€‚çš„ç¡®ï¼Œç»å…¸å¤§å¤šæ•°æ˜¯åœ¨äººä»¬ä¹¦æ¶ä¸Šè¢«â€œä¾›å¥‰â€ï¼Œå¹¶ä¸æ˜¯åœ¨äººä»¬æ¡ˆå¤´ä¸Šè¢«é˜…è¯»ã€‚ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿæˆ–æ·±åº¦è¶…å‡ºäº†è‡ªå·±çš„æ™ºåŠ›èŒƒå›´ï¼Œåˆè¯»å¾€å¾€ä¸çŸ¥æ‰€äº‘ï¼Œå¦‚ç½—ç´ çš„ã€Šæ•°å­¦åŸç†ã€‹ã€å¼—é›·æ ¼çš„ã€Šç®—æœ¯åŸºç¡€ã€‹ï¼›æˆ–è¡Œæ–‡è¿‡äºæ™¦æ¶©è‰°æ·±ï¼Œè¶…å‡ºäº†ä¸€èˆ¬è¯»è€…å¿å—çš„æé™ï¼Œå¦‚åº·å¾·çš„ã€Šçº¯ç²¹ç†æ€§æ‰¹åˆ¤ã€‹ã€æµ·å¾·æ ¼å°”çš„ã€Šå­˜åœ¨ä¸æ—¶é—´ã€‹ï¼›æˆ–è‡ªå·±ç¼ºä¹å¿…è¦çš„çŸ¥è¯†å‡†å¤‡ï¼Œæˆ–æ—¶ä»£ç›¸éš”ååˆ†é¥è¿œï¼Œä»Šäººæ— æ³•é¢†ç•¥ä¹¦ä¸­çš„ç¾æ„Ÿï¼Œå¦‚å±ˆåŸçš„éªšèµ‹ã€æœç”«çš„è¯—æ­Œã€ä½†ä¸çš„ã€Šç¥æ›²ã€‹ã€‚è¿™äº›ç»å…¸æ˜¯äººç±»çš„ç²¾ç¥å®åº“ï¼Œä½†å¤§å¤šæ•°äººä¸å¾—å…¶é—¨è€Œå…¥ï¼Œå®ƒåªå‘é‚£äº›å‹¤å¥‹åšæ¯…è€…æ•å¼€å¤§é—¨ã€‚\nç»å…¸ç»ä¸èƒ½â€œéšä¾¿ç¿»ç¿»â€ï¼Œå†ä¸‰æ€è€ƒç¢ç£¨æ‰èƒ½æ¢éªŠå¾—ç ï¼Œåå¤å’€åš¼æ‰èƒ½å“å’‚å‡ºå®ƒçš„å‘³é“ã€‚ç»å…¸ä¸æ˜¯å¿ƒçµçš„â€œå¯å£å¯ä¹â€ï¼Œæˆ‘ä»¬å¯ä»¥å’•å™œå’•å™œåœ°ä¸€é¥®è€Œå°½ï¼Œå®ƒéœ€è¦æˆ‘ä»¬ä¸æ–­é’»ç ”æ‰èƒ½å¸¸è¯»å¸¸æ–°ï¼Œå¦‚å…ˆç§¦çš„ã€Šåº„å­ã€‹ã€å¸é©¬è¿çš„ã€Šå²è®°ã€‹ã€é©¬å…‹æ€çš„ã€Šèµ„æœ¬è®ºã€‹ã€é»‘æ ¼å°”çš„ã€Šç²¾ç¥ç°è±¡å­¦ã€‹ï¼Œä½ è¶Šè¯»è¶Šè§‰å¾—å¥‡å¦™æ— æ¯”ã€‚å€˜è‹¥çœŸæ­£è¯»æ‡‚äº†è¿™äº›ç»å…¸ï¼Œä½ ä¼šæœ‰ä¸€ç§â€œä¸€è§ˆä¼—å±±å°â€çš„å¼€è±ï¼›å€˜è‹¥ç»ˆèº«æµ¸æ¶¦äºä¼Ÿå¤§çš„ç»å…¸ä¹‹ä¸­ï¼Œä½ å°†â€œèº«å¿ƒè·ç›Šé¡æ¶¯ï¼Œæ–‡ç¬”å¢åæœ‰æœ›â€ã€‚\n\nâ€œæ¢éªŠå¾—ç â€çš„åŸæ„æ˜¯éªŠç ï¼Œç›¸ä¼ ä¸ºè—åœ¨éªŠé¾™é¢”ä¸‹çš„å®ç ï¼ŒéªŠé¾™æ –æ¯æ·±æ¸Šä¸­ï¼Œæ¬²å–å¾—éªŠç ï¼Œå¿…é¡»æ½œå…¥æ·±æ¸Šï¼Œå¾…éªŠé¾™å…¥ç¡åï¼Œå†ä¿Ÿæœºçªƒå–ï¼›æŒ‡è·å¾—æä¸ºçè´µçš„å®ç‰©ï¼›åå¼•ç”³ä¸ºå†™ä½œæ–‡ç« èƒ½æŠ“ä½é‡ç‚¹ï¼Œæ·±å¾—é¢˜æ—¨çš„ç²¾é«“ã€‚\n\nå¯æƒœï¼Œæœ‰â€œä¼šå½“å‡Œç»é¡¶â€é›„å¿ƒçš„äººå¾ˆå¤šï¼Œä½†æœ€åå®ç°â€œå‡Œç»é¡¶â€å¿—å‘çš„äººæå°‘ã€‚å¤äººå¸¸å¸¸æ„Ÿå¹ï¼Œâ€œå­¦è€…å¦‚ç‰›æ¯›ï¼Œæˆè€…å¦‚éºŸè§’â€ï¼Œå­¦æ— æ‰€æˆçš„åŸå› æ˜¯æ²¡æœ‰å®šåŠ›ã€‚äººä¸äººæ‹‰å¼€å·®è·çš„å…³é”®ï¼Œå¤§å¤šä¸æ˜¯æ™ºåŠ›çš„é«˜ä¸‹ï¼Œè€Œæ˜¯æ¯…åŠ›ä¸æ’å¿ƒçš„å¤§å°ã€‚åŒ…æ‹¬æˆ‘åœ¨å†…çš„è®¸å¤šæœ‹å‹ï¼Œâ€œä¼šå½“å‡Œç»é¡¶â€çš„é›„å¿ƒä¸è¿‡ä¸€æ—¶å¿ƒè¡€æ¥æ½®ï¼Œè¿˜æ²¡æœ‰çˆ¬åˆ°åŠå±±è…°å°±è§éš¾è€Œè¿”ã€‚\nå¼ƒéš¾å›¾æ˜“æ˜¯äººçš„å¤©æ€§ï¼Œâ€œä¸œæµ·è¥¿æµ·ï¼Œå¿ƒåŒç†åŒâ€ï¼Œå¥—ç”¨ç‹å°”å¾·çš„è¯è¯´ï¼Œæ‰€æœ‰äººéƒ½æœ‰æƒ°æ€§ï¼Œè¿æˆ‘ä¹Ÿæœ‰æƒ°æ€§ï¼šåªè¦èƒ½è¯»æ¶ˆé£è¯»ç‰©æˆ‘å°±ä¸è¯»ç»å…¸ï¼Œåªè¦èƒ½è¯»ä¸­æ–‡æˆ‘å°±ä¸æƒ³è¯»è‹±æ–‡ï¼Œåªè¦èƒ½è¯»ç°ä»£æ–‡å­¦æˆ‘å°±ä¸æƒ³è¯»å¤ä»£æ–‡å­¦ï¼Œåªè¦èƒ½çœ‹ç”µè§†æˆ‘å°±ä¸æƒ³è¯»ä¹¦ï¼Œåªè¦èƒ½ç©æ‰‹æœºæˆ‘å°±ä¸ä¼šçœ‹ç”µè§†â€¦â€¦\nå½“ç„¶ï¼Œä»Šå¤©äººä»¬æ— æ³•æ‹’ç»æ‰‹æœºé˜…è¯»å’Œç½‘ç»œé˜…è¯»ã€‚é—®é¢˜æ˜¯ï¼Œèƒ½å¦è®©ç½‘ç»œç©ºé—´ä¹Ÿé£˜æº¢ä¹¦é¦™ï¼Ÿæ˜¯å¦ä¹Ÿèƒ½åœ¨æ‰‹æœºä¸Šå’€åš¼ç»å…¸ï¼Ÿçœ‹æ¥äººä»¬å·²ç»å‘ç°äº†é—®é¢˜çš„ä¸¥é‡æ€§ï¼Œå°±åƒå¤§å®¶æ‹’ç»å¿«é¤é£Ÿå“ä¸€æ ·ï¼Œäººä»¬ä¼šé€æ¸æ”¹å˜æ¶ˆé£å¼æµè§ˆï¼Œåœ¨ç½‘ç»œç©ºé—´ä¸­åŸ¹å…»æŒ‘æˆ˜æ€§é˜…è¯»çš„ä¹ æƒ¯ï¼ŒåŒæ—¶åœ¨çº¸è´¨ä¹¦æœ¬ä¸ç½‘ç»œç©ºé—´åŸ¹æ¤æ·±åº¦é˜…è¯»çš„åœŸå£¤ã€‚\nç¨ç¨ç•™æ„ä¸€ä¸‹å°±ä¸éš¾å‘ç°ï¼Œä¸åŒçš„é˜…è¯»å’Œæ€è€ƒä¹ æƒ¯ï¼ŒçŸ­æ—¶é—´å†…çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆå·®åˆ«ï¼Œæ—¶é—´ä¸€é•¿å°±å‡ºç°å¤©å·®åœ°åˆ«ï¼šæœ‰çš„æ‰åå‡ºä¼—ï¼Œæœ‰çš„â€œæ³¯ç„¶ä¼—äººâ€ã€‚ä½ è‡ªå·±é€‰æ‹©äº†ä»€ä¹ˆæ ·çš„é˜…è¯»ä¹ æƒ¯ï¼Œä½ å°±ä¸ºè‡ªå·±é€‰æ‹©äº†ä»€ä¹ˆæ ·çš„äººç”Ÿã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"ç”Ÿæ´»å®¶ï¼ˆè½¬è½½ï¼‰","url":"/post/1485983255.html","content":"ã€Šçº¢æ¥¼æ¢¦ã€‹ç¬¬äº”åå›ä¸­ï¼Œä¸€å¤œå¤§é›ªåï¼Œè´¾åºœå¤§è§‚å›­çš„å§å¦¹ä»¬ä¸€èµ·ä½œè¯—ï¼Œä¼—å§å¦¹è¦ç‹ç†™å‡¤ä¸ºå³æ™¯è”è¯—èµ·ä¸ªå¤´ã€‚ç‹ç†™å‡¤è™½åªè¯†å¾—å‡ ä¸ªå­—ï¼Œå€’ä¹Ÿä¸æ‰­æï¼Œç¬‘é“:â€œæˆ‘æƒ³ä¸‹é›ªå¿…åˆ®åŒ—é£ã€‚æ˜¨å¤œå¬è§äº†ä¸€å¤œçš„åŒ—é£ï¼Œæˆ‘æœ‰äº†ä¸€å¥ï¼Œå°±æ˜¯â€˜ä¸€å¤œåŒ—é£ç´§â€™ï¼Œå¯ä½¿å¾—?â€ä¼—äººå¬äº†ï¼Œéƒ½ç›¸è§†ç¬‘é“ï¼šâ€œè¿™å¥è™½ç²—ï¼Œä¸è§åº•ä¸‹çš„ï¼Œè¿™æ­£æ˜¯ä¼šä½œè¯—çš„èµ·æ³•ã€‚ä¸ä½†å¥½ï¼Œè€Œä¸”ç•™äº†å¤šå°‘åœ°æ­¥ä¸åäººâ€ã€‚\n\nçš„ç¡®ï¼Œä¸å¤§è§‚å›­é‡Œæ‰å¥³ä»¬çš„é”¦å¿ƒç»£å£æ¯”èµ·æ¥ï¼Œâ€œä¸€å¤œåŒ—é£ç´§â€ç”šè‡³ç®—ä¸ä¸Šè¯—ã€‚ä¸è¿‡ï¼Œå‡¤å§è¯´å¾—æ²¡é”™ã€‚å¤§é›ªå°†è½ä¹‹æ—¶ï¼Œå¿…æ˜¯è¦åˆ®åŒ—é£çš„ã€‚å¥¹ä¸æ˜¯ä¼˜ç§€çš„è¯—äººï¼Œå´æ˜¯ä¸€ä½æ´å¯Ÿä¸–äº‹çš„ç”Ÿæ´»å®¶ã€‚\næˆå¹´åï¼Œæˆ‘ä¸çˆ¶äº²èŠèµ·å‡¤å§çš„â€œä¸€å¤œåŒ—é£ç´§â€ï¼Œæ¯äº²çªç„¶é—®ï¼šâ€œè¿™ä¸ªå‡¤å§æ˜¯ä¸æ˜¯ä¸€ä¸ªå‰å®³äººç‰©ï¼ŒæŒç®¡ç€æ•´ä¸ªå®¶æ—äº‹åŠ¡?â€æˆ‘åƒæƒŠåœ°ç‚¹å¤´ï¼Œæ¯äº²è§†åŠ›ä¸ä½³çœ‹ä¸æˆæˆæ–‡ï¼Œæ›´æ²¡æœ‰è¯»è¿‡ã€Šçº¢æ¥¼æ¢¦ã€‹ï¼Œå¥¹æ˜¯å¦‚ä½•å¾—çŸ¥çš„å‘¢ï¼Ÿæ¯äº²è§£é‡Š:â€œä½ æƒ³å•Šï¼Œåœ¨æ·±å®…å¤§é™¢ï¼Œç†Ÿç¡çš„äººæ ¹æœ¬å¬ä¸åˆ°å¤–é¢çš„åŠ¨é™ã€‚èƒ½å¬åˆ°ä¸€å¤œåŒ—é£çš„äººï¼Œè‚¯å®šæ˜¯æ—¥å¤œæ“åŠ³ã€å¿ƒé‡Œè£…ç€äº‹çš„äººå•Š!â€\næ¯äº²çš„è¯è®©æˆ‘æƒ³èµ·å°æ—¶å€™çš„æ— æ•°ä¸ªæ¸…æ™¨ï¼Œçœ‹åˆ°é™¢å­é‡Œæœ‰ä¸€æ‘Šæ‘Šæ°´æ¸ï¼Œæˆ‘å¥½å¥‡åœ°é—®çˆ¶æ¯:â€œæ˜¨æ™šä¸‹é›¨äº†å—ï¼Ÿâ€ï¼Œâ€œåˆæ˜¯åˆ®é£åˆæ˜¯ä¸‹é›¨çš„ï¼Œå‡Œæ™¨å››äº”ç‚¹é’Ÿæ‰åœã€‚â€çˆ¶æ¯å›ç­”ã€‚å½“æ—¶æˆ‘è¿˜çº³é—·å„¿ï¼šæˆ‘æ€ä¹ˆä¸€ç‚¹å„¿åŠ¨é™éƒ½æ²¡æœ‰å¬åˆ°å‘¢ï¼Ÿç°åœ¨æƒ³æ¥ï¼Œé‚£æ—¶å¹´å°‘æ— å¿§æ— è™‘ï¼Œä¸€è§‰é…£ç¡åˆ°å¤©äº®ï¼Œç–¾é£éª¤é›¨éƒ½ä¸è‡ªå·±æ— å…³ã€‚è€Œçˆ¶æ¯ä¸ºä¸€å®¶äººçš„ç”Ÿè®¡æ“åŠ³ï¼Œæ™šä¸Šå¬åˆ°é£é›¨å£°ï¼Œä¼šæƒ¦è®°ç€è¡£æœæ”¶äº†æ²¡æœ‰ï¼Œå·²ç»ç»“äº†ç©—çš„åº„ç¨¼ä¼šä¸ä¼šè¢«é£é›¨æ‰“å¾—ä¸ƒé›¶å…«è½ï¼Œé›¨åé“è·¯æ³¥æ³æ˜¯å¦å½±å“å‡ºå·¥â€¦â€¦\nç»ˆäºï¼Œæˆ‘æ‡‚å¾—äº†çˆ¶æ¯ï¼Œä¹Ÿè¯»æ‡‚äº†å‡¤å§ã€‚\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"ç™½é…’å…¥é—¨","url":"/post/1855436935.html","content":"æ­£å€¼ 9 æœˆ 9 å…¨çƒé…’æ°´èŠ‚ï¼Œå„å¤§ç”µå•†éƒ½åœ¨åšæ´»åŠ¨ï¼Œè¶æœºç½‘è´­äº†ä¸€æ‰¹é…’æ°´ã€‚åœ¨äº«å—è¿™å¤§è‡ªç„¶é¦ˆèµ çš„ç¤¼ç‰©çš„åŒæ—¶ï¼Œä¹Ÿè¯´ä¸€è¯´è‡ªå·±å¯¹ç™½é…’çš„ç†è§£ã€‚å¸Œæœ›åœ¨äº†è§£äº†ç™½é…’çš„è¿™äº›çŸ¥è¯†åèƒ½æ˜æ˜ç™½ç™½å–é…’ã€‚\n\n\nç™½é…’é…¿é€ å·¥è‰ºç²®é£Ÿé…’ä¸å‹¾å…‘é…’é¦–å…ˆï¼Œæ‰€æœ‰çš„ç™½é…’éƒ½æ˜¯ç²®é£Ÿç»è¿‡å‘é…µã€è’¸é¦è€Œæˆçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç²®é£Ÿé…’ï¼Œè¿™ä¹Ÿå°è¯äº†äººä»¬å¸¸è¯´çš„â€œé…’æ˜¯ç²®é£Ÿç²¾ï¼Œè¶Šå–è¶Šå¹´è½»â€è¿™å¥è¯ã€‚ å› ä¸ºç™½é…’éƒ½è¦ç»è¿‡è’¸é¦è¿™ä¸ªæ­¥éª¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿç§°ç™½é…’ä¸ºâ€œè’¸é¦é…’â€ã€‚ ä½†æˆ‘ä»¬å¸¸æåˆ°çš„â€œéç²®é£Ÿé…’â€æŒ‡çš„æ˜¯ç”¨é£Ÿç”¨é…’ç²¾ï¼ˆæœ‰çš„ç”šè‡³ç”¨çš„å·¥ä¸šé…’ç²¾ï¼‰å‹¾å…‘è€Œæˆçš„é…’ï¼Œæˆ‘è®¤ä¸ºè¿™ç§é…’ä¸¥æ ¼æ„ä¹‰ä¸Šå¯ä»¥ç§°ä¸º**â€œå‡é…’â€**(è™½ç„¶ä½¿ç”¨é£Ÿç”¨é…’ç²¾å‹¾å…‘åœ¨æ³•å¾‹ä¸Šæ˜¯è¢«å…è®¸çš„ï¼Œä¹Ÿå°±æ˜¯åé¢æåˆ°çš„æ¶²æ€å‘é…µé…’ï¼Œä½†æ³•å¾‹æ˜¯ç¦æ­¢ä½¿ç”¨å·¥ä¸šé…’ç²¾å‹¾å…‘é…’çš„)ï¼Œå–äº†ä¹‹åå¯¹äººä½“æ²¡æœ‰ä»»ä½•å¥½å¤„ï¼Œæœ€å¤šåªèƒ½éº»ç—¹ç¥ç»ï¼ˆå·¥ä¸šé…’ç²¾å‹¾å…‘çš„é…’æ˜¯ç»å¯¹ä¸èƒ½å–çš„ï¼Œå·¥ä¸šé…’ç²¾æˆä»½æ˜¯ç”²é†‡ï¼Œå°‘é‡å°±ä¼šä½¿äººå¤±æ˜æˆ–è€…è‡´å‘½ï¼‰ã€‚\nå¾ˆå¤šäººå¯¹**â€œå‹¾å…‘â€äºŒå­—å¾ˆæ•æ„Ÿï¼Œè®¤ä¸ºå‡¡æ˜¯å‹¾å…‘çš„é…’éƒ½ä¸æ˜¯å¥½é…’ï¼Œè¿™ä¸ªè§‚ç‚¹æ˜¯é”™è¯¯çš„ã€‚ ä¸‹é¢ä»‹ç»ç™½é…’çš„é…¿é€ å·¥è‰ºæ—¶ä¼šè¯´åˆ°ï¼Œç²®é£Ÿç­‰æœ€åˆç»è¿‡å‘é…µã€è’¸é¦å½¢æˆçš„é…’å«â€œåŸæµ†â€**ï¼ŒåŸæµ†çš„é…’ç²¾åº¦æ•°ä¸€èˆ¬åœ¨ 70 åº¦å·¦å³ï¼Œæ˜¯æ— æ³•ç›´æ¥é¥®ç”¨çš„ï¼Œéœ€è¦é™ä½å…¶åº¦æ•°æ‰èƒ½é¥®ç”¨ã€‚\n\nå¦‚æœåœ¨å¸‚é¢ä¸Šçœ‹åˆ°å¦‚â€œèŒ…å°é•‡ç²®é£ŸåŸæµ†é…’â€ç­‰è¿™æ ·çš„â€œåŸæµ†é…’â€ï¼Œä½†åº¦æ•°ä½äº 70 åº¦(å·¦å³)çš„ï¼Œéƒ½ä¸æ˜¯çœŸæ­£çš„åŸæµ†é…’ã€‚è¿™æ ·çš„å•†å®¶è¦ä¹ˆæ˜¯ä¸è¯šä¿¡ï¼Œè¦ä¹ˆå°±æ˜¯ä¸ä¸“ä¸šã€‚\n\né™ä½åº¦æ•°ä¸æ˜¯ç›´æ¥å¾€é…’é‡Œé¢æºæ°´ï¼Œè¿™æ ·å£æ„Ÿä¼šéå¸¸å·®ï¼Œè€Œä¸”ä¼šä½¿é…’ä½“å˜æµ‘æµŠã€‚ éœ€è¦ä¸“é—¨çš„ç™½é…’å‹¾å…‘å·¥è‰ºï¼Œç™½é…’å‹¾å…‘ä¸€é—¨å¾ˆå¤æ‚çš„å­¦ç§‘ï¼Œå‹¾å…‘ä¸»è¦æ˜¯å°†ä¸åŒçš„åŸæ–™ã€ä¸åŒçª–æ± ã€ä¸åŒç¯èŠ‚ã€ä¸åŒå¹´ä»½çš„é…’è¿›è¡Œè°ƒé…ï¼Œä»è€Œäº§ç”Ÿå…·æœ‰ä¸åŒå£å‘³ã€é¦™å‹çš„ç™½é…’ã€‚ æ ‡å‡†çš„ç™½é…’å‹¾å…‘å·¥è‰ºä¸­æ˜¯ä¸å…è®¸æ·»åŠ åŒ–å­¦æ·»åŠ å‰‚çš„ï¼Œç™½é…’çš„å£å‘³ã€é¦™å‹éƒ½æ˜¯è‡ªç„¶å½¢æˆçš„ã€‚\næˆ‘ä»¬å¯ä»¥è®¤ä¸ºå¸‚é¢ä¸Šæ‰€æœ‰çš„é…’éƒ½æ˜¯â€œå‹¾å…‘é…’â€ï¼Œåªæ˜¯æ¯ç§é…’å‹¾å…‘æ‰€ç”¨çš„åŸæ–™ã€å·¥è‰ºä¸ç›¸åŒï¼ŒèŒ…å°ã€äº”ç²®æ¶²ã€æ±¾é…’ç­‰æ— ä¸€ä¾‹å¤–ä¹Ÿæ˜¯å‹¾å…‘è€Œæˆçš„ã€‚å¥½é…’é‡‡ç”¨â€œé…’å‹¾å…‘é…’â€çš„æ–¹å¼ï¼Œå·®é…’é‡‡ç”¨â€œé…’ç²¾å‹¾å…‘æ°´â€æˆ–è€…â€œé…’ç²¾+é¦™ç²¾+æ·»åŠ å‰‚å‹¾å…‘æ°´â€çš„æ–¹å¼ã€‚\né…¿é€ å·¥è‰ºçº¯ç²®å›ºæ€å‘é…µã€æ¶²æ€å‘é…µç™½é…’åœ¨é…¿é€ å·¥è‰ºä¸Šåˆ†ä¸ºçº¯ç²®å›ºæ€å‘é…µå’Œæ¶²æ€å‘é…µ 2 ç§ã€‚\n\nçº¯ç²®å›ºæ€å‘é…µé…’æ˜¯é€šè¿‡ ç²®é£Ÿ + æ›² + å‘é…µ + é™ˆé…¿ + å‹¾å…‘ ç­‰å‡ ä¸ªç¯èŠ‚åˆ¶æˆçš„ã€‚\næ¶²æ€å‘é…µé…’æ˜¯ç”¨ç”˜è”—å’Œç”œèœæ¸£ã€è–¯å¹²ã€ç‰ç±³ç­‰ï¼ˆè¿™å‡ ç§æ¤ç‰©å‘é…µå‘¨æœŸçŸ­ã€å‡ºé…’ç‡é«˜ã€é…’è´¨å·®ï¼‰åˆ¶é€ å‡ºæ¥çš„é£Ÿç”¨é…’ç²¾ä¸ºåŸºç¡€é…’ï¼ŒåŠ å…¥å¢é¦™è°ƒå‘³ç‰©è´¨æ¨¡æ‹Ÿä¼ ç»Ÿç²®é£Ÿç™½é…’çš„å£æ„Ÿï¼Œç»è°ƒé…è€Œæˆçš„æ¶²æ€ç™½é…’ï¼Œè¡Œè¯å«â€œä¸‰ç²¾ä¸€æ°´â€ï¼Œå³é£Ÿç”¨é…’ç²¾ã€é¦™ç²¾ã€ç³–ç²¾ã€æ°´ã€‚\n\nç”±äºçº¯ç²®å›ºæ€å‘é…µå·¥è‰ºæ‰€éµå¾ªçš„éƒ½æ˜¯è‡ªç„¶çš„é…¿é€ è§„å¾‹ï¼ŒåŠ ä¹‹æ›²ã€è€çª–ä¸­å¾®ç”Ÿç‰©çš„ä½œç”¨ï¼Œé…’ä½“ä¸­é™¤äº†ä¹™é†‡å¤–ï¼Œè¿˜è•´å«äº†ä¸°å¯Œçš„ä¹™é…¸ã€ä¹™é…¯ç­‰è¥å…»æˆåˆ†ã€‚\né…¸æ˜¯ç™½é…’ä¸­çš„é‡è¦å‘ˆå‘³ç‰©è´¨ï¼Œå®ƒä¸å…¶ä»–é¦™å‘³ç‰©è´¨å…±åŒæ„æˆç™½é…’æ‰€ç‰¹æœ‰çš„èŠ³é¦™ã€‚ä¼˜è´¨çº¯ç²®å›ºæ€å‘é…µç™½é…’çš„é…¸è¶…è¿‡æ™®é€šæ¶²æ€ç™½é…’çš„ä¸¤å€ã€‚\né…¯ä¹Ÿæ˜¯å›ºæ€å‘é…µç™½é…’çš„é¦™å‘³ç‰©è´¨ï¼Œä¼˜è´¨ç™½é…’çš„é…¯ç±»å«é‡æ¯”æ¶²æ€ç™½é…’é«˜å‡ºä¸€å€ä»¥ä¸Šï¼Œæ‰€ä»¥ä¼˜è´¨ç™½é…’é¦™å‘³æµ“éƒï¼Œè€Œæ¶²æ€å‘é…µç™½é…’çš„é¦™å‘³åªèƒ½é æ·»åŠ äººå·¥åˆæˆçš„é¦™å‘³ç‰©è´¨æ¥è§£å†³ã€‚\né…¿é€ æµç¨‹è¿™é‡Œåªä»‹ç»ç™½é…’çº¯ç²®å›ºæ€é…¿é€ çš„å‡ å¤§ä¸»è¦çš„æµç¨‹ï¼Œæ¯ä¸ªé…’å‚ç”Ÿäº§é…’çš„ç‰¹ç‚¹ä¸ä¸€æ ·ï¼Œå…·ä½“ç»†èŠ‚ä¹Ÿä¼šæœ‰å¾ˆå¤§å·®å¼‚ï¼Œä½†éƒ½ç¦»ä¸å¼€è¿™å‡ å¤§æµç¨‹ã€‚\n\n1. é€‰æ–™åŸæ–™ä¸»è¦æ˜¯ç²®é£Ÿå’Œæ°´ã€‚\nç²®é£Ÿä»¥é«˜ç²±ã€ç‰ç±³ã€å°éº¦ã€å¤§ç±³ã€ç³¯ç±³ç­‰ä¸­çš„ä¸€ç§æˆ–å¤šç§ä¸ºä¸»ï¼Œæ¯ç§ç²®é£Ÿé…¿å‡ºçš„é…’çš„å£å‘³éƒ½ä¸ä¸€æ ·ï¼Œæœ‰è¡Œä¸šæœ¯è¯­å«â€œé«˜ç²±é¦™ã€ç‰ç±³ç”œã€å¤§ç±³å‡€ã€å°éº¦ç³™ã€ç³¯ç±³ç»µâ€ã€‚\næ°´ï¼Œé…¿é…’å¯¹æ°´çš„è¦æ±‚å¾ˆé«˜ï¼Œå¸¸è¨€é“â€œæ°´ä¸ºé…’ä¹‹è¡€ï¼Œåé…’å¿…æœ‰ä½³æ³‰â€ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåªæœ‰èµ¤æ°´æ²³çš„æ°´æ‰èƒ½é…¿å‡ºèŒ…å°çš„åŸå› ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;2. åˆ¶æ›²å¦‚æœè¯´ç²®é£Ÿæ˜¯é…’çš„æ ¹æœ¬ï¼Œé‚£ä¹ˆâ€œæ›²å°±æ˜¯é…’çš„éª¨é«“â€ï¼Œæ›²ç±»ä¼¼äºåšé¦’å¤´çš„é…µæ¯ã€‚\næ›²ä¸»è¦æœ‰ 3 ç§ï¼š\n\nå¤§æ›²ï¼šç”±éº¦å­é«˜æ¸©åˆ¶æˆï¼Œå‘é…µå‘¨æœŸé•¿ã€å¾®ç”Ÿç‰©å«é‡ä¸°å¯Œï¼Œå¤šç”¨äºé«˜ç«¯ç™½é…’ã€‚\nå°æ›²ï¼šç”±ç±³åˆ¶æˆï¼Œå‘é…µå‘¨æœŸçŸ­ã€å¾®ç”Ÿç‰©å«é‡ä½ã€‚\néº¸æ›²ï¼šç”±éº¸çš®ï¼ˆå°éº¦çš„å£³ï¼Œæ‰“ç¢ä¹‹åå«ç³ ï¼Œå†œæ‘å¸¸ç”¨äºå–‚çŒªï¼‰åˆ¶æˆï¼Œå‘é…µå‘¨æœŸçŸ­ï¼Œå‡ºé…’ç‡é«˜ï¼Œä½†é…’è´¨è¾ƒå·®ã€‚å¤šç”¨äºä½ç«¯é…’ï¼Œå¦‚äºŒé”…å¤´ç­‰ã€‚\n\n3. å‘é…µå°†ç²®é£Ÿå’Œæ›²æ”¾å…¥çª–æ± ä¸­å‘é…µï¼Œåˆ©ç”¨æ›²å’Œçª–æ± ä¸­çš„å¾®ç”Ÿç‰©å°†ç²®é£Ÿç³–åŒ–ã€å‘é…µæˆé…’ç²¾ã€‚\nâ€œåƒå¹´è€çª–â€ä¸­å«æœ‰ä¸°å¯Œçš„å¾®ç”Ÿç‰©ï¼Œå‘é…µå‡ºæ¥çš„é…’å£æ„Ÿå’Œå‘³é“ä¹Ÿä¸ä¸€æ ·ã€‚\n4. è’¸é¦é å‘é…µå½¢æˆçš„é…’çš„é…’ç²¾åº¦æ•°å¾ˆä½ï¼Œéœ€è¦è¿›è¡Œæçº¯ã€‚åˆ©ç”¨é…’ç²¾ä¸æ°´çš„æ²¸ç‚¹ä¸ä¸€æ ·çš„åŸç†ï¼Œé‡‡ç”¨è’¸é¦æ³•è¿›è¡Œæçº¯ã€‚\nè’¸é¦çš„è¿‡ç¨‹åˆ†ä¸ºå¤´ã€ä¸­ã€å°¾ 3 éƒ¨åˆ†ï¼Œäº§ç”Ÿçš„é…’ç§°ä¸ºé…’å¤´ã€ä¸­é¦é…’ã€é…’å°¾ï¼Œæ¯ç§é…’åœ¨é…’å‚ä¸­éƒ½æœ‰ä¸åŒçš„ç”¨å¤„ã€‚\n5. é™ˆé…¿ç»è¿‡è’¸é¦äº§ç”Ÿçš„é«˜åº¦æºé…’è¿˜åªèƒ½ç®—åŠæˆå“ï¼Œå–èµ·æ¥è¾›è¾£ï¼Œä¸é†‡å’Œã€‚éœ€è¦ç»è¿‡åˆç†çš„è´®å­˜ã€é™ˆé…¿ï¼Œä¸€æ–¹é¢è‡ªç„¶çš„æ’é™¤æ‚å‘³ï¼Œå¦ä¸€æ–¹é¢è®©é…’åˆ†å­ï¼ˆå³ä¹™é†‡åˆ†å­ï¼‰å’Œæ°´åˆ†å­å……åˆ†ç»“åˆï¼Œä½¿é…’çš„å£æ„Ÿæ›´åŠ é†‡åšã€‚è¿™ä¸€æ­¥é™ˆé…¿çš„è¶Šä¹…ï¼Œå£å‘³å°±è¶Šå¥½ï¼Œæˆæœ¬å°±è¶Šé«˜ï¼Œä»·æ ¼ä¹Ÿå°±è¶Šè´µã€‚\n\nè¯è¯´èŒ…å°åœ¨å‡ºå‚å‰ä¼šè‡ªç„¶é™ˆé…¿ä¸‰å¹´ã€‚\n\n6. å‹¾å…‘ç»è¿‡ä¸Šé¢å‡ ä¸ªæ­¥éª¤æ‰€ç”Ÿäº§çš„é…’å°±å¯ä»¥ç§°ä¸ºâ€œåŸæµ†â€äº†ï¼Œä½†å…¶åº¦æ•°è¾ƒé«˜ã€å£å‘³å•ä¸€ã€é¦™å‘³ä¸çº¯æ­£ã€‚ä¸ºäº†ç»Ÿä¸€å£å‘³ï¼Œåè°ƒé¦™å‘³ã€é™ä½åº¦æ•°ï¼Œéœ€è¦ä¸“é—¨çš„è°ƒé…’å¸ˆå¯¹åŸæµ†é…’è¿›è¡Œå‹¾å…‘ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n\nç°åœ¨ç™½é…’å¸‚åœºè¶Šæ¥è¶Šæ¥ä¹±ï¼Œå„ç§æ··ã€é…ï¼Œå¦‚å›ºæ€å‘é…µç™½é…’+é£Ÿç”¨é…’ç²¾+é£Ÿç”¨é¦™ç²¾+å…¶ä»–æ·»åŠ ç‰©ç­‰ç­‰ï¼Œè®¤å‡†å¥½é…’é™¤äº†ç›¸ä¿¡ä¸€åˆ†é’±ä¸€åˆ†è´§ä¹‹å¤–ï¼Œè¿˜æœ‰å¥½é…’åœ¨é…¿é€ å·¥è‰ºä¸Šéœ€å…·å¤‡è¿™ 3 ä¸ªå…³é”®è¯ çº¯ç²®ã€çº¯å›ºæ€ã€å¤§æ›²ã€‚ç“¶èº«éƒ½æœ‰é…æ–™è¡¨ï¼Œå‡ºç°â€œé£Ÿç”¨é…’ç²¾â€çš„ä¸è¦è´­ä¹°ã€‚\n\n\nè¯è¯´ç°åœ¨é…æ–™è¡¨ä¹Ÿæœ‰é€ å‡çš„ã€‚\n\nå¹´ä»½é…’æˆ‘ä»¬åœ¨å¸‚é¢ä¸Šç»å¸¸é‡åˆ°ç±»ä¼¼â€œç™½äº‘è¾¹ 12 å¹´â€ï¼Œâ€œç™½äº‘è¾¹ 15 å¹´â€ï¼Œâ€œç™½äº‘è¾¹ 20 å¹´â€è¿™æ ·çš„å¹´ä»½é…’ï¼Œå¾ˆå¤šäººè®¤ä¸ºè¿™ä¸ªâ€œ12 å¹´â€ã€â€œ15 å¹´â€ã€â€œ20 å¹´â€æŒ‡çš„è¿™ç“¶é…’å­˜å‚¨çš„å¹´ä»½ã€‚ å¦‚æœä½ æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œé‚£åªèƒ½è¯´ä½ â€œå¤ªå¹´è½»ï¼Œå¤ªå•çº¯â€äº†ã€‚\næ‹¿â€œç™½äº‘è¾¹ 20 å¹´â€ä¸ºä¾‹ï¼Œå®ƒæŒ‡çš„æ˜¯åœ¨ç™½é…’å‹¾å…‘è¿‡ç¨‹ä¸­æºå…¥äº†å°‘è®¸ 20 å¹´å¹´ä»½çš„é…’ï¼Œå…·ä½“çš„è¿™ä¸ªâ€œå°‘è®¸â€æŒ‡çš„æ˜¯å¤šå°‘å°±ä¸æ¸…æ¥šäº†ï¼Œå¯èƒ½æ˜¯ä¸€ç¼¸é…’:ä¸€æ¯ 20 å¹´é…’ï¼Œä¹Ÿå¯èƒ½æ›´å°‘æˆ–æ›´å¤šã€‚ ç°å®ä¸­ç”±äºé…’çš„å¹´ä»½ä¸åŒï¼Œä»·æ ¼å·®è·ä¹Ÿå·¨å¤§ï¼Œæ‰€ä»¥è°ƒé…’æ—¶æ‰€ç”¨çš„åŸºé…’çš„å“è´¨ç­‰ä¹Ÿä¼šæœ‰å·®åˆ«ï¼Œæ¯•ç«Ÿç™½äº‘è¾¹ 20 å¹´å’Œ 15 å¹´å–èµ·æ¥å·®åˆ«è¿˜æ˜¯å¾ˆå¤§çš„ã€‚\nç™½é…’æ”¶è—ä¸€èˆ¬æ”¶è—é…’çš„å¹´ä»½æŒ‡çš„æ˜¯è¿™æ•´ç“¶é…’å­˜æ”¾çš„å¹´ä»½ã€‚ è¿™ä¸ªä»·å€¼ä¸æ˜¯å¹´ä»½é…’æ‰€èƒ½æ¯”æ‹Ÿçš„ã€‚æˆ‘ä»¬ç»å¸¸å¬è¯´â€œé…’æ˜¯é™ˆçš„é¦™â€ï¼Œä½†ç™½é…’æ˜¯ä¸æ˜¯å­˜æ”¾çš„è¶Šä¹…å°±ä¸€å®šè¶Šå¥½å–äº†ï¼Ÿ ä¸ä¸€å®šï¼Œè¿™ä¸ªå’Œé…’çš„è´¨é‡ã€å­˜æ”¾çš„ç¯å¢ƒã€å¯†å°ç¨‹åº¦ç­‰æœ‰å¾ˆå¤§å…³ç³»ã€‚ä¸€èˆ¬å­˜æ”¾ 3~5 å¹´å–ä¸ºå®œï¼Œå¾ˆå¤šå‡ åå¹´çš„é™ˆé…’å·²ç»ä¸é€‚åˆç›´æ¥å–äº†ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºåŸºé…’è¿›è¡Œå‹¾è°ƒã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æœ‰å‡ ç§é…’ä¸é€‚åˆé™ˆï¼š\n\nå«æ·»åŠ å‰‚çš„é…’ã€‚ç°åœ¨å¸‚é¢ä¸Šå¾ˆå¤šä½ç«¯é…’éƒ½åŠ å…¥äº†é¦™ç²¾ï¼Œå¦‚æœå­˜æ”¾æ—¶é—´é•¿äº†ï¼Œé¦™ç²¾æŒ¥å‘äº†ï¼Œå£æ„Ÿä¹Ÿä¼šä¸ä¸€æ ·ã€‚\nä½åº¦é…’ï¼ˆ43 åº¦ä»¥ä¸‹çš„é…’å°±ç®—ä½åº¦é…’äº†ï¼‰ã€‚è¦çŸ¥é“ä¸–ç•Œä¸Šæ²¡æœ‰ç»å¯¹å¯†å°çš„ç¯å¢ƒï¼Œæˆ‘ä»¬å¯èƒ½è®¤ä¸ºç»ç’ƒç“¶ã€é™¶ç“·ç“¶çš„ç“¶å£æ˜¯ç»å¯¹å°é—­çš„ï¼Œä½†ä»åˆ†å­çš„è§’åº¦æ¥çœ‹ï¼Œä»ç„¶ä¼šæœ‰é…’åˆ†å­çš„æ¸—æ¼æŒ¥å‘ï¼Œæ›´ä½•å†µè¿˜æœ‰ç“¶å£çš„å¯†å°ç­‰é—®é¢˜ï¼Œé…’æˆ–å¤šæˆ–å°‘éƒ½ä¼šæœ‰æŒ¥å‘ï¼Œä½åº¦é…’åº¦æ•°æœ¬æ¥å°±ä¸é«˜ï¼ŒæŒ¥å‘ä¹‹åé…’çš„åº¦æ•°å°±ä¼šæ›´ä½ï¼›å¦å¤–ï¼Œä½åº¦é…’æ€èŒèƒ½åŠ›è¾ƒå¼±ï¼Œå­˜å‚¨ä¸å½“ä¼šå¯¼è‡´å¾®ç”Ÿç‰©æ˜“åœ¨é…’ä½“ä¸­ç¹æ®–ã€‚\n\nç™½é…’é¦™å‹åˆ†ç±»æ–°ä¸­å›½æˆç«‹ä¹‹åï¼Œä¸ºäº†åŠ å¼ºå¯¹ç™½é…’å¸‚åœºçš„ç®¡ç†ï¼Œæé«˜ç™½é…’è´¨é‡ï¼Œé€šè¿‡å¯¹ç™½é…’é¦™å‘³æˆåˆ†çš„åˆ†æï¼ˆå½“ç„¶åˆ°ç°åœ¨ä¹Ÿæ²¡å¼„æ¸…æ¥šé…±é¦™å‹ç™½é…’çš„é¦™å‘³æˆåˆ†ï¼‰ï¼Œæå‡ºäº†æŒ‰é¦™å‹å¯¹ç™½é…’åˆ†ç±»çš„æ–¹æ¡ˆã€‚\næˆªæ­¢åˆ°ç°åœ¨ï¼Œç™½é…’çš„é¦™å‹æœ‰åå‡ ç§ä¹‹å¤šï¼Œä½†é…±é¦™å‹ã€æµ“é¦™å‹ã€æ¸…é¦™å‹è¿™ 3 ç§é¦™å‹å·®ä¸å¤šå æ®äº†ç™½é…’å¸‚åœº 90% çš„ä»½é¢ã€‚\n\n\n\né¦™å‹\nä»£è¡¨é…’\n\n\n\né…±é¦™å‹\nèŒ…å°ã€éƒé…’ã€å›½çª–\n\n\næµ“é¦™å‹\näº”ç²®æ¶²ã€æ³¸å·è€çª–ã€å‰‘å—æ˜¥\n\n\næ¸…é¦™å‹\næ±¾é…’ã€äºŒé”…å¤´\n\n\nè‘£é¦™å‹\nè‘£é…’\n\n\nå‡¤é¦™å‹\nè¥¿å‡¤é…’\n\n\nå…¼é¦™å‹\nç™½äº‘è¾¹\n\n\né¦¥éƒé¦™å‹\né…’é¬¼é…’\n\n\nç±³é¦™å‹\nä¸‰èŠ±é…’\n\n\né…±é¦™å‹ç™½é…’é…±é¦™ç™½é…’çš„ä¼˜ç‚¹ä¸ºä»€ä¹ˆå°†é…±é¦™å‹ç™½é…’å•ç‹¬æ‹¿å‡ºæ¥è¯´äº†ï¼Ÿä¸€ä¸ªæ˜¯å› ä¸ºæˆ‘è‡ªå·±çˆ±å–ï¼ˆ2025å¹´æ›´æ–°ï¼šæˆ‘ç°åœ¨ä»€ä¹ˆé…’éƒ½çˆ±å–ï¼‰ï¼Œå¦å¤–ä¸€ä¸ªåŸå› æ˜¯å–é…±é¦™å‹ç™½é…’çš„ç¡®æœ‰è¯¸å¤šå¥½å¤„ã€‚\né…±é¦™å‹ç™½é…’ä¸»è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\næ­£è§„é…±é¦™å‹ç™½é…’å‡ºå‚å‰è¦ç»è¿‡ä¸‰å¹´ä»¥ä¸Šçš„è´®å­˜ï¼Œé…’ä½“ä¸­çš„æ˜“æŒ¥å‘ç‰©è´¨å°‘ï¼Œå¯¹èº«ä½“çš„åˆºæ¿€å°‘ã€‚èŒ…å°é…’ç©ºæ¯ç•™é¦™ä¹Ÿå’Œè¿™æœ‰ä¸€å®šçš„å…³ç³»ã€‚\nå› ä¸ºæ˜“æŒ¥å‘ç‰©è´¨å°‘ï¼Œé…±é¦™å‹çš„é…’æ›´é€‚åˆå­˜æ”¾ï¼Œè¶Šé™ˆè¶Šé¦™ã€‚\né…±é¦™å‹ç™½é…’çš„é…¸åº¦é«˜ã€å« SOD ç­‰ç‰©è´¨ï¼Œå¯¹è½¯åŒ–è¡€ç®¡ï¼ŒæŠ—æ°§åŒ–ç­‰æ–¹é¢æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚\nç›®å‰è¿˜æ²¡æ‰¾åˆ°å¯ä»¥äº§ç”Ÿé…±é¦™å‘³çš„ä¸»è¦é¦™å‘³ç‰©è´¨ï¼Œæ‰€ä»¥å¾ˆéš¾é€šè¿‡é¦™ç²¾ã€æ·»åŠ å‰‚é€ å‡ã€‚\nå›½å®¶å·²ç»å‡ºå°é…±é¦™å‹ç™½é…’å›½å®¶æ ‡å‡†ï¼Œæ˜ç¡®è§„å®šé…±é¦™å‹ç™½é…’ä¸å…è®¸ä½¿ç”¨é£Ÿç”¨é…’ç²¾åŠéç™½é…’å‘é…µç”Ÿäº§çš„å‘ˆé¦™ã€å‘ˆå‘³ã€å‘ˆè‰²ç‰©è´¨ï¼Œå¿…é¡»æ˜¯ä½¿ç”¨çº¯ç²®é£Ÿã€å›ºæ€æ³•å‘é…µè€Œæˆã€‚ï¼ˆä½†ä½ç«¯é…±é¦™é…’å› ä¸ºæˆæœ¬ç­‰åŸæœ‰å¾ˆéš¾è¾¾ä½¿ç”¨å¤§æ›²å‘é…µï¼‰ã€‚\n\n\nä¸Šé¢åˆ—å‡ºçš„é…±é¦™å‹é…’çš„è¯¸å¤šå¥½å¤„éƒ½æ˜¯åŸºäºé€‚é‡é¥®é…’çš„å‰æã€‚\n\nå¤æ²™ã€ç¢æ²™ã€ç¿»æ²™ã€ä¸²æ²™å¤æ²™ã€ç¢æ²™ã€ç¿»æ²™ã€ä¸²æ²™è¿™äº›åè¯æ˜¯ä¸“é—¨ç”¨äºé…±é¦™å‹ç™½é…’çš„å·¥è‰ºã€‚â€œæ²™â€æŒ‡çš„æ˜¯é«˜ç²±ï¼Œä¸æ˜¯æ²™å­ã€‚\nå¤æ²™é…’â€œå¤â€æ˜¯éŸ³è¯‘è¿‡æ¥çš„ï¼Œä¹Ÿå«åšâ€œæ†â€ï¼Œè¡¨ç¤ºç”¨å®Œæ•´çš„é«˜ç²±æ¥é…¿é…’ã€‚å¤æ²™é…’ä¹Ÿå«æ†æ²™é…’ã€å¤ç±½é…’ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„æ­£å®—çš„é…±é¦™å‹ç™½é…’ã€‚ä¸¥æ ¼æŒ‰ç…§ä¼ ç»Ÿçš„è´µå·èŒ…å°é•‡å·¥è‰ºè¿›è¡Œç”Ÿäº§ï¼Œé‡‡ç”¨å½“åœ°äº§çš„ç³¯é«˜ç²±ã€å°éº¦ï¼Œç”Ÿäº§å‘¨æœŸé•¿è¾¾ä¸€å¹´ï¼Œå‡ºé…’ç‡ä½ï¼Œä½†é…’è´¨å¥½ã€‚éœ€è¦ç»è¿‡å¾ˆé‡è¦çš„â€œå›æ²™â€œå·¥è‰ºï¼Œå³ 1 å¹´ç”Ÿäº§ã€2 æ¬¡æŠ•æ–™ã€9 æ¬¡è’¸é¦ã€8 æ¬¡å‘é…µã€7 æ¬¡å–é…’ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ 12987 ç”Ÿäº§å·¥è‰ºï¼Œç„¶åè¿˜è¦ç»è¿‡ä¸‰å¹´ä»¥ä¸Šçš„é™ˆé…¿æ‰èƒ½å¤Ÿå‡ºå‚ã€‚åœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­é«˜ç²±ä¸èƒ½å¤Ÿç²‰ç¢ï¼Œé«˜ç²±çš„ç²‰ç¢ç‡éœ€æ§åˆ¶åœ¨ 20% ä»¥å†…ã€‚\n\nå¤æ²™é…’ç”Ÿäº§æµç¨‹éå¸¸å¤æ‚ï¼Œå‘¨æœŸé•¿ï¼Œä¸”å‡ºé…’ç‡ä½ï¼Œè¿™ä¹Ÿæ˜¯èŒ…å°é£å¤©ç­‰é«˜ç«¯é…±é¦™å‹é…’ä»·æ ¼å±…é«˜ä¸ä¸‹çš„ä¸€ä¸ªåŸå› å§ã€‚\n\nç¢æ²™é…’ç¢æ²™å·¥è‰ºå°±æ˜¯æŒ‡ç”¨è¢«å®Œå®Œå…¨å…¨ç²‰ç¢çš„é«˜ç²±æ¥é…¿é…’ã€‚ç¢æ²™å·¥è‰ºç”Ÿäº§å‘¨æœŸè¾ƒçŸ­ï¼Œå‡ºé…’ç‡é«˜ï¼Œä¸è¦ç»è¿‡åƒå¤æ²™é‚£ä¹ˆä¸¥æ ¼çš„â€å›æ²™â€œå·¥è‰ºï¼Œæ‰€å‡ºé…’çš„é…±é¦™å‘³å•è–„ï¼Œä¸å¦‚å¤æ²™é‚£æ ·é…±é¦™å‘³æµ“éƒã€‚ä½†è¾ƒå¥½å…¥å£ï¼Œä¹Ÿèµ¢å¾—äº†ä¸€éƒ¨åˆ†äººçš„å–œçˆ±ã€‚å¸‚é¢ä¸Šçš„ä¸­ä½ç«¯é…±é¦™ç™½é…’å¤§å¤šé‡‡ç”¨æ­¤ç§å·¥è‰ºã€‚\nç¿»æ²™é…’ç¿»æ²™å°±æ˜¯åˆ©ç”¨å¤æ²™å·¥è‰ºä¸­æœ€åä¸€æ¬¡ï¼ˆç¬¬ 9 æ¬¡ï¼‰è’¸é¦ä¹‹ååºŸå¼ƒçš„é…’ç³Ÿï¼Œå†æ¬¡åŠ å…¥é«˜ç²±å’Œæ›²ï¼Œé‡æ–°å‘é…µé…¿å‡ºæ¥çš„é…’ã€‚ç¿»æ²™é…’ç”Ÿäº§å‘¨æœŸçŸ­ï¼Œå‡ºé…’ç‡é«˜ï¼Œä½†å“è´¨å·®ã€‚è¿™æ ·åšåªæ˜¯åˆ©ç”¨é…’ç³Ÿè®©é…’å¤šäº†ä¸€ç‚¹é…±é¦™å‘³ã€‚å› ä¸ºç”Ÿäº§æˆæœ¬ä½å»‰ï¼Œå¸‚åœºä¸Šå¾ˆå¤šä½ç«¯é…±é¦™å‹é…’å¤šæ˜¯ç”¨çš„è¿™ç§æ–¹æ³•ã€‚\nä¸²æ²™é…’çªœæ²™é…’ï¼Œä¹Ÿå«ä¸²é¦™é…’ï¼Œä¹Ÿæ˜¯åˆ©ç”¨å¤æ²™å·¥è‰ºä¸­æœ€åä¸€æ¬¡ï¼ˆç¬¬ 9 æ¬¡ï¼‰è’¸é¦ä¹‹ååºŸå¼ƒçš„é…’ç³Ÿï¼Œä½†æ˜¯å®ƒæ˜¯ç›´æ¥åŠ å…¥é£Ÿç”¨é…’ç²¾è’¸é¦ã€‚é…’è´¨å¾ˆå·®ï¼Œæˆæœ¬éå¸¸ä½å»‰ã€‚è¿™ç§é…’ä¸ç¬¦åˆé…±é¦™å‹çš„å›½å®¶æ ‡å‡†ï¼Œä¸èƒ½ç®—é…±é¦™å‹ç™½é…’äº†ã€‚\nèŒ…å°åŠå­å“ç‰Œè¯´åˆ°é…±é¦™å°±ä¸èƒ½ä¸æèŒ…å°äº†ï¼Œé…±é¦™å‹é…’æ›¾ç»ä¸€åº¦ä¹Ÿå«â€œèŒ…é¦™å‹é…’â€ã€‚â€œä»ŠèŒ…å·²éå½¼èŒ…â€ï¼ŒèŒ…å°ä»Šå¤©å·²ç»æ˜¯ä¸€ä¸ªä¸Šå¸‚å…¬å¸ï¼Œå¤§é›†å›¢ï¼Œæ——ä¸‹æœ‰å¾ˆå¤šå­å…¬å¸ï¼Œæ¯ä¸ªå­å…¬å¸éƒ½æœ‰è‡ªå·±çš„å“ç‰Œã€‚å¸¸è§çš„æœ‰é£å¤©èŒ…å°ã€äº”æ˜ŸèŒ…å°ã€èŒ…å°ç‹å­é…’ã€èŒ…å°è¿å®¾é…’ã€æ±‰é…±ç­‰ç­‰ï¼Œå®ƒä»¬æœ‰è´µçš„ï¼Œä¹Ÿæœ‰ä¾¿å®œçš„ï¼Œè¿™ä¹Ÿæ˜¯èŒ…å°é›†å›¢å¤šå“ç‰Œæˆ˜ç•¥çš„æ ¸å¿ƒï¼Œä»¥é€‚åº”å„ç§æ¶ˆè´¹å±‚æ¬¡çš„éœ€æ±‚ã€‚\nä¸‹å›¾æ˜¯èŒ…å°é›†å›¢åŠå…¶å­å…¬å¸çš„ç™½é…’ç±»å“ç‰Œï¼š\næˆ‘ä»¬å¸¸è¯´çš„é«˜ç«¯èŒ…å°æŒ‡çš„è´µå·èŒ…å°é…’è‚¡ä»½æœ‰é™å…¬å¸ç”Ÿäº§çš„é£å¤©èŒ…å°ã€äº”æ˜ŸèŒ…å°ã€èŒ…å°çºªå¿µé…’ã€èŒ…å°ç”Ÿè‚–é…’ã€èŒ…å°é™ˆå¹´é…’ï¼Œè¿™äº›é«˜ç«¯èŒ…å°é…’å¤§å¤šæœ‰ 43 åº¦å’Œ 53 åº¦ 2 ç§åº¦æ•°ã€‚åº¦æ•°ä¸åŒï¼Œä»·æ ¼å·®è·å¾ˆå¤§ï¼Œä»¥é£å¤©èŒ…å°å¸‚åœºä»·ä¸ºä¾‹ï¼Œ43 åº¦çš„å·®ä¸å¤š 900 å…ƒï¼Œ53 åº¦çš„å°†è¿‘ 2400 å…ƒã€‚\nå¦‚ä½•å–é…’å–é…’å½“ç„¶æ˜¯ç”¨å˜´å–ï¼Œè¿™é‡Œè¯´çš„å–é…’ä¸€å®šç¨‹åº¦ä¸ŠæŒ‡çš„æ˜¯å“é…’ï¼Œä½†å“é…’æ˜¯ä¸€ä¸ªå¾ˆä¸“ä¸šçš„äº‹æƒ…ï¼Œä¸æ˜¯ä¸€ä¸¤å¥è¯å¯ä»¥è¯´çš„æ¸…çš„ï¼Œéœ€è¦ä¸“ä¸šçš„çŸ¥è¯†å’Œç»éªŒçš„ç´¯ç§¯ï¼Œæ•…è¿™é‡Œä½¿ç”¨â€œå¦‚ä½•å“é…’â€è¿™ä¸ªæ ‡é¢˜ã€‚é…’æ˜¯å°å£å°å£çš„å“çš„ï¼Œç»ä¸æ˜¯â€œæˆ‘å¹²äº†ï¼Œä½ éšæ„â€å¼çš„å–æ³•ã€‚ä¸‹é¢åˆ—å‡ºæˆ‘çš„ä¸€ç‚¹å–é…’çš„æ–¹æ³•ï¼š\næœ›å€’å…¥æ¯ä¸­çœ‹æ˜¯å¦æœ‰é…’èŠ±ï¼Œæ˜¯å¦æŒ‚æ¯ã€‚è§‚å¯Ÿé…’çš„é¢œè‰²ï¼Œå¦‚é…±é¦™å‹çš„é…’ä¼šå¾®å¾®åé»„ã€‚\né—»ç«¯èµ·é…’æ¯é—»é…’é¦™ï¼Œä¸åŒçš„é…’æœ‰ä¸åŒçš„é¦™å‘³ï¼Œæœ‰æ—¶å€™é€šè¿‡é¦™å‘³æ˜¯å¦çº¯åœ¨å°±å¯ä»¥åˆ¤æ–­ä¸€ä¸ªé…’çš„å¥½åã€‚å–å®Œä¹‹åï¼Œå¯ä»¥é—»é—»æ˜¯å¦ç©ºæ¯ç•™é¦™ç­‰ç­‰ã€‚\nå’‚å«åœ¨å£ä¸­ï¼Œæ…¢æ…¢æ„Ÿå—é…’çš„æ°”å‘³ï¼Œæ˜¯æŸ”å’Œè¿˜æ˜¯åˆºæ¿€ï¼›ä»èˆŒå°–æ»‘åˆ°èˆŒæ ¹ï¼Œæœ€ååˆ°å–‰å’™ï¼›å›å‘³æ˜¯å¦ç”˜ç”œã€‚\nç™½é…’çš„æ‰§è¡Œæ ‡å‡†ç›®å‰ï¼Œä¸åŒé¦™å‹çš„é…’æ‰§è¡Œä¸åŒçš„å›½å®¶æ ‡å‡†ï¼Œè€Œä¸”æœ‰çš„å“ç‰Œçš„é…’è¿˜ä¼šæ‰§è¡Œå…¶ä»–æ ‡å‡†ï¼Œå¤§ä½“åˆ†ä¸ºï¼š\n\nå›½å®¶æ ‡å‡†ï¼ˆGBï¼‰\nåœ°æ–¹æ ‡å‡†ï¼ˆDBï¼‰\nä¼ä¸šæ ‡å‡†ï¼ˆQBï¼‰\nåœ°ç†æ ‡å¿—äº§å“æ ‡å‡†\n\nä¸€èˆ¬è€Œè¨€ï¼Œå›½å®¶æ ‡å‡†æ˜¯ç™½é…’å‚å•†æœ€ä½è¦éµå®ˆçš„åº•çº¿ï¼Œå…¶ä»–æ ‡å‡†çš„æ‰§è¡Œè¦æ±‚ä¼šé«˜äºå›½å®¶æ ‡å‡†ã€‚\nå›½å®¶æ ‡å‡†ç™½é…’çš„å›½å®¶æ ‡å‡†æ˜¯ç”±å›½å®¶æ ‡å‡†åŒ–ç®¡ç†å§”å‘˜ä¼šåˆ¶å®šå¹¶å‘å¸ƒçš„ï¼Œå…·æœ‰å¼ºåˆ¶æ€§å’ŒæŒ‡å¯¼æ€§ã€‚\nä¸€ç“¶ç™½é…’çš„æ‰§è¡Œæ ‡å‡†ï¼Œåˆ™æ˜¯ä¿éšœå…¶å“è´¨ä¸é£å‘³çš„å…³é”®æ‰€åœ¨ã€‚åœ¨é€‰è´­ç™½é…’æ—¶ï¼Œéœ€è¦ç•™æ„å•†æ ‡ä¸Šæ ‡æ˜çš„è¯¥é…’æ‰€æ‰§è¡Œå›½å®¶æ ‡å‡†ã€‚\n\nGB&#x2F;T 10781.1 ä»£è¡¨æµ“é¦™å‹ç™½é…’\nGB&#x2F;T 10781.2 ä»£è¡¨æ¸…é¦™å‹ç™½é…’\nGB&#x2F;T 10781.3 ä»£è¡¨ç±³é¦™å‹ç™½é…’\nGB&#x2F;T 14867 ä»£è¡¨å‡¤é¦™å‹ç™½é…’\nGB&#x2F;T 23547 ä»£è¡¨å…¼é¦™å‹ç™½é…’\nGB&#x2F;T 22736 ä»£è¡¨é¦¥éƒé¦™å‹ç™½é…’\nGB&#x2F;T 26760 ä»£è¡¨é…±é¦™å‹ç™½é…’ï¼Œ2025å¹´6æœˆ1æ—¥å°†æ­£å¼å®æ–½æ–°çš„æ ‡å‡† GB&#x2F;T 10781.4â€”2024ã€‚\nGB&#x2F;T 20821 é’ˆå¯¹æ¶²æ€æ³•ç™½é…’çš„å›½å®¶æ ‡å‡†ï¼Œå³é‡‡ç”¨é£Ÿç”¨é…’ç²¾å’Œé¦™ç²¾ç­‰å‹¾å…‘è€Œæˆçš„ç™½é…’\nGB&#x2F;T 20822 é’ˆå¯¹å›ºæ¶²æ³•ç™½é…’çš„å›½å®¶æ ‡å‡†ï¼Œå³å›ºæ€æ³•ç™½é…’ä¸æ¶²æ€æ³•ç™½é…’çš„æ··åˆç‰©ã€‚\n\nè¿™äº›æ ‡å‡†å¯¹ç™½é…’çš„åŸæ–™ã€ç”Ÿäº§å·¥è‰ºã€æ„Ÿå®˜æŒ‡æ ‡ã€ç†åŒ–æŒ‡æ ‡ç­‰æ–¹é¢éƒ½åšå‡ºäº†è¯¦ç»†è§„å®šï¼Œä¸€å®šç¨‹åº¦ä¸Šç¡®ä¿äº†ç™½é…’çš„å“è´¨å’Œå®‰å…¨æ€§ã€‚\næ¯”å¦‚æˆ‘ä»¬åœ¨é€‰è´­æµ“é¦™å‹ç™½é…’æ—¶ï¼Œå°±è¦ç•™æ„å…¶æ˜¯å¦æ‰§è¡Œçš„ GB&#x2F;T 10781.1 æ ‡å‡†ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å¯èƒ½é…’è´¨è¾ƒå·®ï¼ˆä½†ä¸‹é¢ä»‹ç»çš„å…¶ä»–æ ‡å‡†ä¸­çš„é™¤å¤–ï¼Œå¦‚äº”ç²®æ¶²ï¼‰ã€‚\nä¼ä¸šæ ‡å‡†ç™½é…’çš„ä¼ä¸šæ ‡å‡†å®åœ¨å¤ªå¤šäº†ï¼Œæ— è®ºå¤§å°é…’å‚éƒ½å¯ä»¥ç”³è¯·è‡ªå·±çš„ä¼ä¸šæ ‡å‡†ã€‚\nå¯ä»¥åœ¨ ä¼ä¸šæ ‡å‡†ä¿¡æ¯å…¬å…±æœåŠ¡å¹³å° æŸ¥è¯¢å…·ä½“æ ‡å‡†ã€‚\nåœ°ç†æ ‡å¿—äº§å“æ ‡å‡†åœ°ç†æ ‡å¿—äº§å“æ˜¯æŒ‡äº§è‡ªç‰¹å®šåœ°åŸŸï¼Œæ‰€å…·æœ‰çš„è´¨é‡ã€å£°èª‰æˆ–å…¶ä»–ç‰¹æ€§æœ¬è´¨ä¸Šå–å†³äºè¯¥äº§åœ°çš„è‡ªç„¶å› ç´ å’Œäººæ–‡å› ç´ ï¼Œç»å®¡æ ¸æ‰¹å‡†ä»¥åœ°ç†åç§°è¿›è¡Œå‘½åçš„äº§å“ã€‚\nåœ°ç†æ ‡å¿—äº§å“ç™½é…’å¯¹äºåˆ¶æ›²æœ‰å¾ˆä¸¥æ ¼çš„æ—¶é—´æ§åˆ¶ï¼Œè€Œå›½æ ‡å´æ²¡æœ‰æ˜ç¡®è§„å®šã€‚é™¤äº†é…’é¾„å’Œåˆ¶æ›²ä»¥å¤–ï¼Œåœ°ç†æ ‡äº§å“å¯¹äºé…¿é€ çš„ç”¨ç²®ç”¨æ°´ä»¥åŠäº§åœ°çš„æ°”å€™ç¯å¢ƒéƒ½æœ‰ä¸¥æ ¼çš„è¦æ±‚ã€‚è€Œå›½æ ‡äº§å“å¹¶ä¸ä¼šåšå‡ºç›¸åº”çš„è§„å®šã€‚ä¸¥æ ¼æ¥è®²å›½æ ‡åªæ˜¯ä¸€ä¸ªè¡Œä¸šåº•çº¿ï¼Œå¹¶ä¸”åªæ˜¯æ¨èæ‰§è¡Œï¼Œå¹¶æ²¡æœ‰ä»»ä½•å¼ºåˆ¶è§„å®šï¼Œæ›´æ²¡æœ‰æ¯”è¾ƒä¸¥æ ¼çš„ç›‘ç®¡åˆ¶åº¦ï¼Œå®Œå…¨é ä¼ä¸šè‡ªè§‰éµå®ˆã€‚\nç™½é…’åœ°ç†æ ‡å¿—äº§å“ï¼Œä¸ºäº†æ›´å¥½å’Œå…¶ä»–æ ‡å‡†åŒºåˆ†ï¼Œä¸€èˆ¬åœ¨ç™½é…’åŒ…è£…ä¸Šä¼šå°ç€çš„ç»¿è‰²é›„é¸¡åœ°å›¾æ ‡è¯†ã€‚\nåœ°ç†æ ‡å¿—äº§å“æ‰§è¡Œæ ‡å‡†éƒ½æ¯”è¾ƒä¸¥è‹›ï¼Œæ‰§è¡Œæ ‡å‡†åŸºæœ¬éƒ½åœ¨å›½å®¶æ ‡å‡†ï¼ˆGBï¼‰ã€åœ°æ–¹æ ‡å‡†ï¼ˆDBï¼‰å’Œä¼ä¸šæ ‡å‡†ï¼ˆQBï¼‰ä¹‹ä¸Šã€‚\nç›®å‰å¸¸è§çš„ç™½é…’åœ°ç†æ ‡å¿—äº§å“æ ‡å‡†æœ‰18ä¸ªï¼ˆæ¨ªçº¿åé¢çš„è¡¨ç¤ºåˆ¶å®šå¹´ä»½ï¼‰ï¼š\nè´µå·èŒ…å°é…’ï¼šGB&#x2F;T18356-2007\nå›½çª–1573ï¼šGB&#x2F;T22041-2008\nå‰‘å—æ˜¥é…’ï¼šGB&#x2F;T19961-2005\näº”ç²®æ¶²é…’ï¼šGB&#x2F;T22211-2008\nå¤äº•è´¡é…’ï¼šGB&#x2F;T19327-2007\nè¥¿å‡¤é…’ï¼šGB&#x2F;T19508-2007\nç‰æ³‰é…’ï¼šGB&#x2F;T21261-2007\næ°´äº•åŠé…’ï¼šGB&#x2F;T18624-2007\næ´‹æ²³å¤§æ›²ï¼šGB&#x2F;T22046-2008\nå£å­çª–é…’ï¼šGB&#x2F;T19328-2007\nèˆå¾—ç™½é…’ï¼šGB&#x2F;T21820-2008\næ²±ç‰Œç™½é…’ï¼šGB&#x2F;T21822-2008\näº’åŠ©é’ç¨é…’ï¼šGB&#x2F;T19331-2007\næ™¯èŠç¥é…¿é…’ï¼šGB&#x2F;T22735-2008\né“å…‰å»¿äº”è´¡é…’ï¼šGB&#x2F;T19329-2007\nç‰›æ å±±äºŒé”…å¤´ï¼šGB&#x2F;T21263-2007\næ³¸å·è€çª–ç‰¹æ›²é…’ï¼šGB&#x2F;T22045-2008\nä¸¥ä¸œå…³äº”åŠ çš®ç™½é…’ï¼šGB&#x2F;T21821-2008\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"ç¨‹åºå‘˜å¦‚ä½•æå‡è‡ªèº«ä»·å€¼ï¼ˆè½¬è½½ï¼‰","url":"/post/618632730.html","content":"ç¨‹åºå‘˜è–ªæ°´æœ‰é«˜æœ‰ä½ï¼Œæœ‰çš„äººä¸€ä¸ªæœˆå¯èƒ½æ‹¿30Kã€50Kï¼Œæœ‰çš„äººå¯èƒ½åªæœ‰2Kã€3Kã€‚åŒæ ·æœ‰äº”å¹´å·¥ä½œç»éªŒçš„ç¨‹åºå‘˜ï¼Œå¯èƒ½ä¸€ä¸ªäººæ¯æœˆæ‹¿20Kï¼Œä¸€ä¸ªæ‹¿5Kã€‚æ˜¯ä»€ä¹ˆå› ç´ å¯¼è‡´äº†è¿™ç§å·®å¼‚ï¼Ÿæˆ‘ç‰¹æ„æ€»ç»“äº†å®¹æ˜“å¯¼è‡´è–ªæ°´ä½çš„ä¹å¤§è¡Œä¸ºè¡¨ç°ï¼Œé¿å¼€è¿™äº›å¤§å‘ï¼Œä½ å°±ç¦»é«˜è–ªä¸è¿œäº†ã€‚\n\n1. ä¹ æƒ¯å³åˆ»å›æŠ¥ä»–ä¸æ‡‚å¾—åªæœ‰æ˜¥å¤©æ’­ç§ï¼Œç§‹å¤©æ‰ä¼šæœ‰æ”¶è·ã€‚åˆšåˆšä»˜å‡ºä¸€ç‚¹ç‚¹ï¼Œç”šè‡³è¿˜æ²¡æœ‰ä»˜å‡ºï¼Œå°±æƒ³è¦å¾—åˆ°å›æŠ¥ã€‚æŠ€æœ¯åˆšåˆšæŒæ¡ï¼Œèƒ½ä¸€è¾¹ç™¾åº¦ä¸€è¾¹å¹²æ´»äº†å°±è§‰å¾—è¯¥æ‹¿åˆ°å¤šå°‘å¤šå°‘é’±äº†ã€‚æ‰¾å·¥ä½œå…ˆæƒ³ç€å¤šå°‘å¤šå°‘é’±ï¼Œå…¥èŒäº†æ²¡å¹²å‡ ä¸ªæœˆå°±æƒ³ç€è¦åŠ å¤šå°‘å¤šå°‘é’±ï¼Œå¹²äº†æ²¡å‡ ä¸ªæœˆï¼Œè–ªæ°´è¦æ˜¯æ²¡æ¶¨ï¼Œå°±æ”¾å¼ƒäº†ï¼Œå‡†å¤‡é€šè¿‡è·³æ§½åŠ è–ªï¼Œä¸è·³æ§½çš„è¯ï¼Œå¾€å¾€ä¹Ÿä¼šå› ä¸ºæ²¡åŠ è–ªè€Œç‰¢éªšæ»¡è…¹ï¼Œå·¥ä½œæ•·è¡äº†äº‹ã€‚\nä¸€ä¸ªç¨‹åºå‘˜çš„ä»·å€¼ï¼Œæ˜¯é€šè¿‡ä»–å¸¦ç»™å…¬å¸çš„ä»·å€¼ä½“ç°çš„ã€‚å…ˆç»™å…¬å¸å¸¦æ¥äº†ä»·å€¼ï¼Œç„¶åæ‰ä¼šåè¿‡æ¥åœ¨è–ªæ°´ä¸Šä½“ç°å‡ºè‡ªå·±çš„ä»·å€¼ã€‚å…¬å¸éƒ½å¾ˆç°å®ï¼Œå¾ˆå°‘ä¼šä¸ºä½ çš„æ½œåŠ›ä¹°å•ï¼Œåœ¨ä½ è¿˜æ²¡æœ‰ä½“ç°å‡ºä»·å€¼æ—¶å°±ç»™ä½ å¾ˆé«˜çš„è–ªæ°´ã€‚\nåœ¨ç”Ÿæ´»å’Œå·¥ä½œä¸­ï¼Œä¸€å®šè¦æ‡‚å¾—ä»˜å‡ºï¼Œä¸è¦é‚£ä¹ˆæ€¥åŠŸè¿‘åˆ©ï¼Œé©¬ä¸Šæƒ³å¾—åˆ°å›æŠ¥ã€‚å¤©ä¸‹æ²¡æœ‰ç™½åƒçš„åˆé¤ï¼Œä½ æƒ³è·å¾—ä»€ä¹ˆï¼Œå°±å¾—å…ˆä»˜å‡ºä»€ä¹ˆã€‚å”¯æœ‰ç§ä¸‹ç§å­ï¼Œç„¶åæµ‡æ°´ã€æ–½è‚¥ã€é™¤è‰ã€æ€è™«ï¼Œç„¶åæ‰èƒ½ç­‰æ¥æ”¶è·ã€‚\n2. ç¼ºä¹å­¦ä¹ çƒ­æƒ…å¾ˆå°‘æœ‰å“ªä¸ªå²—ä½çš„äººåƒç¨‹åºå‘˜è¿™æ ·éœ€è¦æŒç»­ä¸æ–­çš„å­¦ä¹ ï¼Œè½¯ä»¶å¼€å‘çš„æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œè€Œæ¯ä¸€é¡¹æŠ€æœ¯åˆå¾€å¾€åšå¤§ç²¾æ·±ï¼Œä¸æŒç»­ã€æ·±å…¥é’»ç ”æ˜¯å¾ˆéš¾æŒæ¡çš„ï¼Œæ›´åˆ«è°ˆç²¾é€šäº†ã€‚å¦‚æœä½ å¯¹ä¸€é¡¹æŠ€æœ¯ä¸èƒ½æ·±åˆ»ç†è§£ç†Ÿç»ƒåº”ç”¨ï¼Œè¡¨ç°å‡ºæ¥çš„æ°´å‡†ä»…ä»…æ˜¯èƒ½å¹²æ´»ã€è¿˜è¡Œï¼Œé‚£å¾ˆéš¾è¯´ä¼šæœ‰å…¬å¸æ„¿æ„ä¸ºâ€œè¿˜è¡Œâ€ä»˜å‡ºå¤§çš„ä»£ä»·ï¼Œåªæœ‰è„±é¢–è€Œå‡ºï¼Œæ‰å¯èƒ½å¤‡å—é‡è§†ã€‚\nå‡å¦‚ä½ å¯¹å­¦ä¹ ã€æŒæ¡ã€ç²¾é€šæŠ€æœ¯æ²¡æœ‰å…´è¶£ï¼Œé¢å¯¹ä¸æ–­æ¶Œç°çš„æ–°è¯­è¨€æ–°æŠ€æœ¯æ–°æ¡†æ¶æ²¡æœ‰å­¦ä¹ æ¬²æœ›ï¼Œé‚£ä½†å°±è½¯ä»¶å¼€å‘è¿™ä¸ªå·¥ä½œè€Œè¨€ï¼Œä½ ä¸ä½†çœ¼ä¸‹ä¸å¤ªå¯èƒ½æ‹¿åˆ°é«˜è–ªï¼Œå°†æ¥ä¹Ÿä¸ä¼šã€‚åœ¨è¿™æ ·ä¸€ä¸ªå¿«é€Ÿå˜åŒ–çš„æ—¶ä»£ï¼Œåªæœ‰ä¸æ–­åœ°å­¦ä¹ æ‰ä¸ä¼šè¢«æŠ›å¼ƒã€‚\n3. ä¸å¤ŸåŠªåŠ›è™½ç„¶æˆ‘ä»¬éƒ½çŸ¥é“åŠªåŠ›å­¦ä¹ å¯ä»¥æ”¹å˜æˆ‘ä»¬çš„æŠ€èƒ½æ°´å¹³ï¼ŒæŒç»­åŠªåŠ›ä¸æ‡ˆåšæŒå¯ä»¥è®©è‡ªå·±æœ‰æ‰€å»ºæ ‘ï¼Œå¯è¿˜æ˜¯æœ‰å¾ˆå¤šäººæµ…å°è¾„æ­¢ï¼Œä¸‰å¤©æ‰“é±¼ä¸¤å¤©æ™’ç½‘ï¼Œæä¸¤ä¸‹èƒ½Runå°±æ”¾ä¸‹äº†ã€‚\näººå’Œäººåœ¨èªæ˜æ‰æ™ºä¸Šçš„å·®è·å¹¶æ²¡æœ‰æƒ³è±¡ä¸­å¤§ï¼Œç”šè‡³å¾ˆå¤šæ—¶å€™ï¼Œä»å¤§å¤šæ•°äººçš„åŠªåŠ›ç¨‹åº¦ä¹‹ä½æ¥çœ‹ï¼Œæ ¹æœ¬è¿˜è½®ä¸åˆ°æ‹¼å¤©èµ‹ã€‚å¦‚æœä¸¤ä¸ªäººçš„å®åŠ›åŠæ–¤å…«ä¸¤çš„è¯ï¼Œçƒ­æƒ…å·¥ä½œåŠªåŠ›åšæŒçš„äººï¼Œä¸€å®šæ¯”è¾ƒå®¹æ˜“æˆåŠŸã€‚\n4. ç•éš¾åšäº‹æ‹ˆè½»æ€•é‡ï¼Œä¸æ„¿æŒ‘æˆ˜ã€‚æ®Šä¸çŸ¥èƒ½åŠ›å°±æ˜¯åœ¨ä¸æ–­æŒ‘æˆ˜ä¸æ–­çªç ´è‡ªå·±çš„è¿‡ç¨‹ä¸­å†ç»ƒå‡ºæ¥çš„ã€‚åœ¨ä¸€ä¸ªå…¬å¸é‡Œé¢ï¼Œç»å¸¸æ‰¿æ‹…é«˜éš¾åº¦ä»»åŠ¡çš„ç¨‹åºå‘˜ï¼Œä¸€å®šæ˜¯æˆé•¿æ¯”è¾ƒå¿«çš„ï¼Œè–ªæ°´å¢é•¿ä¹Ÿä¸€å®šæ˜¯æ¯”è¾ƒå¿«çš„ã€‚è¶Šæ˜¯å›°éš¾çš„äº‹æƒ…ï¼Œè¶Šèƒ½ä½“ç°å‡ºä¸ªäººä»·å€¼ï¼Œä¹Ÿè¶Šèƒ½å¸¦ç»™ä¸ªäººæˆé•¿ã€‚\nä¸‡äº‹èµ·å¤´éš¾ï¼Œä¸è¦å®³æ€•å›°éš¾ã€‚äº‹æƒ…åšä¸å¥½å¾€å¾€ä¸æ˜¯å› ä¸ºæ²¡æœ‰èƒ½åŠ›ï¼Œå¤§éƒ½æ˜¯ç”±äºç¼ºä¹æ’å¿ƒã€‚åªè¦ä¸æ€•å›°éš¾ï¼ŒåšæŒå‰è¡Œï¼Œä¸€å®šä¼šæœ‰ä¸ä¸€æ ·çš„æ”¶è·ã€‚\näº‹ä¸šå°±åƒå¥³äººï¼Œè°å»è¿½æ±‚ï¼Œè°å°±èƒ½å¾—æ‰‹ã€‚é‡‘é’±ä¹Ÿä¸€æ ·ã€‚\n5. ç¼ºä¹è´£ä»»å¿ƒå·¥ä½œä¸Šä¸ç®¡ä»€ä¹ˆäº‹å„¿ï¼Œåæ­£ä¸æ˜¯è‡ªå·±çš„äº‹å„¿ï¼Œç¼ºä¹è´£ä»»å¿ƒï¼Œå¹²å¥½å¹²ä¸å¥½éƒ½æ— æ‰€è°“ï¼Œå¯¹äº¤ä»˜æ‰¿è¯ºã€å¯¹äº§å“è´¨é‡éƒ½ä¸åœ¨æ„ï¼Œæ²¡ä»€ä¹ˆäº‹å„¿èƒ½è®©ä»–ä¸Šå¿ƒã€‚\nä¸€ä¸ªäººçš„è´£ä»»å¿ƒå¦‚ä½•ï¼Œå†³å®šç€ä»–åœ¨å·¥ä½œä¸­çš„æ€åº¦ï¼Œå†³å®šç€å…¶äº‹ä¸šçš„å¥½åå’Œæˆè´¥ã€‚å¦‚æœä¸€ä¸ªäººæ²¡æœ‰è´£ä»»å¿ƒï¼Œå³ä½¿ä»–æœ‰å†å¤§çš„èƒ½è€ï¼Œä¹Ÿä¸ä¸€å®šèƒ½åšå‡ºå¥½çš„æˆç»©æ¥ã€‚\n6. æ¶ˆæï¼ŒæŠ±æ€¨å·¥ä½œç¨æœ‰ä¸é¡ºï¼Œå°±æ€¨æ°”æ²¸è…¾ï¼Œè¿™ä¸ªæ€ä¹ˆæ€ä¹ˆæ ·ï¼Œé‚£ä¸ªæ€ä¹ˆæ€ä¹ˆæ ·ï¼Œè€Œæˆ‘æ€ä¹ˆå°±è¿™æ ·ï¼Œä»»åŠ¡ä¸å…¬å¹³ï¼Œèµ„æºä¸å…¬å¹³ï¼Œé‚£è°è°ä¸æ”¯æŒæˆ‘ï¼Œé‚£è°è°ä¸é…åˆâ€¦â€¦\næŠ±æ€¨ä¸èƒ½ä½¿äº‹æƒ…å˜å¥½ï¼Œåä¹‹ï¼Œå®ƒä¼šè®©è´Ÿé¢æƒ…ç»ªè”“å»¶ï¼Œèš•é£Ÿä½ çš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œè®©ä½ äº§å‡ºæ›´ä½ã€‚æˆåŠŸè€…æ°¸ä¸æŠ±æ€¨ï¼ŒæŠ±æ€¨è€…æ°¸ä¸æˆåŠŸã€‚ç«‹åˆ»åœæ­¢æŠ±æ€¨ï¼Œæ—©ä¸€åˆ†é’Ÿåœæ­¢ï¼Œä½ å°±ç¦»ç›®æ ‡è¿‘ä¸€åˆ†é’Ÿã€‚\n7. æ²¡æœ‰æ—¶é—´ç®¡ç†è§‚å¿µæ¯ä¸ªäººçš„ä¸€å¤©éƒ½åªæœ‰24å°æ—¶ï¼Œäººå’Œäººçš„å·®åˆ«å°±åœ¨äºå¦‚ä½•åˆ©ç”¨æ—¶é—´ä¸Šã€‚\næœ‰çš„äººæ¯å‘¨éƒ½æœ‰ç›®æ ‡ï¼Œæ¯å¤©éƒ½æœ‰è®¡åˆ’ï¼Œæ—©ä¸Šèµ·æ¥ä¼šæƒ³ä»Šå¤©è¦åšçš„å‡ ä»¶é‡è¦çš„äº‹ï¼Œæ™šä¸Šä¼šå›é¡¾ä»Šå¤©å®Œæˆçš„äº‹ï¼Œæ€»ç»“å¹²æˆäº†ä»€ä¹ˆå¹²åäº†ä»€ä¹ˆï¼Œè¿˜ä¼šæœ‰è®¡åˆ’çš„å­¦ä¹ æ–°çŸ¥è¯†æ–°æŠ€èƒ½ï¼Œè¿™æ ·æ—¥ç§¯æœˆç´¯ä¸æ–­åšæŒï¼Œæ¯ä¸€å¤©éƒ½æ˜¯é«˜æ•ˆçš„ï¼Œæ¯ä¸€å¤©éƒ½æœç€æ›´ä¸°å¯Œæ›´å®Œç¾çš„è‡ªå·±å‰è¿›ã€‚\nè€Œæœ‰çš„äººåˆ™æ¼«æ— ç›®çš„ï¼Œèµ°å“ªç®—å“ªï¼Œåˆ°äº†å…¬å¸ï¼Œä¸ŠåˆåŸºæœ¬åšä¸æˆäº‹å„¿ï¼Œåˆ°ä¸‹åˆäº†è¿˜ä¸çŸ¥é“è¦åšä»€ä¹ˆï¼Œæ™šä¸Šä¹Ÿå‘æ„å¦‚ä½•æ¶ˆç£¨æ—¶é—´â€¦â€¦\n8. ä¸ºè–ªæ°´å·¥ä½œè™½ç„¶å·¥ä½œçš„ä¸€å¤§ç›®çš„æ˜¯è·å–è–ªæ°´ï¼Œå…»æ´»è‡ªå·±ä»¥åŠä¾›ç»™å®¶åº­æ‰€éœ€ï¼›ä½†æ˜¯ï¼Œè¿™åªæ˜¯å·¥ä½œæœ€ç›´æ¥çš„æŠ¥å¿ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€ä½çº§çš„ç›®æ ‡ã€‚\nå¦‚æœæˆ‘ä»¬ä¸ºè–ªæ°´è€Œå·¥ä½œï¼Œå°†æ³¨å®šæˆ‘ä»¬æ˜¯çŸ­è§†çš„ï¼Œä¹Ÿå°†æ³¨å®šå—åˆ°æœ€æ·±çš„ä¼¤å®³ã€‚å‡å¦‚ä½ çœ‹ä¸åˆ°å·¥èµ„ä»¥å¤–çš„ä¸œè¥¿ï¼Œæ–¤æ–¤è®¡è¾ƒäºè–ªæ°´ã€ç¦åˆ©ã€èŒä½ç­‰ï¼Œé‚£å¤–ç•Œçš„äº›å¾®é£å¹è‰åŠ¨å°±å¯èƒ½è®©ä½ åƒæµ®èä¸€æ ·é£˜æ¥è¡å»ï¼Œä½ å¾ˆå¿«å°±ä¼šå¤±å»å¹³è¡¡ï¼Œå¤±å»ä¿¡å¿ƒï¼Œå¤±å»çƒ­æƒ…ï¼Œå¤±å»å¹³å’Œï¼Œè¿›è€Œåœ¨å·¥ä½œæ—¶æ€»æ˜¯é‡‡å–ä¸€ç§åº”ä»˜äº†äº‹çš„æ€åº¦ï¼Œèƒ½å°‘åšå°±å°‘åšï¼Œèƒ½èº²é¿å°±èº²é¿ï¼Œè§‰å¾—åªè¦å¯¹å¾—èµ·è‡ªå·±çš„é‚£ä»½è–ªæ°´å°±æˆäº†ã€‚é•¿æ­¤ä»¥å¾€ï¼Œä½ è¿½æ±‚çš„é«˜è–ªæ°´åå€’å¾—ä¸åˆ°ã€‚\næˆ‘ä»¬è¿›å…¥ä¸€ä¸ªå…¬å¸å·¥ä½œï¼Œæ˜¯ä¸ºäº†è‡ªå·±ï¼Œä¸æ˜¯è–ªæ°´ä¹Ÿä¸æ˜¯åˆ«äººï¼Œæ¯”è–ªæ°´æ›´é‡è¦çš„ï¼Œæ˜¯æˆé•¿å’Œæˆå°±è‡ªå·±çš„æœºä¼šã€‚æˆ‘ä»¬ä¸€å®šè¦æ˜ç™½ï¼Œå…¬å¸ã€ä¼ä¸šã€ç»„ç»‡ï¼Œéƒ½æ˜¯æˆ‘ä»¬é”»ç‚¼è‡ªå·±ã€ä¿®ç‚¼è‡ªæˆ‘çš„å¹³å°ï¼Œæˆ‘ä»¬ä¸æ˜¯ä¸ºè–ªæ°´å·¥ä½œã€ä¸æ˜¯ä¸ºè€æ¿å·¥ä½œã€ä¸æ˜¯ä¸ºå®¶äººå·¥ä½œï¼Œæ˜¯ä¸ºå®ç°è‡ªæˆ‘è€Œå·¥ä½œï¼Œæ˜¯ä¸ºæ›´å®Œç¾çš„è‡ªå·±è€Œå·¥ä½œã€‚\nå”¯æœ‰å¿—å­˜é«˜è¿œï¼Œæ–¹èƒ½é£è¡Œå¤©ä¸‹ã€‚\n9. å…¶å®ä¸å–œæ¬¢è½¯ä»¶å¼€å‘æœ‰ä¸€éƒ¨åˆ†äººä»äº‹è½¯ä»¶å¼€å‘å·¥ä½œï¼Œå¹¶ä¸æ˜¯å› ä¸ºå–œæ¬¢ï¼Œä¹Ÿæ²¡æœ‰å¹²ç€å¹²ç€ä»ä¸å–œæ¬¢å˜æˆå–œæ¬¢ã€‚ä»–ä»¬å¯èƒ½æ˜¯å–œæ¬¢è½¯ä»¶å¼€å‘é™„å¸¦çš„é«˜è–ªæ°´â€”â€”å¹³å‡è–ªæ°´æ¯”å…¶ä»–è¡Œä¸šé«˜ã€‚äººåšä¸€ä»¶è‡ªå·±ä¸å–œæ¬¢çš„äº‹æƒ…æ—¶ï¼Œå¿ƒç†ä¸Šæ²¡æœ‰äº²è¿‘æ„Ÿï¼Œä¸ä¼šæƒ³ç€æ€æ ·æŠŠäº‹æƒ…åšå¾—æ›´å¥½ï¼Œå¾€å¾€æ˜¯å·®ä¸å¤šå°±æˆäº†ï¼Œä¸å¤ªå¯èƒ½æœ‰ç²¾ç›Šæ±‚ç²¾ç§¯æå‘ä¸Šçš„è¿½æ±‚ã€‚å› ä¸ºåœ¨åšä¸å–œæ¬¢çš„äº‹æƒ…æ—¶ï¼Œæƒ…æ„Ÿä¸Šæ˜¯æ‹’ç»çš„ï¼Œæƒ…ç»ªä¸Šæ˜¯æƒ³é€ƒç¦»çš„ï¼Œæ€»æƒ³ç€æ—©ç‚¹å„¿å®Œäº‹å„¿æ‹‰å€’ï¼Œæ¯ä¸€å¤©å»å•ä½æ—¶ä¸æ˜¯å……æ»¡æœŸå¾…ï¼Œè€Œæ˜¯å„ç§æ‹…å¿§ã€çƒ¦èºã€ç•æƒ§ï¼Œåˆ°äº†å•ä½ï¼Œç¨æœ‰å›°éš¾æˆ–ä¸é¡ºå¿ƒï¼Œå°±ä¼šæ¶ˆæã€æŠ±æ€¨ã€æŠµè§¦ã€æ‹’ç»â€¦â€¦\nåšå–œæ¬¢çš„äº‹ï¼Œèƒ½æœ€å¤§å¯èƒ½å‘æŒ¥ä¸€ä¸ªäººçš„æ½œèƒ½å’Œçƒ­æƒ…ï¼Œä¼šæœ€å¿«é€Ÿåœ°é€šå‘æˆåŠŸæˆå°±è‡ªå·±ã€‚è€Œåšä¸å–œæ¬¢çš„äº‹ï¼Œä¸€å¼€å§‹å°±æ³¨å®šäº†äº‹å€åŠŸåŠï¼Œæœ€åä¹Ÿå¾€å¾€ä¼šæ˜¯ç—›è‹¦ä¸å ªæˆ–åŠé€”è€ŒåºŸã€‚\n\n è½¬è½½è‡ª: \næœˆè–ª3ä¸‡çš„ç¨‹åºå‘˜éƒ½é¿å¼€äº†å“ªäº›å‘\n\n","categories":["â‘¨æ—¥å¸¸æŠ€èƒ½ä¸çè®°"]},{"title":"ABIå…¼å®¹æ€§","url":"/post/529732738.html","content":"ABI æ˜¯ Application Binary Interface çš„ç¼©å†™ï¼Œå½“æˆ‘ä»¬ä»¥äºŒè¿›åˆ¶å½¢å¼ï¼ˆéæºç å½¢å¼ï¼‰å‘å¸ƒæˆ‘ä»¬çš„åŠ¨æ€åº“æ—¶ï¼Œå°±éœ€è¦å…³å¿ƒABIå…¼å®¹ï¼ˆä¹Ÿç§°äºŒè¿›åˆ¶å…¼å®¹ï¼‰ã€‚\nå¯¹äºé™æ€åº“ï¼Œæ›´æ–°é™æ€åº“å§‹ç»ˆéƒ½éœ€è¦è¯¥åº“çš„ä½¿ç”¨æ–¹é‡æ–°ç¼–è¯‘ï¼Œå› æ­¤ä¸å­˜åœ¨ABIå…¼å®¹çš„è¯´æ³•ã€‚\n\n\nä»€ä¹ˆæ˜¯ABIå…¼å®¹å‡è®¾æˆ‘ä»¬å¼€å‘äº†æŸä¸ªåŠ¨æ€åº“ï¼ˆåä¸º somethingï¼‰ï¼Œä»¥åŠ¨æ€åº“çš„å½¢å¼æä¾›ï¼šsomething.hã€something.libã€something.dllã€‚\næœ‰äººä½¿ç”¨è¯¥åŠ¨æ€åº“å¼€å‘äº†ç¨‹åº wï¼ˆwå¯ä»¥æ˜¯å¯æ‰§è¡Œç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯åº“ï¼‰ï¼Œå³ç¨‹åºwé“¾æ¥äº†åŠ¨æ€åº“ somethingï¼Œå¹¶å°†ç¨‹åºwæ‰“åŒ…äº¤ä»˜ç»™ç»ˆç«¯ç”¨æˆ·ï¼Œæ‰“åŒ…æ–‡ä»¶åŒ…å«ï¼šw.exeã€something.dllã€‚\nsomething åº“æ˜¯å¦å…·æœ‰ABIå…¼å®¹æ€§å†³å®šäº†åœ¨æ›´æ–° something.dll æ—¶ï¼Œæ˜¯å¦éœ€è¦é‡æ–°ç¼–è¯‘ w.exeï¼Ÿ\nå¦‚æœä¸éœ€è¦é‡æ–°ç¼–è¯‘ w.exeï¼Œåˆ™ something åº“æ˜¯äºŒè¿›åˆ¶å…¼å®¹çš„ï¼Œå¦åˆ™å°±ä¸æ˜¯çš„ã€‚\n\nMicrosoft C++ï¼ˆMSVCï¼‰ç¼–è¯‘å™¨å·¥å…·é›†åœ¨ Visual Studio 2015 ä¹‹å‰æœªå®ç°ABIå…¼å®¹ï¼Œä½†åœ¨ Visual Studio 2015ï¼ˆå«ï¼‰ä¹‹åå®ç°äº†ABIå…¼å®¹ã€‚\n\nä¸ ABI æœ‰å…³çš„çŸ¥è¯†åœ¨ç†è§£å“ªäº›è¡Œä¸ºæ˜¯å¦ä¼šç ´å ABI å…¼å®¹æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é¢„å…ˆäº†è§£ä¸€äº›C++åŸºç¡€çŸ¥è¯†ã€‚\nç±»å¦‚ä½•è®¿é—®æˆå‘˜å˜é‡åœ¨ C++ ä¸­ï¼Œstruct å’Œ class æ˜¯é€šè¿‡åç§»é‡æ¥è®¿é—®æˆå‘˜å˜é‡çš„ï¼Œå¦‚æœæ”¹å˜äº†æˆå‘˜å˜é‡çš„é¡ºåºï¼Œåç§»é‡ä¹Ÿä¼šç›¸åº”æ”¹å˜ã€‚\nè™šå‡½æ•°è¡¨è™šå‡½æ•°æ˜¯é€šè¿‡è™šå‡½æ•°è¡¨æ¥ç®¡ç†å’Œè®¿é—®çš„ï¼Œæ”¹å˜è™šå‡½æ•°é¡ºåºã€æ–°å¢&#x2F;åˆ é™¤è™šå‡½æ•°éƒ½ä¼šæ”¹å˜è™šå‡½æ•°è¡¨ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰æœ‰å…³è™šå‡½æ•°çš„æ–‡ç« ï¼šæ·±å…¥ç†è§£C++è™šå‡½æ•°\nName ManglingC++ ç¼–è¯‘å™¨ä¼šæŠŠå‡½æ•°çš„åå­—ã€å‚æ•°ç­‰ä¿¡æ¯ï¼ˆæˆ–è€…å«å‡½æ•°ç­¾åï¼‰ç¼–ç æˆä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ï¼Œç”¨ä½œé“¾æ¥ç¬¦å·ï¼Œè¿™æ ·å°±èƒ½åœ¨ç¼–è¯‘æœŸå®Œæˆæ£€æŸ¥ï¼Œä»è€Œé¿å…è¿è¡Œæ—¶æŠ¥é”™ï¼Œè¿™ç§è¡Œä¸ºç§°ä½œName Manglingï¼Œä¾‹å¦‚ï¼š\nnamespace wikipedia &#123;   class article &#123;   public:      std::string format(void);   &#125;&#125;\n\nformat å‡½æ•°ç»è¿‡ Name Mangling ä¹‹åå˜æˆäº†ï¼š_ZN9wikipedia7article6formatEv\n\nName Manglingä½¿ç”¨çš„ç®—æ³•æ˜¯å¯é€†çš„ï¼Œhttp://demangler.com/ ç½‘ç«™æä¾›äº†é€šè¿‡æ–°å‡½æ•°åé€†å‘æ¨æ¼”å‡ºåŸæœ‰å‡½æ•°åçš„åŠŸèƒ½ã€‚\n\nç±»å¦‚ä½•è®¿é—®æˆå‘˜å‡½æ•°C++ ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æˆå‘˜å‡½æ•°æ—¶ä¼šæ ¹æ®å®ƒæ‰€åœ¨çš„å‘½åç©ºé—´ã€æ‰€å±ç±»ã€ä»¥åŠå‚æ•°ç­‰ä¿¡æ¯ï¼Œé€šè¿‡ Name Mangling ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°åã€‚\nç±»çš„æˆå‘˜å‡½æ•°æœ€ç»ˆè¢«ç¼–è¯‘æˆä¸å¯¹è±¡æ— å…³çš„å…¨å±€å‡½æ•°ï¼Œä¸ºäº†ä½¿è¯¥å…¨å±€å‡½æ•°å¯ä»¥è®¿é—®ç±»çš„å…¶ä»–æˆå‘˜å‡½æ•°å’Œå˜é‡ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æˆå‘˜å‡½æ•°æ—¶ä¼šé¢å¤–æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼ŒæŠŠå½“å‰å¯¹è±¡çš„æŒ‡é’ˆä¼ é€’è¿›å»ï¼Œé€šè¿‡æŒ‡é’ˆæ¥è®¿é—®æˆå‘˜å˜é‡&#x2F;æˆå‘˜å‡½æ•°ã€‚\nå¤´æ–‡ä»¶çš„ä½œç”¨åœ¨ C&#x2F;C++ ä¸­ï¼ŒåŠ¨æ€é“¾æ¥åº“é€šå¸¸ä¼šé™„å¸¦å¤´æ–‡ä»¶ï¼Œè¿™ä¸ªå¤´æ–‡ä»¶å¯ä»¥ç†è§£æˆåŠ¨æ€åº“çš„â€œä½¿ç”¨è¯´æ˜ä¹¦â€ï¼Œåº“çš„ä½¿ç”¨è€…ä¼šæŒ‰ç…§å¤´æ–‡ä»¶ä½¿ç”¨è¯¥åº“ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¯¥å¤´æ–‡ä»¶ç”ŸæˆäºŒè¿›åˆ¶ä»£ç ï¼Œç„¶ååœ¨è¿è¡Œçš„æ—¶å€™é€šè¿‡è£…è½½å™¨(loader)æŠŠå¯æ‰§è¡Œæ–‡ä»¶å’ŒåŠ¨æ€åº“ç»‘åˆ°ä¸€èµ·ã€‚\nç ´åABIå…¼å®¹æ€§çš„è¡Œä¸ºå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ”¹åŠ¨æ˜¯ä¸æ˜¯äºŒè¿›åˆ¶å…¼å®¹ï¼Œä¸»è¦çœ‹è€ç‰ˆçš„å¤´æ–‡ä»¶èƒ½å¦ä¸æ–°ç‰ˆæœ¬çš„åŠ¨æ€åº“çš„å®é™…ä½¿ç”¨æ–¹æ³•å…¼å®¹ã€‚å› ä¸ºæ–°çš„åº“å¿…ç„¶æœ‰æ–°çš„å¤´æ–‡ä»¶ï¼Œä½†æ˜¯ç°æœ‰çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶è¿˜æ˜¯æŒ‰æ—§çš„å¤´æ–‡ä»¶æ¥è°ƒç”¨åŠ¨æ€åº“ã€‚\næ€»ç»“èµ·æ¥ï¼ŒABI ä¸å…¼å®¹ä¸»è¦æ˜¯å› ä¸ºï¼š\n\nsizeof(class) å¤§å°æ”¹å˜ã€‚\næ•°æ®æˆå‘˜åç§»é‡å‘ç”Ÿæ”¹å˜ã€‚\nè™šå‡½æ•°è¡¨å‘ç”Ÿæ”¹å˜ã€‚\nName Mangling åå‘ç”Ÿæ”¹å˜ã€‚\n\nä¸‹é¢åˆ—ä¸¾äº†ä¼šç ´å ABI å…¼å®¹æ€§çš„æ“ä½œã€‚\n3.1 æ·»åŠ æˆ–åˆ é™¤éé™æ€æˆå‘˜å˜é‡å› ä¸º sizeof(class) å¤§å°å‘ç”Ÿæ”¹å˜ï¼Œå¦‚ä¹‹å‰å ç”¨8ä¸ªå­—èŠ‚ï¼Œæ–°å¢ä¸€ä¸ªæˆå‘˜å˜é‡åå ç”¨12å­—èŠ‚ï¼Œä½†å¤–éƒ¨ä»£ç new classæ—¶ä»ç„¶åªåˆ†é…äº†8å­—èŠ‚ï¼Œæ‰€ä»¥ä¼šå‡ºé—®é¢˜ã€‚\nä½†æ˜¯ï¼Œå¦‚æœåŠ¨æ€åº“æä¾›äº†åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œå§‹ç»ˆåœ¨åŠ¨æ€åº“å†…éƒ¨åˆ›å»ºå¯¹è±¡ï¼Œåˆ™æ²¡æœ‰è¯¥é—®é¢˜ï¼Œå¦‚ï¼š\nclass EXPORT_API Koi &#123;  public:  // ....&#125;;EXPORT_API Koi* GetKoi();\n\nä¹Ÿå¯ä»¥é€šè¿‡Implè®¾è®¡æ¨¡å¼æ¥è§£å†³è¯¥é—®é¢˜ã€‚\nclass EXPORT_API Koi &#123;  public:  // ....  private:    class Impl;    Impl* impl_;&#125;;\n\n// åŠ¨æ€åº“å†…éƒ¨class Koi::Impl &#123;  public:    int a_;    // ...&#125;\n\n3.2 æ”¹å˜éé™æ€æˆå‘˜å˜é‡çš„é¡ºåºæ”¹å˜äº†éé™æ€æˆå‘˜å˜é‡çš„é¡ºåºå°±æ”¹å˜äº†å˜é‡çš„å†…å­˜åç§»ï¼Œä¼šå¯¼è‡´å˜é‡è¯»å†™å‡ºé”™ï¼Œå› æ­¤ç ´åäº†ABIå…¼å®¹æ€§ã€‚\nè¿™ä¸ªé—®é¢˜ä¹Ÿå¯é€šè¿‡ä¸Šé¢ 3.1 èŠ‚çš„æ–¹å¼æ¥è§£å†³ã€‚\n3.3 ä¿®æ”¹å‡½æ•°çš„åç§°è¿™ä¸ªå¯¼è‡´ä¼š Name Mangling åå‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤ ABI ä¸å…¼å®¹ã€‚\n3.4 æ·»åŠ é»˜è®¤çš„æ¨¡æ¿ç±»å‹å‚æ•°å¦‚Foo&lt;T&gt; æ”¹ä¸º Foo&lt;T, Alloc=alloc&lt;T&gt; &gt;ï¼Œè¿™ä¸ªå¯¼è‡´ä¼š Name Mangling åå‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤ä¸ ABI å…¼å®¹ã€‚\n3.5 ä¸ºå‡½æ•°æ·»åŠ é»˜è®¤å‚æ•°ç°æœ‰çš„åŠ¨æ€åº“ä½¿ç”¨æ–¹ï¼ˆå¯æ‰§è¡Œç¨‹åºæˆ–å¦å¤–ä¸€ä¸ªåŠ¨æ€åº“ï¼‰æ˜¯åŸºäºè€çš„å¤´æ–‡ä»¶è¿›è¡Œç¼–è¯‘çš„ï¼Œæ— æ³•ä¼ é€’è¯¥é»˜è®¤å‚æ•°ç»™æ–°çš„åŠ¨æ€åº“ï¼Œå› æ­¤ä¸ ABI å…¼å®¹ã€‚\n3.6 ä¿®æ”¹å‡½æ•°å‚æ•°ä¼ é€’æ–¹å¼å¦‚ __cdecl ä¿®æ”¹ä¸º __stdcallã€‚å‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼æœ‰å¤šç§ï¼Œå¦‚å‹æ ˆæ–¹å¼ã€å¯„å­˜å™¨æ–¹å¼ã€‚å¦‚æœé€‰æ‹©å‹æ ˆæ–¹å¼ï¼Œåœ¨ç»´æŒæ ˆå¹³è¡¡ä¸Šæœ‰åˆ†è°ƒç”¨è€…ç»´æŒã€å‡½æ•°è‡ªèº«ç»´æŒï¼Œåœ¨å‚æ•°çš„ä¼ é€’é¡ºåºä¹Ÿæœ‰å¤šç§ï¼Œä»å·¦åˆ°å³ï¼Œè¿˜æ˜¯ä»å³åˆ°å·¦ã€‚\nå…·ä½“ä»‹ç»å¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼šä»æ±‡ç¼–çš„è§’åº¦åˆ†æå‡½æ•°è°ƒç”¨è¿‡ç¨‹\n3.7 æ·»åŠ è™šå‡½æ•°æ·»åŠ è™šå‡½æ•°ä¼šå¯¼è‡´è™šå‡½æ•°è¡¨å‘ç”Ÿäº†å˜åŒ–ï¼Œå³ä¾¿æ˜¯åœ¨æœ€å°¾ç«¯æ·»åŠ è™šå‡½æ•°ä¹Ÿå¯èƒ½ä¸è¡Œï¼Œå› ä¸ºå½“å‰ç±»å¯èƒ½å·²ç»è¢«å…¶ä»–ç±»ç»§æ‰¿äº†ã€‚\n3.8 ä¸åŒç³»ç»Ÿçš„åŠ¨æ€åº“ä¸åŒæ“ä½œç³»ç»Ÿæ‰€æ”¯æŒçš„åŠ¨æ€åº“çš„äºŒè¿›åˆ¶æ ¼å¼ä¸ä¸€æ ·ï¼Œå› æ­¤ä¸åŒç³»ç»Ÿçš„åŠ¨æ€åº“è‚¯å®šæ˜¯æ— æ³•å…¼å®¹çš„ã€‚\nä¸ç ´åABIå…¼å®¹æ€§çš„è¡Œä¸ºä¸‹é¢çš„æ“ä½œä¸ä¼šç ´å ABI å…¼å®¹æ€§ï¼š\n\næ·»åŠ æ–°çš„ç±»\nä¿®æ”¹æˆå‘˜å˜é‡çš„åç§°\næ›´æ”¹éè™šæˆå‘˜å‡½æ•°çš„é¡ºåº\n\nWindows COM å®ç° ABI å…¼å®¹çš„æ–¹å¼å¾ˆå¤šæ—¶å€™ï¼Œç”±äºåŠŸèƒ½æ›´æ–°ï¼Œå¯¹æ¥å£çš„ä¿®æ”¹ä¸å¯é¿å…çš„ï¼Œæ—¢ç„¶æ¥å£å·²ç»å‘ç”Ÿå¤§æ”¹åŠ¨ï¼Œé‚£æ˜¾ç„¶å¾ˆéš¾æ»¡è¶³ABIå…¼å®¹æ€§ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ç‰ˆæœ¬ç®¡ç†çš„æ–¹å¼æ¥ä¿è¯ ABI å…¼å®¹æ€§ï¼Œå¦‚ï¼š\n// ç‰ˆæœ¬1class Interface &#123;public:  virtual void API sendMessage(const char* message) = 0;&#125;;Interface* CreateInterface(int version);\n\n// ç‰ˆæœ¬2class Interface2 &#123;public:  virtual void API sendMessage(const char* message, int messageSize) = 0;&#125;;Interface2* CreateInterface(int version);\n\nä¸Šé¢æ–¹å¼ä¹Ÿæ˜¯ COM å®ç° ABI å…¼å®¹æ€§çš„æ–¹å¼ï¼Œéœ€è¦åœ¨åŠ¨æ€åº“ä¸­ä»è¦ä¿ç•™è€çš„æ¥å£å’Œå®ç°ï¼Œä»¥å®ç°å‘å‰å…¼å®¹ï¼Œè¿™ç§æ–¹å¼æœ‰ä¸ªå¼Šç«¯å°±æ˜¯ä¼šå­˜åœ¨å¾ˆå¤šç‰ˆæœ¬çš„æ¥å£ï¼Œå¦‚ï¼š\nIDirect3D7, IDirect3D8, IDirect3D9, ID3D10*, ID3D11*IXMLDOMDocument, IXMLDOMDocument2, IXMLDOMDocument3\n\n\næœ¬æ–‡å‚è€ƒäº†ï¼š\nC++ å·¥ç¨‹å®è·µ(4)ï¼šäºŒè¿›åˆ¶å…¼å®¹æ€§\n\nMSVCç‰ˆæœ¬çš„äºŒè¿›åˆ¶å…¼å®¹æ€§Visual Studio 2013 åŠæ›´æ—©ç‰ˆæœ¬ä¸­çš„ Microsoft C++ (MSVC) ç¼–è¯‘å™¨å·¥å…·é›†ä¸ä¿è¯ä¸»ç‰ˆæœ¬é—´çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œæ— æ³•é“¾æ¥ç”±ä¸åŒç‰ˆæœ¬å·¥å…·é›†ç”Ÿæˆçš„å¯¹è±¡æ–‡ä»¶ã€é™æ€åº“ã€åŠ¨æ€åº“å’Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› ä¸ºABIã€å¯¹è±¡æ ¼å¼å’Œè¿è¡Œæ—¶åº“ä¸å…¼å®¹ã€‚\nå¾®è½¯åœ¨ Visual Studio 2015 åŠæ›´é«˜ç‰ˆæœ¬ä¸­æ”¹å˜äº†è¿™ä¸ªè¡Œä¸ºã€‚å¯¹äºè‡ª Visual Studio 2015 ä»¥æ¥çš„æ‰€æœ‰ç‰ˆæœ¬ï¼ˆè¯¥ç‰ˆæœ¬å·éƒ½ä»¥ 14 å¼€å¤´ï¼Œå¦‚Visual Studio 2015ã€2017ã€2019 å’Œ 2022å·¥å…·é›†çš„ç‰ˆæœ¬åˆ†åˆ«ä¸º v140ã€v141ã€v142 å’Œ v143ï¼‰ç”±å…¶ä¸­ä»»ä¸€ç‰ˆæœ¬ç¼–è¯‘å™¨ç¼–è¯‘çš„è¿è¡Œæ—¶åº“å’Œåº”ç”¨éƒ½å…·æœ‰äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚\nå‡è®¾ä½ ä½¿ç”¨ Visual Studio 2015 ç”Ÿæˆç¬¬ä¸‰æ–¹åº“ï¼Œä½ ä»å¯åœ¨ Visual Studio 2017ã€2019 æˆ– 2022 ç”Ÿæˆçš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬ï¼Œæ— éœ€ä½¿ç”¨åŒ¹é…å·¥å…·é›†é‡æ–°ç¼–è¯‘ã€‚ åŒæ—¶æœ€æ–°ç‰ˆæœ¬çš„ Microsoft Visual C++ å¯å†å‘è¡Œç¨‹åºåŒ…ï¼ˆè¿è¡Œæ—¶åº“ï¼‰ä¹Ÿå…¼å®¹æ‰€æœ‰è€ç‰ˆæœ¬ï¼Œæ— éœ€ä¸ºä¸åŒç‰ˆæœ¬å®‰è£…ä¸åŒçš„è¿è¡Œæ—¶åº“ï¼Œç»Ÿä¸€å®‰è£…æœ€æ–°ç‰ˆæœ¬å³å¯ã€‚\nå¯¹äºŒè¿›åˆ¶å…¼å®¹æ€§çš„é™åˆ¶\nv140ã€v141ã€v142 å’Œ v143 å·¥å…·é›†ä¸æ¬¡è¦ç‰ˆæœ¬å·æ›´æ–°ä¹‹é—´çš„äºŒè¿›åˆ¶å…¼å®¹æ€§æ–¹é¢å­˜åœ¨ä¸‰ä¸ªé‡è¦é™åˆ¶ï¼š\n\nä½ å¯ä»¥æ··åˆä½¿ç”¨ç”± v140ã€v141ã€v142 å’Œ v143 å·¥å…·é›†çš„ä¸åŒç‰ˆæœ¬ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ ä½†æ˜¯ï¼Œå¿…é¡»ä½¿ç”¨è‡³å°‘ä¸åº”ç”¨ä¸­æœ€æ–°äºŒè¿›åˆ¶æ–‡ä»¶åŒæ ·æ–°çš„å·¥å…·é›†è¿›è¡Œé“¾æ¥ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼šå¯ä»¥å°†ä½¿ç”¨ä»»ä½•ç‰ˆæœ¬çš„v141å·¥å…·é›†ï¼ˆç‰ˆæœ¬ 15.0 åˆ° 15.9ï¼‰ç¼–è¯‘çš„åº”ç”¨é“¾æ¥åˆ°ä½¿ç”¨ Visual Studio 2019 ç‰ˆæœ¬ 16.2 (v142) ç¼–è¯‘çš„é™æ€åº“ã€‚ åªæ˜¯å¿…é¡»ä½¿ç”¨ç‰ˆæœ¬ 16.2 æˆ–æ›´é«˜ç‰ˆæœ¬å·¥å…·é›†é“¾æ¥å®ƒä»¬ã€‚åªè¦ä½¿ç”¨ 16.4 æˆ–æ›´é«˜ç‰ˆæœ¬å·¥å…·é›†ï¼Œä¾¿å¯ä»¥å°†ç‰ˆæœ¬ 16.2 åº“é“¾æ¥åˆ°ç‰ˆæœ¬ 16.4 åº”ç”¨ã€‚\n\nåº”ç”¨ä½¿ç”¨çš„å¯å†å‘è¡Œç¨‹åºåŒ…å…·æœ‰ç±»ä¼¼çš„äºŒè¿›åˆ¶å…¼å®¹æ€§é™åˆ¶ã€‚ æ··åˆä½¿ç”¨ç”±å·¥å…·é›†çš„ä¸åŒå—æ”¯æŒç‰ˆæœ¬ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œå¯å†å‘è¡Œç¨‹åºåŒ…ç‰ˆæœ¬å¿…é¡»è‡³å°‘ä¸ä»»ä½•åº”ç”¨ç»„ä»¶ä½¿ç”¨çš„æœ€æ–°å·¥å…·é›†ä¸€æ ·æ–°ã€‚\n\nä½¿ç”¨ &#x2F;GLï¼ˆå…¨ç¨‹åºä¼˜åŒ–ï¼‰ç¼–è¯‘å™¨å¼€å…³ç¼–è¯‘æˆ–æ˜¯ä½¿ç”¨ &#x2F;LTCGï¼ˆé“¾æ¥æ—¶é—´ä»£ç ç”Ÿæˆï¼‰é“¾æ¥çš„é™æ€åº“æˆ–å¯¹è±¡æ–‡ä»¶ä¸åœ¨å„ä¸ªç‰ˆæœ¬é—´äºŒè¿›åˆ¶å…¼å®¹ï¼ˆåŒ…æ‹¬æ¬¡è¦ç‰ˆæœ¬æ›´æ–°ï¼‰ã€‚\nä½¿ç”¨ /GL å’Œ /LTCG ç¼–è¯‘çš„æ‰€æœ‰å¯¹è±¡æ–‡ä»¶å’Œåº“å¿…é¡»å°†å®Œå…¨ç›¸åŒçš„å·¥å…·é›†ç”¨äºç¼–è¯‘å’Œæœ€ç»ˆé“¾æ¥ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ Visual Studio 2019 ç‰ˆæœ¬ 16.7 å·¥å…·é›†ä¸­çš„ /GL ç”Ÿæˆçš„ä»£ç æ— æ³•é“¾æ¥åˆ°ä½¿ç”¨ Visual Studio 2019 ç‰ˆæœ¬ 16.8 å·¥å…·é›†ä¸­çš„ /GLç”Ÿæˆçš„ä»£ç ã€‚ ç¼–è¯‘å™¨ä¼šå‘å‡ºé”™è¯¯ C1047ã€‚\n\n\nä» Visual Studio 2015 åŠæ›´é«˜ç‰ˆæœ¬å‡çº§ Microsoft Visual C++ å¯å†å‘è¡Œç¨‹åºåŒ…\nå¯¹äº Visual Studio 2015ã€2017ã€2019 å’Œ 2022ï¼Œå¾®è½¯å°† Microsoft Visual C++ å¯å†å‘è¡Œç¨‹åºåŒ…çš„ä¸»ç‰ˆæœ¬å·ä¿æŒä¸€è‡´ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬ä¸€æ¬¡åªèƒ½å®‰è£…å¯å†å‘è¡Œç¨‹åºåŒ…çš„ä¸€ä¸ªå®ä¾‹ã€‚ è¾ƒæ–°ç‰ˆæœ¬ä¼šè¦†ç›–å·²å®‰è£…çš„ä»»ä½•è¾ƒæ—§ç‰ˆæœ¬ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªåº”ç”¨å¯èƒ½ä¼šä» Visual Studio 2015 å®‰è£…å¯å†å‘è¡Œç¨‹åºåŒ…ã€‚ éšåå¦ä¸€ä¸ªåº”ç”¨ä» Visual Studio 2022 å®‰è£…å¯å†å‘è¡Œç¨‹åºåŒ…ã€‚ 2022 ç‰ˆæœ¬ä¼šè¦†ç›–è¾ƒæ—§ç‰ˆæœ¬ï¼Œä½†ç”±äºå®ƒä»¬å…·æœ‰äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œæ—©æœŸåº”ç”¨ä»å¯æ­£å¸¸å·¥ä½œã€‚ å¾®è½¯ç¡®ä¿æœ€æ–°ç‰ˆæœ¬çš„å¯å†å‘è¡Œç¨‹åºåŒ…å…·æœ‰æ‰€æœ‰æœ€æ–°çš„åŠŸèƒ½ã€å®‰å…¨æ›´æ–°å’Œ bug ä¿®è¡¥ç¨‹åºã€‚ è¿™ä¾¿æ˜¯ä¸ºä»€ä¹ˆå¾®è½¯å§‹ç»ˆå»ºè®®å‡çº§åˆ°æœ€æ–°å¯ç”¨ç‰ˆæœ¬ã€‚\nåŒæ ·ï¼Œå·²å®‰è£…äº†è¾ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œæ— æ³•å®‰è£…è¾ƒæ—§çš„å¯å†å‘è¡Œç¨‹åºåŒ…ã€‚ å¦‚æœå°è¯•ï¼Œåˆ™å®‰è£…ç¨‹åºä¼šæŠ¥å‘Šé”™è¯¯ã€‚ å¦‚æœåœ¨å·²å…·æœ‰ 2022 ç‰ˆæœ¬çš„è®¡ç®—æœºä¸Šå®‰è£… 2017 æˆ– 2019 å¯å†å‘è¡Œç¨‹åºï¼Œåˆ™ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„é”™è¯¯ï¼š\n0x80070666 - Another version of this product is already installed. Installation of this version cannot continue. To configure or remove the existing version of this product, use Add/Remove Programs on the Control Panel.\n\næ­¤é”™è¯¯æ˜¯å¾®è½¯æ•…æ„è¿™æ ·è®¾è®¡çš„ï¼Œä»¥ç¡®ä¿Microsoft Visual C++ å¯å†å‘è¡Œç¨‹åºåŒ…ä¸ºæœ€æ–°ç‰ˆæœ¬ã€‚ \n\nå‚è€ƒï¼šVisual Studio ç‰ˆæœ¬ä¹‹é—´çš„ C++ äºŒè¿›åˆ¶å…¼å®¹æ€§\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++å†…å­˜æ± å®ç°","url":"/post/581068365.html","content":"æœ¬æ–‡ä»å®é™…éœ€æ±‚å‡ºå‘ï¼Œä»‹ç»äº†å†…å­˜æ± çš„å®ç°åŸç†ï¼Œå¹¶ä¸”æä¾›äº†å…·ä½“çš„å®ç°æ–¹æ¡ˆã€‚\nä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨å†…å­˜æ± åœ¨ C&#x2F;C++ ä¸­æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ mallocã€freeæˆ–newã€delete æ¥åŠ¨æ€åˆ†é…å†…å­˜ã€‚ä¸€æ–¹é¢ï¼Œå› ä¸ºè¿™äº›å‡½æ•°æ¶‰åŠåˆ°äº†ç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥é¢‘ç¹çš„è°ƒç”¨å¿…ç„¶ä¼šå¯¼è‡´ç¨‹åºæ€§èƒ½çš„æŸè€—ï¼›\nå¦ä¸€æ–¹é¢ï¼Œé¢‘ç¹çš„åˆ†é…å’Œé‡Šæ”¾å°å—å†…å­˜ä¼šå¯¼è‡´å¤§é‡çš„å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿï¼Œå½“ç¢ç‰‡ç§¯ç´¯åˆ°ä¸€å®šçš„é‡ä¹‹åï¼Œå°†æ— æ³•åˆ†é…åˆ°è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç³»ç»Ÿä¸å¾—ä¸è¿›è¡Œç¢ç‰‡æ•´ç†æ¥æ»¡è¶³åˆ†é…åˆ°è¿ç»­çš„ç©ºé—´ï¼Œè¿™æ ·ä¸ä»…ä¼šå¯¼è‡´ç³»ç»Ÿæ€§èƒ½æŸè€—ï¼Œè€Œä¸”ä¼šå¯¼è‡´ç¨‹åºå¯¹å†…å­˜çš„åˆ©ç”¨ç‡ä½ä¸‹ã€‚\nå½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬çš„ç¨‹åºä¸éœ€è¦é¢‘ç¹çš„åˆ†é…å’Œé‡Šæ”¾å°å—å†…å­˜ï¼Œé‚£å°±æ²¡æœ‰ä½¿ç”¨å†…å­˜æ± çš„å¿…è¦ï¼Œç›´æ¥ä½¿ç”¨malloc,freeæˆ–new,deleteå‡½æ•°å³å¯ã€‚\n\n\nå†…å­˜æ± çš„å®ç°æ–¹æ¡ˆå†…å­˜æ± çš„å®ç°åŸç†å¤§è‡´å¦‚ä¸‹ï¼š\næå‰ç”³è¯·ä¸€å—å¤§å†…å­˜äº¤ç”±å†…å­˜æ± ç®¡ç†ï¼Œå¹¶åˆ†æˆå°ç‰‡ä¾›ç»™ç¨‹åºä½¿ç”¨ã€‚ç¨‹åºä½¿ç”¨å®Œä¹‹åå°†å†…å­˜å½’è¿˜åˆ°å†…å­˜æ± ä¸­ï¼ˆå¹¶æ²¡æœ‰çœŸæ­£çš„ä»ç³»ç»Ÿé‡Šæ”¾ï¼‰ï¼Œå½“ç¨‹åºå†æ¬¡ä»å†…å­˜æ± ä¸­è¯·æ±‚å†…å­˜æ—¶ï¼Œå†…å­˜æ± å°†æ± å­ä¸­çš„å¯ç”¨å†…å­˜ç‰‡è¿”å›ç»™ç¨‹åºä½¿ç”¨ã€‚\næˆ‘ä»¬åœ¨è®¾è®¡å†…å­˜æ± çš„å®ç°æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š\n\nå†…å­˜æ± æ˜¯å¦å¯ä»¥è‡ªåŠ¨å¢é•¿ï¼Ÿ\nå¦‚æœå†…å­˜æ± çš„æœ€å¤§ç©ºé—´æ˜¯å›ºå®šçš„ï¼ˆä¹Ÿå°±æ˜¯éè‡ªåŠ¨å¢é•¿ï¼‰ï¼Œé‚£ä¹ˆå½“å†…å­˜æ± ä¸­çš„å†…å­˜è¢«è¯·æ±‚å®Œä¹‹åï¼Œç¨‹åºå°±æ— æ³•å†æ¬¡ä»å†…å­˜æ± è¯·æ±‚åˆ°å†…å­˜ã€‚æ‰€ä»¥éœ€è¦æ ¹æ®ç¨‹åºå¯¹å†…å­˜çš„å®é™…ä½¿ç”¨æƒ…å†µæ¥ç¡®å®šæ˜¯å¦éœ€è¦è‡ªåŠ¨å¢é•¿ã€‚\n\nå†…å­˜æ± çš„æ€»å†…å­˜å ç”¨æ˜¯å¦åªå¢ä¸å‡ï¼Ÿ\nå¦‚æœå†…å­˜æ± æ˜¯è‡ªåŠ¨å¢é•¿çš„ï¼Œå°±æ¶‰åŠåˆ°äº†â€œå†…å­˜æ± çš„æ€»å†…å­˜å ç”¨æ˜¯å¦æ˜¯åªå¢ä¸å‡â€è¿™ä¸ªé—®é¢˜äº†ã€‚è¯•æƒ³ï¼Œç¨‹åºä»ä¸€ä¸ªè‡ªåŠ¨å¢é•¿çš„å†…å­˜æ± ä¸­è¯·æ±‚äº† 1000 ä¸ªå¤§å°ä¸º 100KB çš„å†…å­˜ç‰‡ï¼Œå¹¶åœ¨ä½¿ç”¨å®Œä¹‹åå…¨éƒ¨å½’è¿˜ç»™äº†å†…å­˜æ± ï¼Œè€Œä¸”å‡è®¾ç¨‹åºä¹‹åçš„é€»è¾‘æœ€å¤šåªéœ€è¦ 10 ä¸ª 100KB çš„å†…å­˜ç‰‡ï¼Œè¯¥å†…å­˜æ± ä¸­çš„ 900 ä¸ª 100KB çš„å†…å­˜ç‰‡å°±ä¸€ç›´å¤„äºé—²ç½®çŠ¶æ€ï¼Œç¨‹åºå†…å­˜å ç”¨å°±ä¸€ç›´é™ä¸‹æ¥ã€‚å¯¹å†…å­˜å ç”¨å¤§å°æœ‰è¦æ±‚çš„ç¨‹åºéœ€è¦è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ã€‚\n\nå†…å­˜æ± ä¸­å†…å­˜ç‰‡çš„å¤§å°æ˜¯å¦å›ºå®šï¼Ÿ\nå¦‚æœæ¯æ¬¡ä»å†…å­˜æ± ä¸­çš„è¯·æ±‚çš„å†…å­˜ç‰‡çš„å¤§å°å¦‚æœä¸å›ºå®šï¼Œé‚£ä¹ˆå†…å­˜æ± ä¸­çš„æ¯ä¸ªå¯ç”¨å†…å­˜ç‰‡çš„å¤§å°å°±ä¸ä¸€è‡´ï¼Œç¨‹åºå†æ¬¡è¯·æ±‚å†…å­˜ç‰‡çš„æ—¶å€™ï¼Œå†…å­˜æ± å°±éœ€è¦åœ¨â€œåŒ¹é…æœ€ä½³å¤§å°çš„å†…å­˜ç‰‡â€å’Œâ€œåŒ¹é…æ“ä½œæ—¶é—´â€ä¸Šä½œå‡ºè¡¡é‡ã€‚â€œæœ€ä½³å¤§å°çš„å†…å­˜ç‰‡â€è™½ç„¶å¯ä»¥å‡å°‘å†…å­˜çš„æµªè´¹ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´â€œåŒ¹é…æ—¶é—´â€å˜é•¿ã€‚\n\nå†…å­˜æ± æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ\næ˜¯å¦å…è®¸åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶ä»åŒä¸€ä¸ªå†…å­˜æ± ä¸­è¯·æ±‚å’Œå½’è¿˜å†…å­˜ç‰‡ï¼Ÿè¿™ä¸ªçº¿ç¨‹å®‰å…¨å¯ä»¥ç”±å†…å­˜æ± æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥ç”±ä½¿ç”¨è€…æ¥ä¿è¯ã€‚\n\nå†…å­˜ç‰‡åˆ†é…å‡ºå»ä¹‹å‰å’Œå½’è¿˜åˆ°å†…å­˜æ± ä¹‹åï¼Œå…¶ä¸­çš„å†…å®¹æ˜¯å¦éœ€è¦è¢«æ¸…é™¤ï¼Ÿ\nç¨‹åºå¯èƒ½å‡ºç°å°†å†…å­˜ç‰‡å½’è¿˜ç»™å†…å­˜æ± ä¹‹åï¼Œä»ç„¶ä½¿ç”¨å†…å­˜ç‰‡çš„åœ°å€æŒ‡é’ˆè¿›è¡Œå†…å­˜è¯»å†™æ“ä½œï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ä¸å¯é¢„æœŸçš„ç»“æœã€‚å°†å†…å®¹æ¸…é›¶åªèƒ½å°½é‡çš„ï¼ˆä¹Ÿä¸ä¸€å®šèƒ½ï¼‰å°†é—®é¢˜æŠ›å‡ºæ¥ï¼Œä½†å¹¶ä¸èƒ½è§£å†³ä»»ä½•é—®é¢˜ï¼Œè€Œä¸”å°†å†…å®¹æ¸…é›¶ä¼šæ¶ˆè€—ä¸€å®šçš„ CPU æ—¶é—´ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆæœ€å¥½è¿˜æ˜¯éœ€è¦ç”±å†…å­˜æ± çš„ä½¿ç”¨è€…æ¥ä¿è¯è¿™ç§å®‰å…¨æ€§ã€‚\n\næ˜¯å¦å…¼å®¹ std::allocator ï¼Ÿ\nSTL æ ‡å‡†åº“ä¸­çš„å¤§å¤šç±»éƒ½æ”¯æŒç”¨æˆ·æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„å†…å­˜åˆ†é…å™¨ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ std::allocatorï¼Œå¦‚ std::string ï¼š\ntypedef basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt; string;\n\n å¦‚æœæˆ‘ä»¬çš„å†…å­˜æ± å…¼å®¹ std::allocatorï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„å†…å­˜æ± æ¥æ›¿æ¢é»˜è®¤çš„ std::allocator åˆ†é…å™¨ï¼Œå¦‚ï¼š\n typedef basic_string&lt;char, char_traits&lt;char&gt;, MemoryPoll&lt;char&gt; &gt; mystring;\n\n\nå…³äºå¦‚ä½•å…¼å®¹std::allocatorï¼Œå¯ä»¥å‚è€ƒï¼š\nhttp://www.cplusplus.com/reference/memory/allocator/\n\nå†…å­˜æ± çš„å…·ä½“å®ç°ç°åœ¨å®ç°ä¸€ä¸ªå†…å­˜æ± ï¼Œç±»åä¸ºMemoryPoolï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š\n\nå†…å­˜æ± çš„æ€»å¤§å°è‡ªåŠ¨å¢é•¿ã€‚\nå†…å­˜æ± ä¸­å†…å­˜ç‰‡çš„å¤§å°å›ºå®šã€‚\næ”¯æŒçº¿ç¨‹å®‰å…¨ã€‚\nåœ¨å†…å­˜ç‰‡è¢«å½’è¿˜ä¹‹åï¼Œæ¸…é™¤å…¶ä¸­çš„å†…å®¹ã€‚\nå…¼å®¹ std::allocator ã€‚\n\nå› ä¸ºå†…å­˜æ± çš„å†…å­˜ç‰‡çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä¸æ¶‰åŠåˆ°éœ€è¦åŒ¹é…æœ€åˆé€‚å¤§å°çš„å†…å­˜ç‰‡ï¼Œç”±äºä¼šé¢‘ç¹çš„è¿›è¡Œæ’å…¥ã€ç§»é™¤çš„æ“ä½œï¼Œä½†æŸ¥æ‰¾æ¯”è¾ƒå°‘ï¼Œæ•…é€‰ç”¨é“¾è¡¨æ•°æ®ç»“æ„æ¥ç®¡ç†å†…å­˜æ± ä¸­çš„å†…å­˜ç‰‡ã€‚\nMemoryPool ä¸­æœ‰ 2 ä¸ªé“¾è¡¨ï¼Œå®ƒä»¬éƒ½æ˜¯åŒå‘é“¾è¡¨ï¼ˆè®¾è®¡æˆåŒå‘é“¾è¡¨ä¸»è¦æ˜¯ä¸ºäº†åœ¨ç§»é™¤æŒ‡å®šå…ƒç´ æ—¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½è¯¥å…ƒç´ çš„å‰åå…ƒç´ ï¼Œä»è€Œåœ¨è¯¥å…ƒç´ è¢«ç§»é™¤åï¼Œå°†å…¶å‰åå…ƒç´ è¿æ¥èµ·æ¥ï¼Œä¿è¯é“¾è¡¨çš„å®Œæ•´æ€§ï¼‰ï¼š\n\ndata_element_ è®°å½•ä»¥åŠåˆ†é…å‡ºå»çš„å†…å­˜ç‰‡ã€‚\nfree_element_ è®°å½•æœªè¢«åˆ†é…å‡ºå»çš„å†…å­˜ç‰‡ã€‚\n\nMemoryPoolå®ç°ä»£ç ä¸‹é¢æ˜¯å®Œæ•´çš„å†…å­˜æ± å®ç°çš„ä»£ç ï¼Œä»£ç ä¸­ä½¿ç”¨äº† std::mutex ç­‰ C++11 æ‰æ”¯æŒçš„ç‰¹æ€§ï¼Œæ‰€ä»¥éœ€è¦ç¼–è¯‘å™¨æœ€ä½æ”¯æŒ C++11ã€‚\n/* MemoryPool.hpp */#ifndef MEMORY_POOL_H_#define MEMORY_POOL_H_#include &lt;climits&gt;#include &lt;cstddef&gt;#include &lt;mutex&gt;template &lt;typename T, size_t BlockSize = 4096, bool ZeroOnDeallocate = true&gt;class MemoryPool &#123;public:    /* Member types */    typedef T               value_type;    typedef T*              pointer;    typedef T&amp;              reference;    typedef const T*        const_pointer;    typedef const T&amp;        const_reference;    typedef size_t          size_type;    typedef ptrdiff_t       difference_type;    typedef std::false_type propagate_on_container_copy_assignment;    typedef std::true_type  propagate_on_container_move_assignment;    typedef std::true_type  propagate_on_container_swap;    template &lt;typename U&gt; struct rebind &#123;        typedef MemoryPool&lt;U&gt; other;    &#125;;    /* Member functions */    MemoryPool() noexcept;    MemoryPool(const MemoryPool&amp; memoryPool) noexcept;    MemoryPool(MemoryPool&amp;&amp; memoryPool) noexcept;    template &lt;class U&gt; MemoryPool(const MemoryPool&lt;U&gt;&amp; memoryPool) noexcept;    ~MemoryPool() noexcept;    MemoryPool&amp; operator=(const MemoryPool&amp; memoryPool) = delete;    MemoryPool&amp; operator=(MemoryPool&amp;&amp; memoryPool) noexcept;    pointer address(reference x) const noexcept;    const_pointer address(const_reference x) const noexcept;    // Can only allocate one object at a time. n and hint are ignored    pointer allocate(size_type n = 1, const_pointer hint = 0);    void deallocate(pointer p, size_type n = 1);    size_type max_size() const noexcept;    template &lt;class U, class... Args&gt; void construct(U* p, Args&amp;&amp;... args);    template &lt;class U&gt; void destroy(U* p);    template &lt;class... Args&gt; pointer newElement(Args&amp;&amp;... args);    void deleteElement(pointer p);private:    struct Element_ &#123;        Element_* pre;        Element_* next;    &#125;;    typedef char* data_pointer;    typedef Element_ element_type;    typedef Element_* element_pointer;    element_pointer data_element_;    element_pointer free_element_;    std::recursive_mutex m_;    size_type padPointer(data_pointer p, size_type align) const noexcept;    void allocateBlock();    static_assert(BlockSize &gt;= 2 * sizeof(element_type), &quot;BlockSize too small.&quot;);&#125;;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;inline typename MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::size_type    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::padPointer(data_pointer p, size_type align)    const noexcept &#123;    uintptr_t result = reinterpret_cast&lt;uintptr_t&gt;(p);    return ((align - result) % align);&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::MemoryPool()    noexcept &#123;    data_element_ = nullptr;    free_element_ = nullptr;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::MemoryPool(const MemoryPool&amp; memoryPool)    noexcept :    MemoryPool() &#123;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::MemoryPool(MemoryPool&amp;&amp; memoryPool)    noexcept &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    data_element_ = memoryPool.data_element_;    memoryPool.data_element_ = nullptr;    free_element_ = memoryPool.free_element_;    memoryPool.free_element_ = nullptr;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;template&lt;class U&gt;MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::MemoryPool(const MemoryPool&lt;U&gt;&amp; memoryPool)    noexcept :    MemoryPool() &#123;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;&amp;    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::operator=(MemoryPool&amp;&amp; memoryPool)    noexcept &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    if (this != &amp;memoryPool) &#123;        std::swap(data_element_, memoryPool.data_element_);        std::swap(free_element_, memoryPool.free_element_);    &#125;    return *this;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::~MemoryPool()    noexcept &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    element_pointer curr = data_element_;    while (curr != nullptr) &#123;        element_pointer prev = curr-&gt;next;        operator delete(reinterpret_cast&lt;void*&gt;(curr));        curr = prev;    &#125;    curr = free_element_;    while (curr != nullptr) &#123;        element_pointer prev = curr-&gt;next;        operator delete(reinterpret_cast&lt;void*&gt;(curr));        curr = prev;    &#125;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;inline typename MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::pointer    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::address(reference x)    const noexcept &#123;    return &amp;x;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;inline typename MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::const_pointer    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::address(const_reference x)    const noexcept &#123;    return &amp;x;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;void    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::allocateBlock() &#123;    // Allocate space for the new block and store a pointer to the previous one    data_pointer new_block = reinterpret_cast&lt;data_pointer&gt; (operator new(BlockSize));    element_pointer new_ele_pointer = reinterpret_cast&lt;element_pointer&gt;(new_block);    new_ele_pointer-&gt;pre = nullptr;    new_ele_pointer-&gt;next = nullptr;    if (data_element_) &#123;        data_element_-&gt;pre = new_ele_pointer;    &#125;    new_ele_pointer-&gt;next = data_element_;    data_element_ = new_ele_pointer;&#125;template &lt;typename T, size_t BlockSize,  bool ZeroOnDeallocate&gt;inline typename MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::pointer    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::allocate(size_type n, const_pointer hint) &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    if (free_element_ != nullptr) &#123;        data_pointer body =            reinterpret_cast&lt;data_pointer&gt;(reinterpret_cast&lt;data_pointer&gt;(free_element_) + sizeof(element_type));        size_type bodyPadding = padPointer(body, alignof(element_type));        pointer result = reinterpret_cast&lt;pointer&gt;(reinterpret_cast&lt;data_pointer&gt;(body + bodyPadding));        element_pointer tmp = free_element_;        free_element_ = free_element_-&gt;next;        if (free_element_)            free_element_-&gt;pre = nullptr;        tmp-&gt;next = data_element_;        if (data_element_)            data_element_-&gt;pre = tmp;        tmp-&gt;pre = nullptr;        data_element_ = tmp;        return result;    &#125;    else &#123;        allocateBlock();        data_pointer body =            reinterpret_cast&lt;data_pointer&gt;(reinterpret_cast&lt;data_pointer&gt;(data_element_) + sizeof(element_type));        size_type bodyPadding = padPointer(body, alignof(element_type));        pointer result = reinterpret_cast&lt;pointer&gt;(reinterpret_cast&lt;data_pointer&gt;(body + bodyPadding));        return result;    &#125;&#125;template &lt;typename T, size_t BlockSize, bool ZeroOnDeallocate&gt;inline void    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::deallocate(pointer p, size_type n) &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    if (p != nullptr) &#123;        element_pointer ele_p =            reinterpret_cast&lt;element_pointer&gt;(reinterpret_cast&lt;data_pointer&gt;(p) - sizeof(element_type));        if (ZeroOnDeallocate) &#123;            memset(reinterpret_cast&lt;data_pointer&gt;(p), 0, BlockSize - sizeof(element_type));        &#125;        if (ele_p-&gt;pre) &#123;            ele_p-&gt;pre-&gt;next = ele_p-&gt;next;        &#125;        if (ele_p-&gt;next) &#123;            ele_p-&gt;next-&gt;pre = ele_p-&gt;pre;        &#125;        if (ele_p-&gt;pre == nullptr) &#123;            data_element_ = ele_p-&gt;next;        &#125;        ele_p-&gt;pre = nullptr;        if (free_element_) &#123;            ele_p-&gt;next = free_element_;            free_element_-&gt;pre = ele_p;        &#125;        else &#123;            ele_p-&gt;next = nullptr;        &#125;        free_element_ = ele_p;    &#125;&#125;template &lt;typename T, size_t BlockSize, bool ZeroOnDeallocate&gt;inline typename MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::size_type    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::max_size()    const noexcept &#123;    size_type maxBlocks = -1 / BlockSize;    return (BlockSize - sizeof(data_pointer)) / sizeof(element_type) * maxBlocks;&#125;template &lt;typename T, size_t BlockSize, bool ZeroOnDeallocate&gt;template &lt;class U, class... Args&gt;inline void    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::construct(U* p, Args&amp;&amp;... args) &#123;    new (p) U(std::forward&lt;Args&gt;(args)...);&#125;template &lt;typename T, size_t BlockSize, bool ZeroOnDeallocate&gt;template &lt;class U&gt;inline void    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::destroy(U* p) &#123;    p-&gt;~U();&#125;template &lt;typename T, size_t BlockSize, bool ZeroOnDeallocate&gt;template &lt;class... Args&gt;inline typename MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::pointer    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::newElement(Args&amp;&amp;... args) &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    pointer result = allocate();    construct&lt;value_type&gt;(result, std::forward&lt;Args&gt;(args)...);    return result;&#125;template &lt;typename T, size_t BlockSize, bool ZeroOnDeallocate&gt;inline void    MemoryPool&lt;T, BlockSize, ZeroOnDeallocate&gt;::deleteElement(pointer p) &#123;    std::lock_guard&lt;std::recursive_mutex&gt; lock(m_);    if (p != nullptr) &#123;        p-&gt;~value_type();        deallocate(p);    &#125;&#125;#endif\n\nä½¿ç”¨ç¤ºä¾‹#include &quot;MemoryPool.hpp&quot;#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;assert.h&gt;using namespace std;class Apple &#123;public:    Apple() &#123;        id_ = 0;        cout &lt;&lt; &quot;Apple()&quot; &lt;&lt; endl;    &#125;    Apple(int id) &#123;        id_ = id;        cout &lt;&lt; &quot;Apple(&quot; &lt;&lt; id_ &lt;&lt; &quot;)&quot; &lt;&lt; endl;    &#125;    ~Apple() &#123;        cout &lt;&lt; &quot;~Apple()&quot; &lt;&lt; endl;    &#125;    void SetId(int id) &#123;        id_ = id;    &#125;    int GetId() &#123;        return id_;    &#125;private:    int id_;&#125;;void ThreadProc(MemoryPool&lt;char&gt; *mp) &#123;    int i = 0;    while (i++ &lt; 100000) &#123;        char* p0 = (char*)mp-&gt;allocate();        char* p1 = (char*)mp-&gt;allocate();        mp-&gt;deallocate(p0);        char* p2 = (char*)mp-&gt;allocate();        mp-&gt;deallocate(p1);        mp-&gt;deallocate(p2);    &#125;&#125;int main()&#123;    MemoryPool&lt;char&gt; mp;    int i = 0;    while (i++ &lt; 100000) &#123;        char* p0 = (char*)mp.allocate();        char* p1 = (char*)mp.allocate();        mp.deallocate(p0);        char* p2 = (char*)mp.allocate();        mp.deallocate(p1);        mp.deallocate(p2);    &#125;    std::thread th0(ThreadProc, &amp;mp);    std::thread th1(ThreadProc, &amp;mp);    std::thread th2(ThreadProc, &amp;mp);    th0.join();    th1.join();    th2.join();    Apple* apple = nullptr;    MemoryPool&lt;Apple&gt; mp2;    apple = mp2.newElement(10);    assert(apple);    int a = apple-&gt;GetId(); // 10    assert(a == 10);    apple-&gt;SetId(12);    mp2.deleteElement(apple);    return 0;&#125;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++ç¼–è¯‘æ—¶æ–­è¨€","url":"/post/4155207961.html","content":"C++è‡ª C++11 èµ·æ”¯æŒ static_assert ç¼–è¯‘æ—¶æ–­è¨€ï¼Œå¦‚ï¼š\nstatic_assert ( bool_constexpr , message )\t\t(C++11 èµ·)static_assert ( bool_constexpr )\t\t(C++17 èµ·)\n\nå¦‚æœç¼–è¯‘å™¨ä¸æ”¯æŒ C++11ï¼ˆç»æµ‹è¯• VS2010 å·²ç»æ”¯æŒstatic_assertï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼æ¥å®ç°ç¼–è¯‘æ–­è¨€ï¼š\n#define COMPILE_ASSERT(expression) switch (0) &#123;case 0: case expression:;&#125;\n\nä½¿ç”¨æ–¹æ³•ï¼š\nCOMPILE_ASSERT(1 != 1);\n\nä¸Šè¿°æ–¹å¼è™½ç„¶èƒ½å®ç°ç¼–è¯‘æ–­è¨€ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š\n\né”™è¯¯æç¤ºä¿¡æ¯çš„å¯è¯»æ€§è¾ƒå·®ï¼›\nè¡¨è¾¾å¼å¿…é¡»æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸå¸¸é‡è¡¨è¾¾å¼ï¼›\næ— æ³•ä½¿ç”¨åœ¨æ¨¡æ¿å…ƒç¼–ç¨‹ä¸­ã€‚\n\nå¼ºçƒˆå»ºè®®æ‹¥æŠ±æ–°æ ‡å‡†ï¼Œä½¿ç”¨ static_assertï¼Œåšä¸€ä¸ªå¼€å¿ƒçš„äººï¼\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++å³å€¼","url":"/post/1144324523.html","content":"åœ¨C++98æ—¶ä»£ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æ€§èƒ½ç“¶é¢ˆï¼šå½“éœ€è¦è¿”å›æˆ–ä¼ é€’å¤§å‹å¯¹è±¡ï¼ˆå¦‚å­—ç¬¦ä¸²ã€å‘é‡æˆ–è‡ªå®šä¹‰èµ„æºç®¡ç†ç±»ï¼‰æ—¶ï¼Œä¸å¾—ä¸è¿›è¡Œæ˜‚è´µçš„æ·±æ‹·è´æ“ä½œã€‚å³ä½¿æˆ‘ä»¬çŸ¥é“æŸäº›å¯¹è±¡å³å°†è¢«é”€æ¯ï¼Œä¹Ÿæ— æ³•é¿å…è¿™ç§æ‹·è´å¼€é”€ã€‚\nC++11å¼•å…¥çš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰å½»åº•æ”¹å˜äº†è¿™ä¸€å±€é¢ï¼Œè®©C++ç¨‹åºå‘˜èƒ½å¤Ÿå†™å‡ºæ›´é«˜æ•ˆã€æ›´ç°ä»£çš„ä»£ç ã€‚\n\n\nåŸºç¡€æ¦‚å¿µ - å·¦å€¼ä¸å³å€¼å·¦å€¼ï¼ˆlvalueï¼‰â€‹â€‹ æ˜¯æŒ‡å…·æœ‰æŒä¹…çŠ¶æ€çš„è¡¨è¾¾å¼ï¼Œç®€å•è¯´å°±æ˜¯æœ‰åå­—ã€æœ‰å†…å­˜åœ°å€çš„å¯¹è±¡ã€‚\nint a = 10;           // aæ˜¯å·¦å€¼int* ptr = &amp;a;        // å¯ä»¥å–åœ°å€ï¼Œæ˜¯å·¦å€¼çš„ç‰¹å¾std::string s = &quot;hello&quot;;  // sæ˜¯å·¦å€¼std::string&amp; ref = s;     // å¯ä»¥ç»‘å®šåˆ°å·¦å€¼å¼•ç”¨\n\nå³å€¼ï¼ˆrvalueï¼‰â€‹â€‹ æ˜¯æŒ‡ä¸´æ—¶æ€§çš„è¡¨è¾¾å¼ï¼Œé€šå¸¸æ˜¯çŸ­æš‚å­˜åœ¨çš„ä¸­é—´ç»“æœã€‚\nint result = 3 + 4;    // 3+4æ˜¯å³å€¼ï¼ˆè®¡ç®—ç»“æœï¼‰std::string getString() &#123; return &quot;temp&quot;; &#125;std::string s = getString(); // getString()è¿”å›å€¼æ˜¯å³å€¼int x = 10;           // 10æ˜¯å³å€¼ï¼ˆå­—é¢é‡ï¼‰\n\né—®é¢˜æ ¹æº - ä¸å¿…è¦çš„æ‹·è´class MyVector &#123;    int* data;    size_t size;public:    // æ‹·è´æ„é€ å‡½æ•° (æ·±æ‹·è´)    MyVector(const MyVector&amp; other) : size(other.size) &#123;        data = new int[size];        std::copy(other.data, other.data + size, data);        std::cout &lt;&lt; &quot;æ·±æ‹·è´å‘ç”Ÿï¼æˆæœ¬: &quot; &lt;&lt; size * sizeof(int) &lt;&lt; &quot; å­—èŠ‚\\n&quot;;    &#125;&#125;;MyVector createLargeVector() &#123;    MyVector vec(1000000); // åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ç™¾ä¸‡ä¸ªæ•´æ•°çš„å‘é‡    // ... å¡«å…… vec ...    return vec; // è¿”å›æ—¶ï¼Œç†è®ºä¸Š vec å³å°†é”€æ¯&#125;int main() &#123;    MyVector v = createLargeVector(); // C++98: è§¦å‘æ·±æ‹·è´ï¼æ‹·è´ä¸€ç™¾ä¸‡æ•´æ•°ï¼&#125;\n\nåœ¨ createLargeVector()è¿”å›æ—¶ï¼Œvecæ˜¯ä¸€ä¸ªå³å°†è¢«é”€æ¯çš„å±€éƒ¨å¯¹è±¡ï¼ˆæœ¬è´¨ä¸Šæ˜¯å³å€¼ï¼‰ã€‚å®ƒçš„å†…éƒ¨èµ„æºï¼ˆé‚£ä¸ªåŒ…å«ä¸€ç™¾ä¸‡ä¸ªæ•´æ•°çš„æ•°ç»„ï¼‰åœ¨ vecææ„æ—¶ä¼šè¢«é‡Šæ”¾æ‰ã€‚ç„¶è€Œï¼Œåœ¨ mainå‡½æ•°ä¸­æ„é€  væ—¶ï¼Œæˆ‘ä»¬å´ä¸å¾—ä¸è¿›è¡Œä»£ä»·é«˜æ˜‚çš„æ·±æ‹·è´ï¼Œå°†è¿™ä¸€ç™¾ä¸‡ä¸ªæ•´æ•°å®Œæ•´åœ°å¤åˆ¶ä¸€ä»½ã€‚è¿™é€ æˆäº†åŒé‡æµªè´¹ï¼š\n\næ·±æ‹·è´æœ¬èº«æ¶ˆè€—å¤§é‡ CPU æ—¶é—´å’Œå†…å­˜å¸¦å®½ã€‚\nvecå†…éƒ¨çš„èµ„æºæœ€ç»ˆä¼šè¢«é”€æ¯ï¼Œæˆ‘ä»¬æœ¬å¯ä»¥â€œç›´æ¥æ‹¿æ¥â€ç»™ vç”¨ï¼Œå´é€‰æ‹©äº†å¤åˆ¶ä¸€ä»½ç„¶åé”€æ¯åŸç‰ˆã€‚\n\næ³¨æ„ï¼šç”±äºç°ä»£ç¼–è¯‘å™¨çš„è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰åŠŸèƒ½ï¼Œä¸Šè¿°ç¤ºä¾‹æ— æ³•æŒ‰ç…§æœŸæœ›è¿è¡Œï¼Œå¯ä»¥å°è¯•ç¦ç”¨ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n\nè¿”å›å€¼ä¼˜åŒ–ï¼ˆReturn Value Optimization, RVOï¼‰â€‹â€‹ æ˜¯ C++ ç¼–è¯‘å™¨çš„ä¸€é¡¹ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒå…è®¸ç¼–è¯‘å™¨åœ¨è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡æ—¶ï¼Œé¿å…æ‰§è¡Œä¸å¿…è¦çš„æ‹·è´ï¼ˆæˆ–ç§»åŠ¨ï¼‰æ„é€ å‡½æ•°ï¼Œä»è€Œç›´æ¥å°†å¯¹è±¡æ„é€ åœ¨å‡½æ•°å¤–éƒ¨çš„ç›®æ ‡å†…å­˜ä½ç½®ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæ¶ˆé™¤äº†å‡½æ•°è¿”å›æ—¶äº§ç”Ÿçš„ä¸´æ—¶å¯¹è±¡ã€‚\n\nè§£å†³æ–¹æ¡ˆ - å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰C++11å¼•å…¥äº†å³å€¼å¼•ç”¨ï¼Œè¯­æ³•ä¸ºT&amp;&amp;ï¼Œå®ƒä¸“é—¨ç”¨äºç»‘å®šåˆ°å³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ï¼‰ã€‚\nint&amp;&amp; rref = 10 + 20;        // å³å€¼å¼•ç”¨ç»‘å®šåˆ°ä¸´æ—¶ç»“æœstd::string&amp;&amp; sref = getString(); // ç»‘å®šåˆ°å‡½æ•°è¿”å›çš„ä¸´æ—¶å¯¹è±¡\n\næœ‰äº†å³å€¼å¼•ç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ä¸Šè¿°MyVectorç±»è¿›è¡Œæ”¹é€ ï¼Œä½¿å…¶æ”¯æŒç§»åŠ¨è¯­ä¹‰â€‹ã€‚\nMyVector(MyVector&amp;&amp; other) noexcept    : data_(other.data_), size_(other.size_) &#123;  other.data_ = nullptr;  other.size_ = 0;  std::cout &lt;&lt; &quot;ç§»åŠ¨æ„é€ å‘ç”Ÿï¼æˆæœ¬: 0 å­—èŠ‚\\n&quot;;&#125;MyVector&amp; operator=(MyVector&amp;&amp; other) noexcept &#123;  if (this != &amp;other) &#123;    delete[] data_;    data_ = other.data_;    size_ = other.size_;    other.data_ = nullptr;    other.size_ = 0;    std::cout &lt;&lt; &quot;ç§»åŠ¨èµ‹å€¼å‘ç”Ÿï¼æˆæœ¬: 0 å­—èŠ‚\\n&quot;;  &#125;  return *this;&#125;\n\nå¯¹äºæ²¡æœ‰å®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦çš„ç±»ä½¿ç”¨std::moveï¼Œä¼šè‡ªåŠ¨å›é€€åˆ°ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼Œè€Œå¦‚æœæ‹·è´æ„é€ å‡½æ•°æˆ–æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ä¹Ÿæ²¡å®šä¹‰ï¼Œåˆ™ä¼šç¼–è¯‘é”™è¯¯ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¦‚æœç±»æˆå‘˜æ˜¯å†…ç½®ç±»å‹ (int, double, æŒ‡é’ˆç­‰)ã€æ”¯æŒç§»åŠ¨çš„ç±»å‹ï¼ˆå¦‚std::stringã€std::vectorç­‰ï¼‰,æ— éœ€è‡ªå®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ”¯æŒç§»åŠ¨æ“ä½œã€‚ï¼ˆè§ä¸‹é¢çš„Rule of Zeroï¼‰\nåŸºæœ¬åŸåˆ™Rule of Zeroé›¶æ³•åˆ™ï¼Œåœ¨ç°ä»£C++ä¸­ï¼Œé¼“åŠ±é€šè¿‡ä½¿ç”¨æ ‡å‡†åº“å®¹å™¨ (std::vector, std::string) ã€æ™ºèƒ½æŒ‡é’ˆ (std::unique_ptr, std::shared_ptr)ç­‰æ ‡å‡†åº“æä¾›çš„å·¥å…·æ¥ç®¡ç†èµ„æºï¼Œä»è€Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ææ„å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆC++11çš„â€œä¸‰ä¸ªå¤§â€ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æä¾›çš„é»˜è®¤ç‰ˆæœ¬å·²ç»è¶³å¤Ÿä¸”æ­£ç¡®ã€‚è¿™ç§æ–¹æ³•ä¸ä»…ç®€åŒ–äº†ä»£ç ï¼Œè¿˜èƒ½æœ‰æ•ˆé™ä½å‡ºé”™çš„å¯èƒ½æ€§ã€‚\nRule of Fiveå¦‚æœä¸€ä¸ªç±»éœ€è¦è‡ªå®šä¹‰å®ç°ä»¥ä¸‹äº”ä¸ªç‰¹æ®Šæˆå‘˜å‡½æ•°ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œé‚£ä¹ˆå®ƒä¹Ÿéœ€è¦ä¸ºè¿™äº”ä¸ªå‡½æ•°éƒ½æä¾›è‡ªå®šä¹‰å®ç°ï¼Œä»¥ç¡®ä¿èµ„æºç®¡ç†çš„æ­£ç¡®æ€§å’Œè¡Œä¸ºçš„ä¸€è‡´æ€§ã€‚\n\nææ„å‡½æ•°\næ‹·è´æ„é€ å‡½æ•°\næ‹·è´èµ‹å€¼è¿ç®—ç¬¦\nç§»åŠ¨æ„é€ å‡½æ•°\nç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦\n\nC++ ç¼–è¯‘å™¨æœ‰ä¸€å¥—æ˜ç¡®çš„è§„åˆ™æ¥å†³å®šä½•æ—¶è‡ªåŠ¨ç”Ÿæˆç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆæ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼ã€ç§»åŠ¨æ„é€ ã€ç§»åŠ¨èµ‹å€¼ã€ææ„ï¼‰ï¼š\n\n\n\nç±»ä¸­å£°æ˜çš„æˆå‘˜å‡½æ•°\nç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°\n\n\n\næ— ç‰¹æ®Šæˆå‘˜å‡½æ•°\næ‰€æœ‰ï¼šæ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼ã€ç§»åŠ¨æ„é€ ã€ç§»åŠ¨èµ‹å€¼ã€ææ„\n\n\næœ‰ææ„å‡½æ•°\næ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼ï¼ˆä¸ç”Ÿæˆç§»åŠ¨æ“ä½œï¼‰\n\n\næœ‰æ‹·è´æ„é€ æˆ–æ‹·è´èµ‹å€¼\nææ„ï¼ˆä¸ç”Ÿæˆç§»åŠ¨æ“ä½œï¼‰\n\n\næœ‰ç§»åŠ¨æ„é€ æˆ–ç§»åŠ¨èµ‹å€¼\nä¸ç”Ÿæˆæ‹·è´æ“ä½œâ€‹ï¼ˆæ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼è¢«åˆ é™¤ï¼‰\n\n\nstd::movestd::moveå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªé™æ€ç±»å‹è½¬æ¢â€‹ï¼š\ntemplate &lt;typename T&gt;decltype(auto) move(T&amp;&amp; param) &#123;    return static_cast&lt;std::remove_reference_t&lt;T&gt;&amp;&amp;&gt;(param);&#125;\n\nå®ƒçš„å”¯ä¸€ä½œç”¨æ˜¯å°†è¡¨è¾¾å¼è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ç±»å‹ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«è§†ä¸ºä¸´æ—¶å¯¹è±¡ï¼Œå…è®¸ç§»åŠ¨å…¶èµ„æºâ€ã€‚\nå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œä½¿ç”¨ std::move ä»ç„¶æœ‰æ•ˆï¼Œä½†è¡Œä¸ºä¼šæœ‰æ‰€ä¸åŒï¼š\n\nå¦‚æœç±»æœ‰æ‹·è´æ“ä½œï¼šç¼–è¯‘å™¨ä¼šé€€å›åˆ°æ‹·è´æ„é€ å‡½æ•°ï¼Œå› ä¸ºå³å€¼å¼•ç”¨å¯ä»¥ç»‘å®šåˆ°const T&amp;å‚æ•°ã€‚\nå¦‚æœç±»æ²¡æœ‰æ‹·è´æ“ä½œï¼šå¦‚æœæ»¡è¶³è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ“ä½œï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ç§»åŠ¨æ“ä½œï¼Œå¦åˆ™ä»£ç æ— æ³•ç¼–è¯‘ã€‚\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++æ™ºèƒ½æŒ‡é’ˆ","url":"/post/2579659560.html","content":"C++ä»C++11å¼€å§‹å¼•å…¥äº†æ™ºèƒ½æŒ‡é’ˆï¼ˆstd::unique_ptrã€std::shared_ptrã€std::weak_ptrï¼‰ï¼Œå¹¶åé¢çš„å„ä¸ªç‰ˆæœ¬ä¸­å¯¹æ™ºèƒ½æŒ‡é’ˆè¿›è¡Œäº†æ”¹è¿›ã€‚\n\n\nunique_ptrunique_pträ¸ºç‹¬å æ‰€æœ‰æƒçš„æ™ºèƒ½æŒ‡é’ˆï¼Œä¸å…è®¸æ‹·è´æ„é€ å’Œèµ‹å€¼æ„é€ ï¼Œä»…æ”¯æŒstd::moveç§»åŠ¨ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä»C++14 èµ·æ”¯æŒä½¿ç”¨ std::make_unique æ–¹å¼æ„é€  unique_ptrï¼Œæ¨èä½¿ç”¨std::make_unique æ–¹å¼ã€‚\n#include &lt;memory&gt;using namespace std;unique_ptr&lt;Foo&gt; up1(new Foo());unique_ptr&lt;Foo&gt; up2 = make_unique&lt;Foo&gt;(); // C++14 èµ·æ”¯æŒ make_uniqueunique_ptr&lt;Foo&gt; up3 = std::move(up1); // ç§»åŠ¨åï¼Œup1ä¸ºnullptrunique_ptr&lt;Foo&gt; up4 = up3; // ä¸å…è®¸æ‹·è´ï¼Œç¼–è¯‘é”™è¯¯unique_ptr&lt;Foo&gt; up5(up1); // ä¸å…è®¸æ‹·è´ï¼Œç¼–è¯‘é”™è¯¯// ä½¿ç”¨ get æ–¹æ³•è·å–åŸå§‹æŒ‡é’ˆFoo* f1 = up1.get(); // å› ä¸ºup1ä¸ºç©ºï¼Œæ‰€ä»¥è·å–åˆ°çš„åŸå§‹æŒ‡é’ˆä¹Ÿä¸ºç©ºFoo* f2 = up2.get();\n\n\nåˆ é™¤å™¨std::unique_ptrçš„é»˜è®¤è¡Œä¸ºæ˜¯ä½¿ç”¨ delete æˆ– delete[] æ¥é‡Šæ”¾å…¶ç®¡ç†çš„èµ„æºã€‚ä½†å½“ä½ éœ€è¦ç®¡ç†éä¼ ç»Ÿèµ„æºâ€‹ï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€æ•°æ®åº“è¿æ¥ï¼‰æˆ–éœ€è¦ç‰¹æ®Šçš„é‡Šæ”¾é€»è¾‘æ—¶ï¼Œè‡ªå®šä¹‰åˆ é™¤å™¨å°±å˜å¾—è‡³å…³é‡è¦ã€‚\n_EXPORT_STD template &lt;class _Ty, class _Dx /* = default_delete&lt;_Ty&gt; */&gt;class unique_ptr &#123; // non-copyable pointer to an object...&#125;;\n\nä»ä¸Šé¢çš„unique_ptræ¨¡æ¿ç±»çš„å®šä¹‰å¯ä»¥çŸ¥é“ï¼Œéœ€è¦é€šè¿‡æ¨¡æ¿çš„ç¬¬äºŒä¸ªå‚æ•° _Dx æ¥æŒ‡å®šè‡ªå®šä¹‰çš„åˆ é™¤å™¨ã€‚unique_ptrçš„åˆ é™¤å™¨é€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šï¼Œåœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯é€šå¸¸æ²¡æœ‰é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ï¼Œä½†çµæ´»æ€§è¾ƒå·®ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;unique_ptrçš„åˆ é™¤å™¨å¯ä»¥æœ‰å¤šç§æŒ‡å®šæ–¹å¼ï¼Œå¦‚å‡½æ•°å¯¹è±¡ã€å‡½æ•°æŒ‡é’ˆã€std::functionã€lamada è¡¨è¾¾å¼ã€‚\n#include &lt;iostream&gt;#include &lt;memory&gt;#include &lt;functional&gt;using namespace std;struct FileCloser &#123;  void operator()(std::FILE* fp) const &#123;    if (fp) &#123;      std::fclose(fp);      std::cout &lt;&lt; &quot;File closed.&quot; &lt;&lt; std::endl;    &#125;  &#125;&#125;;void customFileCloser(std::FILE* fp) &#123;  if (fp) &#123;    std::fclose(fp);    std::cout &lt;&lt; &quot;File closed.&quot; &lt;&lt; std::endl;  &#125;&#125;int main() &#123;  std::FILE* fp = std::fopen(&quot;test.txt&quot;, &quot;w&quot;);  // å‡½æ•°å¯¹è±¡æ–¹å¼ï¼Œå‡½æ•°å¯¹è±¡å°±æ˜¯ä¸€ä¸ªé‡è½½äº† operator()çš„ç±»æˆ–ç»“æ„ä½“  unique_ptr&lt;std::FILE, FileCloser&gt; up1(fp);  // Lamadaæ–¹å¼ï¼Œéœ€è¦ç»“åˆ decltypeæ¥è·å– Lambda çš„ç±»å‹  auto lamadaCloser = [](std::FILE* fp) &#123;    if (fp) &#123;      std::fclose(fp);      std::cout &lt;&lt; &quot;File closed.&quot; &lt;&lt; std::endl;    &#125;  &#125;;  unique_ptr&lt;std::FILE, decltype(lamadaCloser)&gt; up2(fp, lamadaCloser);  // std::function æ–¹å¼  unique_ptr&lt;std::FILE, std::function&lt;void(std::FILE*)&gt;&gt; up3(fp, customFileCloser);  // å‡½æ•°æŒ‡é’ˆæ–¹å¼  unique_ptr&lt;std::FILE, void (*)(std::FILE*)&gt; up4(fp, customFileCloser);&#125;\n\n\nshared_ptrstd::shared_ptr åŸºäºå¼•ç”¨è®¡æ•°ï¼Œå…è®¸å¤šä¸ª shared_ptr å…±äº«åŒä¸€å¯¹è±¡çš„æ‰€æœ‰æƒã€‚æ¯å½“ä¸€ä¸ª shared_ptr è¢«æ‹·è´æ—¶ï¼Œå¼•ç”¨è®¡æ•°åŠ  1ï¼ˆå¯ä»¥ä½¿ç”¨use_countæˆå‘˜å‡½æ•°è·å–å¼•ç”¨è®¡æ•°ï¼‰ã€‚æ¯å½“ä¸€ä¸ª shared_ptr è¢«é”€æ¯æˆ–é‡ç½®æ—¶ï¼Œå¼•ç”¨è®¡æ•°å°±ä¼šå‡ 1ã€‚å½“å¼•ç”¨è®¡æ•°é™ä¸º 0 æ—¶ï¼Œæ‰€ç®¡ç†çš„å¯¹è±¡ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚\n // è‹¥åœ¨ new å’Œ shared_ptræ„é€ é—´å‘ç”Ÿå¼‚å¸¸ï¼Œå¯èƒ½å‡ºç°å†…å­˜æ³„æ¼shared_ptr&lt;Foo&gt; sp1(new Foo());// æ¨èä½¿ç”¨ make_sharedï¼Œåœ¨ä¸€è¡Œä»£ç ä¸­åˆ†é…å†…å­˜ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ›´å®‰å…¨shared_ptr&lt;Foo&gt; sp2 = make_shared&lt;Foo&gt;(); Foo* p = sp2.get(); // è·å–æºæŒ‡é’ˆsp1.reset(); // å°†sp1ç½®ä¸ºç©ºï¼Œsp1.use_countä¸º0ï¼Œä½†èµ„æºçš„æ€»å¼•ç”¨è®¡æ•°åªä¼šå‡1ï¼Œæ­¤æ—¶ç®¡ç†çš„Fooä¸ä¸€å®šä¼šè¢«é‡Šæ”¾ï¼Œå–å†³äºæ€»å¼•ç”¨è®¡æ•°æ˜¯å¦å‡åˆ°0äº†sp2.reset(new Foo()); // é‡Šæ”¾æ—§å¯¹è±¡ï¼Œå¹¶æ¥ç®¡æ–°å¯¹è±¡çš„æ‰€æœ‰æƒ\n\nåªæœ‰åœ¨éœ€è¦è‡ªå®šä¹‰åˆ é™¤å™¨ã€å¯¹å†…å­˜é‡Šæ”¾æ—¶æœºæœ‰æå…¶è‹›åˆ»çš„è¦æ±‚ã€å¤„ç†ç§æœ‰æ„é€ å‡½æ•°æˆ–å¿…é¡»ä½¿ç”¨èŠ±æ‹¬å·åˆå§‹åŒ–åˆ—è¡¨è¿™äº›å°‘æ•°ç‰¹å®šåœºæ™¯ä¸‹ï¼Œæ‰è€ƒè™‘ç›´æ¥ä½¿ç”¨ newæ¥æ„é€  std::shared_ptrã€‚\næ‹·è´æ”¯æŒæ‹·è´å’Œç§»åŠ¨ï¼Œæ¯æ‹·è´ä¸€æ¬¡ï¼Œå¼•ç”¨è®¡æ•°åŠ  1ï¼š\nshared_ptr&lt;Foo&gt; sp3 = sp1;  // sp1å’Œsp3å…±äº«æ‰€æœ‰æƒï¼Œå¼•ç”¨è®¡æ•°åŠ 1\n\nç§»åŠ¨æ”¯æŒä½¿ç”¨ std::move è¿›è¡Œæ‰€æœ‰æƒç§»åŠ¨ï¼Œç§»åŠ¨åï¼Œæº shared_ptr å˜ä¸º nullptrï¼Œä½†æ–°shared_ptrçš„â€‹å¼•ç”¨è®¡æ•°ä¸ä¹‹å‰ä¸€æ ·ï¼š\ncout &lt;&lt; &quot;sp3 use_count: &quot; &lt;&lt; sp3.use_count() &lt;&lt; endl;    // 2auto sp4 = std::move(sp3);// è½¬ç§»æ‰€æœ‰æƒï¼Œsp3 å˜ä¸ºç©ºï¼Œå¼•ç”¨è®¡æ•°ä¸å˜cout &lt;&lt; std::boolalpha &lt;&lt; !!sp3 &lt;&lt; &quot;,&quot; &lt;&lt; !!sp4 &lt;&lt; endl; // false, truecout &lt;&lt; &quot;sp4 use_count: &quot; &lt;&lt; sp4.use_count() &lt;&lt; endl;     // 2\n\nåˆ é™¤å™¨å½“éœ€è¦è‡ªå®šä¹‰åˆ é™¤å™¨æ—¶ï¼Œåªèƒ½ä½¿ç”¨ new æ¥æ„é€ shared_ptrï¼Œä¸èƒ½ä½¿ç”¨ make_sharedã€‚\nshared_ptr çš„åˆ é™¤å™¨ä¸unique_pträ¸åŒï¼Œå…¶ä¸æ˜¯é€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šçš„ï¼Œè€Œæ˜¯é€šè¿‡å‡½æ•°å‚æ•°æŒ‡å®šçš„ï¼Œå› æ­¤æ˜¯è¿è¡Œæ—¶åŠ¨æ€å­˜å‚¨çš„ï¼Œè™½ç„¶çµæ´»æ€§è¾ƒé«˜ï¼Œä½†æ€§èƒ½ä¼šæœ‰è½»å¾®å½±å“ã€‚\nshared_ptr çš„åˆ é™¤å™¨æ”¯æŒå‡½æ•°å¯¹è±¡ã€lamadaè¡¨è¾¾å¼ã€å‡½æ•°æŒ‡é’ˆç­‰å½¢å¼ï¼Œé€šè¿‡ç¬¬2ä¸ªå‚æ•°æŒ‡å®šã€‚\nstd::FILE* fp = std::fopen(&quot;test.txt&quot;, &quot;w&quot;);auto lamadaCloser = [](std::FILE* fp) &#123;  if (fp) &#123;    std::fclose(fp);    std::cout &lt;&lt; &quot;File closed.&quot; &lt;&lt; std::endl;  &#125;&#125;;auto sp1 = shared_ptr&lt;std::FILE&gt;(fp, lamadaCloser);\n\n\nå¾ªç¯å¼•ç”¨å½“ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡äº’ç›¸æŒæœ‰å¯¹æ–¹çš„ shared_ptrï¼Œä¼šå¯¼è‡´å¼•ç”¨è®¡æ•°æ°¸è¿œæ— æ³•å½’é›¶ï¼Œä»è€Œå†…å­˜æ³„æ¼ã€‚å¦‚ä¸‹é¢åœºæ™¯ï¼š\nstruct Node &#123;    std::shared_ptr&lt;Node&gt; next; // ä½¿ç”¨ shared_ptr&#125;;auto node1 = std::make_shared&lt;Node&gt;();auto node2 = std::make_shared&lt;Node&gt;();node1-&gt;next = node2;node2-&gt;next = node1; // å¾ªç¯å¼•ç”¨ï¼å¼•ç”¨è®¡æ•°æ°¸ä¸å½’é›¶ã€‚\n\nè§£å†³æ–¹æ¡ˆï¼šå°†å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆæ”¹ä¸º std::weak_ptrã€‚\nstruct Node &#123;  weak_ptr&lt;Node&gt; next;  // ä½¿ç”¨ weak_ptr æ‰“ç ´å¾ªç¯å¼•ç”¨&#125;;\n\nweak_ptrstd::weak_ptr æ˜¯ C++ æ™ºèƒ½æŒ‡é’ˆä½“ç³»ä¸­ä¸€ä¸ªéå¸¸ç‹¬ç‰¹çš„è§’è‰²ï¼Œå…¶â€‹å¿…é¡»ä» std::shared_ptr æˆ–å¦ä¸€ä¸ª std::weak_ptråˆ›å»ºï¼Œä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œä¸»è¦ç”¨äºè§£å†³å…±äº«æ‰€æœ‰æƒå¸¦æ¥çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚\n#include &lt;memory&gt;auto sharedPtr = std::make_shared&lt;int&gt;(42); // å¼•ç”¨è®¡æ•°=1std::weak_ptr&lt;int&gt; weakPtr(sharedPtr);      // ä» shared_ptr åˆ›å»ºï¼Œå¼•ç”¨è®¡æ•°ä»ä¸º1std::weak_ptr&lt;int&gt; anotherWeakPtr = weakPtr; // ä»å¦ä¸€ä¸ª weak_ptr æ‹·è´\n\nstd::weak_ptrçš„æ ¸å¿ƒä»·å€¼åœ¨äºå®ƒä¸æ‹¥æœ‰å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ã€‚\nä½¿ç”¨weak_ptrå¯ä»¥è§£å†³shared_ptrå¸¦æ¥çš„ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š\n\nâ€‹å¾ªç¯å¼•ç”¨ (Circular Reference)â€‹â€‹ï¼šå½“ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ç›¸äº’æŒæœ‰å¯¹æ–¹çš„ std::shared_ptræ—¶ï¼Œå®ƒä»¬çš„å¼•ç”¨è®¡æ•°æ°¸è¿œæ— æ³•é™ä¸ºé›¶ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ä½¿ç”¨ std::weak_ptræ›¿ä»£å…¶ä¸­ä¸€ä¸ªå¼•ç”¨å¯ä»¥æ‰“ç ´å¾ªç¯ã€‚\n\nâ€‹è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)â€‹â€‹ï¼šè§‚å¯Ÿè€…ä¸åº”æ§åˆ¶è¢«è§‚å¯Ÿå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½¿ç”¨ std::weak_ptrå…è®¸è§‚å¯Ÿè€…æ£€æŸ¥å¯¹è±¡æ˜¯å¦è¿˜å­˜åœ¨ï¼Œè€Œä¸ä¼šé˜»æ­¢å…¶è¢«é”€æ¯ã€‚\n\n\nå¿…é¡»ä½¿ç”¨ lock()æ–¹æ³•æ¥å°è¯•è·å–ä¸€ä¸ªæœ‰æ•ˆçš„ std::shared_ptrï¼Œç„¶ååˆ¤æ–­å¹¶ä½¿ç”¨ã€‚\nif (auto tempSharedPtr = weakPtr.lock()) &#123; // lock() è¿”å›ä¸€ä¸ªä¸´æ—¶çš„ shared_ptr    // å¯¹è±¡å­˜åœ¨ï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨    std::cout &lt;&lt; &quot;Value: &quot; &lt;&lt; *tempSharedPtr &lt;&lt; std::endl;&#125; else &#123;    // å¯¹è±¡å·²è¢«é‡Šæ”¾    std::cout &lt;&lt; &quot;Resource has been released.&quot; &lt;&lt; std::endl;&#125;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C/C++ä¸åŒæ•´æ•°ç±»å‹çš„åŒºåˆ«","url":"/post/2418701368.html","content":"åœ¨ C&#x2F;C++ä¸­æ¶‰åŠçš„æ•´æ•°ç›¸å…³çš„ç±»å‹å¤§è‡´æœ‰å¦‚ä¸‹å‡ ç§ï¼š\n\ncharã€unsigned char\nshortã€unsigned short\nintã€unsigned int\nlongã€unsigned long\nlong longã€unsigned long long\nint8_tã€uint8_t\nint32_tã€uint32_t\nint64_tã€uint64_t\nDWORD\nDWORD32ã€DWORD64\nsize_tã€ssize_t\nSIZE_Tã€SSIZE_T\n\n\n\nåŸç”Ÿæ•°æ®ç±»å‹ä»¥ä¸‹æ•°æ®ç±»å‹ C&#x2F;C++è¯­è¨€ä¸­çš„åŸç”Ÿæ•´æ•°ç±»å‹ï¼Œå…¶é•¿åº¦å–å†³äºæ‰€ä½¿ç”¨çš„è®¡ç®—æœºç³»ç»Ÿå’Œç¼–è¯‘å™¨ï¼š\n\nshortã€unsigned short\nintã€unsigned int\nlongã€unsigned long\nlong longã€unsigned long long\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nå¦‚æœéœ€è¦å¼€å‘è·¨å¹³å°çš„ã€å…·æœ‰è‰¯å¥½å¯ç§»æ¤æ€§çš„ç¨‹åºï¼Œè¯·ä¸è¦ä½¿ç”¨è¿™äº›æ•°æ®ç±»å‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™äº›æ•°æ®ç±»å‹æ‰€å å­—èŠ‚æ•°å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n\n\næ•°æ®ç±»å‹\nå­—èŠ‚æ•°\nèŒƒå›´\n\n\n\nchar\n1\n-128 ~ 127\n\n\nunsigned char\n1\n0 ~ 255\n\n\nshort\n2\n-32,768 ~ 32,767\n\n\nunsigned short\n2\n0 ~ 65,535\n\n\nint\n4\n-2,147,483,648 ~ 2,147,483,647\n\n\nunsigned int\n4\n0 ~ 4,294,967,295\n\n\nlong\n4\n-2,147,483,648 ~ 2,147,483,647\n\n\nunsigned long\n4\n0 ~ 4,294,967,295\n\n\nlong long\n8\n-9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807\n\n\nunsigned long long\n8\n0 ~ 18,446,744,073,709,551,615\n\n\næˆ‘ä»¬è¦çŸ¥é“ï¼ŒC&#x2F;C++ è¯­è¨€è§„èŒƒå¹¶æ²¡æœ‰æ˜ç¡®è§„å®šä¸Šè¿°ç±»å‹æ‰€å çš„å­—èŠ‚æ•°ï¼Œå…·ä½“å ç”¨å¤šå°‘å­—èŠ‚éœ€è¦ç”±ç¼–è¯‘å™¨æ¥å†³å®šã€‚ä¾‹å¦‚ï¼Œè™½ç„¶å¤§å¤šæ•°ä¸»æµç¼–è¯‘å™¨ä¸ºäº†ä¿è¯ 32 ä½ç³»ç»Ÿå’Œ 64 ä½ç³»ç»Ÿçš„å…¼å®¹æ€§ï¼Œåœ¨ 32 ä½å’Œ 64 ä½ç¼–è¯‘å™¨ä¸­éƒ½å°† int ç±»å‹å®šä¹‰ä¸º 4 ä¸ªå­—èŠ‚ï¼Œä½†è¿™ä¸ªå¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çº¦æŸï¼Œéšæ—¶å¯èƒ½æ”¹å˜ã€‚\nint*_t æ•°æ®ç±»å‹int*_tæ ¼å¼çš„æ•°æ®ç±»å‹æ˜¯å›ºå®šå®½åº¦æ•´æ•°ç±»å‹ï¼Œåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ç¯å¢ƒä¸‹ï¼Œå…¶æ‰€å ç”¨çš„å­—èŠ‚æ•°å§‹ç»ˆç›¸åŒï¼ˆå³æ•°æ®èŒƒå›´ä¹Ÿç›¸åŒï¼‰ï¼Œé€‚åˆç”¨æ¥å¼€å‘è·¨å¹³å°çš„ç¨‹åºã€‚\n\n\n\næ•°æ®ç±»å‹\nå­—èŠ‚æ•°\nèŒƒå›´\n\n\n\nint8_t\n1\n-128 ~ 127\n\n\nuint8_t\n1\n0 ~ 255\n\n\nint32_t\n4\n-2,147,483,648 ~ 2,147,483,647\n\n\nuint32_t\n4\n0 ~ 4,294,967,295\n\n\nint64_t\n8\n-9,223,372,036,854,775,808 ~ 9,223,372,036,854,775,807\n\n\nuint64_t\n8\n0 ~ 18,446,744,073,709,551,615\n\n\nsize_t å’Œ std::size_tsize_t å’Œ std::size_t æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œsize_t æ˜¯å®šä¹‰åœ¨ C è¯­è¨€çš„å¤´æ–‡ä»¶ï¼Œè€Œ std::size_t å®šä¹‰åœ¨ C++æ ‡å‡†åº“çš„&lt;cstddef&gt;å¤´æ–‡ä»¶ä¸­ã€‚\nè™½ç„¶äºŒè€…æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä½† std::size_t åœ¨å®ç°ä¸Šå…¼å®¹ size_t äº†ï¼ŒäºŒè€…æ‰€å çš„å­—èŠ‚æ•°å§‹ç»ˆç›¸åŒã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;size_t å’Œ std::size_t éƒ½æ˜¯æ— ç¬¦å·æ•´å‹ï¼Œå®ƒä»¬åœ¨ 32 ä½ç¼–è¯‘ç¯å¢ƒå ç”¨ 4 å­—èŠ‚ï¼Œ64 ä½ç¼–è¯‘ç¯å¢ƒå  8 å­—èŠ‚ã€‚\nå¦‚æœéœ€è¦ä½¿ç”¨æœ‰ç¬¦å·çš„ size_t ç±»å‹ï¼Œåœ¨ Linux ä¸Šå¯ä»¥ä½¿ç”¨ssize_tç±»å‹ï¼ŒWindows ä¸Šå¯ä»¥ä½¿ç”¨SSIZE_Tç±»å‹ã€‚\nDWORD å’Œ DWORD32ã€DWORD64DWORD æ˜¯ 32 ä½æ— ç¬¦å·æ•´å‹ï¼ˆèŒƒå›´0 ~ 4,294,967,295ï¼‰\nDWORD32ä¹Ÿæ˜¯ 32 ä½æ— ç¬¦å·æ•´å‹ï¼ˆèŒƒå›´0 ~ 4,294,967,295ï¼‰,è€ŒDWORD64æ˜¯ 64 ä½æ— ç¬¦å·æ•´å‹ï¼ˆèŒƒå›´0 ~ 18,446,744,073,709,551,615ï¼‰ã€‚\nDWORDä¸ºä»€ä¹ˆä¸€ç›´æ˜¯ 32 ä½æ— ç¬¦å·æ•´å‹ï¼Ÿ\nå¾®è½¯åœ¨è®¾è®¡ä¹‹åˆæ˜¯æ‰“ç®—è®© DWORD åœ¨ä¸åŒçš„ç¼–è¯‘ç¯å¢ƒå…·æœ‰ä¸åŒä½æ•°çš„ï¼Œä½†ä»ç›®å‰æƒ…å†µæ¥çœ‹ï¼Œè¿™ç§å¸Œæœ›å·²ç„¶ç ´ç­ï¼ŒDWORDå°†æ°¸è¿œæ˜¯ 32 ä½çš„æ— ç¬¦å·æ•´å‹ã€‚\nä¸€ç‚¹ç‚¹å»ºè®®ä¸ºäº†ä¿è¯ç¨‹åºçš„å¯ç§»æ¤æ€§ï¼Œè¯·åœ¨å¼€å‘ä¸­åªä½¿ç”¨å›ºå®šå­—èŠ‚æ•°çš„æ•°æ®ç±»å‹ï¼Œå¦‚ int8_tã€int32_tã€int64_tã€‚\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++å­—ç¬¦ä¸²å’Œå­—ç¬¦å­—é¢é‡","url":"/post/487899896.html","content":"C++ æ”¯æŒå„ç§å­—ç¬¦ä¸²å’Œå­—ç¬¦ç±»å‹ï¼Œå¹¶æä¾›äº†è¡¨è¾¾æ¯ç§ç±»å‹å­—é¢å€¼çš„æ–¹æ³•ã€‚åœ¨æºä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—ç¬¦é›†æ¥è¡¨ç¤ºå­—ç¬¦æˆ–å­—ç¬¦ä¸²ã€‚åŒæ—¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨é€šç”¨å­—ç¬¦åå’Œè½¬ä¹‰å­—ç¬¦æ¥é€šè¿‡åŸºæœ¬çš„æºå­—ç¬¦é›†è¡¨ç¤ºä»»ä½•å­—ç¬¦ä¸²ã€‚è€ŒåŸå§‹å­—ç¬¦ä¸²èƒ½å¤Ÿé¿å…å¯¹è½¬ä¹‰å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œå¹¶å¯ç”¨äºè¡¨ç¤ºæ‰€æœ‰ç±»å‹çš„å­—ç¬¦ä¸²ã€‚\n\n\nwchar_t ä¸ char16_twchar_t æ˜¯C89&#x2F;C99ä¸­å¼•å…¥çš„ï¼Œè¡¨ç¤ºå®½å­—ç¬¦ï¼Œä½†æ˜¯è¯¥ç±»å‹åœ¨ä¸åŒçš„ç¼–è¯‘å™¨&#x2F;ç³»ç»Ÿä¸Šæ‰€å çš„ç›´æ¥æ•°ä¸ä¸€æ ·ï¼ŒWindowsç³»ç»Ÿ sizeof(wchar_t) &#x3D;&#x3D; 2ï¼Œè€ŒLinux&#x2F;macOSåˆ™sizeof(wchar_t) &#x3D;&#x3D; 4ã€‚\nä¸ºäº†æ›´å¥½çš„è·¨å¹³å°ï¼ŒC++11å¼•å…¥äº† char16_t ç±»å‹ï¼Œåœ¨å„ä¸ªç¼–è¯‘å™¨ä¸Šå§‹ç»ˆ sizeof(char16_t) &#x3D;&#x3D; 2ã€‚\nä¸¤ç§ç±»å‹åˆ†åˆ«å¯¹åº”çš„å­—ç¬¦ä¸²ç±»å‹ä¸ºï¼š\n\nwchar_t å¯¹åº” std::wstringï¼ˆstd::basic_stringï¼‰\nchar16_t å¯¹åº” std::u16stringï¼ˆstd::basic_stringï¼‰\n\nwchar_t l = L&#x27;1&#x27;;std::wstring strL = L&quot;1&quot;;char16_t c = u&#x27;1&#x27;;std::u16string strC = u&quot;11111&quot;;\n\nå­—ç¬¦ä¸²å‰ç¼€åœ¨C++ä¸­ï¼Œå­—ç¬¦ä¸²å‰ç¼€ï¼ˆå¦‚u8ã€Lã€uã€Uï¼‰ç”¨äºæ˜¾å¼æŒ‡å®šå­—ç¬¦ä¸²çš„ç¼–ç æ–¹å¼å’Œå­—ç¬¦ç±»å‹ã€‚\n\n\n\nå‰ç¼€\næ ‡å‡†æ¥æº\nå­—ç¬¦ç±»å‹\nç¼–ç \næ¯ä¸ªå­—ç¬¦çš„å¤§å°\nè·¨å¹³å°æ€§\n\n\n\nu8\nC++11\ncharï¼ˆC++11~17ï¼‰char8_tï¼ˆC++20ï¼‰\nUTF-8\nå˜é•¿(1~4å­—èŠ‚)\nä¼˜ç§€\n\n\nL\nC++98\nwchar_t\nWindowså¹³å°UTF-16 å…¶ä»–UTF-32\nå›ºå®š2å­—èŠ‚\nå·®ï¼ˆç¼–ç æ­§ä¹‰ï¼‰\n\n\nu\nC++11\nchar16_t\nUTF-16\nå›ºå®š2å­—èŠ‚\nä¼˜ç§€\n\n\nU\nC++11\nchar32_t\nUTF-32\nå›ºå®š4å­—èŠ‚\nä¼˜ç§€\n\n\nint main()&#123;    // å­—ç¬¦å­—é¢é‡    auto c0 =   &#x27;A&#x27;; // char    auto c1 = u8&#x27;A&#x27;; // char    auto c2 =  L&#x27;A&#x27;; // wchar_t    auto c3 =  u&#x27;A&#x27;; // char16_t    auto c4 =  U&#x27;A&#x27;; // char32_t    // å­—ç¬¦ä¸²å­—é¢é‡    auto s0 =   &quot;hello&quot;; // const char*    auto s1 = u8&quot;hello&quot;; // const char* before C++20, encoded as UTF-8,                         // const char8_t* in C++20    auto s2 =  L&quot;hello&quot;; // const wchar_t*    auto s3 =  u&quot;hello&quot;; // const char16_t*, encoded as UTF-16    auto s4 =  U&quot;hello&quot;; // const char32_t*, encoded as UTF-32&#125;\n\nåŸå§‹å­—ç¬¦ä¸²int main()&#123;    // åŸå§‹å­—ç¬¦ä¸²å¯ä»¥åŒ…å« \\ å’Œ &quot;    auto R0 =   R&quot;(&quot;Hello \\ world&quot;)&quot;; // const char*    auto R1 = u8R&quot;(&quot;Hello \\ world&quot;)&quot;; // const char* before C++20, encoded as UTF-8,                                      // const char8_t* in C++20    auto R2 =  LR&quot;(&quot;Hello \\ world&quot;)&quot;; // const wchar_t*    auto R3 =  uR&quot;(&quot;Hello \\ world&quot;)&quot;; // const char16_t*, encoded as UTF-16    auto R4 =  UR&quot;(&quot;Hello \\ world&quot;)&quot;; // const char32_t*, encoded as UTF-32&#125;\n\nå­—ç¬¦ä¸²åç¼€åœ¨ C++ 14 å¼•å…¥äº†å­—ç¬¦ä¸²åç¼€ï¼Œå¸¸ç”¨çš„å­—ç¬¦ä¸²åç¼€æ˜¯åœ¨å­—ç¬¦ä¸²åé¢åŠ sï¼Œç”¨äºå°†Cé£æ ¼å­—ç¬¦ä¸²å­—é¢é‡ç›´æ¥è½¬æ¢ä¸ºstd::stringå¯¹è±¡ï¼Œæ—¨åœ¨ç®€åŒ–std::stringçš„æ„é€ ã€‚å¦‚ï¼š\n// éœ€è¦åŒ…å«stringå¤´æ–‡ä»¶ï¼Œå¹¶å¼•ç”¨å‘½åç©ºé—´#include &lt;string&gt;using namespace std::string_literals;auto S0 =   &quot;hello&quot;s; // std::string\n\næ­¤æ—¶æ„é€ std::stringæ—¶ï¼Œä½¿ç”¨çš„æ˜¯å…¶å­—é¢é‡è¿ç®—ç¬¦operatorâ€â€sï¼š\nconstexpr std::string operator&quot;&quot;s(const char* str, std::size_t len) noexcept\n\nä¹Ÿå¯ä»¥é…åˆå­—ç¬¦ä¸²å‰ç¼€æ„é€ å…¶ä»–ç±»å‹çš„å­—ç¬¦ä¸²ï¼š\nauto S0 =   &quot;hello&quot;s; // std::stringauto S1 = u8&quot;hello&quot;s; // std::string before C++20, std::u8string in C++20auto S2 =  L&quot;hello&quot;s; // std::wstringauto S3 =  u&quot;hello&quot;s; // std::u16stringauto S4 =  U&quot;hello&quot;s; // std::u32stringstd::string_view sv = &quot;abc\\0\\0def&quot;sv;\n\nè¿˜å¯ä»¥ä¸åŸå§‹å­—ç¬¦ä¸²ä¸€èµ·ä½¿ç”¨ï¼š\n// å’ŒåŸå§‹å­—ç¬¦ä¸²ä¸€èµ·ä½¿ç”¨auto S5 =   R&quot;(&quot;Hello \\ world&quot;)&quot;s; // std::string from a raw const char*auto S6 = u8R&quot;(&quot;Hello \\ world&quot;)&quot;s; // std::string from a raw const char* before C++20, encoded as UTF-8,                                    // std::u8string in C++20auto S7 =  LR&quot;(&quot;Hello \\ world&quot;)&quot;s; // std::wstring from a raw const wchar_t*auto S8 =  uR&quot;(&quot;Hello \\ world&quot;)&quot;s; // std::u16string from a raw const char16_t*, encoded as UTF-16auto S9 =  UR&quot;(&quot;Hello \\ world&quot;)&quot;s; // std::u32string from a raw const char32_t*, encoded as UTF-32\n\nå¯¹äºåŒ…å«\\0çš„å­—ç¬¦ä¸²ï¼Œå¦‚â€abc\\0\\0defâ€ï¼Œå¦‚æœä½¿ç”¨å­—ç¬¦ä¸²åç¼€ï¼Œåˆ™æ˜¯ä½¿ç”¨çš„å­—é¢é‡è¿ç®—ç¬¦operatorâ€â€sæ¥åˆå§‹åŒ–std::stringï¼š\nconstexpr std::string operator&quot;&quot;s(const char* str, std::size_t len) noexcept\nå…¶lenæ˜¯å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ•°é‡ï¼ˆä¸åŒ…æ‹¬æœ«å°¾çš„\\0ï¼Œä½†åŒ…å«æ˜¾å¼çš„\\0ï¼‰ã€‚\nè‡ªå®šä¹‰å­—ç¬¦ä¸²åç¼€å­—ç¬¦ä¸²åç¼€æ˜¯é€šè¿‡æ“ä½œç¬¦çš„é‡è½½å®ç°çš„ï¼š\nstd::string operator&quot;&quot;s( const char *str, std::size_t len );\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ“ä½œç¬¦çš„é‡è½½æ¥å®ç°å…¶ä»–çš„å­—ç¬¦ä¸²åç¼€ï¼Œè‡ªå®šä¹‰çš„åç¼€å»ºè®®ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¦åˆ™ä¼šäº§ç”Ÿç¼–è¯‘è­¦å‘Šï¼š\nwarning C4455: â€œoperator &quot;&quot;mmâ€: å·²ä¿ç•™ä¸ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„æ–‡æœ¬åç¼€æ ‡è¯†ç¬¦\n\nä¸‹é¢è‡ªå®šä¹‰_mmã€_mã€_kmåç¼€åˆ†åˆ«è¡¨ç¤ºæ¯«ç±³ã€ç±³ã€åƒç±³ï¼š\nlong double operator&quot;&quot; _mm(long double x) &#123;    return x / 1000;&#125;long double operator&quot;&quot; _m(long double x) &#123;    return x;&#125;long double operator&quot;&quot; _km(long double x) &#123;    return x * 1000;&#125;int main()&#123;    std::cout &lt;&lt; 1.0_mm &lt;&lt; std::endl; // 0.001    std::cout &lt;&lt; 1.0_m &lt;&lt; std::endl;  // 1    std::cout &lt;&lt; 1.0_km &lt;&lt; std::endl; // 1000    return 0;&#125;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++å¼‚å¸¸ä¹‹æˆ‘æ‰€è§","url":"/post/1878135693.html","content":"C++å¼‚å¸¸æ‰€å¸¦æ¥çš„é—®é¢˜å½“æˆ‘ä»¬åœ¨ä»£ç ä¸­å†™ä¸‹ä¸€è¡Œ throw è¯­å¥æ—¶ï¼Œæˆ‘ä»¬å°±æ­¤åŸ‹ä¸‹äº†ä¸€ä¸ªç¥¸æ ¹ï¼Œä»æ­¤ä»¥åï¼Œåœ¨è¯¥å‡½æ•°è°ƒç”¨é“¾ä¸­ï¼Œå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªè°ƒç”¨è€…éœ€è¦æä¾›ç›¸åº”çš„å¼‚å¸¸æ•è·ï¼Œå¦åˆ™ä¸€æ—¦å¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºå°±ä¼šå¼‚å¸¸ç»ˆæ­¢ã€‚\nä¾‹å¦‚ï¼Œå‡½æ•° f() è°ƒç”¨ g()ï¼Œè€Œ g() åˆè°ƒç”¨ h()ï¼Œå¹¶ä¸” h() æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œåˆ™ g() å’Œ f()ä¸­å¿…é¡»æœ‰ä¸€ä¸ªæä¾›äº†ç›¸åº”çš„å¼‚å¸¸æ•è·ï¼Œå¦åˆ™ç¨‹åºä¼šå¼‚å¸¸ç»ˆæ­¢ã€‚\nç”±äºå¼‚å¸¸ä¼šä½¿ä»£ç çš„æ‰§è¡Œæµç¨‹ä»ä»»æ„åœ°æ–¹è·³å‡ºï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä»˜å‡ºå¤§é‡çš„ç²¾åŠ›æ¥ç¼–å†™æ­£ç¡®çš„å¼‚å¸¸å®‰å…¨ä»£ç ï¼Œä¾‹å¦‚ä½¿ç”¨ RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰æ¥ä¿è¯èµ„æºæ­£ç¡®é‡Šæ”¾ã€‚\nå¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼Œè™½ç„¶æˆ‘ä»¬åœ¨å‡½æ•° f() ä¸­æ•è·äº†å¼‚å¸¸ï¼Œé¿å…äº†ç¨‹åºçš„å¼‚å¸¸ç»ˆæ­¢ï¼Œä½†å¼‚å¸¸å´ä¸­æ–­äº†å‡½æ•° g() çš„æ­£å¸¸æ‰§è¡Œæµç¨‹ï¼Œå¯¼è‡´å¯¹è±¡ m æ²¡æœ‰è¢«æ­£ç¡®é‡Šæ”¾ï¼Œä»è€Œå‡ºç°äº†èµ„æºæ³„éœ²ã€‚è¿™ç§æƒ…å†µå¯èƒ½è¿˜ä¼šå˜ç›¸åœ°å¢åŠ äº†ç¨‹åºçš„è°ƒè¯•éš¾åº¦ã€‚\n\n\nvoid h() &#123;    throw std::exception();&#125;void g() &#123;    int* m = new int();    h();    delete m;&#125;void f() &#123;    try &#123;        g();    &#125;    catch (...) &#123;    &#125;&#125;int main()&#123;    f();    return 0;&#125;\n\nå¯ç”¨å¼‚å¸¸è¿˜ä¼šåœ¨æ¯ä¸ªç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æ·»åŠ é¢å¤–çš„æ•°æ®ï¼Œä»è€Œå¢åŠ ç¼–è¯‘æ—¶é—´ï¼ˆå¯èƒ½åªæ˜¯ç•¥å¾®å¢åŠ ï¼‰å¹¶å¯èƒ½å¢åŠ åœ°å€ç©ºé—´çš„ä½¿ç”¨ã€‚\nå¼‚å¸¸çš„å­˜åœ¨å¯èƒ½ä¼šå¯¼è‡´å¼€å‘äººå‘˜æ»¥ç”¨å¼‚å¸¸ï¼Œåœ¨æœ¬ä¸è¯¥ï¼ˆæˆ–ä¸éœ€è¦ï¼‰æŠ›å‡ºå¼‚å¸¸çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œæ— æ•ˆçš„ç”¨æˆ·è¾“å…¥å°±ä¸åº”æŠ›å‡ºå¼‚å¸¸ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å³ä¾¿æˆ‘ä»¬æ•è·äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆéš¾ä»å¼‚å¸¸ä¸­æ¢å¤å›æ¥ï¼Œå› ä¸ºæˆ‘ä¸èƒ½ç¡®å®šå¼‚å¸¸å…·ä½“æ˜¯ä»è°ƒç”¨é“¾çš„å“ªä¸€æ­¥æŠ›å‡ºçš„ï¼Œä¹Ÿæ— æ³•çŸ¥æ™“æ¯ä¸€æ­¥çš„å®ç°é€»è¾‘ï¼Œå› æ­¤å¦‚æœç¨‹åºä¸­ä½¿ç”¨äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬é™¤äº†åšå¥½å¿…è¦çš„å‚æ•°æ£€æŸ¥ï¼Œå°½é‡é¿å…å¼‚å¸¸å‘ç”Ÿï¼Œåœ¨å¼‚å¸¸è¢«æŠ›å‡ºæ—¶ï¼Œè®©ç¨‹åºè‡ªç„¶çš„é€€å‡ºä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\nèƒ½å®Œå…¨é¿å…ä½¿ç”¨å¼‚å¸¸å—ï¼Ÿå¤ªéš¾äº†ï¼Œæˆ‘ä»¬å¾ˆéš¾å®Œå…¨é¿å…ä½¿ç”¨å¼‚å¸¸ã€‚\nåœ¨ C++ æ ‡å‡†åº“ï¼ˆSTLï¼‰ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µæ˜¯é€šè¿‡æŠ›å‡ºå¼‚å¸¸çš„å½¢å¼æ¥è¿”å›é”™è¯¯çš„ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¸å¦‚ EASTL è¿™æ ·çš„åº“æ¥æ›¿ä»£ STLï¼Œä½†ä»ç„¶å¾ˆéš¾é¿å…ç¨‹åºä½¿ç”¨çš„å…¶ä»–åº“ä¸ä¼šä½¿ç”¨ STL ä»¥åŠæŠ›å‡ºå¼‚å¸¸ï¼Œæ¯”å¦‚å¸¸ç”¨çš„æ—¥å¿—åº“ spldlogã€booståº“ã€rpclibåº“ç­‰éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å› æ­¤è¦å®Œå…¨çš„ä¸ä½¿ç”¨å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦ä»å¤´å®ç°ä¼—å¤šçš„åŸºç¡€ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥ä½œé‡ã€‚\næŠ˜ä¸­çš„åŠæ³•è™½ç„¶æˆ‘ä»¬å¾ˆéš¾å®Œå…¨é¿å…å¼‚å¸¸ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥åŠªåŠ›è¿œç¦»å¼‚å¸¸çš„ã€‚\nä¸‹é¢æ˜¯æˆ‘çš„ä¸€ç‚¹ç‚¹å»ºè®®ï¼š\nå¯ä»¥ä½¿ç”¨ EASTL æ›¿ä»£ STLï¼Œæˆ–è€…ä»…ä½¿ç”¨ STL ä¸­ä¸æŠ›å‡ºå¼‚å¸¸çš„æ¨¡å—ã€‚\nåœ¨é€‰æ‹©ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå°½é‡é€‰æ‹©ä¸ä½¿ç”¨å¼‚å¸¸çš„åº“ï¼Œé€šå¸¸ C è¯­è¨€å¼€å‘çš„åº“ä¸ä¼šä½¿ç”¨å¼‚å¸¸ï¼Œå¦‚ curlã€zlog ç­‰ï¼Œä½†éœ€è¦ç•™æ„æœ‰äº› C è¯­è¨€åº“å¯èƒ½ä¼šä½¿ç”¨ exit å’Œ abort å‡½æ•°ï¼Œæˆ‘è§‰å¾—ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ¯”ä½¿ç”¨å¼‚å¸¸æ›´å¯æ€•ï¼Œå¼‚å¸¸å¯¼è‡´ç¨‹åºå´©æºƒè‡³å°‘æœ‰è¿¹å¯å¾ªï¼Œè€Œè¿™ä¸¤ä¸ªå‡½æ•°é€€å‡ºç¨‹åºæ—¶ï¼Œé€šå¸¸å¾ˆéš¾æ’æŸ¥å®šä½ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¿è¯è‡ªå·±ç¼–å†™çš„ä»£ç ä¸ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œä¾‹å¦‚å‡½æ•°é€šè¿‡è¿”å›å€¼çš„å½¢å¼è¿”å›é”™è¯¯ï¼Œå¹¶ä¸”å°½å¯èƒ½ä½¿ç”¨ C++ 17 ä¸­çš„[[nodiscard]]ï¼Œå¼ºåˆ¶è°ƒç”¨è€…æ£€æŸ¥è¿”å›å€¼ã€‚ä½†åº”é¿å…ä½¿ç”¨å…¨å±€çŠ¶æ€å˜é‡ï¼Œå¦‚ Windows çš„ LastErrorï¼Œå› ä¸ºè¿™æ ·ä¼šç ´åå‡½æ•°è°ƒç”¨çš„å±€éƒ¨æ€§ã€‚\næ„é€ å‡½æ•°ä¹Ÿå¯èƒ½ä¼šå¤±è´¥ï¼Œä½†æˆ‘ä»¬ä¸åº”ä½¿ç”¨å¼‚å¸¸æ¥æŠ›å‡ºé”™è¯¯ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤æ­¥æ„é€ æ³•ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­åªåšåŸºæœ¬çš„ã€ä¸ä¼šå‡ºé”™ã€ä¸ä¼šæŠ›å‡ºå¼‚å¸¸çš„æ“ä½œæˆ–è€…ç›´æ¥ä½¿ç”¨ç©ºçš„æ„é€ å‡½æ•°ï¼Œç„¶åæä¾›ä¸€ä¸ªå•ç‹¬çš„ init å‡½æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶è¿”å›é”™è¯¯ç ã€‚\nå¼‚å¸¸æ•è·çš„ç²’åº¦ä¸å®œå¤ªç»†ï¼Œå¦‚æœå¯¹æ¯ä¸€è¡Œå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥éƒ½è¿›è¡Œå¼‚å¸¸æ•è·ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç è¿‡äºç¹çã€‚å¦‚æœç²’åº¦å¤ªç²—ï¼Œåˆä¼šå¯¼è‡´å¼‚å¸¸éš¾äºæ¢å¤ï¼Œå¤±å»äº†æ•è·çš„æ„ä¹‰ã€‚æˆ‘ä»¬è¦åšçš„æ˜¯ï¼Œåœ¨è°ƒç”¨å‡½æ•°å‰ï¼Œå¯¹å‚æ•°è¿›è¡Œå……åˆ†åœ°æ£€æŸ¥ï¼Œå°½é‡é¿å…å¼‚å¸¸çš„å‘ç”Ÿï¼Œç„¶åä»…åœ¨å…³é”®ä»£ç ä½ç½®è¿›è¡Œå¼‚å¸¸æ•è·ã€‚\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++ é»˜è®¤æ„é€ å‡½æ•°","url":"/post/818165951.html","content":"æœ¬æ–‡å›´ç»• 3 ä¸ªé—®é¢˜æ¥ç†è§£ C++çš„é»˜è®¤æ„é€ å‡½æ•°ï¼š\n\nä»€ä¹ˆæ˜¯é»˜è®¤æ„é€ å‡½æ•°ï¼Ÿ\né»˜è®¤æ„é€ å‡½æ•°ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿ\nç¼–è¯‘å™¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ï¼Ÿ\n\n\n\nä»€ä¹ˆæ˜¯é»˜è®¤æ„é€ å‡½æ•°æˆ‘ä»¬ä¸€èˆ¬ä¼šè®¤ä¸ºé»˜è®¤æ„é€ å‡½æ•°å°±æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„é‚£ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶å®è¿™ç§ç†è§£ä¸å…¨é¢ã€‚\nå‡†ç¡®çš„è¯´ï¼Œé»˜è®¤æ„é€ å‡½æ•°å°±æ˜¯åœ¨è°ƒç”¨æ—¶ä¸éœ€è¦æ˜¾ç¤ºåœ°ä¼ å…¥å®å‚çš„æ„é€ å‡½æ•°ã€‚\næ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œä¸‹é¢ä¸¤ç§æ„é€ å‡½æ•°éƒ½æ˜¯é»˜è®¤æ„é€ å‡½æ•°ï¼š\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°ã€‚\tSample() &#123;\t\t// do something\t&#125;&#125;;\n\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°ã€‚è™½ç„¶æœ‰å½¢å‚ï¼Œä½†æœ‰é»˜è®¤å€¼ï¼Œè°ƒç”¨çš„æ—¶å€™å¯ä»¥ä¸æ˜¾ç¤ºçš„ä¼ å…¥å®å‚ã€‚\tSample(int m = 10) &#123;\t\t// do something\t&#125;&#125;;\n\né»˜è®¤æ„é€ å‡½æ•°ä½•æ—¶è¢«è°ƒç”¨å¦‚æœå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶æ²¡æœ‰ä½¿ç”¨åˆå§‹åŒ–å¼ï¼Œç¼–è¯‘å™¨å°±ä¼šä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚å¦‚ï¼š\nSample s;\n\nä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°æœ‰ä¸€å¥å¾ˆç»å…¸çš„è¯å¯ä»¥ç”¨æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼šæƒŸæœ‰é»˜è®¤æ„é€ å‡½æ•°è¢«ç¼–è¯‘å™¨éœ€è¦çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ‰ä¼šç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;é‚£æˆ‘ä»¬åªéœ€çŸ¥é“ä»€ä¹ˆæ—¶å€™â€œè¢«ç¼–è¯‘å™¨éœ€è¦â€ï¼Œå°±å¯ä»¥çŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°äº†ã€‚\nä¸‹é¢å‡ ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘éœ€è¦ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ï¼š\n\nå½“è¯¥ç±»çš„ç±»å¯¹è±¡æ•°æ®æˆå‘˜æœ‰é»˜è®¤æ„é€ å‡½æ•°æ—¶ã€‚\nå½“è¯¥ç±»çš„åŸºç±»æœ‰é»˜è®¤æ„é€ å‡½æ•°æ—¶ã€‚\nå½“è¯¥ç±»çš„åŸºç±»ä¸ºè™šåŸºç±»æ—¶ã€‚\nå½“è¯¥ç±»æœ‰è™šå‡½æ•°æ—¶ã€‚\n\næ³¨æ„äº‹é¡¹é¿å…æ— å‚å’Œç¼ºçœåŒæ—¶å­˜åœ¨æ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°å’Œå¸¦ç¼ºçœå‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°åŒæ—¶å­˜åœ¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”ŸäºŒä¹‰æ€§ï¼Œä»è€Œç”Ÿæˆç¼–è¯‘é”™è¯¯ã€‚\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°\tSample() &#123;\t\t// do something\t\tprintf(&quot;Sample()&quot;);\t&#125;\t// é»˜è®¤æ„é€ å‡½æ•°\tSample(int m = 10) &#123;\t\t// do something\t\tprintf(&quot;Sample(int m = 10)&quot;);\t&#125;&#125;;int main()&#123;\tSample s; // error C2668: â€œSample::Sampleâ€: å¯¹é‡è½½å‡½æ•°çš„è°ƒç”¨ä¸æ˜ç¡®    return 0;&#125;\n\nä¸åº”åœ¨å¯¹è±¡ååé¢åŠ ä¸Šæ‹¬å·ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¸åº”åœ¨å¯¹è±¡ååé¢åŠ ä¸Šæ‹¬å·ï¼Œå¦åˆ™ä¼šäº§ç”Ÿç¼–è¯‘è­¦å‘Š\nwarning C4930: â€œSample s(void)â€: æœªè°ƒç”¨åŸå‹å‡½æ•°(æ˜¯å¦æ˜¯æœ‰æ„ç”¨å˜é‡å®šä¹‰çš„?)\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å› ä¸ºç¼–è¯‘å™¨è¯¯è®¤ä¸ºSample s()è¯­å¥æ˜¯è¦å£°æ˜ä¸€ä¸ªè¿”å›å€¼ä¸ºSampleå¯¹è±¡çš„å‡½æ•°sï¼Œè€Œå®ƒåˆæ²¡æ‰¾åˆ°å‡½æ•°sçš„å®šä¹‰ï¼Œæ‰€ä»¥äº§ç”Ÿäº†è­¦å‘Šã€‚\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°\tSample() &#123;\t\t// do something\t\tprintf(&quot;Sample()&quot;);\t&#125;&#125;;int main()&#123;\tSample s(); // warning C4930: â€œSample s(void)â€: æœªè°ƒç”¨åŸå‹å‡½æ•°(æ˜¯å¦æ˜¯æœ‰æ„ç”¨å˜é‡å®šä¹‰çš„?)    return 0;&#125;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++ç”Ÿæˆæ¡å½¢ç ","url":"/post/3756556672.html","content":"æ¡å½¢ç (barcode)æ˜¯å°†å®½åº¦ä¸ç­‰çš„å¤šä¸ªé»‘æ¡å’Œç©ºç™½ï¼ŒæŒ‰ç…§ä¸€å®šçš„ç¼–ç è§„åˆ™æ’åˆ—ï¼Œç”¨ä»¥è¡¨è¾¾ä¸€ç»„ä¿¡æ¯çš„å›¾å½¢æ ‡è¯†ç¬¦ã€‚å¸¸è§çš„æ¡å½¢ç æ˜¯ç”±åå°„ç‡ç›¸å·®å¾ˆå¤§çš„é»‘æ¡ï¼ˆç®€ç§°æ¡ï¼‰å’Œç™½æ¡ï¼ˆç®€ç§°ç©ºï¼‰æ’æˆçš„å¹³è¡Œçº¿å›¾æ¡ˆã€‚\n\n\næ¡å½¢ç ä»‹ç»æ¡ç ç§ç±»å¾ˆå¤šï¼Œå¸¸è§çš„å¤§æ¦‚æœ‰äºŒåå¤šç§ç åˆ¶ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼šCode39 ç ï¼ˆæ ‡å‡† 39 ç ï¼‰ã€Codabar ç ï¼ˆåº“å¾·å·´ç ï¼‰ã€Code25 ç ï¼ˆæ ‡å‡† 25 ç ï¼‰ã€ITF25 ç ï¼ˆäº¤å‰ 25 ç ï¼‰ã€Matrix25 ç ï¼ˆçŸ©é˜µ 25 ç ï¼‰ã€UPC-A ç ã€UPC-E ç ã€EAN-13 ç ï¼ˆEAN-13 å›½é™…å•†å“æ¡ç ï¼‰ã€EAN-8 ç ï¼ˆEAN-8 å›½é™…å•†å“æ¡ç ï¼‰ã€ä¸­å›½é‚®æ”¿ç ï¼ˆçŸ©é˜µ 25 ç çš„ä¸€ç§å˜ä½“ï¼‰ã€Code-B ç ã€MSI ç ã€Code11 ç ã€Code93 ç ã€ISBN ç ã€ISSN ç ã€Code128 ç ï¼ˆCode128 ç ï¼ŒåŒ…æ‹¬ EAN128 ç ï¼‰ã€Code39EMSï¼ˆEMS ä¸“ç”¨çš„ 39 ç ï¼‰ç­‰ä¸€ç»´æ¡ç å’Œ PDF417 ç­‰äºŒç»´æ¡ç ã€‚\nç›®å‰ï¼Œå›½é™…å¹¿æ³›ä½¿ç”¨çš„æ¡ç ç§ç±»æœ‰ï¼š\n\nEAN ç  â€”â€” å›½é™…ç‰©å“ç¼–ç åä¼šåˆ¶å®šçš„ä¸€ç§å•†å“ç”¨æ¡ç ï¼Œé€šç”¨äºå…¨ä¸–ç•Œã€‚EAN ç ç¬¦å·æœ‰æ ‡å‡†ç‰ˆï¼ˆEAN-13ï¼‰å’Œç¼©çŸ­ç‰ˆï¼ˆEAN-8ï¼‰ä¸¤ç§ï¼Œæˆ‘å›½çš„é€šç”¨å•†å“æ¡ç ä¸å…¶ç­‰æ•ˆï¼Œæ—¥å¸¸è´­ä¹°çš„å•†å“åŒ…è£…ä¸Šæ‰€å°çš„æ¡ç ä¸€èˆ¬å°±æ˜¯ EAN ç ã€‚\nUPC ç  â€”â€” UPC ç æ˜¯ç¾å›½ç»Ÿä¸€ä»£ç å§”å‘˜ä¼šåˆ¶å®šçš„ä¸€ç§å•†å“ç”¨æ¡ç ï¼Œä¸»è¦ç”¨äºç¾å›½å’ŒåŠ æ‹¿å¤§åœ°åŒºï¼Œæˆ‘ä»¬åœ¨ç¾å›½è¿›å£çš„å•†å“ä¸Šå¯ä»¥çœ‹åˆ°ã€‚\nCode39 ç  â€”â€” å› å…¶å¯é‡‡ç”¨æ•°å­—ä¸å­—æ¯å…±åŒç»„æˆçš„æ–¹å¼è€Œåœ¨å„è¡Œä¸šå†…éƒ¨ç®¡ç†ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚\nCode93 ç  â€”â€” Code 93 ç ä¸ 39 ç å…·æœ‰ç›¸åŒçš„å­—ç¬¦é›†ï¼Œä½†å®ƒçš„å¯†åº¦è¦æ¯” 39 ç é«˜ï¼Œæ‰€ä»¥åœ¨é¢ç§¯ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨ 93 ç ä»£æ›¿ 39 ç \nCodebar ç  â€”â€” å¯è¡¨ç¤ºæ•°å­— 0 - 9ï¼Œå­—ç¬¦$ã€+ã€ -ã€è¿˜æœ‰åªèƒ½ç”¨ä½œèµ·å§‹&#x2F;ç»ˆæ­¢ç¬¦çš„ a,b,c d å››ä¸ªå­—ç¬¦ï¼Œå¯å˜é•¿åº¦ï¼Œæ²¡æœ‰æ ¡éªŒä½ï¼Œå¤šç”¨äºè¡€åº“,å›¾ä¹¦é¦†å’Œç…§åƒé¦†çš„ä¸šåŠ¡ä¸­ã€‚\nCode128 ç  â€”â€” 128 å¯è¡¨ç¤º ASCII 0 åˆ° ASCII 127 å…±è®¡ 128 ä¸ª ASCII å­—ç¬¦ã€‚\nCodeI2of5 ç  â€”â€” åªèƒ½è¡¨ç¤ºæ•°å­— 0 -9 å¯å˜é•¿åº¦ï¼Œè¿ç»­æ€§æ¡å½¢ç ï¼Œæ‰€æœ‰æ¡ä¸ç©ºéƒ½è¡¨ç¤ºä»£ç ï¼Œç¬¬ä¸€ä¸ªæ•°å­—ç”±æ¡å¼€å§‹ï¼Œç¬¬äºŒä¸ªæ•°å­—ç”±ç©ºç»„æˆï¼Œç©ºç™½åŒºæ¯”çª„æ¡å®½ 10 å€ï¼Œåº”ç”¨äºå•†å“æ‰¹å‘ã€ä»“åº“ã€æœºåœºã€ç”Ÿäº§&#x2F;åŒ…è£…è¯†åˆ«ã€å·¥ä¸šä¸­ï¼Œæ¡å½¢ç çš„è¯†è¯»ç‡é«˜ï¼Œå¯é€‚ç”¨äºå›ºå®šæ‰«æå™¨å¯é æ‰«æï¼Œåœ¨æ‰€æœ‰ä¸€ç»´æ¡å½¢ç ä¸­çš„å¯†åº¦æœ€é«˜ã€‚\n\nC++æ–¹å¼å®ç°barcode.h ä¸­å®ç°äº† Code39ã€Code93ã€Code128ã€CodeI2of5 ç­‰ 4 ç§æ ¼å¼çš„æ¡å½¢ç çš„ç”Ÿæˆã€‚å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼šè°ƒç”¨å¯¹åº”ç±»çš„DrawBarcodeå‡½æ•°å°†æ¡å½¢ç ç»˜åˆ¶åˆ° HDC ä¸Šï¼Œç»˜åˆ¶åˆ° HDC ä¸Šä¹‹åå¯ä»¥ä¿å­˜ä¸ºå›¾ç‰‡æˆ–è€…æ˜¾ç¤ºåˆ°ç•Œé¢ã€‚\n#ifndef BARCODE_H_#define BARCODE_H_#pragma onceclass Barcode39;class Barcode93;class BarcodeIof5;class Barcode128;static const int ga2_Code128[2][207] =&#123;    &#123;        64,  65,  66,  67,  68,  69,  70,  71,  72,  73,  74,  75,  76,  77,  78,  79,        80,  81,  82,  83,  84,  85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  95,        0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,        16,  17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,  28,  29,  30,  31,        32,  33,  34,  35,  36,  37,  38,  39,  40,  41,  42,  43,  44,  45,  46,  47,        48,  49,  50,  51,  52,  53,  54,  55,  56,  57,  58,  59,  60,  61,  62,  63,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  95,  96,  97,  98,  99, 100, 101, 102, 103, 104, 105, 106,    &#125;,    &#123;        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,        16,  17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,  28,  29,  30,  31,        32,  33,  34,  35,  36,  37,  38,  39,  40,  41,  42,  43,  44,  45,  46,  47,        48,  49,  50,  51,  52,  53,  54,  55,  56,  57,  58,  59,  60,  61,  62,  63,        64,  65,  66,  67,  68,  69,  70,  71,  72,  73,  74,  75,  76,  77,  78,  79,        80,  81,  82,  83,  84,  85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,        -1,  -1,  -1,  95,  96,  97,  98,  99, 100, 101, 102, 103, 104, 105, 106,    &#125;,&#125;;class BarcodeBase &#123;public:    BarcodeBase() &#123;        Clear();        i_Ratio = 3;    &#125;    void operator=(const BarcodeBase&amp;bc) &#123;        i_LenBuf = bc.i_LenBuf;        i_Ratio = bc.i_Ratio;        memcpy(ia_Buf, bc.ia_Buf, sizeof(ia_Buf));    &#125;    void Clear() &#123;        memset(ia_Buf, 0, sizeof(ia_Buf));        i_LenBuf = 0;    &#125;    int GetEncodeLength()\tconst &#123;        BYTE*pb = (BYTE*)ia_Buf;        int i, iLen = 0;        for (i = 0; i &lt; i_LenBuf; i++) &#123;            //wide is 3            if (*pb &amp; 2)\tiLen += (i_Ratio - 1);            pb++;        &#125;        return iLen + i_LenBuf;    &#125;    int GetBufferLength()\tconst &#123;        return i_LenBuf;    &#125;    const BYTE&amp;GetAt(int i)\tconst &#123;        return ia_Buf[i];    &#125;    int GetRatio()\tconst &#123;        return i_Ratio;    &#125;    int SetRatio(int iRatio) &#123;        i_Ratio = iRatio;        if (i_Ratio &lt;= 0)\ti_Ratio = 1;    &#125;    void DrawBarcode(HDC hDC, int iX, int iY0, int iY10, int iY11, const COLORREF clrBar, const COLORREF clrSpace, const int iPenW) &#123;        HPEN hPenBar = ::CreatePen(PS_SOLID, iPenW, clrBar);        HPEN hPenSpace = ::CreatePen(PS_SOLID, iPenW, clrSpace);        HPEN hPenOld = (HPEN)::SelectObject(hDC, hPenBar);        BYTE*pb = ia_Buf;        int i0, iNum0 = i_LenBuf;        BYTE bBar;        int i1, iNum1;        int iY;        for (i0 = 0; i0 &lt; iNum0; i0++) &#123;            bBar = *pb &amp; 0x01;            iNum1 = (*pb &amp; 0x02) ? i_Ratio : 1;            iY = (*pb &amp; 0x04) ? iY11 : iY10;            for (i1 = 0; i1 &lt; iNum1; i1++) &#123;                if (bBar)\t::SelectObject(hDC, hPenBar);                else\t\t::SelectObject(hDC, hPenSpace);                ::MoveToEx(hDC, iX, iY0, 0);                ::LineTo(hDC, iX, iY);                iX += iPenW;            &#125;            pb++;        &#125;        ::SelectObject(hDC, hPenOld);        ::DeleteObject(hPenBar);        ::DeleteObject(hPenSpace);    &#125;protected:    BYTE\tia_Buf[4096];    int\t\ti_LenBuf;    int\t\ti_Ratio;    struct IntString &#123;        int ch;        char*psz;    &#125;;&#125;;class Barcode39 : public BarcodeBase &#123;    //[n/a][n/a][n/a][n/a][n/a][n/a][w-n][b-s]public:    Barcode39() &#123;    &#125;    ~Barcode39() &#123;    &#125;    BOOL Encode39(const char*pszCodeIn) &#123;        int iLen = strlen(pszCodeIn);        char*pszCode = new char[iLen + 3];        sprintf(pszCode, &quot;*%s*&quot;, pszCodeIn);        strupr(pszCode);        BYTE*pFst = ia_Buf;        BYTE*p0 = pFst, *p1;        iLen += 2;        int i;        for (i = 0; i &lt; iLen; i++) &#123;            p1 = P_GetNarrowWideBarSpace39(pszCode[i], p0);            if (p1 == 0)\treturn 0;            p0 = p1;        &#125;        i_LenBuf = p1 - pFst;        delete[]pszCode;        return 1;    &#125;    void Draw39(HDC hDC, int iX, int iY0, int iY1, const COLORREF clrBar, const COLORREF clrSpace, const int iPenW) &#123;        DrawBarcode(hDC, iX, iY0, iY1, iY1, clrBar, clrSpace, iPenW);    &#125;private:    BYTE*P_GetNarrowWideBarSpace39(char ch, BYTE*pb) &#123;        IntString infs[] =        &#123;            &#123;&#x27;1&#x27;,\t&quot;wnnwnnnnwn&quot;&#125;,            &#123;&#x27;2&#x27;,\t&quot;nnwwnnnnwn&quot;&#125;,            &#123;&#x27;3&#x27;,\t&quot;wnwwnnnnnn&quot;&#125;,            &#123;&#x27;4&#x27;,\t&quot;nnnwwnnnwn&quot;&#125;,            &#123;&#x27;5&#x27;,\t&quot;wnnwwnnnnn&quot;&#125;,            &#123;&#x27;6&#x27;,\t&quot;nnwwwnnnnn&quot;&#125;,            &#123;&#x27;7&#x27;,\t&quot;nnnwnnwnwn&quot;&#125;,            &#123;&#x27;8&#x27;,\t&quot;wnnwnnwnnn&quot;&#125;,            &#123;&#x27;9&#x27;,\t&quot;nnwwnnwnnn&quot;&#125;,            &#123;&#x27;0&#x27;,\t&quot;nnnwwnwnnn&quot;&#125;,            &#123;&#x27;A&#x27;,\t&quot;wnnnnwnnwn&quot;&#125;,            &#123;&#x27;B&#x27;,\t&quot;nnwnnwnnwn&quot;&#125;,            &#123;&#x27;C&#x27;,\t&quot;wnwnnwnnnn&quot;&#125;,            &#123;&#x27;D&#x27;,\t&quot;nnnnwwnnwn&quot;&#125;,            &#123;&#x27;E&#x27;,\t&quot;wnnnwwnnnn&quot;&#125;,            &#123;&#x27;F&#x27;,\t&quot;nnwnwwnnnn&quot;&#125;,            &#123;&#x27;G&#x27;,\t&quot;nnnnnwwnwn&quot;&#125;,            &#123;&#x27;H&#x27;,\t&quot;wnnnnwwnnn&quot;&#125;,            &#123;&#x27;I&#x27;,\t&quot;nnwnnwwnnn&quot;&#125;,            &#123;&#x27;J&#x27;,\t&quot;nnnnwwwnnn&quot;&#125;,            &#123;&#x27;K&#x27;,\t&quot;wnnnnnnwwn&quot;&#125;,            &#123;&#x27;L&#x27;,\t&quot;nnwnnnnwwn&quot;&#125;,            &#123;&#x27;M&#x27;,\t&quot;wnwnnnnwnn&quot;&#125;,            &#123;&#x27;N&#x27;,\t&quot;nnnnwnnwwn&quot;&#125;,            &#123;&#x27;O&#x27;,\t&quot;wnnnwnnwnn&quot;&#125;,            &#123;&#x27;P&#x27;,\t&quot;nnwnwnnwnn&quot;&#125;,            &#123;&#x27;Q&#x27;,\t&quot;nnnnnnwwwn&quot;&#125;,            &#123;&#x27;R&#x27;,\t&quot;wnnnnnwwnn&quot;&#125;,            &#123;&#x27;S&#x27;,\t&quot;nnwnnnwwnn&quot;&#125;,            &#123;&#x27;T&#x27;,\t&quot;nnnnwnwwnn&quot;&#125;,            &#123;&#x27;U&#x27;,\t&quot;wwnnnnnnwn&quot;&#125;,            &#123;&#x27;V&#x27;,\t&quot;nwwnnnnnwn&quot;&#125;,            &#123;&#x27;W&#x27;,\t&quot;wwwnnnnnnn&quot;&#125;,            &#123;&#x27;X&#x27;,\t&quot;nwnnwnnnwn&quot;&#125;,            &#123;&#x27;Y&#x27;,\t&quot;wwnnwnnnnn&quot;&#125;,            &#123;&#x27;Z&#x27;,\t&quot;nwwnwnnnnn&quot;&#125;,            &#123;&#x27;-&#x27;,\t&quot;nwnnnnwnwn&quot;&#125;,            &#123;&#x27;.&#x27;,\t&quot;wwnnnnwnnn&quot;&#125;,            &#123;&#x27; &#x27;,\t&quot;nwwnnnwnnn&quot;&#125;,            &#123;&#x27;*&#x27;,\t&quot;nwnnwnwnnn&quot;&#125;,            &#123;&#x27;$&#x27;,\t&quot;nwnwnwnnnn&quot;&#125;,            &#123;&#x27;/&#x27;,\t&quot;nwnwnnnwnn&quot;&#125;,            &#123;&#x27;+&#x27;,\t&quot;nwnnnwnwnn&quot;&#125;,            &#123;&#x27;%&#x27;,\t&quot;nnnwnwnwnn&quot;&#125;,        &#125;;        int i0, iNum0 = sizeof(infs) / sizeof(infs[0]);        int i1;        for (i0 = 0; i0 &lt; iNum0; i0++) &#123;            IntString&amp;inf = infs[i0];            if (inf.ch == ch) &#123;                for (i1 = 0; i1 &lt; 10; i1++) &#123;                    if (inf.psz[i1] == &#x27;w&#x27;)\t*pb += 2;                    if (i1 % 2 == 0)\t\t\t*pb += 1;                    pb++;                &#125;                return pb;            &#125;        &#125;        return 0;    &#125;&#125;;class BarcodeI2of5 :public BarcodeBase &#123;    //[n/a][n/a][n/a][n/a][n/a][n/a][w-n][b-s]public:    BarcodeI2of5() &#123;    &#125;    ~BarcodeI2of5() &#123;    &#125;    BOOL EncodeI2of5(const char*pszCode) &#123;        Clear();        BYTE*pFst = ia_Buf;        BYTE*pb = pFst;        const int iNum = strlen(pszCode);        int i;        //&quot;nnnn&quot;        for (i = 0; i &lt; 4; i++) &#123;            if (i % 2 == 0)\t*pb += 1;            pb++;        &#125;        int iV;        for (i = 0; i &lt; iNum; i += 2) &#123;            iV = pszCode[i] - &#x27;0&#x27;;            iV = iV * 10;            iV += pszCode[i + 1] - &#x27;0&#x27;;            pb = P_GetNarrorWideBarSpaceI2of5(pb, iV);            if (pb == 0)\treturn 0;        &#125;        //&quot;wnn&quot;        *pb += 3;\tpb++;        *pb += 0;\tpb++;        *pb += 1;\tpb++;        i_LenBuf = pb - pFst;        return 1;    &#125;    void DrawI2of5(HDC hDC, int iX, int iY0, int iY1, const COLORREF clrBar, const COLORREF clrSpace, const int iPenW) &#123;        DrawBarcode(hDC, iX, iY0, iY1, iY1, clrBar, clrSpace, iPenW);    &#125;private:    BYTE*P_GetNarrorWideBarSpaceI2of5(BYTE*pb, int ch) &#123;        if (ch &lt; 0)\treturn 0;        if (ch &gt; 99)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t\t&quot;nnnnwwwwnn&quot;&#125;,            &#123;1,\t\t&quot;nwnnwnwnnw&quot;&#125;,            &#123;2,\t\t&quot;nnnwwnwnnw&quot;&#125;,            &#123;3,\t\t&quot;nwnwwnwnnn&quot;&#125;,            &#123;4,\t\t&quot;nnnnwwwnnw&quot;&#125;,            &#123;5,\t\t&quot;nwnnwwwnnn&quot;&#125;,            &#123;6,\t\t&quot;nnnwwwwnnn&quot;&#125;,            &#123;7,\t\t&quot;nnnnwnwwnw&quot;&#125;,            &#123;8,\t\t&quot;nwnnwnwwnn&quot;&#125;,            &#123;9,\t\t&quot;nnnwwnwwnn&quot;&#125;,            &#123;10,\t&quot;wnnnnwnwwn&quot;&#125;,            &#123;11,\t&quot;wwnnnnnnww&quot;&#125;,            &#123;12,\t&quot;wnnwnnnnww&quot;&#125;,            &#123;13,\t&quot;wwnwnnnnwn&quot;&#125;,            &#123;14,\t&quot;wnnnnwnnww&quot;&#125;,            &#123;15,\t&quot;wwnnnwnnwn&quot;&#125;,            &#123;16,\t&quot;wnnwnwnnwn&quot;&#125;,            &#123;17,\t&quot;wnnnnnnwww&quot;&#125;,            &#123;18,\t&quot;wwnnnnnwwn&quot;&#125;,            &#123;19,\t&quot;wnnwnnnwwn&quot;&#125;,            &#123;20,\t&quot;nnwnnwnwwn&quot;&#125;,            &#123;21,\t&quot;nwwnnnnnww&quot;&#125;,            &#123;22,\t&quot;nnwwnnnnww&quot;&#125;,            &#123;23,\t&quot;nwwwnnnnwn&quot;&#125;,            &#123;24,\t&quot;nnwnnwnnww&quot;&#125;,            &#123;25,\t&quot;nwwnnwnnwn&quot;&#125;,            &#123;26,\t&quot;nnwwnwnnwn&quot;&#125;,            &#123;27,\t&quot;nnwnnnnwww&quot;&#125;,            &#123;28,\t&quot;nwwnnnnwwn&quot;&#125;,            &#123;29,\t&quot;nnwwnnnwwn&quot;&#125;,            &#123;30,\t&quot;wnwnnwnwnn&quot;&#125;,            &#123;31,\t&quot;wwwnnnnnnw&quot;&#125;,            &#123;32,\t&quot;wnwwnnnnnw&quot;&#125;,            &#123;33,\t&quot;wwwwnnnnnn&quot;&#125;,            &#123;34,\t&quot;wnwnnwnnnw&quot;&#125;,            &#123;35,\t&quot;wwwnnwnnnn&quot;&#125;,            &#123;36,\t&quot;wnwwnwnnnn&quot;&#125;,            &#123;37,\t&quot;wnwnnnnwnw&quot;&#125;,            &#123;38,\t&quot;wwwnnnnwnn&quot;&#125;,            &#123;39,\t&quot;wnwwnnnwnn&quot;&#125;,            &#123;40,\t&quot;nnnnwwnwwn&quot;&#125;,            &#123;41,\t&quot;nwnnwnnnww&quot;&#125;,            &#123;42,\t&quot;nnnwwnnnww&quot;&#125;,            &#123;43,\t&quot;nwnwwnnnwn&quot;&#125;,            &#123;44,\t&quot;nnnnwwnnww&quot;&#125;,            &#123;45,\t&quot;nwnnwwnnwn&quot;&#125;,            &#123;46,\t&quot;nnnwwwnnwn&quot;&#125;,            &#123;47,\t&quot;nnnnwnnwww&quot;&#125;,            &#123;48,\t&quot;nwnnwnnwwn&quot;&#125;,            &#123;49,\t&quot;nnnwwnnwwn&quot;&#125;,            &#123;50,\t&quot;wnnnwwnwnn&quot;&#125;,            &#123;51,\t&quot;wwnnwnnnnw&quot;&#125;,            &#123;52,\t&quot;wnnwwnnnnw&quot;&#125;,            &#123;53,\t&quot;wwnwwnnnnn&quot;&#125;,            &#123;54,\t&quot;wnnnwwnnnw&quot;&#125;,            &#123;55,\t&quot;wwnnwwnnnn&quot;&#125;,            &#123;56,\t&quot;wnnwwwnnnn&quot;&#125;,            &#123;57,\t&quot;wnnnwnnwnw&quot;&#125;,            &#123;58,\t&quot;wwnnwnnwnn&quot;&#125;,            &#123;59,\t&quot;wnnwwnnwnn&quot;&#125;,            &#123;60,\t&quot;nnwnwwnwnn&quot;&#125;,            &#123;61,\t&quot;nwwnwnnnnw&quot;&#125;,            &#123;62,\t&quot;nnwwwnnnnw&quot;&#125;,            &#123;63,\t&quot;nwwwwnnnnn&quot;&#125;,            &#123;64,\t&quot;nnwnwwnnnw&quot;&#125;,            &#123;65,\t&quot;nwwnwwnnnn&quot;&#125;,            &#123;66,\t&quot;nnwwwwnnnn&quot;&#125;,            &#123;67,\t&quot;nnwnwnnwnw&quot;&#125;,            &#123;68,\t&quot;nwwnwnnwnn&quot;&#125;,            &#123;69,\t&quot;nnwwwnnwnn&quot;&#125;,            &#123;70,\t&quot;nnnnnwwwwn&quot;&#125;,            &#123;71,\t&quot;nwnnnnwnww&quot;&#125;,            &#123;72,\t&quot;nnnwnnwnww&quot;&#125;,            &#123;73,\t&quot;nwnwnnwnwn&quot;&#125;,            &#123;74,\t&quot;nnnnnwwnww&quot;&#125;,            &#123;75,\t&quot;nwnnnwwnwn&quot;&#125;,            &#123;76,\t&quot;nnnwnwwnwn&quot;&#125;,            &#123;77,\t&quot;nnnnnnwwww&quot;&#125;,            &#123;78,\t&quot;nwnnnnwwwn&quot;&#125;,            &#123;79,\t&quot;nnnwnnwwwn&quot;&#125;,            &#123;80,\t&quot;wnnnnwwwnn&quot;&#125;,            &#123;81,\t&quot;wwnnnnwnnw&quot;&#125;,            &#123;82,\t&quot;wnnwnnwnnw&quot;&#125;,            &#123;83,\t&quot;wwnwnnwnnn&quot;&#125;,            &#123;84,\t&quot;wnnnnwwnnw&quot;&#125;,            &#123;85,\t&quot;wwnnnwwnnn&quot;&#125;,            &#123;86,\t&quot;wnnwnwwnnn&quot;&#125;,            &#123;87,\t&quot;wnnnnnwwnw&quot;&#125;,            &#123;88,\t&quot;wwnnnnwwnn&quot;&#125;,            &#123;89,\t&quot;wnnwnnwwnn&quot;&#125;,            &#123;90,\t&quot;nnwnnwwwnn&quot;&#125;,            &#123;91,\t&quot;nwwnnnwnnw&quot;&#125;,            &#123;92,\t&quot;nnwwnnwnnw&quot;&#125;,            &#123;93,\t&quot;nwwwnnwnnn&quot;&#125;,            &#123;94,\t&quot;nnwnnwwnnw&quot;&#125;,            &#123;95,\t&quot;nwwnnwwnnn&quot;&#125;,            &#123;96,\t&quot;nnwwnwwnnn&quot;&#125;,            &#123;97,\t&quot;nnwnnnwwnw&quot;&#125;,            &#123;98,\t&quot;nwwnnnwwnn&quot;&#125;,            &#123;99,\t&quot;nnwwnnwwnn&quot;&#125;,        &#125;;        IntString&amp;inf = infs[ch];        int i;        for (i = 0; i &lt; 10; i++) &#123;            if (inf.psz[i] == &#x27;w&#x27;)\t*pb += 2;            if (i % 2 == 0)\t\t\t*pb += 1;            pb++;        &#125;        return pb;    &#125;&#125;;class Barcode93 :public BarcodeBase &#123;    //[n/a][n/a][n/a][n/a][n/a][n/a][n/a][b-s]public:    Barcode93() &#123;    &#125;    ~Barcode93() &#123;    &#125;    BOOL Encode93(const char* pszCode) &#123;        Clear();        const int iNum = strlen(pszCode);        BYTE*pFst = ia_Buf;        BYTE*pb = pFst;        pb = P_GetBarSpace93(pb, 47);        if (pb == 0)\treturn 0;        BOOL b;        int i, iFirst, iSecond;        for (i = 0; i &lt; iNum; i++) &#123;            b = P_AscIItoCode93Sequence((int)pszCode[i], iFirst, iSecond);            if (b == 0)\treturn 0;            pb = P_GetBarSpace93(pb, iFirst);            if (pb == 0)\treturn 0;            if (iSecond != -1) &#123;                pb = P_GetBarSpace93(pb, iSecond);                if (pb == 0)\treturn 0;            &#125;        &#125;        pb = P_GetCheckDigits(pb, pszCode);        if (pb == 0)\treturn 0;        pb = P_GetBarSpace93(pb, 48);        if (pb == 0)\treturn 0;        i_LenBuf = pb - pFst;        return 1;    &#125;    void Draw93(HDC hDC, int iX, int iY0, int iY1, const COLORREF clrBar, const COLORREF clrSpace, const int iPenW) &#123;        DrawBarcode(hDC, iX, iY0, iY1, iY1, clrBar, clrSpace, iPenW);    &#125;private:    BYTE*P_GetBarSpace93(BYTE*pb, int ch) &#123;        if (ch &lt; 0)\treturn 0;        if (ch &gt; 48)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t\t&quot;bsssbsbss&quot;&#125;,            &#123;1,\t\t&quot;bsbssbsss&quot;&#125;,            &#123;2,\t\t&quot;bsbsssbss&quot;&#125;,            &#123;3,\t\t&quot;bsbssssbs&quot;&#125;,            &#123;4,\t\t&quot;bssbsbsss&quot;&#125;,            &#123;5,\t\t&quot;bssbssbss&quot;&#125;,            &#123;6,\t\t&quot;bssbsssbs&quot;&#125;,            &#123;7,\t\t&quot;bsbsbssss&quot;&#125;,            &#123;8,\t\t&quot;bsssbssbs&quot;&#125;,            &#123;9,\t\t&quot;bssssbsbs&quot;&#125;,            &#123;10,\t&quot;bbsbsbsss&quot;&#125;,            &#123;11,\t&quot;bbsbssbss&quot;&#125;,            &#123;12,\t&quot;bbsbsssbs&quot;&#125;,            &#123;13,\t&quot;bbssbsbss&quot;&#125;,            &#123;14,\t&quot;bbssbssbs&quot;&#125;,            &#123;15,\t&quot;bbsssbsbs&quot;&#125;,            &#123;16,\t&quot;bsbbsbsss&quot;&#125;,            &#123;17,\t&quot;bsbbssbss&quot;&#125;,            &#123;18,\t&quot;bsbbsssbs&quot;&#125;,            &#123;19,\t&quot;bssbbsbss&quot;&#125;,            &#123;20,\t&quot;bsssbbsbs&quot;&#125;,            &#123;21,\t&quot;bsbsbbsss&quot;&#125;,            &#123;22,\t&quot;bsbssbbss&quot;&#125;,            &#123;23,\t&quot;bsbsssbbs&quot;&#125;,            &#123;24,\t&quot;bssbsbbss&quot;&#125;,            &#123;25,\t&quot;bsssbsbbs&quot;&#125;,            &#123;26,\t&quot;bbsbbsbss&quot;&#125;,            &#123;27,\t&quot;bbsbbssbs&quot;&#125;,            &#123;28,\t&quot;bbsbsbbss&quot;&#125;,            &#123;29,\t&quot;bbsbssbbs&quot;&#125;,            &#123;30,\t&quot;bbssbsbbs&quot;&#125;,            &#123;31,\t&quot;bbssbbsbs&quot;&#125;,            &#123;32,\t&quot;bsbbsbbss&quot;&#125;,            &#123;33,\t&quot;bsbbssbbs&quot;&#125;,            &#123;34,\t&quot;bssbbsbbs&quot;&#125;,            &#123;35,\t&quot;bssbbbsbs&quot;&#125;,            &#123;36,\t&quot;bssbsbbbs&quot;&#125;,            &#123;37,\t&quot;bbbsbsbss&quot;&#125;,            &#123;38,\t&quot;bbbsbssbs&quot;&#125;,            &#123;39,\t&quot;bbbssbsbs&quot;&#125;,            &#123;40,\t&quot;bsbbsbbbs&quot;&#125;,            &#123;41,\t&quot;bsbbbsbbs&quot;&#125;,            &#123;42,\t&quot;bbsbsbbbs&quot;&#125;,            &#123;43,\t&quot;bssbssbbs&quot;&#125;,            &#123;44,\t&quot;bbbsbbsbs&quot;&#125;,            &#123;45,\t&quot;bbbsbsbbs&quot;&#125;,            &#123;46,\t&quot;bssbbssbs&quot;&#125;,            &#123;47,\t&quot;bsbsbbbbs&quot;&#125;,            &#123;48,\t&quot;bsbsbbbbsb&quot;&#125;,        &#125;;        IntString&amp;inf = infs[ch];        int i;        for (i = 0; i &lt; 9; i++) &#123;            if (inf.psz[i] == &#x27;b&#x27;)\t*pb += 1;            pb++;        &#125;        if (ch == 48) &#123;            *pb += 1;            pb++;        &#125;        return pb;    &#125;private:    BYTE*P_GetCheckDigits(BYTE*pb, const char*&amp;pszCode) &#123;        int i, iSum, iWeight, iFirst, iSecond;        // &quot;C&quot; check digit character        iWeight = 1;        iSum = 0;        const int iNum = strlen(pszCode);        for (i = iNum - 1; i &gt; -1; i--) &#123;            P_AscIItoCode93Sequence((int)pszCode[i], iFirst, iSecond);            iSum += (iWeight*iFirst);            iWeight++;            if (iWeight &gt; 20)\tiWeight = 1;            if (iSecond != -1) &#123;                iSum += (iWeight*iSecond);                iWeight++;                if (iWeight &gt; 20)\tiWeight = 1;            &#125;        &#125;        pb = P_GetBarSpace93(pb, iSum % 47);        if (pb == 0)\treturn 0;        iWeight = 2;        iSum = iSum % 47;        for (i = iNum - 1; i &gt; -1; i--) &#123;            P_AscIItoCode93Sequence((int)pszCode[i], iFirst, iSecond);            iSum += (iWeight * iFirst);            iWeight++;            if (iWeight &gt; 15)\tiWeight = 1;            if (iSecond != -1) &#123;                iSum += (iWeight * iSecond);                iWeight++;                if (iWeight &gt; 15)\tiWeight = 1;            &#125;        &#125;        pb = P_GetBarSpace93(pb, iSum % 47);        if (pb == 0)\treturn 0;        return pb;    &#125;    BOOL P_AscIItoCode93Sequence(int iValue, int&amp;iFirst, int&amp;iSecond) &#123;        if (iValue &lt; 0)\treturn 0;        if (iValue &gt; 127)\treturn 0;        struct\tI3 &#123; int iV, iFirst, iSecond; &#125;;        I3 i3s[] =        &#123;            &#123;0,\t44,\t30&#125;,            &#123;1,\t43,\t10&#125;,            &#123;2,\t43,\t11&#125;,            &#123;3,\t43,\t12&#125;,            &#123;4,\t43,\t13&#125;,            &#123;5,\t43,\t14&#125;,            &#123;6,\t43,\t15&#125;,            &#123;7,\t43,\t16&#125;,            &#123;8,\t43,\t17&#125;,            &#123;9,\t43,\t18&#125;,            &#123;10,43,\t19&#125;,            &#123;11,43,\t20&#125;,            &#123;12,43,\t21&#125;,            &#123;13,43,\t22&#125;,            &#123;14,43,\t23&#125;,            &#123;15,43,\t24&#125;,            &#123;16,43,\t25&#125;,            &#123;17,43,\t26&#125;,            &#123;18,43,\t27&#125;,            &#123;19,43,\t28&#125;,            &#123;20,43,\t29&#125;,            &#123;21,43,\t30&#125;,            &#123;22,43,\t31&#125;,            &#123;23,43,\t32&#125;,            &#123;24,43,\t33&#125;,            &#123;25,43,\t34&#125;,            &#123;26,43,\t35&#125;,            &#123;27,44,\t10&#125;,            &#123;28,44,\t11&#125;,            &#123;29,44,\t12&#125;,            &#123;30,44,\t13&#125;,            &#123;31,44,\t14&#125;,            &#123;32,38,\t-1&#125;,            &#123;33,45,\t10&#125;,            &#123;34,45,\t11&#125;,            &#123;35,45,\t12&#125;,            &#123;36,39,\t-1&#125;,            &#123;37,42,\t-1&#125;,            &#123;38,45,\t15&#125;,            &#123;39,45,\t16&#125;,            &#123;40,45,\t17&#125;,            &#123;41,45,\t18&#125;,            &#123;42,45,\t19&#125;,            &#123;43,41,\t-1&#125;,            &#123;44,45,\t21&#125;,            &#123;45,36,\t-1&#125;,            &#123;46,37,\t-1&#125;,            &#123;47,40,\t-1&#125;,            &#123;48,0,\t-1&#125;,            &#123;49,1,\t-1&#125;,            &#123;50,2,\t-1&#125;,            &#123;51,3,\t-1&#125;,            &#123;52,4,\t-1&#125;,            &#123;53,5,\t-1&#125;,            &#123;54,6,\t-1&#125;,            &#123;55,7,\t-1&#125;,            &#123;56,8,\t-1&#125;,            &#123;57,9,\t-1&#125;,            &#123;58,45,\t35&#125;,            &#123;59,44,\t15&#125;,            &#123;60,44,\t16&#125;,            &#123;61,44,\t17&#125;,            &#123;62,44,\t18&#125;,            &#123;63,44,\t19&#125;,            &#123;64,44,\t31&#125;,            &#123;65,10,\t-1&#125;,            &#123;66,11,\t-1&#125;,            &#123;67,12,\t-1&#125;,            &#123;68,13,\t-1&#125;,            &#123;69,14,\t-1&#125;,            &#123;70,15,\t-1&#125;,            &#123;71,16,\t-1&#125;,            &#123;72,17,\t-1&#125;,            &#123;73,18,\t-1&#125;,            &#123;74,19,\t-1&#125;,            &#123;75,20,\t-1&#125;,            &#123;76,21,\t-1&#125;,            &#123;77,22,\t-1&#125;,            &#123;78,23,\t-1&#125;,            &#123;79,24,\t-1&#125;,            &#123;80,25,\t-1&#125;,            &#123;81,26,\t-1&#125;,            &#123;82,27,\t-1&#125;,            &#123;83,28,\t-1&#125;,            &#123;84,29,\t-1&#125;,            &#123;85,30,\t-1&#125;,            &#123;86,31,\t-1&#125;,            &#123;87,32,\t-1&#125;,            &#123;88,33,\t-1&#125;,            &#123;89,34,\t-1&#125;,            &#123;90,35,\t-1&#125;,            &#123;91,44,\t20&#125;,            &#123;92,44,\t21&#125;,            &#123;93,44,\t22&#125;,            &#123;94,44,\t23&#125;,            &#123;95,44,\t24&#125;,            &#123;96,44,\t32&#125;,            &#123;97,46,\t10&#125;,            &#123;98,46,\t11&#125;,            &#123;99,46,\t12&#125;,            &#123;100,46,13&#125;,            &#123;101,46,14&#125;,            &#123;102,46,15&#125;,            &#123;103,46,16&#125;,            &#123;104,46,17&#125;,            &#123;105,46,18&#125;,            &#123;106,46,19&#125;,            &#123;107,46,20&#125;,            &#123;108,46,21&#125;,            &#123;109,46,22&#125;,            &#123;110,46,23&#125;,            &#123;111,46,24&#125;,            &#123;112,46,25&#125;,            &#123;113,46,26&#125;,            &#123;114,46,27&#125;,            &#123;115,46,28&#125;,            &#123;116,46,29&#125;,            &#123;117,46,30&#125;,            &#123;118,46,31&#125;,            &#123;119,46,32&#125;,            &#123;120,46,33&#125;,            &#123;121,46,34&#125;,            &#123;122,46,35&#125;,            &#123;123,44,25&#125;,            &#123;124,44,26&#125;,            &#123;125,44,27&#125;,            &#123;126,44,28&#125;,            &#123;127,44,29&#125;,        &#125;;        I3&amp;i3 = i3s[iValue];        iFirst = i3.iFirst;        iSecond = i3.iSecond;        return 1;    &#125;&#125;;class Barcode128 :public BarcodeBase &#123;public:    Barcode128() &#123;    &#125;    ~Barcode128() &#123;    &#125;    BOOL Encode128A(const char* pszCode) &#123; return P_Encode128((char*)pszCode, SUB::SETA); &#125;    BOOL Encode128B(const char* pszCode) &#123; return P_Encode128((char*)pszCode, SUB::SETB); &#125;    BOOL Encode128C(const char* pszCode) &#123; return P_Encode128((char*)pszCode, SUB::SETC); &#125;    void Draw128(HDC hDC, int iX, int iY0, int iY1, const COLORREF clrBar, const COLORREF clrSpace, const int iPenW) &#123;        DrawBarcode(hDC, iX, iY0, iY1, iY1, clrBar, clrSpace, iPenW);    &#125;private:    struct SUB &#123;        enum &#123;            SETA = 0,            SETB = 1,            SETC = 2,        &#125;;    &#125;;    BOOL P_Encode128(char*pszCode, const int iSetIn) &#123;        Clear();        BYTE*pFst = ia_Buf;        BYTE*pb = pFst;        if (iSetIn == SUB::SETA)\tpb = P_GetBarSpace128(pb, 103);        else            if (iSetIn == SUB::SETB)\tpb = P_GetBarSpace128(pb, 104);            else\t\t\t\t\tpb = P_GetBarSpace128(pb, 105);            if (pb == 0)\treturn 0;            const int iCheckDigit = GetCheckDigit(iSetIn, pszCode);            const int iNum = strlen(pszCode);            int iChar, iCharNext;            int iPosition = 0;            int iSet = iSetIn;            while (iPosition &lt; iNum) &#123;                if (iSet == SUB::SETC) &#123;                    if (ga2_Code128[SUB::SETA][pszCode[iPosition]] == 101) &#123;                        pb = P_GetBarSpace128(pb, 101);                        iPosition++;                        iSet = SUB::SETA;                    &#125;                    else                        if (ga2_Code128[SUB::SETA][pszCode[iPosition]] == 100) &#123;                            pb = P_GetBarSpace128(pb, 100);                            iPosition++;                            iSet = SUB::SETB;                        &#125;                        else if (ga2_Code128[SUB::SETA][pszCode[iPosition]] == 102) &#123;                            pb = P_GetBarSpace128(pb, 100);                            iPosition++;                        &#125;                        else &#123;                            char chT = pszCode[iPosition + 2];                            pszCode[iPosition + 2] = 0;                            iChar = atoi(&amp;pszCode[iPosition]);                            pszCode[iPosition + 2] = chT;                            pb = P_GetBarSpace128(pb, iChar);                            if (pb == 0)\treturn 0;                            iPosition += 2;                        &#125;                &#125;                else &#123;                    int iTemp2 = pszCode[iPosition];                    if (iTemp2 &lt; -1)\tiTemp2 = iTemp2 &amp; 255;                    iChar = ga2_Code128[iSet][iTemp2];                    pb = P_GetBarSpace128(pb, iChar);                    if (pb == 0)\treturn 0;                    iPosition++;                    if (iSet == SUB::SETA) &#123;                        if (iChar == 100)\tiSet = SUB::SETB;                        else                            if (iChar == 99)\tiSet = SUB::SETC;                    &#125;                    else if (iSet == SUB::SETB) &#123;                        if (iChar == 101)\tiSet = SUB::SETA;                        else                            if (iChar == 99)\tiSet = SUB::SETC;                    &#125;                    else                        if (iChar == 98) &#123;                            if (iSet == SUB::SETA)                                iCharNext = ga2_Code128[SUB::SETB][pszCode[iPosition]];                            else                                iCharNext = ga2_Code128[SUB::SETA][pszCode[iPosition]];                            pb = P_GetBarSpace128(pb, iChar);                            if (pb == 0)\treturn 0;                            iPosition++;                        &#125;                &#125;            &#125;            pb = P_GetBarSpace128(pb, iCheckDigit);            if (pb == 0)\treturn 0;            pb = P_GetBarSpace128(pb, 106);            i_LenBuf = pb - pFst;            return 1;    &#125;    BYTE*P_GetBarSpace128(BYTE*pb, int iV) &#123;        if (iV &lt; 0)\treturn 0;        if (iV &gt; 106)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t\t&quot;bbsbbssbbss&quot;&#125;,            &#123;1,\t\t&quot;bbssbbsbbss&quot;&#125;,            &#123;2,\t\t&quot;bbssbbssbbs&quot;&#125;,            &#123;3,\t\t&quot;bssbssbbsss&quot;&#125;,            &#123;4,\t\t&quot;bssbsssbbss&quot;&#125;,            &#123;5,\t\t&quot;bsssbssbbss&quot;&#125;,            &#123;6,\t\t&quot;bssbbssbsss&quot;&#125;,            &#123;7,\t\t&quot;bssbbsssbss&quot;&#125;,            &#123;8,\t\t&quot;bsssbbssbss&quot;&#125;,            &#123;9,\t\t&quot;bbssbssbsss&quot;&#125;,            &#123;10,\t&quot;bbssbsssbss&quot;&#125;,            &#123;11,\t&quot;bbsssbssbss&quot;&#125;,            &#123;12,\t&quot;bsbbssbbbss&quot;&#125;,            &#123;13,\t&quot;bssbbsbbbss&quot;&#125;,            &#123;14,\t&quot;bssbbssbbbs&quot;&#125;,            &#123;15,\t&quot;bsbbbssbbss&quot;&#125;,            &#123;16,\t&quot;bssbbbsbbss&quot;&#125;,            &#123;17,\t&quot;bssbbbssbbs&quot;&#125;,            &#123;18,\t&quot;bbssbbbssbs&quot;&#125;,            &#123;19,\t&quot;bbssbsbbbss&quot;&#125;,            &#123;20,\t&quot;bbssbssbbbs&quot;&#125;,            &#123;21,\t&quot;bbsbbbssbss&quot;&#125;,            &#123;22,\t&quot;bbssbbbsbss&quot;&#125;,            &#123;23,\t&quot;bbbsbbsbbbs&quot;&#125;,            &#123;24,\t&quot;bbbsbssbbss&quot;&#125;,            &#123;25,\t&quot;bbbssbsbbss&quot;&#125;,            &#123;26,\t&quot;bbbssbssbbs&quot;&#125;,            &#123;27,\t&quot;bbbsbbssbss&quot;&#125;,            &#123;28,\t&quot;bbbssbbsbss&quot;&#125;,            &#123;29,\t&quot;bbbssbbssbs&quot;&#125;,            &#123;30,\t&quot;bbsbbsbbsss&quot;&#125;,            &#123;31,\t&quot;bbsbbsssbbs&quot;&#125;,            &#123;32,\t&quot;bbsssbbsbbs&quot;&#125;,            &#123;33,\t&quot;bsbsssbbsss&quot;&#125;,            &#123;34,\t&quot;bsssbsbbsss&quot;&#125;,            &#123;35,\t&quot;bsssbsssbbs&quot;&#125;,            &#123;36,\t&quot;bsbbsssbsss&quot;&#125;,            &#123;37,\t&quot;bsssbbsbsss&quot;&#125;,            &#123;38,\t&quot;bsssbbsssbs&quot;&#125;,            &#123;39,\t&quot;bbsbsssbsss&quot;&#125;,            &#123;40,\t&quot;bbsssbsbsss&quot;&#125;,            &#123;41,\t&quot;bbsssbsssbs&quot;&#125;,            &#123;42,\t&quot;bsbbsbbbsss&quot;&#125;,            &#123;43,\t&quot;bsbbsssbbbs&quot;&#125;,            &#123;44,\t&quot;bsssbbsbbbs&quot;&#125;,            &#123;45,\t&quot;bsbbbsbbsss&quot;&#125;,            &#123;46,\t&quot;bsbbbsssbbs&quot;&#125;,            &#123;47,\t&quot;bsssbbbsbbs&quot;&#125;,            &#123;48,\t&quot;bbbsbbbsbbs&quot;&#125;,            &#123;49,\t&quot;bbsbsssbbbs&quot;&#125;,            &#123;50,\t&quot;bbsssbsbbbs&quot;&#125;,            &#123;51,\t&quot;bbsbbbsbsss&quot;&#125;,            &#123;52,\t&quot;bbsbbbsssbs&quot;&#125;,            &#123;53,\t&quot;bbsbbbsbbbs&quot;&#125;,            &#123;54,\t&quot;bbbsbsbbsss&quot;&#125;,            &#123;55,\t&quot;bbbsbsssbbs&quot;&#125;,            &#123;56,\t&quot;bbbsssbsbbs&quot;&#125;,            &#123;57,\t&quot;bbbsbbsbsss&quot;&#125;,            &#123;58,\t&quot;bbbsbbsssbs&quot;&#125;,            &#123;59,\t&quot;bbbsssbbsbs&quot;&#125;,            &#123;60,\t&quot;bbbsbbbbsbs&quot;&#125;,            &#123;61,\t&quot;bbssbssssbs&quot;&#125;,            &#123;62,\t&quot;bbbbsssbsbs&quot;&#125;,            &#123;63,\t&quot;bsbssbbssss&quot;&#125;,            &#123;64,\t&quot;bsbssssbbss&quot;&#125;,            &#123;65,\t&quot;bssbsbbssss&quot;&#125;,            &#123;66,\t&quot;bssbssssbbs&quot;&#125;,            &#123;67,\t&quot;bssssbsbbss&quot;&#125;,            &#123;68,\t&quot;bssssbssbbs&quot;&#125;,            &#123;69,\t&quot;bsbbssbssss&quot;&#125;,            &#123;70,\t&quot;bsbbssssbss&quot;&#125;,            &#123;71,\t&quot;bssbbsbssss&quot;&#125;,            &#123;72,\t&quot;bssbbssssbs&quot;&#125;,            &#123;73,\t&quot;bssssbbsbss&quot;&#125;,            &#123;74,\t&quot;bssssbbssbs&quot;&#125;,            &#123;75,\t&quot;bbssssbssbs&quot;&#125;,            &#123;76,\t&quot;bbssbsbssss&quot;&#125;,            &#123;77,\t&quot;bbbbsbbbsbs&quot;&#125;,            &#123;78,\t&quot;bbssssbsbss&quot;&#125;,            &#123;79,\t&quot;bsssbbbbsbs&quot;&#125;,            &#123;80,\t&quot;bsbssbbbbss&quot;&#125;,            &#123;81,\t&quot;bssbsbbbbss&quot;&#125;,            &#123;82,\t&quot;bssbssbbbbs&quot;&#125;,            &#123;83,\t&quot;bsbbbbssbss&quot;&#125;,            &#123;84,\t&quot;bssbbbbsbss&quot;&#125;,            &#123;85,\t&quot;bssbbbbssbs&quot;&#125;,            &#123;86,\t&quot;bbbbsbssbss&quot;&#125;,            &#123;87,\t&quot;bbbbssbsbss&quot;&#125;,            &#123;88,\t&quot;bbbbssbssbs&quot;&#125;,            &#123;89,\t&quot;bbsbbsbbbbs&quot;&#125;,            &#123;90,\t&quot;bbsbbbbsbbs&quot;&#125;,            &#123;91,\t&quot;bbbbsbbsbbs&quot;&#125;,            &#123;92,\t&quot;bsbsbbbbsss&quot;&#125;,            &#123;93,\t&quot;bsbsssbbbbs&quot;&#125;,            &#123;94,\t&quot;bsssbsbbbbs&quot;&#125;,            &#123;95,\t&quot;bsbbbbsbsss&quot;&#125;,            &#123;96,\t&quot;bsbbbbsssbs&quot;&#125;,            &#123;97,\t&quot;bbbbsbsbsss&quot;&#125;,            &#123;98,\t&quot;bbbbsbsssbs&quot;&#125;,            &#123;99,\t&quot;bsbbbsbbbbs&quot;&#125;,            &#123;100,\t&quot;bsbbbbsbbbs&quot;&#125;,            &#123;101,\t&quot;bbbsbsbbbbs&quot;&#125;,            &#123;102,\t&quot;bbbbsbsbbbs&quot;&#125;,            //\t\t\t&#123;103,\t&quot;bbsbsbbbbss&quot;&#125;,                        &#123;103,\t&quot;bbsbssssbss&quot;&#125;,                        &#123;104,\t&quot;bbsbssbssss&quot;&#125;,                        &#123;105,\t&quot;bbsbssbbbss&quot;&#125;,                        &#123;106,\t&quot;bbsssbbbsbsbb&quot;&#125;,        &#125;;        int i;        IntString&amp;inf = infs[iV];        for (i = 0; i &lt; 11; i++) &#123;            if (inf.psz[i] == &#x27;b&#x27;)\t*pb += 1;            pb++;        &#125;        if (iV == 106) &#123;            *pb += 1;\tpb++;            *pb += 1;\tpb++;        &#125;        return pb;    &#125;private:    int GetCheckDigit(const int iSet, char*pszCode) &#123;        int\tiSum = 0, iCurSet = 0, iChar128, iCharNext, iWeight, iPosition;        iCurSet = iSet;        if (iSet == SUB::SETA) &#123;            iSum = 103;        &#125;        else            if (iSet == SUB::SETB) &#123;                iSum = 104;            &#125;            else                if (iSet == SUB::SETC) &#123;                    iSum = 105;                &#125;        iPosition = 0;        iWeight = 1;        const int iNum = strlen(pszCode);        while (iPosition &lt; iNum) &#123;            if (iCurSet == SUB::SETC) &#123;                if (ga2_Code128[SUB::SETA][pszCode[iPosition]] == 101) &#123;                    iChar128 = 101;                    iSum += (iWeight*iChar128);                    iPosition++;                    iWeight++;                    iCurSet = SUB::SETA;                &#125;                else if (ga2_Code128[SUB::SETA][pszCode[iPosition]] == 100) &#123;                    iChar128 = 100;                    iSum += (iWeight*iChar128);                    iPosition++;                    iWeight++;                    iCurSet = SUB::SETB;                &#125;                else                    if (ga2_Code128[SUB::SETA][pszCode[iPosition]] == 102) &#123;                        iChar128 = 102;                        iSum += (iWeight*iChar128);                        iPosition++;                        iWeight++;                    &#125;                    else &#123;                        char chT = pszCode[iPosition + 2];                        pszCode[iPosition + 2] = 0;                        iChar128 = atol(&amp;pszCode[iPosition]);                        pszCode[iPosition + 2] = chT;                        iSum += (iWeight*iChar128);                        iPosition += 2;                        iWeight++;                    &#125;            &#125;            else &#123;                int iTemp2 = pszCode[iPosition];                if (iTemp2 &lt; -1)\tiTemp2 = iTemp2 &amp; 255;                iChar128 = ga2_Code128[iCurSet][iTemp2];                iSum += (iWeight*iChar128);                iPosition++;                iWeight++;                if (iCurSet == SUB::SETA) &#123;                    if (iChar128 == 100)                        iCurSet = SUB::SETB;                    else if (iChar128 == 99)                        iCurSet = SUB::SETC;                &#125;                else                    if (iCurSet == SUB::SETB) &#123;                        if (iChar128 == 101)\t\tiCurSet = SUB::SETA;                        else if (iChar128 == 99)\tiCurSet = SUB::SETC;                    &#125;                    else                        if (iChar128 == 98) &#123;                            if (iCurSet == SUB::SETA)                                iCharNext = ga2_Code128[SUB::SETB][pszCode[iPosition]];                            else                                iCharNext = ga2_Code128[SUB::SETA][pszCode[iPosition]];                            iSum += (iWeight*iCharNext);                            iPosition++;                            iWeight++;                        &#125;            &#125;        &#125;        return iSum % 103;    &#125;&#125;;//=============================================class BarcodeEan13 :public BarcodeBase &#123;public:    BarcodeEan13() &#123;    &#125;    ~BarcodeEan13() &#123;    &#125;    BOOL EncodeEan13(const char*pszCodeIn) &#123;        Clear();        //only allow 12 characters as input        char szCode[14];        const int iLen = strlen(pszCodeIn);        if (iLen &gt; 12) &#123;            strncpy(szCode, pszCodeIn, 12);        &#125;        else &#123;            strcpy(szCode, pszCodeIn);            while (strlen(szCode) &lt; 12)\tstrcat(szCode, &quot;0&quot;);        &#125;        BYTE*pFst = ia_Buf;        BYTE*pb = pFst;        //&quot;bsb&quot;-long        *pb += 5;\tpb++;        *pb += 4;\tpb++;        *pb += 5;\tpb++;        BYTE iaCountryCode[6];        BOOL b = P_GetCountryCode(szCode[0], iaCountryCode);        if (b == 0)\treturn 0;        pb = P_GetLeftOddParity(pb, szCode[1]);        int i;        for (i = 2; i &lt; 7; i++) &#123;            if (iaCountryCode[i - 2] == &#x27;O&#x27;) &#123;                pb = P_GetLeftOddParity(pb, szCode[i]);            &#125;            else                if (iaCountryCode[i - 2] == &#x27;E&#x27;) &#123;                    pb = P_GetLeftEvenParity(pb, szCode[i]);                &#125;        &#125;        //&quot;sbsbs&quot;-long        *pb += 4;\tpb++;        *pb += 5;\tpb++;        *pb += 4;\tpb++;        *pb += 5;\tpb++;        *pb += 4;\tpb++;        for (i = 7; i &lt; 12; i++) &#123;            pb = P_GetRightPattern(pb, szCode[i]);        &#125;        i = P_GetCheckSumDigit(szCode);        pb = P_GetRightPattern(pb, (char)i);        //&quot;bsb&quot;-long        *pb += 5;\tpb++;        *pb += 4;\tpb++;        *pb += 5;\tpb++;        i_LenBuf = pb - pFst;        return 1;    &#125;    void DrawEan13(HDC hDC, int iX, int iY0, int iY10, int iY11, const COLORREF clrBar, const COLORREF clrSpace, const int iPenW) &#123;        DrawBarcode(hDC, iX, iY0, iY10, iY11, clrBar, clrSpace, iPenW);    &#125;private:    BOOL P_GetCountryCode(char ch, BYTE*pbCountryCode) &#123;        const int iV = ch - &#x27;0&#x27;;        if (iV &lt; 0)\treturn 0;        if (iV &gt; 9)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t&quot;OOOOO&quot;&#125;,            &#123;1,\t&quot;OEOEE&quot;&#125;,            &#123;2,\t&quot;OEEOE&quot;&#125;,            &#123;3,\t&quot;OEEEO&quot;&#125;,            &#123;4,\t&quot;EOOEE&quot;&#125;,            &#123;5,\t&quot;EEOOE&quot;&#125;,            &#123;6,\t&quot;EEEOO&quot;&#125;,            &#123;7,\t&quot;EOEOE&quot;&#125;,            &#123;8,\t&quot;EOEEO&quot;&#125;,            &#123;9,\t&quot;EEOEO&quot;&#125;,        &#125;;        memcpy(pbCountryCode, infs[iV].psz, 5);        return 1;    &#125;    BYTE*P_GetLeftOddParity(BYTE*pb, char ch) &#123;        const int iV = ch - &#x27;0&#x27;;        if (iV &lt; 0)\treturn 0;        if (iV &gt; 9)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t&quot;sssbbsb&quot;&#125;,            &#123;1,\t&quot;ssbbssb&quot;&#125;,            &#123;2,\t&quot;ssbssbb&quot;&#125;,            &#123;3,\t&quot;sbbbbsb&quot;&#125;,            &#123;4,\t&quot;sbsssbb&quot;&#125;,            &#123;5,\t&quot;sbbsssb&quot;&#125;,            &#123;6,\t&quot;sbsbbbb&quot;&#125;,            &#123;7,\t&quot;sbbbsbb&quot;&#125;,            &#123;8,\t&quot;sbbsbbb&quot;&#125;,            &#123;9,\t&quot;sssbsbb&quot;&#125;,        &#125;;        IntString&amp;inf = infs[iV];        int i;        for (i = 0; i &lt; 7; i++) &#123;            if (inf.psz[i] == &#x27;b&#x27;)\t*pb += 1;            pb++;        &#125;        return pb;    &#125;    BYTE*P_GetLeftEvenParity(BYTE*pb, char ch) &#123;        const int iV = ch - &#x27;0&#x27;;        if (iV &lt; 0)\treturn 0;        if (iV &gt; 9)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t&quot;sbssbbb&quot;&#125;,            &#123;1,\t&quot;sbbssbb&quot;&#125;,            &#123;2,\t&quot;ssbbsbb&quot;&#125;,            &#123;3,\t&quot;sbssssb&quot;&#125;,            &#123;4,\t&quot;ssbbbsb&quot;&#125;,            &#123;5,\t&quot;sbbbssb&quot;&#125;,            &#123;6,\t&quot;ssssbsb&quot;&#125;,            &#123;7,\t&quot;ssbsssb&quot;&#125;,            &#123;8,\t&quot;sssbssb&quot;&#125;,            &#123;9,\t&quot;ssbsbbb&quot;&#125;,        &#125;;        char*psz = infs[iV].psz;        int i;        for (i = 0; i &lt; 7; i++) &#123;            if (psz[i] == &#x27;b&#x27;)\t*pb += 1;            pb++;        &#125;        return pb;    &#125;    BYTE*P_GetRightPattern(BYTE*pb, char ch) &#123;        const int iV = ch - &#x27;0&#x27;;        if (iV &lt; 0)\treturn 0;        if (iV &gt; 9)\treturn 0;        IntString infs[] =        &#123;            &#123;0,\t&quot;bbbssbs&quot;&#125;,            &#123;1,\t&quot;bbssbbs&quot;&#125;,            &#123;2,\t&quot;bbsbbss&quot;&#125;,            &#123;3,\t&quot;bssssbs&quot;&#125;,            &#123;4,\t&quot;bsbbbss&quot;&#125;,            &#123;5,\t&quot;bssbbbs&quot;&#125;,            &#123;6,\t&quot;bsbssss&quot;&#125;,            &#123;7,\t&quot;bsssbss&quot;&#125;,            &#123;8,\t&quot;bssbsss&quot;&#125;,            &#123;9,\t&quot;bbbsbss&quot;&#125;,        &#125;;        char*psz = infs[iV].psz;        int i;        for (i = 0; i &lt; 7; i++) &#123;            if (psz[i] == &#x27;b&#x27;)\t*pb += 1;            pb++;        &#125;        return pb;    &#125;    char P_GetCheckSumDigit(const char*pszCode) &#123;        const int iLen = strlen(pszCode);        int i, iSum = 0, iItem;        for (i = iLen; i &gt;= 1; i--) &#123;            iItem = i % 2 ? (pszCode[i - 1] - &#x27;0&#x27;) * 1 : (pszCode[i - 1] - &#x27;0&#x27;) * 3;            iSum += iItem;        &#125;        iSum %= 10;        return &#x27;0&#x27; + (10 - iSum) % 10;    &#125;&#125;;#endif\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++æ„é€ å‡½æ•°æ’é›·","url":"/post/3768553066.html","content":"é»˜è®¤æ„é€ å‡½æ•°ä»€ä¹ˆæ˜¯é»˜è®¤æ„é€ å‡½æ•°ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬ä¼šè®¤ä¸ºé»˜è®¤æ„é€ å‡½æ•°å°±æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„é‚£ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶å®è¿™ç§ç†è§£ä¸å…¨é¢ã€‚**å‡†ç¡®çš„è¯´ï¼Œé»˜è®¤æ„é€ å‡½æ•°å°±æ˜¯åœ¨è°ƒç”¨æ—¶ä¸éœ€è¦æ˜¾ç¤ºåœ°ä¼ å…¥å®å‚çš„æ„é€ å‡½æ•°ã€‚**æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œä¸‹é¢ 2 ç§æ„é€ å‡½æ•°éƒ½æ˜¯é»˜è®¤æ„é€ å‡½æ•°ï¼š\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°ã€‚\tSample() &#123;\t\t// do something\t&#125;&#125;;\n\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°ã€‚è™½ç„¶æœ‰å½¢å‚ï¼Œä½†æœ‰é»˜è®¤å€¼ï¼Œè°ƒç”¨æ—¶å¯ä»¥ä¸æ˜¾å¼åœ°ä¼ å…¥å®å‚ã€‚\tSample(int m = 10) &#123;\t\t// do something\t&#125;&#125;;\n\né»˜è®¤æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºå¦‚æœå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶æ²¡æœ‰ä½¿ç”¨åˆå§‹åŒ–è¡¨è¾¾å¼ï¼Œç¼–è¯‘å™¨å°±ä¼šä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚å¦‚ï¼š\nSample s;\n\nç¼–è¯‘å™¨ä½•æ—¶ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°æœ‰ä¸€å¥å¾ˆç»å…¸çš„è¯å¯ä»¥ç”¨æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼šå”¯æœ‰é»˜è®¤æ„é€ å‡½æ•°â€œè¢«ç¼–è¯‘å™¨éœ€è¦â€çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ‰ä¼šç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;é‚£æˆ‘ä»¬åªéœ€çŸ¥é“ä»€ä¹ˆæ—¶å€™â€œè¢«ç¼–è¯‘å™¨éœ€è¦â€ï¼Œå°±å¯ä»¥çŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°äº†ã€‚ä¸‹é¢å‡ ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘éœ€è¦ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ï¼š\n\nå½“è¯¥ç±»çš„ç±»å¯¹è±¡æ•°æ®æˆå‘˜æœ‰é»˜è®¤æ„é€ å‡½æ•°æ—¶ã€‚\nå½“è¯¥ç±»çš„åŸºç±»æœ‰é»˜è®¤æ„é€ å‡½æ•°æ—¶ã€‚\nå½“è¯¥ç±»çš„åŸºç±»ä¸ºè™šåŸºç±»æ—¶ã€‚\nå½“è¯¥ç±»æœ‰è™šå‡½æ•°æ—¶ã€‚\n\næ³¨æ„äº‹é¡¹1. é¿å…â€œæ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°â€å’Œâ€œå¸¦ç¼ºçœå‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°â€åŒæ—¶å­˜åœ¨\næ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°å’Œå¸¦ç¼ºçœå‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°åŒæ—¶å­˜åœ¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”ŸäºŒä¹‰æ€§ï¼Œä»è€Œç¼–è¯‘é”™è¯¯ã€‚\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°\tSample() &#123;\t\t// do something\t\tprintf(&quot;Sample()&quot;);\t&#125;\t// é»˜è®¤æ„é€ å‡½æ•°\tSample(int m = 10) &#123;\t\t// do something\t\tprintf(&quot;Sample(int m = 10)&quot;);\t&#125;&#125;;int main()&#123;\tSample s; // error C2668: â€œSample::Sampleâ€: å¯¹é‡è½½å‡½æ•°çš„è°ƒç”¨ä¸æ˜ç¡®    return 0;&#125;\n\n2. ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¸åº”åœ¨å¯¹è±¡ååé¢åŠ ä¸Šæ‹¬å·\nä½¿ç”¨æ— å‚æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¸åº”åœ¨å¯¹è±¡ååé¢åŠ ä¸Šæ‹¬å·ï¼Œå¦åˆ™ä¼šäº§ç”Ÿç¼–è¯‘è­¦å‘Šâ€œwarning C4930: â€œSample s(void)â€: æœªè°ƒç”¨åŸå‹å‡½æ•°(æ˜¯å¦æ˜¯æœ‰æ„ç”¨å˜é‡å®šä¹‰çš„?)â€ã€‚å› ä¸ºç¼–è¯‘å™¨è¯¯è®¤ä¸ºSample s();è¯­å¥æ˜¯è¦å£°æ˜è¿”å›å€¼ä¸ºSampleç±»å‹çš„å‡½æ•°sï¼Œè€Œåˆæ²¡æ‰¾åˆ°å‡½æ•°sçš„å®šä¹‰ï¼Œæ‰€ä»¥äº§ç”Ÿäº†è­¦å‘Šã€‚\nclass Sample &#123;public:\t// é»˜è®¤æ„é€ å‡½æ•°\tSample() &#123;\t\t// do something\t\tprintf(&quot;Sample()&quot;);\t&#125;&#125;;int main()&#123;\tSample s(); // warning C4930: â€œSample s(void)â€: æœªè°ƒç”¨åŸå‹å‡½æ•°(æ˜¯å¦æ˜¯æœ‰æ„ç”¨å˜é‡å®šä¹‰çš„?)    return 0;&#125;\n\næ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä½•ä¸ºæ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨class Sample &#123;public:\t// æ„é€ å‡½æ•°å†…éƒ¨èµ‹å€¼\tSample(int a)  &#123;\t\ta_ = a;\t&#125;\t// æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨\tSample(int a) : a_(a) &#123;\t&#125;private:\tint a_;&#125;;\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼ŒSampleç±»çš„ 2 ä¸ªæ„é€ å‡½æ•°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åˆå§‹åŒ–æˆå‘˜å˜é‡a_ï¼ŒåŒºåˆ«åœ¨äºä¸€ä¸ªé‡‡ç”¨çš„æ˜¯æ„é€ å‡½æ•°å†…éƒ¨èµ‹å€¼çš„æ–¹å¼æ¥åˆå§‹åŒ–çš„ï¼Œå¦ä¸€ä¸ªé‡‡ç”¨çš„æ˜¯æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼æ¥åˆå§‹åŒ–çš„ã€‚\nä½•æ—¶å¿…é¡»ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨å¦‚æœæŒ‰ç…§ä¸Šé¢æ‰€è¯´çš„ï¼Œæ—¢ç„¶ 2 ç§åˆå§‹åŒ–æˆå‘˜å˜é‡çš„æ–¹å¼æ‰€èµ·å¾—ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆåœ¨å“ªäº›æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨çš„äº†ï¼Ÿä¸‹é¢ 2 ç§æƒ…å†µçš„æˆå‘˜å˜é‡å¿…é¡»ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨çš„æ–¹å¼æ¥åˆå§‹åŒ–ï¼š\n\næˆå‘˜å˜é‡æ˜¯ const å¸¸é‡ã€‚\næˆå‘˜å˜é‡æ˜¯å¼•ç”¨ç±»å‹ã€‚\n\nä¸‹é¢ä¾‹å­æ¼”ç¤ºäº†æˆå‘˜å˜é‡æ˜¯constå¸¸é‡å’Œå¼•ç”¨ç±»å‹æ—¶ï¼Œå¦‚ä½•åˆå§‹åŒ–å®ƒä»¬ï¼š\nclass Sample &#123;public:\tSample() : kCount(11), name_(std::string(&quot;jeff&quot;))  &#123;\t&#125;private:\tstd::string &amp;name_;\tconst int kCount;&#125;;\n\n\nåˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºé—®é¢˜ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œæˆå‘˜å˜é‡åˆå§‹åŒ–æ—¶ï¼Œè¦æ³¨æ„æˆå‘˜å˜é‡çš„åˆå§‹åŒ–é¡ºåºã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ï¼Œç°æœ‰ç±»SeqSampleæœ‰ 3 ä¸ªæˆå‘˜å˜é‡a_, b_, c_ï¼Œæ„é€ å‡½æ•°è¢«è®¾è®¡ä¸ºå°†a_, b_, c_éƒ½åˆå§‹åŒ–ä¸ºmï¼Œä¹Ÿå°±æ˜¯a_ == b_ == c_ == mï¼š\nclass SeqSample &#123;public:\tSeqSample(int m) :\t\ta_(m),\t\tb_(a_),\t\tc_(b_)\t&#123;\t&#125;private:\tint b_;\tint a_;\tint c_;&#125;;int main()&#123;\tSeqSample ss(1);    return 0;&#125;\n\né€šè¿‡è°ƒè¯•å™¨è§‚å¯Ÿåˆ°æ‰§è¡Œæ„é€ å‡½æ•°åˆå§‹åŒ–ä¹‹åï¼Œæˆå‘˜å˜é‡a_, b_, c_çš„å€¼åˆ†åˆ«ä¸ºï¼š\nb_ = -858993460a_ = 1c_ = -858993460\n\nè€Œä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„a_ = 1  b_ = 1 c_ = 1ã€‚\nå‡ºç°è¿™ç§é—®é¢˜çš„åŸå› åœ¨äºï¼šç¼–è¯‘å™¨å¯¹æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å˜é‡è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¸æ˜¯æŒ‰ç…§å˜é‡åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„é¡ºåºæ¥åˆå§‹åŒ–çš„ï¼Œè€Œæ˜¯æŒ‰ç…§å˜é‡åœ¨ç±»ä¸­çš„å£°æ˜é¡ºåºæ¥åˆå§‹åŒ–çš„ã€‚\næ‰€ä»¥ï¼Œåœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å˜é‡æœ‰ä¾èµ–å…³ç³»æ—¶ï¼ˆå¦‚ä¸Šé¢çš„b_ä¾èµ–äºa_çš„åˆå§‹åŒ–ç»“æœï¼‰ï¼Œè¦ç‰¹åˆ«æ³¨æ„è¿™ç§æƒ…å†µã€‚\nåˆå§‹åŒ–åˆ—è¡¨çš„å¦ä¸€ä¸ªå¥½å¤„å…ˆæ¨¡ç³Šçš„æŠŠè¿™ä¸ªå¥½å¤„è¯´å‡ºæ¥ï¼Œä¸å¤ªæ˜ç™½çš„ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼šè‹¥æˆå‘˜å˜é‡æ˜¯ç±»å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‡å°‘ä¸€æ¬¡é»˜è®¤æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚\næµ‹è¯•ä»£ç å¦‚ä¸‹ï¼ˆå£°æ˜äº†ä¸€ä¸ªAppleç±»ï¼Œä¸€ä¸ªTestç±»ï¼ŒTest ç±»ä¸­æœ‰ 2 ä¸ª Apple å¯¹è±¡apple1_, apple2_ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œapple1_é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨æ¥åˆå§‹åŒ–ï¼Œapple2_é€šè¿‡å‡½æ•°ä½“ä¸­çš„èµ‹å€¼è¯­å¥æ¥åˆå§‹åŒ–ï¼‰ï¼š\nclass Apple &#123;public:\tApple() &#123;\t\tprintf(&quot;é»˜è®¤æ„é€ å‡½æ•°\\n&quot;);\t&#125;\tApple(const Apple &amp;that) &#123;\t\tprintf(&quot;å¤åˆ¶æ„é€ å‡½æ•°\\n&quot;);\t&#125;\tApple&amp; operator = (const Apple&amp;that) &#123;\t\tprintf(&quot;èµ‹å€¼è¿ç®—ç¬¦é‡è½½\\n&quot;);\t\treturn *this;\t&#125;&#125;;class Test &#123;public:\tTest(const Apple &amp;apple) : apple1_(apple) &#123;\t\tapple2_ = apple;\t&#125;private:\tApple apple1_;\tApple apple2_;&#125;;int main()&#123;\tApple apple;\tTest t(apple);    return 0;&#125;\n\nè¿è¡Œç»“æœï¼š\né»˜è®¤æ„é€ å‡½æ•°å¤åˆ¶æ„é€ å‡½æ•°é»˜è®¤æ„é€ å‡½æ•°èµ‹å€¼è¿ç®—ç¬¦é‡è½½\n\n4 è¡Œè¾“å‡ºåˆ†åˆ«ç”±ä¸åŒçš„è¯­å¥äº§ç”Ÿï¼Œå¦‚å›¾ï¼š\napple1_(apple)ç›´æ¥æ‰§è¡Œçš„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥åªäº§ç”Ÿä¸€è¡Œè¾“å‡ºï¼›è€Œapple2_ = apple;å´æ˜¯å…ˆä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°æ„é€ äº†ä¸€ä¸ª apple2å¯¹è±¡ï¼Œç„¶åå†é€šè¿‡èµ‹å€¼è¿ç®—ç¬¦å°† apple çš„å†…å®¹æ›´æ–°åˆ° apple2ä¸­ï¼Œæ‰€ä»¥äº§ç”Ÿäº† 2 è¡Œè¾“å‡ºã€‚\næ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨çš„å¼‚å¸¸æ•è·æ„é€ çš„å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚å¸¸æ•è·ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š\nclass Foo &#123;public:\tFoo::Foo(int n)\t\ttry :size(n), array(new int[n]) &#123;\t\t//...\t&#125;\tcatch (const std::bad_alloc&amp; e) &#123;\t\tprintf(&quot;%s\\n&quot;, e.what());\t&#125;private:\tint size;\tint *array;&#125;;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++æ ‡å‡†åº“çº¿ç¨‹çš„å¯åŠ¨ä¸é€€å‡º","url":"/post/2289160283.html","content":"æœ¬æ–‡ç®€è¦ä»‹ç» C++æ ‡å‡†åº“æä¾›çš„å‡ ç§çº¿ç¨‹æ“ä½œæ–¹æ³•ï¼Œä¸»è¦ä»‹ç»å¦‚ä½•åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å·²ç»ç»“æŸè¿è¡Œã€‚\n\n\nstd::threadstd::thread æœªç›´æ¥æä¾›åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ç»“æŸçš„æ–¹æ³•ã€‚\nå¦‚æœçº¿ç¨‹æœªè¿›è¡Œ detach ä¸”æ­¤æ—¶è¯¥çº¿ç¨‹å¤„äº joinable çŠ¶æ€ï¼Œææ„è¯¥çº¿ç¨‹å¯¹è±¡ä¼šè§¦å‘å¼‚å¸¸ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;çº¿ç¨‹å¤„äº joinable çŠ¶æ€ä¸ä»£è¡¨çº¿ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œjoinable çŠ¶æ€ä»…ä»£è¡¨çº¿ç¨‹æ˜¯å¯æ‰§è¡Œçš„ï¼Œä¸‹é¢å‡ ç§æƒ…å†µä¸‹çº¿ç¨‹ä¼šå¤„äºé joinable çŠ¶æ€ï¼š\n\nä½¿ç”¨ç¼ºçœæ„é€ å‡½æ•°æ„é€ çš„ std::thread å¯¹è±¡ã€‚\nè¯¥çº¿ç¨‹å¯¹è±¡çš„æ‰€æœ‰æƒå·²è¢« move ç»™å…¶ä»–å¯¹è±¡ã€‚\nè¯¥çº¿ç¨‹å¯¹è±¡å·²ç»è°ƒç”¨è¿‡ join æˆ– detach å‡½æ•°ã€‚\n\nç”±æ­¤å¯è§ï¼Œå³ä¾¿çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæˆï¼Œåªè¦æœªè°ƒç”¨è¿‡ join æ–¹æ³•ï¼Œçº¿ç¨‹ä»ç„¶æ˜¯ joinable çŠ¶æ€ã€‚\n#include &lt;iostream&gt;#include &lt;thread&gt;std::thread Thread1() &#123;  std::thread t([]() &#123;    std::this_thread::sleep_for(std::chrono::milliseconds(1000));  &#125;);  return t;&#125;int main() &#123;  std::thread t1 = Thread1();  t1.join();  //ç­‰å¾…çº¿ç¨‹ç»“æŸ  std::thread t2([]() &#123;    std::this_thread::sleep_for(std::chrono::milliseconds(1000));  &#125;);  std::cout &lt;&lt; &quot;thread id:&quot; &lt;&lt; t2.get_id() &lt;&lt; std::endl;  std::cout &lt;&lt; std::boolalpha &lt;&lt; &quot;joinable:&quot; &lt;&lt; t2.joinable() &lt;&lt; std::endl;  // true  t2.detach();  std::cout &lt;&lt; std::boolalpha &lt;&lt; &quot;joinable:&quot; &lt;&lt; t2.joinable() &lt;&lt; std::endl;  // false  std::this_thread::sleep_for(std::chrono::milliseconds(2000));  return 0;&#125;\n\nè¿˜å¯ä»¥é€šè¿‡native_handleæ–¹æ³•è·å–çº¿ç¨‹çš„æœ¬åœ°å¥æŸ„ï¼Œç„¶åä½¿ç”¨ç³»ç»Ÿ API å‡½æ•°æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦åœ¨è¿è¡Œï¼Œå¦‚ï¼š\nif(WaitForSingleObject((HANDLE)t.native_handle(), 0) == WAIT_OBJECT_0) &#123;    // Thread stopped&#125;else &#123;    // Thread running&#125;\n\nstd::asyncé€šè¿‡std::asyncå¯ä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ç»“æŸè¿è¡Œã€‚\n#include &lt;iostream&gt;#include &lt;future&gt;int main()&#123;    std::future&lt;void&gt; f = std::async(std::launch::async, []() &#123;        std::this_thread::sleep_for(std::chrono::milliseconds(1000));    &#125;);    bool isRunning = f.valid() &amp;&amp; f.wait_for(std::chrono::milliseconds(0)) == std::future_status::timeout;    std::cout &lt;&lt; isRunning &lt;&lt; std::endl;    f.wait();    isRunning = f.valid() &amp;&amp; f.wait_for(std::chrono::milliseconds(0)) == std::future_status::timeout;    std::cout &lt;&lt; isRunning &lt;&lt; std::endl;    return 0;&#125;\n\nåˆ¤æ–­ std::future æ˜¯å¦ç»“æŸbool isRunning = f.valid() &amp;&amp;                 f.wait_for(std::chrono::milliseconds(0)) == std::future_status::timeout;\n\nstd::shared_futurestd::futureä¸æ”¯æŒèµ‹å€¼æ„é€ ï¼Œéœ€è¦ä½¿ç”¨std::shared_futureã€‚\nstd::shared_future&lt;void&gt; f1 = std::async(std::launch::async, []() &#123;       std::this_thread::sleep_for(std::chrono::milliseconds(1000)); &#125;);std::shared_future&lt;void&gt; f2 = f1;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C++çš„APIè®¾è®¡è§„èŒƒ","url":"/post/128186902.html","content":"ã€ŠC++ API è®¾è®¡ã€‹æ˜¯ä¸€æœ¬éå¸¸ä¸é”™çš„ä¹¦ï¼Œè¯¥ä¹¦å†…å®¹è¿œè¿œè¶…è¿‡äº†å®ƒæ ‡é¢˜æ‰€æŒ‡çš„ C++ API è®¾è®¡ï¼Œå®ƒä¸ä»…ä»…è®²è¿°äº†ä¸ç¼–ç¨‹è¯­è¨€æ— å…³çš„ API è®¾è®¡éœ€è¦éµå¾ªçš„ä¸€äº›è§„èŒƒï¼ŒåŒæ—¶ä¹Ÿä»‹ç»äº†å¾ˆå¤š C++å¼€å‘ä¸­éœ€è¦éµå®ˆä¸€äº›å‡†åˆ™ï¼Œå¦‚æœåœ¨å¼€å‘ä¸­èƒ½éµå¾ªè¿™äº›å‡†åˆ™ï¼Œå°†æœ‰åˆ©äºæˆ‘ä»¬å†™å‡ºé«˜è´¨é‡çš„ä»£ç ã€‚\n\n\nè¯»ç½¢è¯¥ä¹¦ï¼Œå—ç›ŠåŒªæµ…ï¼Œæœ¬æ–‡å°†è¯¥ä¹¦ä¸­æˆ‘è®¤ä¸ºæ¯”è¾ƒå—ç”¨çš„éƒ¨åˆ†æ‘˜å½•ä¸‹æ¥ã€‚\n\nåªæœ‰ä¸¤ç§ç¼–ç¨‹è¯­è¨€ï¼šä¸€ç§æ˜¯å¤©å¤©æŒ¨éª‚çš„ï¼Œå¦ä¸€ç§æ˜¯æ²¡äººç”¨çš„ã€‚\n\nè‰¯å¥½çš„ API è®¾è®¡çš„é¦–è¦ç›®æ ‡æ˜¯ï¼šåœ¨ä¸ºå®¢æˆ·æä¾›æ‰€éœ€åŠŸèƒ½çš„å‰æä¸‹ï¼Œä½¿ç”¨æ–°å‘å¸ƒçš„ API å¯¹å®¢æˆ·çš„ä»£ç é€ æˆçš„å½±å“åº”è¯¥æœ€å°ï¼Œç†æƒ³çš„æƒ…å†µä¸‹åº”è¯¥æ˜¯é›¶å½±å“ã€‚\n\nC++ æ²¡æœ‰åŒ…ç§æœ‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯ä½¿ç”¨æ›´åŠ å®½æ³›çš„å‹å…ƒçš„æ¦‚å¿µï¼Œä»¥å…è®¸æŒ‡å®šçš„ç±»å’Œæ–¹æ³•è®¿é—®æŸä¸ªç±»çš„å—ä¿æŠ¤çš„å’Œç§æœ‰çš„æˆå‘˜ã€‚è™½ç„¶å‹å…ƒå¯ä»¥ç”¨æ¥åŠ å¼ºå°è£…ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ä¸å½“ï¼Œå®ƒä¼šå‘ç”¨æˆ·æš´éœ²è¿‡å¤šçš„å†…éƒ¨ç»†èŠ‚ã€‚\n\nç±»çš„æ•°æ®æˆå‘˜åº”è¯¥å§‹ç»ˆå£°æ˜ä¸ºç§æœ‰çš„ï¼Œè€Œä¸æ˜¯å…¬æœ‰çš„æˆ–å—ä¿æŠ¤çš„ã€‚\n\nç±»åªåº”è¯¥å®šä¹‰åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ€ä¹ˆåšã€‚ä¸è¦å°†æŸä¸€ä¸ªåŠŸèƒ½çš„å…·ä½“å®ç°æ­¥éª¤æš´éœ²å‡ºæ¥ï¼Œå³ä¾¿å®šä¹‰ä¸ºç§æœ‰çš„ï¼Œä¹Ÿå°½é‡ä¸è¦è¿™æ ·åšã€‚å¯ä»¥ä½¿ç”¨PimplæŠ€å·§æ¥å°†æ‰€æœ‰çš„ç§æœ‰æ•°æ®æˆå‘˜å’Œå‡½æ•°éš”ç¦»åˆ°ä¸€ä¸ª.cpp æ–‡ä»¶ä¸­ç‹¬ç«‹å®ç°çš„ç±»æˆ–ç»“æ„ä½“å†…ã€‚\n\nä¸è¦è¿‡åº¦æ‰¿è¯ºã€‚å½“ä¸ç¡®å®šæ˜¯å¦éœ€è¦æŸä¸ªæ¥å£æ—¶ï¼Œå°±ä¸è¦æä¾›æ­¤æ¥å£ã€‚è°¨è®°å¥¥å¡å§†ï¼ˆOccamï¼‰å‰ƒåˆ€åŸç†ï¼šè‹¥æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“ã€‚\n\nè°¨æ…æ·»åŠ è™šå‡½æ•°ï¼Œä½¿ç”¨è™šå‡½æ•°è¦æ„è¯†åˆ°å…¶æ½œåœ¨çš„éšæ‚£ï¼š\n\nå¯¹åŸºç±»çœ‹ä¼¼æ— å®³çš„ä¿®æ”¹å¯èƒ½ä¼šç»™å®¢æˆ·å¸¦æ¥ä¸åˆ©çš„å½±å“ã€‚\nå®¢æˆ·å¯èƒ½ä¼šä»¥ä½ æ ¹æœ¬æ— æ³•é¢„æ–™çš„æ–¹å¼æ¥ä½¿ç”¨ APIã€‚\nå®¢æˆ·å¯èƒ½é‡‡ç”¨ä¸æ­£ç¡®çš„æˆ–æ˜“äºå‡ºé”™çš„æ–¹å¼æ¥æ‰©å±• APIã€‚\né‡å†™è™šå‡½æ•°å¯èƒ½ç ´åç±»çš„å†…éƒ¨åŸæœ‰é€»è¾‘çš„å®Œæ•´æ€§ã€‚\n\n\nä½¿ç”¨è™šå‡½æ•°è¦æ³¨æ„çš„æ–¹é¢ï¼š\n\nè™šå‡½æ•°çš„è°ƒç”¨å¿…é¡»åœ¨è¿è¡Œæ—¶æŸ¥è™šå‡½æ•°è¡¨æ‰èƒ½å†³å®šï¼Œæ— æ³•åœ¨ç¼–è¯‘æ—¶å†³å®šã€‚\nä½¿ç”¨è™šå‡½æ•°éœ€è¦ç»´æŠ¤è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼Œè¿›è€Œå¢åŠ å¯¹è±¡çš„å¤§å°ã€‚\næ·»åŠ ã€é‡æ’æˆ–è€…ç§»é™¤è™šå‡½æ•°ä¼šç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚å› ä¸ºè™šå‡½æ•°è°ƒç”¨é€šå¸¸ç”¨ç±»çš„è™šå‡½æ•°è¡¨çš„æ•´å‹åç§»é‡æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥æ”¹å˜è™šå‡½æ•°çš„é¡ºåºï¼Œæˆ–è€…æ‰§è¡Œå¯èƒ½ä¼šå¼•èµ·å…¶ä»–è™šå‡½æ•°çš„é¡ºåºå‘é€å˜åŒ–çš„æ“ä½œï¼Œéƒ½éœ€è¦é‡æ–°ç¼–è¯‘ç°æœ‰ä»£ç ã€‚\nå¦‚æœç±»åŒ…å«äº†ä»»ä¸€è™šå‡½æ•°ï¼Œé‚£ä¹ˆå¿…é¡»å°†ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ã€‚è¿™æ ·å­ç±»å°±å¯ä»¥é‡Šæ”¾å…¶å¯èƒ½ç”³è¯·çš„é¢å¤–èµ„æºã€‚\nç»ä¸åœ¨æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°ï¼Œè¿™äº›è°ƒç”¨ä¸ä¼šæŒ‡å‘ä¹‹ç±»ã€‚\n\n\nSutter å»ºè®®æ¥å£åº”è¯¥æ˜¯éè™šçš„ï¼ŒåŒæ—¶åœ¨é€‚å½“çš„æƒ…å†µä¸‹ä½¿ç”¨æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ã€‚\n\nç»™å‡ºæ¸…æ™°çš„ã€æè¿°æ€§å¼ºçš„ä¸”æ°å½“çš„åå­—æ˜¯ API è®¾è®¡ä¸­æœ€å›°éš¾çš„ä»»åŠ¡ä¹‹ä¸€ã€‚\n\né¿å…ç¼–å†™æ‹¥æœ‰å¤šä¸ªç›¸åŒç±»å‹å‚æ•°çš„å‡½æ•°ã€‚\n\nä½¿ç”¨ä¸€è‡´çš„ï¼ˆç»Ÿä¸€è§„èŒƒï¼‰å‡½æ•°å‘½ä»¤å’Œå‚æ•°é¡ºåºã€‚\n\nAPI æ¥å£åº”è¯¥æ˜¯å¹³å°ç‹¬ç«‹çš„ã€‚ä¸è¦å°†å¹³å°ç›¸å…³çš„#ifæˆ–#ifdefè¯­å¥æ”¾åœ¨å…¬å…±çš„ API ä¸­ï¼Œå› ä¸ºè¿™äº›è¯­å¥æš´éœ²äº†å®ç°çš„ç»†èŠ‚ï¼Œå¹¶ä½¿ API å› å¹³å°è€Œå¼‚ã€‚\n\nä¼˜ç§€çš„ API è¡¨ç°ä¸ºæ¾è€¦åˆå’Œé«˜å†…èšã€‚\n\né™¤éç¡®å®éœ€è¦#includeç±»çš„å®Œæ•´å®šä¹‰ï¼Œå¦åˆ™åº”è¯¥ä¸ºç±»ä½¿ç”¨å‰ç½®å£°æ˜ã€‚\n\né€šå¸¸ï¼Œä¼˜ç§€çš„è½¯ä»¶å·¥ç¨‹å®è·µçš„ç›®æ ‡æ˜¯å»é™¤å†—ä½™ï¼Œå³ç¡®ä¿æ¯ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹æˆ–è¡Œä¸ºæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡å®ç°ã€‚è€Œä»£ç å¤ç”¨æ„å‘³ç€è€¦åˆï¼Œå› æ­¤ç•¥å¾®çš„å¢åŠ é‡å¤ä»¥æ–­ç»è¿‡åˆ†çš„è€¦åˆå…³ç³»æœ‰æ—¶æ˜¯å€¼å¾—çš„ã€‚\n\n\n\nã€ŠC++ API è®¾è®¡ã€‹[ç¾] Martin Reddy è‘—ï¼›åˆ˜æ™“å¨œï¼Œè‡§ç§€æ¶›ï¼Œæ—å¥ è¯‘\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"C99æŸ”æ€§æ•°ç»„","url":"/post/2984623496.html","content":"åœ¨è®²è¿°æŸ”æ€§æ•°ç»„ï¼ˆFlexible Arrayï¼‰ä¹‹å‰ï¼Œé¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹ä¸å®Œæ•´ç±»å‹ (Incomplete Type)ã€‚ä¸å®Œå…¨ç±»å‹æ˜¯æš‚æ—¶æ²¡æœ‰å®Œå…¨å®šä¹‰å¥½çš„ç±»å‹ï¼Œç¼ºä¹è¶³å¤Ÿçš„ä¿¡æ¯ï¼ˆä¾‹å¦‚é•¿åº¦ã€ç±»å‹ï¼‰å»æè¿°ä¸€ä¸ªå®Œæ•´çš„ç±»å‹ã€‚åœ¨C&#x2F;C++ä¸­ä¸å®Œå…¨ç±»å‹æœ‰ä¸‰ç§ä¸åŒå½¢å¼ï¼švoidã€æœªæŒ‡å®šé•¿åº¦çš„æ•°ç»„ä»¥åŠå…·æœ‰éæŒ‡å®šå†…å®¹çš„ç»“æ„å’Œç±»ã€‚\n\n\næ¯”å¦‚é€šè¿‡ä½¿ç”¨ä¸å®Œæ•´ç±»å‹å¯ä»¥åœ¨å¤´æ–‡ä»¶ä¸­éšè—ç»“æ„ä½“å®šä¹‰çš„å…·ä½“ç»†èŠ‚ï¼Œå¦‚ï¼š\n// ring_buffer.htypedef struct _ring_buffer_type ringbuf_t;int ring_buffer_create(ringbuf_t **rcb, size_t size);int ring_buffer_write(ringbuf_t * rcb, uint8_t *pdata, size_t len);\n\n// ring_buffer.cstruct _ring_buffer_type&#123;    uint8_t* data;    size_t   size;    &#125;;\n\næˆ‘ä»¬åœ¨C++ä¸­ç»å¸¸ä½¿ç”¨çš„â€œå‘å‰å£°æ˜â€ä¹Ÿæ˜¯ä¸å®Œæ•´ç±»å‹çš„å…·ä½“åº”ç”¨ã€‚\nå…³äºæŸ”æ€§æ•°ç»„æ‰€ä½¿ç”¨çš„ä¸å®Œæ•´ç±»å‹åˆ™æ˜¯â€œæœªæŒ‡å®šé•¿åº¦çš„æ•°ç»„â€ï¼š\nint str[];\n\nC99 å°†æŸ”æ€§æ•°ç»„çº³å…¥äº†æ ‡å‡†ä¹‹ä¸­ï¼Œæ ¹æ® C99 è§„å®šï¼ŒæŸ”æ€§æ•°ç»„éœ€è¦æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š\n\næŸ”æ€§æ•°ç»„åªåº”ç”¨åœ¨ç»“æ„ä½“ä¸­ã€‚\nç»“æ„ä½“ä¸­ä¸èƒ½åªæœ‰æŸ”æ€§æ•°ç»„ä¸€ä¸ªæˆå‘˜ï¼Œè€Œä¸”æŸ”æ€§æ•°ç»„å¿…é¡»æ˜¯ç»“æ„ä½“çš„æœ€åä¸€ä¸ªæˆå‘˜ã€‚\nç”±äºæŸ”æ€§æ•°ç»„æ²¡æœ‰æŒ‡å®šå¤§å°ï¼Œå› æ­¤ä¸å ç”¨å­˜å‚¨ç©ºé—´ã€‚\n\nå¦‚ä¸‹é¢ç»“æ„ä½“ä¸­çš„ data æ•°ç»„å°±æ˜¯æŸ”æ€§æ•°ç»„ï¼š\nstruct Package &#123;  int len;  char* data[];&#125;\n\nç”±äº data æ•°ç»„çš„é•¿åº¦ä¸º0ï¼Œå› æ­¤ä¸å ç”¨å­˜å‚¨ç©ºé—´ï¼š\nsizeof(Package) == sizeof(int)\n\nåŒ…å«æŸ”æ€§æ•°ç»„æˆå‘˜çš„ç»“æ„ä½“éœ€è¦ä½¿ç”¨ malloc() å‡½æ•°è¿›è¡Œå†…å­˜çš„åŠ¨æ€åˆ†é…ï¼Œå¹¶ä¸”åˆ†é…çš„å†…å­˜é€šå¸¸å¤§äºç»“æ„ä½“çš„å¤§å°ï¼Œå¤šä½™çš„ç©ºé—´è‡ªåŠ¨åˆ†é…ç»™äº†æŸ”æ€§æ•°ç»„ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨æŸ”æ€§æ•°ç»„æ¥å­˜å‚¨é¢å¤–çš„æ•°æ®äº†ã€‚\nconst char data[20] = &quot;hello&quot;;const int dataLen = strlen(data);Package* pck = (Package*)malloc(sizeof(Package) + dataLen);if (pck) &#123;    pck-&gt;len = dataLen;    memcpy(pck-&gt;data, data, dataLen);    // ...    free(pck);&#125;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"LLVM-Obfuscatorä»£ç æ··æ·†","url":"/post/2256274631.html","content":"LLVM-Obfuscator å¯ç”¨äºæ··æ·†ç¨‹åºçš„ä»£ç é€»è¾‘ï¼Œæœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ LLVM-Obfuscator è¿›è¡Œä»£ç é€»è¾‘çš„æ··æ·†ã€‚\n\n\nå®‰è£… VS Clang ç»„ä»¶\nç¼–è¯‘ LLVM-Obfuscatorä½¿ç”¨ heroims çš„ Fork ç‰ˆæœ¬ï¼šheroims&#x2F;obfuscator\nClone æœ€æ–° 13.x åˆ†æ”¯git clone -b llvm-13.x https://github.com/obfuscator-llvm/obfuscator.git\n\nå®‰è£… mingwä»https://github.com/niXman/mingw-builds-binaries/releases ä¸‹è½½ 32 ä½å’Œ 64 ä½ MingW:\n\ni686-12.2.0-release-posix-dwarf-msvcrt-rt_v10-rev2.7z\nx86_64-12.2.0-release-posix-seh-msvcrt-rt_v10-rev2.7z\n\nåˆ†åˆ«è§£å‹åˆ°ä¸åŒçš„ç›®å½•ã€‚\nç¼–è¯‘ 64 ä½ LLVM-Obfuscatoræ‰“å¼€ CMDï¼Œå°† 64 ä½ MingW çš„ bin ç›®å½•æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ï¼š\nSET PATH=%PATH%;C:\\mingw64\\x86_64-12.2.0-release-posix-seh-msvcrt-rt_v10-rev2\\bin\n\nåœ¨å‘½ä»¤è¡Œè¿›å…¥ LLVM-Obfuscator æ‰€åœ¨ç›®å½•ï¼Œå¼€å§‹ç¼–è¯‘ï¼š\nmkdir build64cd build64cmake -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_PROJECTS=&quot;clang&quot; -DLLVM_CREATE_XCODE_TOOLCHAIN=ON -DLLVM_ENABLE_NEW_PASS_MANAGER=OFF -G &quot;MinGW Makefiles&quot; ../llvmmingw32-make.exe -j8\n\n2.4 ç¼–è¯‘ 32 ä½ LLVM-Obfuscatoré‡æ–°æ‰“å¼€ CMDï¼Œå°† 32 ä½ MingW çš„ bin ç›®å½•æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ï¼š\nSET PATH=%PATH%;C:\\mingw32\\i686-12.2.0-release-posix-dwarf-msvcrt-rt_v10-rev2\\bin\n\nåœ¨å‘½ä»¤è¡Œè¿›å…¥ LLVM-Obfuscator æ‰€åœ¨ç›®å½•ï¼Œå¼€å§‹ç¼–è¯‘ï¼š\nmkdir build32cd build32cmake -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_PROJECTS=&quot;clang&quot; -DLLVM_CREATE_XCODE_TOOLCHAIN=ON -DLLVM_ENABLE_NEW_PASS_MANAGER=OFF -G &quot;MinGW Makefiles&quot; ../llvmmingw32-make.exe -j8\n\nç”¨ç¼–è¯‘è¾“å‡ºè¦†ç›–åˆ° VS ClangVisual Studio çš„ Clang ä½äºC:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\VC\\Tools\\Llvmç›®å½•ï¼Œåˆ†åˆ«å°†ç¼–è¯‘çš„ 32 ä½å’Œ 64 ä½binç›®å½•ä¸­çš„æ–‡ä»¶è¦†ç›–åˆ° VS Clang çš„binç›®å½•ä¸­ï¼ˆæ³¨æ„ï¼šåœ¨è¦†ç›–ä¹‹å‰ï¼Œæœ€å¥½å…ˆå¤‡ä»½ï¼‰ã€‚\nè®¾ç½®ç¯å¢ƒå˜é‡åœ¨ç¼–è¯‘å®Œä¹‹åï¼Œå°† 32 ä½å’Œ 64 ä½ MingW çš„binç›®å½•è·¯å¾„éƒ½æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ã€‚å› ä¸º VS ç¼–è¯‘æ—¶ä¼šå¯åŠ¨ clang.exeï¼Œè€Œ clang.exe éœ€è¦ä¾èµ– MingWã€‚\n5. VS å·¥ç¨‹é…ç½®\n\nå‘½ä»¤è¡Œå…¶ä»–é€‰é¡¹å¦‚ä¸‹ï¼š\n-D__CUDACC__ -D_ALLOW_COMPILER_AND_STL_VERSION_MISMATCH -mllvm -bcf -mllvm -bcf_prob=73 -mllvm -bcf_loop=1 -mllvm -sub -mllvm -sub_loop=5 -mllvm -fla -mllvm -split_num=5 -mllvm -aesSeed=DEADBEEFDEADCODEDEADBEEFDEADCODE\n\næ··æ·†é…ç½®å‚æ•°å¼€å¯æ§åˆ¶æµæ‰å¹³åŒ–-mllvm -fla å¼€å¯æ§åˆ¶æµæ‰å¹³åŒ–\n-mllvm -split æ¿€æ´»åŸºæœ¬å—åˆ’åˆ†ã€‚ä¸€èµ·ä½¿ç”¨æ—¶èƒ½æé«˜æ‰“å¹³èƒ½åŠ›ã€‚\n-mllvm -split_num=3 å¦‚æœæ¿€æ´»æ§åˆ¶æµæ‰“å¹³ï¼Œå¯¹æ¯ä¸€ä¸ªåŸºæœ¬å—åº”ç”¨ä¸‰æ¬¡æ§åˆ¶æµæ‰“å¹³ã€‚é»˜è®¤ä½¿ç”¨ 1 æ¬¡ã€‚\nå¼€å¯æŒ‡ä»¤æ›¿æ¢-mllvm -sub å¼€å¯æŒ‡ä»¤æ›¿æ¢\n-mllvm -sub_loop=3 å¦‚æœæ¿€æ´»äº†æŒ‡ä»¤æ›¿æ¢ï¼Œä½¿ç”¨è¿™ä¸ªé€‰é¡¹åœ¨ä¸€ä¸ªå‡½æ•°ä¸­åº”ç”¨ 3 æ¬¡æŒ‡ä»¤æ›¿æ¢ã€‚é»˜è®¤åº”ç”¨ 1 æ¬¡ã€‚\nå¼€å¯è™šå‡æ§åˆ¶æµ-mllvm -bcf å¼€å¯è™šå‡æ§åˆ¶æµã€‚\nbcfå¯ä»¥é…åˆä¸‹é¢å‚æ•°ä½¿ç”¨ï¼š\n-mllvm -bcf_loop=3 è®¾ç½®å‡½æ•°æ··æ·†æ¬¡æ•°ä¸º 3 æ¬¡ ä¸åŠ æ­¤é€‰é¡¹é»˜è®¤ä¸º 1 æ¬¡ã€‚\n-mllvm -bcf_prob=40 è®¾ç½®ä»£ç å—è¢«æ··æ·†çš„æ¦‚ç‡æ˜¯ 40%ï¼Œé»˜è®¤ 30%\nCMakeList ä¸­é…ç½®æ··æ·†å‚æ•°#debug and release all enableSET(CMAKE_CXX_FLAGS &quot;-mllvm -fla -mllvm -sub -mllvm -sobf  &quot;)#soä½“ç§¯ä¼˜åŒ–ï¼Œï¼ˆæŒ‰éœ€å¼€å¯ï¼‰#SET(CMAKE_CXX_FLAGS_DEBUG &quot;$ENV&#123;CXXFLAGS&#125;   -O0 -Wall -g2 -ggdb&quot;)#SET(CMAKE_CXX_FLAGS_RELEASE &quot;$ENV&#123;CXXFLAGS&#125;  -Os -Wall -s&quot;)#è®¾ç½®llvm debugæ¨¡å¼æ··æ·†ç¼–è¯‘SET(CMAKE_C_FLAGS_DEBUG &quot;$&#123;CMAKE_C_FLAGS_DEBUG&#125; -mllvm -fla&quot;)SET(CMAKE_CXX_FLAGS_DEBUG &quot;$&#123;CMAKE_CXX_FLAGS_DEBUG&#125; -mllvm -fla&quot;)#è®¾ç½®llvm releaseæ¨¡å¼æ··æ·†ç¼–è¯‘SET(CMAKE_C_FLAGS_RELEASE &quot;$&#123;CMAKE_C_FLAGS_RELEASE&#125; -mllvm -fla -mllvm -sub -mllvm -bcf&quot;)SET(CMAKE_CXX_FLAGS_RELEASE &quot;$&#123;CMAKE_CXX_FLAGS_RELEASE&#125; -mllvm -fla -mllvm -sub -mllvm -bcf&quot;)SET(CMAKE_CXX_FLAGS_RELEASE &quot;$&#123;CMAKE_CXX_FLAGS_RELEASE&#125; -s -O3 -Wall -fvisibility=hidden  -mllvm -fla&quot;)\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"Luaæ‚è®°","url":"/post/3843160677.html","content":"è‡ªä»æ¥è§¦äº† JerryScriptï¼ˆè§å¼€æºåº“jerryscriptä½¿ç”¨å¤‡å¿˜ï¼‰ï¼Œæœ¬ä»¥ä¸ºå†ä¹Ÿä¸ä¼šç”¨åˆ° Lua äº†ï¼Œå…³äº Lua çš„è®°å¿†å·²ç»é€æ¸åœ¨æˆ‘çš„è„‘æµ·ä¸­åˆ é™¤ï¼Œä½†æœ€è¿‘ç»´æŠ¤çš„å‡ ä¸ªè€é¡¹ç›®åˆéƒ½ä½¿ç”¨äº† Luaï¼ŒçœŸæ˜¯å‘½è¿çš„æ‰å¼„å•Šã€‚\næ¥å§ï¼Œåˆ·æ–°è®°å¿†ï¼\n\n\nåŸºç¡€\nLuaåŒºåˆ†å¤§å°å†™\næ³¨é‡Šæ ¼å¼  -- è¡Œæ³¨é‡Š--[[å—æ³¨é‡Š--]]\nå±€éƒ¨å˜é‡ä½¿ç”¨localå£°æ˜, å…¶ä»–çš„å…¨éƒ¨ä¸ºå…¨å±€å˜é‡ï¼Œå˜é‡çš„é»˜è®¤å€¼ä¸ºnil\nåªæœ‰falseå’Œnilä¸ºå‡ï¼Œå…¶ä»–çš„å…¨éƒ¨ä¸ºçœŸ\nLuaä¸­å­—ç¬¦ä¸²éƒ½æ˜¯ä¸å¯å˜çš„å¸¸é‡\nä½¿ç”¨..å¯ä»¥è¿æ¥å­—ç¬¦ä¸²\nLuaæ²¡æœ‰æ•´å½¢ï¼Œéƒ½æ˜¯å®æ•°\nå¯ä»¥åœ¨å­—ç¬¦ä¸²å‰æ”¾ç½®æ“ä½œç¬¦#æ¥è·å–å­—ç¬¦ä¸²é•¿åº¦ï¼ŒæŸäº›æƒ…å†µä¸‹å¯¹tableä¹Ÿé€‚ç”¨\nå…³ç³»æ“ä½œç¬¦: &lt; &gt; &#x3D;&#x3D; &gt;&#x3D; &lt;&#x3D;ï¼Œä¸ç­‰äºä½¿ç”¨~=ï¼Œè€Œä¸æ˜¯!=\nand, or, not é€»è¾‘æ“ä½œç¬¦è¿”å›çš„ä¸ä¸€å®šæ˜¯trueå’Œfalseï¼Œè¿™ç‚¹ä¸C++ä¸åŒï¼Œå®ƒè¿”å›çš„æ˜¯å¯¹åº”è¡¨è¾¾å¼çš„è¿è¡Œç»“æœ\næ”¯æŒå¤šé‡èµ‹å€¼\n\n-- aä¸º0ï¼Œ bä¸º1ï¼Œ cä¸ºnila,b,c = 0,1\n\næ§åˆ¶ç»“æ„\n\nif exp then  -- somethingelseif exp then  -- somethingelse  -- somethingend\n\nwhile &lt;exp is true&gt; do  -- somethingend\n\nrepeat  -- somethinguntil &lt;exp is true&gt;\n\nfor var=exp1, exp2, exp3 do  -- somethingend\n\nfor i,v in ipairs(a) do  -- somethingend\n\nfor i in pairs(a) do  -- somethingend\n\nå‡½æ•°åœ¨Luaä¸­å‡½æ•°ä¹Ÿæ˜¯å€¼ã€‚\nå¤šé‡è¿”å›å€¼&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;Luaä¸­å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œä½†æœ‰ä¸‹é¢çš„ç‰¹æ®Šæƒ…å†µï¼š\n\nå‡½æ•°ä½œä¸ºå•ç‹¬çš„è¯­å¥æ—¶ï¼Œä¼šä¸¢å¼ƒæ‰€æœ‰è¿”å›å€¼\nå‡½æ•°ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œåªä¿ç•™ç¬¬ä¸€ä¸ªè¿”å›å€¼\nåœ¨å¤šé‡èµ‹å€¼ä¸­ï¼Œå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œä¼šä¿ç•™å°½å¯èƒ½å¤šçš„è¿”å›å€¼\nå°†å‡½æ•°è°ƒç”¨æ”¾åœ¨ä¸€å¯¹æ‹¬å·ä¸­ï¼Œä¼šè¿«ä½¿å…¶åªè¿”å›ä¸€ä¸ªå€¼\n\nå˜é•¿å‚æ•°function add(...)\tlocal ret = 0\tfor i,v in ipairs(&#123;...&#125;) do -- æˆ– for i,v in ipairs&#123;...&#125; do\t\tret = ret + v\tend\treturn retendprint(add(1,2,9))\n\nfunction foo(...)\tlocal a,b,c = ...end\n\n-- è·Ÿè¸ªå‡½æ•°fooçš„è°ƒç”¨function FooCallLog(...)\tprint(&quot;Call foo:&quot;, ...)\treturn foo(...)end\n\n-- ä½¿ç”¨å‡½æ•°selectè®¿é—®å˜é•¿å‚æ•°function add(...)\tlocal ret = 0\tfor i = 1, select(&quot;#&quot;, ...) do -- select(&quot;#&quot;, ...)è·å–å‚æ•°ä¸ªæ•°\t\tlocal arg = select(i, ...) -- select(n, ...) è·å–ç¬¬nä¸ªå‚æ•°\t\tret = ret + arg\tend\t\treturn retendprint(add(1,3,5))\n\né—­åˆï¼ˆClosureï¼‰å‡½æ•°function newCounter() -- è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°\tlocal i = 0\treturn function () -- åœ¨åŒ¿åå‡½æ•°å†…éƒ¨ï¼Œå˜é‡iæ˜¯ä¸€ä¸ªâ€œéå±€éƒ¨çš„å˜é‡â€\t\t\t\ti = i + 1\t\t\t\treturn i\t\t\tendendc1 = newCounter()print(c1()) -- è¾“å‡ºï¼š1print(c1()) -- è¾“å‡ºï¼š2c2 = newCounter()print(c2()) -- è¾“å‡ºï¼š1\n\néå…¨å±€å‡½æ•°å°†ä¸€ä¸ªå‡½æ•°å­˜å‚¨åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡ä¸­ï¼Œå³å¾—åˆ°äº†ä¸€ä¸ªâ€œå±€éƒ¨å‡½æ•°â€ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nlocal lib=&#123;foo = function(x,y)  return x + y end,goo = function(x,y)    return x - y end &#125;\n\nlocal lib=&#123;&#125;function lib.foo(x,y) return x + y endfunction lib.goo(x,y) return x - y end\n\nå¯¹ä¸é€’å½’ç¨‹åºç­‰ï¼Œä¸ºäº†é˜²æ­¢å±€éƒ¨å‡½æ•°ä¸ºå°šå®šä¹‰å®Œæ¯•ï¼Œå°±è¦è¢«ç¼–è¯‘ï¼Œå¯ä»¥ä½¿ç”¨å‰ç½®å®šä¹‰çš„æ–¹å¼:\nlocal factfact = function(n)\tif n == 0 then\t\treturn 1\telse\t\treturn fact(n-1)\tendend\n\nç¼–è¯‘ã€æ‰§è¡Œä¸é”™è¯¯loadstringa = 20f = loadstring(&quot;local a = 10; print(a)&quot;)f() -- è¾“å‡ºï¼š10\n\npcallfunction foo(n)\tif n &gt; 0 then\t\tprint(n)\telse\t\terror(&quot;n need &gt; 0&quot;)\tendendif pcall(foo, -1) then\tprint(&quot;ok&quot;)else\tprint(&quot;error&quot;)end\npcallä¹Ÿå¯ä»¥æ‰§è¡ŒåŒ¿åå‡½æ•°ã€‚\nååŒç¨‹åºLuaå°†æ‰€æœ‰å’ŒååŒç¨‹åºç›¸å…³çš„å‡½æ•°å­˜å‚¨åœ¨åä¸ºâ€œcoroutineâ€çš„tableä¸­ã€‚ä¸€ä¸ªååŒç¨‹åºå¯ä»¥æœ‰4ç§çŠ¶æ€ï¼šsuspended, running, dead, normalã€‚\nco = coroutine.create(function()\tcoroutine.yield()\tfor i = 0, 2 do\t\tif i == 2 then\t\t\terror(&quot;oh No.&quot;)\t\tend\t\tprint(i)\tendend)print(coroutine.resume(co)) -- å½“åˆ›å»ºååŒç¨‹åºæ—¶ï¼Œå…¶å¤„äºsuspendedçŠ¶æ€print(coroutine.resume(co)) -- resumeæ˜¯åœ¨ä¿æŠ¤æ¨¡å¼ä¸­è¿è¡Œçš„print(coroutine.resume(co))--[[ è¾“å‡ºï¼štrue01false D:\\MyLua\\Basic\\coroutine.lua:5: oh No.false cannot resume dead coroutine--]]\n\nå…ƒè¡¨ä¸å…ƒæ–¹æ³•Luaä¸­æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå…ƒè¡¨ï¼Œtableå’Œuserdataå¯ä»¥æœ‰å„è‡ªç‹¬ç«‹çš„å…ƒè¡¨ï¼Œè€Œå…¶ä»–ç±»å‹çš„å€¼åˆ™å…±äº«å…¶ç±»å‹æ‰€å±çš„å•ä¸€å…ƒè¡¨ã€‚ Luaåœ¨åˆ›å»ºæ–°çš„tableæ—¶ä¸ä¼šåˆ›å»ºå…ƒè¡¨ã€‚é™¤äº†æ ‡å‡†çš„å­—ç¬¦ä¸²ç¨‹åºåº“å¤–ï¼Œå…¶ä»–çš„ç±»å‹åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ²¡æœ‰å…ƒè¡¨ã€‚\nt=&#123;&#125;print(getmetatable(t)) --&gt;nilprint(getmetatable(&quot;hi&quot;)) --&gt; table: 0x80772e0print(getmetatable(10)) --&gt; nil\n\nå¯ä»¥åœ¨å…ƒè¡¨ä¸­å®šä¹‰çš„åŸæ–¹æ³•(æˆ–å­—æ®µ)å¦‚ä¸‹ï¼š\n\n__add åŠ \n__sub å‡\n__mul ä¹˜\n__div é™¤\n__unm ç›¸åæ•°\n__mod å–æ¨¡\n__pow ä¹˜å¹‚\n__eq ç­‰äº\n__lt å°äº\n__le å¤§äº\n__concat è¿æ¥\n__tostring å­—ç¬¦ä¸²è½¬åŒ–\n__metatable ä¿æŠ¤å…ƒè¡¨\n\nlocal mt = &#123;&#125;mt.__tostring = function(t)\tlocal l = &#123;&#125;\tfor e in pairs(t) do\t\tl[#l + 1] = e\tend\treturn &quot;&#123;&quot; .. table.concat(l, &quot;, &quot;) .. &quot;&#125;&quot;endages = &#123;Jeff = 18, Jim = 19, Lucy = 20&#125;print(ages) --&gt; table: 0x003286e8setmetatable(ages, mt)print(ages) --&gt; &#123;Lucy, Jeff, Jim&#125;mt.__metatable = &quot;not your business&quot;print(getmetatable(ages)) --&gt; not your business\n\n__index Tableè®¿é—®\n__newindex Tableæ›´æ–°\n\n-- è·Ÿè¸ªTableè®¿é—®çš„ç¤ºä¾‹local index = &#123;&#125;local mt=&#123;__index = function(t, k)\tprint(string.format(&quot;*access to element %s, value %s&quot;, k, t[index][k]))\treturn t[index][k]end,__newindex = function(t, k, v)\tprint(&quot;*update of element &quot; .. tostring(k) .. &quot;to &quot; .. tostring(v))\tt[index][k] = vend&#125;function track(t)\tlocal proxy = &#123;&#125; -- __indexå’Œ__newindexéƒ½æ˜¯åœ¨tableä¸­æ²¡æœ‰æ‰€éœ€è®¿é—®çš„indexæ—¶æ‰å‘æŒ¥ä½œç”¨\tproxy[index] = t -- ç±»ä¼¼å¤šç»´æ•°ç»„\tsetmetatable(proxy, mt)\t\treturn proxyendages = &#123;Jeff = 18, Jim = 19, Lucy = 20&#125;ages = track(ages)print(ages.Jeff)address = &#123;Jeff = &quot;WuHan&quot;, Jim = &quot;Beijin&quot;, Lucy = &quot;Taiyuan&quot;&#125;address = track(address);print(address.Jim)\n\næ¨¡å—ä¸åŒ…æ¨¡å—æœç´¢å¯¹äºrequire(â€œfooâ€)è¯­å¥ï¼ŒLuaä¼šå…ˆåœ¨é¢„å®šè·¯å¾„ä¸­æœç´¢foo.luaï¼Œå¦‚æœæ²¡æœ‰æœç´¢åˆ°æ‰ä¼šæœç´¢foo.DLLã€‚ \nrequireåœ¨æœç´¢Luaæ–‡ä»¶æ—¶ï¼Œä¼šåœ¨å˜é‡package.pathå­˜æ”¾çš„è·¯å¾„ä¸­è¿›è¡Œæœç´¢ï¼ŒLuaå¯åŠ¨åä¾¿ä»¥ç¯å¢ƒå˜é‡LUA_PATHçš„å€¼æ¥åˆå§‹åŒ–è¯¥å˜é‡ï¼› è€Œæœç´¢DLLæ–‡ä»¶çš„è·¯å¾„åˆ™å­˜æ”¾åœ¨package.cpathä¸­ï¼ŒåŒç†ï¼ŒLuaå¯åŠ¨åä¼šç”¨LUA_CPATHç¯å¢ƒå˜é‡çš„å€¼æ¥åˆå§‹åŒ–è¯¥å˜é‡ã€‚\nprint(package.path)--[[;.\\?.lua;C:\\Program Files (x86)\\ZeroBrane\\bin\\lua\\?.lua;--]]\n\nrequireä¼šç”¨æ¨¡å—åæ¥æ›¿æ¢æ¯ä¸ªâ€œ?â€ï¼Œä¾æ¬¡åŒ¹é…æœç´¢ï¼Œç›´åˆ°æœç´¢æˆåŠŸã€‚\nåŸºæœ¬æ¨¡å—ç¼–å†™ç¼–è¯‘ä¸€ä¸ªæ¨¡å—æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªtableï¼Œå¹¶å°†æ‰€æœ‰éœ€è¦å¯¼å‡ºçš„å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ªtableã€‚\n-- file: basic_mod.luabasicmod = &#123;&#125;basicmod.name = &quot;basic mod&quot;function basicmod.func1()\tprint(&quot;func1&quot;)endreturn basicmod\n\nè°ƒç”¨è¯¥æ¨¡å—ï¼š\nrequire(&quot;basic_mod&quot;)print(basicmod.name) --&gt; basic modprint(basicmod.func1()) --&gt; func1\n\nä½†æ˜¯ä¸Šé¢çš„å†™æ³•ä¼šå¯¼è‡´æ¨¡å—ä¸­çš„æ¯ä¸ªå‡½æ•°æˆ–æˆå‘˜å‰é¢éƒ½å¸¦æœ‰è¯¥æ¨¡å—çš„åç§°ï¼Œæ›´æ”¹æ¨¡å—åç§°ä¼šç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œé’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ”¹è¿›ï¼š\n-- file: basic_mod.lualocal M = &#123;&#125; -- å€Ÿç”¨ä¸€ä¸ªå±€éƒ¨tableå˜é‡basicmod = MM.name = &quot;basic mod&quot;function M.func1()\tprint(&quot;func1&quot;)endreturn basicmod\nå®é™…ä¸Šï¼Œå¯ä»¥å®Œå…¨é¿å…å†™æ¨¡å—åï¼Œå› ä¸ºrequireä¼šå°†æ¨¡å—åä½œä¸ºå‚æ•°ä¼ é€’ç»™æ¨¡å—ï¼š\n-- file: basic_mod.lualocal modname = ...local M = &#123;&#125;_G[modname] = Mpackage.loaded[modname] = MM.name = &quot;basic mod&quot;function M.func1()\tprint(&quot;func1&quot;)end\n\nrequire(&quot;basic_mod&quot;) -- æ­¤æ—¶æ¨¡å—å‡½æ•°å­˜å‚¨çš„tableåç§°å°±æ˜¯æ¨¡å—çš„æ–‡ä»¶åprint(basic_mod.name)print(basic_mod.func1())\n\nåœ¨Lua5.1ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªæ–°çš„å‡½æ•°moduleï¼Œç®€åŒ–æ¨¡å—çš„ç¼–å†™ï¼š\nmodule(..., package.seeall)name = &quot;basic mod&quot;function func1()  -- å‡½æ•°å‰ä¸éœ€è¦åŠ å…¥æ¨¡å—åé™å®š  print(&quot;func1&quot;)end\n\né¢å‘å¯¹è±¡ä½¿ç”¨thisï¼ˆæˆ–selfï¼‰å‚æ•°æ˜¯æ‰€æœ‰é¢å‘å¯¹è±¡è¯­è¨€çš„æ ¸å¿ƒã€‚å¤§å¤šæ•°é¢å‘å¯¹è±¡è¯­è¨€éƒ½èƒ½å¯¹ç¨‹åºå‘˜éšè—thiså‚æ•°ï¼Œä»è€Œä½¿å¾—ç¨‹åºå‘˜ä¸å¿…æ˜¾ç¤ºçš„å£°æ˜è¿™ä¸ªå‚æ•°ã€‚ \nLuaåªéœ€è¦ä½¿ç”¨å†’å·å°±èƒ½éšè—è¯¥å‚æ•°ï¼Œå†’å·çš„ä½œç”¨å°±æ˜¯åœ¨ä¸€ä¸ªæ–¹æ³•çš„å®šä¹‰ä¸­æ·»åŠ ä¸€ä¸ªé¢å¤–çš„éšè—å‚æ•°ï¼Œä»¥åŠåœ¨ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ä¸­æ·»åŠ ä¸€ä¸ªé¢å¤–çš„å®å‚ï¼Œå†’å·åªæ˜¯ä¸€ç§è¯­æ³•ä¾¿åˆ©ï¼Œå¹¶æ²¡æœ‰å¼•å…¥ä»»ä½•æ–°çš„ä¸œè¥¿ã€‚\nAccount = &#123;balance = 0&#125;function Account.cost(v)\tAccount.balance = Account.balance - v -- åªèƒ½é’ˆå¯¹å…¨å±€åç§°Accountæ¥å·¥ä½œendAccount.cost(100) -- è°ƒç”¨æ­£å¸¸a = Account; Account = nila.cost(100) -- é”™è¯¯ï¼šattempt to index global &#x27;Account&#x27; (a nil value)    \n\næ”¹è¿›å¦‚ä¸‹ï¼š\nAccount = &#123;balance = 0&#125;function Account.cost(self, v)\tself.balance = self.balance - vendAccount.cost(Account, 100)a = Account; Account = nila.cost(a, 100)\n\nä½¿ç”¨å†’å·æ”¹è¿›ï¼š\nAccount = &#123;balance = 0&#125;function Account:cost(v)\tself.balance = self.balance - vendAccount:cost(100)a = Account; Account = nila:cost(100)","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["Lua"]},{"title":"MySQLè·å–å­—ç¬¦ä¸²é•¿åº¦çš„å‡ ç§æ–¹å¼","url":"/post/1446858454.html","content":"MySQL è·å–å­—ç¬¦ä¸²é•¿åº¦çš„å¸¸ç”¨å‡½æ•°æœ‰char_lengthã€lengthã€bit_lengthï¼Œå®ƒä»¬é’ˆå¯¹ä¸åŒçš„å­—ç¬¦ç¼–ç çš„å¤„ç†æ–¹å¼ä¸ä¸€æ ·ã€‚\næ€»çš„æ¥è¯´ï¼š\n\nchar_length æ˜¾ç¤ºçš„å­—ç¬¦ä¸ªæ•°ï¼›\nlength å­—ç¬¦ä¸²åœ¨å½“å‰ç¼–ç ä¸‹å­˜å‚¨ï¼Œæ‰€å çš„å­—èŠ‚æ•°ã€‚\nbit_length å­—ç¬¦ä¸²åœ¨å½“å‰ç¼–ç ä¸‹å­˜å‚¨ï¼Œæ‰€å çš„bitæ•°ï¼Œä¹Ÿå°±æ˜¯length*8\n\n\n\nGBK ç¼–ç select char_length(&#x27;ä¸­å›½&#x27;);  -- 2select length(&#x27;ä¸­å›½&#x27;);  -- 4select length(&#x27;china&#x27;);  -- 5select bit_length(&#x27;ä¸­å›½&#x27;);  -- 32\n\nUTF-8 ç¼–ç select char_length(&#x27;ä¸­å›½&#x27;); -- 2select length(&#x27;ä¸­å›½&#x27;);   -- 6select length(&#x27;china&#x27;);   -- 5select bit_length(&#x27;ä¸­å›½&#x27;);  -- 48","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["MySQL"]},{"title":"Gitæ‚è®°","url":"/post/2042033077.html","content":"æœ¬æ–‡è®°å½• Git ä½¿ç”¨ä¸­çš„ä¸€äº›é›¶ç¢çŸ¥è¯†ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥é˜…ï¼Œäº¦å¸Œæœ›æˆäººä¹‹ç¾ã€‚\n\n\ngitignore æ–‡ä»¶è§„åˆ™\næ‰€æœ‰ç©ºè¡Œæˆ–#å¼€å¤´çš„è¡Œéƒ½ä¼šè¢«å¿½ç•¥ï¼›\næ–‡ä»¶æˆ–ç›®å½•å‰åŠ  &#x2F;è¡¨ç¤ºä»“åº“æ ¹ç›®å½•ï¼›\nåŒ¹é…æ¨¡å¼æœ€åè·Ÿåæ–œæ  &#x2F; æŒ‡æ˜æ˜¯ç›®å½•è€Œéæ–‡ä»¶ï¼Œå¿½ç•¥è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†ä¸å¿½ç•¥è¯¥ç›®å½•ï¼›\nåœ¨æ¨¡å¼å‰åŠ !ï¼ŒæŒ‡æ˜ä¸å¿½ç•¥æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼›\næ”¯æŒæ ‡å‡†çš„ glob æ¨¡å¼åŒ¹é…\n* åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦ï¼›\n? åªåŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼›\n[abc]åŒ¹é…ä»»ä½•ä¸€ä¸ªåˆ—åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦ï¼›\n[0-9] è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ 0 åˆ° 9 çš„æ•°å­—ï¼ŒåŒç†æœ‰[a-z]ç­‰ï¼›\n\n\n\næ¸…ç©ºä»“åº“å†å²æäº¤# 1. åˆ›å»ºæ–°åˆ†æ”¯ï¼Œå¦‚åç§°latest_branchgit checkout --orphan latest_branch# 2. æ·»åŠ æ‰€æœ‰æ–‡ä»¶git add .# 3. æäº¤git commit -m &quot;è‡ªå®šä¹‰æäº¤è¯´æ˜&quot;# 4. åˆ é™¤åŸæ¥çš„ä¸»åˆ†æ”¯ï¼ˆmasterï¼‰git branch -D master# 5. å°†å½“å‰åˆ†æ”¯é‡å‘½åä¸ºmastergit branch -m master# 6. å¼ºåˆ¶æ¨é€åˆ°è¿œç«¯git push -f origin master\n\næœ‰äº›ä»“åº“æœ‰ master åˆ†æ”¯ä¿æŠ¤ï¼Œä¸å…è®¸å¼ºåˆ¶ pushï¼Œéœ€è¦åœ¨è¿œç¨‹ä»“åº“é¡¹ç›®æŠŠåˆ†æ”¯ä¿æŠ¤å…³æ‰æ‰èƒ½æ¨é€ã€‚\næ¨é€å‰éœ€è¦ä½¿ç”¨git remote -v æŸ¥çœ‹å…³è”çš„è¿œç¨‹ä»“åº“çš„ä¿¡æ¯ï¼ˆä¸»è¦æ˜¯è¿œç¨‹åº“çš„åˆ«åï¼‰ã€‚è™½ç„¶è¿œç¨‹åº“çš„åˆ«åé»˜è®¤æ˜¯ origin ,ä½†å¯èƒ½è®¾ç½®è¿‡å…¶ä»–çš„åˆ«åï¼ˆè€Œé originï¼‰ã€‚\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"MySQLçš„DECLARE...HANDLERä½¿ç”¨","url":"/post/3457369310.html","content":"åŠŸèƒ½DECLARE...HANDLERè¯­æ³•å¦‚ä¸‹ï¼š\nDECLARE handler_action HANDLER    FOR condition_value [, condition_value] ...    statement\n\nåŠŸèƒ½æ¦‚æ‹¬èµ·æ¥å°±æ˜¯ï¼šåœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªcondition_valueæ¡ä»¶æ»¡è¶³æ—¶ï¼Œå…ˆæ‰§è¡Œstatementè¯­å¥ï¼Œç„¶åæ‰§è¡Œhandler_actionåŠ¨ä½œã€‚\n\n\nå‚æ•°è§£é‡Šstatementstatementè¯­å¥å¯ä»¥æ˜¯ä¸€è¡Œç®€å•çš„SQLè¯­å¥ï¼Œå¦‚SET var_name = valueï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šè¡Œå¤æ‚çš„çš„SQLè¯­å¥ï¼Œä½†å¤šè¡ŒSQLè¯­å¥éœ€è¦ä½¿ç”¨BEGINå’ŒENDåŒ…å›´ã€‚\nç®€å•statementï¼š\nDECLARE CONTINUE HANDLER FOR 1051 SET result = 0;\n\nå¤æ‚çš„statementï¼š\nDECLARE CONTINUE HANDLER FOR 1051BEGIN   -- body of handlerEND;\n\nhandler_actionhandler_actionçš„å–å€¼å¦‚ä¸‹ï¼š\n\nCONTINUEï¼šè¡¨ç¤ºç»§ç»­æ‰§è¡Œå½“å‰SQLè„šæœ¬ã€‚\nEXITï¼šè¡¨ç¤ºç»ˆæ­¢æ‰§è¡Œå½“å‰SQLè„šæœ¬ã€‚å³ä½¿condition_valueï¼ˆè§2.3ï¼‰ç”±statementè¯­å¥çš„BEGIN...ANDè¯­å¥å—å¼•å‘ï¼Œä¹Ÿæ˜¯ä¸€æ ·ä¼šç»ˆæ­¢æ‰§è¡Œã€‚\n\ncondition_valuecondition_valueçš„å–å€¼å¯ä»¥ä¸ºå¦‚ä¸‹å‡ ç§ï¼š\nâ— mysql_error_codeï¼šMySQLçš„é”™è¯¯ç ï¼Œæ•´æ•°ç±»å‹ã€‚\nDECLARE CONTINUE HANDLER FOR 1051BEGIN   -- body of handlerEND;\n\nMySQLé”™è¯¯ç å–å€¼è§:https://dev.mysql.com/doc/refman/5.7/en/error-messages-server.html\n\nâ— SQLSTATE ï¼šç”¨5ä¸ªå­—ç¬¦è¡¨ç¤ºçš„SQLSTATEå€¼ã€‚\nDECLARE CONTINUE HANDLER FOR SQLSTATE &#x27;42S02&#x27;BEGIN    -- body of handlerEND;\n\nä»¥&#39;00&#39;å¼€å§‹çš„å€¼è¡¨ç¤ºæˆåŠŸã€‚SQLSTATEçš„å®Œæ•´å–å€¼åˆ—è¡¨è§:https://dev.mysql.com/doc/refman/5.7/en/error-messages-server.html\n\nâ— condition_nameï¼šä½¿ç”¨DECLARE ... CONDITIONå®šä¹‰çš„æ¡ä»¶çš„åç§°ã€‚\n\nå¦‚ä½•ä½¿ç”¨DECLARE ... CONDITIONå®šä¹‰æ¡ä»¶ï¼Œè§ï¼šhttps://dev.mysql.com/doc/refman/5.7/en/declare-condition.html\n\nâ— SQLWARNINGï¼šç›¸å½“äºå€¼ä»&#39;01&#39;å¼€å§‹çš„SQLSTATE ã€‚â— NOT FOUNDï¼šç›¸å½“äºå€¼ä»&#39;02&#39;å¼€å§‹çš„SQLSTATE ã€‚â— SQLEXCEPTIONï¼šç›¸å½“äºå€¼ä¸ä¸º&#39;00&#39;,&#39;01&#39;,&#39;02&#39;çš„æ‰€æœ‰ SQLSTATEã€‚\n\nå‚è€ƒæ–‡æ¡£: https://dev.mysql.com/doc/refman/5.7/en/declare-handler.html\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["MySQL"]},{"title":"ä¸åŒæ“ä½œç³»ç»Ÿæ‰€é›†æˆçš„å­—ä½“","url":"/post/1759569674.html","content":"å¦‚æœç•Œé¢æ‰€æŒ‡å®šçš„å­—ä½“åœ¨ç”¨æˆ·ç³»ç»Ÿä¸Šæœªå®‰è£…ï¼Œåˆ™ä¼šè‡ªåŠ¨é™çº§åˆ°ç³»ç»Ÿé»˜è®¤å­—ä½“ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç•Œé¢æ˜¾ç¤ºå¼‚å¸¸æˆ–è¾¾ä¸åˆ°é¢„æœŸæ•ˆæœã€‚\nå¯¹äºç‰¹æ®Šå­—ä½“æˆ‘ä»¬é€šå¸¸ä¼šé›†æˆåˆ°è½¯ä»¶å®‰è£…åŒ…å†…ï¼Œä½†å¯¹äºæ±‰å­—è¿™æ ·çš„è¯­è¨€ï¼Œå®ƒçš„æ–‡å­—æ¯”è¾ƒå¤šï¼Œå› æ­¤å­—ä½“æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œå¦‚æœé›†æˆåˆ°å®‰è£…åŒ…å†…ä¼šå¯¼è‡´å®‰è£…åŒ…ä½“ç§¯å˜å¤§ï¼Œæ‰€ä»¥å¯¹äºç±»ä¼¼ä¸­æ–‡è¿™æ ·å­—ç¬¦æ¯”è¾ƒå¤šçš„è¯­è¨€å­—ä½“ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€‰æ‹©ç³»ç»Ÿè‡ªå¸¦çš„å­—ä½“ã€‚\nè€Œä¸åŒæ“ä½œç³»ç»Ÿï¼ˆå¦‚Windowså’ŒmacOSï¼‰æ‰€è‡ªå¸¦çš„å­—ä½“ä¸ä¸€æ ·ï¼Œç”šè‡³åŒä¸€æ“ä½œç³»ç»Ÿä¸åŒçš„ç‰ˆæœ¬ï¼ˆå¦‚Windows 7å’ŒWindows 11ï¼‰è‡ªå¸¦çš„å­—ä½“ä¹Ÿä¸ä¸€æ ·ï¼Œå› æ­¤åœ¨é€‰æ‹©é‡‡ç”¨ä»€ä¹ˆå­—ä½“å‰ï¼Œéœ€è¦å¼„æ¸…æˆ‘ä»¬åº”ç”¨ç¨‹åºæ”¯æŒçš„æ“ä½œç³»ç»Ÿæ‰€è‡ªå¸¦çš„å­—ä½“éƒ½æœ‰å“ªäº›ï¼Œæ‰èƒ½æ›´å¥½çš„åšé€‰æ‹©ã€‚\n\næ“ä½œç³»ç»Ÿçš„æ–°ç‰ˆæœ¬é€šå¸¸åªä¼šæ–°å¢å­—ä½“ï¼Œä¸ä¼šç§»é™¤è€çš„å­—ä½“ã€‚\n\n\n\nWindowsç³»ç»Ÿè§ç»´åŸºç™¾ç§‘ï¼š\nList_of_typefaces_included_with_Microsoft_Windows\nmacOSå’ŒiOSç³»ç»Ÿè§appleå®˜ç½‘ï¼š\nsystem-fonts\nä¸­æ–‡å­—ä½“çš„è‹±æ–‡åç§°å¯¹ç…§è¡¨macOSç³»ç»Ÿéƒ¨åˆ†å­—ä½“\n\n\n\nä¸­æ–‡å\nè‹±æ–‡å\n\n\n\nåæ–‡ç»†é»‘\nSTHeiti Light\n\n\nåæ–‡é»‘ä½“\nSTHeiti\n\n\nåæ–‡æ¥·ä½“\nSTKaiti\n\n\nåæ–‡å®‹ä½“\nSTSong\n\n\nåæ–‡ä»¿å®‹\nSTFangsong\n\n\nä¿ªé»‘ Pro\nLiHei Pro Medium\n\n\nä¿ªå®‹ Pro\nLiSong Pro Light\n\n\næ ‡æ¥·ä½“\nBiauKai\n\n\nè‹¹æœä¿ªä¸­é»‘\nApple LiGothic Medium\n\n\nè‹¹æœä¿ªç»†å®‹\nApple LiSung Light\n\n\nWindowsç³»ç»Ÿéƒ¨åˆ†å­—ä½“\n\n\n\nä¸­æ–‡å\nè‹±æ–‡å\n\n\n\næ–°ç»†æ˜ä½“\nPMingLiU\n\n\nç»†æ˜ä½“\nMingLiU\n\n\næ ‡æ¥·ä½“\nDFKai-SB\n\n\né»‘ä½“\nSimHei\n\n\nå®‹ä½“\nSimSun\n\n\næ–°å®‹ä½“\nNSimSun\n\n\nä»¿å®‹\nFangSong\n\n\næ¥·ä½“\nKaiTi\n\n\nä»¿å®‹_GB2312\nFangSong_GB2312\n\n\næ¥·ä½“_GB2312\nKaiTi_GB2312\n\n\nå¾®è½¯æ­£é»‘ä½“\nMicrosoft JhengHei\n\n\nå¾®è½¯é›…é»‘ä½“\nMicrosoft YaHei\n\n\néš¶ä¹¦\nLiSu\n\n\nå¹¼åœ†\nYouYuan\n\n\nåæ–‡ç»†é»‘\nSTXihei\n\n\nåæ–‡æ¥·ä½“\nSTKaiti\n\n\nåæ–‡å®‹ä½“\nSTSong\n\n\nåæ–‡ä¸­å®‹\nSTZhongsong\n\n\nåæ–‡ä»¿å®‹\nSTFangsong\n\n\næ–¹æ­£èˆ’ä½“\nFZShuTi\n\n\næ–¹æ­£å§šä½“\nFZYaoti\n\n\nåæ–‡å½©äº‘\nSTCaiyun\n\n\nåæ–‡ç¥ç€\nSTHupo\n\n\nåæ–‡éš¶ä¹¦\nSTLiti\n\n\nåæ–‡è¡Œæ¥·\nSTXingkai\n\n\nåæ–‡æ–°é­\nSTXinwei\n\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"SQLæ‰¹é‡æ·»åŠ æ›´æ–°å’Œåˆ é™¤","url":"/post/2842059394.html","content":"æ‰¹é‡æ’å…¥INSERT INTO users(name, age) VALUES(&#x27;å§šæ˜&#x27;, 25), (&#x27;æ¯”å°”.ç›–èŒ¨&#x27;, 50), (&#x27;ç«æ˜Ÿäºº&#x27;, 600);\n\n\n\næ‰¹é‡æ›´æ–°UPDATE member SET descipt = &quot;é»˜è®¤&quot; WHERE usertypeid IN (1,2,3,4);\n\nUPDATE member SET descipt = CASE id WHEN 1 THEN &#x27;é»˜è®¤&#x27; WHEN 2 THEN &#x27;é»„é“œ&#x27; WHEN 3 THEN &#x27;é»„é‡‘&#x27; END WHERE id IN (1,2,3);\n\næ‰¹é‡åˆ é™¤DELETE FROM users WHERE id IN (1,2,3,4);","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["MySQL"]},{"title":"å›é¡¾2Dç»˜å›¾çš„æ•°å­¦çŸ¥è¯†","url":"/post/66759332.html","content":"æœ¬ç¯‡æ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜å›é¡¾åœ¨ 2D å›¾å½¢ç¼–ç¨‹ä¸­å¯èƒ½ä¼šæ¶‰åŠåˆ°çš„æ•°å­¦çŸ¥è¯†ã€‚\n\n\nçŸ©å½¢çŸ©å½¢é¢ç§¯ $S &#x3D; é•¿ * å®½$\nçŸ©å½¢å‘¨é•¿ $C &#x3D; 2 * ( é•¿ + å®½)$\nä¸¤ç‚¹é—´çš„è·ç¦»åœ¨ç›´è§’åæ ‡ç³»ä¸­ï¼Œè®¾ä¸¤ä¸ªç‚¹ Aã€B ä»¥åŠåæ ‡åˆ†åˆ«ä¸º$A(x1,y1)$ ã€$B(x2,y2)$ ï¼Œåˆ™ A å’Œ B ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ä¸ºï¼š\n$\\left | AB \\right |&#x3D;\\sqrt{ {(x1-x2)}^2 + {(y1-y2)}^2 }$\nåœ†é€šå¸¸ä½¿ç”¨$r$è¡¨ç¤ºåœ†çš„åŠå¾„ï¼›\nåœ†çš„é¢ç§¯ $S &#x3D; {\\pi}r^2$\nåœ†çš„å‘¨é•¿ $C &#x3D; 2{\\pi}r$\nå½“åœ†å¿ƒåæ ‡ä¸º(0ï¼Œ0)æ—¶ï¼Œåœ†çš„æ–¹ç¨‹å¼ä¸ºï¼š\n$x^2 + y^2 &#x3D; r^2$ï¼Œè¡¨ç¤ºçš„æ›²çº¿æ˜¯ä»¥ O(0ï¼Œ0)ä¸ºåœ†å¿ƒï¼Œä»¥ r ä¸ºåŠå¾„çš„åœ†ã€‚\nå½“åœ†å¿ƒåæ ‡ä¸ä¸º(0ï¼Œ0)æ—¶ï¼Œåœ†çš„æ–¹ç¨‹å¼ä¸ºï¼š\n$(x - a)^2 + (y - b)^2 &#x3D; r^2$ è¡¨ç¤ºçš„æ›²çº¿æ˜¯ä»¥ O(aï¼Œb)ä¸ºåœ†å¿ƒï¼Œä»¥ r ä¸ºåŠå¾„çš„åœ†ã€‚\nå¼§åº¦ä¸è§’åº¦å¼§åº¦æ˜¯åŸºäºåœ†çš„åŠå¾„çš„çº¯è®¡é‡å•ä½ï¼Œå½“è§’åº¦ä»¥å¼§åº¦ç»™å‡ºæ—¶ï¼Œé€šå¸¸ä¸å†™å¼§åº¦å•ä½ï¼Œæˆ–æœ‰æ—¶è®°ä¸ºradã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¼§åº¦æ˜¯æŒ‡åœ¨ä¸€ä¸ªåœ†ä¸­ï¼Œå¼§é•¿å’ŒåŠå¾„ä¹‹æ¯”ï¼Œå³ï¼š$\\left | å¼§åº¦ \\right |&#x3D;å¼§é•¿\\divåŠå¾„$ã€‚\n\næˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªåœ†çš„å‘¨é•¿ä¸º $2{\\pi}r$ï¼Œæ‰€ä»¥å¯å¾—ä¸€ä¸ªåœ†çš„å¼§åº¦ä¸º $\\frac{2{\\pi}r}{r}&#x3D;2\\pi$\nå·²çŸ¥ä¸€ä¸ªåœ†çš„è§’åº¦æ˜¯$360^{\\circ}$ï¼Œæ‰€ä»¥ $360^{\\circ}&#x3D;&#x3D;2{\\pi}$\nç”±æ­¤å¯çŸ¥äºŒè€…è½¬æ¢å…³ç³»ä¸ºï¼š\n$1^{\\circ} &#x3D;\\frac{\\pi}{180} rad$\n$1 rad &#x3D; (\\frac{180}{\\pi})^{\\circ}$\nä¸‰è§’å½¢è‹¥ä¸‰è§’å½¢çš„ä¸‰è¾¹åˆ†åˆ«ä¸º aï¼Œbï¼Œcï¼Œå…¶ä¸­ c ä¸ºåº•è¾¹ï¼Œé«˜ä¸º hï¼Œä¸‰è§’åˆ†åˆ«ä¸º Aï¼ˆ$\\alpha$ï¼‰ï¼ŒBï¼ˆ$\\beta$ï¼‰ï¼ŒCï¼ˆ$\\gamma$ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ â–³ABC ä¸­\n\né¢ç§¯ $S &#x3D; \\frac{1}{2} ch$\nå‘¨é•¿ $C &#x3D; a + b + c$\nä¸‰è§’å½¢çš„ä¸‰ä¸ªè§’ç›¸åŠ æ°¸è¿œæ˜¯ $180^{\\circ}$ï¼Œå³ $\\alpha+\\beta+\\gamma&#x3D;180^{\\circ}$ï¼Œå› æ­¤ç­‰è¾¹ä¸‰è§’å½¢çš„æ¯ä¸ªè§’éƒ½æ˜¯ $60^{\\circ}$\næ­£å¼¦&#x2F;ä½™å¼¦&#x2F;æ­£åˆ‡æ­£å¼¦ã€ä½™å¼¦å’Œæ­£åˆ‡æ˜¯åŸºäºç›´è§’ä¸‰è§’å½¢è€Œå»ºç«‹çš„ã€‚\n\n$\\sin(\\theta)&#x3D;\\frac{å¯¹è¾¹}{æ–œè¾¹}$\n$\\cos(\\theta)&#x3D;\\frac{é‚»è¾¹}{æ–œè¾¹}$\n$\\tan(\\theta)&#x3D;\\frac{å¯¹è¾¹}{é‚»è¾¹}$\n$\\cot(\\theta)&#x3D;\\frac{é‚»è¾¹}{å¯¹è¾¹}$\nä½™å¼¦å®šç†&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¯¹äºä»»æ„ä¸‰è§’å½¢ï¼Œä»»ä½•ä¸€è¾¹çš„å¹³æ–¹ç­‰äºå…¶ä»–ä¸¤è¾¹å¹³æ–¹çš„å’Œå‡å»è¿™ä¸¤è¾¹ä¸å®ƒä»¬å¤¹è§’çš„ä½™å¼¦çš„ç§¯çš„ä¸¤å€ã€‚\n$c^2 &#x3D; a^2 + b^2 - 2ab\\cos\\gamma$\nå‹¾è‚¡å®šç†ç›´è§’ä¸‰è§’å½¢çš„ä¸¤æ¡ç›´è§’è¾¹çš„é•¿åº¦çš„å¹³æ–¹å’Œç­‰äºæ–œè¾¹é•¿çš„å¹³æ–¹ã€‚\n\n$c^2&#x3D;a^2+b^2$\nå·²çŸ¥ $\\cos(90^{\\circ})&#x3D;0$ï¼Œç»“åˆä½™å¼¦å®šç†ï¼Œå¯ä»¥çŸ¥é“å‹¾è‚¡å®šç†æ˜¯ä½™å¼¦å®šç†çš„ç‰¹å®šæƒ…å†µã€‚\næ­£å¼¦æ›²çº¿æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘åŒæ—¶åšæ­£å¼¦è¿åŠ¨ï¼Œå°±å¾—åˆ°äº†åœ†å‘¨è¿åŠ¨ã€‚\nä¸‹é¢è§†é¢‘å±•ç¤ºäº†ä»åœ†ä¸­åˆ†è§£å‡ºæ­£å¼¦æ›²çº¿çš„è¿‡ç¨‹ï¼š\n(function(){var player = new DPlayer({\"container\":document.getElementById(\"dplayer0\"),\"video\":{\"url\":\"images/blog/sin-graph.mp4\"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()\n\næ ‡å‡†çš„æ­£å¼¦æ›²çº¿å‡½æ•°æ˜¯ $y&#x3D;\\sin(x)$ ï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ­£å¼¦æ›²çº¿ï¼š\n\nä¸æ­£å¼¦æ›²çº¿ç›¸å…³çš„æ¦‚å¿µæœ‰ï¼š\nå‘¨æœŸå‘¨æœŸï¼šä»ä¸€ä¸ªé¡¶ç‚¹åˆ°å¦ä¸€ä¸ªé¡¶ç‚¹çš„è·ç¦»ï¼Œæ ‡å‡†æ­£å¼¦æ›²çº¿çš„å‘¨æœŸæ˜¯ $2\\pi$\n\næŒ¯å¹…æŒ¯å¹…ï¼šä»ä¸­çº¿ï¼ˆX è½´ï¼‰åˆ°é¡¶ç‚¹çš„è·ç¦»ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\nç›¸ç§»ç›¸ç§»ï¼šæ›²çº¿çš„å·¦å³å¹³ç§»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\nå‚ç›´ä½ç§»å‚ç›´ä½ç§»ï¼šæ›²çº¿çš„ä¸Šä¸‹å¹³ç§»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\nä¼¸ç¼©å˜æ¢ä¸‹å›¾åˆ†åˆ«ç»˜åˆ¶äº†$y&#x3D;\\sin(x)$ã€$y&#x3D;\\sin(\\frac{1}{2}x)$ã€$y&#x3D;\\sin(2x)$çš„å›¾åƒã€‚\n\nä»ä¸Šå›¾å¯çŸ¥ï¼Œ$x$ æ‰€ä¹˜ä»¥çš„ç³»æ•°å¯¹åº”æ›²çº¿å‘¨æœŸç¼©å°çš„å€æ•°ã€‚\nå¹³ç§»å˜æ¢æ­£å¼¦æ›²çº¿çš„å¹³ç§»å˜æ¢éµå¾ªâ€œå·¦åŠ å³å‡ï¼Œä¸ŠåŠ ä¸‹å‡â€çš„è§„åˆ™ã€‚\n\nå®ä¾‹ä¸‹å›¾å±•ç¤ºäº†ä» $y&#x3D;\\sin(2x)$ å˜æ¢åˆ° $y&#x3D;\\sin(2x+\\frac{\\pi}{3})-1$ çš„è¿‡ç¨‹ã€‚\n\nç»¼åˆå˜æ¢æ­£å¼¦æ›²çº¿å¯è¡¨ç¤ºä¸º $y&#x3D;A\\sin({\\omega}x+\\varphi)+k$\nä¸‹å›¾æ¼”ç¤ºäº†ä» $y&#x3D;\\sin(x)$ å˜æ¢åˆ° $y&#x3D;2\\sin(2x+\\frac{\\pi}{4})+1$ çš„è¿‡ç¨‹ã€‚\n\nä¸‰è§’å‡½æ•°çš„å€¼åŸŸå’Œå…¬å¼å¸¸ç”¨å…¬å¼$\\sin^{2}\\alpha + \\cos^{2}\\alpha &#x3D; 1$\n$\\frac{\\sin\\alpha}{\\cos\\alpha} &#x3D; \\tan\\alpha$\n$\\frac{1}{\\cot\\alpha} &#x3D; \\tan\\alpha$\n$\\sin(\\pi + \\alpha) &#x3D; -\\sin(\\alpha)$\n$\\sin(\\pi - \\alpha) &#x3D; -\\sin(\\alpha)$\n$\\cos(\\pi + \\alpha) &#x3D; -\\cos(\\alpha)$\n$\\cos(\\pi - \\alpha) &#x3D; -\\cos(\\alpha)$\n$\\tan(\\pi + \\alpha) &#x3D; \\tan(\\alpha)$\n$\\tan(\\pi - \\alpha) &#x3D; -\\tan(\\alpha)$\n$\\cot(\\pi + \\alpha) &#x3D; \\cot(\\alpha)$\n$\\cot(\\pi - \\alpha) &#x3D; -\\cot(\\alpha)$\n$\\sin(-\\alpha) &#x3D; -\\sin(\\alpha)$\n$\\cos(-\\alpha) &#x3D; \\cos(\\alpha)$\n$\\tan(-\\alpha) &#x3D; -\\tan(\\alpha)$\n$\\cot(-\\alpha) &#x3D; -\\cot(\\alpha)$\nå€¼åŸŸ$\\sin(\\alpha)$ å’Œ $\\cos(\\alpha)$ å€¼åŸŸä¸º [-1, 1]\n$\\tan(\\alpha)$ å’Œ $\\cot(\\alpha)$ å€¼åŸŸä¸ºæ•´ä¸ªå®æ•°é›†\næ¤­åœ†æ¤­åœ†ï¼ˆEllipseï¼‰æ˜¯å¹³é¢å†…åˆ°å®šç‚¹ F1ã€F2 çš„è·ç¦»ä¹‹å’Œç­‰äºå¸¸æ•°ï¼ˆå¤§äº$|F1F2|$ï¼‰çš„åŠ¨ç‚¹ P çš„è½¨è¿¹ï¼ŒF1ã€F2 ç§°ä¸ºæ¤­åœ†çš„ä¸¤ä¸ªç„¦ç‚¹ã€‚\n\nå…¶æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š\n$|PF1|+|PF2|&#x3D;2a$\nä¸¤ç„¦ç‚¹ F1ã€F2 çš„è·ç¦»$|F1F2| &#x3D; 2c$\næ¤­åœ†æ–¹ç¨‹å¼æˆ‘ä»¬å§‹ç»ˆç”¨$a$è¡¨ç¤ºé•¿åŠè½´ï¼Œç”¨$b$è¡¨ç¤ºçŸ­åŠè½´ï¼Œå³ä¸Šå›¾çš„ç„¦ç‚¹åœ¨ X è½´æ—¶ï¼Œ$a$ä½äº X è½´ï¼Œè‹¥ç„¦ç‚¹åœ¨ Y è½´åˆ™$a$ä½äº Y è½´ã€‚\nå½“ä¸¤ä¸ªç„¦ç‚¹åœ¨ X è½´æ—¶ï¼Œæ ‡å‡†æ–¹ç¨‹ä¸ºï¼š$\\frac{x^2}{a^2} + \\frac{y^2}{b^2} &#x3D; 1$\nå½“ä¸¤ä¸ªç„¦ç‚¹åœ¨ Y è½´æ—¶ï¼Œæ ‡å‡†æ–¹ç¨‹ä¸ºï¼š$\\frac{y^2}{a^2} + \\frac{x^2}{b^2} &#x3D; 1$\næ¤­åœ†é¢ç§¯æ¤­åœ†é¢ç§¯ $S &#x3D; \\pi ab$\nç›¸å…³å…¬å¼$b^2 &#x3D; a^2 - c^2$\nè¯æ˜å¦‚ä¸‹ï¼š\n\nç”±ä¸¤ç‚¹é—´çš„è·ç¦»å…¬å¼å¯å¾—ï¼š\n$|PF1| &#x3D; \\sqrt{(x+c)^2+y^2}$\n$|PF2| &#x3D; \\sqrt{(x-c)^2+y^2}$\nåˆå› ä¸º$|PF1|+|PF2|&#x3D;2a$ï¼Œå³ï¼š\n$\\sqrt{(x+c)^2+y^2}+\\sqrt{(x-c)^2+y^2}&#x3D;2a$\nè¡¨è¾¾å¼åŒ–ç®€åï¼š\n$\\sqrt{(x+c)^2+y^2}&#x3D;2a-\\sqrt{(x-c)^2+y^2}$\n$(x+c)^2+y^2&#x3D;(2a-\\sqrt{(x-c)^2+y^2})^2$\nç»§ç»­å±•å¼€å’ŒåŒ–ç®€ï¼Œæœ€ç»ˆå¯å¾—ï¼š\n$\\frac{x^2}{a^2} + \\frac{y^2}{a^2-c^2}&#x3D;1$\nå‚è€ƒæ¤­åœ†çš„å…¬å¼å¯å¾—ï¼š\n$b^2 &#x3D; a^2 - c^2$\næ¤­åœ†ä¸Šä»»æ„è§’åº¦ç‚¹çš„åæ ‡\nä¸Šå›¾ç„¦ç‚¹ä½äº X è½´ï¼Œç”±æ¤­åœ†æ–¹ç¨‹å¼å¯å¾—ï¼š\n$\\frac{x^2}{a^2}+\\frac{y^2}{b^2}&#x3D;1$\nç”±æ­£åˆ‡å‡½æ•°å¯å¾—ï¼š$y&#x3D;x\\tan(\\theta)$\nå°† $y$ ä»£å…¥ä¸Šé¢è¡¨è¾¾å¼å¯å¾—ï¼š\n$\\frac{x^2}{a^2}+\\frac{(x\\tan(\\theta))^2}{b^2}&#x3D;1$\næœ€ç»ˆæ±‚å¾—ï¼š\n$x^2&#x3D;\\frac{a^2b^2}{b^2+a^2(\\tan\\theta)^2}$\n$x$ å¯ä»¥ä¸ºæ­£&#x2F;è´Ÿå€¼ï¼Œéœ€è¦æ ¹æ®è§’åº¦å†³å®šæ­£è´Ÿã€‚\n\næœ¬æ–‡ä½¿ç”¨latexliveç”Ÿæˆæ•°å­¦å…¬å¼ã€‚\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"å›¾å½¢ç¼–ç¨‹æ‰«ç›²","url":"/post/1919525700.html","content":"å¸¸è§å›¾å½¢ç¼–ç¨‹æ¥å£æˆ‘ä»¬å¸¸è§çš„å›¾å½¢ç¼–ç¨‹æ¥å£ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹æ´¾ç³»ï¼š\n\nOpenGL\nDirectX\nVulkan\nMetal\n\nä¸‹å›¾å±•ç¤ºäº†å„ä¸ªæ´¾ç³»çš„åˆ†æ”¯åŠç‰¹ç‚¹ï¼š\n\n\n\nANGLEANGLE ï¼ˆå…¨ç§° Almost Native Graphics Layer Engineï¼‰æ˜¯Googleå‘èµ·çš„å¼€æºé¡¹ç›®ï¼Œä¸»è¦ç”¨åœ¨ Chromium é¡¹ç›®é‡Œé¢ï¼ŒGoogleåˆ›å»ºè¿™ä¸ªé¡¹ç›®æ˜¯ä¸ºäº†è®©WebGLèƒ½å¤Ÿé—´æ¥è°ƒç”¨ç¡¬ä»¶å¹³å°æ”¯æŒçš„å›¾å½¢APIï¼Œå¦‚Windowså¹³å°ä¸Šè°ƒç”¨DirectXå›¾å½¢æ¥å£ã€‚\nç›®å‰ANGLEæ”¯æŒWindows, Mac, Linux, iOSå’ŒAndroidå¹³å°ã€‚\nWebGLåŸºäºOpenGL ESå¼€å‘ï¼Œè€Œåœ¨Windowsç³»ç»Ÿä¸Šé»˜è®¤åªå®‰è£…äº†OpenGL 1.1é©±åŠ¨ç¨‹åºï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰å‡çº§æ›´æ–°çš„OpenGLé©±åŠ¨ï¼Œåˆ™ç½‘é¡µä¸­çš„WebGLå°†åªèƒ½ä½¿ç”¨è½¯ä»¶æ¸²æŸ“ï¼ˆå³CPUç»˜åˆ¶å›¾å½¢ï¼‰ï¼Œæ˜¾ç„¶è¿™ç§æ–¹å¼æ— æ³•åˆ©ç”¨æ˜¾å¡GPUçš„ä¼˜åŠ¿ï¼Œå›¾å½¢æ¸²æŸ“æ€§èƒ½å’Œæ•ˆæœéƒ½ä¸å¥½ã€‚ä¸ºäº†æ”¹ç‰ˆè¿™ä¸ªç°çŠ¶ï¼ŒGoogleå…¬å¸å¼€å‘äº†ANGLEé¡¹ç›®ã€‚\nä¾‹å¦‚åœ¨Windowså¹³å°ï¼ŒANGLEé¡¹ç›®é€šè¿‡å°†DirectXæ¥å£è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œå°è£…åçš„æ¥å£ä¸OpenGL ESæ¥å£éå¸¸ç±»ä¼¼ï¼Œè¿™æ ·å½“ç¨‹åºä»£ç è°ƒç”¨ANGLEæä¾›çš„ç±»OpenGL ESæ¥å£æ—¶ï¼ŒANGLEå°±å¯ä»¥åœ¨å†…éƒ¨åˆ¤æ–­æ˜¯è°ƒç”¨OpenGLæ¥å£è¿˜æ˜¯è°ƒç”¨DirectXæ¥å£ï¼Œä»è€Œå®ç°äº†å½“ç”¨æˆ·ç³»ç»Ÿä¸Šæ²¡ç”¨å®‰è£…OpenGLé©±åŠ¨æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨åˆé€‚çš„DirectXç»˜åˆ¶æ¥å£ã€‚\n\né¡¹ç›®åœ°å€ï¼šhttps://github.com/google/angle\n\nEGLEGL æ˜¯ OpenGL ES å’Œæœ¬åœ°çª—å£ç³»ç»Ÿï¼ˆNative Window Systemï¼‰ä¹‹é—´çš„é€šä¿¡æ¥å£ï¼ŒOpenGL ES çš„å¹³å°æ— å…³æ€§æ­£æ˜¯å€ŸåŠ© EGL å®ç°çš„ï¼ŒEGL å±è”½äº†ä¸åŒå¹³å°çš„å·®å¼‚ï¼ˆApple æä¾›äº†è‡ªå·±çš„ EGL API çš„ iOS å®ç°ï¼Œè‡ªç§° EAGLï¼‰ã€‚\næˆ‘ä»¬é€šå¸¸åœ¨å®‰è£…ç›®å½•çœ‹åˆ°çš„libEGL.dllå’ŒlibGLESv2.dllæ–‡ä»¶å°±æ˜¯EGLåœ¨Windowså¹³å°çš„å®ç°ã€‚WebGLåŸºäºOpenGL ESå®ç°ï¼Œæ‰€ä»¥ä½¿ç”¨äº†WebGLå’ŒOpenGL ESçš„ç¨‹åºéƒ½ä¼šå¸¦ä¸Šè¿™2ä¸ªæ–‡ä»¶ã€‚\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"ä¸€ä¸ªMySQLå­˜å‚¨è¿‡ç¨‹æ¨¡æ¿","url":"/post/254517042.html","content":"åœ¨è¿›è¡Œæ•°æ®åº“å¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å†™å¾ˆå¤šå­˜å‚¨è¿‡ç¨‹ï¼Œæœ¬æ–‡æä¾›ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹çš„æ¨¡æ¿ï¼Œé€šè¿‡è¯¥æ¨¡æ¿å¯ä»¥ç®€åŒ–å­˜å‚¨è¿‡ç¨‹çš„å¼€å‘ã€‚\n\n\nMySQLå­˜å‚¨è¿‡ç¨‹çš„èŒƒä¾‹æ¨¡æ¿ï¼Œå¸¦è¿”å›å€¼å’Œå¼‚å¸¸å¤„ç†çš„åŠŸèƒ½ã€‚\nDROP PROCEDURE IF EXISTS sp_sample;CREATE PROCEDURE sp_sample(OUT errno INT)root:BEGIN  /*    åŠŸèƒ½ï¼š    INå‚æ•°ï¼š    OUTå‚æ•°ï¼š           errno å­˜å‚¨è¿‡ç¨‹å¼‚å¸¸æ ‡å¿—(0-æˆåŠŸ, 1-å¼‚å¸¸)             */    DECLARE EXIT HANDLER FOR SQLEXCEPTION    BEGIN        ROLLBACK;        SET errno = 1;    END;    SET errno = 0;    START TRANSACTION;    -- do what you want to do.    -- ...    COMMIT;END;\n\nå…¶ä¸­ï¼Œå­˜å‚¨è¿‡ç¨‹çš„å¼‚å¸¸æ•è·å’Œå›æ»šä½¿ç”¨DECLARE...HANDLERå®ç°ï¼š\nDECLARE EXIT HANDLER FOR SQLEXCEPTION   BEGIN       ROLLBACK;       SET errno = 1;   END;\n\nå…³äºDECLARE...HANDLERçš„ç”¨æ³•è§ï¼š MySQLçš„DECLARE...HANDLERä½¿ç”¨\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["MySQL"]},{"title":"MySQLä¸­ä¸æ—¶é—´å’Œæ—¥æœŸç›¸å…³çš„ç”¨æ³•","url":"/post/3556253141.html","content":"æ—¶é—´ã€æ—¥æœŸè·å–è·å–å½“å‰æœ¬åœ°çš„æ—¥æœŸå’Œæ—¶é—´SELECT \tNOW(), \tCURRENT_TIMESTAMP(), \tLOCALTIME(), \tLOCALTIMESTAMP(),\tSYSDATE();\n\nä¸Šé¢5ä¸ªå‡½æ•°éƒ½å¯ä»¥è·å–å½“å‰æœ¬åœ°æ—¶é—´ï¼Œä½†SYSDATEæœ‰æ‰€ä¸åŒã€‚\n\n\nSELECT NOW(), SLEEP(3), NOW();\n\næ‰§è¡Œç»“æœï¼š\nNOW()\t               sleep(3)\t    NOW()2017-11-09 17:21:09\t   0\t        2017-11-09 17:21:09\n\nè™½ç„¶æš‚åœäº†3ç§’ï¼Œä½† NOW() å‰å2æ¬¡è·å–åˆ°æ—¶é—´æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ NOW() å‡½æ•°è·å–çš„æ—¶é—´æ˜¯åœ¨æ•´ä¸ªSQLè¯­å¥å¼€å§‹æ‰§è¡Œæ—¶çš„æ—¶é—´ï¼Œæ— è®ºSQLè¯­å¥ä¸­æœ‰å¤šå°‘ä¸ªNOW()å‡½æ•°ï¼Œè·å–åˆ°çš„æ—¶é—´éƒ½æ˜¯ä¸€æ ·çš„ã€‚CURRENT_TIMESTAMP(), LOCALTIME(), LOCALTIMESTAMP()å’ŒNOW()å‡½æ•°ä¸€æ ·ã€‚\nä½†SYSDATEä¸åŒï¼ŒSYSDATE è·å–åˆ°çš„æ˜¯SYSDATE()å‡½æ•°æ‰§è¡Œæ—¶çš„å®æ—¶æ—¶é—´ï¼š\nSELECT SYSDATE(), SLEEP(3), SYSDATE();\n\næ‰§è¡Œç»“æœï¼š\nSYSDATE()\t         sleep(3)\tSYSDATE()2017-11-09 17:25:05\t 0\t        2017-11-09 17:25:08\n\nè·å–å½“å‰æœ¬åœ°çš„æ—¥æœŸSELECT \tCURDATE(), \tCURRENT_DATE();\n\nè·å–å½“å‰æœ¬åœ°çš„æ—¶é—´SELECT \tCURTIME(), \tCURRENT_TIME();\n\nè·å–å½“å‰UTCæ—¥æœŸå’Œæ—¶é—´SELECT \tUTC_TIMESTAMP();\n\nè·å–å½“å‰UTCæ—¥æœŸSELECT \tUTC_DATE();\n\nè·å–å½“å‰UTCæ—¶é—´SELECT \tUTC_TIME();\n\nè·å–æ—¶é—´æˆ³ï¼ˆè‡ª1970å¹´ç»è¿‡çš„ç§’ï¼‰SELECT UNIX_TIMESTAMP();  -- å½“å‰æ—¶é—´æ—¶é—´æˆ³SELECT UNIX_TIMESTAMP(&#x27;2017-11-09 12:30:00&#x27;);  -- è‡ª1970å¹´åˆ°2017-11-09 12:30:00ç»è¿‡çš„ç§’æ•°\n\næ—¶é—´æ“ä½œä»å­—ç¬¦ä¸²æå–æ—¶é—´å’Œæ—¥æœŸSET @dt = &#x27;2008-09-10 07:15:30.123456&#x27;;SELECT DATE(@dt);        -- 2008-09-10SELECT TIME(@dt);        -- 07:15:30.123456SELECT YEAR(@dt);        -- 2008SELECT QUARTER(@dt);     -- 3SELECT MONTH(@dt);       -- 9SELECT WEEK(@dt);        -- 36SELECT DAY(@dt);         -- 10SELECT HOUR(@dt);        -- 7SELECT MINUTE(@dt);      -- 15SELECT SECOND(@dt);      -- 30SELECT MICROSECOND(@dt); -- 123456\n\nè·å–æŸå¤©åœ¨å‘¨ã€æœˆã€å¹´ä¸­æ‰€å¤„ä½ç½®SET @dt = &#x27;2017-11-09&#x27;;SELECT DAYOFWEEK(@dt);   -- 5       æ˜ŸæœŸæ—¥ä¸º0ï¼Œ5ä»£è¡¨æ˜ŸæœŸå››SELECT DAYOFMONTH(@dt);  -- 9       ä¸€ä¸ªæœˆçš„ç¬¬9å¤©SELECT DAYOFYEAR(@dt);   -- 313     2017å¹´çš„ç¬¬313å¤©\n\nè·å–æŒ‡å®šæ—¥æœŸçš„æœ€åä¸€å¤©SELECT LAST_DAY(&#x27;2017-02-05&#x27;);   -- 2017-02-28\n\næ—¶é—´åŠ å‡SET @dt = &quot;2017-11-09 17:10:20.0000001&quot;;SELECT DATE_ADD(@dt, INTERVAL 1 DAY);        -- åŠ 1å¤©SELECT DATE_ADD(@dt, INTERVAL 2 HOUR);       -- åŠ 2å°æ—¶SELECT DATE_ADD(@dt, INTERVAL 1 MINUTE);     -- åŠ 1åˆ†é’ŸSELECT DATE_ADD(@dt, INTERVAL 1 SECOND);SELECT DATE_ADD(@dt, INTERVAL 1 MICROSECOND); -- åŠ 1å¾®å¦™SELECT DATE_ADD(@dt, INTERVAL 1 WEEK);        -- åŠ 1å‘¨SELECT DATE_ADD(@dt, INTERVAL 1 MONTH);SELECT DATE_ADD(@dt, INTERVAL 1 QUARTER);     -- åŠ 1ä¸ªå­£åº¦SELECT DATE_ADD(@dt, INTERVAL 1 YEAR);SELECT DATE_ADD(@dt, INTERVAL -1 DAY);       -- å‡1å¤©\n\nä¸¤ä¸ªæ—¥æœŸã€æ—¶é—´åŠ å‡SELECT DATEDIFF(&#x27;2008-08-08&#x27;, &#x27;2008-08-01&#x27;);  -- 7SELECT DATEDIFF(&#x27;2008-08-01&#x27;, &#x27;2008-08-08&#x27;);  -- -7  ç¬¬ä¸€ä¸ªå‚æ•°å‡å»ç¬¬äºŒä¸ªå‚æ•°\n\nSELECT TIMEDIFF(&#x27;2008-08-08 08:08:08&#x27;, &#x27;2008-08-08 00:00:00&#x27;);  -- 08:08:08SELECT TIMEDIFF(&#x27;00:00:00&#x27;, &#x27;08:08:08&#x27;);                        -- -08:08:08\n\næ—¶é—´æ ¼å¼åŒ–SELECT DATE_FORMAT(&#x27;2008-08-08 22:23:00&#x27;, &#x27;%W %M %Y&#x27;);      -- Friday August 2008SELECT DATE_FORMAT(&#x27;2008-08-08 22:23:01&#x27;, &#x27;%Y%m%d%H%i%s&#x27;);  -- 20080808222301SELECT TIME_FORMAT(&#x27;22:23:01&#x27;, &#x27;%H.%i.%s&#x27;);                 -- 22.23.01\n\nç§’è®¡ç®—è®¡ç®—æŒ‡å®šæ—¶é—´æŠ˜åˆå¤šå°‘ç§’ï¼Œå¦‚00:01:00è¡¨ç¤º1åˆ†é’Ÿï¼Œç­‰äº60ç§’ã€‚\nSELECT TIME_TO_SEC(&#x27;01:00:05&#x27;);  -- 3605SELECT SEC_TO_TIME(3605);        -- &#x27;01:00:05&#x27;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["MySQL"]},{"title":"åœ¨C++ä¸­ä½¿ç”¨Lamadaè¡¨è¾¾å¼","url":"/post/4208014138.html","content":"Lamada è¡¨è¾¾å¼æ˜¯ C++11 æœ€é‡è¦ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ç‰¹æ€§ä¹‹ä¸€ã€‚Lamada æ¥æºäºå‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯ç°ä»£ç¼–ç¨‹è¯­è¨€çš„ä¸€ä¸ªç‰¹ç‚¹ã€‚\n\n\nLamada è¡¨è¾¾å¼å®šä¹‰ä¸‹å›¾å±•ç¤ºå‡ºäº† C++ Lamada è¡¨ç¤ºçš„ç»„æˆéƒ¨åˆ†ï¼š\nå…¶ä¸­ï¼šâ‘  æŒ‡æ˜æ•è·åˆ—è¡¨ã€‚â‘¡ æŒ‡æ˜å‚æ•°åˆ—è¡¨ã€‚â‘¢ mutableå¯é€‰é¡¹ã€‚å’Œå¸¸è§„çš„ mutable ç”¨æ³•ç±»ä¼¼ï¼Œå³å½“ lamada è¡¨è¾¾å¼å‚æ•°æ˜¯ const æ—¶ï¼Œä½¿ç”¨mutableå¯ä»¥å–æ¶ˆè¿™ç§ constã€‚â‘£ throwå¯é€‰é¡¹ã€‚å¯ä»¥ä½¿ç”¨noexceptæŒ‡æ˜&#x2F;çº¦æŸè¡¨è¾¾å¼å†…ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚â‘¤ æŒ‡å®šè¿”å›ç±»å‹ã€‚â‘¥ Lamada å‡½æ•°ä½“ã€‚\næ ¹æ®ä¸Šå›¾å®šä¹‰ä¸€ä¸ªå®Œæ•´çš„ lamada è¡¨è¾¾å¼ï¼š\nauto f = [](int a) noexcept -&gt; int &#123; return a + 1; &#125;;\n\nè¿”å›ç±»å‹å¾ˆå¤šæ—¶å€™ lamada è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹æ˜¯éå¸¸æ˜æ˜¾çš„ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®returnè¯­å¥è‡ªåŠ¨æ¨å¯¼å‡ºè¿”å›ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥çœç•¥è¡¨è¾¾å¼çš„è¿”å›å€¼å®šä¹‰ï¼š\nauto x1 = [](int a) &#123;return a + 1&#125;;     // OK: return type is int\n\nä½†æ˜¯ï¼Œåˆå§‹åŒ–åˆ—è¡¨ä¸èƒ½ç”¨äºè¿”å›å€¼çš„è‡ªåŠ¨æ¨å¯¼ï¼š\nauto x2 = [](int a) &#123;return &#123;a+1, a+2&#125;; &#125;;   // error: æ— æ³•æ¨å¯¼å‡ºè¿”å›å€¼ç±»å‹\n\næ•è·åˆ—è¡¨lamada è¡¨è¾¾å¼å¯ä»¥é€šè¿‡æ•è·åˆ—è¡¨æ•è·ä¸€å®šèŒƒå›´å†…çš„å˜é‡ï¼š\n\n[] ä¸æ•è·ä»»ä½•å˜é‡ã€‚\n[&amp;] æŒ‰å¼•ç”¨æ•è·ï¼šæ•è·å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å˜é‡ï¼Œå¹¶ä½œä¸ºå¼•ç”¨åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨ã€‚\n[=] æŒ‰å€¼æ•è·ï¼šæ•è·å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å˜é‡ï¼Œå¹¶ä½œä¸ºå‰¯æœ¬åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨ã€‚\n[=, &amp;foo] æŒ‰å€¼æ•è·å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„æ‰€æœ‰å˜é‡ï¼Œå¹¶æŒ‰å¼•ç”¨æ•è· foo å˜é‡ã€‚\n[bar] æŒ‰å€¼æ•è· bar å˜é‡ï¼ŒåŒæ—¶ä¸æ•è·å…¶ä»–å˜é‡ã€‚\n[this] æ•è· lamada æ‰€åœ¨çš„å½“å‰ç±»ä¸­çš„thisæŒ‡é’ˆï¼Œè®© lamada è¡¨è¾¾å¼æ‹¥æœ‰å’Œå½“å‰ç±»æˆå‘˜å‡½æ•°åŒæ ·çš„è®¿é—®æƒé™ã€‚å¦‚æœå·²ç»ä½¿ç”¨äº†&amp;æˆ–=ï¼Œå°±é»˜è®¤æ·»åŠ æ­¤é€‰é¡¹ã€‚æ•è· this çš„ç›®çš„æ˜¯å¯ä»¥åœ¨ lamada ä¸­ä½¿ç”¨å½“å‰ç±»çš„æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡ã€‚\n\nå¼‚å¸¸çº¦æŸå¯ä»¥ä½¿ç”¨noexceptæ¥æŒ‡å®šå’Œçº¦æŸ Lamada è¡¨è¾¾å†…ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿç¼–è¯‘è­¦å‘Šã€‚\n// throw_lambda_expression.cpp// compile with: /W4 /EHscint main() // äº§ç”Ÿç¼–è¯‘è­¦å‘ŠC4297&#123;   []() noexcept &#123; throw 5; &#125;();&#125;\n\nmutableæ­£å¸¸æƒ…å†µä¸‹ï¼ŒæŒ‰å€¼æ•è·çš„å˜é‡ï¼Œå…¶å€¼åœ¨ Lamada è¡¨è¾¾å¼å†…æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ï¼ˆéµå¾ªconst-by-valueï¼‰ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç¼–è¯‘ä¼šæŠ¥é”™ï¼š\n int n = 1;auto fuc = [n]() &#123;    n = 2;&#125;;// error C3491: â€œnâ€: æ— æ³•åœ¨éå¯å˜ lambda ä¸­ä¿®æ”¹é€šè¿‡å¤åˆ¶æ•è·\n\nå¯ä»¥ä½¿ç”¨mutableå…³é”®å­—æ”¹å˜è¿™ç§è¡Œä¸ºï¼š\nint n = 1;auto fuc = [n]() mutable &#123;    n = 2;&#125;;printf(&quot;%d&quot;, n); // 1\n\nè™½ç„¶åœ¨ Lamada è¡¨è¾¾å¼å†…å¯ä»¥ä¿®æ”¹nçš„å€¼ï¼Œä½†nä»æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå› æ­¤å¤–éƒ¨nçš„å€¼æ²¡æœ‰è¢«æ”¹å˜ã€‚\n\nå‚è€ƒï¼šhttps://msdn.microsoft.com/en-us/library/dd293608.aspx\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"å­—èŠ‚åºåˆ—ä¹‹å¤§å°ç«¯","url":"/post/2819651546.html","content":"å¤§å°ç«¯çš„å®šä¹‰Big-Endian å’Œ Little-Endian çš„å®šä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š\n\nLittle-Endian\næ•°æ®çš„ä½ä½å­—èŠ‚ä½å­˜æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œé«˜ä½å­—èŠ‚å­˜æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚\n\nBig-Endian \næ•°æ®çš„é«˜ä½å­—èŠ‚ä½å­˜æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œä½ä½å­—èŠ‚å­˜æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚\n\n\n\nä»¥åå…­è¿›åˆ¶æ•°å­— 0x12345678ä¸ºä¾‹ï¼Œå®ƒæ€»å…±å  4 ä¸ªå­—èŠ‚ï¼ˆ1ä¸ªå­—èŠ‚8ä½ï¼Œ2ä¸ª16è¿›åˆ¶å 8ä½ï¼Œæ‰€ä»¥1ä¸ªå­—èŠ‚æœ€å¤§è¡¨ç¤º0xFFï¼‰ï¼Œè¯¥æ•°æ®åœ¨å¤§å°ç«¯æ¨¡å¼ä¸‹çš„å†…å­˜å¸ƒå±€åˆ†åˆ«ä¸ºï¼š&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¤§ç«¯æ¨¡å¼\nä½åœ°å€ -----------------&gt; é«˜åœ°å€0x12 | 0x34 | 0x56 | 0x78\n\nå°ç«¯æ¨¡å¼\nä½åœ°å€ ------------------&gt; é«˜åœ°å€0x78 | 0x56 | 0x34 | 0x12\n\nç¨‹åºåˆ¤æ–­å¤§å°ç«¯bool IsLittleEndian() &#123;    int a = 0x1234;    char c = *(char *)&amp;a;    if (c == 0x34) &#123;        return true;    &#125;    return false;&#125;\n\nå¸¸ç”¨ç³»ç»Ÿçš„å¤§å°ç«¯ç›®å‰ Intelçš„ 80x86 ç³»åˆ—èŠ¯ç‰‡æ˜¯å”¯ä¸€è¿˜åœ¨åšæŒä½¿ç”¨å°ç«¯çš„èŠ¯ç‰‡ï¼ˆWindowsç³»ç»Ÿå°±æ˜¯åŸºäºè¯¥æ¶æ„ï¼‰ã€‚\nARMèŠ¯ç‰‡é»˜è®¤é‡‡ç”¨å°ç«¯ï¼Œä½†å¯ä»¥åˆ‡æ¢ä¸ºå¤§ç«¯ã€‚\nå¦å¤–ï¼Œå¯¹äºå¤§å°ç«¯çš„å¤„ç†ä¹Ÿå’Œç¼–è¯‘å™¨çš„å®ç°æœ‰å…³ï¼Œåœ¨ C è¯­è¨€ä¸­ï¼Œé»˜è®¤æ˜¯å°ç«¯ï¼ˆä½†åœ¨ä¸€äº›å¯¹äºå•ç‰‡æœºçš„å®ç°ä¸­å´æ˜¯åŸºäºå¤§ç«¯ï¼Œæ¯”å¦‚ Keil 51Cï¼‰ï¼ŒJavaæ˜¯å¹³å°æ— å…³çš„ï¼Œé»˜è®¤æ˜¯å¤§ç«¯ã€‚\né€šè¿‡ç½‘ç»œä¼ è¾“çš„æ•°æ®æ™®éé‡‡ç”¨çš„éƒ½æ˜¯å¤§ç«¯æ¨¡å¼ã€‚\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"å¦‚ä½•é€šè¿‡ç»“æ„ä½“æˆå‘˜åœ°å€è·å–çˆ¶åœ°å€","url":"/post/3142528002.html","content":"æœ‰å¦‚ä¸‹ç»“æ„ä½“ï¼š\nstruct Test &#123;    int a;    // ....    // è¿˜æœ‰è‹¥å¹²æˆå‘˜    // ...    int y;    int z;&#125;;\n\nåœ¨åªçŸ¥é“æˆå‘˜å˜é‡ y åœ°å€çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•è·å–åˆ°ç»“æ„ä½“çš„é¦–åœ°å€ï¼Ÿ\n\n\nå¯ä»¥é€šè¿‡å¦‚ä¸‹å®æ¥å®ç°ï¼š\n#define GET_PARENT_ADDRESS(address, type, field) ((type *)( \\                                                  (char*)(address) - \\                                                  (ULONG_PTR)(&amp;((type *)0)-&gt;field)))\n\nä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\nint main()&#123;    Test t = &#123; 1, 2, 3 &#125;;    Test* pT = GET_PARENT_ADDRESS(&amp;t.b, Test, b);    printf(&quot;a:%d b:%d c:%d\\n&quot;, pT-&gt;a, pT-&gt;b, pT-&gt;c); // è¾“å‡ºa: 1 b:2 c:3    return 0;&#125;\n\næ ¸å¿ƒåŸç†ï¼š\né€šè¿‡å°†ç©ºæŒ‡é’ˆå¼ºè½¬æˆ Test* ç±»å‹, ç„¶åå†å–æˆå‘˜å˜é‡ b çš„åœ°å€ï¼Œè¯¥æ“ä½œçš„ä½œç”¨æ˜¯ï¼šå‡è®¾ Test å¼€å§‹åœ¨ 0x00000000 å†…å­˜ä½ç½®ä¸Šåˆ†é…å†…å­˜ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¾— b çš„å†…å­˜åœ°å€ï¼Œè¿™æ ·ç­‰åŒäºè·å¾—äº†æˆå‘˜ b çš„ç»“æ„ä½“å¯¹é½ååç§»é‡ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æœ€åï¼Œç”¨ b çš„å®é™…å†…å­˜åœ°å€å‡å» b çš„åç§»é‡å°±æ˜¯ç»“æ„ä½“çš„é¦–åœ°å€ã€‚\n\nå‚è€ƒï¼šMicrosoft å®Œæˆç«¯å£ CONTAINING_RECORD å®çš„å®ç°ã€‚\næœ¬æ–‡æœ€åˆå‘å¸ƒåœ¨æˆ‘çš„ CSDN åšå®¢ï¼šã€ŠCONTAINING_RECORD å®çš„å®ç°åŸç†ã€‹ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šç¨ä½œæ•´ç†ã€‚\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"å¼€æºåº“nlohmann jsonä½¿ç”¨å¤‡å¿˜","url":"/post/1128187204.html","content":"nlohmann&#x2F;json æ˜¯ä¸€ä¸ªç”¨äºè§£æ JSON çš„å¼€æº C++åº“ï¼Œå£ç¢‘ä¸€æµï¼Œæ— éœ€é¢å¤–å®‰è£…å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜æ”¯æŒå•ä¸ªå¤´æ–‡ä»¶æ¨¡å¼ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ç›´è§‚ã€‚\n\n\n1. ç¼–è¯‘ä»å®˜ç½‘https://github.com/nlohmann/jsonçš„ Release é¡µé¢ä¸‹è½½å•ä¸ªjson.hppå³å¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å•ç‹¬ç¼–è¯‘ã€‚\n2. ä½¿ç”¨ç¤ºä¾‹ä¸‹é¢ä»¥ç¤ºä¾‹çš„æ–¹å¼ç½—åˆ— nlohmann&#x2F;json åº“çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚\n2.1 ç”Ÿæˆ JSONæ–¹å¼ 1int main()&#123;    using json = nlohmann::json;    json j;    j[&quot;pi&quot;] = 3.141;    j[&quot;happy&quot;] = true;    j[&quot;name&quot;] = &quot;Niels&quot;;    j[&quot;nothing&quot;] = nullptr;    j[&quot;answer&quot;][&quot;everything&quot;] = 42;    j[&quot;list&quot;] = &#123; 1, 0, 2 &#125;;    j[&quot;object&quot;] = &#123; &#123;&quot;currency&quot;, &quot;USD&quot;&#125;, &#123;&quot;value&quot;, 42.99&#125; &#125;;    // è½¬æˆå­—ç¬¦ä¸²    std::string strJSON = j.dump(2); // 2ä¸ªç©ºæ ¼çš„ç¼©è¿›    std::cout &lt;&lt; strJSON;    return 0;&#125;\n\nè¾“å‡ºå¦‚ä¸‹ï¼š\n&#123;  &quot;answer&quot;: &#123;    &quot;everything&quot;: 42  &#125;,  &quot;happy&quot;: true,  &quot;list&quot;: [1, 0, 2],  &quot;name&quot;: &quot;Niels&quot;,  &quot;nothing&quot;: null,  &quot;object&quot;: &#123;    &quot;currency&quot;: &quot;USD&quot;,    &quot;value&quot;: 42.99  &#125;,  &quot;pi&quot;: 3.141&#125;\n\næ–¹å¼ 2int main()&#123;    using json = nlohmann::json;    json j = &#123;        &#123;&quot;pi&quot;, 3.141&#125;,        &#123;&quot;happy&quot;, true&#125;,        &#123;&quot;name&quot;, &quot;Niels&quot;&#125;,        &#123;&quot;nothing&quot;, nullptr&#125;,        &#123;&quot;answer&quot;, &#123;&#123;&quot;everything&quot;, 42&#125;&#125;&#125;,        &#123;&quot;list&quot;, &#123;1, 0, 2&#125;&#125;,        &#123;&quot;object&quot;, &#123;&#123;&quot;currency&quot;, &quot;USD&quot;&#125;, &#123;&quot;value&quot;, 42.99&#125;&#125;&#125;    &#125;;    // è½¬æˆå­—ç¬¦ä¸²    std::string strJSON = j.dump(2);    std::cout &lt;&lt; strJSON;    return 0;&#125;\n\nè¾“å‡ºå†…å®¹ä¸æ–¹å¼ 1 ä¸€æ ·ã€‚\næ–¹å¼ 3int main()&#123;    using json = nlohmann::json;    json j;    j[&quot;pi&quot;] = 3.141;    j[&quot;happy&quot;] = true;    j[&quot;name&quot;] = &quot;Niels&quot;;    j[&quot;nothing&quot;] = nullptr;    json j_answer;    j_answer[&quot;everything&quot;] = 42;    j[&quot;answer&quot;] = j_answer;    json j_list = json::array();    j_list.push_back(1);    j_list.push_back(0);    j_list.push_back(2);    j[&quot;list&quot;] = j_list;    json j_object;    j_object[&quot;currency&quot;] = &quot;USD&quot;;    j_object[&quot;value&quot;] = 42.99;    j[&quot;object&quot;] = j_object;    // è½¬æˆå­—ç¬¦ä¸²    std::string strJSON = j.dump(2);    std::cout &lt;&lt; strJSON;    return 0;&#125;\n\nè¾“å‡ºå†…å®¹ä¸æ–¹å¼ 1 ä¸€æ ·ã€‚\n2.2 è§£æ JSONint main()&#123;    using json = nlohmann::json;    std::string strJSON = u8R&quot;(    &#123;        &quot;answer&quot;: &#123;             &quot;everything&quot;: 42        &#125;,        &quot;happy&quot;: true,        &quot;list&quot;: [            1,            0,            2         ],        &quot;name&quot;: &quot;Niels&quot;,        &quot;nothing&quot;: null,        &quot;object&quot;: &#123;            &quot;currency&quot;: &quot;USD&quot;,            &quot;value&quot;: 42.99        &#125;,        &quot;pi&quot;: 3.141    &#125;    )&quot;;    auto jsonObj = json::parse(strJSON);    std::cout &lt;&lt; jsonObj[&quot;pi&quot;].get&lt;float&gt;() &lt;&lt; std::endl; // 3.141    std::cout &lt;&lt; jsonObj[&quot;pi&quot;].get&lt;double&gt;() &lt;&lt; std::endl; // 3.141    std::cout &lt;&lt; std::boolalpha &lt;&lt; jsonObj[&quot;happy&quot;].get&lt;bool&gt;() &lt;&lt; std::endl; // true    std::cout &lt;&lt; jsonObj[&quot;name&quot;].get&lt;std::string&gt;() &lt;&lt; std::endl; // Niels    assert(jsonObj[&quot;nothing&quot;] == nullptr);    std::cout &lt;&lt; jsonObj[&quot;answer&quot;][&quot;everything&quot;].get&lt;int&gt;() &lt;&lt; std::endl; // 42    std::cout &lt;&lt; jsonObj[&quot;list&quot;].size() &lt;&lt; std::endl; // 3    std::cout &lt;&lt; jsonObj[&quot;list&quot;][0].get&lt;int&gt;() &lt;&lt; std::endl; // 1    std::cout &lt;&lt; jsonObj[&quot;list&quot;][1].get&lt;int&gt;() &lt;&lt; std::endl; // 0    std::cout &lt;&lt; jsonObj[&quot;list&quot;][2].get&lt;int&gt;() &lt;&lt; std::endl; // 2    std::cout &lt;&lt; jsonObj[&quot;object&quot;][&quot;currency&quot;].get&lt;std::string&gt;() &lt;&lt; std::endl; // USD    std::cout &lt;&lt; jsonObj[&quot;object&quot;][&quot;value&quot;].get&lt;float&gt;() &lt;&lt; std::endl; // 42.99    // ä¾æ¬¡è¾“å‡º:    // 1    // 0    // 2    for (json::iterator it = jsonObj[&quot;list&quot;].begin(); it != jsonObj[&quot;list&quot;].end(); ++it) &#123;        std::cout &lt;&lt; *it &lt;&lt; std::endl;    &#125;    return 0;&#125;\n\n3. å¼‚å¸¸å¤„ç†å½“è§£æå’Œç”Ÿæˆ JSON å‡ºé”™æ—¶ï¼Œnlohmann&#x2F;json ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› æ­¤åœ¨è§£æå’Œç”Ÿæˆ JSON æ—¶ï¼Œéœ€è¦è¿›è¡Œå¼‚å¸¸æ•è·ã€‚\nint main()&#123;    using json = nlohmann::json;    std::string strJSON = u8R&quot;(    &#123;        &quot;pi&quot;: 3.141    &#125;    )&quot;;    try &#123;        auto jsonObj = json::parse(strJSON);        std::cout &lt;&lt; jsonObj[&quot;ppp&quot;].get&lt;float&gt;() &lt;&lt; std::endl;    &#125;    catch (std::exception&amp; e) &#123;        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;    &#125;    return 0;&#125;\n\n4. åˆ¤æ–­æˆå‘˜æ˜¯å¦å­˜åœ¨int main()&#123;    using json = nlohmann::json;    std::string strJSON = u8R&quot;(    &#123;        &quot;pi&quot;: 3.141    &#125;    )&quot;;    auto jsonObj = json::parse(strJSON);    std::cout &lt;&lt; std::boolalpha &lt;&lt; jsonObj.contains(&quot;pi&quot;) &lt;&lt; std::endl; // true    std::cout &lt;&lt; std::boolalpha &lt;&lt; jsonObj.contains(&quot;ppp&quot;) &lt;&lt; std::endl; // false    return 0;&#125;\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["å¼€æºåº“"]},{"title":"å¼€æºåº“jerryscriptä½¿ç”¨å¤‡å¿˜","url":"/post/3353203242.html","content":"\nä»¥å‰åµŒå…¥è„šæœ¬é¦–é€‰Luaï¼Œä½†æœ‰äº›å¹´å¤´æ²¡æœ‰ç”¨Luaäº†ï¼Œè¯­æ³•ä¹Ÿå¿«å¿˜è®°å…‰äº†ï¼Œè¿™äº›å¹´å€’æ˜¯å¯¹ JavaScript è¯­æ³•æ„ˆå‘ç†Ÿæ‚‰äº†ï¼Œäºæ˜¯æƒ³çœ‹çœ‹æœ‰æ²¡æœ‰å°å·§çš„ JavaScript å¼•æ“ï¼Œå¯ä»¥åµŒå…¥åˆ° C++ç¨‹åºä¸­ä½¿ç”¨ã€‚å˜¿ï¼Œè¿˜çœŸæœ‰ã€‚èŠ±æ—¶é—´ç ”ç©¶äº†ä¸‹ JerryScript åº“ï¼Œä¹Ÿé¡ºæ‰‹ç»™ JerryScript æäº¤äº†å‡ ä¸ª PR è¢«é‡‡çº³äº†ï¼Œæœ‰å¹¸æˆä¸ºé¡¶çº§é¡¹ç›®çš„ Contributorï¼ˆå°±æ˜¯ç©å„¿ ^_^ï¼‰ã€‚\n\nJerryScript æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript å¼•æ“ï¼Œèµ„æºå ç”¨æå°‘ï¼Œå®ƒå¯ä»¥è¿è¡Œåœ¨èµ„æºå—é™åˆ¶çš„è®¾å¤‡ä¸Šï¼Œå¦‚ï¼š\n\nåªæœ‰å‡  KB RAM èƒ½è¿è¡Œå¼•æ“çš„è®¾å¤‡ï¼ˆ&lt;64 KB RAMï¼‰\nåªèƒ½ä¸ºä»£ç å¼•æ“æä¾›æœ‰é™ ROM ç©ºé—´çš„è®¾å¤‡ï¼ˆ&lt;200 KB ROMï¼‰\n\nJerryScript ä½¿ç”¨ C è¯­è¨€å¼€å‘ï¼Œè·¨å¹³å°ã€‚\n\n\nä¸ºä»€ä¹ˆæ²¡æœ‰é€‰æ‹© QuickJSï¼Ÿè¯´èµ·è½»é‡çº§çš„ JavaScript å¼•æ“ï¼Œå¾ˆå¤šäººéƒ½ä¼šæƒ³åˆ° QuickJSã€‚çš„ç¡®ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿé€‰æ‹©äº† QuickJSï¼Œä½†ä¸€ç•ªç ”ç©¶ä¹‹åï¼Œå‘ç° QuickJS åœ¨ Windows ç¯å¢ƒä¸‹ç¼–è¯‘å®åœ¨æ˜¯ä¸å¤ªå‹å¥½ï¼Œä¸ä»…éœ€è¦å®‰è£… Mingw64ï¼Œè€Œä¸”ä¿®æ”¹ç¼–è¯‘é€‰é¡¹ä¹Ÿä¸æ–¹ä¾¿ã€‚å¯èƒ½æ˜¯æˆ‘èƒ½åŠ›çš„é—®é¢˜å§ï¼Œæˆ‘è¿˜æœªæ‰¾åˆ°å°† QuickJS ç¼–è¯‘æˆ MT è¿è¡Œåº“çš„é™æ€åº“çš„æ–¹æ³•ã€‚\nä¸€ä¸ªåº“åœ¨ç¼–è¯‘æ–¹é¢åšå¾—éƒ½ä¸å¤Ÿå‹å¥½ï¼Œä½•å†µ Windows ä¹Ÿä¸æ˜¯å†·é—¨çš„ç³»ç»Ÿï¼Œé‚£å°±æ²¡å¿…è¦å§”å±ˆè‡ªå·±äº†ï¼Œæ¯•ç«Ÿè¿˜æœ‰å…¶ä»–çš„é€‰æ‹©ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;åè§‚ JerryScriptï¼Œä½¿ç”¨ CMake è¿›è¡Œæ„å»ºï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œä¸€è·¯ç•…é€šã€‚\nå¿«é€Ÿä¸Šæ‰‹JerryScript çš„æ¥å£æ¯”è¾ƒç®€æ´ï¼Œ è€Œä¸”å®˜æ–¹å·²ç»æä¾›äº†ä¸°å¯Œçš„ç¤ºä¾‹ï¼Œç¤ºä¾‹åœ°å€å¦‚ä¸‹ï¼š\nhttps://jerryscript.net/api-example/&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•æš´éœ² C++ çš„å‡½æ•°ç»™ JS è¿›è¡Œè°ƒç”¨ã€‚\n#include &lt;stdio.h&gt;#include &quot;jerryscript.h&quot;// C++ å‡½æ•°ï¼Œç”¨äºæš´éœ²ç»™ JSstatic jerry_value_t print_handler(    const jerry_call_info_t* call_info_p,    const jerry_value_t arguments[],    const jerry_length_t argument_count) &#123;    // æ²¡æœ‰å‚æ•°ï¼Œåªæ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²    printf(&quot;Print handler was called\\n&quot;);    // è¿”å› undefined ç»™JSå¼•æ“    return jerry_undefined();&#125;int main(void) &#123;    const jerry_char_t script[] = &quot;print ();&quot;;    const jerry_length_t script_size = sizeof(script) - 1;    // åˆå§‹åŒ–å¼•æ“    jerry_init(JERRY_INIT_EMPTY);    // æ·»åŠ  print æ–¹æ³•åˆ° JavaScript çš„å…¨å±€å¯¹è±¡ä¸Š    // åœ¨JS ä¸­è°ƒç”¨ print æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨åˆ° C++ print_handler æ–¹æ³•    &#123;        jerry_value_t global_object = jerry_current_realm();        jerry_value_t property_name_print = jerry_string_sz(&quot;print&quot;);        jerry_value_t property_value_func = jerry_function_external(print_handler);        jerry_value_t set_result = jerry_object_set(global_object, property_name_print, property_value_func);        // æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿ        if (jerry_value_is_exception(set_result)) &#123;            printf(&quot;Failed to add the &#x27;print&#x27; property\\n&quot;);        &#125;        jerry_value_free(set_result);        jerry_value_free(property_value_func);        jerry_value_free(property_name_print);        jerry_value_free(global_object);    &#125;    jerry_value_t parsed_code = jerry_parse(script, script_size, NULL);    if (!jerry_value_is_exception(parsed_code))    &#123;        // æ‰§è¡Œ JS ä»£ç         jerry_value_t ret_value = jerry_run(parsed_code);        // é‡Šæ”¾è¿”å›å€¼        jerry_value_free(ret_value);    &#125;    jerry_value_free(parsed_code);    jerry_cleanup();    return 0;&#125;","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["å¼€æºåº“"]},{"title":"ä»C++11å¼€å§‹æ–°å¢çš„å¸¸ç”¨å…³é”®å­—","url":"/post/1914794883.html","content":"ä» C++11 å¼€å§‹ï¼Œä¸€ç³»åˆ—æ–°å…³é”®å­—çš„å¼•å…¥ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†æ›´ä¼˜çš„è¯­æ³•é€‰æ‹©ï¼Œå®ƒä»¬é€æ¸å–ä»£äº†è®¸å¤šä¼ ç»Ÿçš„ C++98&#x2F;03 æƒ¯ç”¨æ³•ã€‚è¿™ä¸ä»…æ˜¯è¯­æ³•çš„æ›´æ–°ï¼Œæ›´æ˜¯ç†å¿µçš„å‡çº§ï¼šç”¨ nullptr æ›¿ä»£ NULL ä»¥è·å¾—ç±»å‹å®‰å…¨ï¼Œç”¨èŒƒå›´ for æ›¿ä»£æ‰‹åŠ¨è¿­ä»£ä»¥æå‡å¯è¯»æ€§ï¼Œç”¨ constexpr å®£å‘Šç¼–è¯‘æœŸè®¡ç®—ä»¥è¿½æ±‚æè‡´æ€§èƒ½ã€‚æœ¬æ–‡æ—¨åœ¨æ¢³ç†è¿™äº›è‡ª C++11 èµ·æ–°å¢çš„å¸¸ç”¨å…³é”®å­—ï¼Œæ­ç¤ºå®ƒä»¬å¦‚ä½•è®©æˆ‘ä»¬çš„ä»£ç å˜å¾—æ›´å®‰å…¨ã€æ›´ç®€æ´ã€æ›´å¼ºå¤§ï¼Œä»è€Œå¸®ä½ è‡ªç„¶è¿‡æ¸¡åˆ°ç°ä»£ C++çš„ç¼–ç¨‹é£æ ¼ã€‚\n\n\nnullptr (C++11)nullptr ä¸“é—¨ç”¨äºè¡¨ç¤ºç©ºæŒ‡é’ˆï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿ NULL æˆ– 0 åœ¨ç±»å‹å®‰å…¨æ€§å’Œä»£ç æ¸…æ™°åº¦ä¸Šçš„ç¼ºé™·ã€‚\nnullptr çš„ç±»å‹ä¸º std::nullptr_tï¼Œåªèƒ½éšå¼è½¬æ¢ä¸ºæŒ‡é’ˆç±»å‹ï¼ˆåŒ…æ‹¬åŸç”ŸæŒ‡é’ˆã€æ™ºèƒ½æŒ‡é’ˆã€æ‰˜ç®¡å¥æŸ„ç­‰ï¼‰ï¼Œâ€‹ ä¸èƒ½è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ï¼Œé¿å…äº†ä¸æ•´å‹ 0 çš„æ··æ·†ã€‚\nè€Œä¼ ç»Ÿ NULL æ˜¯å®ï¼ˆé€šå¸¸å®šä¹‰ä¸º 0 æˆ– (void*)0ï¼‰ï¼Œå¯èƒ½è¢«è¯¯è§£é‡Šä¸ºæ•´æ•°ï¼Œå¯¼è‡´ç±»å‹é”™è¯¯ã€‚\nåœ¨å‡½æ•°é‡è½½åœºæ™¯ä¸­ï¼Œnullptr å¯æ˜ç¡®é€‰æ‹©æŒ‡é’ˆç‰ˆæœ¬çš„é‡è½½å‡½æ•°ï¼Œé¿å…å›  NULL è¢«è§£é‡Šä¸ºæ•´æ•°å¯¼è‡´çš„é”™è¯¯è°ƒç”¨ï¼š\nvoid foo(int);        // æ•´å‹ç‰ˆæœ¬void foo(int*);       // æŒ‡é’ˆç‰ˆæœ¬foo(nullptr);         // æ­£ç¡®è°ƒç”¨æŒ‡é’ˆç‰ˆæœ¬\n\nè€Œä¸”åœ¨æ¨¡æ¿ä¸­å¯ç²¾ç¡®åŒ¹é…æŒ‡é’ˆç±»å‹ï¼Œé¿å…æ¨å¯¼ä¸ºæ•´æ•°ï¼š\n#include &lt;iostream&gt;template&lt;typename T&gt;void check(T ptr) &#123;\tstd::cout &lt;&lt; &quot;ptr type: &quot; &lt;&lt; typeid(ptr).name() &lt;&lt; std::endl;&#125;int main() &#123;\tcheck(nullptr);  // ptr type: std::nullptr_t&#125;\n\noverride&#x2F;final (C++11)override æ˜¯ä¸€ä¸ªç”¨äºæ˜¾å¼æ ‡è®°æ´¾ç”Ÿç±»ä¸­é‡å†™ï¼ˆOverrideï¼‰åŸºç±»è™šå‡½æ•°çš„å…³é”®å­—ã€‚å®ƒé€šè¿‡å¼ºåˆ¶ç¼–è¯‘å™¨æ£€æŸ¥å’Œå¢å¼ºä»£ç å¯è¯»æ€§çš„æ–¹å¼ï¼Œæ˜¾è‘—æå‡äº†ç»§æ‰¿ä½“ç³»çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\noverride æ˜ç¡®å‘ŠçŸ¥ç¼–è¯‘å™¨å’Œå¼€å‘è€…ï¼šå½“å‰å‡½æ•°æ—¨åœ¨é‡å†™åŸºç±»çš„è™šå‡½æ•°ï¼Œè‹¥æ´¾ç”Ÿç±»å‡½æ•°ç­¾åï¼ˆå‚æ•°ç±»å‹ã€const é™å®šã€å¼•ç”¨é™å®šç­‰ï¼‰ä¸åŸºç±»è™šå‡½æ•°ä¸å®Œå…¨åŒ¹é…ï¼Œç¼–è¯‘å™¨ä¼šç«‹å³æŠ¥é”™ï¼Œé¿å…éšè”½çš„é”™è¯¯ã€‚\nfinal å…³é”®å­—æä¾›ä¸¤ç§é™åˆ¶èƒ½åŠ›ï¼š\n\nâ€‹ ç¦æ­¢ç±»è¢«ç»§æ‰¿\næ ‡è®°ä¸º final çš„ç±»ä¸å¯ä½œä¸ºåŸºç±»ï¼Œç¼–è¯‘æ—¶ä¼šé˜»æ­¢æ´¾ç”Ÿç±»ç»§æ‰¿å®ƒã€‚\nclass Base final &#123; /* ... */ &#125;; // Base ç±»ä¸å¯è¢«ç»§æ‰¿class Derived : public Base &#123; &#125;; // âŒ ç¼–è¯‘é”™è¯¯ï¼šBase æ˜¯ final çš„\n\nç¦æ­¢è™šå‡½æ•°è¢«é‡å†™\næ ‡è®°ä¸º final çš„è™šå‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­ä¸å¯è¢«è¦†ç›–ï¼Œç¡®ä¿åŸºç±»è®¾è®¡æ„å›¾ä¸è¢«ç ´åã€‚\nclass Base &#123;public:    virtual void func() final; // func ä¸å¯è¢«é‡å†™&#125;;class Derived : public Base &#123;public:    void func() override; // âŒ ç¼–è¯‘é”™è¯¯ï¼šfunc æ˜¯ final çš„&#125;;\n\nfinal å¸¸ä¸ override é…åˆä½¿ç”¨ï¼š\n\noverrideï¼šç¡®ä¿æ´¾ç”Ÿç±»å‡½æ•°æ­£ç¡®é‡å†™åŸºç±»è™šå‡½æ•°ï¼ˆç­¾åä¸åŒ¹é…æ—¶æŠ¥é”™ï¼‰ã€‚\nfinalï¼šåœ¨æ´¾ç”Ÿç±»ä¸­è¿›ä¸€æ­¥ç¦æ­¢åç»­é‡å†™ã€‚\n\nclass Derived : public Base &#123;public:    void func() override final; // âœ… é‡å†™åŸºç±»å‡½æ•°ï¼Œå¹¶ç¦æ­¢åç»­è¦†ç›–&#125;;\n\nconstexpr (C++11)constexpr ç”¨äºåœ¨ç¼–è¯‘æ—¶è®¡ç®—å¸¸é‡è¡¨è¾¾å¼ï¼Œæå‡ç¨‹åºæ€§èƒ½å’Œå®‰å…¨æ€§ã€‚å…¶æ ¸å¿ƒæœºåˆ¶æ˜¯å°†è®¡ç®—ä»è¿è¡Œæ—¶è½¬ç§»åˆ°ç¼–è¯‘æ—¶ï¼Œå‡å°‘è¿è¡Œæ—¶å¼€é”€å¹¶æ”¯æŒç¼–è¯‘æœŸé€»è¾‘éªŒè¯ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘å™¨è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ï¼š\nconstexpr int factorial(int n) &#123;    return (n &lt;= 1) ? 1 : n * factorial(n - 1);&#125;constexpr int result = factorial(5); // ç¼–è¯‘æ—¶è®¡ç®—ç»“æœä¸º 120\n\nä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨å£°æ˜æ•°ç»„æ—¶ï¼Œæ•°ç»„å¤§å°éœ€è¦ä¸ºå¸¸é‡ï¼Œä½¿ç”¨ constexpr å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼å£°æ˜æ•°ç»„ï¼š\nconstexpr int getArraySize(int type) &#123;  // éœ€è¦C++14æ”¯æŒ\tif (type == 1) &#123;\t\treturn 42;\t&#125;\telse if (type == 2) &#123;\t\treturn 52;\t&#125;\treturn 10;&#125;int main()&#123;\tint array[getArraySize(1)];&#125;\n\nåœ¨ä½¿ç”¨ constexpr æ—¶ï¼Œæœ‰ä»¥ä¸‹æ³¨æ„äº‹é¡¹ä¸æŠ€å·§ï¼š\n\nå¿…é¡»ç”¨å¸¸é‡è¡¨è¾¾å¼åˆå§‹åŒ–ï¼ˆå­—é¢å€¼ã€å…¶ä»– constexpr å˜é‡ç­‰ï¼‰ã€‚\n\nconstexpr éšå« const å±æ€§ï¼Œä¹Ÿæ˜¯å¸¸é‡ï¼Œä¸å¯ä¿®æ”¹ã€‚\n\nC++11 â€‹ ä¸­å‡½æ•°ä½“ä»…èƒ½åŒ…å«å•æ¡ return è¯­å¥ï¼Œä½† â€‹C++14 ä»¥ä¸Š â€‹â€‹ å¯ä»¥æ”¯æŒå¾ªç¯ã€å±€éƒ¨å˜é‡ã€æ¡ä»¶åˆ†æ”¯ã€å¤šä¸ª return ç­‰å¤æ‚é€»è¾‘ã€‚\n\nä½¿ç”¨ constexpr å£°æ˜çš„å‡½æ•°ï¼Œä»ç„¶å¯ä»¥åœ¨è¿è¡Œæ—¶ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ã€‚\nconstexpr int getArraySize(int type) &#123;  if (type == 1) &#123;    return 42;  &#125;  else if (type == 2) &#123;    return 52;  &#125;  return 10;&#125;int main() &#123;  int array[getArraySize(1)]; // è¿™é‡Œçš„ getArraySize(1) åœ¨ç¼–è¯‘æ—¶è¢«æ±‚å€¼ï¼Œè¿”å› 42  int j = 2;  std::cout &lt;&lt; getArraySize(j) &lt;&lt; std::endl; // è¿™é‡Œçš„ getArraySize(j) åœ¨è¿è¡Œæ—¶è¢«æ±‚å€¼ï¼Œè¿”å› 52&#125;\n\nconstexpr ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„çµä¸¹å¦™è¯ï¼Œåœ¨å¤„ç†å¤æ‚è®¡ç®—æ—¶è¿˜éœ€æƒè¡¡ç¼–è¯‘æ—¶é—´æˆæœ¬ã€‚\n\nå¯ä»¥ç»“åˆä½¿ç”¨ static_assert æ¥éªŒè¯ç¼–è¯‘æœŸç»“æœï¼Œå¦‚ï¼šstatic_assert(factorial(5) == 120, &quot;Error&quot;);\n\n\nauto (C++11)auto ç”¨äºåœ¨ç¼–è¯‘æœŸæ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼è‡ªåŠ¨æ¨å¯¼å˜é‡ç±»å‹ï¼Œå¯ä»¥ç®€åŒ–ä»£ç å¹¶æå‡å¯è¯»æ€§ã€‚\nä½¿ç”¨ auto å£°æ˜çš„å˜é‡ â€‹ å¿…é¡»åˆå§‹åŒ–ã€‚\nauto x = 42;        // æ¨å¯¼ä¸º intauto y = 3.14;      // æ¨å¯¼ä¸º doubleauto name = &quot;John&quot;; // æ¨å¯¼ä¸º const char*\n\ndecltype (C++11)decltype ç”¨äºæŸ¥è¯¢è¡¨è¾¾å¼çš„ç±»å‹ï¼Œå‘ç”Ÿåœ¨ç¼–è¯‘æœŸï¼Œä¸”ä¸ä¼šå¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚\nint i = 4;decltype(i) a; // a çš„ç±»å‹ä¸º intstd::vector&lt;int&gt; vec;typedef decltype(vec.begin()) vectype; // æ¨å¯¼è¿­ä»£å™¨ç±»å‹\n\ndecltype åœ¨æ³›å‹ç¼–ç¨‹ä¸­å¸¸ç”¨äºè¿½è¸ªå‡½æ•°è¿”å›ç±»å‹ï¼š\ntemplate &lt;typename T, typename U&gt;auto add(T t, U u) -&gt; decltype(t + u) &#123;    return t + u;&#125;\n\nthread_local (C++11)thread_local ç”¨äºå£°æ˜çº¿ç¨‹å±€éƒ¨å­˜å‚¨å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è¯¥å˜é‡çš„ç‹¬ç«‹å®ä¾‹ï¼Œçº¿ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œä»è€Œæ— éœ€é¢å¤–çš„åŒæ­¥æœºåˆ¶ï¼ˆå¦‚äº’æ–¥é”ï¼‰å°±èƒ½å®ç°çº¿ç¨‹å®‰å…¨ã€‚\nthread_local int counter = 0; // æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ counter\n\næ ¹æ®å£°æ˜ thread_local å˜é‡æ—¶çš„ä½œç”¨åŸŸçš„ä¸åŒï¼Œå˜é‡æœ‰ä¸åŒçš„ç‰¹æ€§ã€‚\nåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„ thread_local å˜é‡ï¼Œå˜é‡æ˜¯å…¨å±€çš„ï¼Œä¸”æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è¯¥å˜é‡ç‹¬ç«‹çš„å‰¯æœ¬ã€‚æ— è®ºçº¿ç¨‹æ˜¯å¦è®¿é—®äº†è¯¥å˜é‡ï¼Œéƒ½ä¼šåœ¨çº¿ç¨‹åˆ›å»ºæ—¶å£°æ˜è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œçº¿ç¨‹é€€å‡ºæ—¶é‡Šæ”¾è¯¥å˜é‡ã€‚\nè€Œåœ¨å±€éƒ¨ä½œç”¨åŸŸï¼ˆå¦‚å‡½æ•°å†…ï¼‰ï¼Œè™½ç„¶å˜é‡çš„å­˜å‚¨æœŸç­‰äºçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†é“¾æ¥æ€§å’Œä½œç”¨åŸŸä»ç„¶å—å±€éƒ¨å˜é‡è§„åˆ™çº¦æŸã€‚è¿™æ„å‘³ç€å®ƒåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨å¤šæ¬¡å‡½æ•°è°ƒç”¨ä¸­ä¿æŒå…¶å€¼ï¼Œç±»ä¼¼äº static å±€éƒ¨å˜é‡ï¼Œä½†æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€ä»½ã€‚\nstatic_assert (C++11)static_assert ç¼–è¯‘æ—¶æ–­è¨€ã€‚\nstatic_assert ( bool_constexpr , message )static_assert ( bool_constexpr )\t\t(C++17 èµ·)\n\nnoexcept (C++11)noexcept ç”¨äºæŒ‡å®šå‡½æ•°æ˜¯å¦å¯èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚å®ƒå–ä»£äº† C++03 ä¸­åŠ¨æ€å¼‚å¸¸è§„èŒƒ (throw())ã€‚\nvoid my_func() noexcept; // è¡¨ç¤ºæ­¤å‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸\n\nå¦‚æœ noexcept å‡½æ•°æŠ›å‡ºäº†å¼‚å¸¸ï¼Œç¨‹åºä¼šè°ƒç”¨ std::terminate()ç»ˆæ­¢ã€‚\nnoexcept ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªæ“ä½œç¬¦ï¼Œåœ¨æ¨¡æ¿ä¸­æ£€æŸ¥è¡¨è¾¾å¼æ˜¯å¦å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼š\ntemplate &lt;typename T&gt;void func() noexcept(noexcept(T())) &#123;&#125; // æ ¹æ®T()æ˜¯å¦æŠ›å‡ºå¼‚å¸¸æ¥å†³å®š\n\nalignas&#x2F;alignof (C++11)alignas ç”¨äºæŒ‡å®šå˜é‡æˆ–ç±»å‹çš„å¯¹é½è¦æ±‚ï¼Œè€Œ alignof ç”¨äºè·å–ç±»å‹çš„å¯¹é½è¦æ±‚ã€‚\nalignas(16) int arr[4]; // arr æŒ‰ 16 å­—èŠ‚å¯¹é½std::cout &lt;&lt; alignof(int) &lt;&lt; std::endl; // è¾“å‡º int çš„å¯¹é½å€¼\n\nalignas å…è®¸ä½ æ˜¾å¼æŒ‡å®šä¸€ä¸ªæ¯”ç¼–è¯‘å™¨é»˜è®¤å¯¹é½è¦æ±‚æ›´ä¸¥æ ¼ï¼ˆæ›´å¤§ï¼‰â€‹â€‹ çš„å¯¹é½å€¼ï¼Œå®ƒå¹¶ä¸èƒ½â€œå‡å¼±â€æˆ–â€œæ”¹å˜â€ç¼–è¯‘å™¨å›ºæœ‰çš„å¯¹é½è§„åˆ™ï¼Œè€Œæ˜¯åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ æ–°çš„çº¦æŸã€‚\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"å¼€æºåº“rpclibä½¿ç”¨å¤‡å¿˜","url":"/post/1963116418.html","content":"rpclibæ˜¯ä¸€ä¸ª C++çš„ RPC åº“ï¼ŒåŸºäº MessagePack è¿›è¡ŒäºŒè¿›åˆ¶åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œåº•å±‚ä½¿ç”¨ TCP è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚å…¶åŠŸèƒ½ä¸ Facebook çš„ Thriftã€Google çš„ Protocol Buffers ç›¸ä¼¼ï¼Œä½† rpclib æ›´åŠ è½»é‡çº§ï¼Œä¸éœ€è¦ä¾èµ– Boostï¼Œè€Œä¸”ä¸ç”¨å£°æ˜æ¥å£æè¿°æ–‡ä»¶ã€‚\n\n\n\nrpclib å®˜ç½‘ï¼š\nhttps://github.com/rpclib/rpclib\n\n1. ç¼–è¯‘ä½¿ç”¨ CMake ç”Ÿæˆå¯¹åº”ç¼–è¯‘ç³»ç»Ÿçš„é¡¹ç›®æ–‡ä»¶ï¼Œç¼–è¯‘å³å¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ vcpkg è¿›è¡Œå®‰è£…ï¼Œå¦‚ï¼š\nvcpkg install rpclib:x86-windows-static\n\n2. ç®€å•åº”ç”¨rpclib æœ‰æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¦‚å¿µï¼Œåªèƒ½ç”±å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡ç«¯ï¼Œæ¥å—æœåŠ¡ç«¯çš„è¿”å›å€¼ï¼ŒæœåŠ¡ç«¯ä¸èƒ½ä¸»åŠ¨è°ƒç”¨å®¢æˆ·ç«¯å‡½æ•°ã€‚å¦‚éœ€å®ç°ä¸¤ç«¯åŒå‘è°ƒç”¨ï¼Œåˆ™éœ€è¦åœ¨ä¸¤ç«¯åˆ†åˆ«å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œå¹¶å½¼æ­¤ç›¸è¿ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;rpclib åº“çš„é”™è¯¯æ˜¯é€šè¿‡ C++å¼‚å¸¸æŠ›å‡ºçš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨è¯¥åº“æ—¶éœ€è¦ä½¿ç”¨ try...catch è¿›è¡Œå¼‚å¸¸æ•è·ã€‚\n2.1 æœåŠ¡ç«¯åœ¨æœåŠ¡ç«¯å®Œæˆç«¯å£ç›‘å¬ï¼ŒåŠå‡½æ•°çš„ç»‘å®šæ“ä½œã€‚\n#include &quot;rpc/server.h&quot;try &#123;  std::shared_ptr&lt;rpc::server&gt; rpcServer =    std::make_shared&lt;rpc::server&gt;(&quot;0.0.0.0&quot;, 8001); // 8001ä¸ºç›‘å¬ç«¯å£  // ç»‘å®šAddå‡½æ•°ï¼Œä¾›å®¢æˆ·ç«¯è°ƒç”¨  rpcServer-&gt;bind(&quot;Add&quot;, [](int x, int y) -&gt; int &#123;    return x + y;  &#125;);  rpcServer-&gt;async_run(); // å¼‚æ­¥å¯åŠ¨Serverå¾ªç¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨run()åŒæ­¥å¯åŠ¨&#125;catch(std::exception&amp; e) &#123;  // ...&#125;\n\n2.2 å®¢æˆ·ç«¯å®¢æˆ·ç«¯é€šè¿‡ IP å’Œç«¯å£è¿æ¥æœåŠ¡ç«¯ï¼Œå¹¶è°ƒç”¨æœåŠ¡ç«¯çš„å‡½æ•°ã€‚\n#include &quot;rpc/client.h&quot;try &#123;  std::shared_ptr&lt;rpc::client&gt; rpcClient =    std::make_shared&lt;rpc::client&gt;(&quot;127.0.0.1&quot;, 8001); // æœåŠ¡ç«¯ç›‘å¬ç«¯å£  rpcClient-&gt;set_timeout(200);  // è®¾ç½®åŒæ­¥è°ƒç”¨çš„è¶…æ—¶æ—¶é—´  int result = rpcClient-&gt;call(&quot;Add&quot;, 100, 200).as&lt;int&gt;(); // è°ƒç”¨Addå‡½æ•°ï¼Œå‚æ•°ä¸º100,200  // resultä¸ºAddå‡½æ•°çš„è¿”å›å€¼&#125;catch(std::exception&amp; e) &#123;  // ...&#125;\n\n2.3 æ”¯æŒçš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹rpclib ä½¿ç”¨ MessagePack è¿›è¡Œåºåˆ—åŒ–ï¼Œæ”¯æŒçš„æ•°æ®ç±»å‹ä¸ MessagePack ç›¸åŒã€‚æ”¯æŒå¦‚ä¸‹ C++ç±»å‹ï¼š\n\nbool\nchar*\ndouble\nfloat\ncharï¼Œä¸æ”¯æŒ wchar_t\nshort\nint\nlong\nlong long\nstd::stringï¼Œä¸æ”¯æŒ std::wstring\nstd::vector\nstd::array\nstd::map\nstd::shared_ptr\nstd::unique_ptr\n\n3. å¹¿å‘Šåœ¨è¿™é‡Œæ¨èæˆ‘çš„veigaræ¡†æ¶ï¼Œä¸€ä¸ªåŸºäºå…±äº«å†…å­˜çš„rpcæ¡†æ¶ï¼Œä¸rpclibç›¸æ¯”æœ‰å¦‚ä¸‹çš„ä¼˜åŠ¿ï¼š\n\næ²¡æœ‰æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ¦‚å¿µï¼Œæ¯ä¸ªVeigarå®ä¾‹é—´éƒ½å¯ä»¥ç›¸äº’è°ƒç”¨ã€‚\n\næ²¡æœ‰ç½‘ç»œé—®é¢˜ï¼Œå¦‚ç«¯å£å ç”¨ã€åŠå…³é—­çŠ¶æ€ç­‰ã€‚\n\næ²¡æœ‰è¯¡å¼‚çš„ç«¯å£å‡å¯ç”¨æ€§é—®é¢˜ï¼ˆç‰¹åˆ«æ˜¯åœ¨Windowsç³»ç»Ÿä¸Šï¼‰ã€‚\n\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["å¼€æºåº“"]},{"title":"æ‹¨å¼€å­—ç¬¦ç¼–ç çš„è¿·é›¾","url":"/post/2720283852.html","content":"ä¸ºä»€ä¹ˆæœ‰äº›è½¯ä»¶ç•Œé¢ä¸Šçš„éŸ©æ–‡ä¼šæ˜¾ç¤ºä¹±ç ï¼Ÿ\nASCII å’Œ ANSI æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\nç›¸ä¿¡ä¸å°‘äººåœ¨å­—ç¬¦ç¼–ç ä¸Šé¢æ‘”è¿‡è·Ÿå¤´ï¼Œè¿™ç¯‡æ–‡ç« é’ˆå¯¹å¼€å‘ä¸­éœ€è¦äº†è§£çš„å­—ç¬¦ç¼–ç çŸ¥è¯†è¿›è¡Œè®²è§£ï¼Œå¸Œæœ›å¸®åŠ©å¤§å®¶æ‹¨å¼€å­—ç¬¦ç¼–ç çš„è¿·é›¾ï¼Œä»æ­¤å‘Šåˆ«ä¹±ç çš„å›°æ‰°ã€‚\n\n\nASCII åŠå…¶æ‰©å±•ä»€ä¹ˆæ˜¯ ASCII å­—ç¬¦é›†å­—ç¬¦é›†å°±æ˜¯ä¸€ç³»åˆ—ç”¨äºæ˜¾ç¤ºçš„å­—ç¬¦çš„é›†åˆã€‚\nASCII å­—ç¬¦é›†ç”±ç¾å›½å›½å®¶æ ‡å‡†åä¼šï¼ˆAmerican National Standard Institute)äº 1968 å¹´åˆ¶å®šä¸€ä¸ªå­—ç¬¦æ˜ å°„é›†åˆã€‚\nASCII ä½¿ç”¨ 7 ä½äºŒè¿›åˆ¶ä½æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œæ€»å…±å¯ä»¥è¡¨ç¤º 128 ä¸ªå­—ç¬¦ï¼ˆå³2^7ï¼ŒäºŒè¿›åˆ¶000 0000 ï½ 111 1111ï¼Œåè¿›åˆ¶0ï½127ï¼‰ã€‚\nASCII å­—ç¬¦é›†ä¸­æ¯ä¸ªæ•°å­—å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ï¼Œå¦‚ä¸‹è¡¨ï¼š\n\n\n\nASCII\nHex\nå­—ç¬¦\nASCII\nHex\nå­—ç¬¦\nASCII\nHex\nå­—ç¬¦\nASCII\nHex\nå­—ç¬¦\n\n\n\n0\n0x00\nNUL\n1\n0x01\nSOH\n2\n0x02\nSTX\n3\n0x03\nETX\n\n\n4\n0x04\nEOT\n5\n0x05\nENQ\n6\n0x06\nACK\n7\n0x07\nBEL\n\n\n8\n0x08\nBS\n9\n0x09\nHT\n10\n0x0A\nLF\n11\n0x0B\nVT\n\n\n12\n0x0C\nFF\n13\n0x0D\nCR\n14\n0x0E\nSO\n15\n0x0F\nSI\n\n\n16\n0x10\nDLE\n17\n0x11\nDC1\n18\n0x12\nDC2\n19\n0x13\nDC3\n\n\n20\n0x14\nDC4\n21\n0x15\nNAK\n22\n0x16\nSYN\n23\n0x17\nETB\n\n\n24\n0x18\nCAN\n25\n0x19\nEM\n26\n0x1A\nSUB\n27\n0x1B\nESC\n\n\n28\n0x1C\nFS\n29\n0x1D\nGS\n30\n0x1E\nRS\n31\n0x1F\nUS\n\n\n32\n0x20\nSpace\n33\n0x21\n!\n34\n0x22\nâ€œ\n35\n0x23\n#\n\n\n36\n0x24\n$\n37\n0x25\n%\n38\n0x26\n&amp;\n39\n0x27\nâ€˜\n\n\n40\n0x28\n(\n41\n0x29\n)\n42\n0x2A\n*\n43\n0x2B\n+\n\n\n44\n0x2C\n,\n45\n0x2D\n-\n46\n0x2E\n.\n47\n0x2F\n&#x2F;\n\n\n48\n0x30\n0\n49\n0x31\n1\n50\n0x32\n2\n51\n0x33\n3\n\n\n52\n0x34\n4\n53\n0x35\n5\n54\n0x36\n6\n55\n0x37\n7\n\n\n56\n0x38\n8\n57\n0x39\n9\n58\n0x3A\n:\n59\n0x3B\n;\n\n\n60\n0x3C\n&lt;\n61\n0x3D\n&#x3D;\n62\n0x3E\n&gt;\n63\n0x3F\n?\n\n\n64\n0x40\n@\n65\n0x41\nA\n66\n0x42\nB\n67\n0x43\nC\n\n\n68\n0x44\nD\n69\n0x45\nE\n70\n0x46\nF\n71\n0x47\nG\n\n\n72\n0x48\nH\n73\n0x49\nI\n74\n0x4A\nJ\n75\n0x4B\nK\n\n\n76\n0x4C\nL\n77\n0x4D\nM\n78\n0x4E\nN\n79\n0x4F\nO\n\n\n80\n0x50\nP\n81\n0x51\nQ\n82\n0x52\nR\n83\n0x53\nS\n\n\n84\n0x54\nT\n85\n0x55\nU\n86\n0x56\nV\n87\n0x57\nW\n\n\n88\n0x58\nX\n89\n0x59\nY\n90\n0x5A\nZ\n91\n0x5B\n[\n\n\n92\n0x5C\n\\\n93\n0x5D\n]\n94\n0x5E\n^\n95\n0x5F\n_\n\n\n96\n0x60\n&#96;\n97\n0x61\na\n98\n0x62\nb\n99\n0x63\nc\n\n\n100\n0x64\nd\n101\n0x65\ne\n102\n0x66\nf\n103\n0x67\ng\n\n\n104\n0x68\nh\n105\n0x69\ni\n106\n0x6A\nj\n107\n0x6B\nk\n\n\n108\n0x6C\nl\n109\n0x6D\nm\n110\n0x6E\nn\n111\n0x6F\no\n\n\n112\n0x70\np\n113\n0x71\nq\n114\n0x72\nr\n115\n0x73\ns\n\n\n116\n0x74\nt\n117\n0x75\nu\n118\n0x76\nv\n119\n0x77\nw\n\n\n120\n0x78\nx\n121\n0x79\ny\n122\n0x7A\nz\n123\n0x7B\n{\n\n\n124\n0x7C\n|\n125\n0x7D\n}\n126\n0x7E\n~\n127\n0x7F\nDEL\n\n\nå› ä¸ºå…¶å¯¹åº”å…³ç³»éå¸¸ç®€å•ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„ç¼–ç è§„åˆ™ï¼Œæ‰€ä»¥ä¸¥æ ¼æ¥è®² ASCII ä¸èƒ½ç®—å­—ç¬¦ç¼–ç ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è§„å®šç¼–ç è§„åˆ™ã€‚æˆ‘ä»¬åªæ˜¯ä¹ æƒ¯æ€§çš„å°† ASCII å­—ç¬¦é›†ç§°ä¹‹ä¸º ASCII ç ã€ASCII ç¼–ç ã€‚\nASCII çš„æ‰©å±•æ‰©å±•æœ€é«˜ä½ASCII å­—ç¬¦é›†æ˜¯ç¾å›½äººå‘æ˜çš„ï¼Œå…¶ä¸­çš„å­—ç¬¦å®Œå…¨æ˜¯ä¸ºå…¶è‡ªå·±é‡èº«å®šåˆ¶çš„ã€‚éšç€è®¡ç®—æœºæŠ€æœ¯æ™®åŠåˆ°æ¬§æ´²ï¼ˆå¦‚æ³•å›½ã€å¾·å›½ï¼‰å„å›½ï¼Œæ¬§æ´²å¾ˆå¤šå›½å®¶ä½¿ç”¨çš„å­—ç¬¦é™¤äº† ASCII è¡¨ä¸­çš„ 128 ä¸ªå­—ç¬¦ä¹‹å¤–ï¼Œæ­¤æ—¶æ¬§æ´²äººæ°‘å‘ç° ASCII å­—ç¬¦é›†ä¸èƒ½å®Œå…¨è¡¨è¾¾ä»–ä»¬æ‰€è¦è¡¨è¾¾çš„å†…å®¹ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æ€ä¹ˆåŠäº†ï¼Ÿä»–ä»¬å‘ç° ASCII åªä½¿ç”¨äº†ä¸€ä¸ªå­—èŠ‚ï¼ˆ8 ä½ï¼‰ä¹‹ä¸­çš„ä½ 7 ä½ï¼Œäºæ˜¯æ¬§æ´²å„å›½å¼€å§‹å„æ˜¾ç¥é€šï¼Œæ‰“èµ·äº†æœ€é«˜ä½ï¼ˆç¬¬ 0 ä½ï¼‰çš„ä¸»æ„ï¼Œå°†æœ€é«˜ä½åˆ©ç”¨äº†èµ·æ¥ï¼Œè¿™æ ·åˆå¤šäº† 128 ä¸ªå­—ç¬¦ï¼Œä»è€Œæ»¡è¶³äº†æ¬§æ´²äººæ°‘çš„éœ€è¦ã€‚\nä½†å› ä¸ºæ¯ä¸ªå›½å®¶çš„éœ€æ±‚ä¸ä¸€æ ·ï¼Œå„å›½éƒ½è®¾è®¡äº†ä¸åŒçš„æ–¹æ¡ˆã€‚ä¸ºäº†ç»“æŸè¿™ç§æ··ä¹±çš„å±€é¢ï¼Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡(ISO)åŠå›½é™…ç”µå·¥å§”å‘˜ä¼š(IEC)è”åˆåˆ¶å®šäº†ä¸€ç³»åˆ— 8 ä½å­—ç¬¦é›†çš„æ ‡å‡†ï¼Œç»Ÿç§°ä¸º ISO 8859ï¼ˆå…¨ç§° ISO&#x2F;IEC 8859ï¼‰ã€‚æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ç³»åˆ—å­—ç¬¦é›†çš„ç»Ÿç§°ï¼Œå¦‚ ISO&#x2F;IEC 8859-1ï¼ˆä¹Ÿå°±æ˜¯å¸¸å¬åˆ°çš„ Latin-1ï¼‰æ”¯æŒè¥¿æ¬§è¯­è¨€ï¼ŒISO&#x2F;IEC 8859-4ï¼ˆLatin-4ï¼‰æ”¯æŒåŒ—æ¬§è¯­è¨€ç­‰ã€‚\nå®Œæ•´åˆ—è¡¨å¦‚ä¸‹ï¼ˆæ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼‰ï¼šISO&#x2F;IEC 8859-1 (Latin-1) - è¥¿æ¬§è¯­è¨€ISO&#x2F;IEC 8859-2 (Latin-2) - ä¸­æ¬§è¯­è¨€ISO&#x2F;IEC 8859-3 (Latin-3) - å—æ¬§è¯­è¨€ï¼Œä¸–ç•Œè¯­ä¹Ÿå¯ç”¨æ­¤å­—ç¬¦é›†æ˜¾ç¤ºã€‚ISO&#x2F;IEC 8859-4 (Latin-4) - åŒ—æ¬§è¯­è¨€ISO&#x2F;IEC 8859-5 (Cyrillic) - æ–¯æ‹‰å¤«è¯­è¨€ISO&#x2F;IEC 8859-6 (Arabic) - é˜¿æ‹‰ä¼¯è¯­ISO&#x2F;IEC 8859-7 (Greek) - å¸Œè…Šè¯­ISO&#x2F;IEC 8859-8 (Hebrew) - å¸Œä¼¯æ¥è¯­(è§†è§‰é¡ºåº)ISO 8859-8-I - å¸Œä¼¯æ¥è¯­(é€»è¾‘é¡ºåº)ISO&#x2F;IEC 8859-9 (Latin-5 æˆ– Turkish) - å®ƒæŠŠ Latin-1 çš„å†°å²›è¯­å­—æ¯æ¢èµ°ï¼ŒåŠ å…¥åœŸè€³å…¶è¯­å­—æ¯ã€‚ISO&#x2F;IEC 8859-10 (Latin-6 æˆ– Nordic) - åŒ—æ—¥è€³æ›¼è¯­æ”¯ï¼Œç”¨æ¥ä»£æ›¿ Latin-4ã€‚ISO&#x2F;IEC 8859-11 (Thai) - æ³°è¯­ï¼Œä»æ³°å›½çš„ TIS620 æ ‡å‡†å­—é›†æ¼”åŒ–è€Œæ¥ã€‚ISO&#x2F;IEC 8859-13 (Latin-7 æˆ– Baltic Rim) - æ³¢ç½—çš„è¯­æ—ISO&#x2F;IEC 8859-14 (Latin-8 æˆ– Celtic) - å‡¯å°”ç‰¹è¯­æ—ISO&#x2F;IEC 8859-15 (Latin-9) - è¥¿æ¬§è¯­è¨€ï¼ŒåŠ å…¥ Latin-1 æ¬ ç¼ºçš„èŠ¬å…°è¯­å­—æ¯å’Œå¤§å†™æ³•è¯­é‡éŸ³å­—æ¯ï¼Œä»¥åŠæ¬§å…ƒç¬¦å·ã€‚ISO&#x2F;IEC 8859-16 (Latin-10) - ä¸œå—æ¬§è¯­è¨€ã€‚ä¸»è¦ä¾›ç½—é©¬å°¼äºšè¯­ä½¿ç”¨ï¼Œå¹¶åŠ å…¥æ¬§å…ƒç¬¦å·ã€‚\n\næˆ‘ä»¬åœ¨æ•°æ®åº“æˆ– Qt ä¸­å¸¸è§åˆ°çš„ Latin-1ã€2ã€5ã€7 å…¶å®å°±æ˜¯ä¸Šé¢æåˆ°çš„é’ˆå¯¹ç‰¹å®šè¯­è¨€çš„ ASCII æ‰©å±•å­—ç¬¦é›†ã€‚\n\nå¤šå­—èŠ‚æ‰©å±• - GB ç³»åˆ—å‰é¢è®²åˆ°äº†ï¼Œæ¬§æ´²å„å›½æœ‰æ•ˆåˆ©ç”¨é—²ç½®çš„æœ€é«˜ä½å¯¹ ASCII å­—ç¬¦é›†è¿›è¡Œäº†æ‰©å±•ã€‚å¯æ˜¯æ¬§æ´²äººæ°‘æ²¡æœ‰æƒ³åˆ°åœ¨å¤§æ´‹å½¼å²¸æœ‰ç€ä¸€ä¸ªæ‹¥æœ‰äº”åƒå¹´å†å²çš„ä¼Ÿå¤§æ°‘æ—ï¼Œå¥¹æ‹¥æœ‰ç€æˆåƒä¸Šä¸‡çš„æ±‰å­—ï¼Œ1 ä¸ªå­—èŠ‚æ˜¾ç„¶ä¸å¤Ÿè¡¨è¾¾å¦‚æ­¤æ·±åšçš„æ–‡åŒ–åº•è•´ã€‚\näºæ˜¯å½“è®¡ç®—æœºå¼•å…¥åˆ°ä¸­å›½ä¹‹åˆï¼Œå›½å®¶æŠ€æœ¯ç›‘ç£å±€å°±è®¾è®¡äº† GB ç³»åˆ—ç¼–ç æ–¹æ¡ˆï¼ˆGB ä¸º guo biao çš„é¦–å­—æ¯ç¼©å†™)ã€‚\nGB ç¼–ç æ–¹æ¡ˆä½¿ç”¨ 2 ä¸ªå­—èŠ‚æ¥è¡¨è¾¾ä¸€ä¸ªæ±‰å­—ã€‚åŒæ—¶ä¸ºäº†å…¼å®¹ ASCII ç¼–ç ï¼Œè§„å®šå„ä¸ªå­—èŠ‚çš„æœ€é«˜ä½ï¼ˆé¦–ä½ï¼‰å¿…é¡»ä¸º 1ï¼Œä»è€Œé¿å…äº†å’Œæœ€é«˜ä½ä¸º 0 çš„ ASCII å­—ç¬¦é›†çš„å†²çªã€‚\nGB ç³»åˆ—å­—ç¬¦é›†ç»å†ä¸‹é¢çš„å‡ ä¸ªå‘å±•è¿‡ç¨‹ï¼š\n\n\n\nç¼–ç åç§°\nå‘å¸ƒæ—¶é—´\nå­—èŠ‚æ•°\næ±‰å­—èŒƒå›´\n\n\n\nGB2312\n1980 å¹´\nå˜å­—èŠ‚ï¼ˆASCII 1 å­—èŠ‚ï¼Œæ±‰å­— 2 ä¸ªå­—èŠ‚ï¼‰\n6763 ä¸ªæ±‰å­—\n\n\nGB13000\n1993 å¹´ç¬¬ä¸€ç‰ˆ\nå˜å­—èŠ‚ï¼ˆASCII 1 å­—èŠ‚ï¼Œæ±‰å­— 2 ä¸ªå­—èŠ‚ï¼‰\n20902 ä¸ªæ±‰å­—\n\n\nGBK\nWindows95 ä¸­\n2 ä¸ªå­—èŠ‚\n21886 ä¸ªæ±‰å­—å’Œå›¾å½¢ç¬¦å·ï¼ˆå« GB2312ï¼ŒBIG5 ä¸­æ‰€æœ‰å­—ç¬¦ï¼‰\n\n\nGB18030\n2000 å¹´ç¬¬ä¸€ç‰ˆ\nå˜å­—èŠ‚ï¼ˆASCII 1 å­—èŠ‚ï¼Œæ±‰å­— 2 ä¸ªæˆ– 4 ä¸ªå­—èŠ‚ï¼‰\n27484 ä¸ªæ±‰å­—\n\n\næ¯ä¸€æ¬¡è¿­ä»£ï¼Œæ”¯æŒçš„å­—ç¬¦æ•°é‡éƒ½ä¼šå¢åŠ ï¼Œè€Œä¸”æ¯ä¸€æ¬¡è¿­ä»£éƒ½ä¼šä¿ç•™ä¹‹å‰ç‰ˆæœ¬æ”¯æŒçš„ç¼–ç ï¼Œæ‰€ä»¥åšåˆ°äº†å‘ä¸Šå…¼å®¹ã€‚\nå…¨è§’ä¸åŠè§’å› ä¸ºæ±‰å­—åœ¨æ˜¾ç¤ºå™¨ä¸Šçš„æ˜¾ç¤ºå®½åº¦è¦æ¯”è‹±æ–‡å­—ç¬¦çš„å®½åº¦è¦å®½ä¸€å€ï¼Œåœ¨ä¸€èµ·æ’ç‰ˆæ˜¾ç¤ºæ—¶ä¸å¤ªç¾è§‚ã€‚æ‰€ä»¥ GB ç¼–ç ä¸ä»…ä»…åŠ å…¥äº†æ±‰å­—å­—ç¬¦ï¼Œè€Œä¸”åŒ…æ‹¬äº† ASCII å­—ç¬¦é›†ä¸­æœ¬æ¥å°±æœ‰çš„æ•°å­—ã€æ ‡ç‚¹ç¬¦å·ã€å­—æ¯ç­‰å­—ç¬¦ã€‚è¿™äº›è¢«ç¼–å…¥ GB ç¼–ç ä¸­çš„æ•°å­—ã€è‹±æ–‡æ ‡ç‚¹ç¬¦å·ã€å­—æ¯åœ¨æ˜¾ç¤ºå™¨ä¸Šçš„æ˜¾ç¤ºå®½åº¦æ¯” ASCII å­—ç¬¦é›†ä¸­çš„å®½åº¦å®½ä¸€å€ï¼Œæ‰€ä»¥å‰è€…ç§°ä¸ºå…¨è§’å­—ç¬¦ï¼Œåè€…ç§°ä¸ºåŠè§’å­—ç¬¦ã€‚\nANSIANSI ä¸ä»£ç é¡µå‰é¢è¯´åˆ°äº†ä¸–ç•Œå„å›½é’ˆå¯¹ ASCII çš„æ‰©å±•æ–¹æ¡ˆï¼ˆå¦‚æ¬§æ´²çš„ ISO&#x2F;IEC 8859ï¼Œä¸­å›½çš„ GB ç³»åˆ—ç­‰ï¼‰ï¼Œè¿™äº› ASCII æ‰©å±•ç¼–ç æ–¹æ¡ˆçš„ç‰¹ç‚¹æ˜¯ï¼šä»–ä»¬éƒ½å…¼å®¹ ASCII ç¼–ç ï¼Œä½†ä»–ä»¬å½¼æ­¤ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ã€‚å¾®è½¯å°†è¿™äº›ç¼–ç æ–¹æ¡ˆç»Ÿç§°ä¸º ANSI ç¼–ç ã€‚æ•… ANSI å¹¶ä¸æ˜¯ç‰¹æŒ‡æŸä¸€ç§ç¼–ç æ–¹æ¡ˆï¼Œåªæœ‰çŸ¥é“äº†åœ¨å“ªä¸ªå›½å®¶ï¼Œå“ªä¸ªè¯­è¨€ç¯å¢ƒä¸‹ï¼Œæ‰çŸ¥é“å®ƒå…·ä½“è¡¨ç¤ºå“ªä¸ªç¼–ç æ–¹æ¡ˆã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;åœ¨ Windows æ“ä½œç³»ç»Ÿä¸Šï¼Œé»˜è®¤ä½¿ç”¨ ANSI æ¥ä¿å­˜æ–‡ä»¶ï¼ˆä½†ä» Windows 10 å¼€å§‹é»˜è®¤ä½¿ç”¨ UTF8 ç¼–ç ï¼‰ã€‚æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•çŸ¥é“ ANSI åˆ°åº•åº”è¯¥è¡¨ç¤ºå“ªç§ç¼–ç äº†ï¼Œæ˜¯ GBK è¿˜æ˜¯ ASCIIï¼ŒæŠ‘æˆ–è¿˜æ˜¯ EUC-KR äº†ï¼Ÿ Windows é€šè¿‡ä¸€ä¸ªå«â€Code Pageâ€ï¼ˆç¿»è¯‘ä¸ºä¸­æ–‡å«ä»£ç é¡µï¼‰çš„ä¸œè¥¿æ¥åˆ¤æ–­ç³»ç»Ÿçš„é»˜è®¤ç¼–ç ã€‚\nç®€ä½“ä¸­æ–‡æ“ä½œç³»ç»Ÿçš„ä»£ç é¡µé»˜è®¤æ˜¯ 936ï¼Œå³ ANSI ä½¿ç”¨çš„æ˜¯ GBK ç¼–ç ã€‚\n\nGB18030 ç¼–ç å¯¹åº”çš„ Windows ä»£ç é¡µä¸º CP54936ã€‚\n\nå¯ä»¥ä½¿ç”¨å‘½ä»¤chcpæ¥æŸ¥çœ‹å’Œä¿®æ”¹ç³»ç»Ÿé»˜è®¤çš„ä»£ç é¡µã€‚\næ±‰å­—â€œğ¤­¢â€ï¼ˆå¿µ suÃ¬ï¼‰åªåŒ…å«åœ¨ GB18030 ä¸­ï¼ŒGB2312ã€GB13000ã€GBK ä¸­å‡ä¸åŒ…å«ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVisual Studio ä¼šä½¿ç”¨ CP936ï¼ˆå³ GBKï¼‰æ¥ä¿å­˜ä»£ç æ–‡ä»¶ï¼Œå¦‚æœåœ¨ä»£ç æ–‡ä»¶ä¸­è¾“å…¥è¯¥æ±‰å­—ï¼ŒVisual Studio å¼¹å‡ºå¦‚ä¸‹æç¤ºè¦æ±‚ç”¨æˆ·é€‰æ‹©ä»£ç é¡µï¼š\n\næ›´æ”¹é»˜è®¤ä»£ç é¡µchcp å‘½ä»¤å¯ä»¥ä½¿ç”¨chcpå‘½ä»¤æ¥æ›´æ”¹é»˜è®¤ä»£ç é¡µï¼Œå¦‚chcp 437å°†é»˜è®¤ä»£ç é¡µæ›´æ”¹ä¸º 437ï¼ˆç¾å›½ï¼‰ã€‚\næ§åˆ¶é¢æ¿åœ¨â€œæ§åˆ¶é¢æ¿â€â€“&gt;â€œåŒºåŸŸå’Œè¯­è¨€â€â€“&gt; â€œæ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®â€ä¸­æ›´æ”¹ç³»ç»Ÿé»˜è®¤çš„ä»£ç é¡µä¸ºâ€œä¸­æ–‡ï¼ˆç®€ä½“ï¼Œä¸­å›½ï¼‰â€ã€‚\nä»£ç ä¿®æ”¹ä¹Ÿå¯ä»¥é€šè¿‡ä»£ç æ›´æ”¹é»˜è®¤çš„ä»£ç é¡µï¼š\nchar *setlocale(   int category,   const char *locale);\n\nUnicodeUnicode äº§ç”ŸèƒŒæ™¯å„ä¸ªå›½å®¶ä½¿ç”¨ä¸åŒçš„ç¼–ç è§„åˆ™ï¼Œè™½ç„¶ä»–ä»¬éƒ½æ˜¯å…¼å®¹ ASCII çš„ï¼Œä½†å®ƒä»¬ç›¸äº’å´æ˜¯ä¸å…¼å®¹çš„ã€‚\nè¯•æƒ³æ³•å›½äºº Jack å†™äº†ä¸€å°åä¸ºâ€love_you.txtâ€çš„ä¿¡ï¼Œä¼ ç»™äº†ä»–çš„å¾·å›½æœ‹å‹ Roseï¼ŒRose æƒ³è¦åœ¨ windows ç³»ç»Ÿä¸Šæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¥¹éœ€è¦çŸ¥é“å¾·å›½ä½¿ç”¨çš„å­—ç¬¦ç¼–ç æ˜¯ Latin-1ï¼Œç„¶åè¿˜è¦ç¡®ä¿å¥¹çš„è®¡ç®—æœºä¸Šå®‰è£…äº†è¯¥ç¼–ç ï¼Œæ‰èƒ½é¡ºåˆ©çš„æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ã€‚\nå¦‚æœä¸Šé¢è¿™äº›è¿˜èƒ½å¿å—ï¼Œé‚£ä¹ˆéšç€ç½‘ç»œçš„å‘å±•ï¼Œä½ ä»äº’è”ç½‘ä¸Šè·å–çš„æ–‡ä»¶ï¼Œä½ å¾ˆæœ‰å¯èƒ½ä¸çŸ¥é“å®ƒæ¥è‡ªå“ªä¸ªå›½å®¶ï¼Œä½¿ç”¨çš„å“ªç§ç¼–ç ã€‚è¿™ä¹Ÿå°±æ˜¯ Email åˆšè¯ç”Ÿæ—¶å¸¸å¸¸å‡ºç°ä¹±ç çš„åŸå› ï¼Œå‘ä¿¡äººå’Œæ”¶ä¿¡äººä½¿ç”¨çš„ç¼–ç å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚\näºæ˜¯The Unicode Standardï¼ˆç»Ÿä¸€ç æ ‡å‡†ï¼‰æ¨ªç©ºå‡ºä¸–ï¼Œå®ƒç”± The Unicode Consortium äº 1991 å¹´å‘å¸ƒï¼Œæˆ‘ä»¬ä¹ æƒ¯ç§°å®ƒä¸º Unicode å­—ç¬¦é›†ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;Unicode å­—ç¬¦é›†å’Œ ASCII å­—ç¬¦é›†ä¸€æ ·ï¼Œä¹Ÿåªæ˜¯ä¸€ä¸ªå­—ç¬¦é›†åˆï¼Œæ ‡è®°ç€å­—ç¬¦å’Œæ•°å­—ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå®ƒä¸åŒ…å«ä»»ä½•ç¼–ç è§„åˆ™å’Œæ–¹æ¡ˆã€‚å’Œ ASCII ä¸ä¸€æ ·çš„æ˜¯ï¼ŒUnicode å­—ç¬¦é›†æ”¯æŒçš„å­—ç¬¦æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼ˆå…·ä½“å¯ä»¥å‚è€ƒ Unicode è§„èŒƒï¼‰ã€‚\n\næˆ‘ä»¬é€šå¸¸è®¤ä¸ºçš„ Unicode å­—ç¬¦å›ºå®šå ç”¨ 2 ä¸ªå­—èŠ‚çš„è§‚ç‚¹æ˜¯é”™è¯¯çš„ã€‚å¦‚â€œğ¤­¢â€ï¼ˆå¿µ suÃ¬ï¼‰çš„ Unicode ç ä¸ºD852 DF62ã€‚\n\né‚£ä¹ˆ Unicode å­—ç¬¦æ˜¯æ€æ ·è¢«ç¼–ç æˆå†…å­˜ä¸­çš„å­—èŠ‚çš„å‘¢ï¼Ÿå®ƒæ˜¯é€šè¿‡ UTF (Unicode Transformation Formats) å®ç°çš„ï¼Œæ¯”è¾ƒå¸¸è§å¾—æœ‰ UTF-8ï¼ŒUTF-16ã€‚\n\nåœ¨ Windows ç³»ç»Ÿä¸Šæ±‰å­—é»˜è®¤ä½¿ç”¨ CP936ï¼ˆå³ GBK ç¼–ç ï¼‰ï¼Œå  2 ä¸ªå­—èŠ‚ã€‚è€Œå¤§å¤šæ•° Unicode å­—ç¬¦çš„ Unicode ç å€¼ä¹Ÿå  2 ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å¤§å¤šæ•°äººè¯¯ä»¥ä¸ºæ±‰å­—å­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­çš„å€¼å°±æ˜¯ Unicode å€¼ï¼Œè¿™æ˜¯é”™è¯¯çš„ã€‚å¯ä»¥ä» ç«™é•¿å·¥å…·-Unicode æŸ¥è¯¢æ±‰å­—çš„ Unicode ç å€¼ã€‚\n\nå­—ç¬¦é›†ä¸å­—ç¬¦ç¼–ç çš„åŒºåˆ«ä» ASCIIã€GB2312ã€GBKã€GB18030ã€Big5ï¼ˆç¹ä½“ä¸­æ–‡ï¼‰ã€Latin-1 ç­‰é‡‡ç”¨çš„æ–¹æ¡ˆæ¥çœ‹ï¼Œå®ƒä»¬éƒ½åªæ˜¯å®šä¹‰äº†å•ä¸ªå­—ç¬¦ä¸äºŒè¿›åˆ¶æ•°æ®çš„æ˜ å°„å…³ç³»ï¼Œä¸€ä¸ªå­—ç¬¦åœ¨ä¸€ä¸ªæ–¹æ¡ˆä¸­åªä¼šå­˜åœ¨ä¸€ç§è¡¨ç¤ºæ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ GB2312 æ˜¯å­—ç¬¦é›†è¿˜æ˜¯å­—ç¬¦ç¼–ç æ–¹å¼éƒ½æ— æ‰€è°“äº†ã€‚ä½†æ˜¯ Unicode ä¸ä¸€æ ·ï¼ŒUnicode ä½œä¸ºä¸€ä¸ªå­—ç¬¦é›†å¯ä»¥é‡‡ç”¨å¤šç§ç¼–ç æ–¹å¼ï¼Œå¦‚ UTF-8, UTF-16, UTF-32 ç­‰ã€‚æ‰€ä»¥è‡ª Unicode å‡ºç°ä¹‹åï¼Œå­—ç¬¦é›†ä¸å­—ç¬¦ç¼–ç éœ€è¦æ˜ç¡®åŒºåˆ†å¼€æ¥ã€‚\nUTF-16 ç¼–ç çš„ç¼ºç‚¹UTF-16 ç¼–ç æ–¹å¼è§„å®šç”¨ä¸¤ä¸ªæˆ–å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºæ‰€æœ‰çš„å­—ç¬¦ã€‚å¯¹äº ASCII å­—ç¬¦ä¿æŒä¸å˜ï¼Œåªæ˜¯å°†åŸæ¥çš„ 7 ä½æ‰©å±•åˆ°äº† 16 ä½ï¼Œå…¶é«˜ 9 ä½æ°¸è¿œæ˜¯ 0ã€‚\nå¦‚å­—ç¬¦â€™Aâ€™ï¼š\nASCII:  0100 0001UTF-16: 0000 0000 0100 0001\n\nä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äº ASCII å­—ç¬¦ï¼ŒUTF-16 çš„å­˜å‚¨ç©ºé—´æ‰©å¤§äº†ä¸€å€ï¼Œå› æ­¤ UTF-16 å¹¶ä¸æ˜¯å®Œå…¨å…¼å®¹ ASCII å­—ç¬¦é›†çš„ã€‚è¿™å¯¹äºé‚£äº› ASCII å­—ç¬¦é›†å·²ç»æ»¡è¶³éœ€æ±‚çš„è¥¿æ–¹å›½å®¶æ¥è¯´å®Œå…¨æ˜¯æ²¡å¿…è¦çš„ï¼Œè€Œä¸” ASCII å­—ç¬¦ç»è¿‡ UTF-16 ç¼–ç ä¹‹åé«˜å­—èŠ‚å§‹ç»ˆæ˜¯ 0ï¼Œè¿˜ä¼šå¯¼è‡´å¾ˆå¤š C è¯­è¨€å‡½æ•°ï¼ˆå¦‚strcpy,strlenï¼‰å°†æ­¤å­—èŠ‚è§†ä¸ºå­—ç¬¦ä¸²çš„ç»“æŸç¬¦&#39;\\0&#39;ï¼Œä»è€Œå‡ºç°é”™è¯¯çš„è®¡ç®—ç»“æœã€‚\nè€Œä¸”ï¼ŒUTF-16 è¿˜å­˜åœ¨å¤§å°ç«¯çš„é—®é¢˜ï¼Œâ€œğ¤­¢â€ï¼ˆå¿µ suÃ¬ï¼‰Unicode ç åœ¨å¤§ç«¯ç³»ç»Ÿä¸Šä¸ºD852 DF62ï¼Œå°ç«¯ç³»ç»Ÿä¸Šä¸º52D8 62DFã€‚\nå› æ­¤ï¼ŒUTF-16 ä¸€å¼€å§‹æ¨å‡ºçš„æ—¶å€™å°±é­åˆ°å¾ˆå¤šè¥¿æ–¹å›½å®¶çš„æŠµåˆ¶ï¼Œå½±å“äº† Unicode çš„æ¨è¡Œã€‚äºæ˜¯åæ¥åˆè®¾è®¡äº† UTF-8 ç¼–ç æ–¹å¼ï¼Œæ‰è§£å†³äº†è¿™äº›é—®é¢˜ã€‚\nUnicode å­—ç¬¦é›†å¸¸ç”¨ç¼–ç æ–¹å¼ï¼šUTF-8UTF-8 æ¦‚è¿°UTF-8 æ˜¯äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ Unicode å­—ç¬¦é›†ç¼–ç æ–¹å¼ã€‚UTF-8 ç¼–ç çš„æœ€å°å•ä½ç”± 8 ä½ï¼ˆ1 ä¸ªå­—èŠ‚ï¼‰ç»„æˆï¼ŒUTF-8 ä½¿ç”¨ä¸€ä¸ªè‡³å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode å­—ç¬¦ã€‚å¦å¤–ï¼ŒUTF-8 æ˜¯å®Œç¾å…¼å®¹ ASCII å­—ç¬¦é›†çš„ï¼Œè¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡ä¸‹é¢çš„ UTF-8 çš„ç¼–ç è§„åˆ™å¾—åˆ°è¯æ˜ã€‚\nUTF-8 ç¼–ç è§„åˆ™UTF-8 ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼šï¼ˆ1ï¼‰å¯¹äº ASCIIï¼ˆå•å­—èŠ‚å­—ç¬¦ï¼‰å­—ç¬¦ï¼Œé‡‡ç”¨å’Œ ASCII ç›¸åŒçš„ç¼–ç æ–¹å¼ï¼Œå³åªä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸”è¯¥å­—èŠ‚ç¬¬ä¸€ä½ä¸º 0.ï¼ˆ2ï¼‰å¯¹äºå¤šå­—èŠ‚ï¼ˆ2~4 å­—èŠ‚ï¼‰å­—ç¬¦ï¼Œå‡è®¾å­—èŠ‚æ•°ä¸º nï¼ˆ1 &lt; n &lt;&#x3D; 4ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚ï¼šå‰ n ä½éƒ½è®¾ä¸º 1ï¼Œç¬¬ n+1 ä½è®¾ä¸º 0ï¼›åé¢çš„ n-1 ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º 10ã€‚æ‰€æœ‰å­—èŠ‚ä¸­çš„æ²¡æœ‰æåŠçš„å…¶ä»–äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚æŒ‰ç…§è¿™ä¸ªè§„åˆ™ï¼Œç¨‹åºé€šè¿‡ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸­1çš„ä¸ªæ•°å°±å¯ä»¥çŸ¥é“å½“å‰å­—ç¬¦ç¼–ç æ‰€å çš„ä½æ•°ã€‚\n\n\n\nUnicode ç¬¦å·èŒƒå›´(åå…­è¿›åˆ¶)\nUTF-8 ç¼–ç æ–¹å¼(äºŒè¿›åˆ¶)\n\n\n\nå•å­—èŠ‚:00000000-0000 007F\n0xxxxxxx\n\n\nåŒå­—èŠ‚:00000080-0000 07FF\n110xxxxx 10xxxxxx\n\n\nä¸‰å­—èŠ‚:00000800-0000 FFFF\n1110xxxx 10xxxxxx 10xxxxxx\n\n\nå››å­—èŠ‚:0001 0000-0010 FFFF\n11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n\n\nUTF-8 BOMBOMï¼ˆbyte order markï¼‰ä»å­—é¢æ„ä¹‰æ¥çœ‹æ˜¯æ ‡è®°å­—èŠ‚é¡ºåºçš„ã€‚æœ€æ—©å‡ºç°çš„åŸå› æ˜¯å› ä¸º UTF-16 å’Œ UTF-32 ç¼–ç é‡‡ç”¨ 2 ä¸ªæˆ– 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œé¢ä¸´å¤§å°ç«¯çš„é—®é¢˜ã€‚ä¸ºäº†åŒºåˆ†æ˜¯ä½¿ç”¨çš„å¤§ç«¯(Big Endianï¼Œç®€ç§° BE)è¿˜æ˜¯å°ç«¯(Little Endianï¼Œç®€ç§° LE)ï¼Œé‡‡ç”¨äº†åœ¨ä¸²çš„å‰é¢åŠ å…¥æŒ‡å®šçš„å­—èŠ‚åŠ ä»¥åŒºåˆ†ï¼ŒUTF-16 å¤§ç«¯åŠ å…¥FE FFï¼Œå°ç«¯åŠ å…¥FF FE. æ¯”å¦‚ï¼Œ å­—ç¬¦ä¸²â€œABCâ€çš„ UTF-16 ç¼–ç ä¸º 00 41 00 42 00 43ï¼Œå¯¹åº”çš„å„ç§çš„å­—èŠ‚åºåˆ—å¦‚ä¸‹ï¼š\n\n\n\nåºåˆ—\næ•°æ®\n\n\n\nUTF-16BE (without BOM)\n00 41 00 42 00 43\n\n\nUTF-16LE (without BOM)\n41 00 42 00 43 00\n\n\nUTF-16BE (with BOM)\nFE FF 00 41 00 42 00 43\n\n\nUTF-16LE (with BOM)\nFF FE 41 00 42 00 43 00\n\n\nå› ä¸º UTF-8 å’Œ ASCII æ‰©å±•å­—ç¬¦é›†éƒ½æ˜¯å•å­—èŠ‚åºåˆ—ï¼ŒäºŒè€…ä¸å¥½åŒºåˆ†ï¼Œå¾®è½¯é‡‡ç”¨åœ¨ UTF-8 ç¼–ç çš„å­—ç¬¦ä¸²å‰ä¹ŸåŠ å…¥ BOMï¼ˆ3 ä¸ªå­—èŠ‚EF BB BFï¼‰æ¥æ ‡è®° UTF-8 ç¼–ç çš„ä¸²ã€‚UTF-8 BOM è¿™ä¸€è§„èŒƒå¤§å¤šåœ¨ Windows ä¸‹è¢«ä½¿ç”¨ï¼Œåœ¨å…¶ä»–å¹³å°ä¸‹ç”¨çš„å¾ˆå°‘ä½¿ç”¨ï¼Œå¦‚ Linux å…¨éƒ¨é‡‡ç”¨ UTF-8 ç¼–ç ï¼Œä¸å­˜åœ¨éœ€è¦åŒºåˆ†çš„æƒ…å†µï¼›HTTP åè®®å¯ä»¥é€šè¿‡ Content-Type:text/html; charset=utf-8 æ¥æŒ‡å®šå½“å‰ä½¿ç”¨ UTF8 ç¼–ç ï¼Œä¹Ÿæ²¡æœ‰åŒºåˆ†çš„éœ€æ±‚ã€‚\nç¼–è¯‘å™¨å¤„ç†æ–‡ä»¶ç¼–ç Visual Studio å­—ç¬¦é›†è™½ç„¶ä½¿ç”¨ Visual Studio åˆ›å»ºçš„ C++å·¥ç¨‹å¯ä»¥åœ¨å·¥ç¨‹å±æ€§é…ç½®å±æ€§--&gt;å¸¸è§„ä¸­é…ç½®å­—ç¬¦é›†ï¼šä½¿ç”¨Unicodeå­—ç¬¦é›†ï¼ˆé»˜è®¤ï¼‰ã€ä½¿ç”¨å¤šå­—èŠ‚å­—ç¬¦é›†ã€‚\nå¦‚å›¾ï¼š\nä½†è¿™ä¸ªè®¾ç½®é¡¹å¹¶ä¸ä¼šå¯¹ç¼–è¯‘å™¨å¤„ç†å­—ç¬¦ç¼–ç äº§ç”Ÿç›´æ¥çš„å½±å“ï¼ˆæ³¨æ„è¿™é‡Œçš„â€œç›´æ¥â€äºŒå­—ï¼Œç¬¬ 3 èŠ‚ä¼šè¯´åˆ°ï¼‰ï¼Œåªä¼šåœ¨å·¥ç¨‹å±æ€§é…ç½®å±æ€§--&gt;C/C++--&gt;é¢„å¤„ç†å™¨åŠ å…¥ç›¸åº”çš„å®ï¼š\nä½¿ç”¨Unicodeå­—ç¬¦é›† --&gt; _UNICODEå’ŒUNICODEå®ä½¿ç”¨å¤šå­—èŠ‚å­—ç¬¦é›†   --&gt; _MBCSå®\n\nè¿™å‡ ä¸ªå®ä¸€èˆ¬ç”¨æ¥åˆ¤æ–­æ˜¯ä½¿ç”¨ char è¿˜æ˜¯ wchar_tï¼Œåœ¨ç³»ç»Ÿ API ä¸­ä½¿ç”¨æ¯”è¾ƒå¤šï¼Œå¦‚ MessegeBox é€šè¿‡åˆ¤æ–­æ˜¯å¦å®šä¹‰äº† UNICODE å®æ¥å†³å®šæ˜¯ä½¿ç”¨ LPCSTR è¿˜æ˜¯ LPCWSTRï¼ˆLPCSTR å³ const char*, LPCWSTR å³ const wchar_t*ï¼‰ï¼š\n#ifdef UNICODE#define MessageBox  MessageBoxW#else#define MessageBox  MessageBoxA#endif // !UNICODE\n\nchar å’Œ wchar_tä¸Šé¢æåˆ°äº†ï¼Œå®šä¹‰ API æ—¶é€šè¿‡ UNICODE å®æ¥å†³å®šæ˜¯ä½¿ç”¨ char è¿˜æ˜¯ wchar_t ç±»å‹ï¼Œé‚£ä¹ˆ char å’Œ wchar_t æœ‰ä»€ä¹ˆä¸åŒäº†ï¼Ÿ\nchar å’Œ wchar_t æ˜¯æ ‡å‡† C&#x2F;C++å­—ç¬¦ç±»å‹ï¼Œå¹¶ä¸æ˜¯ Windows ç‰¹æœ‰çš„ã€‚ char å›ºå®šå  1 ä¸ªå­—èŠ‚ï¼Œwchar_t å›ºå®šå  2 ä¸ªå­—èŠ‚ï¼Œä»å†…å­˜çš„è§’åº¦æ¥çœ‹ï¼Œcharã€wchar_t å’Œå…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œåªæ˜¯ä»£è¡¨ä¸€æ®µå†…å­˜å—ï¼Œç”¨æ¥å­˜å‚¨å›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶ 0 æˆ– 1ã€‚ åœ¨ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹ æƒ¯äºå°†å­—ç¬¦ä¸²å‚¨åˆ° char æˆ– wchar_t å®šä¹‰çš„å†…å­˜ç©ºé—´ä¸­ï¼Œå°†æ•´å½¢å­˜å‚¨åœ¨ int å®šä¹‰çš„å†…å­˜ç©ºé—´ä¸­ã€‚\næ‰€ä»¥ï¼Œç”¨ char è¿˜æ˜¯ wchar_t æ¥å­˜å‚¨å­—ç¬¦ï¼Œåªæ˜¯å†…å­˜åˆ†é…å’Œæ•°æ®å­˜å‚¨ä¸Šé¢çš„äº‹æƒ…ï¼Œå®ƒä»¬æœ¬èº«ä¹Ÿæ˜¯ä¸å­—ç¬¦ç¼–ç æ— ç›´æ¥å…³ç³»çš„ï¼ˆ åŒæ ·æ³¨æ„è¿™é‡Œçš„â€œç›´æ¥â€äºŒå­—ï¼Œç¬¬ 3 èŠ‚ä¼šè¯´åˆ°ï¼‰ã€‚\nç¼–è¯‘å™¨å¦‚ä½•å¤„ç†ç¡¬ç¼–ç å­—ç¬¦MSVC ç¼–è¯‘å™¨ç¼–è¯‘æºä»£ç çš„æ­¥éª¤ä¸­ï¼Œæ¶‰åŠç¼–ç å¤„ç†çš„æ­¥éª¤ä¸»è¦æœ‰ 2 ä¸ªï¼š\nç¬¬ 1 æ­¥ï¼šé¢„å¤„ç†\n1.1) è¯»å–æºæ–‡ä»¶ï¼Œåˆ¤æ–­æºæ–‡ä»¶é‡‡ç”¨çš„å­—ç¬¦ç¼–ç ç±»å‹ã€‚(è¿™ä¸€æ­¥ä¸ä¼šæ”¹å˜æ–‡ä»¶å†…å®¹)\nç¼–è¯‘å™¨åˆ¤æ–­æºæ–‡ä»¶ç¼–ç ç±»å‹çš„æ­¥éª¤ä¸ºï¼š1. è‹¥æ–‡ä»¶å¼€å§‹å¤„æœ‰BOM (EF BB BF)ï¼Œåˆ™åˆ¤å®šä¸º UTF-8 ç¼–ç ï¼›2. è‹¥æ²¡æœ‰BOMï¼Œåˆ™è¯•å›¾ä»æ–‡ä»¶çš„å‰ 8 ä¸ªå­—èŠ‚æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦åƒ UTF-16 ç¼–ç ï¼Œå¦‚æœåƒï¼Œåˆ™å°±åˆ¤æ–­ä¸º UTF-16 ç¼–ç ã€‚3. å¦‚æœæ—¢æ²¡BOMï¼Œä¹Ÿä¸æ˜¯UTF-16ç¼–ç ï¼Œåˆ™ä½¿ç”¨ç³»ç»Ÿå½“å‰çš„ä»£ç é¡µï¼ˆç®€ä½“ä¸­æ–‡æ“ä½œç³»ç»Ÿä¸ºCP936ï¼‰ã€‚\n\n1.2) å°†æºæ–‡ä»¶å†…å®¹è½¬æˆæºå­—ç¬¦é›†(Source Character Set)ï¼Œé»˜è®¤ä¸º UTF-8 ç¼–ç ã€‚\nç¬¬ 2 æ­¥ï¼šé“¾æ¥\n2.1) å°† 1.2 ä¸­å¾—åˆ°çš„ UTF-8 è½¬ä¸ºæ‰§è¡Œå­—ç¬¦é›†(Execution Character Set)ï¼š\n\nå¯¹äºå®½å­—ç¬¦ä¸²ï¼ˆwchar_tç±»å‹ï¼‰ï¼Œæ‰§è¡Œå­—ç¬¦é›†ä¸º UTF-16 ç¼–ç ã€‚\nå¯¹äºçª„å­—ç¬¦ä¸²ï¼ˆcharç±»å‹ï¼‰ï¼Œæ‰§è¡Œå­—ç¬¦é›†ä¸ºç³»ç»Ÿå½“å‰çš„ä»£ç é¡µã€‚\n\n\nåˆ°ç°åœ¨æˆ‘ä»¬å½»åº•æ˜ç™½äº† Visual Studio å­—ç¬¦é›†è®¾ç½®ã€charã€wchar*t æ˜¯å¦‚ä½•***é—´æ¥_**å½±å“åˆ°ç¼–è¯‘å™¨å¯¹å­—ç¬¦ç¼–ç çš„å¤„ç†äº†ï¼š\nVisual Studioå­—ç¬¦é›†è®¾ç½®      |å†³å®šå£°æ˜å“ªä¸€ä¸ªå®ï¼ˆUNICODEè¿˜æ˜¯_MBCSå®ï¼‰      |å®åˆå†³å®šäº†APIå‚æ•°ä½¿ç”¨charè¿˜æ˜¯wchar_t      |ç¼–è¯‘å™¨åœ¨è¿›è¡Œã€æ‰§è¡Œå­—ç¬¦é›†ã€‘ç¼–ç æ—¶å¯¹charå’Œwchar_é‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼ï¼Œä»è€Œå¯¹å­—ç¬¦ç¼–ç äº§ç”Ÿäº†å½±å“ã€‚\n\nåœ¨ Visual Studio 2010ï¼ˆå«ï¼‰ä¹‹åï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨#pragma execution_character_setæ¥è®¾ç½®æ‰§è¡Œå­—ç¬¦é›†ï¼š\n// æ‰§è¡Œå­—ç¬¦é›†è®¾ç½®ä¸ºutf8#pragma execution_character_set(&quot;utf-8&quot;)\n\nä¹Ÿå¯ä»¥åœ¨Visual Studioé¡¹ç›®å±æ€§ä¸­ï¼ˆâ€œé…ç½®å±æ€§â€&gt;â€œC&#x2F;C++â€&gt;â€œå‘½ä»¤è¡Œâ€ï¼‰ä¸­ï¼Œé€šè¿‡/source-charset:utf-8 å’Œ /execution-charset:utf-8 æ¥åˆ†åˆ«è®¾ç½®æºå­—ç¬¦é›†å’Œå¯æ‰§è¡Œå­—ç¬¦é›†ä¸ºutf-8ã€‚\nå®ä¾‹åˆ†æå·²çŸ¥æ±‰å­—â€œä¸­â€çš„å„ç§ç¼–ç å¦‚ä¸‹ï¼š\nGBK        D6 D0Unicode    2D 4EUTF-8      E4 B8 AD\n\nå‡½æ•°DumpCharacterCodeç”¨äºæŒ‰å­—èŠ‚æ‰“å°å†…å­˜ä¸­çš„æ•°æ®ï¼š\nvoid DumpCharacterCode(const char* pChar, int iSize) &#123;\tfor(int i = 0; i &lt; iSize; i++) &#123;\t\tchar a = *pChar++;\t\tprintf(&quot;%02X &quot;, a &amp; 0xff);\t&#125;\tprintf(&quot;\\n&quot;);&#125;\n\nè®¾ç½®ç³»ç»Ÿä»£ç é¡µçš„æ–¹æ³•ï¼š â€œæ§åˆ¶é¢æ¿â€ â€“&gt; â€œåŒºåŸŸå’Œè¯­è¨€â€ â€“&gt; â€œç®¡ç†â€ â€“&gt; â€œé Unicode ç¨‹åºçš„è¯­è¨€â€ â€“&gt; â€œæ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®â€ã€‚\nVisual Studio ä¿å­˜æ–‡ä»¶åˆ°æŒ‡å®šç¼–ç æ–¹æ³•ï¼šâ€œæ–‡ä»¶â€ â€“&gt; â€œé«˜çº§ä¿å­˜é€‰é¡¹â€ã€‚\næµ‹è¯•ç¼–è¯‘å™¨å¤„ç†çª„å­—ç¬¦ç¼–ç æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\nint _tmain(int argc, _TCHAR* argv[])&#123;\tchar buf[100] = &#123;&quot;ä¸­&quot;&#125;;   // char\tDumpCharacterCode(buf, 2);  // ä¹Ÿå¯ä»¥æ‰“å°4ä¸ªå­—èŠ‚\treturn 0;&#125;\n\né’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿä»£ç é¡µå’Œæºæ–‡ä»¶ç¼–ç ï¼Œæ‰“å°å‡ºçš„æ±‰å­—â€œä¸­â€çš„ç¼–ç åˆ†åˆ«ä¸ºï¼š\n\n\n\næµ‹è¯•ç”¨ä¾‹\nç³»ç»Ÿä»£ç é¡µ\nä¿å­˜æºæ–‡ä»¶ç¼–ç \nç¼–è¯‘å™¨åˆ¤æ–­æ–‡ä»¶é‡‡ç”¨çš„ç¼–ç \næºå­—ç¬¦é›†(Source Character Set)\næ‰§è¡Œå­—ç¬¦é›†(Execution Character Set)\næ‰“å°è¾“å‡º\n\n\n\nç”¨ä¾‹ 1\nç®€ä½“ä¸­æ–‡ CP936\nç®€ä½“ä¸­æ–‡ CP936\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8\nç®€ä½“ä¸­æ–‡ CP936\nD6 D0\n\n\nç”¨ä¾‹ 2\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8 BOM\nUTF-8 BOM\nUTF-8\nç®€ä½“ä¸­æ–‡ CP936\nD6 D0\n\n\nç”¨ä¾‹ 3\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8\nç®€ä½“ä¸­æ–‡ CP936\nç¼–è¯‘é”™è¯¯(C2146)\n\n\nç”¨ä¾‹ 4\nè¥¿æ¬§ CP1252\nç®€ä½“ä¸­æ–‡ CP936\nè¥¿æ¬§ CP1252\nUTF-8\nè¥¿æ¬§ CP1252\nD6 D0\n\n\nç”¨ä¾‹ 5\nè¥¿æ¬§ CP1252\nUTF-8 BOM\nUTF-8 BOM\nUTF-8\nè¥¿æ¬§ CP1252\n3F 00\n\n\nè¡¨æ ¼ä¸­åˆ— 4~6 ä¾æ¬¡å¯¹åº”ç¼–è¯‘å¤„ç†æºæ–‡ä»¶çš„å‡ ä¸ªæ­¥éª¤ã€‚3Få¯¹åº”çš„ ASCII å­—ç¬¦ä¸º?ï¼Œç¼–è¯‘å™¨é‡åˆ°ä¸èƒ½è¯†åˆ«çš„å­—ç¬¦æ—¶ï¼Œå°±ä¼šç”¨?æ¥æ›¿ä»£ã€‚ å‡ºç°?çš„æƒ…å†µä¼šä¼´éšç€ç¼–è¯‘è­¦å‘ŠC4566ã€‚ä¸Šé¢å‡ºç°äº† 1 æ¬¡3Fï¼ˆç”¨ä¾‹ 5ï¼‰ï¼Œå¯¼è‡´ä¹±ç çš„åŸå› æ˜¯UTF-8 --&gt; è¥¿æ¬§ CP1252. è¥¿æ¬§ CP1252ä¹Ÿå°±æ˜¯ ASCII çš„æ‰©å±•ï¼Œä¸æ”¯æŒæ±‰å­—ï¼Œæ‰€ä»¥ç”¨3Fæ›¿ä»£ã€‚\nç”¨ä¾‹ 3 ä¸ºä»€ä¹ˆä¼šç¼–è¯‘é”™è¯¯ï¼Ÿå¾®è½¯çš„ç¼–è¯‘å™¨åªèƒ½è¯†åˆ«å¸¦ BOM çš„ UTF-8ï¼Œç”¨ä¾‹ 3 çš„ UTF-8 æ²¡å¸¦ BOMï¼Œç¼–è¯‘å™¨ä¼šåˆ¤å®šæºæ–‡ä»¶ç¼–ç ä¸ºç³»ç»Ÿå½“å‰ä»£ç é¡µ CP936ã€‚â€œä¸­â€çš„ UTF-8 ç¼–ç ä¸ºE4 B8 ADï¼Œåˆ— 5 æ‰§è¡Œä» CP936 åˆ° UTF-8 è½¬æ¢ä¹‹åå˜æˆäº†E6 B6 93 3Fï¼Œåˆ— 6 å†è¦å°†E6 B6 93 3Fè½¬æ¢ä¸º CP936 è‚¯å®šæ˜¯è½¬æ¢ä¸å›å»çš„ï¼Œç›¸å½“äº UTF-8ï¼ˆ1ï¼‰ â€“&gt; UTF-8 ï¼ˆ2ï¼‰ï¼Œå†å°† UTF-8ï¼ˆ2ï¼‰è½¬æ¢å› CP936ï¼Œè¿™æ—¶è‚¯å®šå¾—åˆ°çš„å­—ç¬¦ä¸æ˜¯åŸæ¥çš„å­—ç¬¦äº†ã€‚\nç”¨ä¾‹ 4 ä¸ºä»€ä¹ˆè¾“å‡ºçš„D6 D0ï¼Œè€Œä¸æ˜¯3Fï¼Ÿå¯¹ç€ç”¨ä¾‹ 4 çš„å„ä¸ªé¡ºåºæ¥çœ‹ï¼Œæºæ–‡ä»¶é€šè¿‡ CP936 ä¿å­˜ç€ï¼Œä½†ç¼–è¯‘å™¨é€šè¿‡ CP1252 æ¥è¯»å–çš„ï¼ŒCP1252 å°±æ˜¯ ASCII æ‰©å±•ï¼Œå•å­—èŠ‚çš„ï¼Œè™½ç„¶æ­¤æ—¶æ˜¾ç¤ºä¸ºä¹±ç ï¼Œä½†å„å­—èŠ‚ä»ç„¶æ˜¯ D6 D0ï¼›ç„¶åå°†è¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹ä» CP1252 è½¬æˆ UTF-8 ç¼–ç ï¼Œè½¬ç åä¸º C3 96 C3 90ï¼›ç„¶åå†å°† UTF-8 ç¼–ç è½¬å›ä¸º CP1251ï¼Œè½¬ç å°±åˆå˜æˆäº† D6 D0ã€‚ ä½†è¿™ä¸ªD6 D0åœ¨ CP1252 ä¸­æ˜¯æ— æ³•æ˜¾ç¤ºçš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç”¨ä¾‹ 4 åŠ å…¥MessageBoxA(NULL, &quot;ä¸­&quot;, &quot;test&quot;, MB_OK); ä¼šå‘ç°å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºä»ç„¶æ˜¯ä¹±ç ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼š\nint _tmain(int argc, _TCHAR* argv[])&#123;\tchar buf[3] = &#123; 0 &#125;;    // æ¨¡æ‹ŸCP936ç¼–ç çš„â€œä¸­â€\tbuf[0] = 0xD6;\tbuf[1] = 0xD0;\tstd::string strUTF8 = ANSIToUTF8(buf, 1252);\tchar *p = (char*)strUTF8.c_str();  // é€šè¿‡visual studioæŸ¥çœ‹æŒ‡é’ˆpå¤„å†…å­˜ä¸ºï¼š C3 96 C3 90\tstd::string str = UTF8ToANSI(strUTF8, 1252);\tp = (char*)str.c_str();   // é€šè¿‡visual studioæŸ¥çœ‹æŒ‡é’ˆpå¤„å†…å­˜ä¸ºï¼š D6 D0\treturn 0;&#125;\n\næµ‹è¯•ç¼–è¯‘å™¨å¤„ç†å®½å­—ç¬¦ç¼–ç æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\nint _tmain(int argc, _TCHAR* argv[])&#123;\twchar_t buf[100] = &#123;L&quot;ä¸­&quot;&#125;;   // wchar_t\tDumpCharacterCode((char*)buf, 4); // æ‰“å°4ä¸ªå­—èŠ‚\treturn 0;&#125;\n\nåŒæ ·ï¼Œé’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿä»£ç é¡µå’Œæºæ–‡ä»¶ç¼–ç ï¼Œæ‰“å°å‡ºçš„æ±‰å­—â€œä¸­â€çš„ç¼–ç åˆ†åˆ«ä¸ºï¼š\n\n\n\næµ‹è¯•ç”¨ä¾‹\nç³»ç»Ÿä»£ç é¡µ\nä¿å­˜æºæ–‡ä»¶ç¼–ç \nç¼–è¯‘å™¨åˆ¤æ–­æ–‡ä»¶é‡‡ç”¨çš„ç¼–ç \næºå­—ç¬¦é›†(Source Character Set)\næ‰§è¡Œå­—ç¬¦é›†(Execution Character Set)\næ‰“å°è¾“å‡º\n\n\n\nç”¨ä¾‹ 1\nç®€ä½“ä¸­æ–‡ CP936\nç®€ä½“ä¸­æ–‡ CP936\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8\nUTF-16\n2D 4E 00 00\n\n\nç”¨ä¾‹ 2\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8 BOM\nUTF-8 BOM\nUTF-8\nUTF-16\n2D 4E 00 00\n\n\nç”¨ä¾‹ 3\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8\nç®€ä½“ä¸­æ–‡ CP936\nUTF-8\nUTF-16\nç¼–è¯‘é”™è¯¯(C2146)\n\n\nç”¨ä¾‹ 4\nè¥¿æ¬§ CP1252\nç®€ä½“ä¸­æ–‡ CP936\nè¥¿æ¬§ CP1252\nUTF-8\nUTF-16\nD6 00 D0 00 å¤§å°ç«¯\n\n\nç”¨ä¾‹ 5\nè¥¿æ¬§ CP1252\nUTF-8 BOM\nUTF-8 BOM\nUTF-8\nUTF-16\n2D 4E 00 00\n\n\nä½¿ç¨‹åºå½»åº•å‘Šåˆ«ä¹±ç è¦å¼€å‘æ”¯æŒå¤šè¯­è¨€ï¼Œåœ¨ä»»æ„è¯­è¨€ï¼ˆç³»ç»Ÿä»£ç é¡µï¼‰çš„ windows ç¯å¢ƒä¸‹éƒ½æ­£å¸¸ç¼–è¯‘ï¼Œä¸”è¿è¡Œèµ·æ¥æ²¡æœ‰ä¹±ç çš„ç¨‹åºï¼Œéœ€è¦éµå¾ªå¦‚ä¸‹åŸåˆ™ï¼š\n\nä»£ç æ–‡ä»¶é‡‡ç”¨ UTF-8 with BOM ç¼–ç ã€‚\nVisual Studio å­—ç¬¦é›†è®¾ç½®ä¸º Unicode å­—ç¬¦é›†ã€‚\nä½¿ç”¨ wchar_tã€‚\n\nåšåˆ°ä¸Šé¢ 3 æ­¥ï¼Œä½ çš„ä»£ç è¢«åˆ«äººä» github ä¸Š clone ä¸‹æ¥ç¼–è¯‘ï¼Œä¸ä¼šå› ä¸ºä½ ä»£ç ä¸­å«æœ‰ä¸­æ–‡ç­‰å­—ç¬¦ï¼Œäº§ç”Ÿç±»ä¼¼error C2015è¿™æ ·çš„ç¼–è¯‘é”™è¯¯ï¼Œæ›´ä¸ä¼šäº§ç”Ÿä¹±ç ã€‚\n\næœ¬æ–‡ä»‹ç»çš„æ–¹æ³•åªç”¨æ¥è§£å†³ç¡¬ç¼–ç å­—ç¬¦ä¹±ç çš„é—®é¢˜ï¼Œè‡³äºæ•°æ®ä¼ è¾“ä¸­çš„ä¹±ç ï¼Œéœ€è¦ç»Ÿä¸€å­—ç¬¦ç¼–ç æ¥è§£å†³ã€‚\n\n\nå‚è€ƒ: https://blogs.msdn.microsoft.com/vcblog/2016/02/22/new-options-for-managing-character-sets-in-the-microsoft-cc-compiler\n\nMySQLå­—ç¬¦ç¼–ç MySQL å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™MySQL çš„å­—ç¬¦é›†æ˜¯ç”¨æ¥å®šä¹‰ MySQL å­˜å‚¨å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œæ ¡å¯¹è§„åˆ™ï¼ˆæœ‰çš„è½¯ä»¶å«æ’åºè§„åˆ™ï¼‰åˆ™æ˜¯ç”¨æ¥å®šä¹‰äº†æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ–¹å¼ã€‚\nå­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚æ¯ç§å­—ç¬¦é›†éƒ½æœ‰ä¸€ä¸ªé»˜è®¤æ ¡å¯¹è§„åˆ™ã€‚\næŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„å­—ç¬¦é›†:\n# æ–¹æ³•1ï¼šSHOW CHARACTER SET;# æ–¹æ³•2ï¼šUSE information_schema;SELECT * FROM CHARACTER_SETS;\n\næŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„æ ¡å¯¹è§„åˆ™ï¼š\n# æ–¹æ³•1ï¼šSHOW COLLATION;# æ–¹æ³•2ï¼šUSE information_schema;SELECT * FROM collations;\n\nMySQL å„ä¸ªçº§åˆ«å­—ç¬¦é›†MySQL å¯ä»¥å¯¹å¦‚ä¸‹å­—ç¬¦é›†è¿›è¡Œè®¾ç½®ï¼š\n\næœåŠ¡å™¨çº§å­—ç¬¦é›†ï¼ˆCHARACTER_SET_SERVERï¼‰\næ•°æ®åº“çº§å­—ç¬¦é›†ï¼ˆCHARACTER_SET_DATABASEï¼‰\nè¡¨çº§å­—ç¬¦é›†\nå­—æ®µçº§å­—ç¬¦é›†\nè¿æ¥å­—ç¬¦é›†ï¼ˆCHARACTER_SET_CONNECTIONï¼‰ï¼Œå®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“æ‰€ç”¨çš„å­—ç¬¦é›†ã€‚\nç»“æœå­—ç¬¦é›†ï¼ˆCHARACTER_SET_RESULTSï¼‰ï¼Œå­˜å‚¨æŸ¥è¯¢ç»“æœï¼ˆå«é”™è¯¯ä¿¡æ¯ï¼‰æ‰€ç”¨çš„å­—ç¬¦é›†ã€‚\nå®¢æˆ·ç«¯å­—ç¬¦é›†ï¼ˆCHARACTER_SET_CLIENTï¼‰ï¼Œå®¢æˆ·ç«¯å‘é€ç»™ MySQL æœåŠ¡å™¨çš„æŸ¥è¯¢è¯­å¥å­—ç¬¦é›†ã€‚\nç³»ç»Ÿå­—ç¬¦é›†ï¼ˆCHARACTER_SET_SYSTEMï¼‰ï¼Œç”¨äºå­˜å‚¨æˆ‘ä»¬æ–°å»ºçš„æˆ–è‡ªå¸¦çš„æ•°æ®åº“çš„è¡¨ã€åˆ—çš„åç§°ï¼Œé»˜è®¤æ˜¯ UTF-8ã€‚\n\næœåŠ¡å™¨çº§ã€æ•°æ®åº“çº§ã€è¡¨çº§ã€å­—æ®µçº§ è¿™ 4 ä¸ªå­—ç¬¦é›†è®¾ç½®å½±å“åˆ°æ•°æ®åº“ä¸­å­˜å‚¨æ•°æ®çš„ç¼–ç ã€‚ è¿™ 4 ä¸ªçº§åˆ«çš„å­—ç¬¦é›†ç»§æ‰¿å…³ç³»ä¸ºï¼šæœåŠ¡å™¨çº§ --&gt; æ•°æ®åº“çº§ --&gt; è¡¨çº§ --&gt; å­—æ®µçº§, ä»å·¦åˆ°å³ï¼Œä¸€çº§ç»§æ‰¿ä¸€çº§ï¼Œå’Œ C++ã€Java ä¸­çš„ç±»çš„ç»§æ‰¿ç±»ä¼¼ï¼Œå¦‚æœæŸä¸€çº§æœªæ˜¾å¼çš„æŒ‡å®šå­—ç¬¦é›†ï¼Œé‚£ä¹ˆå°†ç»§æ‰¿ä¸Šä¸€çº§çš„å­—ç¬¦é›†è®¾ç½®ã€‚\næœåŠ¡å™¨çº§åˆ«å­—ç¬¦é›†è®¾ç½®æœåŠ¡å™¨çº§åˆ«çš„å­—ç¬¦é›†å¯ä»¥ä»ä¸‹é¢å‡ ä¸ªåœ°æ–¹æŒ‡å®šï¼Œä»ä¸Šåˆ°ä¸‹ä¼˜å…ˆçº§ä¾æ¬¡å¢åŠ ï¼š\n\nç¼–è¯‘ MySQL æ—¶æŒ‡å®šçš„å­—ç¬¦é›†\nmy.cnf é…ç½®æ–‡ä»¶è®¾ç½® character-set-server\nmysqld æœåŠ¡å¯åŠ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šå­—ç¬¦é›†\n\nå½±å“æ•°æ®å­˜å‚¨çš„å­—ç¬¦é›†ä¹‹é—´çš„å…³ç³»ï¼š\næŸ¥çœ‹å½“å‰æ•°æ®åº“çš„å­—ç¬¦é›†è®¾ç½®ï¼š\n# æ–¹æ³•1ï¼šSHOW VARIABLES LIKE &#x27;%character%&#x27;;# æ–¹æ³•2ï¼šUSE information_schema;SELECT * FROM GLOBAL_VARIABLES WHERE VARIABLE_NAME LIKE &#x27;%character%&#x27;;\n\nutf8 ä¸ utf8mb4 åŒºåˆ«UTF-8 æ˜¯å¤šå­—èŠ‚ç¼–ç æ–¹æ¡ˆï¼Œé‡‡ç”¨ 1~4 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œä½†åœ¨ MySQL è®¾è®¡ä¹‹åˆï¼Œä¸€ä¸ªå­—ç¬¦æœ€å¤šé‡‡ç”¨ 3 ä¸ªå­—èŠ‚çš„å°±å¯ä»¥å­˜å‚¨ï¼Œæ‰€ä»¥ Mysql çš„è®¾è®¡è€…å°† MySQL ä¸­çš„ UTF-8 å­—ç¬¦é›†ï¼ˆUTF-8 å…¶å®ä¸æ˜¯å­—ç¬¦é›†ï¼Œæ˜¯å­—ç¬¦ç¼–ç æ–¹æ¡ˆï¼Œä½†åœ¨ MySQL ä¸­ä¸€ç›´è¿™ä¹ˆå«ï¼‰è®¾è®¡æˆäº†æœ€å¤§é•¿åº¦åªèƒ½ä¸º 3. å¦‚å›¾ï¼š\nä½†éšç€ Unicode å­—ç¬¦é›†çš„æ‰©å¼ ï¼Œå‡ºç°äº†éœ€è¦ 4 ä¸ªå­—èŠ‚æ‰èƒ½å­˜å‚¨çš„å­—ç¬¦ï¼Œå¦‚æœè¿™æ—¶ä»ç„¶ä½¿ç”¨ utf-8ï¼ˆæŒ‡ mysql ä¸­çš„ 3 å­—èŠ‚ utf-8ï¼‰æ¥å­˜å‚¨è¿™äº›å­—ç¬¦å°±ä¼šå‡ºç°é”™è¯¯ï¼Œå¦‚æ‰§è¡ŒINSERT INTO member(memberName)VALUES(&#39;ğ¤­¢&#39;)æŠ¥é”™å¦‚ä¸‹ï¼š\nWarning Code : 1366Incorrect string value: &#x27;\\xF0\\xA4\\xAD\\xA2&#x27; for column &#x27;memberName&#x27; at row 1\n\näºæ˜¯ MySQL åæ¥æ–°å¢äº† utf8mb4 å­—ç¬¦é›†ï¼Œæœ€å¤§é•¿åº¦ä¸º 4ï¼Œå…¼å®¹ä¹‹å‰çš„ utf8ï¼Œä½†ä¸ºäº†ä¹‹å‰çš„æ•°æ®åº“ä¸æŠ¥é”™ï¼Œä»ç„¶ä¿ç•™äº†ä¹‹å‰çš„ utf8 å­—ç¬¦é›†ã€‚ æ‰€ä»¥ MySQL ä¸­çš„ UTF-8 å­—ç¬¦é›†æ˜¯ä¼ª UTF-8ï¼Œç°åœ¨éœ€è¦ä½¿ç”¨ utf8mb4ã€‚\nMySQLå®Œå…¨é¿å…ä¹±ç è¦å®Œå…¨é¿å…å­—ç¬¦ä¹±ç ï¼Œæœ€ç®€å•ä¹Ÿæ˜¯æœ€å¥½çš„æ–¹æ³•å°±æ˜¯å°†å„ä¸ªå­—ç¬¦é›†ä¿æŒä¸€è‡´ï¼Œå¯ä»¥éƒ½è®¾ç½®ä¸º utf8mb4ã€‚\nMysql æ•°æ®å­˜å‚¨æ‰€æ¶‰åŠåˆ°çš„ 4 ä¸ªå­—ç¬¦é›†çš„è®¾ç½®å¯ä»¥ä½¿ç”¨ç¬¬äºŒèŠ‚çš„æ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œå®¢æˆ·ç«¯å­—ç¬¦é›†ã€è¿æ¥å­—ç¬¦é›†ï¼Œç»“æœå­—ç¬¦é›†å…³ç³»åˆ°æ•°æ®æ˜¾ç¤ºçš„æ­£ç¡®æ€§ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯­å¥ç»Ÿä¸€è®¾ç½®ä¸º utf8mb4ï¼Œä½†è¿™ä¸ªè®¾ç½®åªé’ˆå¯¹å½“å‰è¿æ¥æœ‰æ•ˆï¼š\nset names utf8mb4;\n\nç¼–ç¨‹å¼€å‘ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ MySQL API è¿›è¡Œæ•°æ®è¿æ¥ã€æŸ¥è¯¢ç­‰æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨mysql_set_character_setå¯¹æ¯ä¸ªè¿æ¥è¿›è¡Œè®¾ç½®ï¼Œè¿™ä¸ª API ä¼šå°†å®¢æˆ·ç«¯å­—ç¬¦é›†ã€è¿æ¥å­—ç¬¦é›†ï¼Œç»“æœå­—ç¬¦é›†éƒ½è®¾ç½®ä¸ºæŒ‡å®šå­—ç¬¦é›†ï¼Œä»£ç å¤§è‡´å¦‚ä¸‹ï¼š\nMYSQL* pMysql = NULL;mysql_real_connect(pMysql, szHost, szUser, szPwd, szDatabase, iPort, NULL, CLIENT_MULTI_STATEMENTS);mysql_set_character_set(pMysql, &quot;utf8mb4&quot;);\n\nQtå­—ç¬¦ç¼–ç æˆ‘ä»¬ä»¥â€œæµ‹è¯•å­—ç¬¦ä¸²-ë³´ê³ ì‹¶ë‹¤-Test String.â€è¿™ä¸ªå­—ç¬¦ä¸²æ¥è¿›è¡Œè®²è§£ï¼Œå®ƒåŒ…å«äº†è‹±æ–‡ã€ä¸­æ–‡å’ŒéŸ©æ–‡ã€‚å› ä¸ºæˆ‘ä½¿ç”¨ Qt çš„æ–¹å¼æ˜¯Visual Studio + Qtåº“çš„å½¢å¼ï¼Œæ‰€ä»¥æœ¬æ–‡ä»¥ MSVC ç¼–è¯‘å™¨ä¸ºä¾‹æ¥è¿›è¡Œè¯´æ˜ï¼Œä½†è¿™ç§æ–¹å¼çš„åŸç†ä¹Ÿé€‚ç”¨äºå…¶ä»–ç¼–è¯‘å™¨ã€‚\nQString ä¸­ä½¿ç”¨ QChar æ¥å­˜å‚¨æ¯ä¸€ä¸ªå­—ç¬¦ï¼ŒQChar æ˜¯ short ç±»å‹ï¼Œå  2 ä¸ªå­—èŠ‚ï¼Œé»˜è®¤æŒ‰ Unicode ç¼–ç å­˜å‚¨ã€‚\né¦–å…ˆï¼Œä¸ºäº†ä¿è¯å†™åˆ°ä»£ç æ–‡ä»¶ä¸­çš„æµ‹è¯•å­—ç¬¦ä¸²èƒ½è¢« MSVC ç¼–è¯‘å™¨ç†è§£ï¼Œæˆ‘ä»¬éœ€è¦å°†æºæ–‡ä»¶ä¿å­˜ä¸ºUtf8-å¸¦ç­¾åçš„æ ¼å¼ã€‚\nè§£å†³ Qt ç¨‹åºä¹±ç é—®é¢˜çš„å…³é”®åœ¨äºç†è§£QStringä¸­å­˜å‚¨å­—ç¬¦çš„ç¼–ç æ ¼å¼ã€‚\nQString ä¸­å­˜å‚¨çš„å­—ç¬¦ä¸²çš„ç¼–ç æ ¼å¼å°±æ˜¯â€œç¼–è¯‘å™¨æ‰§è¡Œå­—ç¬¦é›†ç¼–ç æ ¼å¼â€ã€‚ è¿™ä¸€å¥è¯å¾ˆå…³é”®ã€‚\nåœ¨ MSVC ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨#pragma execution_character_set(&quot;utf-8&quot;)æ¥æŒ‡å®šè¯¥æºæ–‡ä»¶çš„æ‰§è¡Œå­—ç¬¦é›†ç¼–ç æ ¼å¼ä¸º UTF8 æ ¼å¼ï¼Œè¿™æ · QString ä¸­å­˜å‚¨çš„å­—ç¬¦ä¸²æ ¼å¼å°±æ˜¯ utf8 ç¼–ç äº†ã€‚\nä¸‹é¢æ˜¯å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ï¼š\nvoid Demo01::qStringUseCase() &#123;\t/*\tè¯¥æºæ–‡ä»¶ä½¿ç”¨Utf8-BOMæ ¼å¼ä¿å­˜.\tæºå­—ç¬¦é›†ä¸ºUTF8-BOM.\tå¯æ‰§è¡Œå­—ç¬¦é›†ä¸ºUTF8ï¼š#pragma execution_character_set(&quot;utf-8&quot;) å®šä¹‰åœ¨stdafx.h.\t*/#define TEST_STR_A &quot;æµ‹è¯•å­—ç¬¦ä¸²-ë³´ê³ ì‹¶ë‹¤-Test String.&quot;#define TEST_STR_W L&quot;æµ‹è¯•å­—ç¬¦ä¸²-ë³´ê³ ì‹¶ë‹¤-Test String.&quot;\t&#123;\t\t// å› ä¸ºå¯æ‰§è¡Œå­—ç¬¦é›†æ˜¯utf8ï¼Œæ‰€ä»¥ä½¿ç”¨OutputDebugStringAéœ€è¦è½¬æ¢æˆANSI\t\tOutputDebugStringA(Utf8ToAnsi(TEST_STR_A).c_str());\t&#125;\t&#123;\t\tui.lblLanguage-&gt;setText(TEST_STR_A);\t&#125;\t// char* --&gt; QString\t&#123;\t\tQString qstr = TEST_STR_A;\t\tqInfo() &lt;&lt; qstr;\t&#125;\t// QString --&gt; char*æˆ–std::string\t&#123;\t\tQString qstr = TEST_STR_A;\t\tstd::string str = qstr.toStdString(); // ä¸èƒ½ç›´æ¥ä½¿ç”¨qstr.toStdString().c_str()æ¥è·å–ï¼Œå¿…é¡»å…ˆå°†qstr.toStdString()å­˜å…¥std::stringä¸­\t\tconst char* pStr = str.c_str();\t\tQString qstr2 = QString::fromUtf8(pStr);\t\tQ_ASSERT(qstr == qstr2);\t&#125;\t// QString --&gt; wchar_t*æˆ–std::wstring\t&#123;\t\tQString qstr = TEST_STR_A;\t\tstd::wstring str = qstr.toStdWString();\t\tconst wchar_t * pStr = str.c_str();\t\tQString qstr2 = QString::fromWCharArray(pStr);\t\tQ_ASSERT(qstr == qstr2);\t&#125;\t// std::string --&gt; QString\t&#123;\t\tstd::string str = TEST_STR_A;  // std::stringä¸­å­˜å‚¨çš„æ˜¯UTF-8ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºå¯æ‰§è¡Œå­—ç¬¦é›†ä¸ºUTF8\t\tQString qstr = QString::fromStdString(str);\t&#125;\t// std::wstring --&gt; QString\t&#123;\t\tstd::wstring str = TEST_STR_W;  // std::wstringä¸­å­˜å‚¨çš„æ˜¯UTF-8ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºå¯æ‰§è¡Œå­—ç¬¦é›†ä¸ºUTF8\t\tQString qstr = QString::fromStdWString(str);\t&#125;&#125;\n\nQString::toLocal8BitQString æœ‰ä¸€ä¸ªåä¸ºtoLocal8Bitçš„æ–¹æ³•ï¼Œç½‘ä¸Šå¾ˆå¤šä»‹ç»å¦‚ä½•è§£å†³ä¹±ç çš„æ–‡ç« éƒ½ä¼šæåˆ°è¿™ä¸ªå‡½æ•°ã€‚å…³äºè¿™ä¸ªå‡½æ•°å®˜æ–¹çš„ä»‹ç»å¦‚ä¸‹ï¼š\nReturns the local 8-bit representation of the string as a QByteArray. The returned byte array is undefined if the string contains characters not supported by the local 8-bit encoding.QTextCodec::codecForLocale() is used to perform the conversion from Unicode. If the locale encoding could not be determined, this function does the same as toLatin1().If this string contains any characters that cannot be encoded in the locale, the returned byte array is undefined. Those characters may be suppressed or replaced by another.\n\nç®€è€Œè¨€ä¹‹ï¼ŒtoLocal8Bit å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºçš„ ANSI ç¼–ç ï¼ŒANSI æ˜¯å’Œå…·ä½“çš„ä»£ç é¡µç›¸å…³è”çš„ï¼ˆåœ¨ Windows ä¸­æ–‡ç¯å¢ƒä¸‹é»˜è®¤ä»£ç é¡µä¸º 936ï¼‰ã€‚Qt ä¸æ˜¯æ ¹æ®ç³»ç»Ÿä»£ç é¡µæ¥åšåˆ¤æ–­çš„ï¼Œè€Œæ˜¯é€šè¿‡QTextCodecæ¥åšåˆ¤æ–­çš„ï¼Œæ‰€ä»¥æ–‡æ¡£ä¸­ä¼šæåˆ°è¿™ä¸ªå‡½æ•°éœ€è¦ç»“åˆQTextCodec::codecForLocale()æ¥ä½¿ç”¨ï¼ŒtoLocal8Bitæ ¹æ®å¯¹åº”çš„QTextCodecæ¥åšç›¸åº”çš„è½¬æ¢ã€‚\nQtç¨‹åºå‘Šåˆ«ä¹±ç æ‰€ä»¥è¦æƒ³åœ¨ä½¿ç”¨ Qt æ—¶ï¼Œé¿å…é‡åˆ°ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œåªéœ€è¦åœ¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶ä¸­åŠ å…¥ï¼ˆå¯¹äºä¸ä½¿ç”¨é¢„ç¼–è¯‘å¤´çš„é¡¹ç›®å¯ä»¥åœ¨.cppæ–‡ä»¶ä¸­æ·»åŠ ï¼‰ï¼š\n#pragma execution_character_set(&quot;utf-8&quot;)\n\nåŒæ—¶ç”±äºéƒ¨åˆ†éŸ©æ–‡ã€æ—¥æ–‡ç­‰å­—ç¬¦ä¸åœ¨ Visual Studio é»˜è®¤çš„ä¸­æ–‡ GB2312 ç¼–ç ä¸­ï¼Œæ‰€ä»¥å¦‚æœé‡åˆ° Visual Studio æç¤ºâ€œæ­¤æ–‡ä»¶çš„æŸäº› Unicode å­—ç¬¦æœªèƒ½ä¿å­˜åˆ°å½“å‰ä»£ç é¡µä¸­â€æ—¶ï¼Œè¿™æ—¶åº”è¯¥é€‰æ‹©â€Utf8-å¸¦ç­¾åâ€œæ ¼å¼æ¥ä¿å­˜ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼Œæºæ–‡ä»¶ä¿å­˜ä¸ºUtf8-å¸¦ç­¾åï¼Œä¸”è®¾ç½®ç¼–è¯‘å™¨æ‰§è¡Œå­—ç¬¦é›†ç¼–ç ä¸ºUTF8ï¼ˆå¦‚#pragma execution_character_set(&quot;utf-8&quot;)ï¼‰å°±å¯ä»¥è§£å†³æ‰€æœ‰ä¹±ç é—®é¢˜ã€‚\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["å­—ç¬¦ç¼–ç "]},{"title":"å¼€æºåº“spdlogä½¿ç”¨å¤‡å¿˜","url":"/post/2185523635.html","content":"spdlogæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ C++æ—¥å¿—åº“ï¼Œå¯ä»¥æ”¯æŒä»…å¤´æ–‡ä»¶ï¼ˆheader-onlyï¼‰æ¨¡å¼ä½¿ç”¨ã€‚\n\nå®˜ç½‘åœ°å€ï¼š\nhttps://github.com/gabime/spdlog\n\nspdlog æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†ä¸æ˜¯è¿›ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨ä¸€ä¸ª spdlog å¯¹è±¡è¾“å‡ºæ—¥å¿—ï¼Œä½†ä¸èƒ½å¤šä¸ªè¿›ç¨‹åŒæ—¶å¾€ä¸€ä¸ªæ–‡ä»¶å†™å…¥æ—¥å¿—ã€‚\nåœ¨ spdlog å†…éƒ¨ä½¿ç”¨fmtè¿›è¡Œå­—ç¬¦ä¸²çš„æ ¼å¼åŒ–ï¼Œå› æ­¤ spdlog å­—ç¬¦ä¸²æ ¼å¼çš„æ–¹å¼ä¸ fmt åº“ç›¸åŒï¼Œå¦‚ï¼š\nspdlog::critical(&quot;Support for int: &#123;0:d&#125;;  hex: &#123;0:x&#125;;  oct: &#123;0:o&#125;; bin: &#123;0:b&#125;&quot;, 42);\n\n\n\næ—¥å¿—çº§åˆ«å¤§å¤šæ•°æ—¥å¿—åº“éƒ½æœ‰æ—¥å¿—çº§åˆ«çš„æ¦‚å¿µï¼Œé€šè¿‡è®¾å®šæ—¥å¿—çº§åˆ«å¯ä»¥åŠ¨æ€æ§åˆ¶æˆ‘ä»¬éœ€è¦æ‰“å°è¾“å‡ºçš„æ—¥å¿—ï¼Œspdlog æ”¯æŒå¦‚ä¸‹æ—¥å¿—çº§åˆ«ï¼š\ntrace = SPDLOG_LEVEL_TRACE   // æœ€ä½çº§debug = SPDLOG_LEVEL_DEBUGinfo = SPDLOG_LEVEL_INFOwarn = SPDLOG_LEVEL_WARNerr = SPDLOG_LEVEL_ERRORcritical = SPDLOG_LEVEL_CRITICAL // æœ€é«˜çº§\n\nå¦‚ä¸‹ä»£ç è®¾ç½®æ—¥å¿—çº§åˆ«ä¸ºinfoï¼Œæ­¤æ—¶åªä¼šæ‰“å°è¾“å‡º info åŠæ¯” info çº§åˆ«é«˜çš„æ—¥å¿—ï¼š\nspdlog::set_level(spdlog::level::info);\n\nLogger å’Œ Sinkspdlog ä¸»è¦ç”± Logger(è®°å½•å™¨)å’Œ Sink(è¾“å‡ºä½ç½®)ä¸¤éƒ¨åˆ†ç»„æˆï¼Œspdlog çš„é«˜å¯æ‹“å±•æ€§ä½“ç°åœ¨ Logger å’Œ Sink çš„å¯ä»¥ç”±ç”¨æˆ·è‡ªå®šä¹‰æ–¹é¢ã€‚\næ¯ä¸ªç¨‹åºå¯ä»¥åˆ›å»ºå¤šä¸ª Logger å¯¹è±¡ï¼Œè€Œæ¯ä¸ª Logger å¯¹è±¡åˆå¯ä»¥åŒ…å«å¤šä¸ª Sinkï¼ˆä¹Ÿå°±æ˜¯å¯ä»¥åŒæ—¶è¾“å‡ºåˆ°å¤šä¸ªä½ç½®ï¼‰ã€‚\nåˆ›å»º Sinkåœ¨ä»‹ç» Logger çš„åˆ›å»ºæ–¹æ³•å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å¦‚ä½•åˆ›å»º Sink å¯¹è±¡ã€‚\næ¯ä¸ª Sink éƒ½æ˜¯ä¸€ä¸ªstd::shared_ptr&lt;spdlog::sink&gt;å¯¹è±¡ï¼Œåˆ›å»º Sink æ–¹æ³•å¦‚ä¸‹ï¼š\nauto sink = std::make_shared&lt;spdlog::sinks::stdout_sink_mt&gt;();\n\nspdlog æœ‰_mtï¼ˆmulti threadedï¼‰å’Œ_stï¼ˆsingle threadedï¼‰ä¸¤ç±»åç¼€çš„ sink å¯¹è±¡ï¼Œç”¨äºåŒºåˆ†æ˜¯å¦çº¿ç¨‹å®‰å…¨ã€‚å•çº¿ç¨‹(_ståç¼€)çš„ sink æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä¸èƒ½è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚\nspdlog å†…ç½®äº†å¤šç§ä¸åŒçš„ sink ç±»å‹ï¼Œå¦‚å¯ä»¥è¾“å‡ºåˆ°æ–‡ä»¶ã€æ§åˆ¶å°ã€tcp&#x2F;udp ç«¯å£ã€Windows äº‹ä»¶æ—¥å¿—ã€mongo æ•°æ®åº“ç­‰ã€‚å®Œæ•´çš„ sink å¯ä»¥æŸ¥çœ‹æºä»£ç çš„sinks ç›®å½•ï¼Œé€šå¸¸ä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª sinkã€‚\nè™½ç„¶å†…ç½®çš„ Sink å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„å¤§å¤šæ•°éœ€æ±‚ï¼Œä½† spdlog ä¾ç„¶æ”¯æŒè‡ªå®šä¹‰ Sinkï¼Œå…·ä½“æ–¹æ³•å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šimplementing-your-own-sink\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä¸‹é¢ä»‹ç»å‡ ç§å¸¸ç”¨å†…ç½® sink çš„åˆ›å»ºæ–¹æ³•ã€‚\nsimple_file_sinkä¸€ä¸ªç®€å•çš„æ–‡ä»¶æ¥æ”¶å™¨ï¼Œå°†æ—¥å¿—å†™å…¥åˆ°ç»™å®šçš„æ—¥å¿—æ–‡ä»¶ï¼Œæ²¡æœ‰ä»»ä½•çš„é™åˆ¶ã€‚\n#include &quot;spdlog/sinks/basic_file_sink.h&quot;// ...auto logger = spdlog::basic_logger_mt(&quot;mylogger&quot;, &quot;log.txt&quot;);\n\nå…³äºæ—¥å¿—çš„è¾“å‡ºç›®å½•ï¼Œå¦‚ä¸Šé¢çš„data/logsç›®å½•ï¼Œä» splog 1.5.0 ç‰ˆæœ¬å¼€å§‹ï¼Œspdlog å°†è‡ªåŠ¨åˆ›å»ºåŒ…å«æ—¥å¿—æ–‡ä»¶çš„ç›®å½•ã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œå¿…é¡»æ‰‹åŠ¨åˆ›å»ºç›®å½•ã€‚\nrotating_file_sinkå½“è¾¾åˆ°æœ€å¤§æ–‡ä»¶å¤§å°æ—¶ï¼Œå…³é—­æ–‡ä»¶ï¼Œå¹¶é‡å‘½åï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚æœ€å¤§æ–‡ä»¶å¤§å°å’Œæœ€å¤§æ–‡ä»¶æ•°éƒ½å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­é…ç½®ã€‚\n#include &quot;spdlog/sinks/rotating_file_sink.h&quot;// ...auto file_logger = spdlog::rotating_logger_mt(&quot;file_logger&quot;, &quot;data/logs/mylogfile.log&quot;, 1048576 * 5, 3);\n\ndaily_file_sinkæ¯å¤©åœ¨æŒ‡å®šçš„æ—¶é—´åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ååé™„åŠ ä¸€ä¸ªæ—¶é—´æˆ³ã€‚\n#include &quot;spdlog/sinks/daily_file_sink.h&quot;// ...auto daily_logger = spdlog::daily_logger_mt(&quot;daily_logger&quot;, &quot;logs/daily&quot;, 14, 55);\n\nä¸Šé¢ä»£ç å°†åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ sinkï¼Œè¯¥ sink å°†åœ¨æ¯å¤© 14:55 åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚\nstdout_sinkè¾“å‡ºåˆ°æ§åˆ¶å°ã€‚\n#include &quot;spdlog/sinks/stdout_sinks.h&quot;auto sink = std::make_shared&lt;spdlog::sinks::stdout_sink_mt&gt;();\n\nstdout_sink with colorsè¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¹¶å¸¦é¢œè‰²æ ‡è®°ã€‚\n#include &quot;spdlog/sinks/stdout_sinks.h&quot;auto sink = std::make_shared&lt;spdlog::sinks::stdout_color_sink_mt&gt;();\n\nmsvc_sinkè¾“å‡ºåˆ° Windows è°ƒè¯•æ¥æ”¶å™¨ï¼ˆå¦‚ DbgViewï¼‰,åœ¨ spdlog å†…éƒ¨å®é™…ä½¿ç”¨OutputDebugStringAè¿›è¡Œæ—¥å¿—è¾“å‡ºã€‚\n#include &quot;spdlog/sinks/msvc_sink.h&quot;// ...auto sink = std::make_shared&lt;spdlog::sinks::msvc_sink_mt&gt;(false);\n\nmsvc_sinkçš„æ„é€ å‡½æ•°æ”¯æŒcheck_debugger_presentå‚æ•°ï¼Œå¦‚æœè¯¥å‚æ•°ä¸º trueï¼Œåˆ™ä»…åœ¨è°ƒè¯•ç¯å¢ƒè¾“å‡ºæ—¥å¿—åˆ° Windows è°ƒè¯•æ¥æ”¶å™¨ã€‚\ndup_filter_sinkåœ¨æ—¥å¿—è¾“å‡ºæ—¶ç§»é™¤é‡å¤çš„æ—¥å¿—ã€‚å¦‚æœæ—¥å¿—ä¸å‰ä¸€æ¡æ—¥å¿—ç›¸åŒï¼Œå¹¶ä¸”é—´éš”æ—¶é—´å°äºmax_skip_durationï¼Œåˆ™è·³è¿‡è¾“å‡ºè¯¥æ—¥å¿—ã€‚\n#include &quot;spdlog/sinks/dup_filter_sink.h&quot;auto dup_filter = std::make_shared&lt;dup_filter_sink_mt&gt;(std::chrono::seconds(5));spdlog::logger l(&quot;logger&quot;, dup_filter);l.info(&quot;Hello&quot;);l.info(&quot;Hello&quot;);l.info(&quot;Hello&quot;);l.info(&quot;Different Hello&quot;);\n\nä¸Šé¢ç¤ºä¾‹è¾“å‡ºçš„æ—¥å¿—å¦‚ä¸‹ï¼š\n[2019-06-25 17:50:56.511] [logger] [info] Hello[2019-06-25 17:50:56.512] [logger] [info] Skipped 3 duplicate messages..[2019-06-25 17:50:56.512] [logger] [info] Different Hello\n\nåˆ›å»º Loggeråœ¨åˆ›å»ºå®Œ Sink å¯¹è±¡åï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº› Sink æ¥åˆ›å»º Logger å¯¹è±¡ã€‚\nä¸‹é¢ç¤ºä¾‹åˆ›å»ºäº†åä¸ºmyloggerçš„åŒæ­¥ Logger å¯¹è±¡ï¼Œä¸ºè¯¥å¯¹è±¡é…ç½®äº† 2 ä¸ª sinkã€‚\nauto file_sink = std::make_shared&lt;spdlog::sinks::rotating_file_sink_mt&gt;(&quot;logs/app.log&quot;, 1048576, 7);auto msvc_sink = std::make_shared&lt;spdlog::sinks::msvc_sink_mt&gt;(false);std::vector&lt;spdlog::sink_ptr&gt; sinks = &#123;file_sink, msvc_sink&#125;;auto logger = std::make_shared&lt;spdlog::logger&gt;(&quot;mylogger&quot;,                                                sinks.begin(),                                                sinks.end());\n\nspdlog å†…éƒ¨ä¸ºæ¯ä¸ªè¿›ç¨‹éƒ½ç»´æŠ¤ä¸€å¼ å…¨å±€çš„ Logger è®°å½•è¡¨ï¼Œè®°è½½äº†æ¯ä¸ªè¿›ç¨‹ä¸­é€šè¿‡å·¥å‚æ–¹æ³•åˆ›å»ºçš„ Logger å®ä¾‹(æŸäº›æƒ…å†µéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ³¨å†Œ)ã€‚å› è€Œï¼Œåœ¨ä½¿ç”¨æ—¶åªéœ€è¦çŸ¥é“åˆ›å»ºæ—¶æŒ‡å®šçš„åç§°å³å¯è·å– Logger å¯¹è±¡ï¼š\nauto logger = spdlog::get(&quot;mylogger&quot;);logger-&gt;info(&quot;some things want to say.&quot;);\n\nè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼æ—¥å¿—æ ¼å¼ä½œç”¨åœ¨ Sink å¯¹è±¡ä¸Šï¼Œæ¯ä¸ª Sink éƒ½æœ‰ä¸€ä¸ªæ ¼å¼åŒ–ç¨‹åºï¼Œspdlog çš„é»˜è®¤æ—¥å¿—è®°å½•æ ¼å¼ä¸ºï¼š\n[2014-10-31 23:46:59.678] [my_loggername] [info] Some message\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼ä¸ºå½“å‰è¿›ç¨‹çš„æ‰€æœ‰ Logger å¯¹è±¡çš„æ‰€æœ‰ Sink éƒ½ç»Ÿä¸€è®¾ç½®æ—¥å¿—æ ¼å¼ï¼š\nspdlog::set_pattern(&quot;*** [%H:%M:%S %z] [thread %t] %v ***&quot;);\n\nä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼ä¸ºæŒ‡å®šçš„ Logger å¯¹è±¡çš„æ‰€æœ‰ Sink è®¾ç½®æ—¥å¿—æ ¼å¼ï¼š\nsome_logger-&gt;set_pattern(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; %H:%M:%S %z %v &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;);\n\nå½“ç„¶å¯ä»¥é’ˆå¯¹å…·ä½“çš„ Sink æ¥è®¾ç½®æ—¥å¿—æ ¼å¼ï¼š\nsome_logger-&gt;sinks()[0]-&gt;set_pattern(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; %H:%M:%S %z %v &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;);some_logger-&gt;sinks()[1]-&gt;set_pattern(&quot;..&quot;);// æˆ–some_sink-&gt;set_pattern(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; %H:%M:%S %z %v &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;);\n\nåœ¨è®¾ç½®æ—¥å¿—æ ¼å¼æ—¶ï¼Œspdlog éƒ½ä¼šå¯¹æ ¼å¼è¿›ç¨‹é¢„ç¼–è¯‘ï¼Œé¿å…æ¯æ¬¡è¾“å‡ºæ—¥å¿—éƒ½è¿›ç¨‹æ ¼å¼è§£æï¼Œæå‡æ—¥å¿—æ€§èƒ½ã€‚\næ ¼å¼æ ‡è®°ä¸‹é¢åˆ—å‡ºäº† spdlog çš„ pattern å­—ç¬¦ä¸²æ”¯æŒçš„æ ¼å¼æ ‡è®°ï¼ˆç±»ä¼¼%flagï¼‰ã€‚\n\n\n\næ ‡è®°\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n%v\nå®é™…çš„æ—¥å¿—æ–‡æœ¬\nsome user text\n\n\n%t\nçº¿ç¨‹ ID\n1232\n\n\n%P\nè¿›ç¨‹ ID\n3456\n\n\n%n\næ—¥å¿—åç§°\nsome logger name\n\n\n%l\næ—¥å¿—ç­‰çº§å…¨ç§°\ndebugã€info ç­‰\n\n\n%L\næ—¥å¿—ç­‰çº§ç®€å†™\nDã€I ç­‰\n\n\n%a\nç®€å†™æ˜ŸæœŸåç§°\nThu\n\n\n%A\næ˜ŸæœŸåç§°å…¨ç¨‹\nThursday\n\n\n%b\nç®€å†™æœˆä»½åç§°\nAug\n\n\n%B\næœˆä»½åç§°å…¨ç¨‹\nAugust\n\n\n%c\næ—¥æœŸå’Œæ—¶é—´\nThu Aug 23 15:35:46 2014\n\n\n%C\nä¸¤ä½æ•°è¡¨ç¤ºå¹´ä»½\n2014 è¾“å‡º 14\n\n\n%Y\nå››ä½æ•°è¡¨ç¤ºå¹´ä»½\n2014\n\n\n%D\nMM&#x2F;DD&#x2F;YY æ ¼å¼çš„æ—¥æœŸ\n08&#x2F;23&#x2F;14\n\n\n%m\næœˆä»½ï¼ˆ01-12ï¼‰\n11\n\n\n%d\nå¤©ï¼ˆ01-31ï¼‰\n29\n\n\n%H\n24 å°æ—¶åˆ¶çš„å°æ—¶(00-23)\n23\n\n\n%I\n12 å°æ—¶åˆ¶çš„å°æ—¶(01-12)\n11\n\n\n%M\nåˆ†é’Ÿï¼ˆ00-59ï¼‰\n59\n\n\n%S\nç§’ï¼ˆ00-59ï¼‰\n58\n\n\n%e\næ¯«ç§’\n678\n\n\n%f\nå¾®å¦™\n056789\n\n\n%F\nçº³ç§’\n256789123\n\n\n%p\nAM&#x2F;PM\nAM\n\n\n%r\n12 å°æ—¶åˆ¶æ—¶é—´\n02:55:02 PM\n\n\n%R\n24 å°æ—¶åˆ¶æ—¶é—´ï¼Œç­‰åŒäº %H:%M\n23:55\n\n\n%T æˆ–%X\nISO 8601 æ—¶é—´æ ¼å¼ï¼Œç­‰åŒäº%H:%M:%S\n23:55:59\n\n\n%z\nISO 8601 æ—¶é—´æ ¼å¼ï¼Œæ—¶åŒºåç§» ([+&#x2F;-]HH:MM)\nå¦‚ä¸­å›½æ˜¯ä¸œ 8 åŒºï¼Œ+08:00\n\n\n%E\næ—¶é—´æˆ³\n1528834770\n\n\n%%\nè¾“å‡º%\n%\n\n\n%+\nspdlog é»˜è®¤æ ¼å¼\n[2014-10-31 23:46:59.678] [mylogger] [info] Some message\n\n\n%^\nå¼€å§‹é¢œè‰²æ ‡è®°ï¼ˆåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼‰\n[mylogger] [info(green)] Some message\n\n\n%$\nç»“æŸé¢œè‰²æ ‡è®°(å¦‚%^[+++]%$ %v) (åªèƒ½ä½¿ç”¨ä¸€æ¬¡)\n[+++] Some message\n\n\n%@\næºæ–‡ä»¶è·¯å¾„å’Œæ‰€åœ¨è¡Œæ•°ï¼Œç­‰åŒäº%g:%#\n&#x2F;some&#x2F;dir&#x2F;my_file.cpp:123\n\n\n%s\næºæ–‡ä»¶å\nmy_file.cpp\n\n\n%g\næºæ–‡ä»¶çš„å®Œæ•´è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼Œç­‰åŒäºFILEå®\n&#x2F;some&#x2F;dir&#x2F;my_file.cpp\n\n\n%#\næºç æ‰€åœ¨è¡Œæ•°\n123\n\n\n%!\næºç æ‰€åœ¨å‡½æ•°å\nmy_func\n\n\n%o\nä¸ä¸Šæ¡æ—¥å¿—çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\n456\n\n\n%i\nä¸ä¸Šæ¡æ—¥å¿—çš„é—´éš”æ—¶é—´ï¼ˆå¾®ç§’ï¼‰\n456\n\n\n%u\nä¸ä¸Šæ¡æ—¥å¿—çš„é—´éš”æ—¶é—´ï¼ˆçº³ç§’ï¼‰\n11456\n\n\n%O\nä¸ä¸Šæ¡æ—¥å¿—çš„é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰\n4\n\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\nauto file_sink = std::make_shared&lt;spdlog::sinks::rotating_file_sink_mt&gt;(&quot;logs/app.log&quot;, 1048576, 7);file_sink-&gt;set_pattern(&quot;%Y-%m-%d %H:%M:%S.%e %z %-10n %-8l [%P %t] %v&quot;);\n\nè¾“å‡ºæ—¥å¿—æ ¼å¼å¦‚ä¸‹ï¼š\n2023-12-21 09:34:45.691 +08:00 Dock1703122417075610 info     [15460 6948] this is log text\n\næºç ä½ç½®æ ‡è®°å¦‚æœéœ€è¦ä½¿ç”¨æºç ä½ç½®æ ‡è®°ï¼Œå¦‚%s, %g, %#, %!ï¼Œéœ€è¦åœ¨åŒ…å« spdlog å¤´æ–‡ä»¶ä¹‹å‰ï¼Œå®šä¹‰å¦‚ä¸‹å®ï¼š\n#define SPDLOG_ACTIVE_LEVEL SPDLOG_LEVEL_TRACE\n\n3.2 å¯¹é½æ¯ä¸ªæ ¼å¼æ ‡è®°å¯ä»¥é€šè¿‡é¢„å…ˆæ·»åŠ å®½åº¦æ ‡è®°æ¥å®ç°å¯¹é½ã€‚\nä½¿ç”¨-ï¼ˆå·¦å¯¹é½ï¼‰æˆ–=ï¼ˆä¸­é—´å¯¹é½ï¼‰æ§åˆ¶å¯¹é½æ–¹å‘ï¼š\n\n\n\nå¯¹é½\nå«ä¹‰\nç¤ºä¾‹\nç»“æœ\n\n\n\n%\nå³å¯¹é½\n%8l\nâ€œ infoâ€\n\n\n%-\nå·¦å¯¹é½\n%-8l\nâ€œinfo â€œ\n\n\n%&#x3D;\nä¸­é—´å¯¹é½\n%&#x3D;8l\nâ€œ info â€œ\n\n\n3.3 æˆªæ–­è¿˜å¯ä»¥é€šè¿‡æ·»åŠ !æ ‡è®°æ¥è¿›è¡Œæ•°æ®æˆªæ–­ï¼Œå¦‚æœå®½åº¦è¶…è¿‡æŒ‡å®šçš„å®½åº¦ï¼Œåˆ™æˆªæ–­ç»“æœï¼š\n\n\n\nå¯¹é½\nå«ä¹‰\nç¤ºä¾‹\nç»“æœ\n\n\n\n%!\nå³å¯¹é½å¹¶é•¿åº¦è¶…è¿‡ 3 ä¸ªåæˆªæ–­\n%3!l\nâ€œinfâ€\n\n\n%-!\nå·¦å¯¹é½å¹¶é•¿åº¦è¶…è¿‡ 2 ä¸ªåæˆªæ–­\n%-2!l\nâ€œinâ€\n\n\n%&#x3D;!\nä¸­é—´å¯¹é½å¹¶é•¿åº¦è¶…è¿‡ 1 ä¸ªåæˆªæ–­\n%&#x3D;1!l\nâ€œiâ€\n\n\nè¾“å‡ºç­–ç•¥(Flush policy)åŸºäºæ€§èƒ½è€ƒè™‘ï¼Œspdlog ä¸ä¼šç«‹å³è¾“å‡ºæ—¥å¿—ï¼Œè€Œæ˜¯åœ¨å†…éƒ¨é€šè¿‡æ—¥å¿—é˜Ÿåˆ—çš„æ–¹å¼ç¼“å­˜æ—¥å¿—ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è¿›è¡Œæ‰¹é‡è¾“å‡ºã€‚\nå¦‚æœéœ€è¦è®© spdlog ç«‹å³è¾“å‡ºé˜Ÿåˆ—ä¸­çš„æ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‡ ç§æ–¹å¼å®ç°ã€‚\næ‰‹åŠ¨æ“ä½œæˆ‘ä»¬å¯ä»¥å•ç‹¬è°ƒç”¨ Sink çš„flushå‡½æ•°ç«‹å³è¾“å‡ºé˜Ÿåˆ—ä¸­çš„æ—¥å¿—ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ Logger å¯¹è±¡çš„flushå‡½æ•°è®©è¯¥å¯¹è±¡ä¸‹çš„æ‰€æœ‰ sink ç«‹å³è¾“å‡ºã€‚\nå¦‚æœæ˜¯å¼‚æ­¥æ—¥å¿—ï¼Œè°ƒç”¨ flush å‡½æ•°åªä¼šç»™æ—¥å¿—é˜Ÿåˆ—å‘é€ä¸€ä¸ª flush æ¶ˆæ¯ï¼Œä¸ä¼šç«‹å³åˆ·æ–°ã€‚\nåœ¨ç¨‹åºé€€å‡ºå‰ï¼Œspdlog ä¼šç¡®ä¿é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ—¥å¿—éƒ½è¾“å‡ºå®Œæˆã€‚å¦‚æœæƒ³æ‰‹åŠ¨ç¡®ä¿æ‰€æœ‰æ—¥å¿—è¾“å‡ºå®Œæˆåé€€å‡ºç¨‹åºï¼Œå¯ä»¥è°ƒç”¨spdlog::shutdown()å‡½æ•°ã€‚\nåŸºäºæ—¥å¿—ç­‰çº§çš„è¾“å‡ºæ‚¨å¯ä»¥è®¾ç½®å°†è§¦å‘è‡ªåŠ¨è¾“å‡ºçš„æœ€ä½æ—¥å¿—çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œæ¯å½“è®°å½•é”™è¯¯æˆ–æ›´ä¸¥é‡çš„æ¶ˆæ¯æ—¶ï¼Œè¿™å°†è§¦å‘ç«‹å³è¾“å‡ºï¼š\nmy_logger-&gt;flush_on(spdlog::level::err);\n\nå®šæ—¶è¾“å‡ºæ‰€æœ‰å·²æ³¨å†Œçš„ Logger æ¯ 5 ç§’çš„å®šæœŸè¾“å‡ºï¼š\nspdlog::flush_every(std::chrono::seconds(5));\n\nè¿™ç§æ–¹å¼åªèƒ½ä½¿ç”¨åœ¨çº¿ç¨‹å®‰å…¨çš„ sink ä¸Šï¼ˆå³_mtåç¼€ï¼‰ï¼Œå› ä¸ºå®šæ—¶è¾“å‡ºä»»åŠ¡æ‰§è¡Œåœ¨ä¸åŒçš„çº¿ç¨‹ä¸Šã€‚\nå¼‚å¸¸spdlog åœ¨å…¶æ–‡æ¡£ä¸­å…³äºå¼‚å¸¸çš„è¯´æ˜ï¼Œspdlog åªä¼šåœ¨æ„é€  Logger å’Œ Sink é”™è¯¯æ—¶ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º spdlog è®¤ä¸ºè¿™ä¸ªé”™è¯¯æ˜¯è‡´å‘½çš„ï¼Œä½†è¿™ä¸ªå¹¶ä¸å¯ä¿¡ï¼Œæœ€å¤šåªèƒ½è®¤ä¸º spdlog åœ¨å…¶ä»–æƒ…å†µä¸‹ä¸ä¼šä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œä½†ä¸èƒ½ä¿è¯å…¶ä¾èµ–çš„åº“ï¼ˆå¦‚ fmtï¼‰ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\nè€Œä¸”å¦‚æœå¤šä¸ªè¿›ç¨‹å‘åŒä¸€ä¸ªæ–‡ä»¶å†™å…¥æ—¥å¿—ï¼Œå½“æ–‡ä»¶è¾¾åˆ°æœ€å¤§å¤§å°æ—¶ï¼Œspdlog ä¼šè‡ªåŠ¨é‡å‘½åå½“å‰æ–‡ä»¶ï¼Œå¹¶æ–°å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ã€‚å¦‚æœå¤šä¸ªè¿›ç¨‹å‘åŒä¸€ä¸ªæ–‡ä»¶å†™å…¥æ—¥å¿—ï¼Œä¼šå¯¼è‡´é‡å‘½åæ—¥å¿—æ–‡ä»¶å¤±è´¥ï¼Œsplog ä¼šå°†è¯¥å¤±è´¥è®¤ä¸ºæ˜¯è‡´å‘½é”™è¯¯ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;å¦‚æœåœ¨æ‰“å°æ—¥å¿—æ—¶å‡ºç°äº† spdlog èƒ½å¤Ÿé¢„æ–™çš„é”™è¯¯ï¼ˆéé¢„æ–™çš„åŠä¸‰æ–¹åº“æŠ›å‡ºçš„å¼‚å¸¸ä»ç„¶ä¼šä¼ é€’åˆ°å¤–éƒ¨ï¼‰ï¼Œspdlog é»˜è®¤å°†å‘stderræ‰“å°é”™è¯¯æ¶ˆæ¯ï¼Œä¸ºäº†é¿å…é”™è¯¯æ¶ˆæ¯å……æ–¥å±å¹•ï¼Œæ¯ä¸ª Logger çš„é”™è¯¯æ¶ˆæ¯è¾“å‡ºé€Ÿç‡é™åˆ¶ä¸º 1 æ¡æ¶ˆæ¯&#x2F;åˆ†é’Ÿã€‚\nspdlog æä¾›äº†é”™è¯¯å¤„ç†æ–¹æ³•ï¼Œæ¥è®©ç”¨æˆ·è‡ªå®šä¹‰å¦‚ä½•å¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡set_error_handlerå‡½æ•°æ¥è‡ªå®šä¹‰é”™è¯¯å¤„ç†æ–¹æ³•ï¼š\n// å…¨å±€ä¸ºæ¯ä¸ªLoggeræ³¨å†Œé”™è¯¯å¤„ç†æ–¹æ³•spdlog::set_error_handler([](const std::string&amp; msg) &#123;      std::cerr &lt;&lt; &quot;my err handler: &quot; &lt;&lt; msg &lt;&lt; std::endl;&#125;);// åˆ†åˆ«ä¸ºç‰¹å®šçš„Loggeræ³¨å†Œé”™è¯¯å¤„ç†æ–¹æ³•critical_logger-&gt;set_error_handler([](const std::string&amp; msg) &#123;    throw std::runtime_error(msg);&#125;);\n\nspdlog ä¸æ˜¯å¼‚å¸¸å®‰å…¨çš„ï¼Œåœ¨ä½¿ç”¨ spdlog æ—¶ä¸€å®šè¦æ³¨æ„å¼‚å¸¸æ•è·ï¼Œå¦åˆ™å¯èƒ½å› ä¸ºä¸€ä¸ªæ ¼å¼åŒ–æ ‡è®°å†™é”™å¯¼è‡´ç¨‹åºå´©æºƒï¼Œæœ¬æ¥æ˜¯æƒ³é€šè¿‡æ—¥å¿—æ¥æ’é™¤é—®é¢˜çš„ï¼Œç»“æœå´å› ä¸ºæ—¥å¿—å¯¼è‡´ç¨‹åºå´©æºƒï¼Œå¦‚ï¼š\n// å¯¼è‡´ç¨‹åºå´©æºƒlogger-&gt;error(&quot;create device enumerator failed, hr: &#123;#x&#125;&quot;, hr);\n\nå®½çª„å­—ç¬¦spdlog å†…éƒ¨å°†å­—ç¬¦ä½œä¸ºcharç±»å‹å¤„ç†ï¼Œå¦‚æœéœ€è¦è¾“å‡ºwchar_tç±»å‹çš„å­—ç¬¦ä¸²ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸º char ç±»å‹ï¼Œspdlog ä»…å°† char ç±»å‹å­—ç¬¦ä¸²åŸæ ·è¾“å‡ºï¼Œä¸åšå­—ç¬¦ç¼–ç åˆ¤æ–­å’Œå¤„ç†ï¼Œéœ€è¦è°ƒç”¨è€…æ¥è§‰å¾—å­—ç¬¦ä¸²çš„ç¼–ç ï¼Œå»ºè®®ç»Ÿä¸€æ—¥å¿—å­—ç¬¦ä¸²çš„ç¼–ç æ ¼å¼ä¸º UTF-8 æˆ– ANSIã€‚\næ—¥å¿—æ ¼å¼spdlog æ—¥å¿—å­—ç¬¦ä¸²çš„æ ¼å¼åŒ–å¤„ç†ä½¿ç”¨çš„æ˜¯å¼€æºfmt åº“ï¼Œå…¶è¯¦ç»†è¯­æ³•è§ï¼šFormat String Syntaxã€‚\nä¸‹é¢åˆ—ä¸¾äº†å¸¸ç”¨çš„æ—¥å¿—æ ¼å¼åŒ–æ–¹æ³•ã€‚\nlogger-&gt;info(&quot;è¾“å‡ºcharå­—ç¬¦ä¸²:&#123;&#125;&quot;, &quot;hello&quot;);// è¾“å‡ºcharå­—ç¬¦ä¸²:hellologger-&gt;info(&quot;è¾“å‡ºstd::string:&#123;&#125;&quot;, std::string(&quot;hello&quot;));// è¾“å‡ºstd::string:hello/** è¾“å‡ºæœ€å°é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœé•¿åº¦ä¸è¶³åˆ™ç”¨å›ºå®šå­—ç¬¦å¡«å……ï¼Œä½†è¶…å‡ºä¸ä¼šæˆªæ–­å­—ç¬¦ä¸²*/logger-&gt;info(&quot;è¾“å‡ºå·¦å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œç©ºæ ¼å¡«å……):&#123;:&lt;10&#125;&quot;, &quot;hello&quot;);// è¾“å‡ºå·¦å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œç©ºæ ¼å¡«å……):hellologger-&gt;info(&quot;è¾“å‡ºå·¦å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10):&#123;:&lt;10&#125;&quot;, &quot;hello my world&quot;);// è¾“å‡ºå·¦å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10):hello my worldlogger-&gt;info(&quot;è¾“å‡ºå³å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œç©ºæ ¼å¡«å……):&#123;:&gt;10&#125;&quot;, &quot;hello&quot;);// è¾“å‡ºå³å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œç©ºæ ¼å¡«å……):     hellologger-&gt;info(&quot;è¾“å‡ºå±…ä¸­å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œç©ºæ ¼å¡«å……):&#123;:^10&#125;&quot;, &quot;hello&quot;);// è¾“å‡ºå±…ä¸­å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œç©ºæ ¼å¡«å……):  hellologger-&gt;info(&quot;è¾“å‡ºå±…ä¸­å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œ*å¡«å……):&#123;:*^10&#125;&quot;, &quot;hello&quot;);// è¾“å‡ºå±…ä¸­å¯¹é½å­—ç¬¦ä¸²(æœ€å°é•¿åº¦10ï¼Œ*å¡«å……):**hello***logger-&gt;info(&quot;è¾“å‡ºæ•´å‹:&#123;&#125;&quot;, 1234);// è¾“å‡ºæ•´å‹:1234logger-&gt;info(&quot;è¾“å‡ºå¸ƒå°”ç±»å‹:&#123;&#125;&quot;, true);// è¾“å‡ºå¸ƒå°”ç±»å‹:truelogger-&gt;info(&quot;è¾“å‡ºfloat:&#123;&#125;&quot;, 3.1415936f);// è¾“å‡ºfloat:3.1415937logger-&gt;info(&quot;è¾“å‡ºdouble:&#123;&#125;&quot;, 3.1415936);// è¾“å‡ºdouble:3.1415936/** è¾“å‡ºæœ€å°ä½æ•°ï¼ˆå«å°æ•°ç‚¹ï¼‰çš„æµ®ç‚¹å‹* å°æ•°ç‚¹å‰éƒ¨çš„æœ€å°ä½æ•°=æ€»ä½æ•°-åéƒ¨å›ºå®šä½æ•°-1ï¼Œä½æ•°ä¸è¶³é»˜è®¤å¡«å……ç©ºæ ¼ï¼Œè¶…è¿‡ä¸æˆªæ–­ï¼›* å°æ•°ç‚¹åéƒ¨çš„ä½æ•°å§‹ç»ˆå›ºå®šï¼Œä½æ•°ä¸è¶³åˆ™åœ¨å°¾éƒ¨æ·»åŠ 0ï¼Œè¶…å‡ºåˆ™å››èˆäº”å…¥åæˆªæ–­ï¼›*/logger-&gt;info(&quot;è¾“å‡ºæµ®ç‚¹å‹(å«å°æ•°ç‚¹æœ€å°ä½æ•°6ä½ï¼ˆå·¦è¾¹å¡«å……ç©ºæ ¼ï¼‰ï¼Œå°æ•°ç‚¹åå§‹ç»ˆ3ä½):&#123;:6.3f&#125;&quot;, 3.1415936);// è¾“å‡ºæµ®ç‚¹å‹(å«å°æ•°ç‚¹æœ€å°ä½æ•°6ä½ï¼ˆå·¦è¾¹å¡«å……ç©ºæ ¼ï¼‰ï¼Œå°æ•°ç‚¹åå§‹ç»ˆ3ä½): 3.142logger-&gt;info(&quot;è¾“å‡ºæµ®ç‚¹å‹(å«å°æ•°ç‚¹æœ€å°ä½æ•°6ä½ï¼ˆå·¦è¾¹å¡«å……ç©ºæ ¼ï¼‰ï¼Œå°æ•°ç‚¹åå§‹ç»ˆ3ä½):&#123;:6.2f&#125;&quot;, 31415926.1);// è¾“å‡ºæµ®ç‚¹å‹(å«å°æ•°ç‚¹æœ€å°ä½æ•°6ä½ï¼ˆå·¦è¾¹å¡«å……ç©ºæ ¼ï¼‰ï¼Œå°æ•°ç‚¹åå§‹ç»ˆ3ä½):31415926.10logger-&gt;info(&quot;è¾“å‡ºå°å†™åå…­è¿›åˆ¶:&#123;:x&#125;&quot;, 123);// è¾“å‡ºå°å†™åå…­è¿›åˆ¶:7blogger-&gt;info(&quot;è¾“å‡ºå¤§å†™åå…­è¿›åˆ¶:&#123;:X&#125;&quot;, 123);// è¾“å‡ºå¤§å†™åå…­è¿›åˆ¶:7Blogger-&gt;info(&quot;è¾“å‡ºå°å†™åå…­è¿›åˆ¶(å¸¦0xå‰ç¼€):&#123;:#x&#125;&quot;, 123);// è¾“å‡ºå°å†™åå…­è¿›åˆ¶(å¸¦0xå‰ç¼€):0x7blogger-&gt;info(&quot;è¾“å‡ºå¤§å†™åå…­è¿›åˆ¶(å¸¦0xå‰ç¼€):&#123;:#X&#125;&quot;, 123);// è¾“å‡ºå¤§å†™åå…­è¿›åˆ¶(å¸¦0xå‰ç¼€):0X7Blogger-&gt;info(&quot;è¾“å‡ºå°å†™åå…­è¿›åˆ¶(å›ºå®š8ä½ï¼Œä¸è¶³è¡¥0):&#123;:08x&#125;&quot;, 123);// è¾“å‡ºå°å†™åå…­è¿›åˆ¶(å›ºå®š8ä½ï¼Œä¸è¶³è¡¥0):0000007blogger-&gt;info(&quot;è¾“å‡ºå°å†™åå…­è¿›åˆ¶(å¸¦0xå‰ç¼€ï¼Œå›ºå®š8ä½ï¼Œä¸è¶³è¡¥0):&#123;:#010x&#125;&quot;, 123);// è¾“å‡ºå°å†™åå…­è¿›åˆ¶(å¸¦0xå‰ç¼€ï¼Œå›ºå®š8ä½ï¼Œä¸è¶³è¡¥0):0x0000007bHRESULT hr = E_FAIL;logger-&gt;info(&quot;è¾“å‡ºHRESULT:&#123;:#010x&#125;&quot;, (unsigned long)hr);// è¾“å‡ºHRESULT:0x80004005\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"],"tags":["å¼€æºåº“"]},{"title":"æ­£åˆ™è§„åˆ™é€ŸæŸ¥","url":"/post/3005885000.html","content":"æœ¬æ–‡ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ­£åˆ™è¡¨è¾¾å¼çš„æ•™ç¨‹ï¼Œä»…é€‚ç”¨äºå·²æŒæ¡æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼Œéœ€è¦è¿›è¡Œè§„åˆ™é€ŸæŸ¥çš„å¼€å‘äººå‘˜ã€‚\n\n\nå…ƒå­—ç¬¦\n\n\nå­—ç¬¦\nè¯´æ˜\n\n\n\n^\nä¸€è¡Œå¼€å§‹\n\n\n$\nä¸€è¡Œç»“æŸ\n\n\n\\b\nå•è¯çš„å¼€å§‹æˆ–ç»“æŸ\n\n\n.\né™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å­—ç¬¦\n\n\n\\w\nå•è¯å­—ç¬¦ï¼ˆåŒ…æ‹¬å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œæ±‰å­—ï¼‰\n\n\n\\W\nä»»æ„çš„éå•è¯å­—ç¬¦ï¼ˆåŒ…æ‹¬å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œæ±‰å­—ï¼‰\n\n\n\\s\nä»»æ„çš„ç©ºç™½å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ã€ä¸­æ–‡å…¨è§’ç©ºæ ¼ç­‰\n\n\n\\S\nä»»æ„çš„éç©ºç™½å­—ç¬¦\n\n\n\\d\nä»»æ„çš„æ•°å­—\n\n\n\\D\nä»»æ„çš„éæ•°å­—å­—ç¬¦\n\n\nå­—ç¬¦é›†åˆ\n\n\nå­—ç¬¦é›†åˆ\nè¯´æ˜\n\n\n\n[aeiou]\naeiou å­—ç¬¦é›†ä¸­çš„ä»»ä½•å­—ç¬¦\n\n\n[^aeiou]\né™¤ aeiou å­—ç¬¦é›†ä¹‹å¤–çš„å­—ç¬¦\n\n\n[0-9a-z]\nå­—ç¬¦é›†åˆ 0 åˆ° 9ï¼Œa åˆ° z ä¸­çš„ä»»ä½•å­—ç¬¦\n\n\n[^0-9a-z]\né™¤å­—ç¬¦é›†åˆ 0 åˆ° 9ï¼Œ a åˆ° z ä¸­çš„ä»»ä½•å­—ç¬¦\n\n\né™å®šç¬¦\n\n\nå­—ç¬¦\nè¯´æ˜\n\n\n\n{n}\né‡å¤æ¬¡æ•°&#x3D;n æ¬¡\n\n\n{n,}\né‡å¤æ¬¡æ•°&gt;&#x3D;n æ¬¡\n\n\n{n,m}\nn&lt;&#x3D;é‡å¤æ¬¡æ•°&lt;&#x3D;m\n\n\n*\né‡å¤æ¬¡æ•°&gt;&#x3D;0\n\n\n+\né‡å¤æ¬¡æ•°&gt;&#x3D;1\n\n\n?\n0&lt;&#x3D;é‡å¤æ¬¡æ•°&lt;&#x3D;1\n\n\n*?\nå°½å¯èƒ½å°‘åœ°ä½¿ç”¨é‡å¤çš„ç¬¬ä¸€ä¸ªåŒ¹é…\n\n\n+?\nå°½å¯èƒ½å°‘åœ°ä½¿ç”¨é‡å¤ä½†è‡³å°‘ä½¿ç”¨ä¸€æ¬¡\n\n\n??\nä½¿ç”¨é›¶æ¬¡é‡å¤ï¼ˆå¦‚æœ‰å¯èƒ½ï¼‰æˆ–ä¸€æ¬¡é‡å¤\n\n\nåˆ†ç»„åˆ†ç»„åˆç§°ä¸ºå­è¡¨è¾¾å¼ï¼Œå³æŠŠä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„å…¨éƒ¨æˆ–éƒ¨åˆ†åˆ†æˆä¸€ä¸ªæˆ–å¤šä¸ªç»„ã€‚å…¶ä¸­ï¼Œåˆ†ç»„ä½¿ç”¨çš„å­—ç¬¦ä¸º(å’Œ)ï¼Œå³å·¦åœ†æ‹¬å·å’Œå³åœ†æ‹¬å·ã€‚åˆ†ç»„ä¹‹åï¼Œå¯ä»¥å°†å­—ç¬¦ä¸º(å’Œ)ä¹‹ä¸­çš„è¡¨è¾¾å¼çœ‹æˆä¸€ä¸ªæ•´ä½“æ¥å¤„ç†ã€‚\nä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ¹é…é‡å¤å‡ºç°å­—ç¬¦ä¸²â€œabcâ€ä¸€æ¬¡æˆ–ä¸¤æ¬¡çš„å­—ç¬¦ä¸²ã€‚æ­¤æ—¶ï¼Œè¡¨è¾¾å¼å°†â€œabcâ€çœ‹æˆä¸€ä¸ªæ•´ä½“æ¥è¿›è¡Œé‡å¤åŒ¹é…ã€‚\n(abc)&#123;1,2&#125;\n\nå½“ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¢«åˆ†ç»„ä¹‹åï¼Œæ¯ä¸€ä¸ªç»„å°†è‡ªåŠ¨è¢«èµ‹äºˆä¸€ä¸ªç»„å·ï¼Œè¯¥ç»„å·å¯ä»¥ä»£è¡¨è¯¥ç»„çš„è¡¨è¾¾å¼ã€‚å…¶ä¸­ï¼Œç»„å·çš„ç¼–åˆ¶è§„åˆ™ä¸ºï¼šä»å·¦åˆ°å³ã€ä»¥åˆ†ç»„çš„å·¦æ‹¬å·(ä¸ºæ ‡å¿—ï¼Œç¬¬ä¸€ä¸ªåˆ†ç»„çš„ç»„å·ä¸º 1ï¼Œç¬¬äºŒä¸ªåˆ†ç»„çš„ç»„å·ä¸º 2ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¯ä»¥ä½¿ç”¨ \\æ•°å­— çš„æ–¹å¼æ¥å¼•ç”¨åˆ†ç»„ã€‚å¦‚\\1ï¼Œ\\2ã€‚\nè´ªå©ªä¸éè´ªå©ªæ¯”å¦‚è¯´åŒ¹é…è¾“å…¥ä¸² A:Â 101000000000100\nä½¿ç”¨1.*1å°†ä¼šåŒ¹é…åˆ° 1010000000001, åŒ¹é…æ–¹æ³•: å…ˆåŒ¹é…è‡³è¾“å…¥ä¸² A çš„æœ€å, ç„¶åå‘å‰åŒ¹é…, ç›´åˆ°å¯ä»¥åŒ¹é…åˆ° 1, ç§°ä¹‹ä¸ºè´ªå©ªåŒ¹é…ã€‚\nä½¿ç”¨1.*?1å°†ä¼šåŒ¹é…åˆ° 101, åŒ¹é…æ–¹æ³•: *åŒ¹é…ä¸‹ä¸€ä¸ª 1 ä¹‹å‰çš„æ‰€æœ‰å­—ç¬¦, ç§°ä¹‹ä¸ºéè´ªå©ªåŒ¹é…ã€‚\næ‰€æœ‰å¸¦æœ‰é‡è¯çš„éƒ½æ˜¯éè´ªå©ªåŒ¹é…:Â .*?,Â .+?,Â .{2,6}?, .??ã€‚\nåœ¨çº¿æ­£åˆ™éªŒè¯å·¥å…·\nhttps://c.runoob.com/front-end/854/\nhttp://www.yunjson.com/reg/\nhttps://tool.oschina.net/regex/\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"Windowså¥—æ¥å­—I/Oæ¨¡å‹(1)-é˜»å¡æ¨¡å‹","url":"/post/2937580891.html","content":"å¥—æ¥å­—I&#x2F;Oçš„é˜»å¡æ¨¡å‹æ˜¯æœ€å¸¸è§çš„ç½‘ç»œæ¨¡å‹ï¼Œä¹Ÿæ˜¯åœ¨ç½‘ç»œç¼–ç¨‹ä¸­æœ€æ—©æ¥è§¦çš„ä¸€ä¸ªæ¨¡å‹ã€‚å› ä¸ºå®ƒæ˜¯é˜»å¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šç»“åˆçº¿ç¨‹ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚å°†acceptï¼Œrecvç­‰æ“ä½œæ”¾åˆ°å•ç‹¬çš„çº¿ç¨‹ï¼Œé¿å…ç¨‹åºä¸»çº¿ç¨‹è¢«é˜»å¡ã€‚\n\n\nä¸‹é¢çš„ç¤ºä¾‹ä¸ºäº†æ¼”ç¤ºé˜»å¡æ¨¡å‹ä½¿ç”¨çš„åŸºæœ¬æµç¨‹æ²¡æœ‰å°†å…¶æ”¾å…¥åˆ°ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ã€‚\næœåŠ¡ç«¯æœåŠ¡ç«¯å¤§è‡´æµç¨‹:\n\nåˆ›å»ºSocket\nBindç«¯å£\nå¼€å§‹Listen\nacceptå®¢æˆ·ç«¯è¿æ¥ï¼ˆä¸€èˆ¬åœ¨å­çº¿ç¨‹ä¸­ä¸é—´æ–­acceptï¼‰\nsendæ•°æ®åˆ°å®¢æˆ·ç«¯ï¼ˆä¹Ÿå¯ä»¥recvï¼‰\nclose socket\n\n#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;using namespace std;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const u_short kPort = 10001;const std::string kHelloServer = &quot;hello, I&#x27;m server.&quot;;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket_ = INVALID_SOCKET;\tSOCKET s_ = INVALID_SOCKET;\tdo \t&#123;\t\t// (1)\t\tsocket_ = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (socket_ == INVALID_SOCKET) &#123;\t\t\tstd::cout &lt;&lt; &quot;create socket failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = htonl(INADDR_ANY);\t\taddr.sin_port = htons(kPort);\t\tif (bind(socket_, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;bind failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (3)\t\tif (listen(socket_, 5) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;listen failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\tstd::cout &lt;&lt; &quot;listen on port: &quot; &lt;&lt; kPort &lt;&lt; std::endl;\t\t// (4)\t\twhile (true)\t\t&#123;\t\t\tstruct sockaddr_in addr_c = &#123; 0 &#125;;\t\t\tint addr_len = sizeof(addr_c);\t\t\tSOCKET s = accept(socket_, reinterpret_cast&lt;sockaddr*&gt;(&amp;addr_c), &amp;addr_len);\t\t\tif (s == SOCKET_ERROR) &#123;\t\t\t\tstd::cout &lt;&lt; &quot;accept failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\tbreak;\t\t\t&#125;\t\t\tstd::cout &lt;&lt; &quot;new connection&quot; &lt;&lt; endl;\t\t\t// (5)\t\t\t// æ­¤å¤„ä½¿ç”¨whileå¾ªç¯sendï¼Œè¯¦è§ ä¸‰ã€æµåè®®\t\t\tint left = kHelloServer.length();\t\t\tint idx = 0;\t\t\twhile (left &gt; 0) &#123;\t\t\t\tint err = send(s, (const char*)(kHelloServer.c_str() + idx), left, 0);\t\t\t\tif (err == SOCKET_ERROR) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;send failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t\tleft -= err;\t\t\t\tidx += err;\t\t\t\tstd::cout &lt;&lt; &quot;bytes sent: &quot; &lt;&lt; err &lt;&lt; std::endl;\t\t\t&#125;\t\t&#125;\t&#125; while (false);\t// (6)\tclosesocket(socket_);\tclosesocket(s_);\tWSACleanup();\treturn 0;&#125;\n\nå®¢æˆ·ç«¯å®¢æˆ·ç«¯å¤§è‡´æµç¨‹ï¼š\n\nåˆ›å»ºSocket\nconnectæœåŠ¡ç«¯\nrecvæ¥æ”¶æ•°æ®ä»æœåŠ¡ç«¯(ä¹Ÿå¯ä»¥send)\nclose socket\n\n#include &lt;iostream&gt;#include &lt;winsock2.h&gt;#include &lt;assert.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const std::string kIP = &quot;127.0.0.1&quot;;const u_short kPort = 10001;const std::string kHelloClient = &quot;hello, I&#x27;m client.&quot;;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket_ = INVALID_SOCKET;\tdo \t&#123;\t\t// (1)\t\tsocket_ = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (socket_ == INVALID_SOCKET) &#123;\t\t\tstd::cout &lt;&lt; &quot;create socket failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = inet_addr(kIP.c_str());\t\taddr.sin_port = htons(kPort);\t\tif (connect(socket_, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;connect failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (3)\t\tchar buf[100] = &#123; 0 &#125;;\t\tint err = recv(socket_, buf, 100, 0);\t\tif (err &gt; 0) &#123;\t\t\tstd::cout &lt;&lt; &quot;recv: &quot; &lt;&lt; buf &lt;&lt; std::endl;\t\t&#125;\t\telse if (err == 0) &#123;\t\t\tstd::cout &lt;&lt; &quot;connection closed.&quot; &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\telse &#123;\t\t\tstd::cout &lt;&lt; &quot;recv failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t&#125; while (false);\t// (4)\tclosesocket(socket_);\tWSACleanup();\treturn 0;&#125;\n\næµåè®®ç”±äºå¤§å¤šæ•°é¢å‘è¿æ¥çš„åè®®ï¼ˆå¦‚TCPï¼‰ä¹Ÿæ˜¯æµåè®®ã€‚åœ¨æµåè®®ä¸­ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…å¯ä»¥å°†æ•°æ®åˆ†è§£æˆå°å—æ•°æ®ï¼Œä¹Ÿå¯ä»¥å°†æ•°æ®åˆå¹¶æˆå¤§å—æ•°æ®ã€‚å¯¹äºæµå¥—æ¥å­—ä¸Šæ”¶å‘æ•°æ®æ‰€æœ‰ç”¨çš„å‡½æ•°ï¼ˆå¦‚send, recvï¼‰ï¼Œéƒ½ä¸èƒ½ä¿è¯ä¸€å®šæŒ‰ç…§æŒ‡å®šçš„æ•°æ®é‡è¿›è¡Œè¯»å–æˆ–å†™å…¥ã€‚\næ¯”å¦‚ç”¨sendå‘é€ä¸€ä¸ªæœ‰1024å­—èŠ‚çš„å­—ç¬¦ç¼“å†²åŒºæ—¶ï¼Œsendå‡½æ•°å¯èƒ½è¿”å›çš„å·²å‘å‡ºçš„å­—èŠ‚æ•°å°‘äº1024ã€‚\né’ˆå¯¹è¿™ç§æƒ…å†µï¼Œè¦ä¿è¯ç¼“å†²åŒºæ‰€æœ‰æ•°æ®éƒ½è¢«å‘é€å‡ºå»ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„ä»£ç ï¼š\nint left = kHelloServer.length();int idx = 0;while (left &gt; 0) &#123;\tint err = send(s, (const char*)(kHelloServer.c_str() + idx), left, 0);\tif (err == SOCKET_ERROR) &#123;\t\tstd::cout &lt;&lt; &quot;send failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\tbreak;\t&#125;\tleft -= err;\tidx += err;\tstd::cout &lt;&lt; &quot;bytes sent: &quot; &lt;&lt; err &lt;&lt; std::endl;&#125;\n\nå¯¹äºæ¥æ”¶æ•°æ®æ¥è¯´ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿéƒ½æ˜¯å¾ªç¯çš„ã€ä¸é—´æ–­çš„æ¥æ”¶æ•°æ®ï¼Œå¾ˆå°‘æœ‰ä¸Šé¢ç¬¬äºŒèŠ‚ä¾‹å­ä¸­çš„ï¼Œåªæ¥æ”¶ä¸€æ¬¡çš„æƒ…å†µã€‚å¦‚ä½•ç¡®ä¿æ¥æ”¶åˆ°ä¸€ä¸ªå®Œæ•´çš„ã€ç¬¦åˆç‰¹å®šæ ¼å¼çš„æ•°æ®åŒ…ï¼Œè¿™æ˜¯éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["å¥—æ¥å­—I/Oæ¨¡å‹"]},{"title":"è½¯ä»¶å¼€å‘ä¸­å¸¸ç”¨çš„æ•°å€¼ï¼šè—åœ¨ä»£ç é‡Œçš„æ•°å­—å¯†ç ","url":"/post/679969051.html","content":"\n  0c2e8fc22e23fc6a95492c4a31d13ed2a8992ce16f749d3a8a5296b50a931eee3065cf3554c0e9e02493169e3f78b73874a8594736170809baa4000cd20b16ad478fdd00fb6af98312bece6e3497f24596971e6e28ebc52a363bd90c32b107509249c036506d467be4f91fb7af9f0dfae7284dbfde3efcbc1337ffa8364322f935d1bfc9c098bbdd822229e58649fa278e09ba66d9c00aa56261f11327d79444630086b1c876c91fee50d8d0ba95b37a0efeb2294f5eed3fefc3cbe4a76f034ae46baa08245c6ef294172a589e25cbc56ada59e0eaaff50c0acb89d24c994df0871adc1795e5d94cea1f959656059917877213076b49b45f5679c5efbb8cd9a821b45f62bbdf18d5e526eafc7cfcc58555126a5e035a5cfb3b0774b4982d4417df39d91f57d397032c0f536032dbe0afb766e3d78d224112e3b743be183e10e5d904879f097df05a1727e4ab12d6e6658d53440aa7ba68bd885d7ba292827d53af9a39318229b58ad5a8176763c33b7b2a43206422a63bd30b49891ff7ec8c6bc40c9f6f407323ae6bfe5d8cb7b008c129ad56b9b7d27f59da30072125de7f9c9d7dd6826bcea1216dd055306054b039342d87d660aa3abac3f2de4de65d060af35364e1285b49d7fe0989557ccc429f5274136eb45ae22d207afcee1eb8c830a81125e79c17eca05a5d35091bd29a6753fdaec0f82d2294d1c02b58282bdf839cae5a9d21724a452a91229dcc3780556155922d41323ed98322c81aed55c8b689ab658f72a10f7f833380c1bdd9a9f07f4a83c5c2790dc9ab8786b4661f425a7ccce83fd5a405604fd8ec6ddd4d4fda9158e999ccd99cfff81328e0b0c7c3ea0af11d508a18d2b10aa3953e76b4eba60f5dcd149de36439bcdce73999ad3a8cd106a64675ce02680676fd3a9f3c9dfc5b18efe29a7cbc75a916cc4886cad065c735591a749299b1ebf0a893e14c13fea6d729ba4e1d608b3e815742b71fc756079f5ad1bfb4fe8ff34e03cf7c8b355df49d51da9606fa3687dfbf7dbe0629d76f2aa3a509793f51c21c8e80dbeae383e97e7b58b146aa9c2d6a126e10bc23bb6c2e85e3bebaa4f45ff894ca5da3c938a3856452119b97c934c3d10af2fce30878cffb66dee32e9db46f373e03a77b7b169b1cc5162e1de6a0a3d9c6cb6b288ab96a52f4343cf1106022912c4cba4ba5ea0706303ca5244d5d8d14f116c80d0032a79252b7e31336eee77e8f9756bf537b4114afc0b7e82bbc4f701ca5ae9c38e0341d0e557d7f2704d2e6f8c4c0b31fce70747b81b10a542a6bd25bc2036cc860c5bd6ced2f3e47455c602b1a609233dba7851c3eafdfff24155e7fdfb28de09f95bf0ef8ae5776defb70f8e072750638b334f54bc1ff563cc64b65aeb97c1dae9fd68a0819fce577e8fa7a962eaeb924f404ec7af48fdd27751d1c7d0cf54306e8e0d4b2b245569557fca7df5c1274471708aa5f8957636eeae64b18c311d0b36a970f345d43eda55431ccd05187644b850c8e9827fa228ee573e13ad63ce35752a45446f9129dbde144f6ac4997e5bc63c51955c7279debe0ebaad0b94526b970ebfd164f6424a177446bdb5c1ae4e572b1be1d8a3b5245765bd4ca9a7eef6f8d9ad287ad1b899815267136d7e156895dcb1a7397d1646ad081bd5712a9ea98ab65237823682d1e64f90850537e606822d0bfc43fb4469d4ebe0d50f0e2f570f9f54de4b9e093e5eb9e2e4b8c3785abbe18c8efb9d8c318c742af632cafa6cbfc5cc7c997cabf4d0d10d2b73b93cece322f63a21294abe1565f03e259199d0365d554c289b8fc7f0386fe74e57e66738d2872952162791284ea916bc65a58154c10289d846f89200e42b8ffa7c61edf75530074c923e4f04d9308ca7b46d5d5d93065a0091b5cd47cac621f67a49a9546253918d52b2bd60aafe87addaf7f1b1d3716ac640dcdc68162f75067f2e0929d9cf95e2106cd8b808bb0883691b9\n  \n    \n      \n      \n        è¯·è¾“å…¥å¯†ç \n      \n    \n  \n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"æ·±å…¥ç†è§£C++è™šå‡½æ•°","url":"/post/3162890435.html","content":"æœ¬æ–‡ä¸»è¦ä»‹ç» C++è™šå‡½æ•°çš„åº•å±‚å®ç°ï¼Œè™šææ„å‡½æ•°çš„ä½œç”¨ï¼Œè™šå‡½æ•°è¡¨çš„æ•°æ®ç»“æ„åŠå­˜å‚¨æ–¹å¼ï¼Œä»¥åŠ__declspec(novtable)çš„ä½œç”¨ã€‚\n\n\nè™šå‡½æ•°ä»‹ç»C++ä¸­çš„è™šå‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥å®ç°å¤šæ€ï¼ˆé¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼‰çš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®ç°å¤šæ€çš„é”™è¯¯ä¾‹å­ï¼š\n// åŸºç±»//class Base &#123;public:\tBase() &#123;\t\tprintf(&quot;Call Base::Base()\\n&quot;);\t&#125;\t~Base() &#123;\t&#125;\tvoid Name() &#123;\t\tprintf(&quot;Call Base::Name()\\n&quot;);\t&#125;&#125;;// æ´¾ç”Ÿç±»//class Derive : public Base &#123;public:\tDerive() &#123;\t\tprintf(&quot;Call Derive::Derive()\\n&quot;);\t&#125;\t~Derive() &#123;\t&#125;\tvoid Name() &#123;\t\tprintf(&quot;Call Derive::Name()\\n&quot;);\t&#125;&#125;;int main()&#123;\tBase* pBase = new Derive();\tpBase-&gt;Name();\tdelete pBase;    return 0;&#125;\n\nç¨‹åºè¾“å‡ºï¼š\nCall Base::Base()Call Derive::Derive()Call Base::Name()\n\nè¾“å‡ºå†…å®¹çš„ç¬¬ 3 è¡Œä¸ºï¼šCall Base::Name()ï¼Œå¹¶ä¸æ˜¯æœŸæœ›çš„Call Derive::Name()ã€‚å› ä¸ºvoid Name()å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œæ‰€ä»¥pBase-&gt;Name()è°ƒç”¨çš„æ˜¯åŸºç±»çš„ Name()å‡½æ•°ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„æ´¾ç”Ÿç±» Derive çš„ Name()å‡½æ•°ã€‚ å¦‚æœå°†åŸºç±»ä¸­void Name()æ”¹æˆè™šå‡½æ•°virtual void Name()ï¼Œç¨‹åºè¾“å‡ºå°±ä¼šå’Œæˆ‘ä»¬æœŸæœ›çš„ä¸€æ ·ï¼š\n// åŸºç±»//class Base &#123;public:\tBase() &#123;\t\tprintf(&quot;Call Base::Base()\\n&quot;);\t&#125;\t~Base() &#123;\t\tprintf(&quot;Call Base::~Base()\\n&quot;);\t&#125;\tvirtual void Name() &#123;\t\tprintf(&quot;Call Base::Name()\\n&quot;);\t&#125;&#125;;\n\nè™šææ„å‡½æ•°virtualä¸ä»…å¯ä»¥ä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿®é¥°ææ„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è™šææ„å‡½æ•°ã€‚ ä¸‹é¢çš„ä¾‹å­ä¸­çš„åŸºç±»çš„ææ„å‡½æ•°æ²¡æœ‰ä½¿ç”¨ virtual ä¿®é¥°ï¼Œæˆ‘ä»¬å…ˆæ‰§è¡Œç¨‹åºï¼Œè§‚å¯Ÿè¿è¡Œç»“æœï¼ˆç±»ä¼¼ä¸Šé¢çš„ç¨‹åºï¼Œåªæ˜¯åœ¨ææ„å‡½æ•°ä¸­å¤šåŠ å…¥äº†è¾“å‡ºæ‰“å°è¯­å¥ï¼‰ã€‚\n// åŸºç±»//class Base &#123;public:\tBase() &#123;\t\tprintf(&quot;Call Base::Base()\\n&quot;);\t&#125;\t~Base() &#123;\t\tprintf(&quot;Call Base::~Base()\\n&quot;);\t&#125;\tvirtual void Name() &#123;\t\tprintf(&quot;Call Base::Name()\\n&quot;);\t&#125;&#125;;// æ´¾ç”Ÿç±»//class Derive : public Base &#123;public:\tDerive() &#123;\t\tprintf(&quot;Call Derive::Derive()\\n&quot;);\t&#125;\t~Derive() &#123;\t\tprintf(&quot;Call Derive::~Derive()\\n&quot;);\t&#125;\tvoid Name() &#123;\t\tprintf(&quot;Call Derive::Name()\\n&quot;);\t&#125;&#125;;int main()&#123;\tBase* pBase = new Derive();\tpBase-&gt;Name();\tdelete pBase;    return 0;&#125;\n\nç¨‹åºè¾“å‡ºï¼š\nCall Base::Base()Call Derive::Derive()Call Derive::Name()Call Base::~Base()\n\nä»è¾“å‡ºå†…å®¹çš„ç¬¬ 4 è¡Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œdelete pBaseè¯­å¥åªæœ‰åŸºç±» Base ç±»çš„ææ„å‡½æ•°è¢«è°ƒç”¨äº†ï¼Œè€Œæ´¾ç”Ÿç±» Derive çš„ææ„å‡½æ•°å´æ²¡æœ‰è¢«è°ƒç”¨ã€‚å¦‚æœæ­¤æ—¶æ´¾ç”Ÿç±» Derive ä¸­æœ‰éœ€è¦åœ¨ææ„å‡½æ•°æ‰§è¡Œçš„ä»£ç ï¼ˆå¦‚å†…å­˜é‡Šæ”¾ï¼Œå¥æŸ„å…³é—­ç­‰ï¼‰ï¼Œè¿™äº›ä»£ç å°†ä¸ä¼šæ‰§è¡Œï¼Œæœ‰å¯èƒ½å°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€å¥æŸ„æ³„æ¼ã€é€»è¾‘é”™è¯¯ç­‰é—®é¢˜ã€‚\næ­£ç¡®çš„åšæ³•æ˜¯ï¼šä½¿ç”¨ virtual ä¿®é¥°åŸºç±»çš„ææ„å‡½æ•°ï¼Œå³è™šææ„å‡½æ•°ã€‚\n// åŸºç±»//class Base &#123;public:\tBase() &#123;\t\tprintf(&quot;Call Base::Base()\\n&quot;);\t&#125;\tvirtual ~Base() &#123;\t\tprintf(&quot;Call Base::~Base()\\n&quot;);\t&#125;\tvirtual void Name() &#123;\t\tprintf(&quot;Call Base::Name()\\n&quot;);\t&#125;&#125;;\n\næ­¤æ—¶ç¨‹åºè¾“å‡ºä¸ºï¼š\nCall Base::Base()Call Derive::Derive()Call Derive::Name()Call Derive::~Derive()Call Base::~Base()\n\nè°ƒç”¨delete pBaseä¹‹åï¼Œå…ˆæ‰§è¡Œäº†æ´¾ç”Ÿç±» Derive çš„ææ„å‡½æ•°ï¼Œç„¶åæ‰§è¡ŒåŸºç±» Base çš„ææ„å‡½æ•°ã€‚\n\nåœ¨ã€ŠC++API è®¾è®¡ã€‹ä¸€ä¹¦ä¸­æœ‰æ˜ç¡®çš„è¯´åˆ°ï¼šâ€œå¦‚æœå¸Œæœ›ä¸€ä¸ªç±»å¯ä»¥è¢«ç»§æ‰¿ï¼Œé‚£ä¹ˆå°±åº”è¯¥å°†å®ƒçš„ææ„å‡½æ•°ä½¿ç”¨ virtual ä¿®é¥°ï¼›åè¿‡æ¥å¯ä»¥ç†è§£ä¸ºï¼Œå¦‚æœä¸€ä¸ªç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šçš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»æ˜¯è¢«è®¾è®¡ä¸ºä¸å¯ç»§æ‰¿çš„ã€‚â€\n\nè™šå‡½æ•°çš„å®ç°åŸç†å®ç°åŸç†C++çš„è™šå‡½æ•°æ˜¯ä½¿ç”¨è™šå‡½æ•°è¡¨ï¼ˆå³æŒ‡é’ˆæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆçš„æŒ‡é’ˆï¼‰æ¥å®ç°çš„ã€‚ åªè¦åœ¨ç±»ä¸­å£°æ˜äº†è™šå‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¼šåœ¨ç±»çš„å¯¹è±¡ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œä½†ä¸€ä¸ªå¯¹è±¡æœ€å¤šåªæœ‰ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œä¸ç®¡è¿™ä¸ªç±»å£°æ˜äº†å¤šå°‘ä¸ªè™šå‡½æ•°ã€‚è™šå‡½æ•°è¡¨æ˜¯é’ˆå¯¹äºç±»çš„å¯¹è±¡çš„ã€‚\nè™šå‡½æ•°è¡¨ï¼ˆæŒ‡é’ˆï¼‰å­˜å‚¨ä½ç½®ä¸åŒçš„ç¼–è¯‘å™¨å°†è‡ªåŠ¨ç”Ÿæˆçš„è™šå‡½æ•°è¡¨æŒ‡é’ˆå­˜æ”¾çš„ä½ç½®ä¸åŒï¼Œæœ‰çš„å­˜æ”¾åœ¨ç±»å¯¹è±¡æ‰€å å†…å­˜çš„èµ·å§‹ä½ç½®ï¼Œæœ‰çš„å­˜æ”¾åœ¨ç±»å¯¹è±¡æ‰€å å†…å­˜çš„æœ«å°¾ã€‚ å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç æ¥åˆ¤æ–­ï¼š\n// è¿”å›å€¼ï¼š ture  - è™šå‡½æ•°æŒ‡é’ˆå­˜æ”¾åœ¨å¯¹è±¡å†…å­˜èµ·å§‹ä½ç½®//         false - è™šå‡½æ•°æŒ‡é’ˆå­˜æ”¾åœ¨å¯¹è±¡å†…å­˜æœ«å°¾ä½ç½®//bool VirtualTableAtFirst() &#123;\tclass _C &#123;\tpublic:\t\tchar _i;\t\tvirtual void _f() &#123;&#125;\t&#125;;\t_C c;\tchar * p1 = reinterpret_cast&lt;char*&gt;(&amp;c);\tchar * p2 = reinterpret_cast&lt;char*&gt;(&amp;c._i);\treturn p1 != p2;&#125;\n\né€šè¿‡ MSVC2015 ç¼–è¯‘è¿è¡Œï¼Œè¿”å›true, è¯´æ˜ MSVC ç¼–è¯‘å™¨æ˜¯å°†è™šå‡½æ•°è¡¨æŒ‡é’ˆæ”¾ç½®åœ¨ç±»å¯¹è±¡å†…å­˜çš„èµ·å§‹ä½ç½®å¤„ã€‚\nè™šå‡½æ•°è¡¨å­˜å‚¨æ–¹å¼æ—¢ç„¶çŸ¥é“äº† C++æ˜¯ä½¿ç”¨è™šå‡½æ•°è¡¨çš„å½¢å¼æ¥å®ç°è™šå‡½æ•°çš„ï¼Œé‚£ä¸ªè™šå‡½æ•°è¡¨ä¸­çš„æ•°æ®æ˜¯ä»¥ä½•ç§å½¢å¼æ¥å­˜å‚¨çš„äº†ï¼Ÿ ç°åœ¨æˆ‘ä»¬æ ¹æ®ç±»çš„ç»§æ‰¿æ–¹å¼çš„ä¸åŒæ¥åˆ†åˆ«è¯´æ˜ã€‚\nå•ç»§æ‰¿æ— é‡è½½ç±»ç»“æ„å¦‚å›¾ï¼ŒDerive ç»§æ‰¿äº Baseï¼Œä½† Derive æ²¡æœ‰é‡è½½ Base ç±»ä¸­çš„ä»»ä½•å‡½æ•°ã€‚\n\n\néœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå‡½æ•° f(), g(), h(), f1(), g1(), h1() å‡ä¸ºè™šå‡½æ•°ï¼Œè¿™ä¸ªåœ¨å›¾ä¸Šæ²¡æœ‰æ˜ç¡®çš„å†™å‡ºæ¥ï¼Œåé¢çš„å›¾ä¹Ÿæ˜¯ä¸€æ ·ã€‚\n\n\n\nè¿™æ—¶Base b; å¯¹è±¡ b çš„è™šå‡½æ•°è¡¨ä¸ºï¼š\nDerive d; å¯¹è±¡ d çš„è™šå‡½æ•°è¡¨ä¸ºï¼š\nå•ç»§æ‰¿æœ‰é‡è½½Derive é‡è½½ Base ç±»ä¸­çš„ f()å‡½æ•°ï¼š\nè¿™æ—¶Base b; å¯¹è±¡ b çš„è™šå‡½æ•°è¡¨ä¸å˜ï¼Œæ— è®ºç»§æ‰¿äºå®ƒçš„æ´¾ç”Ÿç±»å¦‚ä½•é‡è½½ï¼Œéƒ½ä¸ä¼šå½±å“åŸºç±»çš„è™šå‡½æ•°ï¼š\nè€Œ Derive d; å¯¹è±¡ d çš„è™šå‡½æ•°è¡¨ä¸ºï¼š\næ´¾ç”Ÿç±»ä¸­é‡è½½åŸºç±»çš„ f()å‡½æ•°æŒ‡é’ˆæ›¿æ¢äº†åŸæ¥åŸºç±»ä¸­è™šå‡½æ•° Base::f()çš„æŒ‡é’ˆï¼› æ´¾ç”Ÿç±»ä¸­å…¶ä»–çš„è™šå‡½æ•°å­˜æ”¾åœ¨åŸºç±»è™šå‡½æ•°ä¹‹åã€‚\nå¤šç»§æ‰¿æ— é‡è½½\næ­¤æ—¶ï¼ŒDerive d; å¯¹è±¡ d çš„è™šå‡½æ•°è¡¨ä¸ºï¼š\næ´¾ç”Ÿç±»è‡ªå·±çš„è™šå‡½æ•°å­˜æ”¾åœ¨ç¬¬ä¸€ä¸ªåŸºç±»çš„è™šå‡½æ•°è¡¨çš„æœ€åé¢ã€‚\nå¤šç»§æ‰¿æœ‰é‡è½½\næ­¤æ—¶ï¼ŒDerive d; å¯¹è±¡ d çš„è™šå‡½æ•°è¡¨ä¸ºï¼š\nè™šå‡½æ•°è¡¨çš„åº”ç”¨æˆ‘ä»¬çŸ¥é“åœ¨ C++ä¸­è¦è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‹å‘˜ï¼ˆfriendï¼‰çš„æ–¹å¼ã€‚ä½†å…¶å®å¦‚æœæˆ‘ä»¬çŸ¥é“ç±»çš„å®šä¹‰ï¼Œå®Œå…¨å¯ä»¥æ ¹æ®è¯¥ç±»å¯¹è±¡çš„å†…å­˜å¸ƒå±€æ¥ç›´æ¥è°ƒç”¨å®ƒçš„ç§æœ‰å‡½æ•°ã€‚\nä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨è™šå‡½æ•°è¡¨çš„æ–¹å¼æ¥è°ƒç”¨è¯¥ç±»çš„ç§æœ‰è™šå‡½æ•°ã€‚\nç°æœ‰å¦‚ä¸‹Testç±»ï¼Œæä¾›äº†ä¸€ä¸ªç§æœ‰è™šå‡½æ•°virtual void Func()ï¼š\nclass Test &#123;public:\tTest() &#123;&#125;\tvirtual~ Test() &#123;&#125;private:\tvirtual void Func() &#123;\t\tprintf(&quot;Private Function\\n&quot;);\t&#125;&#125;;\n\nç°åœ¨æˆ‘ä»¬ä½¿ç”¨è™šå‡½æ•°è¡¨æ¥è°ƒç”¨Funcæˆå‘˜å‡½æ•°ï¼š\ntypedef void(*PFN_Func)();int main()&#123;\tTest t;\tunsigned long **VirtualTable = (unsigned long **)(&amp;t);\tunsigned long FuncAddr = VirtualTable[0][1];\tPFN_Func pfnFunc = (PFN_Func)FuncAddr;\tif (pfnFunc) &#123;\t\tpfnFunc();\t&#125;    return 0;&#125;\n\næˆ‘ä»¬çŸ¥é“è™šå‡½æ•°è¡¨å…¶å®å°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚å› ä¸ºç¤ºä¾‹ä¸­çš„Testç±»æ²¡æœ‰ç»§æ‰¿äºå…¶ä»–ç±»ï¼Œæ‰€ä»¥ç¬¬ä¸€ç»´åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼›åˆå› Testç±»æœ‰ 2 ä¸ªè™šå‡½æ•°ï¼Œæ•…ç¬¬äºŒç»´æœ‰ 2 ä¸ªå…ƒç´ ï¼Œä¸”Funcæ’åœ¨ç¬¬äºŒä¸ªï¼Œæ‰€ä»¥ç”¨VirtualTable[0][1]æ¥å–Funcå‡½æ•°åœ°å€ã€‚\nå› ä¸ºè¯¥ç¤ºä¾‹è¿è¡Œåœ¨ MSVC ç¼–è¯‘å™¨ç¯å¢ƒï¼Œæ‰€ä»¥é»˜è®¤è®¤ä¸ºè™šå‡½æ•°è¡¨ä½äºç±»å¯¹è±¡å†…å­˜å¸ƒå±€çš„èµ·å§‹ä½ç½®ï¼Œæ•…ç›´æ¥ä½¿ç”¨äº†unsigned long **VirtualTable = (unsigned long **)(&amp;t);ã€‚ä¸¥è°¨çš„åšæ³•åº”è¯¥æ˜¯å…ˆåˆ¤æ–­è™šå‡½æ•°è¡¨æ˜¯å¦ä½äºå¯¹è±¡çš„å†…å­˜å¸ƒå±€èµ·å§‹ä½ç½®ã€‚\n__declspec(novtable)Mircrosoft C++ä¸­æä¾›äº†__declspec(novtable)æ¥ä¿®é¥°ç±»ï¼Œ__declspec(novtable)ä¼šé˜»æ­¢ç¼–è¯‘å™¨ä¸ºè¯¥ç±»ç”Ÿæˆè™šå‡½æ•°è¡¨ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç¼–è¯‘ç”Ÿæˆä»£ç çš„å¤§å°ï¼ŒåŒæ—¶ä¹Ÿçº¦æŸè¯¥ç±»æ— æ³•è¢«å®ä¾‹åŒ–ã€‚\n// novtable.cpp#include &lt;stdio.h&gt;struct __declspec(novtable) X &#123;   virtual void mf();&#125;;struct Y : public X &#123;   void mf() &#123;      printf_s(&quot;In Y\\n&quot;);   &#125;&#125;;int main() &#123;   // X *pX = new X();   // pX-&gt;mf();   // å¯¼è‡´è¿è¡Œæ—¶è®¿é—®å†²çª   Y *pY = new Y();   pY-&gt;mf();&#125;\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘ ç¼–ç¨‹åŸºç¡€"]},{"title":"Windowså¥—æ¥å­—I/Oæ¨¡å‹(2)-Selectæ¨¡å‹","url":"/post/640627104.html","content":"å¥—æ¥å­—Selectæ¨¡å‹çš„ä¸­å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨ select å‡½æ•°å®ç°å¯¹I&#x2F;Oçš„ç®¡ç†ã€‚\nå¯ä»¥åˆ©ç”¨selectå‡½æ•°åˆ¤æ–­ä¸€ä¸ªæˆ–å¤šä¸ªå¥—æ¥å­—ä¸Šæ˜¯å¦å­˜åœ¨å¾…æ¥æ”¶æ•°æ®ï¼Œæˆ–è€…èƒ½å¦å‘ä¸€ä¸ªæˆ–å¤šä¸ªå¥—æ¥å­—å‘é€æ•°æ®ã€‚\nselectå‡½æ•°æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿä¼šé˜»å¡ï¼Œä½†å’Œé˜»å¡æ¨¡å‹ä¸åŒçš„æ˜¯ï¼ŒSelectæ¨¡å‹å¯ä»¥åŒæ—¶ç®¡ç†å¤šä¸ªå¥—æ¥å­—ã€‚\n\n\nselectå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\nint select (  int nfds,                             fd_set FAR * readfds,                 fd_set FAR * writefds,                fd_set FAR * exceptfds,               const struct timeval FAR * timeout  );\n\nç¬¬ä¸€ä¸ªå‚æ•°nfdsä¼šè¢«å¿½ç•¥ã€‚ä¹‹æ‰€ä»¥ä»ç„¶è¦æä¾›è¿™ä¸ªå‚æ•°ï¼Œåªæ˜¯ä¸ºäº†ä¿æŒä¸æ—©æœŸçš„Berkeleyå¥—æ¥å­—åº”ç”¨ç¨‹åºçš„å…¼å®¹ã€‚\nä¸‰ä¸ªfd_setå‚æ•°ï¼šä¸€ä¸ªç”¨äºæ£€æŸ¥å¯è¯»æ€§ï¼ˆreadfdsï¼‰ï¼Œä¸€ä¸ªç”¨äºæ£€æŸ¥å¯å†™æ€§ï¼ˆwritefdsï¼‰ï¼Œå¦ä¸€ä¸ªç”¨äºä¾‹å¤–æ•°æ®ï¼ˆ excepfdsï¼‰ã€‚\nä»æœ¬è´¨ä¸Šè¯´ï¼Œfd_setæ•°æ®ç±»å‹ä»£è¡¨ç€ä¸€ç³»åˆ—ç‰¹å®šå¥—æ¥å­—çš„é›†åˆã€‚\nå…¶ä¸­ï¼Œreadfdsé›†åˆåŒ…æ‹¬ç¬¦åˆä¸‹è¿°ä»»ä½•ä¸€ä¸ªæ¡ä»¶çš„å¥—æ¥å­—ï¼š\n\næœ‰æ•°æ®å¯ä»¥è¯»å…¥ã€‚\nè¿æ¥å·²ç»å…³é—­ã€é‡ç½®æˆ–ä¸­æ­¢ã€‚(å¯ä»¥ç”¨æ¥åˆ¤æ–­å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯ç¨‹åºæ˜¯å¦é€€å‡ºäº†)\nå‡å¦‚å·²ç»è°ƒç”¨äº†listenï¼Œè€Œä¸”ä¸€ä¸ªè¿æ¥æ­£åœ¨ç­‰å¾…ä¸­ï¼Œé‚£ä¹ˆacceptå‡½æ•°è°ƒç”¨æˆåŠŸã€‚\n\nwritefdsé›†åˆåŒ…æ‹¬ç¬¦åˆä¸‹è¿°ä»»ä½•ä¸€ä¸ªæ¡ä»¶çš„å¥—æ¥å­—ï¼š\n\næœ‰æ•°æ®å¯ä»¥å‘å‡ºã€‚\nå¦‚æœæ­£åœ¨å¤„ç†ä¸€ä¸ªéé˜»å¡çš„connectæ“ä½œï¼Œåˆ™è¿æ¥æˆåŠŸã€‚\n\næœ€åï¼Œexceptfdsé›†åˆåŒ…æ‹¬ç¬¦åˆä¸‹è¿°ä»»ä½•ä¸€ä¸ªæ¡ä»¶çš„å¥—æ¥å­—ï¼š\n\nå‡å¦‚å·²å®Œæˆäº†å¯¹ä¸€ä¸ªéé˜»å¡è¿æ¥è°ƒç”¨çš„å¤„ç†ï¼Œè¿æ¥å°è¯•å°±ä¼šå¤±è´¥ã€‚\næœ‰å¸¦å¤–ï¼ˆout-of-bandï¼ŒOOBï¼‰æ•°æ®å¯ä¾›è¯»å–ã€‚\n\nä¾‹å¦‚ï¼Œå‡å®šæˆ‘ä»¬æƒ³æµ‹è¯•ä¸€ä¸ªå¥—æ¥å­—æ˜¯å¦â€œå¯è¯»â€ï¼Œå¿…é¡»å°†è‡ªå·±çš„å¥—æ¥å­—å¢æ·»åˆ°readfdsé›†åˆï¼Œå†ç­‰å¾…selectå‡½æ•°å®Œæˆã€‚selectå®Œæˆä¹‹åï¼Œå¿…é¡»åˆ¤æ–­è‡ªå·±çš„å¥—æ¥å­—æ˜¯å¦ä»ä¸ºreadfdsé›†åˆçš„ä¸€éƒ¨åˆ†ã€‚è‹¥ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¾¿è¡¨æ˜è¯¥å¥—æ¥å­—â€œå¯è¯»â€ï¼Œå¯ç«‹å³ç€æ‰‹ä»å®ƒä¸Šé¢è¯»å–æ•°æ®ã€‚åœ¨ä¸‰ä¸ªå‚æ•°ä¸­ï¼ˆreadfdsã€writedfsså’Œexceptfdsï¼‰ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªä¸èƒ½ä¸ºç©ºå€¼ï¼åœ¨ä»»ä½•ä¸ä¸ºç©ºçš„é›†åˆä¸­ï¼Œå¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¥—æ¥å­—å¥æŸ„ï¼›å¦åˆ™ï¼Œselectå‡½æ•°ä¾¿æ²¡æœ‰ä»»ä½•ä¸œè¥¿å¯ä»¥ç­‰å¾…ã€‚\næœ€åä¸€ä¸ªå‚æ•°timeoutå¯¹åº”çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªtimevalç»“æ„ï¼Œç”¨äºè®¾ç½®selectæœ€å¤šç­‰å¾…çš„æ—¶é—´ã€‚å¦‚timeoutæ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œé‚£ä¹ˆselectè°ƒç”¨ä¼šæ— é™æœŸåœ°â€œé”å®šâ€ä¸‹å»ï¼Œç›´åˆ°è‡³å°‘æœ‰ä¸€ä¸ªæè¿°ç¬¦ç¬¦åˆæŒ‡å®šçš„æ¡ä»¶åç»“æŸã€‚\nå¯¹timevalç»“æ„çš„å®šä¹‰å¦‚ä¸‹ï¼š\nstruct timeval &#123;\tlong tv_sec;\tlong tv_usec;&#125; ;\n\nè‹¥å°†è¶…æ—¶å€¼è®¾ç½®ä¸º(0,0)ï¼Œè¡¨æ˜selectä¼šç«‹å³è¿”å›ï¼Œå…è®¸åº”ç”¨ç¨‹åºå¯¹selectæ“ä½œè¿›è¡Œâ€œè½®è¯¢â€ã€‚å‡ºäºå¯¹æ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼Œåº”é¿å…è¿™æ ·çš„è®¾ç½®ã€‚\nselectæˆåŠŸå®Œæˆåï¼Œä¼šåœ¨fd_setç»“æ„ä¸­ï¼Œè¿”å›åˆšå¥½æœ‰æœªå®Œæˆçš„I&#x2F;Oæ“ä½œçš„æ‰€æœ‰å¥—æ¥å­—å¥æŸ„çš„æ€»é‡ã€‚è‹¥è¶…è¿‡timevalè®¾å®šçš„æ—¶é—´ï¼Œä¾¿ä¼šè¿”å›0ã€‚ä¸ç®¡ç”±äºä»€ä¹ˆåŸå› ï¼Œå‡å¦‚selectè°ƒç”¨å¤±è´¥ï¼Œéƒ½ä¼šè¿”å›SOCKET_ERRORã€‚ç”¨selectå¯¹å¥—æ¥å­—è¿›è¡Œç›‘è§†ä¹‹å‰ï¼Œåœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¿…é¡»å°†å¥—æ¥å­—å¥æŸ„åˆ†é…ç»™ä¸€ä¸ªé›†åˆï¼Œè®¾ç½®å¥½ä¸€ä¸ªæˆ–å…¨éƒ¨è¯»ã€å†™ä»¥åŠä¾‹å¤–fd_setç»“æ„ã€‚å°†ä¸€ä¸ªå¥—æ¥å­—åˆ†é…ç»™ä»»ä½•ä¸€ä¸ªé›†åˆåï¼Œå†æ¥è°ƒç”¨selectï¼Œä¾¿å¯çŸ¥é“ä¸€ä¸ªå¥—æ¥å­—ä¸Šæ˜¯å¦æ­£åœ¨å‘ç”Ÿä¸Šè¿°çš„I&#x2F;Oæ´»åŠ¨ã€‚\nWinsockæä¾›ä¸‹åˆ—å®å¯¹fd_setè¿›è¡Œå¤„ç†ä¸æ£€æŸ¥ï¼š\nFD_CLR(s, *set);      ä»setä¸­åˆ é™¤å¥—æ¥å­—sã€‚FD_ISSET(s, *set);    æ£€æŸ¥sæ˜¯å¦seté›†åˆçš„ä¸€åæˆå‘˜ï¼›è¿”å›TRUEæˆ–FALSEã€‚FD_SET(s, *set);      å°†å¥—æ¥å­—såŠ å…¥é›†åˆsetã€‚FD_ZERO(*set);        å°†setåˆå§‹åŒ–æˆç©ºé›†åˆã€‚\n\nç¤ºä¾‹æœåŠ¡ç«¯æœåŠ¡ç«¯ä»£ç æ¯”ä¹‹å‰ä»‹ç»çš„â€œé˜»å¡æ¨¡å‹â€ä¸­çš„ç¤ºä¾‹ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚\næä¾›å¦‚ä¸‹åŠŸèƒ½ï¼š\n\nç®¡ç†å¤šä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ã€‚\nå¯¹æ¯ä¸ªæ–°è¿æ¥çš„å®¢æˆ·ç«¯å‘é€â€œHelloï¼ŒIâ€™m serverâ€ä¿¡æ¯ã€‚\nåœ¨å®¢æˆ·ç«¯ç¨‹åºé€€å‡ºæ—¶è‡ªåŠ¨å…³é—­è¿æ¥ç­‰åŠŸèƒ½ã€‚\n\n#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;#include &lt;vector&gt;using namespace std;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const u_short kPort = 10001;const std::string kHelloServer = &quot;hello, I&#x27;m server.&quot;;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket_ = INVALID_SOCKET;\tstd::vector&lt;SOCKET&gt; clients;\tdo\t&#123;\t\t// (1)\t\tsocket_ = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (socket_ == INVALID_SOCKET) &#123;\t\t\tstd::cout &lt;&lt; &quot;create socket failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = htonl(INADDR_ANY);\t\taddr.sin_port = htons(kPort);\t\tif (bind(socket_, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;bind failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (3)\t\tif (listen(socket_, 5) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;listen failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\tstd::cout &lt;&lt; &quot;listen on port: &quot; &lt;&lt; kPort &lt;&lt; std::endl;\t\tfd_set fd_read;\t\twhile (true) // TODO æœªå¤„ç†ä½•æ—¶é€€å‡ºçš„é—®é¢˜\t\t&#123;\t\t\t// (4)\t\t\tFD_ZERO(&amp;fd_read);\t\t\tFD_SET(socket_, &amp;fd_read);\t\t\tfor (std::vector&lt;SOCKET&gt;::iterator it = clients.begin(); it != clients.end(); ++it)\t\t\t\tFD_SET(*it, &amp;fd_read);\t\t\t// (5)\t\t\ttimeval timeout = &#123; 3, 0 &#125;;\t\t\tint ret = select(0, &amp;fd_read, NULL, NULL, &amp;timeout);\t\t\tif (ret == SOCKET_ERROR) &#123;\t\t\t\tstd::cout &lt;&lt; &quot;select failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\tbreak;\t\t\t&#125;\t\t\t// (6.1)\t\t\t// æ£€æŸ¥æœåŠ¡ç«¯çš„ç›‘å¬socketï¼Œæ˜¯å¦æœ‰æ–°çš„è¿æ¥ç­‰å¾…å»ºç«‹\t\t\tif (FD_ISSET(socket_, &amp;fd_read)) &#123;\t\t\t\t// (7.1)\t\t\t\tstruct sockaddr_in addr_c = &#123; 0 &#125;;\t\t\t\tint addr_len = sizeof(addr_c);\t\t\t\tSOCKET s = accept(socket_, reinterpret_cast&lt;sockaddr*&gt;(&amp;addr_c), &amp;addr_len);\t\t\t\tif (s == SOCKET_ERROR) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;accept failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tclients.push_back(s);\t\t\t\t\tstd::cout &lt;&lt; &quot;new connection&quot; &lt;&lt; std::endl;\t\t\t\t\tint left = kHelloServer.length();\t\t\t\t\tint idx = 0;\t\t\t\t\twhile (left &gt; 0) &#123;\t\t\t\t\t\tint err = send(s, (const char*)(kHelloServer.c_str() + idx), left, 0);\t\t\t\t\t\tif (err == SOCKET_ERROR) &#123;\t\t\t\t\t\t\tstd::cout &lt;&lt; &quot;send failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\t\t\tbreak;\t\t\t\t\t\t&#125;\t\t\t\t\t\tleft -= err;\t\t\t\t\t\tidx += err;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;bytes sent: &quot; &lt;&lt; err &lt;&lt; std::endl;\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t&#125;\t\t\t// (6.2)\t\t\t// æ£€æŸ¥ä¸å®¢æˆ·ç«¯è¿æ¥çš„socketï¼Œæ˜¯å¦æœ‰æ•°æ®å¯ä»¥è¯»å…¥\t\t\tfor (std::vector&lt;SOCKET&gt;::iterator it = clients.begin(); it != clients.end(); ) &#123;\t\t\t\tif (FD_ISSET(*it, &amp;fd_read)) &#123;\t\t\t\t\t// (7.2)\t\t\t\t\tchar buf[100] = &#123; 0 &#125;;\t\t\t\t\tint err = recv(*it, buf, 100, 0);\t\t\t\t\tif (err &gt; 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;recv: &quot; &lt;&lt; buf &lt;&lt; std::endl;\t\t\t\t\t\t++it;\t\t\t\t\t&#125;\t\t\t\t\telse if (err == 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;connection closed.&quot; &lt;&lt; std::endl;\t\t\t\t\t\tclosesocket(*it);\t\t\t\t\t\tit = clients.erase(it);\t\t\t\t\t&#125;\t\t\t\t\telse &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;recv failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\t\tclosesocket(*it);\t\t\t\t\t\tit = clients.erase(it);\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\t++it;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125; // while\t&#125; while (false);\t// (8)\tfor (std::vector&lt;SOCKET&gt;::iterator it = clients.begin(); it != clients.end(); ++it) &#123;\t\tclosesocket(*it);\t&#125;\t// (9)\tclosesocket(socket_);\tWSACleanup();\treturn 0;&#125;\n\nå®¢æˆ·ç«¯å®¢æˆ·ç«¯åœ¨è¿æ¥ä¸ŠæœåŠ¡ç«¯ä¹‹åï¼Œä¾¿å¯ä»¥ä¸é—´æ–­åœ°æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„æ¶ˆæ¯ã€‚\n#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;#include &lt;vector&gt;using namespace std;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const std::string kIP = &quot;127.0.0.1&quot;;const u_short kPort = 10001;const std::string kHelloClient = &quot;hello, I&#x27;m client.&quot;;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket_ = INVALID_SOCKET;\tdo\t&#123;\t\t// (1)\t\tsocket_ = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (socket_ == INVALID_SOCKET) &#123;\t\t\tstd::cout &lt;&lt; &quot;create socket failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = inet_addr(kIP.c_str());\t\taddr.sin_port = htons(kPort);\t\tif (connect(socket_, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;connect failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\tfd_set fd_read;\t\twhile (true)  // TODO æœªå¤„ç†ä½•æ—¶é€€å‡ºçš„é—®é¢˜\t\t&#123;\t\t\t// (3)\t\t\tFD_ZERO(&amp;fd_read);\t\t\tFD_SET(socket_, &amp;fd_read);\t\t\t// (4)\t\t\ttimeval timeout = &#123; 3, 0 &#125;;\t\t\tint ret = select(0, &amp;fd_read, NULL, NULL, &amp;timeout);\t\t\tif (ret == SOCKET_ERROR) &#123;\t\t\t\tstd::cout &lt;&lt; &quot;select failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\tbreak;\t\t\t&#125;\t\t\t// (5)\t\t\tif (FD_ISSET(socket_, &amp;fd_read)) &#123;\t\t\t\tchar buf[100] = &#123; 0 &#125;;\t\t\t\tint err = recv(socket_, buf, 100, 0);\t\t\t\tif (err &gt; 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;recv: &quot; &lt;&lt; buf &lt;&lt; std::endl;\t\t\t\t&#125;\t\t\t\telse if (err == 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;connection closed.&quot; &lt;&lt; std::endl;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;recv failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125; // while\t&#125; while (false);\t// (6)\tclosesocket(socket_);\tWSACleanup();\treturn 0;&#125;\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["å¥—æ¥å­—I/Oæ¨¡å‹"]},{"title":"Windowså¥—æ¥å­—I/Oæ¨¡å‹(5)-å®Œæˆç«¯å£æ¨¡å‹","url":"/post/326824759.html","content":"å‰é¢çš„æ–‡ç« å·²ç»ä»‹ç»äº†å¥—æ¥å­— I&#x2F;O çš„åŒæ­¥æ¨¡å‹ã€WSAAsyncSelectæ¨¡å‹ã€WSAEventSelectæ¨¡å‹ï¼Œåˆ°ç›®å‰ä¸ºæ­¢å¥—æ¥å­—I&#x2F;Oè¿˜å‰©ä¸‹2ä¸ªæ¨¡å‹æ²¡æœ‰ä»‹ç»ï¼šé‡å æ¨¡å‹ï¼Œå®Œæˆç«¯å£æ¨¡å‹ã€‚ \nå¦‚æœç¨‹åºå¯¹æ€§èƒ½å’Œå¹¶å‘è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥ä½¿ç”¨å‰é¢ä»‹ç»çš„WSAEventSelectæ¨¡å‹ï¼›å¦‚æœå¯¹æ€§èƒ½å’Œå¹¶å‘æœ‰è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨æœ¬æ–‡ä»‹ç»çš„å®Œæˆç«¯å£æ¨¡å‹ã€‚\nå› ä¸ºå®Œæˆç«¯å£æ¨¡å‹æ˜¯åŸºäºé‡å æ¨¡å‹çš„ï¼Œä¸”åœ¨æ˜“ç”¨æ€§ã€å¯ä¼¸ç¼©æ€§ç­‰æ–¹é¢éƒ½é«˜äºé‡å æ¨¡å‹ï¼Œåœ¨ä¸€èˆ¬é€‰æ‹©é‡å æ¨¡å‹çš„åœºåˆï¼Œéƒ½å¯ä»¥ç”¨å®Œæˆç«¯å£æ¨¡å‹æ¥æ›¿ä»£ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å®Œæˆç«¯å£æ¨¡å‹ã€‚\nâ€œå®Œæˆç«¯å£æ¨¡å‹â€æ˜¯ Windows ç³»ç»Ÿä¸Šé¢å¥—æ¥å­— I&#x2F;O çš„ç»ˆææ¨¡å‹ï¼Œå¯ä»¥ç”¨å®ƒä»£æ›¿å‰é¢çš„æ‰€æœ‰æ¨¡å‹ã€‚å¦‚æœå¯¹å®Œæˆç«¯å£æ¨¡å‹æœ‰ä¸€ä¸ªå¥½çš„å°è£…ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥â€œä¸€æ‹›é²œï¼Œåƒéå¤©â€ï¼Œå…å»é‡å¤é€ è½®å­çš„éº»çƒ¦ã€‚æ‰€ä»¥è¿™é‡Œå¯¹å®Œæˆç«¯å£çš„æ¨¡å‹çš„ä»‹ç»å’Œæ¯”å‰é¢çš„å‡ ç¯‡ç¯‡å¹…æ›´é•¿ï¼Œç¤ºä¾‹ä»£ç ä¹Ÿæ›´åŠ å¤æ‚å’Œå…¨é¢ã€‚\n\nReactorå’ŒProactoråœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¬åˆ°çš„ä¸¤ç§I&#x2F;Oå¤šè·¯å¤ç”¨çš„æ¨¡å¼ï¼šreactor å’Œ proactorã€‚å¯¹äºè¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«é€šä¿—æ¥è¯´å°±æ˜¯ï¼š\nReactorï¼š èƒ½æ”¶äº†ä½ è·Ÿæˆ‘è¯´ä¸€å£°ã€‚Proactor: ä½ å¸®æˆ‘æœ€å¤šæ”¶åä¸ªå­—èŠ‚ï¼Œæ”¶å¥½äº†è·Ÿæˆ‘è¯´ä¸€å£°ã€‚\n\nWindowsæä¾›çš„å®Œæˆç«¯å£æ¨¡å‹å°±æ˜¯Proactoræ¨¡å¼ï¼›è€Œå¯¹äºLinuxç³»ç»Ÿï¼Œç”±äºæ²¡æœ‰æ“ä½œç³»ç»Ÿå±‚é¢çš„æ”¯æŒï¼Œåªèƒ½ä½¿ç”¨Reactoræ¨¡å¼ï¼Œå¦‚epollç­‰ã€‚\nå®Œæˆç«¯å£æ¨¡å‹ä»‹ç»å®Œæˆç«¯å£æ¨¡å‹è¯´ç™½äº†å°±æ˜¯ï¼Œæ‚¨è¦åšä»€ä¹ˆäº‹æƒ…ï¼ˆå¦‚æ¥æ”¶è¿æ¥AcceptExã€å‘é€æ•°æ®WSASendã€æ¥æ”¶æ•°æ®WSARecvã€è¿æ¥æœåŠ¡ç«¯ConnectExï¼‰ï¼Œæ‚¨å‘Šè¯‰æˆ‘ï¼Œæˆ‘åšå®Œäº†é€šçŸ¥æ‚¨ã€‚è¿™é‡Œçš„â€œæˆ‘â€æŒ‡çš„æ˜¯æ“ä½œç³»ç»Ÿï¼Œâ€œæ‚¨â€æŒ‡çš„æ˜¯åº”ç”¨ç¨‹åºã€‚å¦‚åº”ç”¨ç¨‹åºéœ€è¦æ¥æ”¶å…¶ä»–ç«¯å‘æ¥çš„æ•°æ®ï¼Œå¯ä»¥è°ƒç”¨WSARecvï¼Œå¹¶æŒ‡å®šæ¥æ”¶æ•°æ®çš„ç¼“å†²åŒºåŠå¤§å°ï¼Œç­‰å…¶ä»–ç«¯å‘æ¥æ•°æ®æ—¶ï¼Œæ“ä½œç³»ç»Ÿè‡ªåŠ¨å°†æ•°æ®æ”¾å…¥åˆ°åº”ç”¨ç¨‹åºæŒ‡å®šçš„ç¼“å†²åŒºä¸­ï¼Œç„¶åé€šçŸ¥åº”ç”¨ç¨‹åºæ•°æ®æ¥å•¦ã€‚ è¿™ä¸ªå’ŒWSAEventSelectæ¨¡å‹æœ€å¤§çš„ä¸åŒå°±æ˜¯ï¼ŒWSAEventSelectæ¨¡å‹åªæ˜¯é€šçŸ¥ç¨‹åºæ•°æ®æ¥äº†ï¼Œå¹¶æ²¡æœ‰å°†æ•°æ®æ¥æ”¶ï¼Œè¿˜éœ€è¦ç¨‹åºè°ƒç”¨recvæ¥æ¥æ”¶æ•°æ®ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nå®Œæˆç«¯å£åˆ›å»ºå’Œç»‘å®šHANDLE WINAPI CreateIoCompletionPort(  _In_     HANDLE    FileHandle,  _In_opt_ HANDLE    ExistingCompletionPort,  _In_     ULONG_PTR CompletionKey,  _In_     DWORD     NumberOfConcurrentThreads);\nCreateIoCompletionPortè¿™ä¸ªå‡½æ•°æ¯”è¾ƒç‰¹æ®Šï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä¸åŒï¼Œå®ƒå¯ä»¥å®ç°2ä¸ªåŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªå®Œæˆç«¯å£ï¼›å°†å®Œæˆç«¯å£å’Œè®¾å¤‡ï¼ˆå¥—æ¥å­—ï¼‰ç›¸ç»‘å®šã€‚ä¸€èˆ¬å¯¹è¯¥å‡½æ•°è¿›è¡Œå¦‚ä¸‹å°è£…æ¥å®ç°è¿™2ä¸ªåŠŸèƒ½ï¼š\nHANDLE CreateNewCompletionPort() &#123;\treturn CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);&#125;BOOL AssociateDeviceWithCompletionPort(HANDLE completion_port, HANDLE device, DWORD completion_key) &#123;\tHANDLE h = CreateIoCompletionPort(device, completion_port, completion_key, 0);\treturn (h == completion_port);&#125;\n\nçº¿ç¨‹æ± å‰é¢è¯´åˆ°äº†ï¼Œå®Œæˆç«¯å£æ¨¡å‹å°±æ˜¯åº”ç”¨ç¨‹åºç­‰ç€æ“ä½œç³»ç»ŸæŠŠäº‹æƒ…åšå®Œäº†é€šçŸ¥å®ƒã€‚é‚£æ—¢ç„¶æ˜¯ç­‰ï¼Œç­‰çš„æ“ä½œè‚¯å®šæ˜¯é˜»å¡ä½äº†çš„ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰ï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨å­çº¿ç¨‹å»ç­‰ã€‚å¯æ˜¯å¯åŠ¨å¤šä¸ªå­çº¿ç¨‹å»ç­‰äº†ï¼Œä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹å—ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œçº¿ç¨‹è¶Šå¤šï¼Œå ç”¨çš„ç³»ç»Ÿèµ„æºä¹Ÿå°±è¶Šå¤šï¼Œè€Œä¸”çº¿ç¨‹çš„åˆ‡æ¢ä¹Ÿæ˜¯æ¶ˆè€—CPUæ—¶é—´çš„ã€‚æ‰€ä»¥çº¿ç¨‹ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»éªŒæ³•åˆ™å°±æ˜¯ï¼šçº¿ç¨‹æ•°é‡ = CPUæ•°é‡ * 2ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;çº¿ç¨‹æ•°é‡å’ŒCPUæ•°é‡ç›¸åŒæ˜¯æœ€ç†æƒ³çš„ç¯å¢ƒï¼Œè¿™æ ·å…å»äº†CPUåœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´åˆ‡æ¢ï¼Œä½†ç°å®æƒ…å†µä¸‹ï¼Œéš¾å…æŸäº›çº¿ç¨‹æ‰§è¡ŒæŸäº›ä»»åŠ¡è€—æ—¶è¾ƒé•¿ï¼Œå¯¼è‡´CPUå°†æ—¶é—´ç‰‡ä»è¯¥çº¿ç¨‹åˆ†æ‹¨å‡ºå»ã€‚æ‰€ä»¥è¿™é‡Œç”¨CPUæ•°é‡ä¹˜ä»¥2ï¼Œæœ€å¤§é™åº¦çš„åˆ©ç”¨CPUèµ„æºã€‚è¿™ä¹Ÿæ˜¯å®Œæˆç«¯å£çš„ç›®æ ‡ï¼Œå³æœ€å¤§é™åº¦çš„åˆ©ç”¨CPUèµ„æºã€‚\nè·å–CPUæ•°é‡çš„æ–¹å¼ï¼š\nint GetNumberOfProcesser() &#123;\tSYSTEM_INFO si;\tGetSystemInfo(&amp;si);\treturn si.dwNumberOfProcessors;&#125;\n\nAcceptExç­‰BOOL AcceptEx(  _In_  SOCKET       sListenSocket,  _In_  SOCKET       sAcceptSocket,  _In_  PVOID        lpOutputBuffer,  _In_  DWORD        dwReceiveDataLength,  _In_  DWORD        dwLocalAddressLength,  _In_  DWORD        dwRemoteAddressLength,  _Out_ LPDWORD      lpdwBytesReceived,  _In_  LPOVERLAPPED lpOverlapped);\n\nAcceptExå’ŒWSARecvã€WSASendã€ConnectExç­‰å‡½æ•°ç±»ä¼¼ï¼Œæœ€åä¸€ä¸ªå‚æ•°éƒ½æ˜¯LPOVERLAPPEDï¼Œéœ€è¦è°ƒç”¨è€…æä¾›ä¸€ä¸ªé‡å ç»“æ„ã€‚ä½†è¿™ä¸ªAcceptExã€ConnectExç­‰å‡½æ•°æ¯”è¾ƒç‰¹åˆ«ï¼Œä»–ä»¬æ˜¯å¾®è½¯ä¸“é—¨åœ¨Windowsæ“ä½œç³»ç»Ÿé‡Œé¢æä¾›çš„æ‰©å±•å‡½æ•°ï¼Œä¸æ˜¯åœ¨Winsock2æ ‡å‡†é‡Œé¢æä¾›çš„ï¼Œæ˜¯å¾®è½¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨é‡å I&#x2F;Oæœºåˆ¶ï¼Œé¢å¤–æä¾›çš„ä¸€äº›å‡½æ•°ã€‚\nä»¥AcceptExä¸ºä¾‹ï¼Œå¾®è½¯çš„å®ç°æ˜¯é€šè¿‡mswsock.dllä¸­æä¾›çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡é™æ€é“¾æ¥mswsock.libæ¥ç›´æ¥è°ƒç”¨AcceptExã€‚ä½†ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºæ¯æ¬¡ç›´æ¥è°ƒç”¨AcceptExæ—¶ï¼ŒService Provideréƒ½å¾—è¦é€šè¿‡WSAIoctl()è·å–ä¸€æ¬¡è¯¥å‡½æ•°æŒ‡é’ˆï¼Œè¿™æ ·æ•ˆç‡æ¯”è¾ƒä½ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯åœ¨ç›´æ¥ä»£ç ä¸­å…ˆè·å–åˆ°è¿™ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå¹¶ä¿å­˜ä¸‹æ¥ï¼Œåé¢ç›´æ¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°æŒ‡é’ˆå°±å¥½äº†ã€‚\nè·å–AcceptExç­‰å‡½æ•°çš„æŒ‡é’ˆçš„æ–¹å¼ï¼š\nLPFN_ACCEPTEX GetAcceptExFnPointer(SOCKET s)&#123;\tLPFN_ACCEPTEX fn = NULL; \tGUID GuidAcceptEx = WSAID_ACCEPTEX;\tDWORD bytes = 0;\tif (SOCKET_ERROR == WSAIoctl(\t\ts,\t\tSIO_GET_EXTENSION_FUNCTION_POINTER,\t\t&amp;GuidAcceptEx,\t\tsizeof(GuidAcceptEx),\t\t&amp;fn,\t\tsizeof(fn),\t\t&amp;bytes,\t\tNULL,\t\tNULL)) &#123;\t\treturn NULL;\t&#125;\treturn fn;&#125;LPFN_CONNECTEX GetConnectExFnPointer(SOCKET s)&#123;\tLPFN_CONNECTEX fn = NULL;\tGUID GuidConnectEx = WSAID_CONNECTEX;\tDWORD bytes = 0;\tif (SOCKET_ERROR == WSAIoctl(\t\ts,\t\tSIO_GET_EXTENSION_FUNCTION_POINTER,\t\t&amp;GuidConnectEx,\t\tsizeof(GuidConnectEx),\t\t&amp;fn,\t\tsizeof(fn),\t\t&amp;bytes,\t\tNULL,\t\tNULL)) &#123;\t\treturn NULL;\t&#125;\treturn fn;&#125;LPFN_GETACCEPTEXSOCKADDRS GetAcceptExSockAddrsFnPointer(SOCKET s)&#123;\tLPFN_GETACCEPTEXSOCKADDRS fn = NULL;\tGUID GuidGetAcceptExSockAddrs = WSAID_GETACCEPTEXSOCKADDRS;\tDWORD bytes = 0;\tif (SOCKET_ERROR == WSAIoctl(\t\ts,\t\tSIO_GET_EXTENSION_FUNCTION_POINTER,\t\t&amp;GuidGetAcceptExSockAddrs,\t\tsizeof(GuidGetAcceptExSockAddrs),\t\t&amp;fn,\t\tsizeof(fn),\t\t&amp;bytes,\t\tNULL,\t\tNULL)) &#123;\t\treturn NULL;\t&#125;\treturn fn;&#125;\n\n\nGetQueuedCompletionStatuså‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\nBOOL WINAPI GetQueuedCompletionStatus(  _In_  HANDLE       CompletionPort,  _Out_ LPDWORD      lpNumberOfBytes,  _Out_ PULONG_PTR   lpCompletionKey,  _Out_ LPOVERLAPPED *lpOverlapped,  _In_  DWORD        dwMilliseconds);\n\nå‰é¢è¯´åˆ°äº†ï¼Œå®Œæˆç«¯å£æ¨¡å‹éœ€è¦åœ¨å­çº¿ç¨‹ä¸­ç­‰å¾…æ“ä½œç³»ç»Ÿåšå®Œäº‹æƒ…ä¹‹åçš„é€šçŸ¥ã€‚è€ŒGetQueuedCompletionStatuså‡½æ•°å°±æ˜¯ç”¨æ¥ç­‰å¾…è¿™ä¸ªé€šçŸ¥çš„ã€‚é€šè¿‡è¯¥å‡½æ•°å¯ä»¥è·å–çš„æœ¬æ¬¡ä¼ è¾“çš„å­—èŠ‚æ•°lpNumberOfBytesã€ä¸€ä¸ªç”¨æˆ·ç»‘å®šåœ¨å¥—æ¥å­—ä¸Šçš„è‡ªå®šä¹‰æ•´æ•°lpCompletionKeyã€ç”¨æˆ·è°ƒç”¨WSASendç­‰å‡½æ•°æ—¶æŒ‡å®šçš„OVERLAPPEDç»“æ„çš„æŒ‡é’ˆlpOverlappedã€‚\næˆ‘ä»¬æ¯”è¾ƒå…³æ³¨çš„æ˜¯lpCompletionKeyã€lpOverlappedè¿™2ä¸ªå‚æ•°ï¼šlpCompletionKeyæ˜¯è°ƒç”¨CreateIoCompletionPortå‡½æ•°ç»‘å®šå®Œæˆç«¯å£å’Œå¥—æ¥å­—æ—¶æŒ‡å®šçš„ï¼Œæ¯ä¸ªå¥—æ¥å­—(SOCKET)å¯¹åº”ä¸€ä¸ªlpCompletionKeyã€‚lpCompletionKeyå¯ä»¥æ˜¯åŒ…æ‹¬æŒ‡é’ˆåœ¨å†…çš„ä»»ä½•æ•´æ•°ã€‚\nlpOverlappedæ˜¯æ¯æ¬¡è°ƒç”¨WSASendç­‰å‡½æ•°æ—¶æŒ‡å®šçš„ï¼Œæ¯ä¸€æ¬¡æ“ä½œï¼ˆä¹Ÿå°±æ˜¯æ¯ä¸€æ¬¡è°ƒç”¨ï¼Œå¦‚WSASend, WSARecv, AcceptEx, ConnectExï¼‰å¯¹åº”çš„lpOverlappedéƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸€æ¬¡æ“ä½œå¯¹åº”ä¸€ä¸ªlpOverlappedã€‚ä¸€ä¸ªSOCKETå¯ä»¥æœ‰å¤šæ¬¡æ“ä½œï¼Œå¤šä»¥å¯¹åº”å¤šä¸ªlpOverlappedã€‚\nå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š\n+-----------+           +--------------------+|           |  1 --&gt; 1  |                    || SOCKET    +-----------&gt; lpCompletionKey    ||           |           |                    |+-----+-----+           +--------------------+      |      |1 --&gt; n      |+-----v------------------+|                        || Send,Recv,Accept...    ||                        |+-----+------------------+      |      |1 --&gt; 1      |+-----v------------------+|                        || lpOverlapped           ||                        |+------------------------+\næ³¨ï¼šç¤ºä¾‹ä»£ç ä¸­çš„PER_SOCKET_CONTEXTç»“æ„å¯¹åº”å›¾ä¸­çš„SOCKETï¼ŒPER_IO_CONTEXTç»“æ„å¯¹åº”å›¾ä¸­çš„lpOverlappedã€‚çŸ¥é“è¿™ä¸ªå¯¹ç†è§£ç¤ºä¾‹ä»£ç ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚\nWindowsè¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©å®CONTAINING_RECORDï¼Œè¯¥å®å¯ä»¥æ ¹æ®ç»“æ„ä½“ä¸­çš„æŸæˆå‘˜çš„åœ°å€æ¥æ¨ç®—å‡ºè¯¥ç»“æ„ä½“æ•´ä½“çš„åœ°å€ã€‚çŸ¥é“äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨lpOverlappedå‚æ•°ä¸Šåšæ–‡ç« äº†ï¼ˆæ‰©å±•ï¼‰ï¼Œå…·ä½“è§ç¤ºä¾‹ã€‚\n\nä¸Šé¢å¯¹å®Œæˆç«¯å£æ¨¡å‹åªåšäº†ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œå…³äºå®Œæˆç«¯å£çš„è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒã€Šwindowsæ ¸å¿ƒç¼–ç¨‹ ç¬¬5ç‰ˆã€‹ 10.3èŠ‚ã€‚\n\nCONTAINING_RECORDå®çš„å®ç°åŸç†è¯¥å®çš„ä½œç”¨å°±æ˜¯ï¼šæ ¹æ®ç»“æ„ä½“ä¸­çš„æŸæˆå‘˜çš„åœ°å€æ¥æ¨ç®—å‡ºè¯¥ç»“æ„ä½“æ•´ä½“çš„åœ°å€ï¼Œç›¸å½“äºä¸€ä¸ªä¸‡èƒ½å…¬å¼ã€‚\nè§ï¼š å¦‚ä½•é€šè¿‡ç»“æ„ä½“æˆå‘˜åœ°å€è·å–çˆ¶åœ°å€\nç¤ºä¾‹ç¤ºä¾‹ä»£ç å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š\n\næœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½ä½¿ç”¨å®Œæˆç«¯å£æ¨¡å‹æ¥å®ç°ã€‚\næœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´é€šè¿‡å‘é€æ¶ˆæ¯æ¥æ¨¡æ‹ŸTCPçš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ã€‚\n\n3.1 è¾…åŠ©å‡½æ•°iocp.hå’Œiocp.cppä¸­å®ç°äº†IOCPç›¸å…³çš„ç»“æ„ä½“å®šä¹‰å’Œä¸€äº›é€šç”¨çš„è¾…åŠ©å‡½æ•°ï¼šiocp.h\n// iocp.h#ifndef IOCP_H_#define IOCP_H_#include &lt;winsock2.h&gt;#include &lt;MSWSock.h&gt;#include &lt;vector&gt;#define MAX_BUFFER_LEN        8192  #define EXIT_CODE\t\t\t  0namespace IOCP &#123;\ttypedef enum _OPERATION_TYPE\t&#123;\t\tACCEPT_POSTED,\t\tCONNECT_POSTED,\t\tSEND_POSTED,\t\tRECV_POSTED,\t\tNULL_POSTED\t&#125;OPERATION_TYPE;\ttypedef struct _PER_IO_CONTEXT\t&#123;\t\tOVERLAPPED     overlapped;            \t\tSOCKET         socket;\t\tWSABUF         wsa_buffer;\t\tchar           buffer[MAX_BUFFER_LEN];\t\tOPERATION_TYPE operation_type;\t\t_PER_IO_CONTEXT() &#123;\t\t\tZeroMemory(&amp;overlapped, sizeof(overlapped));\t\t\tZeroMemory(buffer, MAX_BUFFER_LEN);\t\t\tsocket = INVALID_SOCKET;\t\t\twsa_buffer.buf = buffer;\t\t\twsa_buffer.len = MAX_BUFFER_LEN;\t\t\toperation_type = NULL_POSTED;\t\t&#125;\t\t~_PER_IO_CONTEXT() &#123;\t\t\tif (socket != INVALID_SOCKET) &#123;\t\t\t\tclosesocket(socket);\t\t\t\tsocket = INVALID_SOCKET;\t\t\t&#125;\t\t&#125;\t\tvoid ResetBuffer() &#123;\t\t\tZeroMemory(buffer, MAX_BUFFER_LEN);\t\t&#125;\t&#125; PER_IO_CONTEXT;\ttypedef struct _PER_SOCKET_CONTEXT &#123;\t\tSOCKET      socket; \t\tSOCKADDR_IN client_addr;\t\tstd::vector&lt;_PER_IO_CONTEXT*&gt; io_ctx_array;\t\t_PER_SOCKET_CONTEXT() &#123;\t\t\tsocket = INVALID_SOCKET;\t\t\tmemset(&amp;client_addr, 0, sizeof(client_addr));\t\t&#125;\t\t~_PER_SOCKET_CONTEXT()\t\t&#123;\t\t\tif (socket != INVALID_SOCKET) &#123;\t\t\t\tclosesocket(socket);\t\t\t\tsocket = INVALID_SOCKET;\t\t\t&#125;\t\t\tfor (size_t i = 0; i &lt; io_ctx_array.size(); i++) &#123;\t\t\t\tdelete io_ctx_array[i];\t\t\t&#125;\t\t\tio_ctx_array.clear();\t\t&#125;\t\t_PER_IO_CONTEXT* GetNewIoContext() &#123;\t\t\t_PER_IO_CONTEXT* p = new _PER_IO_CONTEXT;\t\t\tio_ctx_array.push_back(p);\t\t\treturn p;\t\t&#125;\t\tvoid RemoveContext(_PER_IO_CONTEXT* pContext) &#123;\t\t\tfor (std::vector&lt;_PER_IO_CONTEXT*&gt;::iterator it = io_ctx_array.begin(); \t\t\t\tit != io_ctx_array.end(); it++) &#123;\t\t\t\tif (pContext == *it) &#123;\t\t\t\t\tdelete pContext;\t\t\t\t\tpContext = NULL;\t\t\t\t\tio_ctx_array.erase(it);\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125;\t&#125; PER_SOCKET_CONTEXT;\tint GetNumberOfProcesser();\tHANDLE CreateNewCompletionPort();\tBOOL AssociateDeviceWithCompletionPort(HANDLE completion_port, HANDLE device, DWORD completion_key);\tLPFN_ACCEPTEX GetAcceptExFnPointer(SOCKET s);\tLPFN_CONNECTEX GetConnectExFnPointer(SOCKET s);\tLPFN_GETACCEPTEXSOCKADDRS GetAcceptExSockAddrsFnPointer(SOCKET s);&#125;;#endif // IOCP_H_\n\niocp.cpp\n// iocp.cpp#include &quot;iocp.h&quot;namespace IOCP &#123;\tint GetNumberOfProcesser() &#123;\t\tSYSTEM_INFO si;\t\tGetSystemInfo(&amp;si);\t\treturn si.dwNumberOfProcessors;\t&#125;\tHANDLE CreateNewCompletionPort() &#123;\t\treturn CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);\t&#125;\tBOOL AssociateDeviceWithCompletionPort(HANDLE completion_port, HANDLE device, DWORD completion_key) &#123;\t\tHANDLE h = CreateIoCompletionPort(device, completion_port, completion_key, 0);\t\treturn (h == completion_port);\t&#125;\tLPFN_ACCEPTEX GetAcceptExFnPointer(SOCKET s) &#123;\t\tLPFN_ACCEPTEX fn = NULL; \t\tGUID GuidAcceptEx = WSAID_ACCEPTEX;\t\tDWORD bytes = 0;\t\tif (SOCKET_ERROR == WSAIoctl(\t\t\ts,\t\t\tSIO_GET_EXTENSION_FUNCTION_POINTER,\t\t\t&amp;GuidAcceptEx,\t\t\tsizeof(GuidAcceptEx),\t\t\t&amp;fn,\t\t\tsizeof(fn),\t\t\t&amp;bytes,\t\t\tNULL,\t\t\tNULL)) &#123;\t\t\treturn NULL;\t\t&#125;\t\treturn fn;\t&#125;\tLPFN_CONNECTEX GetConnectExFnPointer(SOCKET s) &#123;\t\tLPFN_CONNECTEX fn = NULL;\t\tGUID GuidConnectEx = WSAID_CONNECTEX;\t\tDWORD bytes = 0;\t\tif (SOCKET_ERROR == WSAIoctl(\t\t\ts,\t\t\tSIO_GET_EXTENSION_FUNCTION_POINTER,\t\t\t&amp;GuidConnectEx,\t\t\tsizeof(GuidConnectEx),\t\t\t&amp;fn,\t\t\tsizeof(fn),\t\t\t&amp;bytes,\t\t\tNULL,\t\t\tNULL)) &#123;\t\t\treturn NULL;\t\t&#125;\t\treturn fn;\t&#125;\tLPFN_GETACCEPTEXSOCKADDRS GetAcceptExSockAddrsFnPointer(SOCKET s) &#123;\t\tLPFN_GETACCEPTEXSOCKADDRS fn = NULL;\t\tGUID GuidGetAcceptExSockAddrs = WSAID_GETACCEPTEXSOCKADDRS;\t\tDWORD bytes = 0;\t\tif (SOCKET_ERROR == WSAIoctl(\t\t\ts,\t\t\tSIO_GET_EXTENSION_FUNCTION_POINTER,\t\t\t&amp;GuidGetAcceptExSockAddrs,\t\t\tsizeof(GuidGetAcceptExSockAddrs),\t\t\t&amp;fn,\t\t\tsizeof(fn),\t\t\t&amp;bytes,\t\t\tNULL,\t\t\tNULL)) &#123;\t\t\treturn NULL;\t\t&#125;\t\treturn fn;\t&#125;&#125;\n\n3.1 æœåŠ¡ç«¯#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;#include &lt;vector&gt;#include &lt;process.h&gt;#include &quot;iocp.h&quot;using namespace std;const u_short kPort = 10001;const std::string kSYN = &quot;(SYN) hello server, I&#x27;m client. Can you hear me?&quot;;const std::string kSYN_ACK = &quot;(SYN+ACK) hello client, I&#x27;m server. I can hear you, can you hear me?&quot;;const std::string kACK = &quot;(ACK) hello server, I&#x27;m client. I can hear you!&quot;;#pragma comment(lib, &quot;Ws2_32.lib&quot;)HANDLE g_IOCP = INVALID_HANDLE_VALUE;HANDLE g_exit = NULL;int g_work_thread_num = 0;HANDLE *g_work_threads = NULL;IOCP::PER_SOCKET_CONTEXT *g_listen_ctx = NULL;CRITICAL_SECTION g_cs_socket_ctx_array;std::vector&lt;IOCP::PER_SOCKET_CONTEXT*&gt; g_socket_ctx_array;LPFN_ACCEPTEX g_AcceptExFn = NULL;LPFN_GETACCEPTEXSOCKADDRS g_AcceptExSockAddrsFn = NULL;// ç®¡ç†g_socket_ctx_array//void AddSocketContext(IOCP::PER_SOCKET_CONTEXT *socket_ctx) &#123;\tEnterCriticalSection(&amp;g_cs_socket_ctx_array);\tg_socket_ctx_array.push_back(socket_ctx);\tLeaveCriticalSection(&amp;g_cs_socket_ctx_array);&#125;void RemoveSocketContext(IOCP::PER_SOCKET_CONTEXT *socket_ctx) &#123;\tEnterCriticalSection(&amp;g_cs_socket_ctx_array);\tfor (std::vector&lt;IOCP::PER_SOCKET_CONTEXT*&gt;::iterator it = g_socket_ctx_array.begin(); it != g_socket_ctx_array.end(); it++) &#123;\t\tif (*it == socket_ctx) &#123;\t\t\tdelete *it;\t\t\tg_socket_ctx_array.erase(it);\t\t\tbreak;\t\t&#125;\t&#125;\tLeaveCriticalSection(&amp;g_cs_socket_ctx_array);&#125;void ClearSocketContextArray() &#123;\tEnterCriticalSection(&amp;g_cs_socket_ctx_array);\tfor (std::vector&lt;IOCP::PER_SOCKET_CONTEXT*&gt;::iterator it = g_socket_ctx_array.begin(); it != g_socket_ctx_array.end(); it++) &#123;\t\tclosesocket((*it)-&gt;socket);\t\tdelete *it;\t&#125;\tg_socket_ctx_array.clear();\tLeaveCriticalSection(&amp;g_cs_socket_ctx_array);&#125;// å‘é€Acceptã€Recvã€Sendè¯·æ±‚//bool PostAccept(IOCP::PER_IO_CONTEXT* io_ctx) &#123;\tif (io_ctx == NULL)\t\treturn false;\tio_ctx-&gt;operation_type = IOCP::ACCEPT_POSTED;\tio_ctx-&gt;ResetBuffer();\tio_ctx-&gt;socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);\tif (io_ctx-&gt;socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed with code: %d\\n&quot;, WSAGetLastError());\t\treturn false;\t&#125;\tDWORD bytes = 0;\tif (g_AcceptExFn(g_listen_ctx-&gt;socket,\t\tio_ctx-&gt;socket,\t\tio_ctx-&gt;wsa_buffer.buf,\t\t0,\t\tsizeof(SOCKADDR_IN) + 16,\t\tsizeof(SOCKADDR_IN) + 16,\t\t&amp;bytes,\t\t&amp;io_ctx-&gt;overlapped) == FALSE) &#123;\t\tint gle = WSAGetLastError();\t\tif (gle != WSA_IO_PENDING) &#123;\t\t\tprintf(&quot;AcceptEx failed with code: %d\\n&quot;, gle);\t\t\treturn false;\t\t&#125;\t&#125;\treturn true;&#125;bool PostRecv(IOCP::PER_IO_CONTEXT* io_ctx) &#123;\tif (io_ctx == NULL)\t\treturn false;\tio_ctx-&gt;operation_type = IOCP::RECV_POSTED;\tio_ctx-&gt;ResetBuffer();\tDWORD recv_bytes = 0;\tDWORD flags = 0;\tint ret = WSARecv(io_ctx-&gt;socket, &amp;io_ctx-&gt;wsa_buffer, 1, &amp;recv_bytes, &amp;flags, &amp;io_ctx-&gt;overlapped, NULL);\tif (ret == SOCKET_ERROR &amp;&amp; WSAGetLastError() != WSA_IO_PENDING) &#123;\t\treturn false;\t&#125;\treturn true;&#125;bool PostSend(IOCP::PER_IO_CONTEXT* io_ctx, const char* msg, int msg_len) &#123;\tif (io_ctx == NULL)\t\treturn false;\tio_ctx-&gt;operation_type = IOCP::SEND_POSTED;\tmemcpy(io_ctx-&gt;wsa_buffer.buf, msg, msg_len);\tio_ctx-&gt;wsa_buffer.len = msg_len;\tDWORD sent_bytes = 0;\tint ret = WSASend(io_ctx-&gt;socket, &amp;io_ctx-&gt;wsa_buffer, 1, &amp;sent_bytes, 0, &amp;io_ctx-&gt;overlapped, NULL);\tif (ret == SOCKET_ERROR &amp;&amp; WSAGetLastError() != WSA_IO_PENDING) &#123;\t\treturn false;\t&#125;\treturn true;&#125;// å¤„ç†Acceptã€Recvã€Sendå®Œæˆä¹‹åçš„é€šçŸ¥//bool DoAccept(IOCP::PER_SOCKET_CONTEXT *socket_ctx, IOCP::PER_IO_CONTEXT *io_ctx) &#123;\tSOCKADDR_IN* ClientAddr = NULL;\tSOCKADDR_IN* LocalAddr = NULL;\tint remoteLen = sizeof(SOCKADDR_IN);\tint localLen = sizeof(SOCKADDR_IN);\tg_AcceptExSockAddrsFn(io_ctx-&gt;wsa_buffer.buf, io_ctx-&gt;wsa_buffer.len - ((sizeof(SOCKADDR_IN) + 16) * 2),\t\tsizeof(SOCKADDR_IN) + 16, sizeof(SOCKADDR_IN) + 16, (LPSOCKADDR*)&amp;LocalAddr, &amp;localLen, (LPSOCKADDR*)&amp;ClientAddr, &amp;remoteLen);\tprintf(&quot;* new connection(%s:%d): %s\\n&quot;, inet_ntoa(ClientAddr-&gt;sin_addr), ntohs(ClientAddr-&gt;sin_port), io_ctx-&gt;wsa_buffer.buf);\t// æ­¤æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„PER_SOCKET_CONTEXTï¼Œä¹‹å‰è€çš„PER_SOCKET_CONTEXTç»§ç»­ç”¨ä½œæ¥æ”¶å®¢æˆ·ç«¯è¿æ¥\t//\tIOCP::PER_SOCKET_CONTEXT *new_socket_ctx = new IOCP::PER_SOCKET_CONTEXT();\tnew_socket_ctx-&gt;socket = io_ctx-&gt;socket;\tif (!IOCP::AssociateDeviceWithCompletionPort(g_IOCP, (HANDLE)new_socket_ctx-&gt;socket, (DWORD)new_socket_ctx)) &#123;\t\tprintf(&quot;AssociateDeviceWithCompletionPort failed\\n&quot;);\t\tdelete new_socket_ctx;\t\tnew_socket_ctx = NULL;\t\treturn false;\t&#125;\tAddSocketContext(new_socket_ctx);\t// post recv\tIOCP::PER_IO_CONTEXT *new_io_ctx = new_socket_ctx-&gt;GetNewIoContext();\tnew_io_ctx-&gt;socket = new_socket_ctx-&gt;socket;\tif (!PostRecv(new_io_ctx)) &#123;\t\tprintf(&quot;PostRecv failed\\n&quot;);\t\treturn false;\t&#125;\t// post new accept\tif (!PostAccept(io_ctx)) &#123;\t\tprintf(&quot;PostAccept failed\\n&quot;);\t\treturn false;\t&#125;\treturn true;&#125;bool DoRecv(IOCP::PER_SOCKET_CONTEXT *socket_ctx, IOCP::PER_IO_CONTEXT *io_ctx) &#123;\tprintf(&quot;recv: %s\\n&quot;, io_ctx-&gt;wsa_buffer.buf);\tif (strcmp(io_ctx-&gt;wsa_buffer.buf, kSYN.c_str()) == 0) &#123;\t\t// SYN+ACK\t\tIOCP::PER_IO_CONTEXT * new_io_ctx = socket_ctx-&gt;GetNewIoContext();\t\tnew_io_ctx-&gt;socket = socket_ctx-&gt;socket;\t\tif (!PostSend(new_io_ctx, kSYN_ACK.c_str(), kSYN_ACK.length())) &#123;\t\t\tprintf(&quot;PostSend failed\\n&quot;);\t\t\treturn false;\t\t&#125;\t&#125;\t// post new recv\tif (!PostRecv(io_ctx)) &#123;\t\tprintf(&quot;PostRecv failed\\n&quot;);\t\treturn false;\t&#125;\treturn true;&#125;bool DoSend(IOCP::PER_SOCKET_CONTEXT *socket_ctx, IOCP::PER_IO_CONTEXT *io_ctx) &#123;\tprintf(&quot;send: %s\\n&quot;, io_ctx-&gt;wsa_buffer.buf);\treturn true;&#125;// å·¥ä½œçº¿ç¨‹unsigned int __stdcall WorkThreadProc(void *arg) &#123;\tDWORD transferred_bytes = 0;\tIOCP::PER_SOCKET_CONTEXT *socket_ctx = NULL;\tOVERLAPPED *overlapped = NULL;\tDWORD gle;\twhile (WaitForSingleObject(g_exit, 0) != WAIT_OBJECT_0) &#123;\t\tBOOL ret = GetQueuedCompletionStatus(g_IOCP, &amp;transferred_bytes, (PULONG_PTR)&amp;socket_ctx, &amp;overlapped, INFINITE);\t\tgle = GetLastError();\t\tif (socket_ctx == EXIT_CODE) &#123;\t\t\tbreak;\t\t&#125;\t\tif (ret == FALSE) &#123;\t\t\tif (gle == WAIT_TIMEOUT) &#123;\t\t\t\tcontinue;\t\t\t&#125;\t\t\telse if (gle == ERROR_NETNAME_DELETED) &#123;\t\t\t\tprintf(&quot;client exit\\n&quot;);\t\t\t\tRemoveSocketContext(socket_ctx);\t\t\t\tcontinue;\t\t\t&#125;\t\t\telse &#123;\t\t\t\tRemoveSocketContext(socket_ctx);\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\telse &#123;\t\t\t// http://blog.csdn.net/china_jeffery/article/details/78801331\t\t\tIOCP::PER_IO_CONTEXT *io_ctx = CONTAINING_RECORD(overlapped, IOCP::PER_IO_CONTEXT, overlapped);\t\t\tif ((transferred_bytes == 0) &amp;&amp; (io_ctx-&gt;operation_type == IOCP::RECV_POSTED || io_ctx-&gt;operation_type == IOCP::SEND_POSTED)) &#123;\t\t\t\tprintf(&quot;client disconnect\\n&quot;);\t\t\t\tRemoveSocketContext(socket_ctx);\t\t\t\tcontinue;\t\t\t&#125;\t\t\tswitch (io_ctx-&gt;operation_type)\t\t\t&#123;\t\t\tcase IOCP::ACCEPT_POSTED:\t\t\t\tDoAccept(socket_ctx, io_ctx);\t\t\t\tbreak;\t\t\tcase IOCP::RECV_POSTED:\t\t\t\tDoRecv(socket_ctx, io_ctx);\t\t\t\tbreak;\t\t\tcase IOCP::SEND_POSTED:\t\t\t\tDoSend(socket_ctx, io_ctx);\t\t\t\tbreak;\t\t\tdefault:\t\t\t\tassert(false);\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tdo \t&#123;\t\tInitializeCriticalSection(&amp;g_cs_socket_ctx_array);\t\tg_IOCP = IOCP::CreateNewCompletionPort();\t\tg_exit = CreateEvent(NULL, FALSE, FALSE, NULL);\t\tg_work_thread_num = IOCP::GetNumberOfProcesser() * 2;\t\tg_work_threads = new HANDLE[g_work_thread_num];\t\tfor (int i = 0; i &lt; g_work_thread_num; i++) &#123;\t\t\tg_work_threads[i] = (HANDLE)_beginthreadex(NULL, 0, WorkThreadProc, NULL, 0, NULL);\t\t&#125;\t\tg_listen_ctx = new IOCP::PER_SOCKET_CONTEXT;\t\tg_listen_ctx-&gt;socket = WSASocket(AF_INET, SOCK_STREAM, 0, NULL, 0, WSA_FLAG_OVERLAPPED);\t\tif (!IOCP::AssociateDeviceWithCompletionPort(g_IOCP, (HANDLE)g_listen_ctx-&gt;socket, (DWORD)g_listen_ctx)) &#123;\t\t\tprintf(&quot;AssociateDeviceWithCompletionPort failed with code: %d\\n&quot;, GetLastError());\t\t\tbreak;\t\t&#125;\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = htonl(INADDR_ANY);\t\taddr.sin_port = htons(kPort);\t\tif (bind(g_listen_ctx-&gt;socket, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tprintf(&quot;bind failed with code: %d\\n&quot;, WSAGetLastError());\t\t\tbreak;\t\t&#125;\t\tif (listen(g_listen_ctx-&gt;socket, SOMAXCONN) == SOCKET_ERROR) &#123;\t\t\tprintf(&quot;listen failed with code: %d\\n&quot;, WSAGetLastError());\t\t\tbreak;\t\t&#125;\t\tg_AcceptExFn = IOCP::GetAcceptExFnPointer(g_listen_ctx-&gt;socket);\t\tif (g_AcceptExFn == NULL) &#123;\t\t\tprintf(&quot;GetAcceptExFnPointer failed\\n&quot;);\t\t\tbreak;\t\t&#125;\t\tg_AcceptExSockAddrsFn = IOCP::GetAcceptExSockAddrsFnPointer(g_listen_ctx-&gt;socket);\t\tif (g_AcceptExSockAddrsFn == NULL) &#123;\t\t\tprintf(&quot;GetAcceptExSockAddrsFnPointer failed\\n&quot;);\t\t\tbreak;\t\t&#125;\t\tint i = 0;\t\tfor (; i &lt; 10; i++) &#123;\t\t\tIOCP::PER_IO_CONTEXT *io_ctx = g_listen_ctx-&gt;GetNewIoContext();\t\t\tif (PostAccept(io_ctx) == FALSE) &#123;\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\tif(i != 10)\t\t\tbreak;\t&#125; while (FALSE);\tprintf(&quot;\\npress any ket to stop server...\\n&quot;);\tgetchar();\tSetEvent(g_exit);\tfor (int i = 0; i &lt; g_work_thread_num; i++) &#123;\t\tPostQueuedCompletionStatus(g_IOCP, 0, (DWORD)EXIT_CODE, NULL);\t&#125;\tWaitForMultipleObjects(g_work_thread_num, g_work_threads, TRUE, INFINITE);\tClearSocketContextArray();\tprintf(&quot;\\npress any ket to exit...\\n&quot;);\tgetchar();\tDeleteCriticalSection(&amp;g_cs_socket_ctx_array);\tWSACleanup();    return 0;&#125;\n\n3.2 å®¢æˆ·ç«¯å®¢æˆ·ç«¯ä»£ç å’ŒæœåŠ¡ç«¯ç±»ä¼¼ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ConnectExå‡½æ•°è°ƒç”¨ä¹‹å‰ï¼Œéœ€è¦å°†SOCKETè¿›è¡Œbindæ“ä½œã€‚\n#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;#include &lt;vector&gt;#include &lt;process.h&gt;#include &quot;iocp.h&quot;using namespace std;const std::string kIP = &quot;127.0.0.1&quot;;const u_short kPort = 10001;const std::string kSYN = &quot;(SYN) hello server, I&#x27;m client. Can you hear me?&quot;;const std::string kSYN_ACK = &quot;(SYN+ACK) hello client, I&#x27;m server. I can hear you, can you hear me?&quot;;const std::string kACK = &quot;(ACK) hello server, I&#x27;m client. I can hear you!&quot;;#pragma comment(lib, &quot;Ws2_32.lib&quot;)HANDLE g_IOCP = INVALID_HANDLE_VALUE;HANDLE g_exit = NULL;int g_work_thread_num = 0;HANDLE *g_work_threads = NULL;IOCP::PER_SOCKET_CONTEXT *g_client_ctx = NULL;LPFN_CONNECTEX g_ConnectExFn = NULL;bool PostConnect(IOCP::PER_IO_CONTEXT* io_ctx, const std::string &amp;ip, int port) &#123;\tif (io_ctx == NULL)\t\treturn false;\tio_ctx-&gt;operation_type = IOCP::CONNECT_POSTED;\tio_ctx-&gt;ResetBuffer();\t// ConnectEx requires the socket to be initially bound.\tstruct sockaddr_in addr0 = &#123; 0 &#125;;\taddr0.sin_family = AF_INET;\taddr0.sin_addr.s_addr = INADDR_ANY;\taddr0.sin_port = 0;\tint ret = bind(io_ctx-&gt;socket, (SOCKADDR*)&amp;addr0, sizeof(addr0));\tif (ret != 0) &#123;\t\tprintf(&quot;bind failed: %d\\n&quot;, WSAGetLastError());\t\treturn false;\t&#125;\tstruct sockaddr_in addr1 = &#123; 0 &#125;;\taddr1.sin_family = AF_INET;\taddr1.sin_addr.s_addr = inet_addr(ip.c_str());\taddr1.sin_port = htons(port);\tret = g_ConnectExFn(io_ctx-&gt;socket,\t\treinterpret_cast&lt;const sockaddr*&gt;(&amp;addr1),\t\tsizeof(addr1),\t\tNULL,\t\t0,\t\tNULL,\t\t&amp;io_ctx-&gt;overlapped);\tint gle = WSAGetLastError();\tif (ret == SOCKET_ERROR &amp;&amp; gle != WSA_IO_PENDING) &#123;\t\treturn false;\t&#125;\treturn true;&#125;bool PostRecv(IOCP::PER_IO_CONTEXT* io_ctx) &#123;\tif (io_ctx == NULL)\t\treturn false;\tio_ctx-&gt;operation_type = IOCP::RECV_POSTED;\tio_ctx-&gt;ResetBuffer();\tDWORD recv_bytes = 0;\tDWORD flags = 0;\tint ret = WSARecv(io_ctx-&gt;socket, &amp;io_ctx-&gt;wsa_buffer, 1, &amp;recv_bytes, &amp;flags, &amp;io_ctx-&gt;overlapped, NULL);\tif (ret == SOCKET_ERROR &amp;&amp; WSAGetLastError() != WSA_IO_PENDING) &#123;\t\treturn false;\t&#125;\treturn true;&#125;bool PostSend(IOCP::PER_IO_CONTEXT* io_ctx, const char* msg, int msg_len) &#123;\tif (io_ctx == NULL)\t\treturn false;\tio_ctx-&gt;operation_type = IOCP::SEND_POSTED;\tmemcpy(io_ctx-&gt;wsa_buffer.buf, msg, msg_len);\tio_ctx-&gt;wsa_buffer.len = msg_len;\tDWORD sent_bytes = 0;\tint ret = WSASend(io_ctx-&gt;socket, &amp;io_ctx-&gt;wsa_buffer, 1, &amp;sent_bytes, 0, &amp;io_ctx-&gt;overlapped, NULL);\tint gle = WSAGetLastError();\tif (ret == SOCKET_ERROR &amp;&amp; gle != WSA_IO_PENDING) &#123;\t\tprintf(&quot;WSASend failed with code: %d\\n&quot;, gle);\t\treturn false;\t&#125;\treturn true;&#125;bool DoConnect(IOCP::PER_SOCKET_CONTEXT *socket_ctx, IOCP::PER_IO_CONTEXT *io_ctx) &#123;\tprintf(&quot;connect to server\\n&quot;);\tif (!PostRecv(io_ctx)) &#123;\t\tprintf(&quot;PostRecv failed\\n&quot;);\t\treturn false;\t&#125;\tIOCP::PER_IO_CONTEXT* new_io_ctx = socket_ctx-&gt;GetNewIoContext();\tnew_io_ctx-&gt;socket = socket_ctx-&gt;socket;\tif (!PostSend(new_io_ctx, kSYN.c_str(), kSYN.length())) &#123;\t\tprintf(&quot;PostSend failed\\n&quot;);\t\treturn false;\t&#125;\treturn true;&#125;bool DoRecv(IOCP::PER_SOCKET_CONTEXT *socket_ctx, IOCP::PER_IO_CONTEXT *io_ctx) &#123;\tprintf(&quot;recv: %s\\n&quot;, io_ctx-&gt;wsa_buffer.buf);\tif (strcmp(io_ctx-&gt;wsa_buffer.buf, kSYN_ACK.c_str()) == 0) &#123;\t\t// ACK\t\tIOCP::PER_IO_CONTEXT * new_io_ctx = socket_ctx-&gt;GetNewIoContext();\t\tnew_io_ctx-&gt;socket = socket_ctx-&gt;socket;\t\tif (!PostSend(new_io_ctx, kACK.c_str(), kACK.length())) &#123;\t\t\tprintf(&quot;PostSend failed\\n&quot;);\t\t\treturn false;\t\t&#125;\t&#125;\t// post new recv\tif (!PostRecv(io_ctx)) &#123;\t\tprintf(&quot;PostRecv failed\\n&quot;);\t\treturn false;\t&#125;\treturn true;&#125;bool DoSend(IOCP::PER_SOCKET_CONTEXT *socket_ctx, IOCP::PER_IO_CONTEXT *io_ctx) &#123;\tprintf(&quot;send: %s\\n&quot;, io_ctx-&gt;wsa_buffer.buf);\treturn true;&#125;unsigned int __stdcall WorkThreadProc(void *arg) &#123;\tDWORD transferred_bytes = 0;\tIOCP::PER_SOCKET_CONTEXT *socket_ctx = NULL;\tOVERLAPPED *overlapped = NULL;\tDWORD gle;\twhile (WaitForSingleObject(g_exit, 0) != WAIT_OBJECT_0) &#123;\t\tBOOL ret = GetQueuedCompletionStatus(g_IOCP, &amp;transferred_bytes, (PULONG_PTR)&amp;socket_ctx, &amp;overlapped, INFINITE);\t\tgle = GetLastError();\t\tif (socket_ctx == EXIT_CODE) &#123;\t\t\tbreak;\t\t&#125;\t\tif (ret == FALSE) &#123;\t\t\tif (gle == WAIT_TIMEOUT) &#123;\t\t\t\tcontinue;\t\t\t&#125;\t\t\telse if (gle == ERROR_NETNAME_DELETED) &#123;\t\t\t\tprintf(&quot;server exit\\n&quot;);\t\t\t\tclosesocket(socket_ctx-&gt;socket);\t\t\t\tsocket_ctx-&gt;socket = INVALID_SOCKET;\t\t\t\tbreak;\t\t\t&#125;\t\t\telse &#123;\t\t\t\tclosesocket(socket_ctx-&gt;socket);\t\t\t\tsocket_ctx-&gt;socket = INVALID_SOCKET;\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\telse &#123;\t\t\tIOCP::PER_IO_CONTEXT *io_ctx = CONTAINING_RECORD(overlapped, IOCP::PER_IO_CONTEXT, overlapped);\t\t\tswitch (io_ctx-&gt;operation_type)\t\t\t&#123;\t\t\tcase IOCP::CONNECT_POSTED:\t\t\t\tDoConnect(socket_ctx, io_ctx);\t\t\t\t\t\t\t\tbreak;\t\t\tcase IOCP::RECV_POSTED:\t\t\t\tDoRecv(socket_ctx, io_ctx);\t\t\t\tbreak;\t\t\tcase IOCP::SEND_POSTED:\t\t\t\tDoSend(socket_ctx, io_ctx);\t\t\t\tbreak;\t\t\tdefault:\t\t\t\tassert(false);\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tdo\t&#123;\t\tg_IOCP = IOCP::CreateNewCompletionPort();\t\tg_exit = CreateEvent(NULL, FALSE, FALSE, NULL);\t\tg_work_thread_num = IOCP::GetNumberOfProcesser() * 2;\t\tg_work_threads = new HANDLE[g_work_thread_num];\t\tfor (int i = 0; i &lt; g_work_thread_num; i++) &#123;\t\t\tg_work_threads[i] = (HANDLE)_beginthreadex(NULL, 0, WorkThreadProc, NULL, 0, NULL);\t\t&#125;\t\tg_client_ctx = new IOCP::PER_SOCKET_CONTEXT;\t\tg_client_ctx-&gt;socket = WSASocket(AF_INET, SOCK_STREAM, 0, NULL, 0, WSA_FLAG_OVERLAPPED);\t\tif (!IOCP::AssociateDeviceWithCompletionPort(g_IOCP, (HANDLE)g_client_ctx-&gt;socket, (DWORD)g_client_ctx)) &#123;\t\t\tprintf(&quot;AssociateDeviceWithCompletionPort failed with code: %d\\n&quot;, GetLastError());\t\t\tbreak;\t\t&#125;\t\tg_ConnectExFn = IOCP::GetConnectExFnPointer(g_client_ctx-&gt;socket);\t\tif (g_ConnectExFn == NULL) &#123;\t\t\tprintf(&quot;GetConnectExFnPointer failed\\n&quot;);\t\t\tbreak;\t\t&#125;\t\tIOCP::PER_IO_CONTEXT* io_ctx = g_client_ctx-&gt;GetNewIoContext();\t\tio_ctx-&gt;socket = g_client_ctx-&gt;socket;\t\tif (!PostConnect(io_ctx, kIP, kPort)) &#123;\t\t\tprintf(&quot;PostConnect failed\\n&quot;);\t\t&#125;\t&#125; while (FALSE);\tprintf(&quot;press any key to exit client...\\n&quot;);\tgetchar();\tSetEvent(g_exit);\tclosesocket(g_client_ctx-&gt;socket);\tgetchar();\tWSACleanup();\treturn 0;&#125;\n\nğŸ“Œé™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["å¥—æ¥å­—I/Oæ¨¡å‹"]},{"title":"Wiresharkè¿‡æ»¤å™¨é€ŸæŸ¥æ‰‹å†Œ","url":"/post/556603567.html","content":"Wireshark ä¸­æœ‰ä¸¤ç§è¿‡æ»¤å™¨ï¼š\n\næ•è·è¿‡æ»¤å™¨ï¼šç”¨äºåœ¨æ•°æ®åŒ…æ•è·é˜¶æ®µè¿‡æ»¤æ•°æ®åŒ…ï¼Œåªæ•è·ç¬¦åˆæ¡ä»¶çš„æ•°æ®åŒ…ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ•è·ä¸å¿…è¦çš„æ•°æ®åŒ…ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚\næ˜¾ç¤ºè¿‡æ»¤å™¨ï¼šç”¨äºåœ¨å·²ç»æ•è·çš„æ•°æ®åŒ…ä¸­è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®åŒ…è¿›è¡Œæ˜¾ç¤ºï¼Œå®ƒä½¿ç”¨çš„æ˜¯ Wireshark è‡ªå·±çš„è¯­æ³•ã€‚\n\n\n\næ•è·è¿‡æ»¤å™¨åœ¨ Wireshark çš„å¼€å§‹é¡µé¢æˆ–è€…åœ¨æ•è·é€‰å‹é¡µé¢ä¸­é€‰æ‹©éœ€è¦æ•è·çš„ç½‘ç»œé€‚é…å™¨ï¼Œç„¶åè¾“å…¥æ•è·è¿‡æ»¤å™¨è§„åˆ™ï¼Œè®¾ç½®å®Œæˆä¹‹åï¼Œç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®å³å¯ä½¿ç”¨è¯¥è§„åˆ™åœ¨å¯¹åº”é€‚é…å™¨ä¸Šè¿›è¡Œç½‘ç»œæµé‡æŠ“å–ã€‚\n\nBPF è¯­æ³•æ•è·è¿‡æ»¤å™¨ä½¿ç”¨çš„æ˜¯ BPFï¼ˆBerkeley Packet Filterï¼‰è¯­æ³•ï¼ŒBPF è¯­æ³•è§„åˆ™å¦‚ä¸‹ï¼š\n\nä¸€ä¸ªè¿‡æ»¤è¡¨è¾¾å¼ï¼ˆexpressionï¼‰ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŸè¯­ï¼ˆprimitivesï¼‰ç»„æˆã€‚\nä¸€ä¸ªåŸè¯­ï¼ˆprimitiveï¼‰ç”±ä¸€ä¸ªæˆ–å¤šä¸ªé™å®šè¯ï¼ˆqualifiersï¼‰ç»„æˆï¼Œé™å®šè¯ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚\næ¯ç»„é™å®šè¯æœ€åè·Ÿç€å€¼ï¼Œè¡¨ç¤ºæœ€åçš„è®¡ç®—ç»“æœç­‰äºè¯¥å€¼æ—¶æ¡ä»¶æˆç«‹ï¼Œè€Œä¸æ”¯æŒå¤§äºã€å°äºç­‰å…¶ä»–æ¯”è¾ƒè¿ç®—ç¬¦ã€‚\nåŸè¯­ä¹‹é—´ä½¿ç”¨é€»è¾‘æ“ä½œç¬¦ï¼ˆoperatorsï¼‰è¿æ¥ï¼Œé€»è¾‘æ“ä½œç¬¦å¯ä»¥ä½¿ç”¨ andã€orã€not è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ &amp;&amp;ã€||ã€!ã€‚\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¦‚ä¸‹é¢çš„æ•è·è¿‡æ»¤å™¨è¡¨ç¤ºï¼šåªæ•è·æº IP åœ°å€ ä¸º 192.168.1.100 ä¸”ç›®çš„ TCP ç«¯å£ä¸º 80 çš„æ•°æ®åŒ…ã€‚\nip src 192.168.1.100 and tcp dst port 80\n\nWireshark æ˜¯éå¸¸éµå®ˆç½‘ç»œåè®®çš„ï¼Œåœ¨è¿‡æ»¤å™¨ä¸­çš„ ip è¡¨ç¤ºçš„æ˜¯ ip åè®®ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬é€šå¸¸è®¤ä¸ºçš„ ip åœ°å€ã€‚\nå„ä¸ªé™å®šè¯å‡ºç°çš„å…ˆåé¡ºåºä¹Ÿæ˜¯æŒ‰ç…§ç½‘ç»œåè®®çš„è§„åˆ™è€Œæ¥çš„ï¼Œæ¯”å¦‚ IP åè®®æœ‰æºåœ°å€å’Œç›®æ ‡åœ°å€ä¹‹è¯´ï¼Œå› æ­¤é’ˆå¯¹æºåœ°å€å’Œç›®æ ‡åœ°å€çš„æ•è·è¡¨è¾¾å¼åˆ†åˆ«å¦‚ä¸‹ï¼š\nip src 192.168.1.100ip dest 192.168.1.101\n\næ•è·è¿‡æ»¤å™¨ä¸æ”¯æŒç›´æ¥è¿‡æ»¤åº”ç”¨å±‚çš„åè®®ï¼Œå¦‚ httpã€ftp ç­‰ï¼Œå› ä¸ºä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œåœ¨æ•è·æ—¶è¿˜æœªè¿›è¡Œåè®®è§£æã€‚\nå¸¸ç”¨æ•è·è¿‡æ»¤è§„åˆ™åœ°å€è¿‡æ»¤\n\nhost 192.168.1.33ï¼šæ•è·ä¸ 192.168.1.33 è¿™ä¸ª IPv4 åœ°å€ç›¸å…³çš„æ‰€æœ‰æµé‡ã€‚\nhost 2308:8277:420:152a:819:41f0:28fa:8862ï¼š æ•è·ä¸è¿™ä¸ª IPv6 åœ°å€ç›¸å…³çš„æ‰€æœ‰æµé‡ã€‚\nhost www.baidu.comï¼š æ•è·ä¸åŸŸå www.baidu.com ç›¸å…³çš„æ‰€æœ‰æµé‡ã€‚\nether host 52:54:99:2f:37:b1ï¼š æ•è·ä¸è¿™ä¸ª MAC åœ°å€ç›¸å…³çš„æ‰€æœ‰æµé‡ã€‚\nsrc host 192.168.1.33ï¼šåªæ•è·æºåœ°å€ä¸º 192.168.1.33 çš„æµé‡ã€‚\ndest host 192.168.1.33ï¼šåªæ•è·ç›®æ ‡åœ°å€ä¸º 192.168.1.33 çš„æµé‡ã€‚\n\nç«¯å£è¿‡æ»¤\n\nport 8080ï¼šæ•è· 8080 ç«¯å£çš„æµé‡ï¼ŒåŒ…æ‹¬æµå…¥æˆ–æµå‡ºçš„ï¼Œè¿™é‡Œæ— å…³ä½¿ç”¨çš„æ˜¯å“ªä¸€ç§ä¼ è¾“å±‚åè®®ï¼Œtcpã€udp è¿˜æ˜¯å…¶ä»–ï¼Œåªè¦ç«¯å£ä¸º 8080 å°±éƒ½æ•è·ã€‚\n!src port 8080 ä¸æ•è·æ‰æºç«¯å£ä¸º 8080 æµé‡ã€‚\n\nåè®®è¿‡æ»¤\n\nicmpï¼šåªæ•è· icmp åè®®äº§ç”Ÿçš„æµé‡ã€‚\n!ip6: ä¸æ•è· IPv6 çš„æµé‡ã€‚\n\næ˜¾ç¤ºè¿‡æ»¤å™¨&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æ˜¾ç¤ºè¿‡æ»¤å™¨çš„è§„åˆ™ä¸æ•è·è¿‡æ»¤å™¨ç±»ä¼¼ï¼Œä½†æœ‰äº›åœ°æ–¹ä¸ä¸€æ ·ã€‚\næ˜¾ç¤ºè¿‡æ»¤å™¨çš„é™å®šè¯ä¹‹é—´ä½¿ç”¨.è¿›è¡Œåˆ†å‰²ï¼Œè€Œæ•è·è¿‡æ»¤å™¨ä½¿ç”¨çš„æ˜¯ç©ºæ ¼ï¼›\næ•è·è¿‡æ»¤å™¨åªæ”¯æŒç­‰äºè¿™ä¸€ç§æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œè€Œæ˜¾ç¤ºè¿‡æ»¤å™¨æ”¯æŒæ›´å¤šçš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¦‚==ã€&gt;ã€&lt;ã€!=ã€&gt;=ã€&lt;=ã€‚\nè™½ç„¶é€»è¾‘è¿ç®—ç¬¦ä¸æ•è·è¿‡æ»¤å™¨ç±»ä¼¼ï¼Œä½†å¤šäº†ä¸€ç§å¼‚æˆ–è¿ç®—ç¬¦ï¼Œä½¿ç”¨ xor è¡¨ç¤ºã€‚\nä¸‹é¢ç¤ºä¾‹è¡¨ç¤ºï¼šæ•è· ip æºåœ°å€ä¸ç­‰äº 192.168.1.1ï¼Œå¹¶ä¸” tcp åè®®ç«¯å£å·ä¸º 80 çš„æµé‡ã€‚\nip.src != 192.168.1.1 and tcp.port &gt; 80\n\nä¸åŒäºæ•è·è¿‡æ»¤å™¨ï¼Œæ˜¾ç¤ºè¿‡æ»¤å™¨çš„è§„åˆ™éœ€è¦æ›´åŠ åœ°æ˜ç¡®ï¼Œå¦‚ï¼š\n\nå¯¹ç«¯å£å·çš„æŒ‡å®šéœ€è¦åŠ ä¸Šåè®®é™å®šè¯ï¼Œå¦‚tcp.port == 80ï¼Œè€Œä¸èƒ½åƒæ•è·è¿‡æ»¤å™¨é‚£æ ·ä¸ç®¡åè®®ï¼Œåªè¦æ˜¯è¯¥ç«¯å£å°±æ•è·ï¼Œå¦‚ port 80ã€‚\næ˜¾ç¤ºè¿‡æ»¤å™¨ä¸èƒ½ä½¿ç”¨hostï¼Œå› ä¸º host å¤ªç¬¼ç»Ÿäº†ï¼Œæ—¢å¯ä»¥è¡¨ç¤º ip æº&#x2F;ç›®æ ‡åœ°å€ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºåŸŸåï¼Œåœ¨æ˜¾ç¤ºè¿‡æ»¤å™¨ä¸­å¯ä»¥ä½¿ç”¨ ip.src ã€ip.destæˆ–http.host æ›¿ä»£ã€‚\n\næ˜¾ç¤ºè¿‡æ»¤å™¨æ”¯æŒ contains å’Œ matchesï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œè€Œæ•è·è¿‡æ»¤å™¨åˆ™ä¸æ”¯æŒï¼š\n# è¿‡æ»¤HTTPè¯·æ±‚ä¸­Hostå¤´åŒ…å«&quot;baidu.com&quot;çš„æµé‡http.host contains &quot;baidu.com&quot;# è¿‡æ»¤TCPè´Ÿè½½ä¸­åŒ…å«&quot;password&quot;çš„åŒ…tcp contains &quot;password&quot;# åŒ¹é…ä»¥ baidu.comç»“å°¾çš„ Hosthttp.host matches &quot;.*baidu\\\\.com$&quot;\n\nå°æŠ€å·§æ˜¾ç¤ºè¿‡æ»¤å™¨è§„åˆ™æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬éƒ½éœ€è¦è®°ä½å—ï¼Ÿè®°ä¸ä½ï¼Œä¹Ÿæ²¡å¿…è¦ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½å¸¸ç”¨çš„è§„åˆ™å°±å¯ä»¥äº†ã€‚\nåœ¨ä½¿ç”¨ Wireshark æŠ“åŒ…æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æŠ¥æ–‡ä¸­çš„æŸä¸€é¡¹ï¼Œç‚¹å‡»å³é”®ï¼Œé€‰æ‹©â€œä½œä¸ºè¿‡æ»¤å™¨åº”ç”¨â€å³å¯ä½¿ç”¨è¯¥é¡¹ä½œä¸ºè¿‡æ»¤å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["é€ŸæŸ¥æ‰‹å†Œ","Wireshark"]},{"title":"Windowså¥—æ¥å­—I/Oæ¨¡å‹(4)-WSAEventSelectæ¨¡å‹","url":"/post/547434843.html","content":"WSAEventSelectæ¨¡å‹å’ŒWSAAsyncSelectæ¨¡å‹ç±»ä¼¼ï¼Œä½†WSAEventSelectæ¨¡å‹å…è®¸åº”ç”¨ç¨‹åºåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå¥—æ¥å­—ä¸Šé¢æ¥æ”¶ä»¥äº‹ä»¶ä¸ºåŸºç¡€çš„ç½‘ç»œäº‹ä»¶é€šçŸ¥ã€‚è¯¥æ¨¡å‹å’ŒWSAAsyncSelectæ¨¡å‹çš„æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºç½‘ç»œäº‹ä»¶æ˜¯ç”±äº‹ä»¶å¯¹è±¡å¥æŸ„å®Œæˆçš„ï¼Œè€Œä¸æ˜¯é€šè¿‡çª—å£æ¶ˆæ¯å®Œæˆçš„ã€‚\n\n\nè¯¥æ¨¡å‹è¦æ±‚åº”ç”¨ç¨‹åºä¸ºæ‰“ç®—ä½¿ç”¨çš„æ¯ä¸€ä¸ªå¥—æ¥å­—éƒ½åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚ä½¿ç”¨WSACreateEventå‡½æ•°å³å¯åˆ›å»ºäº‹ä»¶å¯¹è±¡ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\nWSAEVENT WSACreateEvent(void);\n\nWSACreateEvent å‡½æ•°è¿”å›ä¸€ä¸ªäººå·¥æ§åˆ¶(manual)ã€æ— åˆå§‹ä¿¡å·çš„äº‹ä»¶å¥æŸ„ã€‚åœ¨å¾—åˆ°äº‹ä»¶å¥æŸ„ä¹‹åï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨WSAEventSelectå‡½æ•°ï¼Œå°†å®ƒå’Œå¥—æ¥å­—ç›¸å…³è”ï¼ŒåŒæ—¶æ³¨å†Œæ„Ÿå…´è¶£çš„ç½‘ç»œäº‹ä»¶ã€‚\nint WSAEventSelect(  _In_ SOCKET   s,  _In_ WSAEVENT hEventObject,  _In_ long     lNetworkEvents);\n\nå…·ä½“çš„å‚æ•°è§£é‡Šå¯ä»¥å‚è€ƒMSDNï¼šhttps://msdn.microsoft.com/en-us/library/windows/desktop/ms741576(v=vs.85).aspx\nå’ŒCreateEventåˆ›å»ºçš„äº‹ä»¶ç±»å‹ï¼Œwindowsæä¾›äº†ç±»ä¼¼çš„APIæ¥é‡ç½®äº‹ä»¶ä¿¡å·ã€å…³é—­äº‹ä»¶ç­‰ï¼Œå¦‚WSAResetEvent, WSACloseEventç­‰ã€‚\nåŒæ ·æä¾›äº†å’Œ WaitForMultipleObjects ç±»ä¼¼çš„å‡½æ•°WSAWaitForMultipleEventsï¼Œç”¨äºç­‰å¾…å¤šä¸ªäº‹ä»¶ä¿¡å·ï¼Œå…¶å‚æ•°ä¹Ÿå’Œ WaitForMultipleObjects ç±»ä¼¼ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒWSAWaitForMultipleEvents æœ€å¤šåªæ”¯æŒåŒæ—¶ç­‰å¾…64ä¸ªäº‹ä»¶ï¼Œå¦‚æœéœ€è¦ç­‰å¾…è¶…è¿‡64ä¸ªäº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨å¤šä¸ªçº¿ç¨‹è°ƒç”¨å¤šæ¬¡ WSAWaitForMultipleEvents å‡½æ•°æ¥å®ç°ï¼Œè¿™ä¹Ÿæ˜¯WSAEventSelect æ¨¡å‹çš„ä¸€å¤§å¼Šç«¯ã€‚\nWSAEnumNetworkEvents å‡½æ•°ç”¨äºæŸ¥è¯¢æŒ‡å®šçš„SOCKETä¸Šæœ‰å“ªäº›æœ‰ä¿¡å·äº‹ä»¶ï¼ˆæ˜¯FD_READï¼Œè¿˜æ˜¯FD_WRITEï¼Œæˆ–è€…è¯´è¿˜æ˜¯FD_ACCEPTç­‰ï¼‰ï¼ŒhEventObject å‚æ•°ä¸ºäº‹ä»¶å¥æŸ„ï¼Œå‡½æ•°ä¼šè‡ªåŠ¨å°†äº‹ä»¶ç½®ä¸ºæ— ä¿¡å·çŠ¶æ€ï¼Œä¸éœ€è¦å†æ¬¡è°ƒç”¨ WSAResetEvent æ¥é‡ç½®ä¿¡å·ã€‚\nint WSAEnumNetworkEvents(  _In_  SOCKET             s,  _In_  WSAEVENT           hEventObject,  _Out_ LPWSANETWORKEVENTS lpNetworkEvents);\n\nå…·ä½“çš„ç”¨æ³•å¯ä»¥å‚è€ƒä¸‹é¢â€œç¤ºä¾‹ç¨‹åºâ€ã€‚\nç¤ºä¾‹æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç€é‡åœ¨åˆ—å‡º WSAEventSelect æ¨¡å‹çš„åŸºæœ¬ç”¨æ³•ï¼Œå¹¶æœªå®ç°å¤æ‚çš„é€»è¾‘ã€‚\næœåŠ¡ç«¯åœ¨æœ‰æ–°çš„å®¢æˆ·ç«¯è¿æ¥ä¸Šæ—¶ï¼Œç»™ä¸»åŠ¨å®¢æˆ·ç«¯å‘é€â€œhello, Iâ€™m server.â€æ¶ˆæ¯ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ç«¯é€€å‡ºæ—¶ä¼šå…³é—­æ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥ã€‚ \nå®¢æˆ·ç«¯åœ¨è¿æ¥ä¸ŠæœåŠ¡ç«¯ä¹‹åï¼Œä¼šä¸é—´æ–­æ¥æ”¶æœåŠ¡ç«¯çš„æ¶ˆæ¯ã€‚\nç¤ºä¾‹ç¨‹åºåªä½¿ç”¨äº†ä¸€ä¸ªçº¿ç¨‹æ¥ç­‰å¾…æœ€å¤š64ä¸ªäº‹ä»¶ï¼ˆä¹Ÿå°±æ˜¯æœ€å¤šåªæ”¯æŒ 64 - 1 = 63 ä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼‰ï¼Œå¦‚æœéœ€è¦æ”¯æŒæ›´å¤šçš„å®¢æˆ·ç«¯è¿æ¥ï¼Œå¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹æ¥ç­‰å¾…ã€‚\næœåŠ¡ç«¯#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;#include &lt;vector&gt;using namespace std;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const u_short kPort = 10001;const std::string kHelloServer = &quot;hello, I&#x27;m server.&quot;;HANDLE g_event_array[WSA_MAXIMUM_WAIT_EVENTS];   // å­˜å‚¨æ‰€æœ‰çš„äº‹ä»¶å¥æŸ„SOCKET g_socket_array[WSA_MAXIMUM_WAIT_EVENTS];  // å­˜å‚¨æ‰€æœ‰çš„socketint g_index = 0; // è®°å½•æ•°ç»„çš„ä¸‹æ ‡template&lt;typename T&gt;void RemoveArrayIndex(T arr[], int total, int index) &#123;\tif (index &gt; total)\t\treturn;\tfor (int i = index; i &lt; (total - 1); i++) &#123;\t\tarr[i] = arr[i + 1];\t&#125;&#125;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tdo\t&#123;\t\t// (1)\t\tg_socket_array[g_index] = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (g_socket_array[0] == INVALID_SOCKET) &#123;\t\t\tstd::cout &lt;&lt; &quot;create socket failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = htonl(INADDR_ANY);\t\taddr.sin_port = htons(kPort);\t\tif (bind(g_socket_array[g_index], reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;bind failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (3)\t\tg_event_array[g_index] = WSACreateEvent();\t\tWSAEventSelect(g_socket_array[g_index], g_event_array[g_index], FD_ACCEPT | FD_READ | FD_WRITE | FD_CLOSE);\t\t// (4)\t\tif (listen(g_socket_array[g_index], 5) == SOCKET_ERROR) &#123;\t\t\tstd::cout &lt;&lt; &quot;listen failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\tstd::cout &lt;&lt; &quot;listen on port: &quot; &lt;&lt; kPort &lt;&lt; std::endl;\t\t// (5)\t\t// è¯¥å¾ªç¯å¯ä»¥æ”¾åˆ°å­çº¿ç¨‹ä¸­\t\twhile (true) &#123;\t\t\tDWORD ret = WSAWaitForMultipleEvents(g_index + 1, g_event_array, FALSE, WSA_INFINITE, FALSE);\t\t\tif(ret == WSA_WAIT_FAILED || ret == WSA_WAIT_TIMEOUT)\t\t\t\tcontinue;\t\t\t// å¿½ç•¥ä¸Šé¢WSAWaitForMultipleEventsè¿”å›å€¼æ‰€è¡¨ç¤ºçš„indexã€‚éå†æ¯ä¸ªsocketï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ä¿¡å·ã€‚\t\t\tfor (int i = 0; i &lt;= g_index; i++) &#123;\t\t\t\tret = WSAWaitForMultipleEvents(1, &amp;g_event_array[i], FALSE, 0, FALSE);\t\t\t\tif (ret == WSA_WAIT_FAILED || ret == WSA_WAIT_TIMEOUT) &#123;\t\t\t\t\tcontinue;\t\t\t\t&#125;\t\t\t\tWSANETWORKEVENTS network_events;\t\t\t\t// WSAEnumNetworkEventå‡½æ•°ä¼šå°†äº‹ä»¶é‡ç½®ä¸ºæ— ä¿¡å·çŠ¶æ€\t\t\t\tWSAEnumNetworkEvents(g_socket_array[i], g_event_array[i], &amp;network_events);\t\t\t\tif (network_events.lNetworkEvents &amp; FD_ACCEPT) &#123;\t\t\t\t\tif (network_events.iErrorCode[FD_ACCEPT_BIT] != 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_ACCEPT failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_ACCEPT_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t\tSOCKET s = accept(g_socket_array[i], NULL, NULL);\t\t\t\t\tif (s == SOCKET_ERROR) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;accept failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t\tif (g_index &gt;= WSA_MAXIMUM_WAIT_EVENTS - 1) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;too many connection\\n&quot;;\t\t\t\t\t\tclosesocket(s);\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t\t\t\t\t\t\tg_index++;\t\t\t\t\tg_event_array[g_index] = WSACreateEvent();\t\t\t\t\tg_socket_array[g_index] = s;\t\t\t\t\tstd::cout &lt;&lt; &quot;new connection\\n&quot;;\t\t\t\t\tint err = send(s, (const char*)kHelloServer.c_str(), kHelloServer.length(), 0);\t\t\t\t\tif (err == SOCKET_ERROR) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;send failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tif (network_events.lNetworkEvents &amp; FD_READ) &#123;\t\t\t\t\tif (network_events.iErrorCode[FD_READ_BIT] != 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_READ failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_READ_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t\tchar buf[100] = &#123; 0 &#125;;\t\t\t\t\tint err = recv(g_socket_array[i], buf, 100, 0);\t\t\t\t\tif (err &gt; 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;recv: &quot; &lt;&lt; buf &lt;&lt; std::endl;\t\t\t\t\t&#125;\t\t\t\t\telse if (err == 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;connection closed.&quot; &lt;&lt; std::endl;\t\t\t\t\t\tclosesocket(g_socket_array[i]);\t\t\t\t\t\tWSACloseEvent(g_event_array[i]);\t\t\t\t\t\tRemoveArrayIndex(g_socket_array, g_index, i);\t\t\t\t\t\tRemoveArrayIndex(g_event_array, g_index, i);\t\t\t\t\t\tg_index--;\t\t\t\t\t&#125;\t\t\t\t\telse &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;recv failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\t\tclosesocket(g_socket_array[i]);\t\t\t\t\t\tWSACloseEvent(g_event_array[i]);\t\t\t\t\t\tRemoveArrayIndex(g_socket_array, g_index, i);\t\t\t\t\t\tRemoveArrayIndex(g_event_array, g_index, i);\t\t\t\t\t\tg_index--;\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tif (network_events.lNetworkEvents &amp; FD_WRITE) &#123;\t\t\t\t\tif (network_events.iErrorCode[FD_WRITE_BIT] != 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_WRITE failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_WRITE_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tif (network_events.lNetworkEvents &amp; FD_CLOSE) &#123;\t\t\t\t\tif (network_events.iErrorCode[FD_CLOSE_BIT] != 0) &#123;\t\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_CLOSE failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_CLOSE_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\t\tbreak;\t\t\t\t\t&#125;\t\t\t\t\tclosesocket(g_socket_array[i]);\t\t\t\t\tWSACloseEvent(g_event_array[i]);\t\t\t\t\tRemoveArrayIndex(g_socket_array, g_index, i);\t\t\t\t\tRemoveArrayIndex(g_event_array, g_index, i);\t\t\t\t\tg_index--;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125; // while\t&#125; while (false);\t// (6)\tfor (int i = 0; i &lt;= g_index; i++) &#123;\t\tclosesocket(g_socket_array[i]);\t\tWSACloseEvent(g_event_array[i]);\t&#125;\tWSACleanup();\treturn 0;&#125;\n\nå®¢æˆ·ç«¯#include &lt;winsock2.h&gt;#include &lt;iostream&gt;#include &lt;assert.h&gt;#include &lt;vector&gt;using namespace std;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const std::string kIP = &quot;127.0.0.1&quot;;const u_short kPort = 10001;HANDLE g_event;SOCKET g_socket;int main()&#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tdo\t&#123;\t\t// (1)\t\tg_socket = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (g_socket == INVALID_SOCKET) &#123;\t\t\tstd::cout &lt;&lt; &quot;create socket failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tg_event = WSACreateEvent();\t\tWSAEventSelect(g_socket, g_event, FD_CONNECT | FD_READ | FD_WRITE | FD_CLOSE);\t\t// (3)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = inet_addr(kIP.c_str());\t\taddr.sin_port = htons(kPort);\t\tif (connect(g_socket, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tint gle_err = WSAGetLastError();\t\t\tif (gle_err != WSAEWOULDBLOCK) &#123;\t\t\t\tstd::cout &lt;&lt; &quot;connect failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; &quot;\\n&quot;;\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\t// (4)\t\twhile (true) &#123;\t\t\tDWORD ret = WSAWaitForMultipleEvents(1, &amp;g_event, FALSE, WSA_INFINITE, FALSE);\t\t\tif (ret == WSA_WAIT_FAILED || ret == WSA_WAIT_TIMEOUT) &#123;\t\t\t\tcontinue;\t\t\t&#125;\t\t\tWSANETWORKEVENTS network_events;\t\t\t// WSAEnumNetworkEventå‡½æ•°ä¼šå°†äº‹ä»¶é‡ç½®ä¸ºæ— ä¿¡å·çŠ¶æ€\t\t\tWSAEnumNetworkEvents(g_socket, g_event, &amp;network_events);\t\t\tif (network_events.lNetworkEvents &amp; FD_CONNECT) &#123;\t\t\t\tif (network_events.iErrorCode[FD_CONNECT_BIT] != 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_CONNECT failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_CONNECT_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t\tstd::cout &lt;&lt; &quot;connect to server\\n&quot;;\t\t\t&#125;\t\t\tif (network_events.lNetworkEvents &amp; FD_READ) &#123;\t\t\t\tif (network_events.iErrorCode[FD_READ_BIT] != 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_READ failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_READ_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t\tchar buf[100] = &#123; 0 &#125;;\t\t\t\tint err = recv(g_socket, buf, 100, 0);\t\t\t\tif (err &gt; 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;recv: &quot; &lt;&lt; buf &lt;&lt; std::endl;\t\t\t\t&#125;\t\t\t\telse if (err == 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;connection closed.&quot; &lt;&lt; std::endl;\t\t\t\t\tclosesocket(g_socket);\t\t\t\t\tWSACloseEvent(g_event);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;recv failed, GLE: &quot; &lt;&lt; WSAGetLastError() &lt;&lt; std::endl;\t\t\t\t\tclosesocket(g_socket);\t\t\t\t\tWSACloseEvent(g_event);\t\t\t\t&#125;\t\t\t&#125;\t\t\tif (network_events.lNetworkEvents &amp; FD_WRITE) &#123;\t\t\t\tif (network_events.iErrorCode[FD_WRITE_BIT] != 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_WRITE failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_WRITE_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t&#125;\t\t\tif (network_events.lNetworkEvents &amp; FD_CLOSE) &#123;\t\t\t\tif (network_events.iErrorCode[FD_CLOSE_BIT] != 0) &#123;\t\t\t\t\tstd::cout &lt;&lt; &quot;FD_CLOSE failed with code: &quot; &lt;&lt; network_events.iErrorCode[FD_CLOSE_BIT] &lt;&lt; &quot;\\n&quot;;\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t\tclosesocket(g_socket);\t\t\t\tWSACloseEvent(g_event);\t\t\t&#125;\t\t&#125; // while\t&#125; while (false);\t// (5)\tclosesocket(g_socket);\tWSACloseEvent(g_event);\tWSACleanup();\treturn 0;&#125;\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["å¥—æ¥å­—I/Oæ¨¡å‹"]},{"title":"Windowså¥—æ¥å­—I/Oæ¨¡å‹(3)-WSAAsyncSelectæ¨¡å‹","url":"/post/2544551173.html","content":"åˆ©ç”¨ WSAAsyncSelect æ¨¡å‹ç»“åˆ Windows çª—å£æ¶ˆæ¯å¾ªç¯ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä¸€ä¸ªå¥—æ¥å­—ä¸Šæ¥æ”¶ä»¥ Windows æ¶ˆæ¯ä¸ºåŸºç¡€çš„ç½‘ç»œäº‹ä»¶é€šçŸ¥ã€‚\nåœ¨ä½¿ç”¨ WSAAsyncSelect æ¨¡å‹ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª Windows çª—å£ï¼Œå¹¶ä¸ºè¯¥çª—å£æä¾›ä¸€ä¸ªçª—å£è¿‡ç¨‹æ”¯æŒå‡½æ•°ï¼ˆWndProcï¼‰ã€‚\n\n\nå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\nint WSAAsyncSelect(  _In_ SOCKET       s,  _In_ HWND         hWnd,  _In_ unsigned int wMsg,  _In_ long         lEvent);\n\nå‚æ•°è§£é‡Šï¼š\n\nsæŒ‡å®šå¥—æ¥å­—ã€‚\n\nhWndæŒ‡å®šä¸€ä¸ªçª—å£å¥æŸ„ï¼Œå®ƒè¡¨ç¤ºç½‘ç»œäº‹ä»¶å‘ç”Ÿä¹‹åï¼Œç”¨æ¥æ¥æ”¶æ¶ˆæ¯é€šçŸ¥çš„é‚£ä¸ªçª—å£ã€‚\n\nwMsgè¡¨ç¤ºåœ¨ç½‘ç»œäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œçª—å£æ”¶åˆ°çš„æ¶ˆæ¯ã€‚\n\nlEventä»£è¡¨ä¸€ä¸ªæ©ç ï¼ŒæŒ‡å®šåº”ç”¨ç¨‹åºæ„Ÿå…´è¶£çš„ç½‘ç»œäº‹ä»¶ï¼Œåªæœ‰è¿™äº›ç½‘ç»œäº‹ä»¶å‘ç”Ÿæ—¶æ‰ä¼šå‘é€ wMsg åˆ° hWnd çª—å£ã€‚\näº‹ä»¶ç±»å‹åŒ…æ‹¬ï¼šFD_READï¼ŒFD_WRITEï¼ŒFD_CLOSEï¼ŒFD_CONNECTï¼ŒFD_ACCEPTã€‚\nå¯¹äºFD_CONNECTï¼ŒFD_ACCEPTï¼ŒæœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ FD_ACCEPTï¼Œå®¢æˆ·ç«¯ä¸€èˆ¬ä½¿ç”¨FD_CONNECTã€‚\nè‹¥å°†lEventè®¾ç½®ä¸º0ï¼Œåˆ™è¡¨ç¤ºåœæ­¢æ¥æ”¶è¯¥å¥—æ¥å­—ä¸Šçš„æ‰€æœ‰ç½‘ç»œäº‹ä»¶é€šçŸ¥ã€‚\n\n\nä¸€æ—¦è°ƒç”¨WSAAsyncSelectå‡½æ•°åœ¨å¥—æ¥å­—ä¸Šå¯ç”¨äº†äº‹ä»¶é€šçŸ¥ï¼Œé™¤éæ˜ç¡®è°ƒç”¨closesocketï¼Œæˆ–è€…å†æ¬¡è°ƒç”¨WSAAsyncSelecté‡æ–°è®¾ç½®ç½‘ç»œäº‹ä»¶ç±»å‹ï¼Œå¦åˆ™ï¼Œäº‹ä»¶é€šçŸ¥å°†æ€»æ˜¯æœ‰æ•ˆçš„ã€‚\n\nç”±äºWSAAsyncSelectæ¨¡å‹éœ€è¦ç»“åˆWindowsçª—å£æ¥ä½¿ç”¨ï¼Œå› æ­¤ä¸é€‚é‚£äº›æ²¡æœ‰ç•Œé¢çš„æœåŠ¡ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨WSAEventSelectæ¨¡å‹æ¥ä»£æ›¿ã€‚\n\nç¤ºä¾‹å› ä¸ºé‡ç‚¹ä¸åœ¨ç•Œé¢ç¼–ç¨‹ä¸Šé¢ï¼Œæ‰€ä»¥ç¤ºä¾‹ä¸­ä½¿ç”¨TraceMsgAå‡½æ•°æ‰“å°ä¿¡æ¯åˆ°Visual Studioè¾“å‡ºçª—å£æˆ– Debugviewã€‚\n\nTraceMsgA åªæ˜¯å¯¹ OutputDebugStringA çš„ç®€å•å°è£…ã€‚\n\nç¤ºä¾‹ä¸­çš„ InitWindow å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªç®€å•çš„ã€ç©ºç™½çš„çª—å£ï¼Œå°†å¥æŸ„å­˜å‚¨åœ¨å…¨å±€å˜é‡g_hwndä¸­ï¼ŒWndProcä¸ºè¯¥çª—å£çš„å¤„ç†è¿‡ç¨‹å‡½æ•°ã€‚\næœåŠ¡ç«¯åœ¨æœ‰æ–°çš„å®¢æˆ·ç«¯è¿æ¥ä¸Šæ—¶ï¼Œç»™å®¢æˆ·ç«¯å‘é€â€œhello, Iâ€™m server.â€æ¶ˆæ¯ï¼Œè€Œä¸”æœåŠ¡ç«¯åœ¨é€€å‡ºæ—¶ï¼Œä¼šä¸»åŠ¨å…³é—­æ‰€æœ‰çš„å®¢æˆ·ç«¯è¿æ¥ã€‚\nå®¢æˆ·ç«¯è¿æ¥ä¸ŠæœåŠ¡ç«¯ä¹‹åï¼Œå°†æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„æ¶ˆæ¯ã€‚\næœåŠ¡ç«¯#include &lt;winsock2.h&gt;#include &lt;vector&gt;#include &lt;strsafe.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const u_short kPort = 10001;const std::string kHelloServer = &quot;hello, I&#x27;m server.&quot;;#define WUM_SOCKET (WM_USER+1)HWND g_hwnd;SOCKET socket_srv = INVALID_SOCKET;std::vector&lt;SOCKET&gt; clients;void TraceMsgA(const char *lpFormat, ...) &#123;\tif (!lpFormat)\t\treturn;\tchar *pMsgBuffer = NULL;\tunsigned int iMsgBufCount = 0;\tva_list arglist;\tva_start(arglist, lpFormat);\tHRESULT hr = STRSAFE_E_INSUFFICIENT_BUFFER;\twhile (hr == STRSAFE_E_INSUFFICIENT_BUFFER) &#123;\t\tiMsgBufCount += 1024;\t\tif (pMsgBuffer) &#123;\t\t\tfree(pMsgBuffer);\t\t\tpMsgBuffer = NULL;\t\t&#125;\t\tpMsgBuffer = (char*)malloc(iMsgBufCount * sizeof(char));\t\tif (!pMsgBuffer) &#123;\t\t\tbreak;\t\t&#125;\t\thr = StringCchVPrintfA(pMsgBuffer, iMsgBufCount, lpFormat, arglist);\t&#125;\tva_end(arglist);\tif (hr == S_OK) &#123;\t\tOutputDebugStringA(pMsgBuffer);\t&#125;\tif (pMsgBuffer) &#123;\t\tfree(pMsgBuffer);\t\tpMsgBuffer = NULL;\t&#125;&#125;LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)&#123;\tint err;\tSOCKET s;\tchar buf[100] = &#123; 0 &#125;;\tswitch (message) &#123;\t// (5)\tcase WUM_SOCKET:\t\tif (WSAGETSELECTERROR(lParam)) &#123;\t\t\tclosesocket((SOCKET)wParam);\t\t\tbreak;\t\t&#125;\t\tswitch (WSAGETSELECTEVENT(lParam))\t\t&#123;\t\tcase FD_ACCEPT:\t\t\ts = accept((SOCKET)wParam, NULL, NULL);\t\t\tclients.push_back(s);\t\t\tWSAAsyncSelect(s, g_hwnd, WUM_SOCKET, FD_READ | FD_WRITE | FD_CLOSE);\t\t\tTraceMsgA(&quot;new connection\\n&quot;);\t\t\terr = send(s, (const char*)kHelloServer.c_str(), kHelloServer.length(), 0);\t\t\tif (err == SOCKET_ERROR) &#123;\t\t\t\tTraceMsgA(&quot;send failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\t\tbreak;\t\t\t&#125;\t\t\tbreak;\t\tcase FD_READ:\t\t\terr = recv((SOCKET)wParam, buf, 100, 0);\t\t\tif (err &gt; 0) &#123;\t\t\t\tTraceMsgA(&quot;recv: %s\\n&quot;, buf);\t\t\t&#125;\t\t\telse if (err == 0) &#123;\t\t\t\tTraceMsgA(&quot;connection closed\\n&quot;);\t\t\t\tclosesocket((SOCKET)wParam);\t\t\t&#125;\t\t\telse &#123;\t\t\t\tTraceMsgA(&quot;recv failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\t\tclosesocket((SOCKET)wParam);\t\t\t&#125;\t\t\tbreak;\t\tcase FD_WRITE:\t\t\tbreak;\t\tcase FD_CLOSE:\t\t\tclosesocket((SOCKET)wParam);\t\t\tfor (std::vector&lt;SOCKET&gt;::iterator it = clients.begin(); it != clients.end(); it++) &#123;\t\t\t\tif (*it == (SOCKET)wParam) &#123;\t\t\t\t\tclients.erase(it);\t\t\t\t\tbreak;\t\t\t\t&#125;\t\t\t&#125;\t\t\tbreak;\t\t&#125;\t\tbreak;\tcase WM_DESTROY:\t\tPostQuitMessage(0);\t\tbreak;\tdefault:\t\treturn DefWindowProc(hWnd, message, wParam, lParam);\t&#125;\treturn 0;&#125;void InitWindow(HINSTANCE hInstance) &#123;\tWCHAR szWindowClass[100] = L&quot;Test&quot;;\tWNDCLASSEX wcex = &#123; sizeof(WNDCLASSEX) &#125;;\twcex.style = CS_HREDRAW | CS_VREDRAW;\twcex.lpfnWndProc = WndProc;\t\twcex.cbClsExtra = 0;\twcex.cbWndExtra = 0;\twcex.hInstance = hInstance;\twcex.lpszClassName = szWindowClass;\tRegisterClassExW(&amp;wcex);\tg_hwnd = CreateWindowW(szWindowClass, L&quot;server&quot;, WS_OVERLAPPEDWINDOW,\t\tCW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\tif (g_hwnd) &#123;\t\tShowWindow(g_hwnd, SW_SHOW);\t\tUpdateWindow(g_hwnd);\t&#125;&#125;int APIENTRY wWinMain(_In_ HINSTANCE hInstance,                     _In_opt_ HINSTANCE hPrevInstance,                     _In_ LPWSTR    lpCmdLine,                     _In_ int       nCmdShow)&#123;    UNREFERENCED_PARAMETER(hPrevInstance);    UNREFERENCED_PARAMETER(lpCmdLine);\tInitWindow(hInstance);\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tdo\t&#123;\t\t// (1)\t\tsocket_srv = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (socket_srv == INVALID_SOCKET) &#123;\t\t\tTraceMsgA(&quot;create socket failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = htonl(INADDR_ANY);\t\taddr.sin_port = htons(kPort);\t\tif (bind(socket_srv, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tTraceMsgA(&quot;bind failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\tbreak;\t\t&#125;\t\t// (3)\t\tWSAAsyncSelect(socket_srv, g_hwnd, WUM_SOCKET, FD_ACCEPT | FD_READ | FD_WRITE | FD_CLOSE);\t\t// (4)\t\tif (listen(socket_srv, 5) == SOCKET_ERROR) &#123;\t\t\tTraceMsgA(&quot;listen failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\tbreak;\t\t&#125;\t\tTraceMsgA(&quot;listen on port: %d\\n&quot;, kPort);\t&#125; while (false);    MSG msg;    while (GetMessage(&amp;msg, nullptr, 0, 0)) &#123;\t\tTranslateMessage(&amp;msg);\t\tDispatchMessage(&amp;msg);    &#125;\tfor (std::vector&lt;SOCKET&gt;::iterator it = clients.begin(); it != clients.end(); it++) &#123;\t\tclosesocket(*it);\t&#125;\t// (6)\tclosesocket(socket_srv);\tWSACleanup();    return 0;&#125;\n\nå®¢æˆ·ç«¯#include &lt;winsock2.h&gt;#include &lt;vector&gt;#include &lt;strsafe.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)const std::string kIP = &quot;127.0.0.1&quot;;const u_short kPort = 10001;#define WUM_SOCKET (WM_USER+1)HWND g_hwnd;void TraceMsgA(const char *lpFormat, ...) &#123;\tif (!lpFormat)\t\treturn;\tchar *pMsgBuffer = NULL;\tunsigned int iMsgBufCount = 0;\tva_list arglist;\tva_start(arglist, lpFormat);\tHRESULT hr = STRSAFE_E_INSUFFICIENT_BUFFER;\twhile (hr == STRSAFE_E_INSUFFICIENT_BUFFER) &#123;\t\tiMsgBufCount += 1024;\t\tif (pMsgBuffer) &#123;\t\t\tfree(pMsgBuffer);\t\t\tpMsgBuffer = NULL;\t\t&#125;\t\tpMsgBuffer = (char*)malloc(iMsgBufCount * sizeof(char));\t\tif (!pMsgBuffer) &#123;\t\t\tbreak;\t\t&#125;\t\thr = StringCchVPrintfA(pMsgBuffer, iMsgBufCount, lpFormat, arglist);\t&#125;\tva_end(arglist);\tif (hr == S_OK) &#123;\t\tOutputDebugStringA(pMsgBuffer);\t&#125;\tif (pMsgBuffer) &#123;\t\tfree(pMsgBuffer);\t\tpMsgBuffer = NULL;\t&#125;&#125;LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)&#123;\tint err;\tSOCKET s;\tchar buf[100] = &#123; 0 &#125;;\tswitch (message) &#123;\t// (4)\tcase WUM_SOCKET:\t\tif (WSAGETSELECTERROR(lParam)) &#123;\t\t\tclosesocket((SOCKET)wParam);\t\t\tTraceMsgA(&quot;connect failed, %d\\n&quot;, WSAGETSELECTERROR(lParam));\t\t\tbreak;\t\t&#125;\t\tswitch (WSAGETSELECTEVENT(lParam))\t\t&#123;\t\tcase FD_CONNECT:\t\t\tTraceMsgA(&quot;connection to server\\n&quot;);\t\t\tbreak;\t\tcase FD_READ:\t\t\terr = recv((SOCKET)wParam, buf, 100, 0);\t\t\tif (err &gt; 0) &#123;\t\t\t\tTraceMsgA(&quot;recv: %s\\n&quot;, buf);\t\t\t&#125;\t\t\telse if (err == 0) &#123;\t\t\t\tclosesocket((SOCKET)wParam);\t\t\t\tTraceMsgA(&quot;connection closed\\n&quot;);\t\t\t&#125;\t\t\telse &#123;\t\t\t\tclosesocket((SOCKET)wParam);\t\t\t\tTraceMsgA(&quot;recv failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\t&#125;\t\t\tbreak;\t\tcase FD_WRITE:\t\t\tbreak;\t\tcase FD_CLOSE:\t\t\tclosesocket((SOCKET)wParam);\t\t\tTraceMsgA(&quot;connection closed\\n&quot;);\t\t\tbreak;\t\t&#125;\t\tbreak;\tcase WM_DESTROY:\t\tPostQuitMessage(0);\t\tbreak;\tdefault:\t\treturn DefWindowProc(hWnd, message, wParam, lParam);\t&#125;\treturn 0;&#125;void InitWindow(HINSTANCE hInstance) &#123;\tWCHAR szWindowClass[100] = L&quot;Test&quot;;\tWNDCLASSEX wcex = &#123; sizeof(WNDCLASSEX) &#125;;\twcex.style = CS_HREDRAW | CS_VREDRAW;\twcex.lpfnWndProc = WndProc;\twcex.cbClsExtra = 0;\twcex.cbWndExtra = 0;\twcex.hInstance = hInstance;\twcex.lpszClassName = szWindowClass;\tRegisterClassExW(&amp;wcex);\tg_hwnd = CreateWindowW(szWindowClass, L&quot;client&quot;, WS_OVERLAPPEDWINDOW,\t\tCW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\tif (g_hwnd) &#123;\t\tShowWindow(g_hwnd, SW_SHOW);\t\tUpdateWindow(g_hwnd);\t&#125;&#125;int APIENTRY wWinMain(_In_ HINSTANCE hInstance,\t_In_opt_ HINSTANCE hPrevInstance,\t_In_ LPWSTR    lpCmdLine,\t_In_ int       nCmdShow)&#123;\tUNREFERENCED_PARAMETER(hPrevInstance);\tUNREFERENCED_PARAMETER(lpCmdLine);\tInitWindow(hInstance);\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket_ = INVALID_SOCKET;\tdo\t&#123;\t\t// (1)\t\tsocket_ = ::socket(AF_INET, SOCK_STREAM, 0);\t\tif (socket_ == INVALID_SOCKET) &#123;\t\t\tTraceMsgA(&quot;create socket failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\tbreak;\t\t&#125;\t\t// (2)\t\tWSAAsyncSelect(socket_, g_hwnd, WUM_SOCKET, FD_CONNECT | FD_READ | FD_WRITE | FD_CLOSE);\t\t// (3)\t\tstruct sockaddr_in addr = &#123; 0 &#125;;\t\taddr.sin_family = AF_INET;\t\taddr.sin_addr.s_addr = inet_addr(kIP.c_str());\t\taddr.sin_port = htons(kPort);\t\tif (connect(socket_, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr)) == SOCKET_ERROR) &#123;\t\t\tint gle_err = WSAGetLastError();\t\t\tif (gle_err != WSAEWOULDBLOCK) &#123;\t\t\t\tTraceMsgA(&quot;connect failed, GLE: %d\\n&quot;, WSAGetLastError());\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t&#125; while (false);\tMSG msg;\twhile (GetMessage(&amp;msg, nullptr, 0, 0)) &#123;\t\tTranslateMessage(&amp;msg);\t\tDispatchMessage(&amp;msg);\t&#125;\t// (5)\tclosesocket(socket_);\tWSACleanup();\treturn 0;&#125;\n\nğŸ“Œé™äºç¯‡å¹…ï¼Œä¸åœ¨æ­¤æä¾›å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¦‚éœ€è·å–å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥è”ç³»æˆ‘\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["å¥—æ¥å­—I/Oæ¨¡å‹"]},{"title":"ä»å…¥é—¨åˆ°æ´å¯Ÿï¼šç½‘ç»œæŠ“åŒ…åŸºç¡€ä¸æ ¸å¿ƒå·¥å…·å®æˆ˜æŒ‡å—","url":"/post/657651408.html","content":"\n  0c2e8fc22e23fc6a95492c4a31d13ed2a8992ce16f749d3a8a5296b50a931eeef7f968d8fd6530f189cf2ba2d61c0449129fe176abd95a8e5d264fa36bb8662736da8b3290aa5b53fbb762b925e52fe7932bb2ebd404623874a577980c340996ff14f6208a8341ac6941794503754914f524d23289dec3c8b9272fd989e8684644e6adb3ee672d41ca2ebd7df449e66e1becb5e3ceb97214be082a5ffd8e9bcb5b0ac624177b9500cfd7155bdc98e52c15ae00235f0df1f61653ff961bb706f8104727e7b1920967053b461b359295f2a729dc4e64093570670aacd5448cbfd8e126b77e2de3fd4fc220eefe178e537e526cfae03230fc43015a0523b102f3f283a411b2bb14bbaa6c5ebc0522751320b68aea034e99a3f743af747b262bd8b6abc536e92ebf6d8c7aff2bf45ea4750076b8bc97f5db763e378bd30fcecc50cd548cac914601b5e3ab731ecfbb202ba55ead96bb22192f24422e380ac1cf63e3d0de5d5e143de67b960cdfac3a5eab49e07bdd5e25cf0869b7bc49e2f9b26185d3e8c65459936b075cfcf9ba6ad0657d0b006cad6847bc78f9d4fc4f5f11bfcd6c0ece457863fb268c18247dd8bcbce7bdaf3fcf41fcb34efeebcd5648bd7ee49cab8fa6f2fceb1f7360f6939680d7cd564eabedf99eb1d31d7f747566a24a490acbe5060083b54c4d6525c5f15a758ad14d2fa0f470915cb2956528cf3e643f42baf2d8e1ba7ac1776aabb3e2f694ec600e0a6631043251d41cf075b93b591509e29dc6e7270d0a4e8172e4ddd2e2ef154a4381c44c56dd12eacef02e2248fec7490a5a0aed5aabb138e82415889c0dad4b7141502e07c69cc2624725ed8d3dadffb04c88c6a8f109206708f72e167c52210ed67c1b309924019199221ab5d1289ade704ad99ae7234f0bed132c8833c3eff11f43949c44e322109ad38a8b8f38f510c8e39f9aa7caaec90bac695f12a4bf82052dcddb45c4f52b4ab13c95e3\n  \n    \n      \n      \n        è¯·è¾“å…¥å¯†ç \n      \n    \n  \n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"ç½‘ç»œåè®®(2)--ARPå’ŒRARPåè®®","url":"/post/3034381124.html","content":"ARP (Address Resolution Protocol) åœ°å€è§£æåè®®ï¼Œä½äº TCP&#x2F;IP åè®®æ ˆä¸­çš„é“¾è·¯å±‚ã€‚\nå½“å±€åŸŸç½‘å†…ä¸»æœºé—´ï¼ˆæˆ–è€…æ˜¯ä¸»æœºä¸ç½‘å…³é—´ï¼‰éœ€è¦é€šä¿¡æ—¶ï¼Œé€šè¿‡ä½¿ç”¨ ARP åè®®è·å–ç›®æ ‡ IP åœ°å€æ‰€å¯¹åº”çš„ç¡¬ä»¶ MAC åœ°å€ï¼Œç„¶ååœ¨ä¸»æœºé—´é€šè¿‡ MAC åœ°å€æ¥å®Œæˆæ•°æ®åŒ…çš„å‘é€å’Œæ¥æ”¶ã€‚\n\n\nä¸€ã€ARP åè®®1.1 ARP åè®®ä»‹ç»é€šè¿‡ä½¿ç”¨ARPåè®®è·å–ç›®æ ‡IPåœ°å€æ‰€å¯¹åº”ç¡¬ä»¶MACåœ°å€çš„å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\næœ¬åœ°ä¸»æœºåœ¨å±€åŸŸç½‘ä¸­å¹¿æ’­ARP è¯·æ±‚ï¼ŒARP è¯·æ±‚æ•°æ®å¸§ä¸­åŒ…å«ç›®çš„ä¸»æœºçš„ IP åœ°å€ã€‚æ„æ€æ˜¯â€œå¦‚æœä½ æ˜¯è¿™ä¸ª IP åœ°å€çš„æ‹¥æœ‰è€…ï¼Œè¯·å›ç­”ä½ çš„ç¡¬ä»¶ MAC åœ°å€â€ã€‚\nç›®çš„ä¸»æœºçš„ ARP å±‚è§£æè¿™ä»½å¹¿æ’­æŠ¥æ–‡ï¼Œè¯†åˆ«å‡ºæ˜¯è¯¢é—®å…¶ç¡¬ä»¶åœ°å€ã€‚äºæ˜¯å‘é€ï¼ˆå•æ’­ï¼‰ARP åº”ç­”åŒ…ï¼Œé‡Œé¢åŒ…å« IP åœ°å€åŠå…¶å¯¹åº”çš„ç¡¬ä»¶åœ°å€ã€‚\næœ¬åœ°ä¸»æœºæ”¶åˆ° ARP åº”ç­”åï¼ŒçŸ¥é“äº†ç›®çš„åœ°å€çš„ç¡¬ä»¶åœ°å€ï¼Œä¹‹åçš„æ•°æ®æŠ¥å°±å¯ä»¥ä¼ é€äº†ã€‚\n\n\n1.2 ARP ç¼“å­˜å¦‚æœåƒä¸Šé¢è¯´çš„é‚£æ ·ï¼Œæ¯æ¬¡å‘åŒ…ä¹‹å‰éƒ½è¦å‘é€ ARP è¯·æ±‚ç¡¬ä»¶åœ°å€ï¼Œè¿™æ ·ä¼šä¸ä¼šæ•ˆç‡å¤ªä½ï¼Œå®é™…ä¸Š ARP çš„è¿è¡Œæ˜¯éå¸¸é«˜æ•ˆçš„ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸€ä¸ªä¸»æœºä¸Šéƒ½æœ‰ä¸€ä¸ª ARP é«˜é€Ÿç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤ arp -a è·å–æœ¬æœº ARP é«˜é€Ÿç¼“å­˜çš„æ‰€æœ‰å†…å®¹ï¼š\narp -aæ¥å£: 192.168.42.26 --- 0xb  Internet åœ°å€         ç‰©ç†åœ°å€              ç±»å‹  192.168.1.1           00-00-00-00-00-ff     é™æ€  192.168.40.1          f8-75-88-c2-df-c1     åŠ¨æ€  192.168.40.74         c8-5b-76-86-c6-06     åŠ¨æ€  192.168.40.245        38-d5-47-e1-8a-2f     åŠ¨æ€  192.168.42.131        60-a4-4c-65-9f-68     åŠ¨æ€  224.14.51.28          01-00-5e-0e-33-1c     é™æ€  224.19.133.150        01-00-5e-13-85-96     é™æ€  224.49.6.212          01-00-5e-31-06-d4     é™æ€  224.50.134.225        01-00-5e-32-86-e1     é™æ€  224.68.111.100        01-00-5e-44-6f-64     é™æ€  224.80.154.130        01-00-5e-50-9a-82     é™æ€  224.88.174.75         01-00-5e-58-ae-4b     é™æ€\n\né€šè¿‡å‘½ä»¤ arp -d å¯ä»¥æ¸…é™¤ arp ç¼“å­˜ã€‚\n1.3 ARP ç¼“å­˜ç”Ÿå­˜å‘¨æœŸåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒWindows Server 2003 å®¶æ—å’Œ Windows XP ä¸­ï¼ŒARP ç¼“å­˜ä¸­çš„è¡¨é¡¹ä»…å­˜å‚¨ 2 åˆ†é’Ÿã€‚å¦‚æœä¸€ä¸ª ARP ç¼“å­˜è¡¨é¡¹åœ¨ 2 åˆ†é’Ÿå†…è¢«ç”¨åˆ°ï¼Œåˆ™å…¶æœŸé™å†å»¶é•¿ 2 åˆ†é’Ÿï¼Œç›´åˆ°æœ€å¤§ç”Ÿå‘½æœŸé™ 10 åˆ†é’Ÿä¸ºæ­¢ã€‚è¶…è¿‡ 10 åˆ†é’Ÿçš„æœ€å¤§æœŸé™åï¼ŒARP ç¼“å­˜è¡¨é¡¹å°†è¢«ç§»å‡ºï¼Œå¹¶ä¸”é€šè¿‡å¦å¤–ä¸€ä¸ª ARP è¯·æ±‚æ¥è·å¾—æ–°çš„å¯¹åº”å…³ç³»ã€‚\nARP ç¼“å­˜è¡¨é¡¹çš„å­˜æ”¾æ—¶é—´å¯ä»¥é€šè¿‡æ”¹å˜ ArpCacheLife å’Œ ArpCacheMinReferencedLife çš„æ³¨å†Œè¡¨å€¼æ¥é‡æ–°è®¾ç½®ã€‚\nHKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services/Tcpip/Parametersé”®å€¼ï¼šArpCacheLifeï¼Œè®¾ç½®æœªè¢«ä½¿ç”¨çš„ARPç¼“å­˜è¡¨é¡¹å¯ä»¥è¢«ä¿æŒçš„æ—¶é—´ï¼Œç±»å‹ä¸º DWORDï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤å€¼ä¸º120ã€‚ArpCacheMinReferencedLifeï¼Œè®¾ç½®è¢«é‡å¤ä½¿ç”¨çš„è¡¨é¡¹å¯ä»¥åœ¨ARPç¼“å­˜ä¸­å­˜æ”¾çš„æ—¶é—´ï¼Œç±»å‹ä¸º DWORDï¼Œå•ä½ä¸ºç§’ï¼Œé»˜è®¤å€¼ä¸º600ã€‚ArpCacheMinReferencedLifeå’ŒArpCacheLifeçš„å€¼çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼šå¦‚æœ ArpCacheLife &gt;= ArpCacheMinReferencedLifeï¼Œåˆ™è¢«ä½¿ç”¨å’Œæœªè¢«ä½¿ç”¨çš„ARPç¼“å­˜è¡¨é¡¹å¯å­˜å‚¨çš„æ—¶é—´éƒ½æ˜¯ ArpCacheLifeã€‚å¦‚æœ ArpCacheLife &lt; ArpCacheMinReferencedLifeï¼Œåˆ™æœªè¢«ä½¿ç”¨çš„ARPç¼“å­˜è¡¨é¡¹åœ¨ ArpCacheLife ç§’çš„æ—¶é—´åå°±è¿‡æœŸäº†ï¼Œè¢«ä½¿ç”¨çš„è¡¨é¡¹çš„ç”Ÿå­˜æœŸä¸ºArpCacheMinReferencedLifeç§’ã€‚æ³¨æ„ï¼šè¿™äº›é”®å€¼é»˜è®¤æ˜¯ä¸å­˜åœ¨çš„ï¼Œå¦‚æœä½ æƒ³ä¿®æ”¹ï¼Œå¿…é¡»è‡ªè¡Œåˆ›å»ºï¼›ä¿®æ”¹åè¿˜éœ€é‡å¯è®¡ç®—æœºæ‰ç”Ÿæ•ˆã€‚\n\n1.3 ARP å¸§æ ¼å¼\nä»¥å¤ªç½‘ç›®çš„åœ°å€ï¼šç›®çš„ä¸»æœºçš„ç¡¬ä»¶åœ°å€ã€‚ç›®çš„åœ°å€å…¨éƒ¨ä¸º 1 çš„ç‰¹æ®Šåœ°å€æ˜¯å¹¿æ’­åœ°å€ã€‚ä»¥å¤ªç½‘æºåœ°å€ï¼šæºä¸»æœºçš„ç¡¬ä»¶åœ°å€ã€‚å¸§ç±»å‹ï¼šå¯¹äºARPåè®®ï¼Œè¯¥å­—æ®µä¸º0x0806ã€‚å¯¹äºRARPåè®®ï¼Œè¯¥å­—æ®µä¸º0x8035ã€‚ç¡¬ä»¶ç±»å‹ï¼šè¡¨ç¤ºç¡¬ä»¶åœ°å€çš„ç±»å‹ã€‚å€¼ä¸º1æ—¶è¡¨ç¤ºä»¥å¤ªç½‘åœ°å€ã€‚ARPåè®®ä¸ä»…ä»…åº”ç”¨äºä»¥å¤ªç½‘åè®®ï¼Œè¿˜å¯ä»¥æ”¯æŒåˆ«çš„é“¾è·¯å±‚åè®®ã€‚åè®®ç±»å‹ï¼šè¡¨ç¤ºè¦æ˜ å°„çš„åè®®åœ°å€ç±»å‹ã€‚å€¼ä¸º0x0800æ—¶è¡¨ç¤ºIPåè®®ã€‚ç¡¬ä»¶åœ°å€é•¿åº¦ï¼šä¸ç¡¬ä»¶ç±»å‹å¯¹åº”çš„ç¡¬ä»¶åœ°å€çš„é•¿åº¦ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚å¦‚æœæ˜¯ä»¥å¤ªç½‘ï¼Œåˆ™æ˜¯6å­—èŠ‚ï¼ˆMACé•¿åº¦ï¼‰ã€‚åè®®åœ°å€é•¿åº¦ï¼šä¸åè®®ç±»å‹å¯¹åº”çš„åè®®åœ°å€é•¿åº¦ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚å¦‚æœæ˜¯IPåè®®ï¼Œåˆ™æ˜¯4å­—èŠ‚ï¼ˆIPåœ°å€é•¿åº¦ï¼‰ã€‚æ“ä½œç±»å‹ï¼ˆopï¼‰ï¼šå››ç§æ“ä½œç±»å‹ã€‚ARPè¯·æ±‚ï¼ˆ1ï¼‰ï¼ŒARPåº”ç­”ï¼ˆ2ï¼‰ï¼ŒRARPè¯·æ±‚ï¼ˆ3ï¼‰ï¼ŒRARPåº”ç­”ï¼ˆ4ï¼‰ã€‚å‘é€ç«¯ç¡¬ä»¶åœ°å€ï¼šå¦‚æœæ˜¯ä»¥å¤ªç½‘ï¼Œåˆ™æ˜¯æºä¸»æœºä»¥å¤ªç½‘åœ°å€ï¼Œæ­¤å¤„å’Œä»¥å¤ªç½‘å¤´ä¸­çš„æºåœ°å€å¯¹åº”ã€‚å‘é€ç«¯åè®®åœ°å€ï¼šå¦‚æœæ˜¯IPåè®®ï¼Œåˆ™è¡¨ç¤ºæºä¸»æœºçš„IPåœ°å€ã€‚ç›®çš„ç«¯ç¡¬ä»¶åœ°å€ï¼šå¦‚æœæ˜¯ä»¥å¤ªç½‘ï¼Œåˆ™æ˜¯ç›®çš„ä»¥å¤ªç½‘åœ°å€ï¼Œå’Œä»¥å¤ªç½‘å¤´ä¸­çš„ç›®çš„åœ°å€å¯¹åº”ã€‚ç›®çš„ç«¯åè®®åœ°å€ï¼šå¦‚æœæ˜¯IPåè®®ï¼Œåˆ™è¡¨ç¤ºæºä¸»æœºè¦è¯·æ±‚ç¡¬ä»¶åœ°å€çš„IPåœ°å€ã€‚\n\nå¯¹åº”ARPè¯·æ±‚åŒ…æ¥è¯´ï¼Œç›®çš„ç«¯çš„ç¡¬ä»¶åœ°å€å­—æ®µæ— é¡»å¡«å……ï¼Œå…¶ä»–å­—æ®µéƒ½éœ€è¦å¡«å……ï¼›å¯¹äºARPå“åº”åŒ…æ¥è¯´ï¼Œæ‰€æœ‰å­—æ®µéƒ½éœ€è¦å¡«å……ã€‚\n1.4 ARP æ¬ºéª—ARP æ¬ºéª—ä¸€èˆ¬ç›®çš„æ˜¯é€šè¿‡æŸç§æ–¹å¼æŠŠè‡ªå·±ä¼ªè£…æˆç½‘å…³ï¼Œä»è€Œæ¬ºéª—ç›®æ ‡æœºå™¨ï¼Œä½¿æœ¬åº”å‘é€åˆ°çœŸå®ç½‘å…³çš„æ•°æ®åŒ…å‘é€åˆ°æ¬ºéª—è€…çš„æœºå™¨ã€‚\nç°æœ‰å¦‚ä¸‹ç½‘ç»œï¼š\n\n1.4.1 å¦‚ä½•ä¼ªè£…æˆç½‘å…³ï¼Ÿæˆ‘ä»¬ä»¥ä¸»æœº A è¯·æ±‚ www.csdn.net ç½‘ç«™ä¸ºä¾‹ï¼Œæ¶‰åŠåˆ° ARP çš„ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š\n\nä¸»æœº A é€šè¿‡æµè§ˆå™¨æ‰“å¼€ www.csdn.netï¼ˆå‡è®¾é€šè¿‡ DNS å¾—åˆ°çš„ IP æ˜¯ 47.95.163.175ï¼‰ï¼Œç„¶åç»„è£…éœ€è¦å‘é€ http è¯·æ±‚åŒ…ã€‚\n\nä¸»æœº A å‡†å¤‡æ ¹æ®é»˜è®¤è·¯ç”±ï¼ˆç½‘å…³ï¼‰å°†æ•°æ®åŒ…å‘é€ç»™ 192.168.0.1, ä½†æ˜¯æœ€å¼€å§‹çš„æ—¶å€™ä¸»æœº A ä¸çŸ¥é“ 192.168.0.1 çš„ MAC åœ°å€, æ‰€ä»¥ä¸»æœº A å¹¿æ’­ä¸€æ¡ ARP è¯·æ±‚, è¯¢é—® 192.168.0.1 çš„ MAC åœ°å€ã€‚\n\nè·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰æ”¶åˆ°è¯¥ ARP è¯·æ±‚, å‘ç°è‡ªå·±å°±æ˜¯ 192.168.0.1ï¼Œäºæ˜¯å‘ä¸»æœº A å›å¤ä¸€æ¡ ARP åº”ç­”åŒ…, å‘Šè¯‰ä¸»æœº A 192.168.0.1 çš„ MAC åœ°å€æ˜¯ xxxGWã€‚\n\nä¸»æœº A æ”¶åˆ°è¯¥ ARP å“åº”åŒ…, å¹¶å‘è¯¥å“åº”åŒ…ä¸­çš„ MAC åœ°å€å‘é€ä¸€ä¸ª Http è¯·æ±‚åŒ…ã€‚\n\nè·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰æ”¶åˆ°è¯¥ Http è¯·æ±‚åŒ…, å‘ç°ç›®æ ‡ IP æ˜¯å…¬ç½‘ IP, ä¾¿å°†è¯¥åŒ…æ”¾é€åˆ°å…¬ç½‘, å…¬ç½‘è¿”å› Http åº”ç­”åŒ…ç»™è·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰ã€‚\n\nè·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰å‡†å¤‡å°† Http å“åº”åŒ…å‘é€ç»™ 192.168.0.100, ä½†æ˜¯åŒç¬¬ 2 æ­¥, è·¯ç”±å™¨æœ€å¼€å§‹çš„æ—¶å€™ä¹Ÿä¸çŸ¥é“ 192.168.0.100 çš„ MAC åœ°å€æ˜¯å¤šå°‘, æ‰€ä»¥è·¯ç”±å™¨ä¼šå¹¿æ’­ä¸€æ¡ ARP è¯·æ±‚, è¯¢é—® 192.168.0.100 çš„ MAC åœ°å€æ˜¯å¤šå°‘ã€‚\n\nä¸»æœº A æ”¶åˆ° ARP è¯·æ±‚, å‘ç°è‡ªå·±å°±æ˜¯ 192.168.0.100, äºæ˜¯å‘è·¯ç”±å™¨å›å¤äº†ä¸€ä¸ª ARP åº”ç­”åŒ…, å‘Šè¯‰è·¯ç”±å™¨ 192.168.0.100 çš„ MAC åœ°å€æ˜¯ xxxA.\n\nè·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰æ”¶åˆ° ARP åº”ç­”åŒ…, å¹¶ä½¿ç”¨è¯¥ APR åº”ç­”åŒ…ä¸­çš„ MAC åœ°å€å°†ç¬¬ 5 æ­¥æ”¶åˆ° Http å“åº”åŒ…å‘é€å‡ºå»ã€‚\n\n\nè¯•æƒ³ï¼Œå¦‚æœç°åœ¨ä¸»æœº B åšäº†å¦‚ä¸‹ 2 ä»¶äº‹æƒ…ä¼šæœ‰ä»€ä¹ˆåæœï¼š\n\nä¸»æœº B ä¸åœçš„å‘ä¸»æœº A å‘é€ ARP åº”ç­”åŒ…, å‘Šè¯‰è·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰192.168.0.1 çš„ MAC åœ°å€æ˜¯ xxxB, ä¼šå‘ç”Ÿä»€ä¹ˆ?\nä¸»æœº B ä¸åœçš„å‘è·¯ç”±å™¨ï¼ˆç½‘å…³ï¼‰å‘é€ ARP åº”ç­”åŒ…, å‘Šè¯‰ä¸»æœº A 192.168.0.100 çš„ MAC æ˜¯ xxxB, ä¼šå‘ç”Ÿä»€ä¹ˆ?\n\nå¦‚æœä¸»æœº B åšäº†ä¸Šé¢è¯´çš„ä¸¤ä»¶äº‹çš„, é‚£ä¹ˆä¸»æœº A è®¿é—®ç½‘ç»œçš„æ‰€æœ‰æ•°æ®éƒ½ä¼šå…ˆç»è¿‡ä¸»æœº B, å¹¶ä¸”ä»ç½‘å…³å‘é€åˆ°ä¸»æœº A çš„æ•°æ®ä¹Ÿéƒ½ä¼šç»è¿‡ B, è‡³æ­¤, æ•´ä¸ª ARP æ¬ºéª—å®Œæˆã€‚\nä½†æ˜¯ï¼Œå¦‚æœæ¬ºéª—è€…æœºå™¨ä¸å¯¹è¿™äº›æ•°æ®åŒ…ä½œå¤„ç†ï¼Œå½“è¢«æ¬ºéª—æ•°æ®åŒ…åˆ°è¾¾åå°±ä¼šè¢«æœ¬æœºä¸¢å¼ƒï¼ˆå› ä¸ºè‡ªå·±åˆ°åº•ä¸æ˜¯ç½‘å…³ï¼Œè¿˜ä¸çŸ¥é“å¦‚ä½•å¤„ç†è¿™ç±»æ•°æ®åŒ…ï¼‰ï¼Œè¿™å½“ç„¶æ˜¯ä¸å…è®¸çš„ã€‚è¿™æ—¶å¼€å¯ IP è½¬å‘åŠŸèƒ½å¯ä»¥è§£å†³è¯¥é—®é¢˜ï¼ŒIP è½¬å‘è´Ÿè´£æŠŠè¯¥ç±»æ•°æ®åŒ…å†è½¬å‘ç»™çœŸæ­£çš„ç½‘å…³å¤„ç†ï¼Œå¼€å¯ IP è½¬å‘çš„æ–¹æ³•ï¼š\nsysctl net.ipv4.ip_forward=1\n\n1.4.2 arpspoof ä½¿ç”¨åœ¨ Ubuntu æˆ– Kali ç­‰ç³»ç»Ÿä¸Šæœ‰ arpspoof å·¥å…·å¯ä»¥è½»æ¾å®ç° ARP æ¬ºéª—çš„æ•´ä¸ªæµç¨‹ã€‚\narpspoof [-i interface] [-c own|host|both] [-t target] [-r] hostå‚æ•°ï¼š-i æŒ‡å®šç”¨æ”»å‡»æœºçš„å“ªä¸ªç½‘ç»œæ¥å£ï¼Œå¯ä»¥ä½¿ç”¨ifconfigå‘½ä»¤æŸ¥çœ‹æ”»å‡»æœºæ¥å£åˆ—è¡¨ã€‚-c own|host|both-t æŒ‡å®šarpæ”»å‡»çš„ç›®æ ‡ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™ç›®æ ‡ä¸ºè¯¥å±€åŸŸç½‘å†…çš„æ‰€æœ‰æœºå™¨ã€‚å¯ä»¥æŒ‡å®šå¤šä¸ªç›®æ ‡ï¼Œå¦‚ï¼šarpspoof -i etho -t 192.168.32.100 -t 192.168.32.101-r hostå¸Œæœ›æ‹¦æˆªæ”»å‡»æœºå’Œå“ªä¸ªhostä¹‹é—´çš„é€šä¿¡ï¼Œä¸€èˆ¬éƒ½æ˜¯ç½‘å…³ã€‚\n\näºŒã€RARP åè®®RARP åè®®ï¼ˆReverse Address Resolution Protocolï¼‰ï¼Œåå‘åœ°å€è½¬æ¢åè®®ï¼Œä¹Ÿå«é€†åœ°å€è§£æåè®®ï¼Œä¸»è¦è¢«é‚£äº›æ²¡æœ‰ç£ç›˜é©±åŠ¨å™¨çš„ç³»ç»Ÿä½¿ç”¨ï¼Œå¦‚æ— ç›˜å·¥ä½œç«™ç­‰ã€‚\nå…·æœ‰æœ¬åœ°ç£ç›˜çš„ç³»ç»Ÿå¼•å¯¼æ—¶ï¼Œä¸€èˆ¬æ˜¯ä»ç£ç›˜ä¸­çš„é…ç½®æ–‡ä»¶è¯»å– IP åœ°å€ã€‚ä½†æ˜¯æ— ç›˜æœºï¼Œå¦‚æ— ç›˜å·¥ä½œç«™ï¼Œåˆ™éœ€è¦é‡‡ç”¨å…¶ä»–æ–¹æ³•è·å– ip åœ°å€ã€‚ç½‘ç»œä¸Šçš„æ¯ä¸ªç³»ç»Ÿéƒ½å…·æœ‰å”¯ä¸€çš„ç¡¬ä»¶åœ°å€ï¼Œå®ƒæ˜¯ç”±ç½‘ç»œæ¥å£ç”Ÿäº§å‚å®¶é…ç½®çš„ã€‚æ— ç›˜ç³»ç»Ÿçš„ RARP å®ç°è¿‡ç¨‹æ˜¯ä»ç½‘å¡ä¸Šè¯»å–å”¯ä¸€çš„ç¡¬ä»¶åœ°å€ï¼Œç„¶åå‘é€ RARP è¯·æ±‚åˆ° RARP æœåŠ¡å™¨ï¼Œè¯·æ±‚è¯¥ä¸»æœºåœ¨æ— ç›˜ç³»ç»Ÿçš„ IP åœ°å€ã€‚\n\n\næ–‡ç« å‚è€ƒï¼šhttps://segmentfault.com/a/1190000009562333\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"ç½‘ç»œåè®®(3)--IPåè®®","url":"/post/2274025898.html","content":"IP åè®®æ˜¯ TCP&#x2F;IP åè®®æ—ä¸­æœ€æ ¸å¿ƒçš„åè®®ã€‚æ‰€æœ‰çš„ TCPã€UDPã€ICMPã€IGMP æ•°æ®éƒ½ä»¥ IP æ•°æ®æŠ¥çš„æ ¼å¼ä¼ è¾“ã€‚\n\n\nIP åè®®æ˜¯ä¸å¯é ã€æ— è¿æ¥çš„ï¼š\n\nä¸å¯é è¡¨ç¤º IP åè®®ä¸èƒ½ä¿è¯ IP æ•°æ®æŠ¥èƒ½æˆåŠŸçš„åˆ°è¾¾ç›®çš„åœ°ã€‚IP ä»…æä¾›ä¼ è¾“æœåŠ¡ï¼Œä»»ä½•å¯é æ€§çš„è¦æ±‚éƒ½å¿…é¡»ç”±ä¸Šå±‚æ¥æä¾›ï¼ˆå¦‚ TCPï¼‰ã€‚å¦‚æœä¼ è¾“è¿‡ç¨‹å‘ç”Ÿé”™è¯¯ï¼ŒIP åè®®ç®€å•çš„ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œç„¶åå‘é€ ICMP æ¶ˆæ¯ç»™å‘é€ç«¯ã€‚\n\næ— è¿æ¥è¡¨ç¤º IP åè®®ä¸ç»´æŠ¤ä»»ä½•å…³äºåç»­æ•°æ®æŠ¥çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯ä¸ªæ•°æ®æŠ¥éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚è¿™ä¹Ÿè¯´æ˜ï¼ŒIP æ•°æ®æŠ¥å¯èƒ½ä¸æ˜¯æŒ‰ç…§å‘é€é¡ºåºè¢«æ¥æ”¶åˆ°çš„ï¼Œå¾ˆæœ‰å¯èƒ½åå‘é€çš„æ•°æ®è¢«å…ˆæ”¶åˆ°ã€‚\n\n\nä¸€ã€IP é¦–éƒ¨IP æ•°æ®æŠ¥çš„æ ¼å¼å¦‚å›¾ï¼š\n\n4 ä½ç‰ˆæœ¬ï¼šæ ‡è¯†ç›®å‰é‡‡ç”¨çš„ IP åè®®çš„ç‰ˆæœ¬å·ã€‚IPv4 ä¸º 0100, IPv6 ä¸º 0110\n\n4 ä½é¦–éƒ¨é•¿åº¦ï¼šç”¨äºæ ‡è¯†é¦–éƒ¨çš„é•¿åº¦ï¼Œå•ä½ä¸º4 å­—èŠ‚ï¼Œæ‰€ä»¥é¦–éƒ¨çš„æœ€å¤§é•¿åº¦ä¸º15*4å­—èŠ‚=60å­—èŠ‚ã€‚\n\n8 ä½æœåŠ¡ç±»å‹ï¼šåŒ…æ‹¬ 3bit çš„ä¼˜å…ˆæƒå­—æ®µï¼ˆå·²è¢«å¿½ç•¥ï¼‰ï¼Œ4bit çš„ TOS å­—æ®µï¼Œ1bit çš„å§‹ç»ˆä¸º 0 çš„æœªä½¿ç”¨ä½ã€‚\n\n16 ä½æ€»é•¿åº¦(å­—èŠ‚æ•°)ï¼šæ•´ä¸ª IP æ•°æ®æŠ¥çš„é•¿åº¦ã€‚æ•°æ®æŠ¥ä¸­æ•°æ®å†…å®¹çš„é•¿åº¦=æ€»é•¿åº¦ - é¦–éƒ¨é•¿åº¦\n\n16 ä½æ ‡è¯†ï¼šå”¯ä¸€åœ°æ ‡è¯†ä¸»æœºå‘é€çš„æ¯ä¸€ä»½æ•°æ®æŠ¥ã€‚IP æ•°æ®æŠ¥çš„æœ€å¤§é•¿åº¦å¯è¾¾ 65535 å­—èŠ‚ï¼Œä½†å¤§å¤šæ•°é“¾è·¯å±‚éƒ½ä¼šå¯¹å®ƒè¿›è¡Œåˆ†ç‰‡ã€‚ç”±äº TCP æœ¬èº«ä¼šæŠŠç”¨æˆ·æ•°æ®åˆ†æˆè‹¥å¹²ç‰‡ï¼Œå› æ­¤è¿™ä¸ªå­—æ®µä¸€èˆ¬æ¥è¯´ä¸ä¼šå½±å“åˆ° TCPã€‚\n\n3 ä½æ ‡å¿—ï¼šç”¨äº IP æ•°æ®æŠ¥åˆ†ç‰‡ã€‚è¯¥å­—æ®µç¬¬ 1bit ä¸ä½¿ç”¨ï¼Œç¬¬ 2bit æ˜¯ DF(Don&#39;t Fragment)ä½ï¼ŒDF ä½è®¾ä¸º 1 æ—¶è¡¨æ˜ IP ä¸å¯¹è¯¥æ•°æ®åŒ…åˆ†ç‰‡ã€‚ç¬¬ 3bit æ˜¯ MF(More Fragments)ä½ï¼Œå½“å¯¹æ•°æ®åŒ…åˆ†ç‰‡æ—¶ï¼Œé™¤äº†æœ€åä¸€ç‰‡å¤–ï¼Œå…¶ä»–æ¯ä¸ªç»„æˆæ•°æ®æŠ¥çš„ç‰‡éƒ½è¦æŠŠæ­¤ä½è®¾ä¸º 1ã€‚\n\n13 ä½åç§»ï¼šç”¨äº IP æ•°æ®æŠ¥åˆ†ç‰‡ã€‚å•ä½ä¸º 8 å­—èŠ‚ã€‚è¡¨ç¤ºè¯¥ç‰‡ç›¸å¯¹äºåŸå§‹æ•°æ®æŠ¥å¼€å§‹å¤„çš„ä½ç½®ï¼Œèƒ½è¡¨ç¤ºçš„æœ€å¤§åç§»ä¸º$2^{13}$*8&#x3D;65536 å­—èŠ‚ã€‚\n\n\n\nå¦å¤–ï¼Œæ•°æ®æŠ¥è¢«åˆ†ç‰‡ä¹‹åï¼Œæ¯ä¸ªç‰‡çš„æ€»é•¿åº¦è¦æ›´æ”¹ä¸ºè¯¥ç‰‡çš„é•¿åº¦å€¼ã€‚IP å±‚åˆ†ç‰‡æ˜¯é€æ˜çš„ï¼Œä½†æ˜¯å³ä½¿åªä¸¢å¤±ä¸€ç‰‡æ•°æ®ä¹Ÿè¦é‡ä¼ æ•´ä¸ªæ•°æ®æŠ¥ï¼Œå› ä¸º IP å±‚æœ¬èº«æ²¡æœ‰è¶…æ—¶é‡ä¼ çš„æœºåˆ¶ã€‚\n\n\n8 ä½ç”Ÿå­˜æ—¶é—´(TTL)ï¼šè®¾ç½®æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤šè·¯ç”±å™¨æ•°é‡ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè¯¥å€¼å°±å‡å» 1ã€‚å½“è¯¥å€¼ä¸º 0 æ—¶ï¼Œæ•°æ®æŠ¥å°±è¢«ä¸¢å¼ƒã€‚é€šå¸¸åˆå§‹å€¼ä¸º 32 æˆ– 64.\n\n8 ä½åè®®ï¼šè¡¨ç¤ºä¸Šå±‚ä¼ è¾“å±‚æ‰€ç”¨çš„åè®®ç±»å‹ã€‚1 è¡¨ç¤º ICMP åè®®ï¼Œ2 è¡¨ç¤º IGMP åè®®ï¼Œ6 è¡¨ç¤º TCP åè®®ï¼Œ17 è¡¨ç¤º UDP åè®®ã€‚\n\n16 ä½é¦–éƒ¨æ ¡éªŒå’Œï¼šç”¨äºå¯¹ IP é¦–éƒ¨çš„æ­£ç¡®æ€§è¿›è¡Œæ ¡éªŒï¼Œä½†ä¸åŒ…æ‹¬æ•°æ®éƒ¨åˆ†ï¼Œè¿™ç‚¹ä¸åŒäº TCP å’Œ UDP çš„é¦–éƒ¨æ ¡éªŒå’Œã€‚\n\n32 ä½æº IP åœ°å€ï¼šå‘é€ç«¯çš„ 32bit çš„ IP åœ°å€ã€‚\n\n32 ä½ç›®çš„ IP åœ°å€ï¼šæ¥æ”¶ç«¯çš„ 32bit çš„ IP åœ°å€ã€‚\n\né€‰é¡¹ï¼šå¯å˜é•¿åº¦çš„å¯é€‰ä¿¡æ¯ã€‚å¦‚æœé¦–éƒ¨ä¸å«â€œé€‰é¡¹å­—æ®µâ€ï¼Œåˆ™ IP é¦–éƒ¨é•¿åº¦ä¸º 20 å­—èŠ‚ã€‚\n\n\näºŒã€IP é¦–éƒ¨æ ¡éªŒå’Œ\nå‘é€ç«¯å¯¹ IP æ•°æ®æŠ¥çš„æ ¡éªŒå’Œçš„è®¡ç®—æ­¥éª¤ï¼š\n\n\næŠŠ IP æ•°æ®æŠ¥çš„æ ¡éªŒå’Œå­—æ®µç½®ä¸º 0ï¼›\næŠŠé¦–éƒ¨çœ‹æˆä»¥ 16 ä½ä¸ºå•ä½çš„æ•°å­—ç»„æˆï¼Œä¾æ¬¡è¿›è¡ŒäºŒè¿›åˆ¶åç æ±‚å’Œï¼›\næŠŠæ±‚å’Œå¾—åˆ°çš„ç»“æœå–åã€‚\nå°†ç¬¬ 2ã€3 æ­¥å¾—åˆ°çš„ 2 ä¸ªå­—èŠ‚æ•°æ®å­˜å…¥é¦–éƒ¨æ ¡éªŒå’Œã€‚\n\n\næ¥æ”¶ç«¯å¯¹ IP æ•°æ®æŠ¥çš„æ ¡éªŒå’Œçš„æ ¡éªŒæ­¥éª¤ï¼š\n\n\næŠŠé¦–éƒ¨çœ‹æˆä»¥ 16 ä½ä¸ºå•ä½çš„æ•°å­—ç»„æˆï¼Œä¾æ¬¡è¿›è¡ŒäºŒè¿›åˆ¶åç æ±‚å’Œï¼›\næŠŠæ±‚å’Œå¾—åˆ°çš„ç»“æœå–åç ã€‚\nå¦‚æœç»“æœä¸º 0ï¼Œåˆ™è¡¨ç¤ºæ£€éªŒå’Œæ ¡éªŒé€šè¿‡ï¼ŒIP æŠ¥æ–‡æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚\n\nä¸‰ã€ä½¿ç”¨ä»£ç è®¡ç®—æ ¡éªŒå’Œé€šè¿‡ wireshark æŠ“å–ä¸€å¸§æ•°æ®æŠ¥ï¼Œå¦‚å›¾ï¼š\nä»¥è¯¥æ•°æ®æŠ¥çš„ IP é¦–éƒ¨ä¸ºåŸºç¡€ï¼Œä½¿ç”¨ C++ä»£ç æ¥éªŒè¯ IP é¦–éƒ¨æ ¡éªŒå’Œçš„è®¡ç®—æ­¥éª¤å’Œæ ¡éªŒæ­¥éª¤ï¼š\n#include &lt;assert.h&gt;// GetChecksumå‡½æ•°ç”¨äºå®ç°ä¸Šé¢æ‰€è¯´çš„è®¡ç®—æ­¥éª¤ä¸­çš„ç¬¬2æ­¥ã€ç¬¬3æ­¥ï¼š// æŠŠé¦–éƒ¨çœ‹æˆä»¥16ä½ï¼ˆ2å­—èŠ‚ï¼‰ä¸ºå•ä½çš„æ•°å­—ç»„æˆï¼Œä¾æ¬¡è¿›è¡ŒäºŒè¿›åˆ¶åç æ±‚å’Œï¼Œ// ä½†å®é™…çš„ç®—æ³•å®ç°ä¸Šéœ€è¦è€ƒè™‘å–å’Œæº¢å‡ºæ—¶çš„æ”¹è¿›è®¡ç®—æ–¹æ³•ï¼ˆè§å‡½æ•°å†…éƒ¨æ³¨é‡Šï¼‰//unsigned short GetChecksum(unsigned short* ip_header, int size) &#123;\tassert(sizeof(unsigned short) == 2);\t// ä¸ºä»€ä¹ˆä½¿ç”¨unsigned longï¼ˆ4å­—èŠ‚ï¼‰ï¼Ÿ\t// å› ä¸ºè™½ç„¶é¦–éƒ¨æ ¡éªŒå’Œåªå 16ä½ï¼ˆ2ä¸ªå­—èŠ‚ï¼‰ï¼Œä½†æ‰§è¡Œâ€œä»¥16ä½ï¼ˆ2å­—èŠ‚ï¼‰ä¸ºå•ä½çš„äºŒè¿›åˆ¶åç æ•°æ®â€æ±‚å’Œæ“ä½œå¾—åˆ°çš„checksumå¯èƒ½ä¼šè¶…è¿‡16ä½ï¼ˆ2å­—èŠ‚ï¼‰ï¼Œ\t// æ‰€ä»¥è¿™é‡Œç”¨4ä¸ªå­—èŠ‚çš„unsigned longæ¥æ¥æ”¶ç›¸åŠ å¾—åˆ°çš„ç»“æœï¼Œåé¢å†è¿›è¡Œå¤„ç†ã€‚\t//\tunsigned long checksum = 0;\twhile (size &gt; 1) &#123;\t\tchecksum += *ip_header; // å› ä¸ºéƒ½æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥åç ä¸åŸç ç›¸åŒï¼›æ•…ç›´æ¥ç›¸åŠ æ±‚å’Œ\t\tip_header++; // ip_headerä¸ºunsigned shortç±»å‹çš„æŒ‡é’ˆæ¯æ¬¡æŒ‰2ä¸ªå­—èŠ‚ç›¸åŠ \t\tsize -= 2;\t&#125;\t// æ‰§è¡Œåˆ°è¿™ï¼šchecksum = 0x2850c\t// IPé¦–éƒ¨å¦‚æœä¸åŒ…å«â€œé€‰é¡¹â€å­—æ®µï¼Œåˆ™ä¸º20å­—èŠ‚ï¼Œå¶æ•°ï¼›å¦‚æœåŒ…å«äº†â€œé€‰é¡¹â€ï¼Œåˆ™å­—èŠ‚æ•°å°±å¯èƒ½ä¸ºå¥‡æ•°äº†ï¼Œ\t// è¿™é‡Œé’ˆå¯¹å­—èŠ‚æ•°ä¸ºå¥‡æ•°çš„æƒ…å†µè¿›è¡Œå¤„ç†ã€‚\t// æ³¨ï¼šç¤ºä¾‹mainå‡½æ•°ä¸­æ„é€ çš„ip_headerä¸å«æœ‰â€œé€‰é¡¹â€\t//\tif (size == 1) &#123;\t\tchecksum += *(unsigned char*)ip_header;\t&#125;\t// å› ä¸ºä¸Šé¢ç›¸åŠ ä¹‹åçš„ç»“æœå¤§äº2ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥æ‰§è¡Œé¢å¤–çš„å¤„ç†æ­¥éª¤ï¼š\t// checksum &gt;&gt; 16 å³ç§»16ä½\t// å³é™¤ä»¥2çš„16æ¬¡æ–¹ï¼ˆ0xffffï¼‰ï¼Œå°±æ˜¯å»é™¤å³è¾¹çš„2ä¸ªå­—èŠ‚ï¼Œå¦‚ï¼š0x2850c &gt;&gt; 16 = 0x2\t//\t// checksum &amp; 0xffff ä½è¿ç®—ï¼Œå¾—åˆ°å2ä¸ªå­—èŠ‚\t// å¦‚ï¼š0x2850c &amp; 0xffff = 0x850c\t//\t// checksum = 0x2 + 0x850c = 0x850e\t//\tchecksum = (checksum &gt;&gt; 16) + (checksum &amp; 0xffff);\t// å‡å¦‚è¿˜å¤§äº2ä¸ªå­—èŠ‚ï¼Œå†æ¬¡å°†å¤šä½™çš„å­—èŠ‚å’Œchecksumç›¸åŠ ã€‚\tchecksum += (checksum &gt;&gt; 16);\t// æ±‚å’Œå¾—åˆ°çš„ç»“æœçš„å–å\treturn (unsigned short)(~checksum);&#125;int main()&#123;\t// å°†ä¸Šé¢wirksharkæŠ“çš„æ•°æ®åŒ…çš„IPå¤´éƒ¨ï¼Œä½¿ç”¨charæ•°ç»„ï¼ŒæŒ‰å­—èŠ‚æ„é€ å‡ºæ¥\t//\tunsigned char ip_header[20] = &#123;\t\t0x45, // 4ä½ç‰ˆæœ¬+4ä½é¦–éƒ¨é•¿åº¦\t\t0x00, // 8ä½æœåŠ¡ç±»å‹ï¼ˆTOSï¼‰\t\t0x00, 0x1c,  // 16ä½æ€»é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰\t\t0x50, 0xaa,  // 16ä½æ ‡è¯†\t\t0x00, 0x00,  // 3ä½æ ‡å¿—+13ä½ç‰‡åç§»\t\t0xff, // 8ä½ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰\t\t0x01, // 8ä½åè®®\t\t0xf1, 0x7a, // 16ä½é¦–éƒ¨æ ¡éªŒå’Œ\t\t0xc0, 0xa8, 0x2e, 0x55, // 32ä½æºIPåœ°å€\t\t0xee, 0x73, 0x9c, 0x4a  // 32ä½ç›®çš„IPåœ°å€\t&#125;;\t// ç¬¬1æ­¥ï¼šæŠŠIPæ•°æ®åŒ…çš„æ ¡éªŒå’Œå­—æ®µç½®ä¸º0ï¼›\t//\tip_header[10] = 0x00;\tip_header[11] = 0x00;\t// ç¬¬2ã€3æ­¥è®¡ç®—æ ¡éªŒå’Œ\t//\tunsigned short checksum = GetChecksum((unsigned short*)ip_header, sizeof(ip_header));\tprintf(&quot;%02hhx %02hhx\\n&quot;, *(char*)(&amp;checksum), *((char*)(&amp;checksum) + 1));\t// ç¬¬4æ­¥ï¼šå°†ç¬¬2ã€3æ­¥å¾—åˆ°çš„2ä¸ªå­—èŠ‚æ•°æ®å­˜å…¥é¦–éƒ¨æ ¡éªŒå’Œ\t//\tip_header[10] = *(char*)(&amp;checksum);\tip_header[11] = *((char*)(&amp;checksum) + 1);\t// æ¨¡æ‹Ÿæ¥æ”¶åˆ°IPåŒ…ä¹‹åï¼Œå¯¹IPé¦–éƒ¨çš„æ ¡éªŒå’Œè¿›è¡Œæ ¡éªŒ\t//\tunsigned short checksum_check = GetChecksum((unsigned short*)ip_header, sizeof(ip_header));\tif (checksum_check == 0) &#123;\t\tprintf(&quot;checksum check successful!\\n&quot;);\t&#125;\telse &#123;\t\tprintf(&quot;checksum check failed!\\n&quot;);\t&#125;    return 0;&#125;\n\nå››ã€IP æ ¡éªŒå’Œçš„è®¾è®¡åŸç†æˆ‘ä»¬å°† IP é¦–éƒ¨è¿›è¡Œç®€åŒ–æ¥è®²è§£ IP æ ¡éªŒå’Œçš„è®¾è®¡åŸç†ï¼Œå‡è®¾ IP é¦–éƒ¨åªæœ‰ 6 ä¸ªå­—èŠ‚ï¼Œç¬¬ 5,6 å­—èŠ‚å­˜æ”¾æ ¡éªŒå’Œï¼š\nè®¡ç®—æ ¡éªŒå’Œæ—¶ç¬¬ 5,6 å­—èŠ‚ç½®ä¸º 0ï¼Œæ ¡éªŒå’Œç­‰äºï¼šA+B+0ï¼Œç„¶åå–åï¼Œå³ï¼š\næ¥æ”¶ç«¯æ”¶åˆ°ä¹‹åæ ¡éªŒæ­¥éª¤ä¸ºï¼šæ±‚æ ¡éªŒå’Œï¼ˆä¸åŒçš„æ˜¯ï¼šæ ¡éªŒå’Œä½ä¸ç½® 0ï¼‰ï¼Œè‹¥æ­¤æ—¶æ±‚å¾—æ ¡éªŒå’Œä¸º 0ï¼Œåˆ™æ ¡éªŒé€šè¿‡ã€‚å³ï¼š\näº”ã€IP åœ°å€ç›¸å…³æ“ä½œæœ¬èŠ‚ä»‹ç»åœ¨ç½‘ç»œç¼–ç¨‹ä¸­æ¶‰åŠåˆ°çš„ä¸ IP åœ°å€ç›¸å…³çš„æ“ä½œ\nstruct in_addr// sizeof(in_addr) == sizeof(ULONG) == 4//typedef struct in_addr &#123;        union &#123;                struct &#123; UCHAR s_b1,s_b2,s_b3,s_b4; &#125; S_un_b;                struct &#123; USHORT s_w1,s_w2; &#125; S_un_w;                ULONG S_addr;   // 4ä¸ªå­—èŠ‚ï¼ŒæŒ‰ç½‘ç»œå­—èŠ‚åºåˆ—å­˜å‚¨\t\t\t\t                // å¯ä»¥ä½¿ç”¨inet_addrå‡½æ•°å°†IPæ ¼å¼å­—ç¬¦ä¸²è½¬ä¸ºç½‘ç»œå­—èŠ‚åºåˆ—çš„æ•´æ•°ã€‚        &#125; S_un;// å®šä¹‰çš„ä¸€äº›å®ï¼Œæ–¹ä¾¿è®¿é—®ç»“æ„ä½“æˆå‘˜#define s_addr  S_un.S_addr /* can be used for most tcp &amp; ip code */#define s_host  S_un.S_un_b.s_b2    // host on imp#define s_net   S_un.S_un_b.s_b1    // network#define s_imp   S_un.S_un_w.s_w2    // imp#define s_impno S_un.S_un_b.s_b4    // imp ##define s_lh    S_un.S_un_b.s_b3    // logical host&#125; IN_ADDR, *PIN_ADDR, FAR *LPIN_ADDR;\n\nstruct sockaddr_in// sizeof(sockaddr_in) == 16struct sockaddr_in &#123;        short   sin_family;        u_short sin_port;        struct  in_addr sin_addr;        char    sin_zero[8];&#125;;\n\nstruct sockaddr// sizeof(sockaddr) == 16//struct sockaddr &#123;        u_short sa_family;              /* address family */        char    sa_data[14];            /* up to 14 bytes of direct address */&#125;;\n\n5.1 è½¬æ¢å‡½æ•°\nwebrtc ä¸­çš„IPAddressç±»å’ŒSocketAddressç±»ï¼Œå¯¹ç½‘ç»œåœ°å€çš„æ“ä½œè¿›è¡Œäº†å¾ˆå¥½çš„å°è£…ï¼Œå€¼å¾—å‚è€ƒã€‚\n\n5.1.1 IP å­—ç¬¦ä¸² -&gt; æ•´æ•°unsigned long inet_addr(  _In_ const char *cp);\n\nå°†ç±»ä¼¼127.0.0.1è¿™æ ·çš„ IP å­—ç¬¦ä¸²è½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºåˆ—çš„æ•´æ•°\n5.1.2 æ•´æ•° -&gt; IP å­—ç¬¦ä¸²char* FAR inet_ntoa(  _In_ struct   in_addr in);\n\nå°† in_addrï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºç½‘ç»œå­—èŠ‚åºåˆ—æ•´æ•°ï¼‰è½¬æ¢ä¸º IP å­—ç¬¦ä¸²ã€‚\n5.2 å­—èŠ‚åºåˆ—è½¬æ¢htonshtonlntohsntohlhtonllntohll\n\nå¯¹æ•´æ•°ï¼ˆshortã€longã€longlongï¼‰è¿›è¡Œç½‘ç»œå­—èŠ‚åºåˆ—å’Œä¸»æœºå­—èŠ‚åºåˆ—é—´çš„è½¬æ¢æ“ä½œã€‚ä»¥ htons ä¸ºä¾‹ï¼šhæ˜¯ host çš„é¦–å­—æ¯ï¼Œè¡¨ç¤ºä¸»æœºå­—èŠ‚åºåˆ—ï¼›næ˜¯ network çš„é¦–å­—æ¯ï¼Œè¡¨ç¤ºç½‘ç»œå­—èŠ‚åºåˆ—ï¼›sä»£è¡¨ shortï¼›æ‰€ä»¥ htons çš„åŠŸèƒ½æ˜¯ï¼Œå°† short ä»ä¸»æœºå­—èŠ‚åºåˆ—è½¬ä¸ºç½‘ç»œå­—èŠ‚åºåˆ—ã€‚\n\nå­—èŠ‚åºåˆ—å¯ä»¥å‚è€ƒï¼šhttp://blog.csdn.net/china_jeffery&#x2F;article&#x2F;details&#x2F;78401731\n\n5.3 è·å–æœ¬æœº IP åœ°å€5.3.1 ä½¿ç”¨ gethostbynameè¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼šåªèƒ½è·å–ä¸€ä¸ªç½‘å¡çš„ IP åœ°å€ã€‚\nunsigned long GetLocalIPv4Address() &#123;\tchar hostname[MAX_PATH] = &#123; 0 &#125;;\tgethostname(hostname, MAX_PATH);\tstruct hostent FAR* lpHostEnt = gethostbyname(hostname);\tif (lpHostEnt == NULL) &#123;\t\treturn htonl(0x7f000001); //127.0.0.1\t&#125;\tLPSTR lpAddr = lpHostEnt-&gt;h_addr_list[0];\tstruct in_addr addr;\tmemcpy(&amp;addr, lpAddr, 4);\treturn addr.s_addr;&#125;\n\n5.3.2 ä½¿ç”¨ GetAdaptersInfoè¯¥æ–¹å¼å¯ä»¥è·å–æœ¬æœºå¤šå—ç½‘å¡çš„ä¿¡æ¯ï¼ˆä¸é™äº IP åœ°å€ï¼‰ã€‚\n#include &lt;windows.h&gt;#include &lt;Iphlpapi.h&gt;#include &lt;string&gt;#include &lt;vector&gt;#pragma comment(lib,&quot;Iphlpapi.lib&quot;)bool GetLocalAddress(std::vector&lt;std::string&gt; &amp;ip_list) &#123;\tPIP_ADAPTER_INFO pIpAdapterInfo = new IP_ADAPTER_INFO();\tunsigned long stSize = sizeof(IP_ADAPTER_INFO);\tint nRet = GetAdaptersInfo(pIpAdapterInfo, &amp;stSize);\tif (ERROR_BUFFER_OVERFLOW == nRet) &#123;\t\tdelete pIpAdapterInfo;\t\tpIpAdapterInfo = (PIP_ADAPTER_INFO)new BYTE[stSize];\t\tnRet = GetAdaptersInfo(pIpAdapterInfo, &amp;stSize);\t&#125;\tif (ERROR_SUCCESS != nRet) &#123;\t\tif (pIpAdapterInfo) &#123;\t\t\tdelete pIpAdapterInfo;\t\t&#125;\t\treturn false;\t&#125;\twhile (pIpAdapterInfo) &#123;\t\tIP_ADDR_STRING *pIpAddrString = &amp;(pIpAdapterInfo-&gt;IpAddressList);\t\tswitch (pIpAdapterInfo-&gt;Type) &#123;\t\t\tcase MIB_IF_TYPE_OTHER:\t\t\tcase MIB_IF_TYPE_ETHERNET:\t\t\tcase MIB_IF_TYPE_TOKENRING:\t\t\tcase MIB_IF_TYPE_FDDI:\t\t\tcase MIB_IF_TYPE_PPP:\t\t\tcase MIB_IF_TYPE_LOOPBACK:\t\t\tcase MIB_IF_TYPE_SLIP: &#123;\t\t\t\tstd::string address = pIpAddrString-&gt;IpAddress.String;\t\t\t\tif (&quot;0.0.0.0&quot; == address)\t\t\t\t\tbreak;\t\t\t\tip_list.push_back(address);\t\t\t\tbreak;\t\t\t&#125;\t\t\tdefault:\t\t\t\tbreak;\t\t&#125;\t\tpIpAdapterInfo = pIpAdapterInfo-&gt;Next;\t&#125;\tif (pIpAdapterInfo) &#123;\t\tdelete pIpAdapterInfo;\t&#125;\treturn true;&#125;\n\n\nã€ŠTCP&#x2F;IP è¯¦è§£ å· 1ï¼šåè®®ã€‹åœ¨çº¿é˜…è¯»åœ°å€ï¼šhttp://www.52im.net/topic-tcpipvol1.html\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"ç½‘ç»œåè®®(1)--åŸºç¡€æ¦‚å¿µ","url":"/post/3886809266.html","content":"ä»çƒ½ç«å°åˆ° TCP&#x2F;IPï¼Œäººç±»åä½œçš„æœ¬è´¨ï¼Œæ˜¯è¾¾æˆå…±è¯†ã€‚ç½‘ç»œåè®®ï¼Œæ­£æ˜¯æ•°å­—æ—¶ä»£èµ–ä»¥ç”Ÿå­˜çš„â€œå…±è¯†â€åŸºçŸ³ã€‚å®ƒæ²‰é»˜åœ°æµæ·Œåœ¨æ¯æ¬¡ç‚¹å‡»ã€æ¯æ¡æ¶ˆæ¯ã€æ¯ä¸€å¸§ç”»é¢ä¹‹ä¸‹ï¼Œæ„ç­‘äº†ç°ä»£ç¤¾ä¼šçš„ç¥ç»ç³»ç»Ÿã€‚æœ¬ç³»åˆ—å°†å±‚å±‚å‰–æè¿™äº›æ— å½¢çš„è§„åˆ™ï¼Œä¸ºæ‚¨æ­å¼€äº’è”ç½‘é«˜æ•ˆã€æœ‰åºè¿è½¬çš„ç»ˆæç§˜å¯†ï¼Œç†è§£æˆ‘ä»¬ç©¶ç«Ÿå¦‚ä½•åœ¨æ¯”ç‰¹çš„æµ·æ´‹ä¸­ï¼Œç²¾å‡†åœ°æ‰¾åˆ°å½¼æ­¤ã€‚\n\nåè®®æ ˆä¸ƒå±‚OSIåè®®æ ˆå®Œæ•´çš„OSIåè®®æ€»å…±æœ‰7å±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\näº”å±‚TCP&#x2F;IPåè®®æ ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸šç•Œåˆäº§ç”Ÿäº†ç®€åŒ–çš„äº”å±‚ TPC&#x2F;IP åè®®æ ˆï¼Œå°† OSI åè®®æ ˆä¸­çš„ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ç»Ÿç§°ä¸ºåº”ç”¨å±‚ã€‚\nå››å±‚TCP&#x2F;IPåè®®æ ˆåœ¨äº”å±‚TCP&#x2F;IPåè®®æ ˆçš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥å°†ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ç»Ÿç§°ä¸ºé“¾è·¯å±‚ã€‚\n\nIP åœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³IP åœ°å€åŠåˆ†ç±»IP åœ°å€ç›¸å½“äºäº’è”ç½‘ä¸Šçš„é—¨ç‰Œå·ï¼Œè®¡ç®—æœºåœ¨å¯åŠ¨çš„æ—¶å€™å¯ä»¥ä»ç£ç›˜ï¼ˆæ— ç›˜ç³»ç»Ÿä¾‹å¤–ï¼‰ä¸Šè¯»å–è¯¥ä¸»æœºçš„ IP é…ç½®ã€‚\nIP åœ°å€ç”± 4 ä¸ªå­—èŠ‚ï¼ˆä¹Ÿå°±æ˜¯ 32 ä½ï¼‰çš„äºŒè¿›åˆ¶ç ç»„æˆï¼ŒåŒ…å«äº†ç½‘ç»œå·( net-id )å’Œä¸»æœºå·( host-id )ã€‚ä½†ç°å®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜éœ€è¦å†ç»§ç»­åˆ’åˆ†â€œå­ç½‘â€ï¼Œè¿™æ—¶å°±éœ€è¦å€Ÿç”¨ä¸»æœºå·çš„ä¸€éƒ¨åˆ†å……ä»»å­ç½‘å·ï¼Œè¿™æ · IP åœ°å€ä¹Ÿå°±å¯ä»¥çœ‹æˆç”±æ ‡å‡†ç½‘ç»œå·ã€å­ç½‘å·ã€ä¸»æœºå·3 éƒ¨åˆ†ç»„æˆçš„ï¼Œå³IPåœ°å€=æ ‡å‡†ç½‘ç»œå·+å­ç½‘å·+ä¸»æœºå·ã€‚\n\nç½‘ç»œå·ã€å­ç½‘å·ã€ä¸»æœºå·ä¸‰è€…é—´çš„å…³ç³»ï¼Œå½¢è±¡çš„æè¿°å¦‚ä¸‹ï¼šå‡è®¾ä½ çš„ä½å€ IP æ˜¯æ­¦æ±‰å¸‚æ–‡æ²»è¡—16å·ï¼Œé‚£ä¹ˆï¼ŒIP åœ°å€ &#x3D; æ­¦æ±‰å¸‚æ–‡æ²»è¡— 16 å·ç½‘ç»œå· &#x3D; æ­¦æ±‰å¸‚å­ç½‘å· &#x3D; æ–‡æ²»è¡—ä¸»æœºå· &#x3D; 16 å·\n\n\n\n\nIP åœ°å€ç§ç±»\näºŒè¿›åˆ¶ç»„æˆ(å‰ç¼€ä½+ç½‘ç»œä½+ä¸»æœºä½)\nIP èŒƒå›´\nç½‘ç»œæ•°\nä¸»æœºæ•°&#x2F;ç½‘ç»œ\n\n\n\nA ç±»åœ°å€\n0+7 ä½ç½‘ç»œå·+24 ä½ä¸»æœºå·\n1.0.0.0 - 127.255.255.255\n$2^7-2$\n$2^{24}-2$\n\n\nB ç±»åœ°å€\n10+14 ä½ç½‘ç»œå·+16 ä½ä¸»æœºå·\n128.0.0.0 - 191.255.255.255\n$2^{14}-1$\n$2^{16}-2$\n\n\nC ç±»åœ°å€\n110+21 ä½ç½‘ç»œå·+8 ä½ä¸»æœºå·\n192.0.0.0 - 223.255.255.255\n$2^{21}-1$\n$2^8-2$\n\n\nD ç±»åœ°å€\n1110+å¤šæ’­åœ°å€(ç”¨äºå¤šæ’­)\n224.0.0.0 - 239.255.255.255\n-\n-\n\n\nE ç±»åœ°å€\n1111+ä¿ç•™ä½(ä¸å¼€æ”¾, ä¿ç•™ä½¿ç”¨)\n240.0.0.0-249.255.255.255\n-\n-\n\n\nä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼ŒA ç±» IP çš„ç¬¬ 1 å­—èŠ‚çš„ç¬¬ 1 ä½ï¼ˆäºŒè¿›åˆ¶ä½ï¼‰å¿…é¡»æ˜¯ 0ï¼Œæ‰€ä»¥ A ç±» IP çš„ç¬¬ä¸€ä¸ªæ•´æ•°çš„èŒƒå›´æ˜¯0000 0000 ~ 01111 11111ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶å°±æ˜¯0 ~ 127ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nå…³äºç½‘ç»œæ•°çš„è§£é‡Šç½‘ç»œæ•°å°±æ˜¯ä¸€ç§ç½‘ç»œçš„å­ç½‘æ•°, æ¯”å¦‚ A ç±»åœ°å€, å¯ä»¥åˆ†ä¸ºå¤šå°‘ä¸ªå­ç½‘ã€‚çœ‹è¡¨æ ¼å¯ä»¥æ¨å‡ºç½‘ç»œæ•°çš„è®¡ç®—å…¬å¼ä¸º: $2^{ç½‘ç»œå·ä½æ•°}$ã€‚è§„å®šç½‘ç»œåœ°å€å…¨ä¸º0çš„ IP åœ°å€æ˜¯ä¿ç•™åœ°å€ï¼Œæ„æ€æ˜¯â€œæœ¬ç½‘ç»œâ€ã€‚\n\nåœ¨ A ç±»åœ°å€ä¸­ï¼Œå®é™…ä¸Š 0.0.0.0 æ˜¯ä¸æŒ‡æ´¾çš„ï¼Œè€Œå¯ä»¥æŒ‡æ´¾çš„æœ€å°ç½‘ç»œæ˜¯ 1.0.0.0ï¼›ç½‘ç»œåœ°å€ä¸º 127 çš„ A ç±» IP åœ°å€ä¿ç•™ä½œä¸ºæœ¬åœ°è½¯ä»¶ç¯å›æµ‹è¯•æœ¬ä¸»æœºçš„è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡(æ¯”å¦‚å¸¸ç”¨çš„ 127.0.0.1ï¼Œä½†å®é™…ä¸Šç½‘ç»œåœ°å€ä¸º127çš„éƒ½å¯ä»¥ç”¨ä½œæœ¬åœ°ç¯å›åœ°å€)ã€‚æ‰€ä»¥ A ç±»åœ°å€ç½‘ç»œæ•°ä¸º $2^7-2$ã€‚\nåœ¨ B ç±»åœ°å€ä¸­ï¼Œå®é™…ä¸Š 128.0.0.0 æ˜¯ä¸æŒ‡æ´¾çš„ï¼Œè€Œå¯ä»¥æŒ‡æ´¾çš„æœ€å°ç½‘ç»œæ˜¯ 128.1.0.0ï¼Œæ‰€ä»¥ B ç±»åœ°å€ç½‘ç»œæ•°æ˜¯ $2^{14} - 1$ã€‚\nåœ¨ C ç±»åœ°å€ä¸­ï¼Œå®é™…ä¸Š 192.0.0.0 æ˜¯ä¸æŒ‡æ´¾çš„ï¼Œè€Œå¯ä»¥æŒ‡æ´¾çš„æœ€å°ç½‘ç»œæ˜¯ 192.0.1.0ï¼Œæ‰€ä»¥ C ç±»åœ°å€ç½‘ç»œæ•°æ˜¯ $2^{21}-1$ã€‚\n\nå…³äºä¸»æœºæ•°çš„è§£é‡Šä¸»æœºæ•°å°±æ˜¯ä¸€ä¸ªå­ç½‘é‡Œé¢å¯ä»¥å®¹çº³å¤šå°‘å°ä¸»æœºã€‚ä»ä¸Šé¢è¡¨æ ¼å¯ä»¥æ¨ç®—å‡ºä¸»æœºæ•°çš„è®¡ç®—å…¬å¼ä¸º: 2^ä¸»æœºå·ä½æ•°-2ï¼ˆä¸»æœºå·å…¨ä¸º 0 è¡¨ç¤ºè¯¥ç½‘ç»œï¼Œè€Œä¸»æœºå·å…¨ä¸º 1 è¡¨ç¤ºå¹¿æ’­åœ°å€ï¼Œæ‰€ä»¥è¦æ’é™¤æ‰è¿™ä¸¤ä¸ªï¼‰ã€‚æ¯”å¦‚ A ç±»åœ°å€ 1.0.0.0 è¡¨ç¤ºä¸»æœºæ‰€åœ¨çš„ç½‘æ®µçš„ç½‘ç»œåœ°å€, 1.255.255.255 ä¸ºè¯¥ç½‘æ®µçš„å¹¿æ’­åœ°å€ã€‚\nç§æœ‰ IP åœ°å€ç»å¸¸å¯ä»¥çœ‹åˆ°192.168.1.101è¿™ç±»çš„ IP åœ°å€, è¿™äº›æ˜¯ç§æœ‰ IP åœ°å€, ä¸“ç”¨åœ°å€, ä¹Ÿå°±æ˜¯å±€åŸŸç½‘å†…ä½¿ç”¨çš„çš„ IP åœ°å€ã€‚å…¬ç½‘ IP åœ°å€æ˜¯éœ€è¦å‘æœ‰å…³éƒ¨é—¨ç”³è¯·å¤‡æ¡ˆçš„ï¼Œç§æœ‰ IP åœ°å€ä¸ç”¨ç”³è¯·, ä½†æ˜¯ä»…é™å†…ç½‘ä½¿ç”¨, ä¹ŸèŠ‚çº¦å…¬ç½‘ IPã€‚\n\n\n\nIP åœ°å€ç§ç±»\nç§æœ‰ IP èŒƒå›´\n\n\n\nA ç±»åœ°å€\n10.0.0.0 - 10.255.255.255\n\n\nB ç±»åœ°å€\n172.16.0.0 - 172.31.255.255\n\n\nC ç±»åœ°å€\n192.168.0.0 - 192.168.255.255\n\n\nè·¯ç”±å™¨çœ‹åˆ°ä¸“ç”¨åœ°å€å°±ä¸è½¬å‘ï¼Œæ‰€ä»¥è¯´ä¸“ç”¨åœ°å€ä½œä¸ºç›®çš„åœ°å€æ˜¯ä¸å¯èƒ½åœ¨å› ç‰¹ç½‘ä¸Šä¼ é€çš„ã€‚ä¸“ç”¨ IP åœ°å€ä¹Ÿå¯å«åšå¯é‡ç”¨åœ°å€ã€‚\né‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æœé…ç½®äº†è¿™äº›ä¸“ç”¨åœ°å€çš„ä¸»æœºæƒ³å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡ï¼Œéœ€è¦æ€ä¹ˆåŠå‘¢ï¼Ÿ\nNAT(network address translation: ç½‘ç»œåœ°å€è½¬æ¢)åœ¨è¿™ç§æƒ…å†µä¸‹å°±åº”è¿è€Œç”Ÿäº†ã€‚NAT å°±æ˜¯å°†è¿™ç§åœ°å€è½¬æ¢æˆæœ‰æ•ˆçš„å¤–éƒ¨å…¨çƒ IP åœ°å€ï¼Œä½¿å¾—æ•´ä¸ªä¸“ç”¨ç½‘åªéœ€è¦ä¸€ä¸ªå…¨çƒ IP åœ°å€å°±å¯ä»¥ä¸å› ç‰¹ç½‘è”é€šã€‚\nå­ç½‘æ©ç IPåœ°å€=æ ‡å‡†ç½‘ç»œå·+å­ç½‘å·+ä¸»æœºå·ã€‚ä» IP åˆ†ç±»å¯ä»¥å¾ˆå®¹æ˜“ç¡®å®šâ€œæ ‡å‡†ç½‘ç»œå·â€ï¼Œ32bitçš„ IP åœ°å€é™¤å»å‰é¢çš„â€œæ ‡å‡†ç½‘ç»œå·â€ä¹‹åï¼Œå‰©ä¸‹çš„å°±æ˜¯â€œå­ç½‘å·â€å’Œâ€œä¸»æœºå·â€ï¼Œé‚£ä¹ˆæ€ä¹ˆç¡®å®šâ€œå­ç½‘å·â€å’Œâ€œä¸»æœºå·â€å‘¢ï¼Ÿ è¿™å°±éœ€è¦å€ŸåŠ©â€œå­ç½‘æ©ç â€äº†ã€‚\nå­ç½‘æ©ç ä¹Ÿæ˜¯ä¸€ä¸ª 32bit(xxx.xxx.xxx.xxx)çš„å€¼ï¼Œå…¶ä¸­å€¼ä¸º 1 çš„ bit ç•™ç»™â€œæ ‡å‡†ç½‘ç»œå·â€å’Œâ€œå­ç½‘å·â€ï¼Œä¸º 0 çš„ bit ç•™ç»™â€œä¸»æœºå·â€ã€‚æˆ‘ä»¬å¯ä»¥å°†å­ç½‘æ©ç å’Œ IP åœ°å€è¿›è¡ŒäºŒè¿›åˆ¶â€œä¸è¿ç®—â€ï¼Œé€šè¿‡å¾—åˆ°çš„ç»“æœæ¥ç¡®å®šâ€œå­ç½‘å·â€ã€‚\nä»¥ C ç±» IP åœ°å€ä¸ºä¾‹ï¼Œå¯¹äºè§„èŒƒçš„ C ç±» IP åœ°å€æ¥è¯´ï¼Œè§„èŒƒå­ç½‘æ©ç ä¸º255.255.255.0ï¼Œå³ç”¨ 32 æ¯”ç‰¹ IP åœ°å€çš„å‰ 24 æ¯”ç‰¹æ ‡è¯†ç½‘ç»œå·ï¼Œå 8 æ¯”ç‰¹æ ‡è¯†ä¸»æœºå·ã€‚å› è€Œï¼Œæ¯ä¸ª C ç±»ç½‘ç»œä¸‹å…±å¯å®¹çº³ 254 å°ä¸»æœº($2^8-2$)ã€‚ \nå¦‚ä»Šï¼Œæˆ‘ä»¬æ‰“ç®—å€Ÿç”¨ 2 æ¯”ç‰¹çš„ä¸»æœºå·æ¥å……ä»»å­ç½‘ç»œå·ã€‚C ç±»ç½‘ç»œåœ°å€210.31.233.0ï¼Œæˆ‘ä»¬å€Ÿç”¨ 2 æ¯”ç‰¹çš„ä¸»æœºå·æ¥å……å½“å­ç½‘å·ï¼Œå­ç½‘çš„æ•°ç›®ä¸º$2^2-2$(å­ç½‘å·æ— æ³•å…¨ä¸º 0 æˆ– 1ï¼Œæ‰€ä»¥å‡ 2).\n\nä¸ºäº†å€Ÿç”¨åŸæ¥ 8 ä½ä¸»æœºå·ä¸­çš„å‰ 2 ä½å……ä»»å­ç½‘ç»œå·ï¼Œäºæ˜¯é‡‡ç”¨äº†éè§„èŒƒçš„å­ç½‘æ© 255.255.255.192ã€‚\né‡‡ç”¨äº†æ–°çš„å­ç½‘æ©ç åï¼Œå€Ÿç”¨çš„ 2 ä½å­ç½‘å·å¯ä»¥ç”¨æ¥æ ‡è¯†ä¸¤ä¸ªå­ç½‘ï¼š01 å­ç½‘å’Œ 10 å­ç½‘(å­ç½‘å·æ— æ³•å…¨ä¸º 0 æˆ– 1ï¼Œå› è€Œ 00ã€11 å­ç½‘æ— æ³•ç”¨)ã€‚\nå¯¹äºä¸Šå›¾çš„ 01 å­ç½‘æ¥è¯´ï¼Œå…¶ç½‘ç»œå·çš„ç‚¹åˆ†åè¿›åˆ¶çš„æ–¹å¼ä¸ºï¼š210.31.233.64ï¼Œè¯¥å­ç½‘çš„æœ€å° IP åœ°å€ä¸ºï¼š210.31.233.65ï¼Œæœ€å¤§ IP åœ°å€ä¸ºï¼š210.31.233.126ï¼ˆä¸»æœºå·å…¨ä¸º 1 çš„æ˜¯å¹¿æ’­åœ°å€ï¼Œéœ€è¦æ’é™¤ï¼‰ï¼Œå…±å¯å®¹çº³ 62 å°ä¸»æœºã€‚å¯¹è¯¥å­ç½‘çš„ç›´æ¥å¹¿æ’­åœ°å€ä¸ºï¼š210.31.233.127ï¼ˆä¸»æœºå·å…¨ä¸º 1ï¼‰ã€‚\n\nç»å¸¸è§åˆ°åƒ192.168.1.0/24è¿™æ ·çš„å†™æ³•ï¼Œå®ƒçš„æ„æ€æ˜¯ç½‘ç»œå·ä¸º192.168.1.0ï¼›å­ç½‘æ©ç ä¸º 24 ä½ï¼Œå³111111111 111111111 111111111 00000000ï¼Œè½¬ä¸ºç‚¹åˆ†åè¿›åˆ¶å°±ä¸º255.255.255.0ï¼Œå¯ä»¥æ‹¥æœ‰çš„ä¸»æœºæ•°ä¸º$2^8$-2.\n\nç½‘å…³çš„ä½œç”¨ä½ çš„ä½å€ IP æ˜¯æ­¦æ±‰å¸‚æ´ªå±±åŒºæ–‡æ²»è¡—16å·ï¼Œä½ çš„çˆ¶æ¯åªå…è®¸ä½ å’Œæ–‡æ²»è¡—çš„å°æœ‹å‹ï¼ˆåŒä¸€ä¸ªå­ç½‘ï¼‰ä¸€èµ·ç©è€ï¼Œå¦‚æœä½ æƒ³è¦å»å’Œåˆ«çš„è¡—é“ï¼ˆåˆ«çš„å­ç½‘ï¼‰çš„å°æœ‹å‹ç©è€ï¼Œä½ å°±éœ€è¦ç»è¿‡ä½ çš„çˆ¶æ¯çš„åŒæ„ï¼Œç”±ä½ çš„çˆ¶æ¯å¸¦ä½ è¿‡å»ï¼Œè¿™æ—¶å€™ä½ çš„çˆ¶æ¯å°±å……å½“äº†ç½‘å…³çš„è§’è‰²ï¼Œæ²¡æœ‰ä½ çš„çˆ¶æ¯ï¼Œä½ å°±ä¸èƒ½å’Œå…¶ä»–è¡—é“ï¼ˆå…¶ä»–å­ç½‘ï¼‰çš„å°æœ‹å‹ç©è€ã€‚\nåŒ…çš„å°è£…ä¸è§£å°è£…\nå°è£…è‹±æ–‡ï¼šEncapsulationè§£å°è£…è‹±æ–‡ï¼šDemultiplexing\n\nå½“åº”ç”¨ç¨‹åºä½¿ç”¨ç½‘ç»œä¼ é€æ•°æ®æ—¶ï¼Œæ•°æ®æŒ‰ç…§åè®®æ ˆä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œé€æ¬¡é€šè¿‡æ¯ä¸€å±‚ã€‚å…¶ä¸­æ¯ä¸€å±‚å¯¹æ”¶åˆ°çš„æ•°æ®éƒ½è¦å¢åŠ ä¸€äº›é¦–éƒ¨ä¿¡æ¯ï¼ˆæœ‰æ—¶è¿˜å¢åŠ å°¾éƒ¨ä¿¡æ¯ï¼‰ã€‚æœ€ç»ˆç”Ÿæˆçš„ä¸€ä¸²æ¯”ç‰¹æµå°†é€šè¿‡ä»¥å¤ªç½‘æ¥ä¼ è¾“ï¼Œæˆ‘ä»¬ç§°è¿™ä¸²æ¯”ç‰¹æµå«å¸§ã€‚\nå¦‚å›¾ï¼š\nå½“æ•°æ®æŠ¥åˆ°è¾¾é“¾è·¯å±‚æ—¶ï¼Œé“¾è·¯å±‚ä¹Ÿè¦å¯¹ IP æ•°æ®åŒ…å°è£…è¿›è¡ŒåŒ…è£…ã€‚é“¾è·¯å±‚å¯¹ IP æ•°æ®åŒ…å°è£…çš„æ–¹å¼ä¸»è¦æœ‰ä»¥å¤ªç½‘IPæ•°æ®åŒ…å°è£…ï¼ˆRFC894ï¼‰ã€IEEE 802 IPæ•°æ®æŠ¥å°è£…ï¼ˆRFC1042ï¼‰ä¸¤ç§ï¼Œæœ€å¸¸ä½¿ç”¨çš„å°è£…æ ¼å¼æ˜¯ä»¥å¤ªç½‘ IP æ•°æ®åŒ…å°è£…ï¼ˆRFC894ï¼‰ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†è¿™ä¸¤ç§ä¸åŒå½¢å¼çš„å°è£…æ ¼å¼ï¼šä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ä»¥å¤ªç½‘å°è£…é™åˆ¶äº†æ•°æ®å¸§çš„æœ€å¤§é•¿åº¦ä¸º 1500 å­—èŠ‚ï¼Œè¿™ä¸ªé™åˆ¶å«åš MTUï¼Œæœ€å¤§ä¼ è¾“å•å…ƒï¼ˆè¯¦è§ç¬¬å››èŠ‚ï¼‰ã€‚\næ¥æ”¶ç«¯æ”¶åˆ°å¸§ä¹‹åï¼ŒæŒ‰ç…§å’Œä¸Šé¢ç›¸åçš„é¡ºåºï¼ˆåè®®æ ˆä»ä¸‹åˆ°ä¸Šï¼‰æ¥è§£åŒ…ï¼Œä¾æ¬¡è§£ææ¯ä¸€å±‚åŠ å…¥çš„å¤´éƒ¨ï¼ˆæˆ–å°¾éƒ¨ï¼‰ï¼Œæœ€ç»ˆå°†åŸå§‹æ•°æ®ä¼ ç»™æœ€ä¸Šå±‚åº”ç”¨ç¨‹åºã€‚å¦‚å›¾ï¼š\nå› ä¸ºä¼ è¾“å±‚çš„ TCPã€UDPã€ICMP ç­‰éƒ½æœ‰å¯èƒ½å‘ç½‘ç»œå±‚ IP åè®®ä¼ é€æ•°æ®ï¼Œè¿™æ ·åœ¨ IP åè®®å±‚è§£åŒ…çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“è¿™ä¸ªåŒ…å¯¹åº”çš„ä¸Šå±‚åè®®æ˜¯å“ªä¸€ä¸ªï¼Œå› æ­¤ IP åè®®å¿…é¡»åœ¨ç”Ÿæˆçš„ IP é¦–éƒ¨åŠ å…¥æŸç§æ ‡è¯†ï¼Œä»¥è¡¨æ˜æ•°æ®çš„ä¸Šä¸€å±‚çš„å…·ä½“åè®®ã€‚ä¸ºæ­¤ï¼ŒIP åœ¨é¦–éƒ¨ä¸­å­˜å…¥äº†ä¸€ä¸ªé•¿åº¦ä¸º 8bit çš„æ•°å€¼ï¼Œç§°ä½œåè®®åŸŸã€‚å¸¸è§çš„ IP åè®®å·æœ‰ï¼š1 è¡¨ç¤º ICMP åè®®ï¼Œ2 è¡¨ç¤º IGMP åè®®ï¼Œ6 è¡¨ç¤º TCP åè®®ï¼Œ17 è¡¨ç¤º UDP åè®®ã€‚\n\nå®Œæ•´çš„ IP åè®®å·è§ï¼šIP åè®®å·åˆ—è¡¨\n\nMTUå‰é¢ç¬¬ä¸‰èŠ‚æåˆ°äº†ä»¥å¤ªç½‘å°è£…é™åˆ¶äº†æ•°æ®å¸§çš„é•¿åº¦ä¸º 1500 å­—èŠ‚ï¼Œè¿™ä¸ªé™åˆ¶æ˜¯åœ¨é“¾è·¯å±‚å°è£… IP æ•°æ®æŠ¥æ—¶ä½œçš„ã€‚å¦‚æœ IP å±‚çš„æ•°æ®æŠ¥æ¯”é“¾è·¯å±‚çš„è¿™ä¸ª MTU å€¼å¤§ï¼Œé‚£ä¹ˆ IP å±‚å°±éœ€è¦åˆ†ç‰‡ï¼ˆè‹±æ–‡ï¼šfragmentationï¼‰ï¼ŒæŠŠæ•°æ®æŠ¥åˆ†æˆè‹¥å¹²ç‰‡ï¼Œä¿è¯æ¯ä¸€ç‰‡çš„å¤§å°éƒ½å°äº MTU å€¼ã€‚\nwindows ç³»ç»Ÿä¿®æ”¹ MTU å€¼\næŸ¥è¯¢å½“å‰ MTU å€¼\n\nnetsh interface ipv4 show subinterfaces\n\n\n\nä¿®æ”¹ MTU å€¼\n\nnetsh interface ipv4 set subinterface &quot;æœ¬åœ°è¿æ¥&quot; mtu=1480 store=persistent\n\n\næ–‡ç« å‚è€ƒï¼šhttps://m.vipcn.com/a/360973/ &gt; https://ahaochan.github.io/posts/IP_address,_subnet_mask,_gateway_Introduction.html &gt; https://www.zhihu.com/question/20717354\n\nã€ŠTCP&#x2F;IP è¯¦è§£ å· 1ï¼šåè®®ã€‹åœ¨çº¿é˜…è¯»åœ°å€ï¼šhttp://www.52im.net/topic-tcpipvol1.html\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"ç½‘ç»œåè®®(6)--TCPåè®®","url":"/post/1504706832.html","content":"TCP ç‰¹æ€§å°½ç®¡ TCP å’Œ UDP éƒ½æ˜¯ç”¨ IP åè®®ä½œä¸ºç½‘ç»œå±‚ï¼Œä½† TCP å´æä¾›å’Œ UDP å®Œå…¨ä¸åŒçš„ç½‘ç»œæœåŠ¡ã€‚TCP æ˜¯é¢å‘è¿æ¥çš„ã€ç¨³å®šå¯é çš„å­—èŠ‚æµæœåŠ¡ã€‚TCP é¦–éƒ¨çš„å¾ˆå¤šå­—æ®µéƒ½æ˜¯ä¸ºäº†å®ç°è¿™ 2 å¤§ç‰¹æ€§è€Œè®¾è®¡çš„ã€‚\n\n\nåœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­ï¼Œä»…æœ‰ä¸¤æ–¹èƒ½è¿›è¡Œå½¼æ­¤é€šä¿¡ã€‚æ‰€ä»¥è¯´å¹¿æ’­å’Œå¤šæ’­ä¸é€‚ç”¨äº TCP åè®®ã€‚\nä¸ºäº†é€šè¿‡ IP æ•°æ®æŠ¥å®ç°å¯é æ€§ä¼ è¾“ï¼Œéœ€è¦è€ƒè™‘å¾ˆå¤šäº‹æƒ…ï¼Œå¦‚æ•°æ®çš„ç ´åã€ä¸¢åŒ…ã€é‡å¤ä»¥åŠåˆ†ç‰‡é¡ºåºæ··ä¹±ç­‰é—®é¢˜ã€‚TCP é€šè¿‡æ£€éªŒå’Œã€åºåˆ—å·ã€ç¡®è®¤åºåˆ—å·ã€é‡å‘æ§åˆ¶ã€è¿æ¥ç®¡ç†ä»¥åŠçª—å£æ§åˆ¶ç­‰æœºåˆ¶æ¥å®ç°å¯é æ€§ä¼ è¾“ã€‚\nTCP åè®®é¦–éƒ¨æ‘˜è‡ªã€ŠTCP&#x2F;IP è¯¦è§£å· 1ã€‹ä¸­çš„å…³äº TCP é¦–éƒ¨å®šä¹‰çš„å›¾ï¼š\nTCP åè®®çš„å®ç°è¾ƒ UDP åè®®å¤æ‚å¤ªå¤šï¼Œå®ƒçš„é¦–éƒ¨çš„å„ä¸ªå­—æ®µçš„ç”¨æ³•ä¹Ÿæ¯” UDP é¦–éƒ¨å­—æ®µå¤æ‚å¤šï¼Œè¿™é‡Œå…ˆå¯¹ TCP é¦–éƒ¨å­—æ®µçš„åŠŸèƒ½åšä¸ªå¤§æ¦‚çš„ä»‹ç»ã€‚\n\n16 ä½æºç«¯å£å·ï¼šè¡¨ç¤ºå‘é€ç«¯ç«¯å£å·ã€‚ä¼ è¾“å±‚ä½¿ç”¨ç«¯å£å·æ¥æ ‡è¯†å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„åº”ç”¨ç¨‹åºï¼Œè€Œç½‘ç»œå±‚æ˜¯é€šè¿‡ IP åœ°å€æ¥æ ‡è¯†ä¸»æœºï¼Œè¿™æ ·ä½¿ç”¨â€œIP åœ°å€+ç«¯å£â€å°±å¯ä»¥ç²¾ç¡®å®šä½åˆ°æŸä¸€å°ä¸»æœºä¸Šçš„æŸä¸€åº”ç”¨ç¨‹åºã€‚\n16 ä½ç›®çš„ç«¯å£å·ï¼šè¡¨ç¤ºæ¥æ”¶ç«¯ç«¯å£å·ã€‚\n32 ä½åºåˆ—å·ï¼šåºåˆ—å·ç”¨æ¥æ ‡è¯†ä» TCP å‘é€ç«¯å·²ç»å‘é€çš„å­—èŠ‚æ•°ã€‚è¾¾åˆ°æœ€å¤§å€¼$2^{32}-1$ä¹‹åï¼Œå†ä» 0 å¼€å§‹ã€‚\n32 ä½ç¡®è®¤åºåˆ—å·ï¼šç¡®è®¤åºåˆ—å·ç”¨æ¥æ ‡è¯† TCP æ¥æ”¶ç«¯æœŸæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªåºåˆ—å·ï¼ˆåè¿‡æ¥æƒ³ä¹Ÿå°±æ˜¯ï¼ŒTCP æ¥æ”¶ç«¯å·²ç»æ¥å—åˆ°çš„å­—èŠ‚æ•°ä¸ºç¡®è®¤åºåˆ—å·å‡å»1ï¼‰ã€‚**åªæœ‰ACKæ ‡å¿—ä½ä¸º 1 æ—¶ï¼Œè¯¥å­—æ®µæ‰æœ‰æ•ˆã€‚**åªè¦ TCP è¿æ¥å»ºç«‹ï¼Œè¿™ä¸ªå­—æ®µä¼šä¸€ç›´èµ·ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ TCP è¿æ¥å»ºç«‹ï¼ŒACKæ ‡å¿—ä½ä¼šä¸€ç›´ä¸º 1ã€‚\n4 ä½é¦–éƒ¨é•¿åº¦ï¼šå’Œ IP é¦–éƒ¨ä¸€æ ·ï¼Œæ˜¯ä»¥4ä¸ªå­—èŠ‚(32 bit)ä¸ºå•ä½çš„ï¼Œæ‰€ä»¥ TCP é¦–éƒ¨æœ€å¤§é•¿åº¦ä¹Ÿæ˜¯15*4=60å­—èŠ‚ã€‚è‹¥æ²¡æœ‰â€œé€‰é¡¹â€å­—æ®µï¼Œé•¿åº¦å›ºå®šä¸º 20 å­—èŠ‚ã€‚\n6 ä½æ ‡å¿—ä½ï¼šä»–ä»¬ä¸­çš„å¤šä¸ªå¯ä»¥åŒæ—¶è¢«è®¾ç½®ä¸º 1ã€‚\n\nURG æ ‡è®°åé¢çš„&quot;16ä½ç´§æ€¥æŒ‡é’ˆ&quot;æ˜¯å¦æœ‰æ•ˆã€‚ACK æ ‡è®°å‰é¢çš„&quot;32ä½ç¡®è®¤åºå·&quot;æ˜¯å¦æœ‰æ•ˆã€‚PSH æ¥æ”¶æ–¹åº”è¯¥å°½å¿«çš„å°†è¿™ä¸ªæŠ¥æ–‡äº¤ç»™ä¸Šå±‚çš„ç½‘ç»œå±‚ã€‚RST é‡å»ºè¿æ¥ã€‚SYN æ ‡è®°è¿™ä¸ªTCPæ®µæ˜¯ç”¨æ¥åŒæ­¥åˆå§‹åºå·ï¼ˆISNï¼‰çš„ã€‚FIN æ ‡è®°å‘é€ç«¯å·²ç»å®Œæˆäº†å‘é€ä»»åŠ¡ã€‚\n\n\n16 ä½çª—å£å¤§å°ï¼šçª—å£å¤§å°ä¸ºå­—èŠ‚æ•°ï¼Œç”¨äº TCP çš„æµé‡æ§åˆ¶ï¼Œè¿™ä¸ªå€¼æ˜¯æ¥æ”¶ç«¯æœŸæœ›æ¥å—çš„å­—èŠ‚æ•°ã€‚\n16 ä½æ ¡éªŒå’Œï¼šå’Œ UDP ç±»ä¼¼ï¼Œæ ¡éªŒå’Œè¦†ç›–é¦–éƒ¨å’Œæ•°æ®éƒ¨åˆ†ã€‚\n16 ä½ç´§æ€¥æŒ‡é’ˆï¼šåªæœ‰å‰é¢æåˆ°çš„URGæ ‡è®°ä½ä¸º 1 æ—¶ï¼Œè¿™ä¸ªå­—æ®µæ‰æœ‰æ•ˆã€‚\né€‰é¡¹ï¼šæ·»åŠ ä¸€äº›é™„åŠ æ•°æ®ã€‚å’Œ UDP ä¸åŒï¼ŒTCP çš„â€œé€‰é¡¹â€å­—æ®µä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚\n\nä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹å®Œæ•´çš„ TCP ä¼šè¯æµç¨‹å›¾æœ¬æ–‡é€šè¿‡çœŸå®çš„ç½‘ç»œç¤ºä¾‹æ¥è®²è§£ TCP çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ã€‚è¯»è€…å¯ä»¥å…ˆä¸‹è½½ä½œè€…å†™æœ¬æ–‡æ—¶ä½¿ç”¨çš„ç½‘ç»œåŒ…ç¤ºä¾‹ï¼Œç„¶åä½¿ç”¨ wireshark æ‰“å¼€ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ wireshark éšä¾¿æŠ“å–ä¸€ä¸ªç½‘ç»œåŒ…ï¼‰ï¼Œé€‰ä¸­ç¼–å·ä¸ºNo.9çš„åŒ…ï¼Œå³é”®é€‰æ‹©â€œè¿½è¸ªæµâ€ â€“&gt; â€œTCP æµâ€ï¼š\n\n\nä¸Šå›¾æ˜¯ä½¿ç”¨ wireshark æŠ“å–çš„ä¸€ä¸ª Http æ¥å£è¯·æ±‚çš„è¿‡ç¨‹ï¼ˆä¸å« DNS è§£æç­‰æ­¥éª¤ï¼‰ï¼ŒåŒ…å«äº† TCP è¿æ¥å»ºç«‹ã€Http è¯·æ±‚ã€Http å“åº”ã€TCP è¿æ¥æ–­å¼€ã€‚ç°åœ¨ä»¥è¿™ä¸ªç¤ºä¾‹ä¸ºåŸºç¡€ï¼Œæ¥ç”»å‡ºè¯¥ Http æ¥å£è¯·æ±‚ä¸­æ¶‰åŠçš„æ•´ä¸ª TCP ä¼šè¯çš„æµç¨‹ï¼ˆä¹Ÿæ˜¯æœ¬æ–‡æœ€é‡è¦çš„å›¾ï¼‰ï¼š\n\n\nç®­å¤´ä¸Šæ–¹æ ‡å‡ºäº†è¯¥ TCP åŒ…SYNã€ACKã€FINã€PSHç­‰æ ‡å¿—ä½çš„è®¾ç½®æƒ…å†µï¼ˆå¤§å®¶å¯èƒ½æ³¨æ„åˆ°ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªç®­å¤´ä¸Šæ²¡æœ‰ACKä¹‹å¤–ï¼Œå…¶ä»–çš„ç®­å¤´ä¸Šéƒ½æœ‰ACKï¼Œè¿™æ˜¯å› ä¸ºACKæ ‡è®°ä½åªæ˜¯ç”¨äºæ ‡è®° TCP é¦–éƒ¨çš„32ä½ç¡®è®¤åºåˆ—å·æ˜¯å¦æœ‰æ•ˆã€‚åœ¨æ­¤ä¹‹åçš„32ä½ç¡®è®¤åºåˆ—å·ä¸€ç›´æœ‰æ•ˆï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸€ç›´æœ‰ACKæ ‡è®°ä½ã€‚ï¼‰ï¼›ç®­å¤´ä¸‹å‘æ ‡å‡ºäº†è¯¥ TCP åŒ…çš„åºå·å’Œç¡®è®¤åºå·ã€‚\nseq_numï¼šè¡¨ç¤º 32 ä½çš„åºå·ï¼Œç´§è·Ÿå…¶åæ‹¬å·[]ä¸­çš„æ˜¯ç›¸å¯¹åºå·ã€‚\nack_numï¼šè¡¨ç¤º 32 ä½çš„ç¡®è®¤åºå·ï¼Œç´§è·Ÿå…¶åæ‹¬å·[]ä¸­çš„æ˜¯ç›¸å¯¹ç¡®è®¤åºå·ã€‚\npayload_lenï¼šè¡¨ç¤ºæœ¬æ¬¡ TCP æºå¸¦çš„æ•°æ®å¤§å°ï¼ˆå­—èŠ‚ï¼‰ã€‚\nåœ¨ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„éƒ¨åˆ†ï¼Œæ—è¾¹çš„çº¢è‰²ç²—ä½“å­—è¡¨ç¤ºå½“å‰ç«¯çš„ TCP çŠ¶æ€ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­æ˜¯æœåŠ¡ç«¯æ‰§è¡Œä¸»åŠ¨å…³é—­ã€‚\n\n\nWireshark çš„ç›¸å¯¹åºå·ç›¸å¯¹åºå·æ˜¯ Wireshark å¼•å‡ºçš„æ¦‚å¿µï¼ŒTCP åè®®ä¸­æ²¡æœ‰è¿™ä¸ªæ¦‚å¿µã€‚Wireshark ä½¿ç”¨ç›¸å¯¹æ•°å€¼æ¥æ˜¾ç¤ºåºå·å’Œç¡®è®¤åºå·ï¼Œè¿™ä¸ªç›¸å¯¹å€¼æ˜¯ç›¸å¯¹äºåˆå§‹åºå·ï¼ˆISNï¼‰è€Œè¨€çš„ã€‚å› ä¸ºäººç±»æ›´åŠ ä¹ æƒ¯è·Ÿè¸ªæ›´å°æ•°å€¼ï¼Œæ‰€ä»¥ Wireshark é»˜è®¤ç”¨ç›¸å¯¹æ•°å€¼æ¥å±•ç¤ºã€‚å¦‚æœéœ€è¦æŸ¥çœ‹çœŸå®çš„åºå·ï¼Œå¯ä»¥åœ¨ wireshark ä¸­é€‰ä¸­è¯¥ç½‘ç»œåŒ…ï¼Œåœ¨æœ€ä¸‹æ–¹çš„æ•°æ®çª—å£æŸ¥çœ‹ï¼Œå¦‚ï¼š\nWireshark çš„ TCP æµé‡å›¾æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Wireshark è‡ªå¸¦çš„ç»Ÿè®¡åŠŸèƒ½æ¥æŸ¥çœ‹æ•´ä¸ª TCP ä¼šè¯çš„è¿‡ç¨‹ã€‚é€šè¿‡èœå•â€œç»Ÿè®¡â€ â€“&gt; â€œæµé‡å›¾â€æ‰“å¼€æµé‡å›¾çª—å£ï¼Œåœ¨â€œæ˜¾ç¤ºâ€é€‰é¡¹é€‰æ‹©â€œæ˜¾ç¤ºçš„åˆ†ç»„â€ï¼Œâ€œæµç±»å‹â€é€‰é¡¹é€‰æ‹©â€œTCP æµâ€ï¼Œå¦‚å›¾ï¼š\nTIME_WAIT åŠ MSLTIME_WAIT çŠ¶æ€ä¸ºä½•å­˜åœ¨ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¸ä½¿ç”¨â€œå®¢æˆ·ç«¯â€ã€â€œæœåŠ¡ç«¯â€æ¥è¡¨ç¤º TCP è¿æ¥çš„ 2 ç«¯ï¼Œè½¬è€Œä½¿ç”¨â€œä¸»åŠ¨æ–­å¼€è¿æ¥ç«¯â€ã€â€œè¢«åŠ¨æ–­å¼€è¿æ¥ç«¯â€æ¥è¡¨ç¤º TCP é€šè®¯çš„ 2 ç«¯ã€‚å› ä¸ºæ‰§è¡Œä¸»åŠ¨æ–­å¼€è¿æ¥çš„ç«¯å¯èƒ½æ˜¯æœåŠ¡ç«¯ä¹Ÿå¯èƒ½æ˜¯å®¢æˆ·ç«¯ï¼ˆè™½ç„¶æˆ‘ä»¬å¤§å¤šæ•°æƒ…å†µä¸‹é‡åˆ°çš„æ˜¯å®¢æˆ·ç«¯æ‰§è¡Œä¸»åŠ¨æ–­å¼€ï¼‰ã€‚\nåœ¨â€œä¸»åŠ¨æ–­å¼€è¿æ¥ç«¯â€æ”¶åˆ°äº†â€œè¢«åŠ¨æ–­å¼€è¿æ¥ç«¯â€å‘æ¥çš„LAST_ACKä¹‹åï¼Œä¼šç»™â€œè¢«åŠ¨æ–­å¼€è¿æ¥ç«¯â€å›å¤ä¸€ä¸ªACKç¡®è®¤æ¶ˆæ¯ã€‚ä½†è¿™ä¸ªæ—¶å€™ä¸ºäº†ç¡®ä¿â€œè¢«åŠ¨æ–­å¼€è¿æ¥ç«¯â€æœ‰è¶³å¤Ÿçš„æ—¶é—´èƒ½å¤Ÿæ”¶åˆ°è¯¥æ¶ˆæ¯ï¼Œâ€œä¸»åŠ¨æ–­å¼€è¿æ¥ç«¯â€ä¸èƒ½é©¬ä¸Šå…³é—­ socketï¼Œéœ€è¦ç­‰å¾…ä¸€å®šçš„æ—¶é—´æ¥ç¡®ä¿â€œè¢«åŠ¨æ–­å¼€è¿æ¥ç«¯â€å¯ä»¥æ”¶åˆ°ACKç¡®è®¤æ¶ˆæ¯ã€‚â€œä¸»åŠ¨æ–­å¼€è¿æ¥ç«¯â€åœ¨ç­‰å¾…çš„è¿™ä¸ªæ—¶é—´æ®µå†…çš„çŠ¶æ€æˆ‘ä»¬ç§°ä¹‹ä¸ºTIME_WAITçŠ¶æ€ã€‚\nå½’çº³ä¸ºä¸€å¥è¯å°±æ˜¯ï¼šTIME_WAIT çŠ¶æ€å°±æ˜¯â€œä¸»åŠ¨æ–­å¼€çš„ä¸€æ–¹â€åœ¨å‘é€å®Œæœ€åä¸€æ¬¡ ACK åè¿›å…¥çš„ç­‰å¾…çŠ¶æ€ã€‚\nç­‰å¾…æ—¶é—´é‚£ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦æŒç»­å¤šä¹…äº†ï¼Œä¹Ÿå°±æ˜¯â€œä¸»åŠ¨æ–­å¼€è¿æ¥ç«¯â€åœ¨å‘é€å®Œæœ€åä¸€ä¸ª ACK ä¹‹åéœ€è¦ç­‰å¾…å¤šä¹…äº†ï¼Ÿã€ŠTCP&#x2F;IP è¯¦è§£ å· 1ï¼šåè®®ã€‹ä¸­æåˆ°ï¼šé»˜è®¤ TIME_WAIT çš„è¶…æ—¶æ—¶é—´æ˜¯ 2 å€çš„ MSLã€‚MSL æ˜¯Maximum Segment Lifetimeçš„ç¼©å†™ï¼Œè¡¨ç¤ºæŠ¥æ–‡çš„æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´å’Œç³»ç»Ÿçš„ TCP å®ç°æœ‰å…³ï¼Œæ¯ä¸ªç³»ç»Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚\nwindows ç³»ç»Ÿ MSLæ³¨å†Œè¡¨HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parametersä¸‹çš„TcpTimedWaitDelayé”®ï¼ˆå¦‚æœæ²¡æœ‰å¯ä»¥æ–°å»ºä¸€ä¸ªï¼‰å°±å¯¹åº”äº†2*MSLï¼ˆ2 å€çš„ MSLï¼‰çš„å€¼ã€‚\nLinux ç³»ç»Ÿ MSLä»¥ CentOS ä¸ºä¾‹ï¼ˆæ‘˜è‡ªç½‘ç»œï¼Œä»…ä¾›å‚è€ƒï¼‰ï¼š\n\næŸ¥çœ‹é»˜è®¤çš„ MSL å€¼ï¼ˆ60sï¼‰ï¼š\n\ncat /proc/sys/net/ipv4/tcp_fin_timeout\n\n\nä¿®æ”¹é»˜è®¤ä¸º 120ï¼š\n\necho 120 &gt; /proc/sys/net/ipv4/tcp_fin_timeout\n\n\nä¿®æ”¹å®Œæˆåï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼š\n\nsysctl -p /etc/sysctl.conf\n\n\næŸ¥çœ‹æ˜¯å¦å·²ç»ç”Ÿæ•ˆï¼š\n\nsysctl -a | grep fin\n\nSO_REUSEADDR\nå¦‚æœè¿›ç¨‹ä¸­çš„æŸä¸ª TCP è¿æ¥å¤„äºTIME_WAITç­‰å¾…çŠ¶æ€ï¼Œå› ä¸ºè¿™ä¸ªç­‰å¾…æ—¶é—´æ¯”è¾ƒé•¿ï¼Œåœ¨è¿™æœŸé—´è¯¥è¿æ¥ä½¿ç”¨çš„ç«¯å£å°†ä¸€ç›´è¢«å ç”¨ã€‚\n\nå¦‚æœä¸€ä¸ªæœåŠ¡ç«¯è¿›ç¨‹ï¼ˆç»‘å®šäº†æŸä¸ªç«¯å£ï¼‰é€€å‡ºï¼ˆæ­£å¸¸é€€å‡ºæˆ–å¼‚å¸¸é€€å‡ºï¼‰åï¼Œç«‹å³å¯åŠ¨ä¸€ä¸ªæ–°çš„è¯¥è¿›ç¨‹ï¼Œå¯èƒ½ç”±äº Windows ç³»ç»Ÿå¯¹ç«¯å£çš„é‡Šæ”¾ä¸åŠæ—¶ï¼Œå¯¼è‡´è¿™ä¸ªç«¯å£è¿˜æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œä¸èƒ½è¢«å†æ¬¡ç»‘å®šï¼Œä»è€Œå¯¼è‡´æ–°è¿›ç¨‹ç»‘å®šç«¯å£å¤±è´¥ã€‚\n\n\né‚£ä¹ˆé‡åˆ°ä¸Šé¢çš„é—®é¢˜å¦‚ä½•è§£å†³äº†ï¼Ÿæˆ‘ä»¬åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ç»å¸¸è®¾ç½®çš„SO_REUSEADDRé€‰é¡¹å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ\nint flag = 1;setsockopt(socket, SOL_SOCKET, SO_REUSEADDR, reinterpret_cast&lt;const char*&gt;(&amp;flag), sizeof(flag));\n\nSO_REUSEADDRæä¾›å¦‚ä¸‹å››ä¸ªåŠŸèƒ½ï¼š\n\nSO_REUSEADDR å…è®¸å¯åŠ¨ä¸€ä¸ªç›‘å¬æœåŠ¡å™¨å¹¶æ†ç»‘å…¶ä¼—æ‰€å‘¨çŸ¥ç«¯å£ï¼Œå³ä½¿ä»¥å‰å»ºç«‹çš„å°†æ­¤ç«¯å£ç”¨åšä»–ä»¬çš„æœ¬åœ°ç«¯å£çš„è¿æ¥ä»å­˜åœ¨ã€‚è¿™é€šå¸¸æ˜¯é‡å¯ç›‘å¬æœåŠ¡å™¨æ—¶å‡ºç°ï¼Œè‹¥ä¸è®¾ç½®æ­¤é€‰é¡¹ï¼Œåˆ™bindæ—¶å°†å‡ºé”™ã€‚\n\nSO_REUSEADDR å…è®¸åœ¨åŒä¸€ç«¯å£ä¸Šå¯åŠ¨åŒä¸€æœåŠ¡å™¨çš„å¤šä¸ªå®ä¾‹ï¼Œåªè¦æ¯ä¸ªå®ä¾‹æ†ç»‘ä¸€ä¸ªä¸åŒçš„æœ¬åœ° IP åœ°å€å³å¯ã€‚ç”±äºè®¾ç½®è¯¥Socketé€‰é¡¹ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šæƒé™ï¼Œæ¶æ„ç¨‹åºå¯ä»¥è½»æ˜“ä½¿ç”¨SO_REUSEADDRå¼ºåˆ¶ç»‘å®šå·²ç”¨äºæ ‡å‡†ç½‘ç»œåè®®æœåŠ¡çš„å¥—æ¥å­—ï¼Œä»è€Œä½¿è¿™äº›æœåŠ¡æ‹’ç»è®¿é—®ã€‚ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨SO_EXCLUSIVEADDRUSEé€‰é¡¹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nSO_REUSEADDR å…è®¸å•ä¸ªè¿›ç¨‹æ†ç»‘åŒä¸€ç«¯å£åˆ°å¤šä¸ªå¥—æ¥å£ä¸Šï¼Œåªè¦æ¯ä¸ªæ†ç»‘æŒ‡å®šä¸åŒçš„æœ¬åœ° IP åœ°å€å³å¯ã€‚è¿™ä¸€èˆ¬ä¸ç”¨äº TCP æœåŠ¡å™¨ã€‚\n\nSO_REUSEADDR å…è®¸å®Œå…¨é‡å¤çš„æ†ç»‘ï¼šå½“ä¸€ä¸ª IP åœ°å€å’Œç«¯å£ç»‘å®šåˆ°æŸä¸ªå¥—æ¥å£ä¸Šæ—¶ï¼Œè¿˜å…è®¸æ­¤ IP åœ°å€å’Œç«¯å£æ†ç»‘åˆ°å¦ä¸€ä¸ªå¥—æ¥å£ä¸Šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªç‰¹æ€§ä»…åœ¨æ”¯æŒå¤šæ’­çš„ç³»ç»Ÿä¸Šæ‰æœ‰ï¼Œè€Œä¸”åªå¯¹ UDP å¥—æ¥å£è€Œè¨€ï¼ˆTCP ä¸æ”¯æŒå¤šæ’­ï¼‰ã€‚\n\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªåŠŸèƒ½å°±å¯ä»¥ç”¨æ¥è§£å†³è¯¥é—®é¢˜ã€‚\n\nå…³äºSO_REUSEADDRæ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥è®¿é—®å¾®è½¯çš„å®˜æ–¹æ–‡æ¡£ï¼šusing-so-reuseaddr-and-so-exclusiveaddruse\n\nä¸ºä»€ä¹ˆè¦è¿›è¡Œ 3 æ¬¡æ¡æ‰‹ï¼Ÿå‰é¢çš„æ–‡ç« ä»‹ç»äº† TCP çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆ TCP çš„æ¡æ‰‹ä¸ºä»€ä¹ˆæ˜¯ 3 æ¬¡äº†ï¼Ÿ\n\næœ¬æ–‡ä» 3 ä¸ªè§’åº¦æ¥è§£é‡Šä¸ºä»€ä¹ˆè¦è¿›è¡Œ 3 æ¬¡æ¡æ‰‹ï¼Ÿ\nè§’åº¦ä¸€\nTCP çš„æ¡æ‰‹çš„ç›®çš„æ˜¯è®©é€šä¿¡åŒæ–¹éƒ½ç¡®å®šåŒæ–¹èƒ½å¤Ÿæ­£å¸¸å‘é€å’Œæ¥æ”¶ä¿¡æ¯ã€‚\nç¬¬ä¸€æ­¥ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ SYNï¼ŒæœåŠ¡ç«¯èƒ½å¤Ÿç¡®å®šå¦‚ä¸‹ä¿¡æ¯ï¼šâ€œå®¢æˆ·ç«¯çš„å‘é€åŠŸèƒ½æ­£å¸¸ï¼ŒæœåŠ¡ç«¯è‡ªå·±çš„æ¥å—åŠŸèƒ½æ­£å¸¸â€ã€‚ä½†å®¢æˆ·ç«¯è¿˜ä»€ä¹ˆéƒ½ä¸èƒ½ç¡®å®šã€‚ç¬¬äºŒæ­¥ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å›å¤çš„ SYN+ACKï¼Œæˆªè‡³ç›®å‰ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿç¡®å®šå¦‚ä¸‹ä¿¡æ¯ï¼šâ€œå®¢æˆ·ç«¯è‡ªå·±çš„å‘é€&#x2F;æ¥æ”¶åŠŸèƒ½éƒ½æ­£å¸¸ï¼ŒæœåŠ¡ç«¯çš„æ¥æ”¶å’Œå‘é€åŠŸèƒ½éƒ½æ­£å¸¸â€ï¼›æœåŠ¡ç«¯è¿˜æ˜¯åªèƒ½ç¡®å®šè‡ªå·±çš„æ¥å—åŠŸèƒ½æ­£å¸¸ï¼Œè¿˜ä¸çŸ¥é“è‡ªå·±çš„å‘é€åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œå®¢æˆ·ç«¯çš„æ¥å—åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚\nå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œåˆ°ç¬¬äºŒæ­¥å®Œæˆï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯èƒ½å¤Ÿç¡®è®¤çš„ä¿¡æ¯åˆ†åˆ«å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯èƒ½å¤Ÿç¡®å®šï¼š  å®¢æˆ·ç«¯-å‘é€ æ­£å¸¸  å®¢æˆ·ç«¯-æ¥æ”¶ æ­£å¸¸  æœåŠ¡ç«¯-å‘é€ æ­£å¸¸  æœåŠ¡ç«¯-æ¥æ”¶ æ­£å¸¸æœåŠ¡ç«¯èƒ½å¤Ÿç¡®å®šï¼š  å®¢æˆ·ç«¯-å‘é€ æ­£å¸¸  å®¢æˆ·ç«¯-æ¥æ”¶ ï¼Ÿ  æœåŠ¡ç«¯-å‘é€ ï¼Ÿ  æœåŠ¡ç«¯-æ¥æ”¶ æ­£å¸¸\n\nä»ä¸Šé¢è¡¨å¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒæ­¥å®Œæˆä¹‹åï¼ŒæœåŠ¡ç«¯è¿˜èƒ½ä¸èƒ½ç¡®å®šâ€œæœåŠ¡ç«¯çš„å‘é€åŠŸèƒ½â€å’Œâ€œå®¢æˆ·ç«¯çš„æ¥æ”¶åŠŸèƒ½â€æ˜¯å¦æ­£å¸¸ã€‚æ‰€ä»¥éœ€è¦ç¬¬ä¸‰æ­¥ã€‚\nç¬¬ä¸‰æ­¥ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å›å¤çš„ ACKï¼ŒæœåŠ¡ç«¯èƒ½å¤Ÿç¡®å®šå¦‚ä¸‹ä¿¡æ¯ï¼šå®¢æˆ·ç«¯çš„å‘é€åŠŸèƒ½æ­£å¸¸ï¼ŒæœåŠ¡ç«¯çš„æ¥æ”¶åŠŸèƒ½æ­£å¸¸ã€‚\nè§’åº¦äºŒ\næˆ‘ä»¬å¯ä»¥å‡è®¾â€œå®¢æˆ·ç«¯â€å’Œâ€œæœåŠ¡ç«¯â€æ˜¯ 2 ä¸ªäººï¼Œæ¨¡æ‹Ÿè¿™ 2 ä¸ªäººæ‰“æ‹›å‘¼çš„å½¢å¼æ¥ç†è§£ä¸ºä»€ä¹ˆéœ€è¦ 3 æ¬¡æ¡æ‰‹ã€‚\nå®¢æˆ·ç«¯ï¼šhiï¼ŒæœåŠ¡ç«¯ï¼Œä½ èƒ½å¬åˆ°æˆ‘è¯´è¯å—ï¼ŸæœåŠ¡ç«¯ï¼šhiï¼Œå®¢æˆ·ç«¯ï¼Œæˆ‘èƒ½å¬åˆ°ä½ è¯´çš„è¯ï¼Œä½ èƒ½å¬åˆ°æˆ‘è¯´çš„è¯å—ï¼Ÿå®¢æˆ·ç«¯ï¼šå—¯ï¼ŒæœåŠ¡ç«¯ï¼Œæˆ‘ä¹Ÿèƒ½å¬åˆ°ä½ è¯´çš„è¯ã€‚\n\nè§’åº¦ä¸‰\nå¯¹ç…§æ–‡ç« å¼€å§‹å¤„ TCP æ¡æ‰‹å›¾çš„å‰ 2 æ­¥ï¼Œç°åœ¨æˆ‘ä»¬å‡è®¾ TCP åªæœ‰ 2 æ¬¡æ¡æ‰‹ï¼š\næœåŠ¡ç«¯åœ¨æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNå¹¶ä¸”å›å¤SYN+AKCä¹‹åï¼Œå°±è®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹å®Œæˆäº†ï¼Œå¹¶ä¸ºä¹‹åˆ†é…ç›¸åº”çš„èµ„æºã€‚ä½†å®¢æˆ·æœºå´å› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰é—®é¢˜ä¸€ç›´æ²¡æ”¶åˆ°æœåŠ¡ç«¯å›å¤çš„SYN+ACKï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±è®¤ä¸ºè¿æ¥æ²¡æœ‰å»ºç«‹æˆåŠŸï¼Œç³Ÿç³•çš„æ˜¯ï¼Œå®¢æˆ·ç«¯ä¼šå› ä¸ºè¿æ¥æ²¡æœ‰æˆåŠŸè€Œä¸åœçš„é‡è¯•ï¼Œè¿™æ ·æ¯æ¬¡æœåŠ¡ç«¯éƒ½ä¼šè®¤ä¸ºè¿æ¥å»ºç«‹æˆåŠŸå¹¶åˆ†é…èµ„æºã€‚\nå¦‚æœæŒ‰ç…§ä¸Šé¢æè¿°çš„é‚£æ ·ï¼Œå®¢æˆ·ç«¯ä¸€ç›´æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯å›å¤çš„SYN+ACKï¼Œä¸”ä¸€ç›´è¿™æ ·å°è¯•å»ºç«‹è¿æ¥ï¼Œå°±ä¼šé€ æˆæœåŠ¡ç«¯èµ„æºæå¤§çš„æµªè´¹ï¼ŒåŠ é‡æœåŠ¡ç«¯çš„è´Ÿæ‹…ã€‚\nä¸ºä»€ä¹ˆè¦è¿›è¡Œ 4 æ¬¡æŒ¥æ‰‹ï¼Ÿ\nå¯¹æ¯”ä¸Šé¢çš„å›¾ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼š4 æ¬¡æŒ¥æ‰‹ç›¸æ¯” 3 æ¬¡æ¡æ‰‹å¤šäº†ä¸€æ¬¡ï¼Œä¸»è¦æ˜¯å› ä¸ºæ¡æ‰‹çš„ACKå’ŒSYNæ˜¯åˆå¹¶åœ¨ä¸€æ¡å‘é€çš„ï¼Œè€ŒæŒ¥æ‰‹çš„ACKå’ŒFINæ˜¯åˆ†å¼€å‘é€çš„ï¼Œæ‰€ä»¥æŒ¥æ‰‹æ¯”æ¡æ‰‹å¤šäº†ä¸€æ¬¡ã€‚\nç°åœ¨æˆ‘ä»¬åˆ†æä¸ºä»€ä¹ˆ TCP æŒ¥æ‰‹çš„ACKå’ŒFINï¼ˆåˆ†åˆ«å¯¹åº”å›¾ä¸­çš„ç¬¬ 2,3 æ¡çº¿ï¼‰è¦åˆ†å¼€å‘é€ï¼Ÿ\nâ€œè¢«åŠ¨æ–­å¼€æ–¹â€ä¹‹æ‰€ä»¥å«ç§°ä¹‹ä¸ºâ€œè¢«åŠ¨â€æ˜¯å› ä¸º TCP è¿æ¥çš„æ–­å¼€å¹¶ä¸æ˜¯å®ƒæƒ³çš„ï¼Œä¹Ÿä¸æ˜¯å®ƒä¸»åŠ¨è§¦å‘çš„ï¼Œæ˜¯å¯¹é¢çš„â€œä¸»åŠ¨æ–­å¼€æ–¹â€æƒ³è¦æ–­å¼€çš„ï¼Œä¹Ÿè®¸è¿™ä¸ªæ—¶å€™â€œè¢«åŠ¨æ–­å¼€æ–¹â€è¿˜æ­£æƒ³å‘é€ç‚¹æ•°æ®ç»™â€œä¸»åŠ¨æ–­å¼€æ–¹â€äº†ã€‚\nä¸ºäº†è®©â€œè¢«åŠ¨æ–­å¼€æ–¹â€æœ‰æœºä¼šå°†æƒ³è¦å‘é€çš„æ•°æ®å‘é€å®Œï¼Œä¸»åŠ¨æ–­å¼€æ–¹åœ¨å‘é€å®ŒFINå¹¶æ”¶åˆ°äº†ACKç¡®è®¤ä¿¡æ¯è¿›å…¥FIN_WAIT_2çŠ¶æ€åï¼Œåªå…³é—­äº†å‘é€åŠŸèƒ½äº†ï¼Œä½†ä»ç„¶ä¿ç•™æ¥æ”¶åŠŸèƒ½ã€‚è¿™æ ·â€œè¢«åŠ¨æ–­å¼€æ–¹â€å°±æœ‰æœºä¼šå°†æ²¡æœ‰å‘é€å®Œçš„æ•°æ®å‘é€å®Œæˆï¼Œå‘é€å®Œæˆä¹‹åï¼Œâ€œè¢«åŠ¨æ–­å¼€æ–¹â€ä¹Ÿå‘é€ä¸€ä¸ªFINï¼Œç›¸å½“äºå‘Šè¯‰â€œä¸»åŠ¨æ–­å¼€æ–¹â€ï¼šâ€œæˆ‘çš„æ•°æ®å·²ç»å‘å®Œäº†å‘€ï¼Œä»¥åä¸ä¼šå†å‘æ•°æ®äº†ï¼Œä½ å¯ä»¥å®‰å¿ƒçš„æŠŠæ¥æ”¶åŠŸèƒ½å…³é—­äº†ï¼Œå¦å¤–æˆ‘è‡ªå·±ä¹Ÿè¦å…³é—­äº†å‘€â€ã€‚\n\nã€ŠTCP&#x2F;IP è¯¦è§£ å· 1ï¼šåè®®ã€‹åœ¨çº¿é˜…è¯»åœ°å€ï¼šhttp://www.52im.net/topic-tcpipvol1.html\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"ç½‘ç»œåè®®(5)--UDPåè®®","url":"/post/4190400644.html","content":"ä»€ä¹ˆæ˜¯ UDP åè®®ï¼ŸUDP æ˜¯ User Datagram Protocol çš„ç®€ç§°ï¼Œä¸­æ–‡åæ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ˜¯ OSI å‚è€ƒæ¨¡å‹ä¸­çš„ä¼ è¾“å±‚åè®®ï¼Œå®ƒæ˜¯ä¸€ç§æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œæä¾›é¢å‘äº‹åŠ¡çš„ç®€å•ä¸å¯é ä¿¡æ¯ä¼ é€æœåŠ¡ã€‚\n\n\nUDP çš„æ­£å¼è§„èŒƒæ˜¯IETF RFC768ã€‚UDP åœ¨ IP æŠ¥æ–‡çš„åè®®å·æ˜¯ 17ã€‚\n\nISO ä¸ƒå±‚æ¨¡å‹ï¼š\n\nUDP æŠ¥å¤´UDP æŠ¥å¤´çš„ç»“æ„å¦‚å›¾ï¼š\nUDP æŠ¥å¤´ç”± 4 ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­ä¸¤ä¸ªæ˜¯å¯é€‰çš„ï¼ˆç²‰çº¢èƒŒæ™¯æ ‡å‡ºéƒ¨åˆ†ï¼‰ï¼š\n\nå„ 16bit çš„æ¥æºç«¯å£å’Œç›®çš„ç«¯å£ç”¨æ¥æ ‡è®°å‘é€å’Œæ¥å—çš„åº”ç”¨è¿›ç¨‹ã€‚å› ä¸º UDP ä¸éœ€è¦åº”ç­”ï¼Œæ‰€ä»¥æ¥æºç«¯å£æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ¥æºç«¯å£ä¸ç”¨ï¼Œé‚£ä¹ˆç½®ä¸ºé›¶ã€‚\n\nåœ¨ç›®çš„ç«¯å£åé¢æ˜¯é•¿åº¦å›ºå®šçš„ä»¥å­—èŠ‚ä¸ºå•ä½çš„æŠ¥æ–‡é•¿åº¦åŸŸï¼Œç”¨æ¥æŒ‡å®š UDP æ•°æ®æŠ¥åŒ…æ‹¬æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ï¼Œé•¿åº¦æœ€å°å€¼ä¸º 8byteã€‚\n\né¦–éƒ¨å‰©ä¸‹åœ° 16bit æ˜¯ç”¨æ¥å¯¹é¦–éƒ¨å’Œæ•°æ®éƒ¨åˆ†ä¸€èµ·åšæ ¡éªŒå’Œï¼ˆChecksumï¼‰çš„ï¼Œè¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ä¸€èˆ¬éƒ½ä½¿ç”¨è¿™ä¸€åŠŸèƒ½ã€‚\n\nUDP å’Œ TCP çš„æ ¡éªŒå’Œéƒ½è¦†ç›–åˆ°äº†ä»–ä»¬çš„é¦–éƒ¨å’Œæ•°æ®ï¼Œè€Œä¹‹å‰ä»‹ç»çš„ IP é¦–éƒ¨çš„æ ¡éªŒå’Œåªè¦†ç›–äº† IP é¦–éƒ¨ã€‚\n\n\nTCP å’Œ UDP åŒºåˆ«\n\n\nç‰¹å¾ç‚¹\nTCP\nUDP\n\n\n\næ˜¯å¦è¿æ¥\né¢å‘è¿æ¥\né¢å‘éè¿æ¥\n\n\nä¼ è¾“å¯é æ€§\nå¯é \nä¼šä¸¢åŒ…ï¼Œä¸å¯é \n\n\nåº”ç”¨åœºæ™¯\nä¼ è¾“æ•°æ®é‡å¤§\nä¼ è¾“é‡å°\n\n\né€Ÿåº¦\næ…¢\nå¿«\n\n\nTCP(ä¼ è¾“æ§åˆ¶åè®®)æä¾›çš„æ˜¯é¢å‘è¿æ¥ã€å¯é çš„å­—èŠ‚æµæœåŠ¡ã€‚å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å½¼æ­¤äº¤æ¢æ•°æ®å‰ï¼Œå¿…é¡»å…ˆåœ¨åŒæ–¹ä¹‹é—´å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼Œä¹‹åæ‰èƒ½ä¼ è¾“æ•°æ®ã€‚TCP æä¾›è¶…æ—¶é‡å‘ï¼Œä¸¢å¼ƒé‡å¤æ•°æ®ï¼Œæ£€éªŒæ•°æ®ï¼Œæµé‡æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œä¿è¯æ•°æ®èƒ½ä»ä¸€ç«¯ä¼ åˆ°å¦ä¸€ç«¯ã€‚UDP(ç”¨æˆ·æ•°æ®æŠ¥åè®®)æ˜¯ä¸€ä¸ªç®€å•çš„é¢å‘æ•°æ®æŠ¥çš„è¿è¾“å±‚åè®®ã€‚UDP ä¸æä¾›å¯é æ€§ï¼Œå®ƒåªæ˜¯æŠŠåº”ç”¨ç¨‹åºä¼ ç»™ IP å±‚çš„æ•°æ®æŠ¥å‘é€å‡ºå»ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯å®ƒä»¬èƒ½åˆ°è¾¾ç›®çš„åœ°ã€‚ç”±äº UDP åœ¨ä¼ è¾“æ•°æ®æŠ¥å‰ä¸ç”¨åœ¨å®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œä¸”æ²¡æœ‰è¶…æ—¶é‡å‘ç­‰æœºåˆ¶ï¼Œæ•…è€Œä¼ è¾“é€Ÿåº¦å¾ˆå¿«ã€‚\nç”±äº UDP ç¼ºä¹æ‹¥å¡æ§åˆ¶ï¼ˆcongestion controlï¼‰ï¼Œéœ€è¦åŸºäºç½‘ç»œçš„æœºåˆ¶æ¥å‡å°‘å› å¤±æ§å’Œé«˜é€Ÿ UDP æµé‡è´Ÿè·è€Œå¯¼è‡´çš„æ‹¥å¡å´©æºƒæ•ˆåº”ã€‚æ¢å¥è¯è¯´ï¼Œå› ä¸º UDP å‘é€è€…ä¸èƒ½å¤Ÿæ£€æµ‹æ‹¥å¡ï¼Œæ‰€ä»¥åƒä½¿ç”¨åŒ…é˜Ÿåˆ—å’Œä¸¢å¼ƒæŠ€æœ¯çš„è·¯ç”±å™¨è¿™æ ·çš„ç½‘ç»œåŸºæœ¬è®¾å¤‡å¾€å¾€å°±æˆä¸ºé™ä½ UDP è¿‡å¤§é€šä¿¡é‡çš„æœ‰æ•ˆå·¥å…·ã€‚æ•°æ®æŠ¥æ‹¥å¡æ§åˆ¶åè®®ï¼ˆDCCPï¼‰è®¾è®¡æˆé€šè¿‡åœ¨è¯¸å¦‚æµåª’ä½“ç±»å‹çš„é«˜é€Ÿç‡ UDP æµä¸­ï¼Œå¢åŠ ä¸»æœºæ‹¥å¡æ§åˆ¶ï¼Œæ¥å‡å°è¿™ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚\nåº”ç”¨åœºæ™¯ç”±äºç¼ºä¹å¯é æ€§ä¸”å±äºéè¿æ¥å¯¼å‘åè®®ï¼ŒUDP çš„åº”ç”¨ä¸€èˆ¬å¿…é¡»å…è®¸ä¸€å®šé‡çš„ä¸¢åŒ…ã€å‡ºé”™å’Œå¤åˆ¶ç²˜è´´ã€‚ä½†æœ‰äº›åº”ç”¨ï¼Œæ¯”å¦‚ TFTPï¼Œéœ€è¦å¯é æ€§ä¿è¯ï¼Œåˆ™å¿…é¡»åœ¨åº”ç”¨å±‚å¢åŠ æ ¹æœ¬çš„å¯é æœºåˆ¶ã€‚ä½†æ˜¯ç»å¤§å¤šæ•° UDP åº”ç”¨éƒ½ä¸éœ€è¦å¯é æœºåˆ¶ï¼Œç”šè‡³å¯èƒ½å› ä¸ºå¼•å…¥å¯é æœºåˆ¶è€Œé™ä½æ€§èƒ½ã€‚æµåª’ä½“ã€å³æ—¶å¤šåª’ä½“æ¸¸æˆå’Œ IP ç”µè¯ï¼ˆVoIPï¼‰å°±æ˜¯å…¸å‹çš„ UDP åº”ç”¨ã€‚å¦‚æœæŸä¸ªåº”ç”¨éœ€è¦å¾ˆé«˜çš„å¯é æ€§ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¼ è¾“æ§åˆ¶åè®®ï¼ˆå³ TCP åè®®ï¼‰æ¥ä»£æ›¿ UDPã€‚\nä½¿ç”¨ UDP åè®®çš„åº”ç”¨æœ‰ï¼šåŸŸåç³»ç»Ÿï¼ˆDNSï¼‰ã€ç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSNMPï¼‰ã€åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼ˆDHCPï¼‰ã€è·¯ç”±ä¿¡æ¯åè®®ï¼ˆRIPï¼‰ç­‰ç­‰ã€‚\nå› ä¸º UDP ä¸å±äºè¿æ¥å‹åè®®ï¼Œå› è€Œå…·æœ‰èµ„æºæ¶ˆè€—å°ï¼Œå¤„ç†é€Ÿåº¦å¿«çš„ä¼˜ç‚¹ï¼Œæ‰€ä»¥é€šå¸¸éŸ³é¢‘ã€è§†é¢‘å’Œæ™®é€šæ•°æ®åœ¨ä¼ é€æ—¶ä½¿ç”¨ UDP è¾ƒå¤šï¼Œå› ä¸ºå®ƒä»¬å³ä½¿å¶å°”ä¸¢å¤±å‡ ä¸ªæ•°æ®åŒ…ï¼Œä¹Ÿä¸ä¼šå¯¹æ¥æ”¶ç»“æœäº§ç”Ÿå¤ªå¤§å½±å“ã€‚\nå•æ’­ã€å¤šæ’­ã€å¹¿æ’­ã€ç»„æ’­å‡è®¾ A(all ç®€å†™)ä»£è¡¨æ‰€æœ‰çš„æœºå™¨ï¼ŒM(multiple ç®€å†™)ä»£è¡¨ A ä¸­çš„å¤šä¸ªæœºå™¨ï¼ŒG(group ç®€å†™)ä»£è¡¨ä¸€ç»„æœºå™¨ï¼Œ1 ä»£è¡¨ä¸€å°æœºå™¨ï¼Œé‚£ä¹ˆï¼š\n1 -&gt; 1 å°±æ˜¯å•æ’­ï¼›1 -&gt; M å°±æ˜¯å¤šæ’­ï¼›1 -&gt; A å°±æ˜¯å¹¿æ’­ï¼›1 -&gt; G å°±æ˜¯ç»„æ’­ï¼›å½“M=Aæ—¶ï¼Œå¤šæ’­å°±æ˜¯å¹¿æ’­ï¼›å½“M=Gæ—¶ï¼Œå¤šæ’­å°±æ˜¯ç»„æ’­ï¼›\n\nå¤šæ’­åŒ…æ‹¬ç»„æ’­å’Œå¹¿æ’­ï¼Œç»„æ’­ã€å¹¿æ’­éƒ½æ˜¯å¤šæ’­çš„ä¸€ç§è¡¨ç°å½¢å¼ã€‚\nå•æ’­å•æ’­æ˜¯ä¸»æœºä¹‹é—´â€œä¸€å¯¹ä¸€â€çš„é€šè®¯æ¨¡å¼ã€‚å‘é€æ–¹éœ€è¦æŒ‡å®šä¸€ä¸ªæ¥æ”¶æ–¹çš„ IP å’Œç«¯å£ï¼Œåªæœ‰è¿™ä¸ªæ¥æ”¶æ–¹ä¼šæ”¶åˆ°æ•°æ®æŠ¥ã€‚ä¸ä¼šå¯¹å­ç½‘å†…çš„å…¶ä»–æœºå™¨äº§ç”Ÿå½±å“ã€‚åœ¨å•æ’­æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨é’ˆå¯¹æ¯ä¸ªå®¢æˆ·æœºéƒ½è¦å‘é€æ•°æ®æµï¼ŒæœåŠ¡å™¨æµé‡=å®¢æˆ·æœºæ•°é‡Ã—å®¢æˆ·æœºæµé‡ï¼Œåœ¨å®¢æˆ·æœºæ•°é‡å¤§ã€æ¯ä¸ªå®¢æˆ·æœºæµé‡å¤§çš„åº”ç”¨ï¼ˆå¦‚æµåª’ä½“ï¼‰ä¸­ï¼ŒæœåŠ¡å™¨å°†ä¸å ªé‡è´Ÿã€‚\nå•æ’­å‘é€ç«¯å› ä¸º UDP ä¸æ˜¯é¢å‘è¿æ¥çš„ï¼Œä¸”ä¸å¯é çš„ï¼Œæ‰€ä»¥å‘é€ç«¯åœ¨è°ƒç”¨sendtoä¹‹åï¼Œå°±ç®—sendtoè¿”å›æˆåŠŸï¼Œä¹Ÿä¸ä»£è¡¨æ¥æ”¶ç«¯ä¸€å®šæ”¶åˆ°äº†æ•°æ®ï¼Œå¯èƒ½æ¥æ”¶ç«¯å‹æ ¹éƒ½æ²¡å¯åŠ¨ï¼Œä¹Ÿæ˜¯æœ‰å¯èƒ½çš„ã€‚ä¸èƒ½æ ¹æ®sendtoçš„è¿”å›å€¼æ¥ç¡®ä¿æ¥æ”¶ç«¯ä¸€å®šæ”¶åˆ°äº†æ•°æ®ã€‚å¦‚æœéœ€è¦æ•°æ®ä¼ è¾“çš„å¯é æ€§å¾—åˆ°ä¿è¯ï¼Œå¯ä»¥ä½¿ç”¨ TCP æˆ–è€…é€šè¿‡ä¸šåŠ¡é€»è¾‘æ¥ä¿è¯ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n#include &lt;WinSock2.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)void SendLogic() &#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(1, 0);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket = ::WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, nullptr, 0, 0);\tif (socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tsockaddr_in addr;\taddr.sin_family = AF_INET;\taddr.sin_port = htons(6000);  // æ¥æ”¶ç«¯ç«¯å£\taddr.sin_addr.s_addr = inet_addr(&quot;127.0.0.1&quot;); // æ¥æ”¶ç«¯IP\tchar buf[100] = &#123; &quot;hello&quot; &#125;;\tint err = sendto(socket, buf, strlen(buf), 0, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;sendto failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tprintf(&quot;[SEND] %s OK\\n&quot;, buf);\tWSACleanup();&#125;int main()&#123;\tSendLogic();\tgetchar();    return 0;&#125;\n\nå•æ’­æ¥æ”¶ç«¯å› ä¸º UDP ä¸æ˜¯é¢å‘è¿æ¥çš„ï¼Œæ‰€ä»¥æ¥æ”¶ç«¯ä¸ç”¨ listenï¼Œä¹Ÿä¸ç”¨ acceptï¼Œåªéœ€è¦ç»‘å®šåˆ°æŒ‡å®šçš„ç«¯å£å’Œåœ°å€å³å¯ã€‚recvfromæ˜¯åŒæ­¥çš„ï¼Œä¼šé˜»å¡ä½ç­‰å¾…æ•°æ®çš„åˆ°æ¥ã€‚å¦‚æœè¦ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨WSARecvFromç»“åˆ ICOP çš„æ–¹å¼æ¥å®ç°ã€‚\n#include &lt;WinSock2.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)void RecvLogic() &#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(1, 0);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket = ::WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, nullptr, 0, 0);\tif (socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tsockaddr_in addr;\taddr.sin_family = AF_INET;\taddr.sin_port = htons(6000);  // ç«¯å£\taddr.sin_addr.s_addr = INADDR_ANY;  // ä»»æ„IPåœ°å€\tint err = bind(socket, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;bind failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\twhile (true) &#123; // TODOï¼šæœªè€ƒè™‘é€€å‡ºçš„æƒ…å†µ\t\tchar buf[100] = &#123; 0 &#125;;\t\tint fromlen = sizeof(addr);\t\terr = recvfrom(socket, buf, 100, 0, reinterpret_cast&lt;sockaddr*&gt;(&amp;addr), &amp;fromlen);\t\tif (err == SOCKET_ERROR) &#123;\t\t\tprintf(&quot;recvfrom failed, error=%d\\n&quot;, WSAGetLastError());\t\t\treturn;\t\t&#125;\t\tprintf(&quot;[RECV] %s\\n&quot;, buf);\t&#125;\tWSACleanup();&#125;int main()&#123;\tRecvLogic();\tgetchar();    return 0;&#125;\n\nå¹¿æ’­å¹¿æ’­æ˜¯ä¸»æœºä¹‹é—´â€œä¸€å¯¹æ‰€æœ‰â€çš„é€šè®¯æ¨¡å¼ã€‚å­ç½‘çš„ä¸€å°ä¸»æœºä½œä¸ºå‘é€å‘å¹¿æ’­ä¸€æ¡ä¿¡æ¯ï¼Œè¯¥å­ç½‘ä¸­çš„æ‰€æœ‰ä¸»æœºéƒ½å¯ä»¥æ¥æ”¶åˆ°è¯¥ä¿¡æ¯ï¼ˆä¸ç®¡ä½ æ˜¯å¦éœ€è¦è¯¥ä¿¡æ¯ï¼‰ã€‚åœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œç”±äºæœåŠ¡å™¨ä¸ç”¨å‘æ¯ä¸ªå®¢æˆ·æœºå•ç‹¬å‘é€æ•°æ®ï¼Œæ‰€ä»¥æœåŠ¡å™¨æµé‡è´Ÿè½½æä½ã€‚æ— æ³•åœ¨å¹¿åŸŸç½‘ä¸Šè¿›è¡Œå¹¿æ’­ï¼Œè€Œä¸”å¹¿æ’­æ¶ˆæ¯ä¸ä¼šè¢«è·¯ç”±è½¬å‘ï¼Œæ‰€ä»¥åªèƒ½åœ¨ä¸€ä¸ªå­ç½‘ä¸­è¿›è¡Œå¹¿æ’­ã€‚å› ä¸ºå¦‚æœè·¯ç”±å™¨è½¬å‘äº†å¹¿æ’­ä¿¡æ¯ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå¼•èµ·ç½‘ç»œç˜«ç—ªã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ IP åè®®çš„è®¾è®¡è€…æ•…æ„æ²¡æœ‰å®šä¹‰äº’è”ç½‘èŒƒå›´çš„å¹¿æ’­æœºåˆ¶ã€‚\nä¸»æœºå‘é€å¹¿æ’­æ¶ˆæ¯æ—¶ï¼Œéœ€è¦æŒ‡å®šç›®çš„ IP åœ°å€ä¸º255.255.255.255å’Œæ¥å—è€…çš„ç«¯å£å·ã€‚\nUDP çš„å¹¿æ’­å’Œå•æ’­çš„ä¸åŒåœ¨äºå‘é€ç«¯ï¼ˆæ¥æ”¶ç«¯çš„å®ç°å’Œå•æ’­æ–¹å¼æ²¡æœ‰åŒºåˆ«ï¼‰çš„å®ç°ä¸Šï¼š\n\nå‘é€ç«¯å°†å¥—æ¥å­—é…ç½®ä¸ºå‘é€å¹¿æ’­æ¶ˆæ¯ï¼Œä½¿ç”¨setsockoptå‡½æ•°ã€‚\nå‘é€åœ°å€æ›´æ”¹ä¸ºå—é™çš„å¹¿æ’­åœ°å€255.255.255.255ã€‚\n\n\néœ€è¦è¯´æ˜çš„æ˜¯å¹¿æ’­åœ°å€ä¸ä»…ä»…åªæœ‰255.255.255.255ä¸€ä¸ªã€‚å¹¿æ’­åœ°å€åˆ†ä¸ºå—é™çš„å¹¿æ’­ã€æŒ‡å‘ç½‘ç»œçš„å¹¿æ’­ã€æŒ‡å‘å­ç½‘çš„å¹¿æ’­ã€æŒ‡å‘æ‰€æœ‰å­ç½‘çš„ç½‘å¹¿æ’­ã€‚255.255.255.255åªæ˜¯å—é™çš„å¹¿æ’­åœ°å€ã€‚\n\n5.2.1 å¹¿æ’­å‘é€ç«¯#include &lt;WinSock2.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)void SendLogic() &#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(1, 0);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket = ::WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, nullptr, 0, 0);\tif (socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\t// å°†å¥—æ¥å­—é…ç½®ä¸ºå‘é€å¹¿æ’­æ¶ˆæ¯\tint broadcast = 1;\tint err = setsockopt(socket, SOL_SOCKET, SO_BROADCAST, reinterpret_cast&lt;const char*&gt;(&amp;broadcast), sizeof(int));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tsockaddr_in addr;\taddr.sin_family = AF_INET;\taddr.sin_port = htons(6000);\taddr.sin_addr.s_addr = INADDR_BROADCAST; // ä¹Ÿå¯ä»¥æ¢æˆinet_addr(&quot;255.255.255.255&quot;)\tchar buf[100] = &#123; &quot;hello&quot; &#125;;\terr = sendto(socket, buf, strlen(buf), 0, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;sendto failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tprintf(&quot;[BROADCAST] %s OK\\n&quot;, buf);\tWSACleanup();&#125;int main()&#123;\tSendLogic();\tgetchar();    return 0;&#125;\n\n5.2.2 å¹¿æ’­æ¥æ”¶ç«¯(å’Œå•æ’­ä¸€æ ·)#include &lt;WinSock2.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)void RecvLogic() &#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(1, 0);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket = ::WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, nullptr, 0, 0);\tif (socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tsockaddr_in addr;\taddr.sin_family = AF_INET;\taddr.sin_port = htons(6000);\taddr.sin_addr.s_addr = INADDR_ANY;\tint err = bind(socket, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;bind failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\twhile (true) &#123;\t\tchar buf[100] = &#123; 0 &#125;;\t\tint fromlen = sizeof(addr);\t\terr = recvfrom(socket, buf, 100, 0, reinterpret_cast&lt;sockaddr*&gt;(&amp;addr), &amp;fromlen);\t\tif (err == SOCKET_ERROR) &#123;\t\t\tprintf(&quot;recvfrom failed, error=%d\\n&quot;, WSAGetLastError());\t\t\treturn;\t\t&#125;\t\tprintf(&quot;[RECV] %s\\n&quot;, buf);\t&#125;\tWSACleanup();&#125;int main()&#123;\tRecvLogic();\tgetchar();    return 0;&#125;\n\nç»„æ’­ç»„æ’­æ˜¯ä¸»æœºä¹‹é—´â€œä¸€å¯¹å¤šâ€çš„é€šè®¯æ¨¡å¼ã€‚ä¸€å°ä¸»æœºåŠ å…¥ä¸€ä¸ªç»„æ’­ IP åï¼Œä¹‹åå‘è¯¥ç»„æ’­ IP å‘é€çš„æ•°æ®æŠ¥éƒ½ä¼šå‘é€åˆ°è¯¥ä¸»æœºã€‚ä¸“é—¨ä¸ºç»„æ’­åˆ’å‡ºäº†ä¸€ä¸ªåœ°å€èŒƒå›´ï¼Œåœ¨ IPv4 ä¸­ä¸º D ç±»åœ°å€ï¼ŒèŒƒå›´æ˜¯224.0.0.0 ~ 239.255.255.255ï¼Œå¹¶å°† D ç±»åœ°å€åˆ’åˆ†ä¸ºå±€éƒ¨é“¾æ¥ç»„æ’­åœ°å€ã€é¢„ç•™ç»„æ’­åœ°å€ã€ç®¡ç†æƒé™ç»„æ’­åœ°å€å¦‚ä¸‹ï¼šå±€éƒ¨é“¾æ¥åœ°å€ï¼š224.0.0.0ï½224.0.0.255ï¼Œç”¨äºå±€åŸŸç½‘ï¼Œè·¯ç”±å™¨ä¸è½¬å‘å±äºæ­¤èŒƒå›´çš„ IP åŒ…ã€‚\né¢„ç•™ç»„æ’­åœ°å€ï¼š224.0.1.0ï½238.255.255.255ï¼Œç”¨äºå…¨çƒèŒƒå›´æˆ–ç½‘ç»œåè®®ã€‚\nç®¡ç†æƒé™åœ°å€ï¼š239.0.0.0ï½239.255.255.255ï¼Œç»„ç»‡å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºé™åˆ¶ç»„æ’­èŒƒå›´ã€‚\nç»„æ’­å°±æ˜¯å°†æ•°æ®å‘é€åˆ°ä¸€ç»„ä¸»æœºã€‚æ¥æ”¶ç«¯å¦‚æœè¦æ¥æ”¶æ¶ˆæ¯ï¼Œåˆ™éœ€è¦åŠ å…¥åˆ°è¯¥åˆ†ç»„ï¼Œåˆ†ç»„æ˜¯ç”¨ IP æ¥æ ‡è¯†çš„ã€‚ä»ç½‘ç»œåè®®(3)--IPåè®®å¯ä»¥çŸ¥é“ï¼Œé€‚ç”¨äºåˆ†ç»„çš„ IP æœ‰224.0.0.0 ~ 239.255.255.255ã€‚åŒæ ·ï¼Œå‘é€ç«¯å°±éœ€è¦å°†æ•°æ®å‘é€åˆ°è¯¥åˆ†ç»„ IPã€‚\n5.3.1 ç»„æ’­å‘é€ç«¯#include &lt;WinSock2.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)void SendLogic() &#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(1, 0);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket = ::WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, nullptr, 0, 0);\tif (socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\t// å°†å¥—æ¥å­—é…ç½®ä¸ºå‘é€å¹¿æ’­æ¶ˆæ¯\tint broadcast = 1;\tint err = setsockopt(socket, SOL_SOCKET, SO_BROADCAST, reinterpret_cast&lt;const char*&gt;(&amp;broadcast), sizeof(int));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tsockaddr_in addr;\taddr.sin_family = AF_INET;\taddr.sin_port = htons(6000);\taddr.sin_addr.s_addr = inet_addr(&quot;225.0.0.37&quot;); // å‘æŒ‡å®šå¹¿æ’­ç»„å‘é€æ¶ˆæ¯\tchar buf[100] = &#123; &quot;hello&quot; &#125;;\terr = sendto(socket, buf, strlen(buf), 0, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;sendto failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tprintf(&quot;[BROADCAST] %s OK\\n&quot;, buf);\tWSACleanup();&#125;int main()&#123;\tSendLogic();\tgetchar();    return 0;&#125;\n\n5.3.2 ç»„æ’­æ¥æ”¶ç«¯#include &lt;WinSock2.h&gt;#include &lt;Ws2ipdef.h&gt;#pragma comment(lib, &quot;Ws2_32.lib&quot;)void RecvLogic() &#123;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(1, 0);\tWSAStartup(wVersionRequested, &amp;wsaData);\tSOCKET socket = ::WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, nullptr, 0, 0);\tif (socket == INVALID_SOCKET) &#123;\t\tprintf(&quot;WSASocket failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\tsockaddr_in addr;\taddr.sin_family = AF_INET;\taddr.sin_port = htons(6000);\taddr.sin_addr.s_addr = htonl(INADDR_ANY);\tint err = bind(socket, reinterpret_cast&lt;const sockaddr*&gt;(&amp;addr), sizeof(addr));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;bind failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\t// å°†SOCKETåŠ å…¥å¹¿æ’­ç»„\t//\tstruct ip_mreq mreq; // å¼•å…¥å¤´æ–‡ä»¶&lt;Ws2ipdef.h&gt;\tmreq.imr_multiaddr.s_addr = inet_addr(&quot;225.0.0.37&quot;);  // å¹¿æ’­ç»„åœ°å€\tmreq.imr_interface.s_addr = htonl(INADDR_ANY);\t// æ³¨ï¼šä½¿ç”¨IP_DROP_MEMBERSHIPå¯ä»¥ç¦»å¼€å¹¿æ’­ç»„\terr = setsockopt(socket, IPPROTO_IP, IP_ADD_MEMBERSHIP, reinterpret_cast&lt;const char*&gt;(&amp;mreq), sizeof(ip_mreq));\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt failed, error=%d\\n&quot;, WSAGetLastError());\t\treturn;\t&#125;\twhile (true) &#123;\t\tchar buf[100] = &#123; 0 &#125;;\t\tint fromlen = sizeof(addr);\t\terr = recvfrom(socket, buf, 100, 0, reinterpret_cast&lt;sockaddr*&gt;(&amp;addr), &amp;fromlen);\t\tif (err == SOCKET_ERROR) &#123;\t\t\tprintf(&quot;recvfrom failed, error=%d\\n&quot;, WSAGetLastError());\t\t\treturn;\t\t&#125;\t\tprintf(&quot;[RECV] %s\\n&quot;, buf);\t&#125;\tWSACleanup();&#125;int main()&#123;\tRecvLogic();\tgetchar();    return 0;&#125;\n\n\nã€ŠTCP&#x2F;IP è¯¦è§£ å· 1ï¼šåè®®ã€‹åœ¨çº¿é˜…è¯»åœ°å€ï¼šhttp://www.52im.net/topic-tcpipvol1.html\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"CMakeæŒ‰ç›®å½•å±‚çº§è¿›è¡Œåˆ†ç»„","url":"/post/1531265402.html","content":"ä¸ºäº†æé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†ä¸åŒç”¨é€”çš„ä»£ç æ–‡ä»¶æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚å¤´æ–‡ä»¶æ”¾åˆ°includeç›®å½•ï¼Œæºæ–‡ä»¶æ”¾åˆ°srcç›®å½•ï¼Œç¬¬ä¸‰æ–¹åº“æ”¾åˆ°3rdç›®å½•ç­‰ã€‚\nå½“ä½¿ç”¨CMakeç”ŸæˆVisual Studioå·¥ç¨‹æ—¶ï¼Œæˆ‘ä»¬äº¦å¸Œæœ›åœ¨Visual Studioä¸­èƒ½çœ‹åˆ°è¿™æ ·çš„æ–‡ä»¶ç»“æ„ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨source_groupæŒ‡ä»¤è¿›è¡Œæ·»åŠ ï¼Œä½†å½“ç›®å½•å’Œå±‚çº§å¾ˆå¤šæ—¶ï¼Œè¿™æ ·æ·»åŠ èµ·æ¥å°±æ˜¾å¾—æ¯”è¾ƒç¹çäº†ï¼Œæœ¬æ–‡ä»‹ç»ä¸€ç§æ‡’äººæ–¹æ³•ã€‚\n\n\nå‡½æ•°group_sourcesç”¨äºéå†ä¼ å…¥æ–‡ä»¶å¹¶æ ¹æ®æ–‡ä»¶æ‰€åœ¨ç›®å½•æ·»åŠ source_groupæŒ‡ä»¤ã€‚\nfunction(group_sources)  foreach(_source IN ITEMS $&#123;ARGN&#125;)    if (IS_ABSOLUTE &quot;$&#123;_source&#125;&quot;)        file(RELATIVE_PATH _source_rel &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot; &quot;$&#123;_source&#125;&quot;)    else()        set(_source_rel &quot;$&#123;_source&#125;&quot;)    endif()    # è·å–æ–‡ä»¶æ‰€åœ¨ç›®å½•    get_filename_component(_source_path &quot;$&#123;_source_rel&#125;&quot; PATH)    # æ›¿æ¢ä¸ºWindowsè·¯å¾„æ ·å¼    string(REPLACE &quot;/&quot; &quot;\\\\&quot; _source_path_msvc &quot;$&#123;_source_path&#125;&quot;)    source_group(&quot;$&#123;_source_path_msvc&#125;&quot; FILES &quot;$&#123;_source&#125;&quot;)  endforeach()endfunction()\n\nå‡½æ•°group_sourcesæ”¯æŒä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\nfile(GLOB_RECURSE HEADER_FILES       ./include/*.hpp ./include/*.h)file(GLOB_RECURSE SOURCE_FILES       ./src/*.cc ./src/*.cpp)# å®‰è£…ç›®å½•å±‚çº§å¯¹$&#123;HEADER_FILES&#125;å’Œ$&#123;SOURCE_FILES&#125;ä¸­çš„æ–‡ä»¶è¿›è¡Œåˆ†ç»„group_sources($&#123;HEADER_FILES&#125; $&#123;SOURCE_FILES&#125;)\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"],"tags":["CMake"]},{"title":"ç½‘ç»œåè®®(4)--ICMPåè®®","url":"/post/349088656.html","content":"äº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼ˆè‹±æ–‡ï¼šInternet Control Message Protocolï¼ŒICMPï¼‰æ˜¯äº’è”ç½‘åè®®æ—çš„æ ¸å¿ƒåè®®ä¹‹ä¸€ã€‚å®šä¹‰åœ¨ RFC 792 æ–‡æ¡£ä¸­ã€‚ICMP çš„æ¶ˆæ¯å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯å·®é”™æŠ¥æ–‡ï¼Œå³é€šçŸ¥å‡ºé”™åŸå› çš„é”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚ tracerouteï¼‰ï¼Œå¦ä¸€ç±»æ˜¯æŸ¥è¯¢æŠ¥æ–‡ï¼Œå³ç”¨äºè¯Šæ–­çš„æŸ¥è¯¢æ¶ˆæ¯ï¼ˆå¦‚ pingï¼‰ã€‚ä½¿ç”¨ ICMP åè®®çš„å…¸å‹åº”ç”¨æœ‰ ping å’Œ tracerouteï¼ˆwindows ä¸Šå« tracertï¼‰ã€‚\n\n\nICMP æ˜¯åœ¨ IP æ•°æ®æŠ¥çš„å†…éƒ¨è¢«ä¼ è¾“çš„ï¼Œç´§è·Ÿç€ IP æŠ¥æ–‡çš„é¦–éƒ¨ï¼ˆå¦‚æœ IP é¦–éƒ¨æœ‰å¯é€‰éƒ¨åˆ†ï¼Œåˆ™ç´§è·Ÿç€å¯é€‰éƒ¨åˆ†ï¼‰ï¼š\n\nå›¾ä¸Šçš„ IP é¦–éƒ¨ 20 å­—èŠ‚æ˜¯åœ¨ IP æŠ¥æ–‡é¦–éƒ¨ä¸å«å¯é€‰éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œè‹¥ IP é¦–éƒ¨å«å¯é€‰éƒ¨åˆ†ï¼Œåˆ™å¤§äº 20 å­—èŠ‚ã€‚\nä¸€ã€ ICMP æŠ¥æ–‡æ ¼å¼\næ‰€æœ‰ ICMP æŠ¥æ–‡çš„å‰ 4 ä¸ªå­—èŠ‚éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†å‰©ä¸‹çš„å…¶ä»–å­—èŠ‚åˆ™æ ¹æ®æŠ¥æ–‡ç±»å‹çš„ä¸åŒè€Œä¸åŒã€‚\n\n8ä½ç±»å‹å­—æ®µå’Œ8ä½ä»£ç å­—æ®µå…±åŒå†³å®šä¸€ç§ ICMP æŠ¥æ–‡çš„ç±»å‹ã€‚\n\næ ¡éªŒå’Œçš„è®¡ç®—æ–¹æ³•å’Œ IP é¦–éƒ¨æ ¡éªŒå’Œçš„è®¡ç®—æ–¹å¼ç›¸åŒï¼Œä½† ICMP æ ¡éªŒå’Œè¦†ç›–æ•´ä¸ª ICMP æŠ¥æ–‡ã€‚\n\nIP é¦–éƒ¨æ ¡éªŒå’Œçš„è®¡ç®—æ–¹å¼å’ŒåŸç†å‚è€ƒï¼šç½‘ç»œåè®®(3)--IPåè®®UDP å’Œ TCP çš„æ ¡éªŒå’ŒåŒæ ·ä¹Ÿéƒ½è¦†ç›–åˆ°äº†ä»–ä»¬çš„é¦–éƒ¨å’Œæ•°æ®ã€‚\n\n\n\n\nã€ŠTCP&#x2F;IP è¯¦è§£ å· 1ï¼šåè®®ã€‹åœ¨çº¿é˜…è¯»åœ°å€ï¼šhttp://www.52im.net/topic-tcpipvol1.html\n\näºŒã€å®é™…åº”ç”¨2.1 Ping2.1.1 Ping ç¨‹åºåŸç†å¤§å¤šæ•°ç³»ç»Ÿéƒ½å·²ç»åœ¨å†…æ ¸ä¸­å†…ç½®äº† ping æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸éœ€è¦å•ç‹¬çš„å…¶ä»–è¿›ç¨‹æ¥æ¥æ”¶ä¸»æœºçš„ ping è¯·æ±‚ã€‚\nwindows ç³»ç»Ÿä¸‹ï¼Œè¾“å…¥ping /?å‘½ä»¤æŸ¥çœ‹ ping çš„ç”¨æ³•å¦‚ä¸‹ï¼š\nç”¨æ³•: ping [-t] [-a] [-n count] [-l size] [-f] [-i TTL] [-v TOS]           [-r count] [-s count] [[-j host-list] | [-k host-list]]           [-w timeout] [-R] [-S srcaddr] [-4] [-6] target_nameé€‰é¡¹:    -t             Ping æŒ‡å®šçš„ä¸»æœºï¼Œç›´åˆ°åœæ­¢ã€‚                   è‹¥è¦æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯å¹¶ç»§ç»­æ“ä½œ - è¯·é”®å…¥ Control-Breakï¼›                   è‹¥è¦åœæ­¢ - è¯·é”®å…¥ Control-Cã€‚    -a             å°†åœ°å€è§£ææˆä¸»æœºåã€‚    -n count       è¦å‘é€çš„å›æ˜¾è¯·æ±‚æ•°ã€‚    -l size        å‘é€ç¼“å†²åŒºå¤§å°ã€‚    -f             åœ¨æ•°æ®åŒ…ä¸­è®¾ç½®â€œä¸åˆ†æ®µâ€æ ‡å¿—(ä»…é€‚ç”¨äº IPv4)ã€‚    -i TTL         ç”Ÿå­˜æ—¶é—´ã€‚    -v TOS         æœåŠ¡ç±»å‹(ä»…é€‚ç”¨äº IPv4ã€‚è¯¥è®¾ç½®å·²ä¸èµæˆä½¿ç”¨ï¼Œä¸”                   å¯¹ IP æ ‡å¤´ä¸­çš„æœåŠ¡å­—æ®µç±»å‹æ²¡æœ‰ä»»ä½•å½±å“)ã€‚    -r count       è®°å½•è®¡æ•°è·ƒç‚¹çš„è·¯ç”±(ä»…é€‚ç”¨äº IPv4)ã€‚    -s count       è®¡æ•°è·ƒç‚¹çš„æ—¶é—´æˆ³(ä»…é€‚ç”¨äº IPv4)ã€‚    -j host-list   ä¸ä¸»æœºåˆ—è¡¨ä¸€èµ·çš„æ¾æ•£æºè·¯ç”±(ä»…é€‚ç”¨äº IPv4)ã€‚    -k host-list   ä¸ä¸»æœºåˆ—è¡¨ä¸€èµ·çš„ä¸¥æ ¼æºè·¯ç”±(ä»…é€‚ç”¨äº IPv4)ã€‚    -w timeout     ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)ã€‚    -R             åŒæ ·ä½¿ç”¨è·¯ç”±æ ‡å¤´æµ‹è¯•åå‘è·¯ç”±(ä»…é€‚ç”¨äº IPv6)ã€‚    -S srcaddr     è¦ä½¿ç”¨çš„æºåœ°å€ã€‚    -4             å¼ºåˆ¶ä½¿ç”¨ IPv4ã€‚    -6             å¼ºåˆ¶ä½¿ç”¨ IPv6ã€‚\n\nå…¶ä¸­-rå‚æ•°ç”¨äºè®°å½•è·ƒç‚¹è·¯ç”±ï¼Œç±»ä¼¼ tracert çš„åŠŸèƒ½ï¼Œä½†ä»–ä»¬çš„å®ç°æ–¹å¼ä¸ä¸€æ ·ï¼Œping æ˜¯é€šè¿‡åœ¨ IP å¤´éƒ¨â€œé€‰é¡¹â€å­—æ®µè®°å½•ç»è¿‡çš„æ¯ä¸ªè·¯ç”±çš„ IP æ¥å®ç°è®°å½•è·¯ç”±åŠŸèƒ½çš„ï¼Œè¿™ç§å®ç°æœ‰ä¸ªé™åˆ¶ï¼Œå°±æ˜¯ IP é¦–éƒ¨â€œé€‰é¡¹â€å­—æ®µçš„æœ€å¤§å­—èŠ‚æ•°ä¸º 40 å­—èŠ‚ï¼Œæ‰€ä»¥æœ€å¤šåªèƒ½è®°å½• 10 ä¸ª IPã€‚\nping åŠŸèƒ½é€šè¿‡ ICMP çš„å›æ˜¾è¯·æ±‚å’Œå›æ˜¾åº”ç­”æ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´ ping æ˜¯åŸºäº ICMP åè®®å®ç°çš„ã€‚\nICMP å›æ˜¾è¯·æ±‚å’Œå›æ˜¾åº”ç­”çš„æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹ï¼š\n\næ ‡è¯†ç¬¦ï¼šåœ¨å®ç°ä¸­ï¼Œä¸€èˆ¬å°†è¯¥å­—æ®µè®¾ç½®ä¸ºå½“å‰è¿›ç¨‹ IDã€‚è¿™æ ·å³ä½¿åœ¨åŒä¸€å°ä¸»æœºä¸ŠåŒæ—¶è¿è¡Œäº†å¤šä¸ª ping ç¨‹åºå®ä¾‹ï¼Œ ping ç¨‹åºä¹Ÿå¯ä»¥è¯†åˆ«å‡ºè¿”å›çš„ä¿¡æ¯å±äºå“ªä¸ªè¿›ç¨‹ã€‚\nåºå·ï¼šåºå·ä¸€èˆ¬ä» 0 å¼€å§‹ï¼ˆæ²¡æœ‰å¼ºåˆ¶æ€§ï¼Œä»ä»»ä½•æ•°å­—å¼€å§‹éƒ½å¯ä»¥ï¼‰ï¼Œæ¯å‘é€ä¸€æ¬¡æ–°çš„å›æ˜¾è¯·æ±‚å°±åŠ  1ã€‚å› ä¸º ICMP æ˜¯åœ¨ IP æ•°æ®æŠ¥å†…éƒ¨è¢«ä¼ è¾“çš„ï¼Œè€Œ IP åè®®åˆæ˜¯ä¸å¯é ã€æ— è¿æ¥çš„ï¼Œæ‰€ä»¥ ping ç¨‹åºæ‰“å°å‡ºè¿”å›çš„æ¯ä¸ªåˆ†ç»„çš„åºåˆ—å·ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹æ˜¯å¦æœ‰åˆ†ç»„ä¸¢å¤±ã€å¤±åºæˆ–é‡å¤ã€‚\né€‰é¡¹ï¼šåœ¨â€œé€‰é¡¹â€å­—æ®µä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ”¾å…¥å‘é€æ—¶é—´æˆ³ï¼Œè¿™æ ·åœ¨æ”¶åˆ°å›åº”çš„æ—¶å€™å¯ä»¥ç”¨æ¥è®¡ç®—æœ¬æ¬¡ ping çš„è€—æ—¶ã€‚æˆ‘ä»¬ç»å¸¸ä¼šæŒ‡å®š ping åŒ…çš„å¤§å°ï¼Œæ‰€ä»¥ä¹Ÿä¼šåœ¨â€œé€‰é¡¹â€å­—æ®µä¸­å¡«å……ä¸€äº›åºŸæ•°æ®æ¥è®©åŒ…è¾¾åˆ°ä¸€å®šå¤§å°ï¼Œåœ¨ä¸‹é¢çš„FillPingPacketå‡½æ•°å°±æœ‰è¿™æ ·çš„å®ç°ã€‚\n\n2.1.2 C++ä»£ç å®ç°å®šä¹‰ ICMPã€ping é¦–éƒ¨networkprotocolheader.hå¤´æ–‡ä»¶ä¸­å®šä¹‰äº† IP åè®®ã€ICMP åè®®ç­‰åè®®çš„é¦–éƒ¨ç»“æ„ä½“ã€‚\n#pragma pack(1)#define __u8 unsigned char#define __u16 unsigned short#define __u32 unsigned longstruct icmp_common_hdr &#123;\t__u8 type;\t__u8 code;\t__u16 check;\t/*Other content start here. */&#125;;struct ping_header &#123;\ticmp_common_hdr common_hdr;\t__u16 id;\t__u16 seq;\t__u32 timestamp;&#125;;#pragma pack()\n\nç¨‹åºæ‰§è¡Œå‚æ•°DECLARE_bool(h); // å¸®åŠ©DECLARE_bool(t); // pingæŒ‡å®šçš„ä¸»æœºç›´åˆ°åœæ­¢DECLARE_int(w);  // ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)DECLARE_int(s);  // å‘é€pingåŒ…è¶…æ—¶æ—¶é—´(æ¯«ç§’)DECLARE_int(l);  // å‘é€ç¼“å†²åŒºå¤§å°DECLARE_int(i);  // TTLDEFINE_bool(h, false, &quot;å¸®åŠ©&quot;);DEFINE_bool(t, false, &quot;pingæŒ‡å®šçš„ä¸»æœºç›´åˆ°åœæ­¢&quot;);DEFINE_int(w, 3000, &quot;ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)&quot;);DEFINE_int(s, 3000, &quot;å‘é€pingåŒ…è¶…æ—¶æ—¶é—´(æ¯«ç§’)&quot;);DEFINE_int(l, 32, &quot;å‘é€ç¼“å†²åŒºå¤§å°&quot;);DEFINE_int(i, 128, &quot;TTL&quot;);\n\nping ç¨‹åºçš„æ‰§è¡Œå‚æ•°çš„å®šä¹‰å’Œè§£æç”± webrtc çš„&quot;rtc_base/flags.h&quot;æ”¯æŒã€‚\nå®Œæ•´ä»£ç ä»£ç ä¸­çš„æŸäº›åŠŸèƒ½ï¼Œå¦‚å‚æ•°è§£æã€æ–­è¨€ã€æ—¶é—´æˆ³ç­‰åŸºäº webrtc çš„rtc_baseå®ç°ï¼Œè¿™äº›åŠŸèƒ½ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è‡ªå·±å®ç°ã€‚\nå¦å¤–ï¼Œä½¿ç”¨åŸå§‹å¥—æ¥å­—éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œå¦‚æœéœ€è¦ç»•å¼€ç®¡ç†å‘˜æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ windows æä¾›çš„IcmpSendEchoç³»åˆ—å‡½æ•°ã€‚\nåœ¨å‘é€ ping è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªå°è£…äº†ä¸€ä¸ª ICMP æŠ¥æ–‡ï¼Œå¹¶æ²¡æœ‰è‡ªå·±æ‰‹åŠ¨æ·»åŠ  IP å¤´ï¼Œå°è£… IP æŠ¥æ–‡ã€‚å› ä¸ºå†…æ ¸ä¼šè‡ªåŠ¨æ·»åŠ  IP å¤´ï¼Œå¦‚æœæƒ³è‡ªå·±æ·»åŠ  IP å¤´ï¼Œå¯ä»¥è°ƒç”¨setsockoptè®¾ç½®IP_HDRINCLé€‰é¡¹ï¼Œå‘Šè¯‰å†…æ ¸ç”±æˆ‘ä»¬è‡ªå·±æ¥å°è£… IP å¤´ã€‚\n#include &lt;WinSock2.h&gt;#include &lt;ws2spi.h&gt;#include &lt;ws2tcpip.h&gt;#include &quot;rtc_base/networkprotocolheader.h&quot;#include &quot;rtc_base/checks.h&quot;#include &quot;rtc_base/flags.h&quot;#include &quot;rtc_base/timeutils.h&quot;DECLARE_bool(h); // å¸®åŠ©DECLARE_bool(t); // pingæŒ‡å®šçš„ä¸»æœºç›´åˆ°åœæ­¢DECLARE_int(w);  // ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)DECLARE_int(s);  // å‘é€pingåŒ…è¶…æ—¶æ—¶é—´(æ¯«ç§’)DECLARE_int(l);  // å‘é€ç¼“å†²åŒºå¤§å°DECLARE_int(i);  // TTLDEFINE_bool(h, false, &quot;å¸®åŠ©&quot;);DEFINE_bool(t, false, &quot;pingæŒ‡å®šçš„ä¸»æœºç›´åˆ°åœæ­¢&quot;);DEFINE_int(w, 3000, &quot;ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)&quot;);DEFINE_int(s, 3000, &quot;å‘é€pingåŒ…è¶…æ—¶æ—¶é—´(æ¯«ç§’)&quot;);DEFINE_int(l, 32, &quot;å‘é€æ•°æ®å¤§å°&quot;);DEFINE_int(i, 128, &quot;TTL&quot;);void FillPingPacket(__u8* icmp_packet, __u16 seq, __u16 icmp_packet_size) &#123;\tRTC_DCHECK(icmp_packet);\tping_hdr* pping_hdr = reinterpret_cast&lt;ping_hdr*&gt;(icmp_packet);\tpping_hdr-&gt;common_hdr.type = 8;\tpping_hdr-&gt;common_hdr.code = 0;\tpping_hdr-&gt;id = (__u16)GetCurrentProcessId();\tpping_hdr-&gt;seq = seq;\t__u32 now = rtc::Time32();\tmemcpy((icmp_packet + sizeof(ping_hdr)), &amp;now, sizeof(__u32));\t// fill some junk in the buffer.\tint junk_data_size = FLAG_l - sizeof(__u32); // timestamp\tint junk_offset = icmp_packet_size - junk_data_size;\tif(junk_data_size &gt; 0)\t\tmemset((icmp_packet + junk_offset), &#x27;E&#x27;, junk_data_size);\tpping_hdr-&gt;common_hdr.check = 0;\tpping_hdr-&gt;common_hdr.check = rtc::GetCheckSum(reinterpret_cast&lt;__u16*&gt;(icmp_packet), icmp_packet_size);&#125;void DecodeIPPacket(__u8* ip_packet, __u16 packet_size) &#123;\tiphdr* ip_hdr = reinterpret_cast&lt;iphdr*&gt;(ip_packet);\t__u32 now = rtc::Time32();\t__u16 ip_hdr_len = ip_hdr-&gt;ihl * 4; // bytes\tping_hdr *pping_hdr = reinterpret_cast&lt;ping_hdr*&gt;(ip_packet + ip_hdr_len);\tif (pping_hdr-&gt;common_hdr.type != 0 || pping_hdr-&gt;common_hdr.code != 0) &#123;\t\tprintf(&quot;non-echo response, type=%d, code=%d\\n&quot;, pping_hdr-&gt;common_hdr.type, pping_hdr-&gt;common_hdr.code);\t\treturn;\t&#125;\tif (pping_hdr-&gt;id != (__u16)GetCurrentProcessId()) &#123;\t\tprintf(&quot;other process ping response packet, pid=%d\\n&quot;, GetCurrentProcessId());\t\treturn;\t&#125;\t__u32 timestamp = 0;\tmemcpy(&amp;timestamp, reinterpret_cast&lt;__u32*&gt;((__u8*)pping_hdr + sizeof(ping_hdr)), sizeof(__u32));\tin_addr from;\tfrom.s_addr = ip_hdr-&gt;saddr;\tprintf(&quot;%d bytes from %s, time &lt; %d ms, icmp_seq = %d, TTL = %d \\n&quot;,\t\tpacket_size - ip_hdr_len - sizeof(ping_hdr),\t\tinet_ntoa(from),\t\tnow - timestamp,\t\tpping_hdr-&gt;seq,\t\tip_hdr-&gt;ttl\t);&#125;int main(int argc, char**argv)&#123;\trtc::FlagList::SetFlagsFromCommandLine(&amp;argc, argv, true);\tif (FLAG_h) &#123;\t\trtc::FlagList::Print(NULL, false);\t\treturn 1;\t&#125;\tchar *hostname = argv[argc - 1];\tif (!hostname || strlen(hostname) == 0) &#123;\t\tprintf(&quot;Invalid host name\\n&quot;);\t\treturn 1;\t&#125;\tif (FLAG_l &lt;= 4) &#123;\t\treturn 1;\t&#125;\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tsockaddr_in from;\tint from_len = sizeof(sockaddr_in);\tsockaddr_in dest;\tmemset(&amp;dest, 0, sizeof(sockaddr_in));\tdest.sin_family = AF_INET;\tdest.sin_addr.s_addr = inet_addr(hostname);\t// resolve host name\tif (dest.sin_addr.s_addr == INADDR_NONE) &#123;\t\tunsigned long begin_time = rtc::Time32();\t\tstruct addrinfo* result = nullptr;\t\tstruct addrinfo hints = &#123; 0 &#125;;\t\thints.ai_family = AF_UNSPEC;\t\thints.ai_flags = AI_ADDRCONFIG;\t\tint ret = getaddrinfo(hostname, nullptr, &amp;hints, &amp;result);\t\tif (ret != 0) &#123;\t\t\tprintf(&quot;Resolve host name failed, error code = %d\\n&quot;, ret);\t\t\treturn 1;\t\t&#125;\t\tunsigned long end_time = rtc::Time32();\t\tstruct addrinfo* cursor = result;\t\tprintf(&quot;------------------------------\\n&quot;);\t\tprintf(&quot;Resolve [time &lt; %d ms]: \\n&quot;, end_time - begin_time);\t\tbool flag = false;\t\tfor (; cursor; cursor = cursor-&gt;ai_next) &#123;\t\t\tsockaddr_in *paddr_in = reinterpret_cast&lt;sockaddr_in *&gt;(cursor-&gt;ai_addr);\t\t\tprintf(&quot;%s\\n&quot;, inet_ntoa(paddr_in-&gt;sin_addr));\t\t\tif (!flag) &#123;\t\t\t\tdest.sin_addr = paddr_in-&gt;sin_addr;\t\t\t\tflag = true;\t\t\t&#125;\t\t&#125;\t\tfreeaddrinfo(result);\t\tprintf(&quot;-------------------------------\\n&quot;);\t&#125;\tprintf(&quot;Ping %s [TTL %d]: \\n&quot;, inet_ntoa(dest.sin_addr), FLAG_i);\t// socketå‡½æ•°éœ€è¦ç®¡ç†å‘˜æƒé™\t// éœ€è¦ç»•å¼€ç®¡ç†å‘˜æƒé™ï¼Œå¯ä»¥ä½¿ç”¨IcmpSendEchoç³»åˆ—å‡½æ•°\t//\tSOCKET s = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);\tif (s == INVALID_SOCKET) &#123;\t\tprintf(&quot;create socket failed, error code = %d\\n&quot;, WSAGetLastError());\t\tWSACleanup();\t\treturn 1;\t&#125;\tint err = setsockopt(s, SOL_SOCKET, SO_SNDTIMEO, reinterpret_cast&lt;const char*&gt;(&amp;FLAG_s), sizeof(FLAG_s));\tRTC_DCHECK(err != SOCKET_ERROR);\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt for SO_SNDTIMEO failed, error code = %d\\n&quot;, WSAGetLastError());\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\terr = setsockopt(s, SOL_SOCKET, SO_RCVTIMEO, reinterpret_cast&lt;const char*&gt;(&amp;FLAG_w), sizeof(FLAG_w));\tRTC_DCHECK(err != SOCKET_ERROR);\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt for SO_RCVTIMEO failed, error code = %d\\n&quot;, WSAGetLastError());\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\terr = setsockopt(s, IPPROTO_IP, IP_TTL, reinterpret_cast&lt;const char*&gt;(&amp;FLAG_i), sizeof(FLAG_i));\tRTC_DCHECK(err != SOCKET_ERROR);\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt for IP_TTL failed, error code = %d\\n&quot;, WSAGetLastError());\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\t// ping request\tint icmp_packet_size = sizeof(ping_hdr)\t\t+ FLAG_l; // data\t__u8 *icmp_packet = new __u8[icmp_packet_size];\tRTC_DCHECK(icmp_packet);\t// ping response\t__u16 ip_packet_size = icmp_packet_size + 20; // 20 bytes ip header, no option.\t__u8 *ip_packet = new __u8[ip_packet_size];\tRTC_DCHECK(ip_packet);\tif (!icmp_packet || !ip_packet) &#123;\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\t__u16 i = 0;\twhile (true) &#123;\t\tif (i == 0xFFFF)\t\t\ti = 0;\t\ti++;\t\tif (!FLAG_t) &#123;\t\t\tif(i &gt; 4)\t\t\t\tbreak;\t\t&#125;\t\tFillPingPacket(icmp_packet, i, icmp_packet_size);\t\tint sent = sendto(s,\t\t\treinterpret_cast&lt;const char*&gt;(icmp_packet),\t\t\ticmp_packet_size,\t\t\t0,\t\t\treinterpret_cast&lt;const sockaddr*&gt;(&amp;dest),\t\t\tsizeof(sockaddr));\t\tif (sent == SOCKET_ERROR) &#123;\t\t\tint gle = WSAGetLastError();\t\t\tif (gle == WSAETIMEDOUT) &#123;\t\t\t\tprintf(&quot;request timeout\\n&quot;);\t\t\t\tcontinue;\t\t\t&#125;\t\t\telse &#123;\t\t\t\tprintf(&quot;ping %s failed, error code = %d\\n&quot;, inet_ntoa(dest.sin_addr), gle);\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\tif (sent &lt; FLAG_l) &#123;\t\t\tprintf(&quot;warning, sent %d bytes\\n&quot;, sent);\t\t&#125;\t\tint bread = recvfrom(s,\t\t\treinterpret_cast&lt;char*&gt;(ip_packet),\t\t\tip_packet_size,\t\t\t0,\t\t\treinterpret_cast&lt;sockaddr*&gt;(&amp;from),\t\t\t&amp;from_len);\t\tif (bread == SOCKET_ERROR) &#123;\t\t\tint gle = WSAGetLastError();\t\t\tif (gle == WSAETIMEDOUT) &#123;\t\t\t\tprintf(&quot;receive timeout\\n&quot;);\t\t\t\tcontinue;\t\t\t&#125;\t\t\telse &#123;\t\t\t\tprintf(&quot;ping %s failed, error code = %d\\n&quot;, inet_ntoa(dest.sin_addr), gle);\t\t\t\tbreak;\t\t\t&#125;\t\t&#125;\t\tif (bread &lt; ip_packet_size) &#123;\t\t\tprintf(&quot;too few bytes from %s\\n&quot;, inet_ntoa(from.sin_addr));\t\t\tcontinue;\t\t&#125;\t\tDecodeIPPacket(reinterpret_cast&lt;__u8*&gt;(ip_packet), ip_packet_size);\t\tSleep(1000);\t&#125;\tdelete [] icmp_packet;\tdelete [] ip_packet;\tif (s != INVALID_SOCKET) &#123;\t\tclosesocket(s);\t&#125;\tWSACleanup();    return 0;&#125;\n\nè¿è¡Œæ•ˆæœ\n2.2 TracertTracert æ˜¯ windows ç³»ç»Ÿæä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œä½¿ç”¨è¯¥ç¨‹åºå¯ä»¥è®©æˆ‘ä»¬çœ‹åˆ° IP æ•°æ®æŠ¥ä»ä¸€å°ä¸»æœºåˆ°å¦ä¸€å°ä¸»æœºæ‰€ç»è¿‡çš„è·¯ç”±å™¨ã€‚Linux ç³»ç»Ÿä¹Ÿæä¾›äº†ç±»ä¼¼çš„å·¥å…·ï¼Œå« tracerouteï¼ŒåŠŸèƒ½å’Œ Tracert ä¸€æ ·ã€‚\n2.2.1 Tracert åŸç†åœ¨ä»‹ç» Tracert çš„åŸç†ä¹‹å‰ï¼Œéœ€è¦å…ˆå¼„æ¸…æ¥š IP é¦–éƒ¨ TTL å­—æ®µçš„å«ä¹‰ï¼ŒIP æŠ¥æ–‡æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè·¯ç”±å™¨éƒ½ä¼šå°†è¯¥ IP æŠ¥æ–‡é¦–éƒ¨çš„ TTL å­—æ®µå‡ 1ï¼Œå½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä»½ IP æ•°æ®æŠ¥çš„ TTL æ˜¯ 0 æˆ– 1 æ—¶ï¼Œè·¯ç”±å™¨æ­¤æ—¶ä¸ä¼šè½¬å‘è¯¥æ•°æ®æŠ¥ï¼Œè€Œä¼šä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œå¹¶ä¸”ç»™ IP æ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„æºåœ°å€å‘é€ä¸€ä»½ ICMP è¶…æ—¶æŠ¥æ–‡ã€‚\n\nIP é¦–éƒ¨çš„å®šä¹‰è§ï¼šç½‘ç»œåè®®(3)--IPåè®®\n\nTracert åˆ©ç”¨äº†è·¯ç”±å™¨ä¼šä¸¢å¼ƒ TTL ä¸º 1 æˆ– 0 çš„æ•°æ®æŠ¥ä¸”è¿”å› ICMP è¶…æ—¶æŠ¥æ–‡çš„ç‰¹æ€§ï¼Œæ¥å®ç°ä¾¦æµ‹è·¯ç”±çš„åŠŸèƒ½ã€‚Tracert ç¨‹åºå…ˆå‘é€ TTL å€¼ä¸º 1 çš„ IP æ•°æ®æŠ¥ï¼Œå¤„ç†è¿™ä»½æ•°æ®æŠ¥çš„ç¬¬ä¸€ä¸ªè·¯ç”±å™¨å°† TTL å‡ 1ï¼Œä¸¢å¼ƒè¯¥æ•°æ®æŠ¥å¹¶è¿”å› ICMP è¶…æ—¶æŠ¥æ–‡ï¼Œè¿™æ ·ç¨‹åºå°±å¾—åˆ°äº†ç¬¬ä¸€ä¸ªè·¯ç”±å™¨çš„åœ°å€ï¼Œä»¥æ­¤æ–¹å¼ï¼Œé€’å¢ IP æ•°æ®æŠ¥ TTL çš„å€¼ï¼Œç›´åˆ°æ•°æ®æŠ¥æœ€ç»ˆåˆ°è¾¾ç›®æ ‡ä¸»æœºã€‚\né‚£ä¹ˆæ€ä¹ˆåˆ¤æ–­æ•°æ®æŠ¥åˆ°è¾¾äº†æœ€ç»ˆçš„ç›®æ ‡ä¸»æœºå‘¢ï¼Ÿæˆ‘ä»¬ä¸èƒ½å•çº¯çš„é€šè¿‡æœªæ”¶åˆ°è·¯ç”±å™¨è¿”å›çš„ ICMP å·®é”™æŠ¥æ–‡çš„æ–¹å¼æ¥åˆ¤æ–­æ•°æ®æŠ¥åˆ°è¾¾ç›®çš„åœ°äº†ï¼Œå› ä¸ºæœ‰å¯èƒ½æˆ‘ä»¬ç”±äºæ¥æ”¶ ICMP å·®é”™æŠ¥æ–‡è¶…æ—¶ç­‰åŸå› å¯¼è‡´æˆ‘ä»¬æ”¶ä¸åˆ° ICMP å·®é”™æŠ¥æ–‡ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åé¢ä¼šä»‹ç»æ¯ä¸€ä¸ª TTL è·ƒç‚¹ä¼šå‘é€ 3 æ¬¡æˆ–å¤šæ¬¡è¯·æ±‚çš„åŸå› ï¼‰ã€‚windows å¹³å°çš„ tracert ä¸ linux å¹³å°çš„ traceroute çš„å®ç°åŸç†ç¨æœ‰ä¸åŒï¼Œåˆ¤æ–­æ•°æ®æŠ¥åˆ°è¾¾ç›®æ ‡ä¸»æœºçš„æ–¹å¼ä¹Ÿæœ‰ä¸åŒã€‚tracert æ˜¯é€šè¿‡å‘é€ ping åŒ…ï¼Œå› ä¸º windows ç³»ç»Ÿå†…æ ¸éƒ½å®ç°äº† ping åŠŸèƒ½ï¼Œæ‰€ä»¥å¦‚æœç›®çš„ä¸»æœºæ”¶åˆ°äº† ping è¯·æ±‚å°±ä¼šå›å¤ç›¸åº”çš„ ping åŒ…ï¼Œtracert å°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥åˆ¤æ–­æ•°æ®æŠ¥æ˜¯å¦åˆ°è¾¾äº†ç›®æ ‡ä¸»æœºã€‚è€Œ traceroute æ˜¯é€šè¿‡å‘é€ UDP åŒ…ï¼ˆUDP ç«¯å£é€‰æ‹©ä¸€ä¸ªä¸å¯èƒ½ä½¿ç”¨çš„ UDP ç«¯å£ï¼Œæ¯”å¦‚å¤§äº 30000 çš„ç«¯å£ï¼‰ï¼Œå› ä¸ºç›®çš„ä¸»æœºæ²¡æœ‰ç›‘å¬è¯¥ç«¯å£ï¼Œæ‰€ä»¥ä¸ä¼šå“åº”æ¥æ”¶åˆ°çš„è¯¥ UDP è¯·æ±‚ï¼Œå› æ­¤å½“ UDP åŒ…åˆ°è¾¾æ—¶ï¼Œç›®æ ‡ä¸»æœºä¼šè¿”å›â€œç«¯å£ä¸å¯è¾¾â€çš„é”™è¯¯ï¼Œtraceroute å°±æ˜¯é€šè¿‡è¯¥é”™è¯¯æ¥åˆ¤æ–­ UDP åŒ…åˆ°è¾¾äº†ç›®çš„ä¸»æœºã€‚\nä»å®ç°æ–¹å¼æ¥çœ‹ï¼Œtraceroute é€šè¿‡ UDP çš„æ–¹å¼æ¥å®ç°æ›´åŠ ç¨³å®šå¯é ï¼Œå› ä¸ºå¤§å¤šæ•°ä¸»æœºçš„é˜²ç«å¢™ä¼šç»„ç»‡ ICMP æŠ¥æ–‡ï¼Œè€Œä¸ä¼šé˜»æ­¢ UDP æŠ¥æ–‡ã€‚\nä¸‹å›¾ä½¿ç”¨ wireshark æŠ“å–çš„tracert 192.168.3.76å‘½ä»¤çš„æ•°æ®åŒ…ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ° tracert æ˜¯é€šè¿‡å‘é€ ping åŒ…æ¥å®ç°çš„ï¼Œä»¥åŠæ¯ä¸ª ping åŒ…çš„ TTL é€’å¢è¿‡ç¨‹ï¼š\n2.2.2 ICMP å·®é”™æŠ¥æ–‡æ ¼å¼è·¯ç”±å™¨åœ¨ä¸¢å¼ƒ TTL ä¸º 0 æˆ– 1 çš„æ•°æ®æŠ¥æ—¶ï¼Œä¼šå‘é€ä¸€ä¸ªä¸€ä»½ ICMP å·®é”™æŠ¥æ–‡ï¼Œè¯¥ ICMP çš„å·®é”™æŠ¥æ–‡çš„ type ä¸º 11, code ä¸º 0.\ntype ä¸º 11 çš„æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹ï¼ˆcode æœ‰ 0 å’Œ 1 ä¸¤ç§ï¼Œæ ¼å¼ä¸€æ ·ï¼‰ï¼š\n2.2.3 å®ç°è¯¥ç¤ºä¾‹å’Œä¹‹å‰çš„ Ping ç¨‹åºçš„ç¤ºä¾‹æœ‰æ‰€ä¸åŒï¼Œè¯¥ç¤ºä¾‹è®¾ç½®äº†IP_HDRINCLé€‰é¡¹æ¥è‡ªå·±æ„é€  IP å¤´éƒ¨ã€‚\nç¨‹åºçš„å¯åŠ¨å‚æ•°ä½¿ç”¨ webrtc çš„&quot;rtc_base/flags.h&quot;å®ç°ã€‚\nä»£ç ä¸­çš„å…¶ä»–æŸäº›åŠŸèƒ½ï¼Œå¦‚æ–­è¨€ã€æ—¶é—´æˆ³ç­‰åŸºäº webrtc çš„rtc_baseå®ç°ï¼Œè¿™äº›åŠŸèƒ½ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è‡ªå·±å®ç°ã€‚\n#include &lt;WinSock2.h&gt;#include &lt;ws2spi.h&gt;#include &lt;ws2tcpip.h&gt;#include &lt;strsafe.h&gt;#include &lt;algorithm&gt;#include &quot;rtc_base/networkprotocolheader.h&quot;#include &quot;rtc_base/checks.h&quot;#include &quot;rtc_base/flags.h&quot;#include &quot;rtc_base/timeutils.h&quot;DECLARE_bool(h); // å¸®åŠ©DECLARE_int(m);  // æœ€å¤§è·ƒç‚¹æ•°DECLARE_int(w);  // ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)DECLARE_int(s);  // å‘é€ICMPåŒ…è¶…æ—¶æ—¶é—´(æ¯«ç§’)DECLARE_int(n);  // æ¯ä¸ªè·ƒç‚¹å‘é€çš„è¯·æ±‚æ•°DEFINE_bool(h, false, &quot;å¸®åŠ©&quot;);DEFINE_int(m, 30, &quot;æœ€å¤§è·ƒç‚¹æ•°&quot;);DEFINE_int(w, 3000, &quot;ç­‰å¾…æ¯æ¬¡å›å¤çš„è¶…æ—¶æ—¶é—´(æ¯«ç§’)&quot;);DEFINE_int(s, 3000, &quot;å‘é€ICMPåŒ…è¶…æ—¶æ—¶é—´(æ¯«ç§’)&quot;);DEFINE_int(n, 3, &quot;æ¯ä¸ªè·ƒç‚¹å‘é€çš„è¯·æ±‚æ•°&quot;);const int kPingDataSize = 36;__u32 kLocalIP = 0;__u32 GetLocalIPv4Address() &#123;\treturn inet_addr(&quot;192.168.42.26&quot;);\tchar hostname[MAX_PATH] = &#123; 0 &#125;;\tgethostname(hostname, MAX_PATH);\tstruct hostent FAR* lpHostEnt = gethostbyname(hostname);\tif (lpHostEnt == NULL) &#123;\t\treturn htonl(0x7f000001); //127.0.0.1\t&#125;\tLPSTR lpAddr = lpHostEnt-&gt;h_addr_list[0];\tstruct in_addr addr;\tmemcpy(&amp;addr, lpAddr, 4);\treturn addr.s_addr;&#125;std::string IPv4ToString(__u32 ip) &#123;\tin_addr addr;\taddr.s_addr = ip;\tchar *p= inet_ntoa(addr);\tif (p)\t\treturn p;\treturn &quot;&quot;;&#125;std::string GetPrintString(const char* fmt, ...) &#123;\tchar buf[100];\tva_list arglist;\tva_start(arglist, fmt);\tStringCchVPrintfA(buf, 100, fmt, arglist);\tva_end(arglist);\treturn buf;&#125;bool print_ip(__u32* ips, int count, __u32 dest_ip) &#123;\tbool has_ip = false;\tbool trace_end = false;\tfor (int i = 0; i &lt; count; i++) &#123;\t\tif (ips[i] != 0) &#123;\t\t\tprintf(&quot;  %s&quot;, IPv4ToString(ips[i]).c_str());\t\t\thas_ip = true;\t\t\ttrace_end = (ips[i] == dest_ip);\t\t&#125;\t&#125;\tif (!has_ip)\t\tprintf(&quot;  timeout&quot;);\tprintf(&quot;\\n&quot;);\tif (trace_end)\t\tprintf(&quot;Trace Complete\\n&quot;);\treturn trace_end;&#125;void FillRequestIPPacket(__u8* ip_packet, __u16 ip_packet_size, __u16 seq, __u8 ttl, __u32 dest_addr) &#123;\tRTC_DCHECK(ip_packet);\tiphdr* p_iphdr = reinterpret_cast&lt;iphdr*&gt;(ip_packet);\tmemset(p_iphdr, 0, sizeof(iphdr));\tp_iphdr-&gt;version = 4;\tp_iphdr-&gt;ihl = sizeof(iphdr)/4; // no option\tp_iphdr-&gt;tos = 0;\tp_iphdr-&gt;frag_off = 0;\tp_iphdr-&gt;id = (__u16)rtc::Time32();\tp_iphdr-&gt;ttl = ttl;\tp_iphdr-&gt;protocol = IPPROTO_ICMP;\tp_iphdr-&gt;tot_len = ip_packet_size;\tp_iphdr-&gt;daddr = dest_addr;\tp_iphdr-&gt;saddr = kLocalIP;\tp_iphdr-&gt;check = rtc::GetCheckSum(reinterpret_cast&lt;__u16*&gt;(p_iphdr), p_iphdr-&gt;ihl*4);\tping_hdr* p_ping_hdr = reinterpret_cast&lt;ping_hdr*&gt;(ip_packet + p_iphdr-&gt;ihl*4);\tp_ping_hdr-&gt;common_hdr.type = 8;\tp_ping_hdr-&gt;common_hdr.code = 0;\tp_ping_hdr-&gt;id = (__u16)GetCurrentProcessId();\tp_ping_hdr-&gt;seq = seq;\t// fill some junk in the buffer.\tif (kPingDataSize &gt; 0)\t\tmemset((void*)((__u8*)p_ping_hdr+sizeof(ping_hdr)), &#x27;E&#x27;, kPingDataSize);\tp_ping_hdr-&gt;common_hdr.check = 0;\tp_ping_hdr-&gt;common_hdr.check = rtc::GetCheckSum(reinterpret_cast&lt;__u16*&gt;(p_ping_hdr), ip_packet_size - p_iphdr-&gt;ihl*4);&#125;// return source ip addressbool DecodeIPPacket(const __u8* ip_packet, __u16 ip_packet_size, __u32 send_time, __u32* src_addr) &#123;\tconst iphdr* ip_hdr = reinterpret_cast&lt;const iphdr*&gt;(ip_packet);\t__u32 use_time = rtc::Time32() - send_time;\t__u16 ip_hdr_len = ip_hdr-&gt;ihl * 4; // bytes\tconst icmp_common_hdr *icmp_hdr = reinterpret_cast&lt;const icmp_common_hdr*&gt;(ip_packet + ip_hdr_len);\tif (icmp_hdr-&gt;type == 0 &amp;&amp; icmp_hdr-&gt;code == 0) &#123; // å›æ˜¾åº”ç­”\t\tconst ping_hdr *p_ping_hdr = reinterpret_cast&lt;const ping_hdr*&gt;(icmp_hdr);\t\tif (p_ping_hdr-&gt;id != (__u16)GetCurrentProcessId()) &#123;\t\t\tprintf(&quot;other process ping response packet, pid=%d\\n&quot;, GetCurrentProcessId());\t\t\treturn false;\t\t&#125;\t\tprintf(&quot;%-10s&quot;, GetPrintString(&quot;&lt;%d ms&quot;, use_time == 0 ? 1 : use_time).c_str());\t\t*src_addr = ip_hdr-&gt;saddr;\t\treturn true;\t&#125;\telse if (icmp_hdr-&gt;type == 11 &amp;&amp; icmp_hdr-&gt;code == 0) &#123; // cause by ttl == 0\t\tprintf(&quot;%-10s&quot;, GetPrintString(&quot;&lt;%d ms&quot;, use_time == 0 ? 1 : use_time).c_str());\t\t*src_addr = ip_hdr-&gt;saddr;\t\treturn true;\t&#125;\telse &#123;\t\tprintf(&quot;unexpected response, type=%d, code=%d\\n&quot;, icmp_hdr-&gt;type, icmp_hdr-&gt;code);\t\treturn false;\t&#125;&#125;#define SAFE_RELEASE \\if (req_ip_packet) &#123; \\delete[] req_ip_packet; \\\treq_ip_packet = NULL;\\&#125;\\if (rsp_ip_packet) &#123; \\delete[] rsp_ip_packet; \\\trsp_ip_packet = NULL;\\&#125;\\if (s != INVALID_SOCKET) &#123;\\\tclosesocket(s);\\\ts = INVALID_SOCKET;\\&#125;\\WSACleanup();int main(int argc, char**argv) &#123;\trtc::FlagList::SetFlagsFromCommandLine(&amp;argc, argv, true);\tif (FLAG_h) &#123;\t\trtc::FlagList::Print(NULL, false);\t\treturn 1;\t&#125;\tchar *hostname = argv[argc - 1];\tif (!hostname || strlen(hostname) == 0) &#123;\t\tprintf(&quot;Invalid host name\\n&quot;);\t\treturn 1;\t&#125;\tprintf(&quot;Trace %s\\n&quot;, hostname);\tWSADATA wsaData;\tWORD wVersionRequested = MAKEWORD(2, 2);\tWSAStartup(wVersionRequested, &amp;wsaData);\tsockaddr_in from;\tint from_len = sizeof(sockaddr_in);\tkLocalIP = GetLocalIPv4Address();\tsockaddr_in dest;\tmemset(&amp;dest, 0, sizeof(sockaddr_in));\tdest.sin_family = AF_INET;\tdest.sin_addr.s_addr = inet_addr(hostname);\t// resolve host name\tif (dest.sin_addr.s_addr == INADDR_NONE) &#123;\t\tunsigned long begin_time = rtc::Time32();\t\tstruct addrinfo* result = nullptr;\t\tstruct addrinfo hints = &#123; 0 &#125;;\t\thints.ai_family = AF_UNSPEC;\t\thints.ai_flags = AI_ADDRCONFIG;\t\tint ret = getaddrinfo(hostname, nullptr, &amp;hints, &amp;result);\t\tif (ret != 0) &#123;\t\t\tprintf(&quot;Resolve host name failed, error code = %d\\n&quot;, ret);\t\t\treturn 1;\t\t&#125;\t\tunsigned long end_time = rtc::Time32();\t\tstruct addrinfo* cursor = result;\t\tprintf(&quot;------------------------------\\n&quot;);\t\tprintf(&quot;Resolve [time &lt; %d ms]: \\n&quot;, end_time - begin_time);\t\tbool flag = false;\t\tfor (; cursor; cursor = cursor-&gt;ai_next) &#123;\t\t\tsockaddr_in *paddr_in = reinterpret_cast&lt;sockaddr_in *&gt;(cursor-&gt;ai_addr);\t\t\tprintf(&quot;%s\\n&quot;, inet_ntoa(paddr_in-&gt;sin_addr));\t\t\tif (!flag) &#123;\t\t\t\tdest.sin_addr = paddr_in-&gt;sin_addr;\t\t\t\tflag = true;\t\t\t&#125;\t\t&#125;\t\tfreeaddrinfo(result);\t\tprintf(&quot;-------------------------------\\n&quot;);\t&#125;\tprintf(&quot;Tracing %s [%d max hops]: \\n&quot;, inet_ntoa(dest.sin_addr), FLAG_m);\tSOCKET s = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);\tif (s == INVALID_SOCKET) &#123;\t\tprintf(&quot;create socket failed, error code = %d\\n&quot;, WSAGetLastError());\t\tWSACleanup();\t\treturn 1;\t&#125;\tint err = setsockopt(s, SOL_SOCKET, SO_SNDTIMEO, reinterpret_cast&lt;const char*&gt;(&amp;FLAG_s), sizeof(FLAG_s));\tRTC_DCHECK(err != SOCKET_ERROR);\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt for SO_SNDTIMEO failed, error code = %d\\n&quot;, WSAGetLastError());\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\terr = setsockopt(s, SOL_SOCKET, SO_RCVTIMEO, reinterpret_cast&lt;const char*&gt;(&amp;FLAG_w), sizeof(FLAG_w));\tRTC_DCHECK(err != SOCKET_ERROR);\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt for SO_RCVTIMEO failed, error code = %d\\n&quot;, WSAGetLastError());\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\tint opt = 1;\terr = setsockopt(s, IPPROTO_IP, IP_HDRINCL, reinterpret_cast&lt;const char*&gt;(&amp;opt), sizeof(opt));\tRTC_DCHECK(err != SOCKET_ERROR);\tif (err == SOCKET_ERROR) &#123;\t\tprintf(&quot;setsockopt for IP_HDRINCL failed, error code = %d\\n&quot;, WSAGetLastError());\t\tclosesocket(s);\t\tWSACleanup();\t\treturn 1;\t&#125;\t// ip packet for ping request.\t__u16 req_ip_packet_size = sizeof(iphdr) + sizeof(ping_hdr) + kPingDataSize;\t__u8 *req_ip_packet = new __u8[req_ip_packet_size];\tmemset(req_ip_packet, 0, req_ip_packet_size);\t// ip packet for icmp response or ping echo.\t__u16 rsp_ip_packet_size = // ICMPå·®é”™æŠ¥æ–‡çš„å¤§å°\t\tsizeof(iphdr)\t\t+ sizeof(icmp_common_hdr)  // ICMP(type=11,code=0æˆ–1)å·®é”™æŠ¥æ–‡\t\t+ 4 // unused\t\t+ sizeof(iphdr) + 8;\t//å–pingåŒ…å¤§å°å’ŒICMPå·®é”™æŠ¥æ–‡å¤§å°çš„æœ€å¤§å€¼ï¼Œä¿è¯æ— è®ºè¿”å›å“ªç§æŠ¥æ–‡ç¼“å†²åŒºéƒ½å¤Ÿç”¨ï¼Œ\t//ä¹Ÿå¯ä»¥ç›´æ¥åˆ†é…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç¼“å†²åŒºï¼Œå¦‚1024\t//\trsp_ip_packet_size = std::max(rsp_ip_packet_size, req_ip_packet_size);\t__u8 *rsp_ip_packet = new __u8[rsp_ip_packet_size];\tmemset(rsp_ip_packet, 0, rsp_ip_packet_size);\tRTC_DCHECK(rsp_ip_packet);\tint ttl = 1;\tint seq = 0;\t__u32 *ips = new __u32[FLAG_n];\tfor(int hop = 1; hop &lt;= FLAG_m; hop++) &#123;\t\tprintf(&quot; %-4d&quot;, hop);\t\tfor (int i = 0; i &lt; FLAG_n; i++) &#123;\t\t\tips[i] = 0;\t\t\tseq++;\t\t\tFillRequestIPPacket(req_ip_packet, req_ip_packet_size, seq, ttl, dest.sin_addr.s_addr);\t\t\t__u32 send_time = rtc::Time32();\t\t\tint sent = sendto(s,\t\t\t\treinterpret_cast&lt;const char*&gt;(req_ip_packet),\t\t\t\treq_ip_packet_size,\t\t\t\t0,\t\t\t\treinterpret_cast&lt;const sockaddr*&gt;(&amp;dest),\t\t\t\tsizeof(sockaddr));\t\t\tif (sent == SOCKET_ERROR) &#123;\t\t\t\tprintf(&quot;%-10s&quot;, &quot;*&quot;);\t\t\t\tif (i == FLAG_n - 1)\t\t\t\t\tif (print_ip(ips, FLAG_n, dest.sin_addr.s_addr)) &#123;\t\t\t\t\t\tSAFE_RELEASE;\t\t\t\t\t\treturn 0;\t\t\t\t\t&#125;\t\t\t\tcontinue;\t\t\t&#125;\t\t\tint bread = recvfrom(s,\t\t\t\treinterpret_cast&lt;char*&gt;(rsp_ip_packet),\t\t\t\trsp_ip_packet_size,\t\t\t\t0,\t\t\t\treinterpret_cast&lt;sockaddr*&gt;(&amp;from),\t\t\t\t&amp;from_len);\t\t\tif (bread == SOCKET_ERROR) &#123;\t\t\t\tint gle = WSAGetLastError();\t\t\t\tprintf(&quot;%-10s&quot;, &quot;*&quot;);\t\t\t\tif (i == FLAG_n - 1)\t\t\t\t\tif (print_ip(ips, FLAG_n, dest.sin_addr.s_addr)) &#123;\t\t\t\t\t\tSAFE_RELEASE;\t\t\t\t\t\treturn 0;\t\t\t\t\t&#125;\t\t\t\tcontinue;\t\t\t&#125;\t\t\t__u32 dest_ip = 0;\t\t\tDecodeIPPacket(reinterpret_cast&lt;const __u8*&gt;(rsp_ip_packet), rsp_ip_packet_size, send_time, &amp;dest_ip);\t\t\tips[i] = dest_ip;\t\t\tif (i == FLAG_n - 1)\t\t\t\tif (print_ip(ips, FLAG_n, dest.sin_addr.s_addr)) &#123;\t\t\t\t\tSAFE_RELEASE;\t\t\t\t\treturn 0;\t\t\t\t&#125;\t\t&#125;\t\tttl++;\t&#125;\tSAFE_RELEASE;\treturn 0;&#125;\n\n2.2.4 è¿è¡Œæ•ˆæœï¼š\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"Modern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸Šï¼‰","url":"/post/3678619994.html","content":"CMake æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ï¼ˆBuild-system Generatorï¼‰ã€‚\nCMake æ˜¯æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ï¼Œè€Œä¸æ˜¯æ„å»ºç³»ç»Ÿï¼ŒCMake æ”¯æŒç”Ÿæˆä¸åŒæ„å»ºç³»ç»Ÿæ‰€æ”¯æŒçš„å·¥ç¨‹æ–‡ä»¶ï¼Œå¦‚ Visual Studioï¼ŒXCodeï¼ŒMakefile ç­‰ã€‚\næœ¬æ•™ç¨‹ä½œä¸º CMake çš„ç®€æ˜æ•™ç¨‹ï¼Œä¸ä¼šäº‹æ— å·¨ç»†çš„è®²è¿° CMake çš„æ¯ä¸€ä¸ªè¯­æ³•ï¼Œè€Œæ˜¯ä»¥å®ç”¨ä¸ºç›®çš„ï¼Œä»‹ç» CMake çš„åŸºç¡€è¯­æ³•å’Œå¸¸ç”¨æŒ‡ä»¤ã€‚\nè™½ç„¶åªæ˜¯ç®€æ˜æ•™ç¨‹ï¼Œä½†é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ ä»ç„¶å¯ä»¥æŒæ¡ CMake çš„è„‰ç»œï¼Œç†Ÿç»ƒåº”ç”¨ CMake äºé¡¹ç›®ä¸­ã€‚\n\nModern CMakeCMake è·ä»Šå·²æœ‰ 20 å¤šå¹´çš„å†å²ï¼ŒCMake ä» 3.0 å¼€å§‹å¼•å…¥ Target æ¦‚å¿µï¼Œæœ‰äº† Target å’Œ Property çš„å®šä¹‰ï¼ŒCMake ä¹Ÿå°±æ›´åŠ åœ°ç°ä»£åŒ–ã€‚\næˆ‘ä»¬å°†å¼•å…¥ Target æ¦‚å¿µä¹‹å‰ï¼ˆä¹Ÿå°±æ˜¯ 3.0 ä¹‹å‰ï¼‰çš„ CMake ç§°ä¹‹ä¸ºè€å¼ CMakeï¼Œä¹‹åçš„ç§°ä¹‹ä¸ºç°ä»£ CMakeï¼ˆModern CMakeï¼‰ã€‚\nç°ä»£ CMake æ˜¯å›´ç»• Target å’Œ Property æ¥å®šä¹‰çš„ï¼Œåœ¨ç°ä»£ CMake ä¸­ä¸åº”è¯¥å‡ºç°è¯¸å¦‚ä¸‹é¢çš„æŒ‡ä»¤ï¼š\n\nadd_compile_options\ninclude_directories\nlink_directories\nlink_libraries\n\nå› ä¸ºè¿™äº›æŒ‡ä»¤éƒ½æ˜¯ç›®å½•çº§åˆ«çš„ï¼Œåœ¨è¯¥ç›®å½•ï¼ˆå«å­ç›®å½•ï¼‰ä¸Šå®šä¹‰çš„æ‰€æœ‰ç›®æ ‡éƒ½ä¼šç»§æ‰¿è¿™äº›å±æ€§ï¼Œè¿™æ ·ä¼šå¯¼è‡´å‡ºç°å¾ˆå¤šéšè—ä¾èµ–å’Œå¤šä½™å±æ€§çš„æƒ…å†µã€‚\næˆ‘ä»¬æœ€å¥½ç›´æ¥é’ˆå¯¹ Target è¿›è¡Œæ“ä½œï¼Œå¦‚ï¼š\nadd_executable(hello main.cpp)# è€å¼å†™æ³•include_directories(./include)# ç°ä»£å†™æ³•target_include_directories(hello PRIVATE ./include)\n\næœ¬æ–‡è®²è¿°çš„çŸ¥è¯†ç‚¹åªé€‚ç”¨äºç°ä»£ CMakeï¼Œè®©æˆ‘ä»¬è„±æ‰æ²‰é‡çš„å†å²åŒ…è¢±ï¼Œè½»è£…ä¸Šé˜µå§ï¼\nåŸºç¡€æ¦‚å¿µæ‰€æœ‰çš„æ„å»ºç³»ç»Ÿéƒ½éœ€è¦é€šè¿‡æŸä¸ªå…¥å£ç‚¹æ¥å®šä¹‰é¡¹ç›®ï¼ˆå¦‚ Visual Studio çš„ .sln æ–‡ä»¶ï¼‰ï¼ŒCMake ä½œä¸ºæ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ä¹Ÿä¸ä¾‹å¤–ï¼ŒCMake ä½¿ç”¨çš„æ˜¯ CMakeLists.txt çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä»¥ UTF-8 ç¼–ç ï¼ˆä¹Ÿæ”¯æŒ UTF-8 BOM æ–‡ä»¶å¤´ï¼‰ï¼Œå…¶ä¸­å­˜å‚¨äº†ç¬¦åˆ CMake è¯­è¨€è§„èŒƒçš„è„šæœ¬ä»£ç ã€‚\né¡¹ç›®ç»“æ„CMake æ²¡æœ‰å¼ºåˆ¶è§„å®š CMakeLists.txt æ–‡ä»¶çš„ä½ç½®ä»¥åŠé¡¹ç›®çš„ç›®å½•ç»“æ„ï¼Œä½†ç›®å‰å¤§å¤šæ•°é¡¹ç›®éƒ½ä¼šé‡‡ç”¨ç›¸ä¼¼çš„ç›®å½•ç»“æ„ã€‚\nå¦‚æœé¡¹ç›®åç§°ä¸º my_projectï¼Œä¸”è¯¥é¡¹ç›®åŒ…å«ä¸€ä¸ªåä¸º lib çš„åº“å’Œä¸€ä¸ªåä¸º app çš„ç¨‹åºï¼Œåˆ™ç›®å½•ç»“æ„é€šå¸¸å¦‚ä¸‹é¢æ‰€ç¤ºï¼š\n- my_project  - .gitignore  - README.md  - LICENSE.md  - CMakeLists.txt  - cmake    - FindSomeLib.cmake    - something_else.cmake  - include    - my_project      - lib.h  - src    - CMakeLists.txt    - lib.cpp  - apps    - CMakeLists.txt    - app.cpp  - tests    - CMakeLists.txt    - testlib.cpp  - docs    - CMakeLists.txt  - extern    - googletest  - scripts    - helper.py\n\nå½“ç„¶ï¼Œä¸Šé¢çš„åç§°å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥å®šä¹‰ï¼Œä¾‹å¦‚ my_project å¯ä»¥æ˜¯ä»»æ„çš„é¡¹ç›®åï¼Œå¦‚æœä¸å–œæ¬¢å¤æ•°ï¼Œå¯ä»¥å°† tests æ”¹æˆtestï¼Œå¦‚æœæ²¡æœ‰ python ä»£ç ï¼Œä¹Ÿå¯ä»¥ç§»é™¤ python ç›®å½•ï¼Œcmake ç›®å½•åˆ™ç”¨äºå­˜æ”¾ CMake è¾…åŠ©è„šæœ¬ã€‚\nä»ä¸Šé¢çš„ç›®å½•ç»“æ„å¯ä»¥çœ‹åˆ°ï¼ŒCMakeLists.txt æ–‡ä»¶åˆ†æ•£åœ¨å„ä¸ªå­ç›®å½•ä¸­ï¼Œä½†åœ¨ include ç›®å½•ä¸­æ²¡æœ‰ CMakeList.txt æ–‡ä»¶ï¼Œè¿™æ ·æ˜¯ä¸ºäº†é˜²æ­¢æš´éœ²ä¸å¿…è¦çš„æ–‡ä»¶ç»™åº“çš„ä½¿ç”¨è€…ï¼Œå› ä¸º include ç›®å½•ä¸­å­˜æ”¾çš„æ˜¯åº“çš„å¤´æ–‡ä»¶ï¼Œåœ¨å®‰è£…æ—¶é€šå¸¸éƒ½ä¼šå°†è¯¥ç›®å½•æ‹·è´åˆ°æŒ‡å®šä½ç½®ï¼ˆå¦‚Linuxç³»ç»Ÿçš„ &#x2F;usr&#x2F;includeï¼‰ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;extern ç›®å½•ç”¨äºå­˜æ”¾ç¬¬ä¸‰æ–¹ä¾èµ–åº“çš„æºç ï¼Œè¿™äº›åº“å¯ä»¥é€šè¿‡ git submodule çš„å½¢å¼æ¥ç®¡ç†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°†æºç æ‹·è´åˆ°æ­¤ï¼Œå¹¶æäº¤åˆ°é¡¹ç›® git ä¸­ã€‚ä½†æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼ï¼Œä¾èµ–åº“æœ€å¥½èƒ½æ”¯æŒ CMakeï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨ add_subdirectory å‘½ä»¤å°†é¡¹ç›®æ·»åŠ åˆ°å·¥ç¨‹ä¸­ï¼ˆå¦‚æœä½ å¯¹ add_subdirectory å‘½ä»¤çš„å…·ä½“ç”¨æ³•è¿˜ä¸äº†è§£ï¼Œè¿™æ²¡å…³ç³»ï¼Œç°åœ¨ä½ åªéœ€è¦çŸ¥é“è¯¥å‘½ä»¤å¯ä»¥æ·»åŠ ä»»ä½•åŒ…å« CMakeLists.txt çš„ç›®å½•åˆ°é¡¹ç›®ä¸­å³å¯ï¼‰ã€‚\nä¸€ä¸ªç®€å•çš„ç¤ºä¾‹åœ¨å­¦ä¹  CMake ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå°† CMake ç©èµ·æ¥ã€‚æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¼€å§‹ï¼Œäº†è§£ CMake çš„åŸºæœ¬ç©æ³•ã€‚\nè¯¥ç¤ºä¾‹æ˜¯åªåŒ…å«ä¸€ä¸ª main.cpp æ–‡ä»¶ï¼Œæˆ‘ä»¬æœŸæœ›ç¼–è¯‘è¯¥æ–‡ä»¶èƒ½ç”Ÿæˆ hello_cmake ç¨‹åºã€‚\nç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n- hello_cmake  - main.cpp  - CMakeLists.txt\n\nmain.cpp æ–‡ä»¶çš„å†…å®¹éå¸¸ç®€å•ï¼š\n#include &lt;stdio.h&gt;int main() &#123;    printf(&quot;hello cmake&quot;);    return 0;&#125;\n\nCMakeLists.txt å†…å®¹å¦‚ä¸‹ï¼š\n# è®¾ç½® CMake çš„æœ€ä½ç‰ˆæœ¬cmake_minimum_required(VERSION 3.16)# è®¾ç½®é¡¹ç›®åç§°project (hello_cmake)# æ·»åŠ ä¸€ä¸ªåä¸º hello_cmake çš„ç›®æ ‡# ç›®æ ‡ç±»å‹ä¸ºå¯æ‰§è¡Œæ–‡ä»¶# ä½¿ç”¨ main.cpp æ¥ç¼–è¯‘ç”Ÿæˆ hello_cmake å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚hello_cmake.exeï¼‰add_executable(hello_cmake main.cpp)\n\nå®Œæˆä¸Šé¢æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ CMake GUI æˆ–å‘½ä»¤è¡Œï¼ˆå½“ç„¶ä½ éœ€è¦æå‰å®‰è£… CMakeï¼Œè¿™ä¸åœ¨æœ¬æ–‡çš„ä»‹ç»èŒƒå›´ä¹‹å†…ï¼‰å°±å¯ä»¥ç”Ÿæˆç›¸åº”çš„å·¥ç¨‹äº†ã€‚\n\né€šè¿‡ CMake å‘½ä»¤è¡Œç”Ÿæˆ Visual Studio å·¥ç¨‹çš„å‘½ä»¤å¦‚ä¸‹ï¼š\ncmake.exe -G &quot;Visual Studio 15 2017&quot; -S .\\hello_cmake -B .\\hello_cmake\\build\n\næºç å¤–æ„å»ºæˆ‘ä»¬é€šå¸¸ä¼šå°†æ„å»ºç›®å½•æŒ‡å®šåˆ°ä¸€ä¸ªå•ç‹¬çš„å­ç›®å½•å†…ï¼Œè¿™ä¸ªç›®å½•åç§°çš„é€šå¸¸æ˜¯ buildã€‚å¦‚æœä¸è¿™æ ·åšï¼ŒCMake ç”Ÿæˆçš„å·¥ç¨‹æ–‡ä»¶å’Œä¸´æ—¶ç¼“å­˜æ–‡ä»¶ä¼šæ±¡æŸ“æºç ç›®å½•ã€‚è¿™ç§æ–¹å¼æœ‰ä¸ªå­¦åå«â€œæºç å¤–æ„å»ºâ€ (out-of-source build)ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä½¿ç”¨æºç å¤–æ„å»ºæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜ä¼šå°† build ç›®å½•æ·»åŠ åˆ° .gitignore æ–‡ä»¶ä¸­ã€‚\nå·¥ä½œæµç¨‹ç¼–å†™ CMake è„šæœ¬çš„åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š\n\nåœ¨è„šæœ¬ç¬¬ä¸€è¡Œä½¿ç”¨ cmake_minimum_required æŒ‡å®šè¿è¡Œå½“å‰è„šæœ¬æ‰€éœ€çš„ CMake æœ€ä½ç‰ˆæœ¬ã€‚\nä½¿ç”¨ project æŒ‡å®šé¡¹ç›®åç§°ã€‚\nä½¿ç”¨ add_executable æˆ– add_library åˆ›å»ºç›®æ ‡ã€‚\nä¸ºç›®æ ‡è®¾ç½®åŒ…å«ç›®å½•ã€é“¾æ¥åº“ç­‰å±æ€§ï¼ˆå¯é€‰ï¼‰ã€‚\nå®‰è£…ï¼ˆå¯é€‰ï¼‰ã€‚\n\nç¼–å†™å®Œ CMake è„šæœ¬ä»¥åï¼Œå°±å¯ä»¥ä½¿ç”¨ CMake GUI æˆ–å‘½ä»¤è¡Œæ¥ç”Ÿæˆå¯¹åº”çš„å·¥ç¨‹æ–‡ä»¶äº†ã€‚ä»¥ Visual Studio ä¸ºä¾‹ï¼Œå¯¹äºæœ‰ my_lib åº“ å’Œ app åº”ç”¨ç¨‹åºçš„é¡¹ç›®ï¼ŒCMake ä¼šç”Ÿæˆå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ 5 ä¸ªé¡¹ç›®ï¼š\n\nä¸‹é¢ä»‹ç» CMake è‡ªåŠ¨ç”Ÿæˆçš„ä¸€äº›é¡¹ç›®çš„ä½œç”¨ï¼š\n\nç¼–è¯‘ ALL_BUILD é¡¹ç›®ä¼šè‡ªåŠ¨ç¼–è¯‘é™¤ INSTALL é¡¹ç›®å¤–çš„æ‰€æœ‰é¡¹ç›®ã€‚\nç¼–è¯‘ INSTALL é¡¹ç›®ä¼šæ‰§è¡Œ CMake è„šæœ¬ä¸­æŒ‡å®šçš„å®‰è£…æ“ä½œã€‚\nç¼–è¯‘ ZERO_CHECK é¡¹ç›®ä¼šå†æ¬¡æ‰§è¡Œ CMake è„šæœ¬ï¼Œé‡æ–°ç”Ÿæˆé¡¹ç›®ã€‚å› æ­¤è‹¥ CMake è„šæœ¬æœ‰æ›´æ–°ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ CMake å·¥å…·æ¥é‡æ–°ç”Ÿæˆé¡¹ç›®ï¼Œä¹Ÿå¯ä»¥æ˜¯é‡æ–°ç¼–è¯‘ ZERO_CHECK é¡¹ç›®ã€‚\n\næ³¨é‡Šåœ¨ CMake ä¸­ä½¿ç”¨ # æ¥å£°æ˜å•è¡Œæ³¨é‡Šï¼Œè¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„æ³¨é‡Šæ–¹æ³•ã€‚è™½ç„¶ä¹Ÿæ”¯æŒä½¿ç”¨ #[[ ]] æ¥å£°æ˜å¤šè¡Œæ³¨é‡Šï¼ˆä¹Ÿç§°å—æ³¨é‡Šï¼‰ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä¾‹å¦‚:\n#[[  è¿™æ˜¯å¤šè¡Œæ³¨é‡Šä¹Ÿç§°å—æ³¨é‡Š  ä½ æ˜ç™½äº†å—ï¼Ÿ]]\n\nCMakeæœ€ä½ç‰ˆæœ¬cmake_minimum_required æ˜¯æˆ‘ä»¬æ¥è§¦åˆ°ç¬¬ä¸€ä¸ª CMake æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ç”¨äºæŒ‡å®šç¼–è¯‘è¯¥è„šæœ¬æ‰€éœ€çš„æœ€ä½ CMake ç‰ˆæœ¬ã€‚\nä½ å¯ä»¥åœ¨ CMakeList.txt æ–‡ä»¶çš„ç¬¬ä¸€è¡Œéƒ½ä½¿ç”¨è¯¥æŒ‡ä»¤æ¥æŒ‡å®šè¿è¡Œå½“å‰è„šæœ¬éœ€è¦çš„æœ€ä½ CMake ç‰ˆæœ¬ï¼Œä½†æˆ‘ä»¬é€šå¸¸åªéœ€è¦åœ¨ä¸» CMakeList.txt ï¼ˆä½•ä¸ºä¸» CMakeList.txtï¼Ÿè§ä¸‹é¢çš„â€œé¡¹ç›®åç§°â€å°èŠ‚ï¼‰ ä¸­çš„ç¬¬ä¸€è¡Œä½¿ç”¨è¯¥æŒ‡ä»¤å³å¯ã€‚\ncmake_minimum_required(VERSION &lt;min&gt;[...&lt;policy_max&gt;] [FATAL_ERROR])\n\nå¦‚æœè¿è¡Œ CMake çš„ç‰ˆæœ¬ä½äºè¦æ±‚çš„ç‰ˆæœ¬ï¼Œåˆ™å°†åœæ­¢å¤„ç†è¯¥è„šæœ¬å¹¶è¿”å›é”™è¯¯ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æˆ‘ä»¬å§‹ç»ˆåº”è¯¥é€‰æ‹©ä¸€ä¸ªæ¯”ç¼–è¯‘å™¨æ™šå‘å¸ƒçš„ CMake ç‰ˆæœ¬ï¼Œå› ä¸ºåªæœ‰è¿™æ ·ï¼ŒCMake æ‰èƒ½æ”¯æŒæ–°çš„ç¼–è¯‘å™¨é€‰é¡¹ã€‚ä½†æœ€ä½ç‰ˆæœ¬ä¸åº”ä½äº 3.0ï¼Œå®é™…é¡¹ç›®ä¸­é€šå¸¸æœ€ä½ç‰ˆæœ¬ä¸ä¼šä½äº 3.16ï¼ˆè¯¥ç‰ˆæœ¬äº2020å¹´09æœˆ15æ—¥å‘å¸ƒï¼‰ï¼Œæœ¬æ•™ç¨‹ä¹Ÿæ˜¯ä»¥æ­¤ä¸ºæ ‡å‡†è¿›è¡Œè®²è§£çš„ã€‚\né¡¹ç›®åç§°ä½¿ç”¨ project æŒ‡å®šé¡¹ç›®åç§°ã€‚\né¡¹ç›®åç§°åŒºåˆ«äºç›®æ ‡ï¼ˆTargetï¼‰åç§°ï¼Œä»¥ Visual Studio ä¸ºä¾‹ï¼Œproject æŒ‡å®šçš„åç§°å¯¹åº”â€œè§£å†³æ–¹æ¡ˆåç§°â€ï¼Œè€Œ add_executable æˆ– add_library ç­‰æŒ‡å®šçš„åç§°æ‰å¯¹åº”å…·ä½“é¡¹ç›®åå’Œç”Ÿæˆçš„â€œç›®æ ‡æ–‡ä»¶åâ€ã€‚\nè®¾ç½®é¡¹ç›®åç§°åï¼ŒCMake ä¼šè‡ªåŠ¨å®šä¹‰ä¸€äº›å˜é‡ï¼ˆå˜é‡çš„å…·ä½“ç”¨æ³•ä¼šåœ¨ç¨åçš„â€œ3.1 å˜é‡â€å°èŠ‚è¿›è¡Œä»‹ç»ï¼‰ã€‚ä¸ºäº†æ–¹ä¾¿ä»‹ç»å„ä¸ªå˜é‡çš„å«ä¹‰ï¼Œå‡è®¾æˆ‘ä»¬æ˜¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥è¿è¡Œ CMake çš„:\ncmake.exe -G &quot;Visual Studio 15 2017&quot; -S D:\\hello_cmake -B D:\\hello_cmake\\build\n\nä¸‹é¢åˆ—ä¸¾äº†ä¸€äº› CMake è‡ªåŠ¨å®šä¹‰çš„å˜é‡ï¼š\n\nPROJECT_NAMEé¡¹ç›®åç§°ï¼Œå¦‚ hello_cmake\nCMAKE_PROJECT_NAMEå¦‚æœ CMakeLists.txt ä½äºé¡¹ç›®çš„é¡¶çº§ç›®å½•ï¼Œè¿˜ä¼šå®šä¹‰ CMAKE_PROJECT_NAME å˜é‡ï¼Œå€¼ä¸ PROJECT_NAME ä¸€è‡´ã€‚\nPROJECT_SOURCE_DIRé¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼‰ï¼Œå³ -S å‚æ•°æŒ‡å®šçš„ç›®å½•ï¼Œå¦‚ D:\\hello_cmake\n&lt;PROJECT-NAME&gt;_SOURCE_DIRå€¼ä¸ PROJECT_SOURCE_DIR ç›¸åŒï¼Œåªæ˜¯å˜é‡åä¸åŒï¼Œå¦‚ hello_cmake_SOURCE_DIR  \nPROJECT_BINARY_DIRé¡¹ç›®çš„æ„å»ºç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼‰ï¼Œå³ -B å‚æ•°æŒ‡å®šçš„ç›®å½•ï¼Œå¦‚ D:\\hello_cmake\\build\n&lt;PROJECT-NAME&gt;_BINARY_DIRå€¼ä¸ PROJECT_BINARY_DIR ç›¸åŒï¼Œåªæ˜¯å˜é‡åä¸åŒï¼Œå¦‚ hello_cmake_BINARY_DIR\n\nä¸»CMakeLists.txtä¸» CMakeLists.txt å³é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ CMakeLists.txt æ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥ CMAKE_PROJECT_NAME ä¸ PROJECT_NAME å˜é‡æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­å½“å‰çš„ CMakeLists.txt æ–‡ä»¶æ˜¯å¦ä¸ºä¸» CMakeLists.txtã€‚\nif(CMAKE_PROJECT_NAME STREQUAL PROJECT_NAME)endif()\n\nç›®æ ‡ç±»å‹æ—¢ç„¶ç°ä»£ CMake æ˜¯å›´ç»•ç›®æ ‡ï¼ˆTargetï¼‰å·¥ä½œçš„ï¼ŒTarget å¦‚æ­¤é‡è¦ï¼Œé‚£æˆ‘ä»¬é¦–å…ˆå°±éœ€è¦åˆ›å»ºä¸€ä¸ª Targetã€‚\nåœ¨ C&#x2F;C++ å¼€å‘ä¸­ï¼Œå¸¸è§çš„ Target ç±»å‹æœ‰ï¼šå¯æ‰§è¡Œæ–‡ä»¶ã€é™æ€åº“ã€åŠ¨æ€åº“ï¼ŒCMake è¿˜é¢å¤–æä¾›äº†ä¸€ä¸ª MODULE ç±»å‹ã€‚\nä¸‹é¢åˆ—ä¸¾äº†ä¸åŒç±»å‹çš„ç›®æ ‡çš„åˆ›å»ºæ–¹å¼ã€‚\nå¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨ add_executable æŒ‡ä»¤å¯ä»¥åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶ç±»å‹çš„ç›®æ ‡ã€‚\nadd_executable(my_exe main.cpp)\n\nåŠ¨æ€åº“å’Œé™æ€åº“é€šè¿‡ä¸º add_library æŒ‡ä»¤æŒ‡å®šä¸åŒçš„å‚æ•°ï¼Œå¯ä»¥åˆ›å»ºåŠ¨æ€åº“å’Œé™æ€åº“ã€‚\nadd_library(&lt;name&gt; [&lt;type&gt;] [EXCLUDE_FROM_ALL] &lt;sources&gt;...)\n\n# åŠ¨æ€åº“add_library(my_lib SHARED main.cpp)# é™æ€åº“add_library(my_lib STATIC main.cpp)\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ add_library ä¸­ä¸æŒ‡å®šç±»å‹å‚æ•°ï¼Œæ”¹ä¸ºé€šè¿‡è®¾ç½® BUILD_SHARED_LIBS å˜é‡æ¥åˆ‡æ¢é™æ€åº“å’ŒåŠ¨æ€åº“ã€‚ä¸‹é¢ç¤ºä¾‹åœ¨è„šæœ¬ä¸­è®¾ç½®äº† BUILD_SHARED_LIBS å˜é‡å€¼ä¸º ON ï¼ˆON &#x2F; OFF å¯¹åº” CMake ä¸­çš„å¼€&#x2F;å…³ï¼‰ï¼š\ncmake_minimum_required(VERSION 3.16)project (hello_cmake)set(BUILD_SHARED_LIBS ON)add_library(hello_cmake main.cpp)\n\nä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿›è¡ŒæŒ‡å®š BUILD_SHARED_LIBS å˜é‡ï¼š\ncmake.exe -G &quot;Visual Studio 15 2017&quot; -DBUILD_SHARED_LIBS=ON -S .\\hello_cmake -B .\\hello_cmake\\build\n\näº¦å¯ä»¥åœ¨ GUI ç•Œé¢ä¸Šè®¾ç½® BUILD_SHARED_LIBS å˜é‡ï¼Œå¦‚ï¼š\n\nåŸºç¡€è¯­æ³•å˜é‡å˜é‡çš„å®šä¹‰åœ¨ CMake ä¸­ä½¿ç”¨ set å’Œ unset å‘½ä»¤æ¥å®šä¹‰å’Œå–æ¶ˆå®šä¹‰å˜é‡ã€‚\nCMake çš„å˜é‡æ²¡æœ‰ç±»å‹ä¸€è¯´ï¼Œå› ä¸ºå…¶å˜é‡å€¼å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚\nåŸºäºä¸Šè¿°åŸå› ï¼Œåœ¨ CMake ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨ +ã€-ã€*ã€\\ ç­‰æ“ä½œç¬¦å¯¹å˜é‡è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œéœ€è¦ä½¿ç”¨ math æŒ‡ä»¤ï¼Œä¹Ÿä¸èƒ½ç›´æ¥ä½¿ç”¨ &gt;ã€&lt;ã€== ç­‰æ“ä½œç¬¦å¯¹å˜é‡è¿›è¡Œé€»è¾‘è¿ç®—ï¼Œéœ€è¦ä½¿ç”¨ LESSã€EQUAL è¿›è¡Œåˆ¤æ–­ï¼Œè¯¦è§ä¸‹é¢çš„â€œæ¡ä»¶åˆ¤æ–­â€ç« èŠ‚ã€‚\nCMake çš„å˜é‡åæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œè€Œä¸”å…¶å˜é‡åä¸åƒå…¶ä»–è¯­è¨€é‚£æ ·æœ‰å„ç§é™åˆ¶ï¼Œå®ƒå¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ã€é—®å·ç­‰ï¼Œä½†å¦‚æœå˜é‡åä¸­åŒ…å«#ï¼ˆè¯¥ç¬¦å·ç”¨äºè¡Œæ³¨é‡Šï¼‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨ \\# è¿›è¡Œè½¬ä¹‰ã€‚\nä¸‹é¢çš„è¯­å¥éƒ½æ˜¯åˆæ³•çš„ï¼š\nset(abc 123)set(ABC &quot;123&quot;)set(&quot;ab c&quot; &quot;456&quot;)set(&quot;ab?c&quot; &quot;789&quot;)set(&quot;/usr/bin/bash&quot; &quot;987&quot;)set(&quot;C:\\\\Program Files\\\\&quot; &quot;654&quot;)set(&quot; &quot; &quot;321&quot;)set(\\# &quot;321&quot;)unset(a)\n\nè™½ç„¶ CMake å…è®¸å˜é‡åä¸ºä»»æ„å­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬ä»ç„¶å»ºè®®åœ¨å˜é‡åç§°ä¸­ä»…åŒ…å«å­—æ¯ã€æ•°å­—ã€- å’Œ _ ï¼Œè€Œä¸”å­—æ¯ä¸ºå¤§å†™å­—æ¯ï¼Œå¦‚ï¼š\n# å»ºè®®çš„å‘½åæ–¹å¼set(QT_VERSION &quot;5.15.2&quot;)set(LIB_NAME &quot;my_lib&quot;)\n\nCMake è¿˜ä¼šä¿ç•™ä¸€äº›æ ‡è¯†ç¬¦ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰å˜é‡æ—¶å°½é‡ä¸è¦ä½¿ç”¨è¿™äº›åç§°ï¼ˆä½ æ‰§æ„è¦ç”¨ï¼ŒCMake ä¹Ÿä¸ä¼šæŠ¥é”™ï¼‰ï¼š\n\nä»¥ CMAKE_ å¼€å¤´çš„ã€‚\nä»¥ _CMAKE_ å¼€å¤´çš„ã€‚\nä»¥ _&lt;cmake command&gt; å¼€å¤´çš„ï¼Œå¦‚ _fileï¼Œå®Œæ•´çš„ command åˆ—è¡¨è§ï¼šcmake-commandsã€‚\n\nåœ¨å®šä¹‰å®Œå˜é‡ä»¥åï¼Œå°±å¯ä»¥é€šè¿‡ ${variable} çš„å½¢å¼è¿›è¡Œå¼•ç”¨äº†ï¼Œå¦‚ï¼š\nset(QT_VERSION &quot;5.15.2&quot;)message(STATUS &quot;QT_VERSION is $&#123;QT_VERSION&#125;&quot;)\n\nåœ¨ CMake ä¸­ï¼Œè¿˜å¯ä»¥é€šè¿‡å¼•ç”¨å˜é‡çš„æ–¹å¼æ¥å®šä¹‰æ–°çš„å˜é‡ï¼š\nset(a &quot;xyz&quot;)set(b &quot;$&#123;a&#125;_321&quot;)set($&#123;a&#125;_1 &quot;456&quot;)set(variable_$&#123;a&#125; &quot;$&#123;a&#125; + $&#123;b&#125; + 15&quot;)message(&quot;b: &#x27;$&#123;b&#125;&#x27;&quot;) # b: &#x27;xyz_321&#x27;message(&quot;xyz_1: &#x27;$&#123;xyz_1&#125;&#x27;&quot;) # xyz_1: &#x27;456&#x27;message(&quot;variable_xyz: &#x27;$&#123;variable_xyz&#125;&#x27;&quot;) # variable_xyz: &#x27;xyz + xyz_321 + 15&#x27;\n\nç¯å¢ƒå˜é‡çš„å¼•ç”¨æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œåœ¨ä¸‹é¢çš„ç¯å¢ƒå˜é‡ç« èŠ‚ä¼šè¯¦ç»†ä»‹ç»ï¼Œè€Œä¸”åœ¨ if æ¡ä»¶ä¸­å¯ä»¥çœç•¥ ${}ï¼Œç›´æ¥ä½¿ç”¨å˜é‡åï¼Œå¦‚ if(QT_VERSION)ã€‚\nCMake è¿˜å…è®¸ä½¿ç”¨æœªå®šä¹‰çš„å˜é‡ï¼Œæœªå®šä¹‰çš„å˜é‡çš„å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\nCMake ä¹Ÿå…è®¸é‡å¤å®šä¹‰å˜é‡ï¼Œå˜é‡çš„å€¼é‡‡ç”¨æœ€åå®šä¹‰çš„å€¼ã€‚\nè°ƒè¯•è¾“å‡ºmessageä¸ºäº†æ–¹ä¾¿è°ƒè¯•è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ messsage æŒ‡ä»¤æ¥è¾“å‡ºå˜é‡å’Œè°ƒè¯•ä¿¡æ¯ã€‚\nmessage([&lt;mode&gt;] &quot;message text&quot; ...)\n\n&lt;mode&gt; å…³é”®å­—æ˜¯å¯é€‰çš„ï¼Œå®ƒç”¨äºæŒ‡å®šæ¶ˆæ¯çš„ç±»å‹ï¼Œæ¶ˆæ¯ç±»å‹ä¼šå½±å“ CMake å¯¹è¯¥æ¶ˆæ¯çš„å¤„ç†æ–¹å¼ã€‚\nå¸¸ç”¨çš„æ¶ˆæ¯ç±»å‹æœ‰ï¼š\n\nFATAL_ERRORè‡´å‘½é”™è¯¯ï¼ˆçº¢è‰²ï¼‰ï¼Œåªæœ‰è¯¥ç±»å‹ä¼šå¯¼è‡´è„šæœ¬ç»ˆæ­¢æ‰§è¡Œã€‚\nWARNINGè­¦å‘Šï¼ˆçº¢è‰²ï¼‰ï¼Œè„šæœ¬ç»§ç»­æ‰§è¡Œã€‚\nNOTICEï¼ˆé»˜è®¤ï¼‰éœ€è¦ç‰¹åˆ«å…³æ³¨çš„æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰ï¼Œè„šæœ¬ç»§ç»­æ‰§è¡Œã€‚\nSTATUSæ™®é€šè¾“å‡ºï¼Œæ­£å¸¸é¢œè‰²ï¼Œè„šæœ¬ä¹Ÿä¼šç»§ç»­æ‰§è¡Œã€‚\n\nmessage(&quot;Current version is 1.0.0.1&quot;)message(STATUS &quot;BUILD_SHARED_LIBS value is $&#123;BUILD_SHARED_LIBS&#125;&quot;)\n\ncmake_print_variableså¦‚æœåªæ˜¯å•çº¯åœ°æƒ³æ‰“å°å˜é‡çš„å€¼ï¼Œä½¿ç”¨ messsage æ˜¾å¾—æœ‰äº›ç¹çï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ cmake_print_variables å‡½æ•°æ¥æ‰“å°å˜é‡çš„å€¼ï¼Œè¯¥å‡½æ•°ä»¥ variable=value æ ¼å¼è¾“å‡ºæ¯ä¸ªå˜é‡çš„å€¼ï¼Œæ–¹ä¾¿è¿›è¡Œè§‚å¯Ÿã€‚\nç”±äºè¯¥å‡½æ•°ç”± CMake çš„ CMakePrintHelpers æ¨¡å—æä¾›ï¼Œå› æ­¤åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œéœ€è¦å…ˆ include(CMakePrintHelpers)ï¼š\ninclude(CMakePrintHelpers)set(MY_NAME &quot;jack&quot;)set(MY_ADDRESS &quot;Hubei&quot;)cmake_print_variables(MY_NAME MY_ADDRESS) # MY_NAME=&quot;jack&quot; ; MY_ADDRESS=&quot;Hubei&quot;\n\nåˆ—è¡¨åˆ—è¡¨å°±æ˜¯ç®€å•åœ°åŒ…å«ä¸€ç³»åˆ—å€¼ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å‰²æ¯ä¸ªå€¼ï¼š\nset(MY_LIST a b &quot;c&quot; 1 2 $&#123;MY_NAME&#125; 3)\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ ; æ¥ä»£æ›¿ç©ºæ ¼ï¼š\nset(MY_LIST &quot;a;b;c;1;2;$&#123;MY_NAME&#125;;3&quot;)set(MY_LIST a;b;c;1;2;$&#123;MY_NAME&#125;;3)\n\nlist å‘½ä»¤list å‘½ä»¤æä¾›äº†ä¼—å¤šé’ˆå¯¹åˆ—è¡¨çš„æ“ä½œï¼Œå¦‚è·å–å…ƒç´ ä¸ªæ•°ã€æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€æ’åºç­‰ã€‚\n# è·å–å…ƒç´ ä¸ªæ•°list(LENGTH &lt;list&gt; &lt;out-var&gt;)# è·å–æŒ‡å®šä¸‹æ ‡ï¼ˆå¯ä»¥æŒ‡å®šå¤šä¸ªä¸‹æ ‡ï¼‰çš„å…ƒç´ list(GET &lt;list&gt; &lt;element index&gt; [&lt;index&gt; ...] &lt;out-var&gt;)# æ‹¼æ¥2ä¸ªåˆ—è¡¨list(JOIN &lt;list&gt; &lt;glue&gt; &lt;out-var&gt;)# è·å–æŒ‡å®šä½ç½®æŒ‡å®šé•¿åº¦çš„ä¸€æ®µåˆ—è¡¨list(SUBLIST &lt;list&gt; &lt;begin&gt; &lt;length&gt; &lt;out-var&gt;)# æŸ¥æ‰¾ï¼Œ&lt;out-var&gt;ä¸­å­˜å‚¨æŸ¥æ‰¾åˆ°çš„å…ƒç´ ä¸‹æ ‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™ä¸º-1list(FIND &lt;list&gt; &lt;value&gt; &lt;out-var&gt;)# åœ¨åˆ—è¡¨å°¾éƒ¨æ·»åŠ è‹¥å¹²å…ƒç´ list(APPEND &lt;list&gt; [&lt;element&gt;...])# æŒ‰æ¡ä»¶è¿‡æ»¤åˆ—è¡¨list(FILTER &lt;list&gt; &lt;INCLUDE|EXCLUDE&gt; REGEX &lt;regular_expression&gt;)# åœ¨æŒ‡å®šä½ç½®æ’å…¥è‹¥å¹²å…ƒç´ list(INSERT &lt;list&gt; &lt;index&gt; [&lt;element&gt;...])# å¼¹å‡ºå°¾éƒ¨çš„è‹¥å¹²å…ƒç´ ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®š&lt;out-var&gt;å˜é‡ï¼Œåˆ™åªå¼¹å‡ºä¸€ä¸ªï¼‰list(POP_BACK &lt;list&gt; [&lt;out-var&gt;...])# å¼¹å‡ºå¤´éƒ¨çš„è‹¥å¹²å…ƒç´ ï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®š&lt;out-var&gt;å˜é‡ï¼Œåˆ™åªå¼¹å‡ºä¸€ä¸ªï¼‰list(POP_FRONT &lt;list&gt; [&lt;out-var&gt;...])# å°†è‹¥å¹²å…ƒç´ æ’å…¥åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼Œå¦‚æœ&lt;list&gt;æ²¡æœ‰è¢«å®šä¹‰ï¼Œåˆ™ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åˆ—è¡¨list(PREPEND &lt;list&gt; [&lt;element&gt;...])# ç§»é™¤åˆ—è¡¨ä¸­çš„è‹¥å¹²å…ƒç´ list(REMOVE_ITEM &lt;list&gt; &lt;value&gt;...)# ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®ï¼ˆå¯ä»¥æŒ‡å®šå¤šä¸ªï¼‰çš„å…ƒç´ list(REMOVE_AT &lt;list&gt; &lt;index&gt;...)# åˆ é™¤åˆ—è¡¨ä¸­çš„é‡å¤é¡¹ç›®ã€‚ä¿ç•™é¡¹ç›®çš„ç›¸å¯¹é¡ºåºï¼Œä½†å¦‚æœé‡åˆ°é‡å¤é¡¹ï¼Œåˆ™ä»…ä¿ç•™ç¬¬ä¸€ä¸ªå®ä¾‹ã€‚list(REMOVE_DUPLICATES &lt;list&gt;)# æŒ‰ç…§&lt;ACTION&gt;å¯¹åˆ—è¡¨å…ƒç´ è¿›è¡Œè½¬æ¢list(TRANSFORM &lt;list&gt; &lt;ACTION&gt; [&lt;SELECTOR&gt;] [OUTPUT_VARIABLE &lt;output variable&gt;])# åˆ—è¡¨åè½¬list(REVERSE &lt;list&gt;)# åˆ—è¡¨æ’åºlist(SORT &lt;list&gt; [COMPARE &lt;compare&gt;] [CASE &lt;case&gt;] [ORDER &lt;order&gt;])\n\nä¸‹é¢ä»…ç®€å•åœ°æ¼”ç¤º 2 ä¸ªåˆ—è¡¨åŠŸèƒ½çš„ç”¨æ³•ï¼š\nset(NAME_LIST jack jim jeff tom)list(LENGTH NAME_LIST NAME_COUNT)message(STATUS &quot;name count: $&#123;NAME_COUNT&#125;&quot;) # name count: 4list(FIND NAME_LIST jim JIM_INDEX)message(STATUS &quot;jim at: $&#123;JIM_INDEX&#125;&quot;) # jim at: 1\n\néå†åˆ—è¡¨å¯ä»¥ä½¿ç”¨ foreach æ¥éå†åˆ—è¡¨ï¼Œä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ foreach éå†è¾“å‡º MY_LIST åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ _ITEM å˜é‡çš„ä½œç”¨åŸŸä»…é™ foreach ä»£ç å—ã€‚\nset(MY_LIST hello world)foreach(_ITEM $&#123;MY_LIST&#125;)  message(STATUS &quot;$&#123;_ITEM&#125;&quot;)endforeach()\n\næˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ while æ¥éå†åˆ—è¡¨ï¼Œè¯¦è§ä¸‹é¢çš„â€œå¾ªç¯â€ç« èŠ‚ã€‚\nåŒå¼•å·çš„ä½œç”¨å­¦ä¹ åˆ°è¿™é‡Œï¼Œä¹Ÿè®¸ä½ ä¼šæ„Ÿåˆ°å›°æ‰°ï¼Œåœ¨å®šä¹‰å˜é‡æ—¶ï¼Œä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä½¿ç”¨åŒå¼•å·æŠŠå€¼åŒ…å›´èµ·æ¥ï¼Œæœ‰æ—¶å€™åˆä¸ä½¿ç”¨å‘¢ï¼Ÿ\næˆ‘ä»¬å·²ç»å­¦ä¹ å®Œäº†åˆ—è¡¨çš„ç›¸å…³çŸ¥è¯†ï¼Œç°åœ¨å°±å¯ä»¥è§£é‡ŠåŠ ä¸åŠ å¼•å·çš„åŒºåˆ«äº†ã€‚\nåœ¨å®šä¹‰å˜é‡æ—¶ï¼Œè‹¥å˜é‡å€¼ä¸­åŒ…å«ç©ºæ ¼ï¼Œæ­¤æ—¶ä¸ä½¿ç”¨åŒå¼•å·åŒ…è£¹ï¼Œåˆ™ç­‰åŒäºå®šä¹‰åˆ—è¡¨ï¼›ä½¿ç”¨åŒå¼•å·åŒ…è£¹ï¼Œåˆ™ç­‰åŒäºå®šä¹‰å­—ç¬¦ä¸²å˜é‡ã€‚\n# å®šä¹‰çš„MY_VARä¸ºåˆ—è¡¨ï¼ŒåŒ…å«2ä¸ªå…ƒç´ ï¼šhelloã€worldset(MY_VAR hello world)# å®šä¹‰çš„MY_VARä¸ºå­—ç¬¦ä¸²set(MY_VAR &quot;hello world&quot;)\n\nå¯¹äºåˆ—è¡¨ç±»å‹çš„å˜é‡ï¼Œåœ¨ä½¿ç”¨æ—¶æ˜¯å¦ä½¿ç”¨åŒå¼•å·åŒ…è£¹ä¹Ÿä¼šæœ‰åŒºåˆ«ï¼šæœ‰åŒå¼•å·åŒ…è£¹æ—¶ï¼Œä¼šå°†æ•°ç»„å…ƒç´ ä»¥åˆ†å·ä½œä¸ºåˆ†éš”ç¬¦è¿›è¡Œæ‹¼æ¥ï¼Œå¦åˆ™ä¼šç›´æ¥æ‹¼æ¥å„å…ƒç´ ã€‚\nset(MY_LIST hello world)message(STATUS &quot;$&#123;MY_LIST&#125;&quot;) # hello;worldmessage(STATUS $&#123;MY_LIST&#125;) # helloworld\n\nä¸‰ç§ä¸åŒçš„å˜é‡CMake ä¸­çš„å˜é‡åˆ†ä¸ºæ™®é€šå˜é‡ã€ç¼“å­˜å˜é‡å’Œç¯å¢ƒå˜é‡ï¼Œä¸‰è€…éƒ½å¯ä»¥é€šè¿‡ set æŒ‡ä»¤è¿›è¡Œå®šä¹‰ã€‚\næ™®é€šå˜é‡ä¸‹é¢ä½¿ç”¨ set å®šä¹‰çš„å˜é‡å°±æ˜¯æ™®é€šå˜é‡ã€‚\nset(MY_NAME &quot;jack&quot;)\n\nä¹Ÿå¯ä»¥åœ¨ CMake å‘½ä»¤è¡Œä¸­é€šè¿‡ -D å‚æ•°å®šä¹‰æ™®é€šå˜é‡ï¼Œå¦‚ä¸‹é¢ç¤ºä¾‹å®šä¹‰äº† BUILD_SHARED_LIBS å’Œ TEST å˜é‡ï¼š\ncmake.exe -G &quot;Visual Studio 15 2017&quot; -DBUILD_SHARED_LIBS=ON -DTEST=123 -S .\\hello_cmake -B .\\hello_cmake\\build\n\nç¼“å­˜å˜é‡ç¼“å­˜å˜é‡ä¹Ÿæ˜¯é€šè¿‡ set æŒ‡ä»¤å®šä¹‰çš„ï¼Œä½†éœ€è¦æ·»åŠ é¢å¤–çš„å‚æ•°ï¼š\nset(&lt;variable&gt; &lt;value&gt;... CACHE &lt;type&gt; &lt;docstring&gt; [FORCE])\n\nä¸‹é¢ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸º LIB_VERSION çš„ç¼“å­˜å˜é‡ï¼š\ncmake_minimum_required(VERSION 3.16)set(LIB_VERSION &quot;1.0.0.1&quot; CACHE STRING &quot;the version of library&quot;)project (hello_cmake)add_library(hello_cmake main.cpp)message(STATUS &quot;LIB_VERSION = $&#123;LIB_VERSION&#125;&quot;)\n\n\nä½¿ç”¨ CMake GUI ç¨‹åºæ‰§è¡Œè¯¥è„šæœ¬ï¼Œå¯ä»¥çœ‹åˆ°ç•Œé¢ä¸Šå¤šå‡ºäº†ä¸€ä¸ªåä¸º LIB_VERSION çš„æ–‡æœ¬è¾“å…¥æ¡†ï¼Œè€Œä¸”è¾“å…¥æ¡†æœ‰é»˜è®¤å€¼ 1.0.0.1ã€‚\nå°†è¾“å…¥æ¡†ä¸­çš„æ–‡æœ¬ä¿®æ”¹ä¸º 1.0.0.2ï¼Œå†æ¬¡æ‰§è¡Œè¯¥è„šæœ¬ï¼Œå¯ä»¥å‘ç°è°ƒè¯•è¾“å‡ºçš„å†…å®¹æ˜¯ LIB_VERSION = 1.0.0.2ï¼Œè€Œä¸”æ— è®ºæˆ‘ä»¬æ‰§è¡Œå¤šå°‘æ¬¡è„šæœ¬ï¼Œå§‹ç»ˆè¾“å‡ºçš„éƒ½æ˜¯è¯¥å†…å®¹ã€‚\nè¿™æ˜¯å› ä¸º CMake ä¼šå°†ç¼“å­˜å˜é‡åŠå…¶å€¼å­˜å‚¨åˆ° â€œæ„å»ºç›®å½•\\CMakeCache.txtâ€ æ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡è¿è¡Œè„šæœ¬æ—¶ï¼Œä¼šä¼˜å…ˆä»è¯¥æ–‡ä»¶ä¸­åŠ è½½å˜é‡ï¼Œè¯¥æ–‡ä»¶å†…å®¹æ ¼å¼å¤§è‡´å¦‚ä¸‹ï¼š\n# build\\CMakeCache.txt æ–‡ä»¶......//the version of libraryLIB_VERSION:STRING=1.0.0.2......\n\nå…¶ä¸­ï¼Œ&lt;type&gt; ç”¨äºæŒ‡å®šå˜é‡çš„è¾“å…¥ç±»å‹ã€‚è¯·æ³¨æ„ï¼Œ&lt;type&gt; æŒ‡å®šçš„ä¸æ˜¯å˜é‡çš„ç±»å‹ï¼Œå› ä¸º CMake çš„æ‰€æœ‰å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚&lt;type&gt; æŒ‡å®šçš„æ˜¯è¾“å…¥ç±»å‹ï¼Œä»…ç”¨äºå¸®åŠ© CMake GUI ç¨‹åºæ˜¾ç¤ºä¸åŒçš„ç”¨æˆ·è¾“å…¥æ§ä»¶ï¼Œå¦‚æ–‡æœ¬è¾“å…¥æ¡†ã€å¤é€‰æ¡†ã€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ç­‰ã€‚ \n&lt;type&gt; çš„å–å€¼å¿…é¡»æ˜¯ä¸‹é¢åˆ—è¡¨ä¸­çš„ä¸€ä¸ªï¼š\n\nBOOLå¼€å…³ONæˆ–OFFï¼Œåœ¨ CMake GUI ä¸Šæä¾›ä¸€ä¸ªå¤é€‰æ¡†ã€‚\nPATHæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œåœ¨ CMake GUI ä¸Šæä¾›ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†å’Œä¸€ä¸ªæŒ‰é’®æ¥æ‰“å¼€æ–‡ä»¶å¤¹é€‰æ‹©å¯¹è¯æ¡†ã€‚\nFILEPATHæ–‡ä»¶çš„è·¯å¾„ï¼Œåœ¨ CMake GUI ä¸Šæä¾›ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†å’Œä¸€ä¸ªæŒ‰é’®æ¥æ‰“å¼€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ã€‚\nSTRINGæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œåœ¨ CMake GUI ä¸Šæä¾›ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†ã€‚\nSTRINGSæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½†åœ¨ CMake GUI ä¸Šä¼šæä¾›ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©æ¡†ã€‚\nINTERNALè™½ç„¶ä¹Ÿæ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½†ä¸ä¼šæ˜¾ç¤ºåœ¨ CMake GUI ä¸Šï¼Œå› æ­¤ç”¨æˆ·æ— æ³•åœ¨ç•Œé¢ä¸Šä¿®æ”¹è¯¥å˜é‡çš„å€¼ã€‚\n\nå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›æŸäº›ç¼“å­˜å˜é‡ç›´æ¥å±•ç¤º CMake GUI ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ mark_as_advanced æŒ‡ä»¤å°†ç¼“å­˜å˜é‡è®¾ç½®ä¸ºé«˜çº§çŠ¶æ€ï¼Œè¿™æ ·é™¤éç”¨æˆ·æ‰“å¼€äº† â€œShow Advancedâ€ é€‰é¡¹ï¼Œå¦åˆ™é«˜çº§å˜é‡ä¸ä¼šæ˜¾ç¤ºåœ¨ CMake GUI ä¸­ã€‚åœ¨è„šæœ¬æ¨¡å¼ä¸‹ï¼Œé«˜çº§&#x2F;éé«˜çº§çŠ¶æ€æ˜¯æ— æ•ˆçš„ã€‚\nset(DEBUG_LIBNAME_SUFFIX &quot;-d&quot; CACHE STRING &quot;Optional suffix to append to the library name for a debug build&quot;)mark_as_advanced(DEBUG_LIBNAME_SUFFIX)\n\noptionè™½ç„¶ option ä¹Ÿå¯ç”¨äºå®šä¹‰ç¼“å­˜å˜é‡ï¼Œä½†å…¶åªèƒ½å®šä¹‰â€œå¼€&#x2F;å…³â€ç±»å‹çš„å˜é‡ã€‚\noption(ENABLE_TEST &quot;enable test or not&quot; ON)\n\nå¦‚æœæœªæŒ‡å®šåˆå§‹å€¼ï¼Œé»˜è®¤ä¸º OFFã€‚\nç¯å¢ƒå˜é‡ç¯å¢ƒå˜é‡çš„å®šä¹‰æ–¹å¼å¦‚ä¸‹ï¼š\nset(ENV&#123;&lt;variable&gt;&#125; [&lt;value&gt;])\n\nç¯å¢ƒå˜é‡åœ¨å¼•ç”¨æ—¶ï¼Œéœ€è¦åœ¨å‰é¢æ·»åŠ  ENV æ ‡è¯†ï¼Œå¦‚ $ENV{&lt;variable&gt;}\nç¤ºä¾‹ï¼š\nset(ENV&#123;USER_NAME&#125; &quot;jack&quot;)message(STATUS &quot;User name is $ENV&#123;USER_NAME&#125;&quot;)\n\nCMake ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œä¼šåŠ è½½ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼ŒåŒæ—¶è¿˜ä¼šè®¾ç½®ä¸€äº›å†…ç½®çš„ç¯å¢ƒå˜é‡ï¼Œå†…ç½®çš„ç¯å¢ƒå˜é‡è§ cmake-env-variablesã€‚\nCMake è™½ç„¶ä¼šåŠ è½½ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹è¯¥ç¯å¢ƒå˜é‡ï¼Œä½†è¯¥ä¿®æ”¹æ“ä½œä¸ä¼šå½±å“åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ã€‚\nå®šä¹‰æˆ–åŠ è½½çš„ç¯å¢ƒå˜é‡åªä¼šä½œç”¨äºå½“å‰çš„ CMake è¿›ç¨‹ï¼Œè€Œä¸”å¯¹å½“å‰è¿›ç¨‹æ‰€è¿è¡Œçš„æ‰€æœ‰è„šæœ¬éƒ½å¯è§ï¼Œä½†ä¸ä¼šå½±å“åˆ°å…¶ä»– CMake è¿›ç¨‹å’Œç³»ç»Ÿä¸­çš„å…¶ä»–è¿›ç¨‹ã€‚\nå˜é‡ä½œç”¨åŸŸåœ¨ä¸Šé¢ä»‹ç»ä¸‰ç§ä¸åŒçš„å˜é‡æ—¶ï¼Œæˆ‘ä¸€ç›´åœ¨ç«­åŠ›é¿å…è®¨è®ºä¸€ä¸ªè¯é¢˜ï¼Œé‚£å°±æ˜¯å˜é‡çš„ä½œç”¨åŸŸã€‚äº‹å®ä¸Šï¼Œä¸Šé¢ä¸‰ç§å˜é‡è¿˜æœ‰ä¸ªä¸åŒä¹‹å¤„å°±æ˜¯ä½œç”¨åŸŸçš„ä¸åŒã€‚\nç¼“å­˜å˜é‡å’Œç¯å¢ƒå˜é‡éƒ½æ˜¯å…¨å±€çš„ï¼Œå®ƒä»¬å¯ä»¥è·¨æ–‡ä»¶ã€ç›®å½•ã€å‡½æ•°è¿›è¡Œè¯»å†™ï¼Œå› æ­¤ä½œç”¨åŸŸä¸»è¦é’ˆå¯¹æ™®é€šå˜é‡è€Œè¨€ã€‚\nCMake ä¸­ä½œç”¨åŸŸåˆ†ä¸ºâ€œç›®å½•çº§åˆ«ä½œç”¨åŸŸâ€å’Œâ€œå‡½æ•°ä½œç”¨åŸŸâ€ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ block() æ¥æ˜¾å¼çš„åˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸï¼Œä½†è¿™ç§ä½¿ç”¨æ–¹å¼éå¸¸å°‘ï¼‰ã€‚\nå‡½æ•°æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡åªèƒ½åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨ï¼Œå‡½æ•°ä½“å¤–æ— æ³•è®¿é—®ã€‚é™¤éåœ¨å®šä¹‰å˜é‡æ—¶æ·»åŠ  PARENT_SCOPE æ¥å°†å˜é‡ä½œç”¨åŸŸè®¾ç½®ä¸ºä¸Šä¸€çº§ç›®å½•ã€‚\nincludeä½¿ç”¨ include æŒ‡ä»¤å¯ä»¥åŠ è½½å’Œæ‰§è¡Œå…¶ä»– CMake è„šæœ¬æ–‡ä»¶ï¼ˆåç§°é€šå¸¸ä¸º *.cmakeï¼‰ï¼Œinclude ä¼šåœ¨ CMAKE_MODULE_PATH å˜é‡æŒ‡å®šçš„ç›®å½•åˆ—è¡¨ä¸­æœç´¢æŒ‡å®šæ–‡ä»¶ã€‚\nä½¿ç”¨ include æŒ‡ä»¤åŠ è½½cmakeæ–‡ä»¶æ—¶ï¼Œæ— éœ€æŒ‡å®š .cmake åç¼€ï¼ŒæŒ‡å®šæ–‡ä»¶åå³å¯ï¼Œå‡è®¾åœ¨ Aï¼ˆCMakeLists.txtæˆ–*.cmakeï¼‰ä¸­è°ƒç”¨ include(B) åŠ è½½ B.cmake ï¼Œåˆ™ A å’Œ B ä¹‹é—´å¯ä»¥ç›¸äº’è¯»å†™å½¼æ­¤çš„å˜é‡ï¼ˆåŒ…å«æ™®é€šå˜é‡ã€ç¼“å­˜å˜é‡å’Œç¯å¢ƒå˜é‡ï¼‰ã€‚\nå½“ç„¶ï¼Œåœ¨ B.cmake æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ include æŒ‡ä»¤åŠ è½½æ‰§è¡Œå…¶ä»–çš„ cmake æ–‡ä»¶ã€‚\nadd_subdirectoryä½¿ç”¨ add_subdirectory æŒ‡ä»¤å¯ä»¥æ·»åŠ ä¸€ä¸ªå­ç›®å½•åˆ°é¡¹ç›®æ„å»ºä¸­ï¼Œä½†æ˜¯è¢«æ·»åŠ çš„å­ç›®å½•ä¸­å¿…é¡»åŒ…å« CMakeLists.txt æ–‡ä»¶ã€‚\nå‡è®¾åœ¨ A (CMakeLists.txtæ–‡ä»¶) ä¸­è°ƒç”¨ add_subdirectory(lib) æ·»åŠ äº† lib å­ç›®å½•ï¼Œåˆ™ lib ç›®å½•ä¸­çš„ CMakeLists.txt å¯ä»¥è¯»å†™ A ä¸­çš„æ™®é€šå˜é‡ï¼Œä½† A ä¸èƒ½è¯»å†™ lib ç›®å½• CMakeLists.txt çš„æ™®é€šå˜é‡ã€‚ä½†å¯ä»¥åœ¨å®šä¹‰å˜é‡æ—¶æ·»åŠ  PARENT_SCOPE é€‰é¡¹æ¥çªç ´è¯¥é™åˆ¶ï¼Œå°†å˜é‡ä½œç”¨åŸŸè®¾ç½®ä¸ºä¸Šä¸€çº§ä½œç”¨åŸŸï¼Œå³çˆ¶ç›®å½•çš„ä½œç”¨åŸŸï¼Œå¦‚ï¼š\n# lib\\CMakeLists.txt æ–‡ä»¶set(LIB_NAME &quot;MyTestLib&quot; PARENT_SCOPE)\n\nadd_subdirectory(lib)# å¯ä»¥è®¿é—® LIB_NAME å˜é‡message(STATUS &quot;$&#123;LIB_NAME&#125;&quot;)\n\næ•°å­¦è¿ç®—åœ¨å‰é¢ç« èŠ‚å·²ç»æåˆ°äº† CMake ä¸­çš„å€¼éƒ½æ˜¯ä»¥å­—ç¬¦ä¸²ç±»å‹å­˜å‚¨çš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨æ•°å­¦è¿ç®—ç¬¦ç¬¦è¿›è¡Œè¿ç®—ï¼Œéœ€è¦ä½¿ç”¨ math æŒ‡ä»¤è¿›è¡Œæ•°å­¦è¿ç®—ã€‚\nmath çš„è¯­æ³•å¦‚ä¸‹ï¼š\nmath(EXPR &lt;variable&gt; &quot;&lt;expression&gt;&quot; [OUTPUT_FORMAT &lt;format&gt;])\n\nå…¶ä¸­ï¼Œ&lt;variable&gt;å˜é‡å¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œmath ä¼šè‡ªåŠ¨å®šä¹‰è¯¥å˜é‡ï¼›\nOUTPUT_FORMAT é€‰é¡¹ç”¨äºæŒ‡å®šè®¡ç®—ç»“æœçš„è¿›åˆ¶ï¼ˆåå…­è¿›åˆ¶æˆ–åè¿›åˆ¶ï¼‰ï¼š\n\nHEXADECIMAL  åå…­è¿›åˆ¶\nDECIMAL åè¿›åˆ¶ï¼ˆé»˜è®¤ï¼‰\n\nmath æ”¯æŒå¦‚ä¸‹è¿ç®—ç¬¦ï¼š\n+ - * / % | &amp; ^ ~ &lt;&lt; &gt;&gt;  (...)\n\nç¤ºä¾‹ï¼š\n# value ç­‰äº &quot;300&quot;math(EXPR value &quot;100 * 3&quot;)# value ç­‰äº &quot;1000&quot;math(EXPR value &quot;100 * 0xA&quot;)# value ç­‰äº &quot;0x12c&quot;math(EXPR value &quot;100 * 3&quot; OUTPUT_FORMAT HEXADECIMAL)set(value 3)math(EXPR value &quot;100 * $&#123;value&#125;&quot;)   # value ç­‰äº &quot;300&quot;# value ç­‰äº &quot;306&quot;math(EXPR value &quot;(100 + 2) * 3&quot;)      \n\n\næ¡ä»¶åˆ¤æ–­åœ¨ CMake ä¸­ï¼Œä½¿ç”¨ if è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\nif(&lt;condition&gt;)  &lt;commands&gt;elseif(&lt;condition&gt;) # å¯é€‰çš„ï¼Œå¯ä»¥æœ‰å¤šä¸ª  &lt;commands&gt;else()              # å¯é€‰çš„  &lt;commands&gt;endif()\n\nä¸ä¼—å¤šè¯­è¨€ä¸­çš„ if ä¸€æ ·ï¼Œå½“æ‹¬å·ä¸­çš„æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œæ‰æ‰§è¡ŒæŒ‡å®šçš„ commandsã€‚\nç¤ºä¾‹ï¼š\nset(a 9)if(a LESS 10)    message(STATUS &quot;a &lt; 10&quot;)else()    message(STATUS &quot;a &gt;= 10&quot;)endif()\n\nelse() å’Œ endif() æ‹¬å·ä¸­çš„å†…å®¹å¯ä»¥ä¸ºç©ºï¼Œä½†å¦‚æœéœ€è¦æŒ‡å®šï¼Œåˆ™å°±å¿…é¡»ä¸ if ä¸­çš„æ¡ä»¶å®Œå…¨ä¸€è‡´ï¼Œå¦‚ä¸‹é¢ç¤ºä¾‹æ‰€ç¤ºï¼š\nset(a 9)if(a LESS 10)    message(STATUS &quot;a &lt; 10&quot;)else(a LESS 10)    message(STATUS &quot;a &gt;= 10&quot;)endif(a LESS 10)\n\næˆ‘ä»¬é€šå¸¸ä¸åœ¨ else() å’Œ endif() ä¸­æŒ‡å®šæ¡ä»¶ï¼Œå› ä¸ºè¿™æ ·å¤ªç¹çäº†ã€‚\nçœŸå€¼ä¸å‡å€¼ä½•ä¸ºçœŸï¼Œä½•ä¸ºå‡ï¼Œäººç”ŸçœŸçœŸå‡å‡ï¼Œéš¾ä»¥åˆ†è¾¨ï¼Œç¨‹åºçš„çœŸå‡å´æ¸…æ¸…æ¥šæ¥šã€‚\nä¸‹åˆ—å¸¸é‡å§‹ç»ˆä¸ºçœŸï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š\n\n1 å’Œå…¶ä»–éé›¶æ•°å­—ï¼ˆåŒ…å«æµ®ç‚¹å‹ï¼‰ï¼Œå¦‚ 1ã€2ã€3.14\nON\nYES\nTRUE\nY\n\nä¸‹åˆ—å¸¸é‡å§‹ç»ˆä¸ºå‡ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š\n\n0\nOFF\nNO\nFALSE\nN\nIGNORE\nNOTFOUND\nç©ºå­—ç¬¦ä¸²\nè¢«å¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼ˆé™¤å§‹ç»ˆä¸ºçœŸçš„å­—ç¬¦ä¸²å¤–ï¼Œå¦‚ TRUEã€Y ç­‰ï¼‰\n\né€»è¾‘è¿ç®—ç¬¦åœ¨ CMake ä¸­ï¼Œé€»è¾‘è¿ç®—ç¬¦çš„ä¸ã€æˆ–ã€éåˆ†åˆ«ä½¿ç”¨ ANDã€ORã€NOT è¡¨ç¤ºã€‚\nif(NOT &lt;condition&gt;)if(&lt;cond1&gt; AND &lt;cond2&gt;)if(&lt;cond1&gt; OR &lt;cond2&gt;)if((condition) AND (condition OR (condition)))\n\nå…³ç³»è¿ç®—ç¬¦ç”±äº CMake å˜é‡éƒ½æ˜¯ä»¥å­—ç¬¦ä¸²ç±»å‹å­˜å‚¨çš„ï¼Œå› æ­¤å³ä¾¿æ˜¯æ•°å­—ä¹Ÿä¸èƒ½ç›´æ¥ä½¿ç”¨ &gt;ã€&lt;ã€== è¿™æ ·çš„è¿ç®—ç¬¦æ¥ç›´æ¥æ¯”è¾ƒã€‚\né’ˆå¯¹æ•°å€¼ç±»å‹ï¼ŒCMake æ”¯æŒçš„å…³ç³»è¿ç®—ç¬¦å¦‚ä¸‹ï¼š\n\nLESS  å°äº\nLESS_EQUAL  å°äºç­‰äº\nGREATER  å¤§äº\nGREATER_EQUAL  å¤§äºç­‰äº\nEQUAL  ç­‰äº\n\nCMake è¿˜æ”¯æŒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œå³ä»å·¦åˆ°å³ä¾æ¬¡æ¯”è¾ƒå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œå‡ºç°ä¸ç›¸åŒæ—¶ç«‹å³è¿”å›ï¼Œç±»ä¼¼äº C è¯­è¨€ä¸­çš„ strcmp å‡½æ•°ã€‚\n\nSTRLESS  \nSTRLESS_EQUAL \nSTRGREATER \nSTRGREATER_EQUAL \nSTREQUAL\n\nå­˜åœ¨æ€§æ ¡éªŒCMake æä¾›äº†ä¸€äº›åˆ¤æ–­å˜é‡æ˜¯å¦å®šä¹‰ã€ç›®æ ‡æ˜¯å¦åˆ›å»ºã€å…ƒç´ æ˜¯å¦å­˜åœ¨äºåˆ—è¡¨ä¸­ã€æ–‡ä»¶&#x2F;ç›®å½•æ˜¯å¦å­˜åœ¨ç­‰æ–¹æ³•ã€‚\n# ç»™å®šåç§°æ˜¯å¦æ˜¯å¯ä»¥è°ƒç”¨çš„æŒ‡ä»¤if(COMMAND &lt;command-name&gt;)# ç»™å®šåç§°æ˜¯å¦æ˜¯å·²åˆ›å»ºçš„ç›®æ ‡ï¼Œå³é€šè¿‡add_executable()ã€add_library() æˆ– add_custom_target() å‘½ä»¤åˆ›å»ºif(TARGET &lt;target-name&gt;)# ç»™å®šåç§°çš„æ™®é€šå˜é‡ã€ç¼“å­˜å˜é‡ã€ç¯å¢ƒå˜é‡æ˜¯å¦å·²å®šä¹‰if(DEFINED &lt;name&gt;|CACHE&#123;&lt;name&gt;&#125;|ENV&#123;&lt;name&gt;&#125;)# ç»™å®šçš„å…ƒç´ æ˜¯å¦åŒ…å«åœ¨åˆ—è¡¨ä¸­if(&lt;variable|string&gt; IN_LIST &lt;variable&gt;)# ç»™å®šçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨if(EXISTS &lt;path-to-file-or-directory&gt;)\n\nå¾ªç¯CMake æœ‰ä¸¤ç§å¾ªç¯æ–¹å¼ï¼š\n\nforeach  \nwhile\n\näºŒè€…éƒ½å¯ä»¥ä½¿ç”¨ break() æå‰é€€å‡ºå¾ªç¯å’Œ continue() è·³è¿‡æœ¬æ¬¡å¾ªç¯ã€‚\nforeachä¸‹é¢æ˜¯ foreach çš„åŸºæœ¬è¯­æ³•å½¢å¼ï¼Œè¿™ç§å½¢å¼åœ¨ä¹‹å‰çš„â€œéå†åˆ—è¡¨â€ç« èŠ‚å·²ç»ä½¿ç”¨åˆ°äº†ï¼š\nforeach(&lt;loop_var&gt; &lt;items&gt;)  &lt;commands&gt;endforeach()\n\nç¤ºä¾‹ï¼š\nset(MY_LIST 1 2 3 4 5 6 7)foreach(_ITEM $&#123;MY_LIST&#125;)  message(STATUS &quot;$&#123;_ITEM&#125;&quot;)endforeach()\n\nforeach è¿˜æ”¯æŒä¸‹é¢ä¸¤ç§è¯­æ³•å½¢å¼ï¼Œè¿™ä¸¤ç§å½¢å¼éƒ½ä¸éœ€è¦æŒ‡å®šåˆ—è¡¨ &lt;items&gt; å‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äº C è¯­è¨€ä¸­çš„ for è¯­å¥ï¼š\n# å¾ªç¯ [0 ~ &lt;stop&gt;]ï¼Œæ­¥é•¿ä¸º 1foreach(&lt;loop_var&gt; RANGE &lt;stop&gt;)# å¾ªç¯ [&lt;start&gt; ~ &lt;stop&gt;]ï¼Œæ­¥é•¿ä¸º &lt;step&gt;ï¼ˆå¯é€‰ï¼‰foreach(&lt;loop_var&gt; RANGE &lt;start&gt; &lt;stop&gt; [&lt;step&gt;])\n\nç¤ºä¾‹ï¼š\nforeach(_I RANGE 3)  message(STATUS &quot;$&#123;_I&#125;&quot;) # ä¾æ¬¡è¾“å‡º 0 1 2 3endforeach()foreach(_I RANGE 2 5)  message(STATUS &quot;$&#123;_I&#125;&quot;) # ä¾æ¬¡è¾“å‡º 2 3 4 5endforeach()foreach(_I RANGE 2 5 2)  message(STATUS &quot;$&#123;_I&#125;&quot;) # ä¾æ¬¡è¾“å‡º 2 4endforeach()\n\nwhilewhile çš„è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼Œå…¶ä¸­ &lt;condition&gt; ä¸ºçœŸæ—¶ï¼ˆå‚è€ƒ if æ¡ä»¶åˆ¤æ–­ç« èŠ‚ï¼‰ï¼Œæ‰§è¡Œä»£ç å—ä¸­çš„ commands å‘½ä»¤ã€‚\nwhile(&lt;condition&gt;)  &lt;commands&gt;endwhile()\n\nä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ while æ¥éå†åˆ—è¡¨ï¼š\nset(MY_LIST 1 2 3)list(LENGTH MY_LIST LIST_COUNT)set(INDEX 0)while(INDEX LESS LIST_COUNT)  list(GET MY_LIST $&#123;INDEX&#125; VALUE) # è·å– $&#123;INDEX&#125; ä½ç½®çš„å…ƒç´   message(STATUS &quot;element at $&#123;INDEX&#125; = $&#123;VALUE&#125;&quot;)  math(EXPR INDEX &quot;$&#123;INDEX&#125; + 1&quot;) # è‡ªå¢ INDEXendwhile()\n\nä¸Šé¢ç¤ºä¾‹ä¾æ¬¡è¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼š\nelement at 0 = 1element at 1 = 2element at 2 = 3\n\n\nå‡½æ•°å’Œå®å‡½æ•°ä½¿ç”¨ function å®šä¹‰å‡½æ•°ï¼š\nfunction(&lt;name&gt; [&lt;arg1&gt; ...])  &lt;commands&gt;endfunction()\n\nå‡½æ•°æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œè€Œå®æ²¡æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåœ¨å‡½æ•°ä½“é‡Œé¢å®šä¹‰çš„æ™®é€šå˜é‡é»˜è®¤åªèƒ½åœ¨å‡½æ•°ä½“ä¸­è¢«è®¿é—®ï¼Œé™¤éåœ¨å®šä¹‰æ—¶æŒ‡å®šäº† PARENT_SCOPE é€‰é¡¹ï¼Œæˆ–è€…æ”¹ä¸ºå®šä¹‰ç¼“å­˜å˜é‡ã€ç¯å¢ƒå˜é‡ã€‚\nå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°åæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œå¦‚æˆ‘ä»¬å®šä¹‰äº†åä¸º foo çš„å‡½æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨ foo()ã€Foo()ã€FOO() ç­‰å½¢å¼æ¥è°ƒç”¨ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å»ºè®®ä¿æŒä¸å‡½æ•°å®šä¹‰æ—¶çš„åç§°ä¸€è‡´ã€‚\nå‚æ•°å…³äºå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰å‡½æ•°æ—¶å°±æŒ‡å®šå„ä¸ªå‚æ•°çš„åç§°ï¼Œå¦‚ï¼š\nfunction(my_func NAME AGE)  message(STATUS &quot;name: $&#123;NAME&#125;&quot;) # name: jack   message(STATUS &quot;age: $&#123;AGE&#125;&quot;) # age: 18endfunction()my_func(&quot;jack&quot; 18)\n\nåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œè°ƒç”¨å‚æ•°ï¼ˆå®å‚ï¼‰çš„ä¸ªæ•°å¯ä»¥è¶…è¿‡å®šä¹‰çš„å‚æ•°ä¸ªæ•°ï¼ˆå½¢å‚ï¼‰ï¼Œä½†ä¸èƒ½å°‘äºå®šä¹‰çš„å‚æ•°ä¸ªæ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¶…å‡ºçš„å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å½¢å¼è·å–ï¼š\n\nä½¿ç”¨ ARGV0, ARGV1, ARGV2, ... å˜é‡è·å–å‡½æ•°çš„æ¯ä¸ªå‚æ•°ã€‚\nä½¿ç”¨ ARGV å˜é‡è·å–å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œé€šè¿‡ ARGN å˜é‡è·å–å‚æ•°çš„ä¸ªæ•°ã€‚\n\nè¿”å›å€¼ä½¿ç”¨ return() å¯ä»¥ä»å‡½æ•°ä½“ä¸­æå‰è¿”å›ï¼Œä½†ä¸èƒ½ç›´æ¥ä½¿ç”¨ return() å¸¦å‡ºè¿”å›å€¼ï¼Œéœ€è¦å€Ÿç”¨ set(&lt;variable&gt; &lt;value&gt; PARENT_SCOPE) æ–¹å¼ï¼Œæ¥é—´æ¥çš„å¸¦å‡ºè¿”å›å€¼ã€‚\nä¸‹é¢ç¤ºä¾‹æ¼”ç¤ºäº†å‡½æ•°çš„å®šä¹‰ã€è°ƒç”¨ã€å‚æ•°çš„è·å–ä»¥åŠè¿”å›å€¼çš„ç”¨æ³•ã€‚\nfunction(my_func NAME AGE)  message(STATUS &quot;name: $&#123;NAME&#125;&quot;) # name: jack  message(STATUS &quot;parameter count: $&#123;ARGC&#125;&quot;) # parameter count: 3  message(STATUS &quot;parameter list: $&#123;ARGV&#125;&quot;) # parameter list: jack;18;Hubei  message(STATUS &quot;parameter 0: $&#123;ARGV0&#125;&quot;) # parameter 0: jack  message(STATUS &quot;parameter 2: $&#123;ARGV1&#125;&quot;) # parameter 2: Hubei  set(FUNC_RET &quot;OK&quot; PARENT_SCOPE)endfunction()my_func(&quot;jack&quot; 18 &quot;Hubei&quot;)message(STATUS &quot;return value: $&#123;FUNC_RET&#125;&quot;) # return value: OK\n\nä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé™¤éœ€è¦ä¼ å…¥ä¸å®šä¸ªæ•°çš„å‚æ•°æƒ…å†µå¤–ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œå°±çº¦å®šå¥½äº†å‚æ•°åç§°å’Œè¿”å›å‚æ•°çš„åç§°ï¼Œå¦‚ä¸‹é¢ç¤ºä¾‹ï¼š\nfunction(my_func NAME AGE OUT_RET)  # ä½¿ç”¨ $&#123;NAME&#125; $&#123;AGE&#125; è®¿é—®å‚æ•°  message(STATUS &quot;name: $&#123;NAME&#125;&quot;) # name: jack  set(OUT_RET &quot;OK&quot; PARENT_SCOPE)endfunction()my_func(&quot;jack&quot; 18 OUT_RET)message(STATUS &quot;return value: $&#123;OUT_RET&#125;&quot;) # return value: OK\n\nå®ä½¿ç”¨ macro å®šä¹‰å®ï¼š\nmacro(&lt;name&gt; [&lt;arg1&gt; ...])  &lt;commands&gt;endmacro()\n\nCMake ä¸­çš„å®å’Œ C è¯­è¨€ä¸­çš„å®ä¸€æ ·ï¼Œæ˜¯åœ¨è°ƒç”¨å¤„è¿›è¡Œè¯­å¥æ›¿æ¢åå†æ‰§è¡Œï¼Œå› æ­¤åœ¨å®ä¸­ä½¿ç”¨ return() æ—¶è¦æ ¼å¤–å°å¿ƒï¼Œå¯èƒ½ä¼šç»ˆæ­¢æ•´ä¸ªè„šæœ¬çš„æ‰§è¡Œã€‚\nå»ºè®®ä¼˜å…ˆä½¿ç”¨å‡½æ•°ã€‚\nå­—ç¬¦ä¸²æ“ä½œå­—ç¬¦ä¸²æ“ä½œç”± string æŒ‡ä»¤æä¾›ï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£ã€‚\nå†…ç½®å˜é‡æœ¬èŠ‚åˆ—ä¸¾äº†åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨åˆ°çš„ CMake å†…ç½®å˜é‡ã€‚\n\nCMAKE_SOURCE_DIRå§‹ç»ˆå­˜å‚¨çš„æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ã€‚\n\nCMAKE_BINARY_DIRå§‹ç»ˆå­˜å‚¨çš„æ˜¯é¡¹ç›®çš„æ ¹æ„å»ºç›®å½•ã€‚\n\nPROJECT_SOURCE_DIRä¸ CMAKE_SOURCE_DIR ä¸€æ ·ï¼Œä¹Ÿå§‹ç»ˆå­˜å‚¨çš„æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œä½†è¯¥å˜é‡éœ€è¦ä½¿ç”¨ project åˆ›å»ºé¡¹ç›®ä»¥åï¼Œæ‰ä¼šè¢«å®šä¹‰ã€‚\n\nPROJECT_BINARY_DIRä¸ CMAKE_BINARY_DIR ä¸€æ ·ï¼Œä¹Ÿå§‹ç»ˆå­˜å‚¨çš„æ˜¯é¡¹ç›®çš„æ„å»ºç›®å½•ï¼Œä½†è¯¥å˜é‡éœ€è¦ä½¿ç”¨ project åˆ›å»ºé¡¹ç›®ä»¥åï¼Œæ‰ä¼šè¢«å®šä¹‰ã€‚\n\nCMAKE_CURRENT_SOURCE_DIRå­˜å‚¨çš„æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚\n\nCMAKE_CURRENT_BINARY_DIRä¸€ä¸ªå·¥ç¨‹ä¸­å¯èƒ½åŒ…æ‹¬å¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®çš„æ„å»ºç›®å½•ä¸åŒï¼Œè¯¥å˜é‡å­˜å‚¨çš„æ˜¯å½“å‰é¡¹ç›®çš„æ„å»ºç›®å½•ã€‚\n\nCMAKE_CURRENT_LIST_FILEå½“å‰è„šæœ¬ä»£ç æ‰€åœ¨æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚\n\nCMAKE_CURRENT_LIST_LINEå½“å‰è„šæœ¬ä»£ç æ‰€åœ¨è¡Œæ•°ã€‚\n\nCMAKE_MODULE_PATHé€šè¿‡è®¾ç½®æ”¹å˜å˜é‡ï¼Œå¯ä»¥æ§åˆ¶ CMake æŸ¥æ‰¾ .cmake æ–‡ä»¶çš„è·¯å¾„ï¼Œåœ¨ä½¿ç”¨ include æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡ä»¶åäº†ã€‚å¦‚ï¼š\nset(CMAKE_MODULE_PATH &quot;$&#123;CMAKE_SOURCE_DIR&#125;/cmake&quot;)include(utils)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“åœ¨ include ä¸­ä»…æŒ‡å®šäº†æ–‡ä»¶åæ—¶ï¼Œä¸èƒ½å†æ·»åŠ  .cmake æ‰©å±•åï¼Œå¦åˆ™ä¼šå¯¼è‡´æŸ¥æ‰¾ä¸åˆ°ç›¸åº”æ–‡ä»¶ã€‚\n\nWIN32åœ¨ Windows ç³»ç»Ÿä¸Šï¼Œå®šä¹‰è¯¥å˜é‡ï¼Œå€¼ä¸º 1ã€‚\n\nAPPLEåœ¨ Apple ç³»ç»Ÿä¸Šï¼Œå®šä¹‰è¯¥å˜é‡ï¼Œå€¼ä¸º 1ã€‚\n\nUNIXåœ¨ç±» UNIX ç³»ç»Ÿä¸Šï¼Œå®šä¹‰è¯¥å˜é‡ï¼Œå€¼ä¸º 1ã€‚\n\nCMAKE_SYSTEM_NAMEå½“å‰æ„å»ºæ‰€é€‰å®šç›®æ ‡ç³»ç»Ÿï¼Œä½†è¯¥å˜é‡éœ€è¦ä½¿ç”¨ project åˆ›å»ºé¡¹ç›®ä»¥åï¼Œæ‰ä¼šè¢«å®šä¹‰ã€‚\nè¯¥å˜é‡å¸¸è§çš„å€¼æœ‰ï¼šAndroidã€iOSã€Linuxã€FreeBSDã€MSYSã€Windowsã€Darwinï¼Œå®Œæ•´çš„åˆ—è¡¨è§ï¼šCMAKE_SYSTEM_NAMEã€‚\nif (CMAKE_SYSTEM_NAME STREQUAL &quot;Linux&quot;)  message(STATUS &quot;current platform: Linux &quot;)elseif (CMAKE_SYSTEM_NAME STREQUAL &quot;Windows&quot;)  message(STATUS &quot;current platform: Windows&quot;)elseif (CMAKE_SYSTEM_NAME STREQUAL &quot;FreeBSD&quot;)  message(STATUS &quot;current platform: FreeBSD&quot;)elseif (CMAKE_SYSTEM_NAME STREQUAL &quot;Darwin&quot;)  message(STATUS &quot;current platform: macOS&quot;)elseif (CMAKE_SYSTEM_NAME STREQUAL &quot;Android&quot;)  message(STATUS &quot;current platform: Android&quot;)elseif (CMAKE_SYSTEM_NAME STREQUAL &quot;iOS&quot;)  message(STATUS &quot;current platform: iOS&quot;)else ()  message(STATUS &quot;other platform: $&#123;CMAKE_SYSTEM_NAME&#125;&quot;)endif()\n\nMSVCå½“ç¼–è¯‘å™¨æ˜¯ Microsoft Visual C++ çš„æŸä¸ªç‰ˆæœ¬æˆ–æ¨¡æ‹Ÿ Visual C++ cl å‘½ä»¤è¡Œè¯­æ³•çš„å…¶ä»–ç¼–è¯‘å™¨æ—¶è®¾ç½®ä¸º trueã€‚\n\nMSVC_VERSIONæ­£åœ¨ä½¿ç”¨çš„ Microsoft Visual C&#x2F;C++ ç‰ˆæœ¬ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚å¦‚æœæ­£åœ¨ä½¿ç”¨æ¨¡æ‹Ÿ Visual C++ çš„ç¼–è¯‘å™¨ï¼Œåˆ™æ­¤å˜é‡å°†è®¾ç½®ä¸º _MSC_VER é¢„å¤„ç†å™¨å®šä¹‰æ‰€ç»™å®šçš„æ¨¡æ‹Ÿå·¥å…·é›†ç‰ˆæœ¬ã€‚\n\n\nç›®æ ‡çš„å±æ€§å±æ€§è°ƒè¯•åœ¨ä»‹ç»å¦‚ä½•è®¾ç½®ç›®æ ‡çš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹å¦‚ä½•è°ƒè¯•è¾“å‡ºç›®æ ‡å±æ€§ï¼Œæ–¹ä¾¿åœ¨å¼€å‘ä¸­æ£€æŸ¥å±æ€§è®¾ç½®æ˜¯å¦å‡ºé”™ã€‚\nä½¿ç”¨ CMakePrintHelpers æ¨¡å—æä¾› cmake_print_properties å‡½æ•°å¯ä»¥æ‰“å°è¾“å‡ºç›®æ ‡çš„å±æ€§ï¼Œè¯¥å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\ncmake_print_properties(&lt;TARGETS       [&lt;target1&gt; ...] |                        SOURCES       [&lt;source1&gt; ...] |                        DIRECTORIES   [&lt;dir1&gt; ...]    |                        TESTS         [&lt;test1&gt; ...]   |                        CACHE_ENTRIES [&lt;entry1&gt; ...]  &gt;                       PROPERTIES [&lt;prop1&gt; ...]         )\n\nä»¥æ‰“å°è¾“å‡ºç›®æ ‡çš„â€œåŒ…å«ç›®å½•â€å±æ€§ä¸ºä¾‹ï¼š\nadd_library(hello_cmake main.cpp)target_include_directories(hello_cmake PRIVATE &quot;include&quot;)include(CMakePrintHelpers)cmake_print_properties(TARGETS hello_cmake PROPERTIES INCLUDE_DIRECTORIES) \n\nè¾“å‡ºï¼š \nProperties for TARGET hello_cmake:  hello_cmake.INCLUDE_DIRECTORIES = &quot;D:/cmake-sample/hello_cmake/include&quot;\n\nåŒ…å«ç›®å½•ä½¿ç”¨ target_include_directories æŒ‡å®šç›®æ ‡åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•ã€‚æŒ‡å®šçš„ç›®å½•è·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è¯¥è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰è„šæœ¬æ–‡ä»¶çš„ã€‚\ntarget_include_directories(&lt;target&gt; [SYSTEM] [AFTER|BEFORE]  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])\n\nè¿™å°±ç›¸å½“äºåœ¨ Visual Studio ä¸­è®¾ç½®â€œé™„åŠ åŒ…å«ç›®å½•â€ã€‚\n\nå¯ä»¥é’ˆå¯¹ä¸€ä¸ªç›®æ ‡é‡å¤è°ƒç”¨ target_include_directoriesï¼Œä¼šæŒ‰ç…§è°ƒç”¨é¡ºåºä¾æ¬¡é™„åŠ åŒ…å«ç›®å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ BEFORE é€‰é¡¹ï¼Œå°†æœ¬æ¬¡è®¾ç½®çš„åŒ…å«ç›®å½•æ’å…¥åˆ°æœ€å‰é¢ã€‚\næˆ‘ä»¬éœ€è¦ç‰¹åˆ«èŠ±ç²¾åŠ›ç†è§£ INTERFACEã€PUBLICã€PRIVATE ä¸‰è€…çš„åŒºåˆ«ï¼Œè¿™ä¸‰è€…çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å…ˆæŒ‰ä¸‹ä¸è¡¨ï¼Œç¨åä»‹ç»ã€‚\nåœ¨ä½¿ç”¨ PUBLICã€PRIVATE è®¾ç½®åŒ…å«ç›®å½•æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® INCLUDE_DIRECTORIES å±æ€§ï¼›åœ¨ä½¿ç”¨ INTERFACE è®¾ç½®åŒ…å«ç›®å½•æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® INTERFACE_INCLUDE_DIRECTORIES å±æ€§ã€‚\nç¤ºä¾‹ï¼š\ntarget_include_directories(hello_cmake \tPUBLIC &quot;include&quot;\tPRIVATE &quot;./extern/jsoncpp&quot;)target_include_directories(hello_cmake BEFORE\tPUBLIC &quot;include&quot;\tPRIVATE &quot;./extern/rpclib&quot;)\n\né¢„ç¼–è¯‘å®ä½¿ç”¨ target_compile_definitions è®¾ç½®ç›®æ ‡çš„é¢„ç¼–è¯‘å®ã€‚\ntarget_compile_definitions(&lt;target&gt;  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])\n\nå¯ä»¥é’ˆå¯¹ä¸€ä¸ªç›®æ ‡é‡å¤è°ƒç”¨ target_compile_definitionsï¼Œé™„åŠ å¤šä¸ªé¢„ç¼–è¯‘å®ã€‚\nä½¿ç”¨ PUBLICã€PRIVATE è®¾ç½®åŒ…å«ç›®å½•æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® COMPILE_DEFINITIONS å±æ€§ï¼›ä½¿ç”¨ INTERFACE è®¾ç½®åŒ…å«ç›®å½•æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® INTERFACE_COMPILE_DEFINITIONS å±æ€§ã€‚\nç¤ºä¾‹ï¼š\n# å®šä¹‰2ä¸ªé¢„ç¼–è¯‘å®target_compile_definitions(hello_cmake\tPUBLIC USING_BOOST USING_THRIFT)# å†å®šä¹‰ä¸€ä¸ªé¢„ç¼–è¯‘å®target_compile_definitions(hello_cmake\tINTERFACE USING_ZLIB)\n\nä¾èµ–åº“ä½¿ç”¨ target_link_libraries æŒ‡ä»¤è®¾ç½®ç›®æ ‡çš„ä¾èµ–åº“ï¼Œè¯¥æŒ‡ä»¤æœ‰å¾ˆå¤šåŸå‹ï¼Œä½†å¸¸ç”¨çš„åŸå‹æœ‰ï¼š\ntarget_link_libraries(&lt;target&gt;                     [&lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...]                     [&lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...]...)\n\nitem å¯ä»¥æ˜¯å¦‚ä¸‹å‡ ç§ç±»å‹ï¼š\n\nlib æ–‡ä»¶çš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼ŒCMake ä¸ä¼šæ ¡éªŒæ–‡ä»¶æ˜¯å¦å­˜åœ¨\nå…¶ä»–çš„ CMake ç›®æ ‡ã€‚\nè¡¨è¾¾å¼ç”Ÿæˆå™¨ï¼ˆè§â€œç”Ÿæˆå™¨è¡¨è¾¾å¼â€ç« èŠ‚ï¼‰ã€‚\nä»¥ - å¼€å¤´çš„é“¾æ¥æ ‡å¿—ï¼Œä½†ä» CMake 3.13 ç‰ˆæœ¬å¼€å§‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ target_link_options() æ›¿ä»£ã€‚\n\nå¯ä»¥é’ˆå¯¹ä¸€ä¸ªç›®æ ‡é‡å¤è°ƒç”¨ target_link_librariesï¼Œé™„åŠ å¤šä¸ªä¾èµ–åº“ã€‚\n&lt;PRIVATE|PUBLIC|INTERFACE&gt; å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™é»˜è®¤ä¸º PUBLICã€‚\nä½¿ç”¨ PUBLICã€PRIVATE è®¾ç½®ä¾èµ–åº“æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® LINK_LIBRARIES å±æ€§ï¼›ä½¿ç”¨ INTERFACE è®¾ç½®ä¾èµ–åº“æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® INTERFACE_LINK_LIBRARIES å±æ€§ã€‚\nINTERFACEã€PUBLIC å’Œ PRIVATEINTERFACEã€PUBLIC å’Œ PRIVATE ç”¨äºæŒ‡å®šå±æ€§çš„å¯è§æ€§ä¼ é€’æ–¹æ¡ˆã€‚\n\n\n\nç›®æ ‡ç±»å‹\nå¯è§æ€§ä¼ é€’\nè‡ªèº«æ˜¯å¦åº”ç”¨è¯¥å±æ€§\nä½¿ç”¨è€…æ˜¯å¦åº”ç”¨è¯¥å±æ€§\n\n\n\nå¯æ‰§è¡Œæ–‡ä»¶\nINTERFACE\nå¦\nå¦ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ä¸å­˜åœ¨ä½¿ç”¨è€…ï¼‰\n\n\nå¯æ‰§è¡Œæ–‡ä»¶\nPUBLIC\næ˜¯\nå¦ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ä¸å­˜åœ¨ä½¿ç”¨è€…ï¼‰\n\n\nå¯æ‰§è¡Œæ–‡ä»¶\nPRIVATE\næ˜¯\nå¦ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ä¸å­˜åœ¨ä½¿ç”¨è€…ï¼‰\n\n\nåº“ï¼ˆåŠ¨æ€æˆ–é™æ€ï¼‰\nINTERFACE\nå¦\næ˜¯\n\n\nåº“ï¼ˆåŠ¨æ€æˆ–é™æ€ï¼‰\nPUBLIC\næ˜¯\næ˜¯\n\n\nåº“ï¼ˆåŠ¨æ€æˆ–é™æ€ï¼‰\nPRIVATE\næ˜¯\nå¦\n\n\nç¼–è¯‘å’Œé“¾æ¥é€‰é¡¹é€šè¿‡ target_compile_options æŒ‡ä»¤è®¾ç½®ç¼–è¯‘é€‰é¡¹ã€‚\ntarget_compile_options(&lt;target&gt; [BEFORE]  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])\n\né€šè¿‡ target_link_options æŒ‡ä»¤è®¾ç½®é“¾æ¥é€‰é¡¹ã€‚\ntarget_link_options(&lt;target&gt; [BEFORE]  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])\n\nè¿™ä¸¤ä¸ªæŒ‡ä»¤çš„ç”¨æ³•ä¸å‰é¢ä»‹ç»çš„ target_include_directories ç±»ä¼¼ã€‚\nç¤ºä¾‹ï¼š\n# ç¼–è¯‘é€‰é¡¹target_compile_options(my_lib PRIVATE /utf8)# é“¾æ¥é€‰é¡¹target_link_options(app PRIVATE /NOLOGO)\n\nå…¶ä»–å±æ€§CMake ä¸ºç›®æ ‡è¿˜æä¾›äº†å…¶ä»–å±æ€§ï¼Œè¯¦è§ target-properties ï¼Œæ€»è®¡çº¦æœ‰ 400 å¤šä¸ªï¼Œæ¶µç›–äº†å¼€å‘ä¸­ä¼šç”¨åˆ°çš„ç»å¤§å¤šæ•°å±æ€§ï¼Œä¾‹å¦‚å…¶ä¸­ä»¥ VS_ å¼€å¤´çš„å±æ€§æ˜¯ä¸“é—¨ä¸º Visual Studio æ‰€å‡†å¤‡çš„ã€‚\né’ˆå¯¹è¿™äº›å±æ€§ï¼Œéœ€è¦ä½¿ç”¨ set_target_properties æŒ‡ä»¤è¿›è¡Œè®¾ç½®ã€‚\nä¾‹å¦‚ï¼Œä½¿ç”¨ OUTPUT_NAME å’Œ DEBUG_OUTPUT_NAME è®¾ç½®ç›®æ ‡çš„è¾“å‡ºæ–‡ä»¶åã€‚\nset_target_properties(zoe PROPERTIES \tOUTPUT_NAME Zoe\tDEBUG_OUTPUT_NAME Zoe-d)\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"],"tags":["CMake"]},{"title":"ç½‘ç»œåè®®(7)--HTTPä¸HTTPSåè®®","url":"/post/3654006375.html","content":"HTTP æ˜¯Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™ã€‚HTTP åè®®ä½äº TCP&#x2F;IP åè®®æ ˆçš„åº”ç”¨å±‚ã€‚\n\n\nHTTP åè®®ä»‹ç»ä»€ä¹ˆæ˜¯ HTTPHTTP æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼Œä¸»è¦ç”¨äºä»ä¸‡ç»´ç½‘ï¼ˆå³WWWï¼Œå…¨ç§° World Wide Webï¼‰æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨ä¹‹é—´çš„è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®çš„åè®®ã€‚å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨ç½‘é¡µæµè§ˆå™¨æˆ–è€…å…¶å®ƒçš„å·¥å…·å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚åˆ°æœåŠ¡å™¨ä¸ŠæŒ‡å®šç«¯å£ï¼ˆé»˜è®¤ç«¯å£ä¸º80ï¼‰ï¼ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œè¿”å›å“åº”å†…å®¹ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ç­‰ï¼‰ã€‚\nHTTP åè®®æ˜¯åŸºäº TCP åè®®æ¥è¿›è¡Œæ•°æ®ä¼ è¾“çš„ã€‚\nHTTP çš„ç‰ˆæœ¬HTTP åè®®å·²ç»æ¼”åŒ–å‡ºäº†å¾ˆå¤šç‰ˆæœ¬ï¼Œå®ƒä»¬ä¸­çš„å¤§éƒ¨åˆ†éƒ½æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚å®¢æˆ·ç«¯åœ¨è¯·æ±‚çš„å¼€å§‹å‘Šè¯‰æœåŠ¡å™¨å®ƒé‡‡ç”¨çš„åè®®ç‰ˆæœ¬å·ï¼Œè€Œåè€…åˆ™åœ¨å“åº”ä¸­é‡‡ç”¨ç›¸åŒæˆ–è€…æ›´æ—©çš„åè®®ç‰ˆæœ¬ã€‚ç°åœ¨å¤§å¤šä½¿ç”¨çš„éƒ½æ˜¯1.1ç‰ˆæœ¬ã€‚\n\n1.0 ç‰ˆæœ¬ï¼š HTTP åè®®éå¸¸è€çš„æ ‡å‡†ï¼Œä¸ºäº†æé«˜ç³»ç»Ÿçš„æ•ˆç‡ï¼ŒHTTP 1.0 è§„å®šæµè§ˆå™¨ä¸æœåŠ¡å™¨åªä¿æŒçŸ­æš‚çš„è¿æ¥ï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼ŒæœåŠ¡å™¨å®Œæˆè¯·æ±‚å¤„ç†åç«‹å³æ–­å¼€ TCP è¿æ¥ï¼ŒæœåŠ¡å™¨ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ã€‚æ­£å¼å› ä¸ºè¿™ç§ç‰¹æ€§é€ æˆäº†ä¸€äº›æ€§èƒ½ä¸Šçš„ç¼ºé™·ã€‚\n\n1.1 ç‰ˆæœ¬ï¼š å…‹æœäº† HTTP 1.0 çš„ç¼ºé™·ï¼ŒHTTP 1.1 æ”¯æŒæŒä¹…è¿æ¥ï¼ˆHTTP&#x2F;1.1 çš„é»˜è®¤æ¨¡å¼ä½¿ç”¨å¸¦æµæ°´çº¿çš„æŒä¹…è¿æ¥ï¼‰ï¼Œåœ¨ä¸€ä¸ª TCP è¿æ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ª HTTP è¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿æ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿã€‚åŒæ—¶è¿˜å¢åŠ æ›´å¤šçš„è¯·æ±‚å¤´å’Œå“åº”å¤´æ¥æ”¹è¿›å’Œæ‰©å…… HTTP 1.0 çš„åŠŸèƒ½ï¼ˆå¦‚ POST è¯·æ±‚å¤´å­—æ®µç­‰ï¼‰ã€‚\n\n2.0 ç‰ˆæœ¬ï¼š 2015 å¹´ 5 æœˆä½œä¸ºäº’è”ç½‘æ ‡å‡†æ­£å¼å‘å¸ƒã€‚ä¸»è¦æ–°å¢å¦‚ä¸‹ç‰¹æ€§ï¼šå¤šè·¯å¤ç”¨ï¼ŒäºŒè¿›åˆ¶åˆ†å¸§ï¼Œé¦–éƒ¨å‹ç¼©ï¼ŒæœåŠ¡ç«¯æ¨é€ã€‚\n\n\nHTTP æ¶ˆæ¯è¯·æ±‚URIã€URLã€URNé€šè¿‡ HTTP æˆ–è€… HTTPS åè®®è¯·æ±‚çš„èµ„æºç”±ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆUniform Resource Identifiersï¼ŒURIï¼‰æ¥æ ‡è¯†ã€‚æˆ‘ä»¬å¸¸ç”¨çš„æ˜¯ URLï¼Œé‚£ä¹ˆ URI, URL, URN ä¹‹å‰æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»äº†ï¼Ÿ\nURI = Uniform Resource Identifier ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦URL = Uniform Resource Locator    ç»Ÿä¸€èµ„æºå®šä½ç¬¦URN = Universal Resource Name     ç»Ÿä¸€èµ„æºåç§°\n\nä¸‰è€…å…³ç³»å¦‚ä¸‹å›¾ï¼š\nURIç”¨æ¥å”¯ä¸€æ ‡è¯†ç¬¦æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œæ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼ŒURIç”±URLå’ŒURNä¸¤ä¸ªå­é›†ç»„æˆã€‚\nURLé€šè¿‡æè¿°èµ„æºçš„ä½ç½®æ¥æ ‡è¯†èµ„æºã€‚\nURNé€šè¿‡èµ„æºçš„åå­—æ¥æ ‡è¯†èµ„æºï¼Œä¸å…¶æ‰€å¤„çš„ä½ç½®æ— å…³ï¼Œè¿™æ ·å³ä½¿èµ„æºçš„ä½ç½®å‘ç”Ÿå˜åŠ¨ï¼Œå…¶URNä¹Ÿä¸ä¼šå˜åŒ–ã€‚\nHTTP è§„èŒƒå°†æ›´é€šç”¨çš„æ¦‚å¿µ URI ä½œä¸ºå…¶èµ„æºæ ‡è¯†ç¬¦ï¼Œä½†æ˜¯å®é™…ä¸Šï¼ŒHTTP åº”ç”¨ç¨‹åºå¤„ç†çš„åªæ˜¯ URI çš„ URL å­é›†.\næ¶ˆæ¯è¯·æ±‚æ ¼å¼\nHTTP å¸¸è§çš„è¯·æ±‚æ–¹æ³•HTTP æ¶ˆæ¯è¯·æ±‚çš„ç¬¬ä¸€ä¸ªå­—æ®µå°±æ˜¯â€œè¯·æ±‚æ–¹æ³•â€ï¼ŒHTTP 1.1 ä¸­å®šä¹‰çš„å‡ ç§å¸¸è§çš„è¯·æ±‚æ–¹æ³•å¦‚ä¸‹ï¼ˆåªåˆ—å‡ºäº†å¸¸ç”¨çš„ï¼‰ï¼š\n\nGETå‘æœåŠ¡å™¨è·å–æ•°æ®ã€‚ä½¿ç”¨ GET è¯·æ±‚æ–¹æ³•æ—¶ï¼Œæ¶ˆæ¯ Body ä¸­æ²¡æœ‰â€œè¯·æ±‚æ•°æ®â€ï¼ˆè§ä¸Šé¢æ¶ˆæ¯æ ¼å¼çš„å›¾ï¼‰éƒ¨åˆ†ï¼Œæ‰€ä»¥å°†éœ€è¦æäº¤åˆ°æœåŠ¡å™¨çš„æ•°æ®æ”¾åœ¨ URL ä¸­ï¼Œå› æ­¤èƒ½å¤Ÿæäº¤åˆ°æœåŠ¡å™¨çš„æ•°æ®ä¼šå—åˆ° URL é•¿åº¦çš„é™åˆ¶ã€‚\n\n å„ä¸ªæµè§ˆå™¨å¯¹URLé•¿åº¦çš„é™åˆ¶å¦‚ä¸‹ï¼ˆè¿™äº›é™åˆ¶å€¼å¯èƒ½éšç€æµè§ˆå™¨çš„ç‰ˆæœ¬çš„æ›´æ–°è€Œå‘ç”Ÿæ”¹å˜ï¼Œä»…ä¾›å‚è€ƒï¼‰ï¼š1. IEæµè§ˆå™¨ï¼ˆMicrosoft Internet Explorerï¼‰ å¯¹URLé•¿åº¦é™åˆ¶æ˜¯2083ï¼ˆ2K+53ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œåˆ™è‡ªåŠ¨æˆªæ–­ï¼ˆè‹¥æ˜¯formæäº¤åˆ™æäº¤æŒ‰é’®ä¸èµ·ä½œç”¨ï¼‰ã€‚2. FirefoxFirefoxï¼ˆç«ç‹æµè§ˆå™¨ï¼‰å¯¹URLé•¿åº¦é™åˆ¶æ˜¯65536å­—ç¬¦ï¼Œä½†å®é™…ä¸Šæœ‰æ•ˆçš„URLæœ€å¤§é•¿åº¦ä¸å°‘äº100,000ä¸ªå­—ç¬¦ã€‚3. Chromechromeå¯¹URLé•¿åº¦é™åˆ¶æ˜¯8182ä¸ªå­—ç¬¦ã€‚4. SafariSafariå¯¹URLé•¿åº¦é™åˆ¶æ˜¯80000å­—ç¬¦ã€‚5. OperaOperaæµè§ˆå™¨å¯¹URLé•¿åº¦é™åˆ¶æ˜¯190000 å­—ç¬¦ã€‚\n\n\nPOSTå‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æäº¤çš„æ•°æ®åŒ…å«åœ¨ Body ä¸­ã€‚\n\nHTTP æ¶ˆæ¯å“åº”æ¶ˆæ¯å“åº”æ ¼å¼\n\nHTTP çŠ¶æ€ç çŠ¶æ€ä»£ç ç”±ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œå…±åˆ†äº”ç§ç±»åˆ«:\n1xxæ¶ˆæ¯â€”â€” è¯·æ±‚å·²è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œç»§ç»­å¤„ç†2xxæˆåŠŸ â€”â€” è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—3xxé‡å®šå‘ â€”â€” éœ€è¦åç»­æ“ä½œæ‰èƒ½å®Œæˆè¿™ä¸€è¯·æ±‚4xxè¯·æ±‚é”™è¯¯ â€”â€” è¯·æ±‚å«æœ‰è¯æ³•é”™è¯¯æˆ–è€…æ— æ³•è¢«æ‰§è¡Œ5xxæœåŠ¡å™¨é”™è¯¯ â€”â€” æœåŠ¡å™¨åœ¨å¤„ç†æŸä¸ªæ­£ç¡®è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯\n\nå¸¸è§çš„çŠ¶æ€ç æœ‰ï¼š\n200 OK                        //å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ400 Bad Request               //å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£401 Unauthorized              //è¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨403 Forbidden                 //æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡404 Not Found                 //è¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œæ¯”å¦‚ï¼šè¾“å…¥äº†é”™è¯¯çš„URL500 Internal Server Error     //æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯503 Server Unavailable        //ç”±äºè¶…è½½æˆ–ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡å™¨æš‚æ—¶çš„æ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚\n\n\nå…³äº HTTP çŠ¶æ€ç çš„å®Œæ•´å®šä¹‰è§ï¼šhttps://tools.ietf.org/html/rfc2616#page-39\n\nHTTPS ä¹‹å¯†ç å­¦åŸºç¡€å¯¹ç§°åŠ å¯†ç®—æ³•å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆè‹±æ–‡ï¼šSymmetric-key algorithmï¼‰æ˜¯æŒ‡å¯†ç å­¦ä¸­çš„ä¸€ç±»åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸ºï¼šç§é’¥åŠ å¯†ã€å…±äº«å¯†é’¥åŠ å¯†ã€‚è¿™ç±»ç®—æ³•åœ¨åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ï¼ˆæˆ–è€…è¿™ 2 ä¸ªå¯†é’¥å¯ä»¥é€šè¿‡ç®€å•çš„è§„åˆ™ç›¸äº’æ¨ç®—ï¼‰ã€‚â€œå¯¹ç§°åŠ å¯†ç®—æ³•â€æ¯”â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€é€Ÿåº¦æ›´å¿«ï¼Œä½†å¯¹ç§°åŠ å¯†ç®—æ³•çš„ä¸»è¦ç¼ºç‚¹åœ¨äºè¦æ±‚åŠ å¯†å’Œè§£å¯†çš„åŒæ–¹è·å–ç›¸åŒçš„å¯†é’¥ï¼Œè¿™æ ·åªè¦å¯†é’¥è¢«æ³„æ¼ï¼Œåˆ™å¯†æ–‡å°†ä¸å†å®‰å…¨ã€‚\n\nå¸¸è§çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ï¼š\n\nDES: Data Encryption Standard, æ•°æ®åŠ å¯†æ ‡å‡†ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œé€‚ç”¨äºåŠ å¯†å¤§é‡æ•°æ®çš„åœºåˆã€‚\n3DES: Triple DES, æ˜¯åŸºäº DESï¼Œå¯¹ä¸€å—æ•°æ®ç”¨ä¸‰ä¸ªä¸åŒçš„å¯†é’¥è¿›è¡Œä¸‰æ¬¡åŠ å¯†ï¼Œå¼ºåº¦æ›´é«˜ã€‚\nAES: Advanced Encryption Standard, é«˜çº§åŠ å¯†æ ‡å‡†ï¼Œæ˜¯ä¸‹ä¸€ä»£çš„åŠ å¯†ç®—æ³•æ ‡å‡†ï¼Œé€Ÿåº¦å¿«ï¼Œå®‰å…¨çº§åˆ«é«˜ã€‚\nBlowfish: ä¸€ä¸ª 64 ä½åˆ†ç»„åŠå¯å˜å¯†é’¥é•¿åº¦çš„å¯¹ç§°å¯†é’¥åˆ†ç»„å¯†ç ç®—æ³•ï¼Œå¯ç”¨æ¥åŠ å¯† 64 æ¯”ç‰¹é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚\nIDEA: åœ¨ DES ç®—æ³•çš„åŸºç¡€ä¸Šå‘å±•å‡ºæ¥çš„ï¼Œå¯†é’¥ä¸º 128 ä½ã€‚\nRC5\nRC6\n\néå¯¹ç§°åŠ å¯†ç®—æ³•â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€åˆç§°ä¸ºâ€œå…¬å¼€å¯†é’¥åŠ å¯†â€ï¼ˆè‹±è¯­ï¼špublic-key cryptographyï¼‰ã€‚ä¹Ÿä¸€ç§å¯†ç å­¦ç®—æ³•ç±»å‹ï¼Œåœ¨è¿™ç±»åŠ å¯†ç®—æ³•ä¸­ï¼Œéœ€è¦ä¸€ä¸ªâ€œå¯†é’¥å¯¹â€ï¼Œå³â€œç§é’¥â€å’Œâ€œå…¬é’¥â€ã€‚è¿™ä¸¤ä¸ªå¯†é’¥æ˜¯æ•°å­¦ç›¸å…³ï¼Œç”¨æŸä¸ªå¯†é’¥å¯¹çš„â€œç§é’¥â€åŠ å¯†çš„ä¿¡æ¯ï¼Œåªèƒ½ç”¨è¯¥å¯†é’¥å¯¹çš„â€œå…¬é’¥â€æ‰èƒ½è§£å¯†ã€‚åŒæ ·ï¼Œç”¨â€œå…¬é’¥â€åŠ å¯†çš„ä¿¡æ¯ï¼Œä¹Ÿåªèƒ½ç”¨è¯¥å¯†é’¥å¯¹çš„â€œç§é’¥â€æ‰èƒ½è§£å¯†ã€‚\nâ€œç§é’¥â€ä¸€èˆ¬éƒ½æ˜¯è‡ªå·±ä¿ç•™ï¼Œä¸é€éœ²ç»™ä»–äººï¼›è€Œâ€œå…¬é’¥â€å¯ä»¥å…¬å¼€ç»™ä»–äººã€‚\nâ€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€æ¯”â€œå¯¹ç§°åŠ å¯†ç®—æ³•â€å®‰å…¨æ€§æ›´é«˜ï¼Œä¸ç”¨æ‹…å¿ƒåŠ å¯†å¯†é’¥çš„æ³„æ¼ï¼Œå› ä¸ºâ€œå…¬é’¥â€æ˜¯å…¬å¼€çš„ï¼Œä¸å­˜åœ¨æ³„æ¼ã€‚ä½†â€œç§é’¥â€è¿˜æ˜¯è¦ä¿å­˜å¦¥å½“ï¼Œä¸èƒ½æ³„éœ²ç»™ä»–äººï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦åœ¨ç½‘ç»œä¸Šä¼ è¾“â€œç§é’¥â€ï¼Œæ‰€ä»¥â€œç§é’¥â€æ³„éœ²çš„å¯èƒ½æ€§ä¼šå°å¾ˆå¤šã€‚\nä½†æ˜¯â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€æ¯”â€œå¯¹ç§°åŠ å¯†ç®—æ³•â€çš„è¿ç®—é€Ÿåº¦æ…¢å¾ˆå¤šï¼Œä¸€èˆ¬åœ¨æ•°æ®é‡æ¯”è¾ƒå°‘çš„æ—¶å€™é‡‡ç”¨â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€ã€‚\n\nå¦‚ä¸Šå›¾ï¼Œå› ä¸ºæå››çš„â€œå…¬é’¥â€æ˜¯å…¬å¼€çš„ï¼Œæ‰€ä»¥å¼ ä¸‰è¦ç»™æå››å‘é€ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨æå››çš„â€œå…¬é’¥â€æ¥åŠ å¯†ä¿¡æ¯ã€‚æå››æ”¶åˆ°å¯†æ–‡ä¿¡æ¯ä¹‹åå°±å¯ä»¥ä½¿ç”¨è‡ªå·±çš„â€œç§é’¥â€æ¥è§£å¯†ä¿¡æ¯ã€‚å› ä¸ºå…¶ä»–äººæ²¡æœ‰æå››çš„â€œç§é’¥â€ï¼Œæ‰€ä»¥å°±ç®—å¯†æ–‡ä¿¡æ¯è¢«ä»–äººæˆªè·ä¹Ÿæ— æ³•è§£å¯†ã€‚\nå¸¸è§çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ï¼š\n\nRSA: ç”± RSA å…¬å¸å‘æ˜ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒå˜é•¿å¯†é’¥çš„å…¬å…±å¯†é’¥ç®—æ³•ï¼Œéœ€è¦åŠ å¯†çš„æ–‡ä»¶å—çš„é•¿åº¦ä¹Ÿæ˜¯å¯å˜çš„ã€‚\nDSA: Digital Signature Algorithm, æ•°å­—ç­¾åç®—æ³•ï¼Œæ˜¯ä¸€ç§æ ‡å‡†çš„ DSSï¼ˆæ•°å­—ç­¾åæ ‡å‡†ï¼‰ã€‚\nECC: Elliptic Curves Cryptography, æ¤­åœ†æ›²çº¿å¯†ç ç¼–ç å­¦ã€‚\n\n\néå¯¹ç§°ç®—æ³•è™½ç„¶å®‰å…¨ï¼Œä½†è¿ç®—é€Ÿåº¦å¾ˆæ…¢ï¼Œè€Œå¯¹ç§°ç®—æ³•çš„é€Ÿåº¦è™½å¿«ï¼Œä½†åœ¨ç®¡ç†å’Œä¼ è¾“å¯†é’¥æ–¹é¢ä¼šå­˜åœ¨å®‰å…¨éšæ‚£ã€‚åœ¨å®é™…çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é‡‡ç”¨çš„æ–¹å¼æ˜¯ï¼šé‡‡ç”¨â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€ç®¡ç†â€œå¯¹ç§°åŠ å¯†ç®—æ³•â€çš„å¯†é’¥ï¼Œç„¶åç”¨â€œå¯¹ç§°åŠ å¯†ç®—æ³•â€åŠ å¯†æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å°±é›†æˆäº†ä¸¤ç±»åŠ å¯†ç®—æ³•çš„ä¼˜ç‚¹ï¼Œæ—¢å®ç°äº†åŠ å¯†é€Ÿåº¦å¿«çš„ä¼˜ç‚¹ï¼Œåˆå®ç°äº†å®‰å…¨æ–¹ä¾¿ç®¡ç†å¯†é’¥çš„ä¼˜ç‚¹ã€‚\n\nä½¿ç”¨ OpenSSL ç”Ÿæˆ RSA å…¬ç§é’¥å¯¹\n// ç”Ÿæˆ1024ä½çš„ç§é’¥openssl genrsa -out d:\\rsa_private.pem 1024// ç”Ÿæˆç§é’¥å¯¹åº”çš„å…¬é’¥openssl rsa -in d:\\rsa_private.pem -pubout -out d:\\ca_public.pem\n\ngit å®¢æˆ·ç«¯å®‰è£…æ–‡ä»¶ä¸­çš„æä¾›çš„ssh-keygen.exeå·¥å…·ä¹Ÿå¯ä»¥ç”¨æ¥ç”Ÿäº§éå¯¹ç§°åŠ å¯†çš„å…¬ç§é’¥å¯¹ã€‚\næ•£åˆ—å‡½æ•°æ•£åˆ—å‡½æ•°ï¼ˆè‹±æ–‡ï¼šHash Functionï¼‰æ˜¯å°†ä»»æ„é•¿åº¦çš„çš„è¾“å…¥è½¬åŒ–ä¸ºå®šé•¿è¾“å‡ºçš„ç®—æ³•ã€‚ç¼–ç¨‹ä¸­å¯¹æ•£åˆ—å‡½æ•°ä½¿ç”¨éå¸¸æ™®éï¼Œå¦‚MD5,ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•£åˆ—å‡½æ•°éƒ½é€‚ç”¨äºå¯†ç å­¦ã€‚å¯†ç å­¦çš„æ•£åˆ—å‡½æ•°å¿…é¡»åŒæ—¶å…·æœ‰å¦‚ä¸‹å‡ ä¸ªé¢å¤–çš„ç‰¹æ€§ï¼š\n\nå•å‘æ€§ï¼šç»™å®šä¸€ä¸ªæ•£åˆ—å€¼ï¼Œæ— æ³•åå‘æ‰¾åˆ°æˆ–è€…æ„é€ å‡ºç”Ÿæˆå®ƒçš„æ¶ˆæ¯ã€‚\næŠ—ç¢°æ’æ€§ï¼šç»™å®šä¸€ä¸ªæ¶ˆæ¯å’Œå®ƒçš„æ•£åˆ—å€¼ï¼Œæ— æ³•æ‰¾åˆ°å…·æœ‰ç›¸åŒæ•£åˆ—å€¼çš„ä¸åŒçš„æ¶ˆæ¯ã€‚\n\næ•£åˆ—å‡½æ•°æœ€å¸¸ç”¨çš„åœºåˆæ˜¯ä»¥ç´§å‡‘çš„æ–¹å¼æ¥å”¯ä¸€è¡¨ç¤ºå¤§é‡æ•°æ®ï¼Œå¦‚â€œæ•°å­—ç­¾åâ€ä¸­ç”¨åˆ°æ•£åˆ—å‡½æ•°ç”Ÿæˆæ‘˜è¦ä¿¡æ¯ç­‰ã€‚\nå¸¸è§çš„æ•£åˆ—å‡½æ•°ï¼š\n\nMD5ï¼š1991 å¹´å¯¹ MD4 çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œè¯¥ç®—æ³•ä¸å¯é€†ã€‚2004 å¹´ç‹å°äº‘ç­‰äººè¯æ˜äº†å®Œå…¨ç¢°æ’ï¼Œåœ¨ç†è®ºä¸Šè¯´æ˜ MD5 å¯ä»¥è¢«å®Œå…¨æ”»ç ´ï¼Œ2005 å¹´ï¼ŒLenstra ç­‰äººè¯æ˜äº†ç°å®ä¸­çš„ç¢°æ’ï¼Œå±•ç¤ºäº†ä¸¤å¼ å®Œå…¨ä¸åŒçš„è¯ä¹¦å´æ‹¥æœ‰åŒæ ·çš„ MD5 æ•£åˆ—å€¼ã€‚æ‰€ä»¥ï¼Œç›®å‰MD5å·²ç»ä¸å®‰å…¨äº†ã€‚\n SHA-1ï¼šSHA-1 åœ¨è®¸å¤šå®‰å…¨åè®®ä¸­å¹¿ä¸ºä½¿ç”¨ï¼ŒåŒ…æ‹¬ TLS å’Œ SSLã€PGPã€SSHã€S&#x2F;MIME å’Œ IPsecï¼Œæ›¾è¢«è§†ä¸ºæ˜¯ MD5 çš„åç»§è€…ï¼Œä½†å› ä¸ºåœ¨ç†è®ºåœ¨å·²ç»è¯æ˜ SHA1 å¯ä»¥è¢«ç ´è§£ï¼Œä½†é™åˆ¶äºè®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›æ‰€ä»¥ SHA-1 è¢«ç ´è§£è¿˜æ˜¯å¾ˆå›°éš¾ï¼Œæ‰€ä»¥ SHA-1 çš„å®‰å…¨æ€§å¦‚ä»Šè¢«å¯†ç å­¦å®¶ä¸¥é‡è´¨ç–‘ã€‚\nSHA-256ï¼šSHA-224ã€SHA-256ã€SHA-384ã€SHA-512 ä¸€èµ·å¹¶ç§°ä¸º SHA-2ï¼Œè‡³ä»Šå°šæ‰¾å‡ºå¯¹ SHA-2 æœ‰æ•ˆçš„ç ´è§£æ–¹æ³•ã€‚\n\næ•°å­—ç­¾åä¸æ•°å­—è¯ä¹¦æ•°å­—ç­¾åæ•°å­—ç­¾åï¼ˆè‹±æ–‡ï¼šDigital Signatureï¼‰ç±»ä¼¼äºæˆ‘ä»¬å†™åœ¨çº¸ä¸Šçš„æ‰‹å†™ç­¾åï¼Œå®ƒçš„è¯ç”Ÿä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š\n\nè¯æ˜è¯¥æ–‡ä»¶ï¼ˆæˆ–ä¿¡æ¯ï¼‰æ˜¯ç”±ä½ å‘é€çš„ã€‚\nè¯æ˜è¯¥æ–‡ä»¶ï¼ˆæˆ–ä¿¡æ¯ï¼‰æ²¡æœ‰è¢«ä»–äººç¯¡æ”¹è¿‡ã€‚\n\nå…¶å®ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­æ‰‹å†™ç­¾åçš„çº¸è´¨åˆåŒä¹Ÿæ˜¯é€šè¿‡å„ç§å½¢å¼è¾¾åˆ°ä¸Šé¢ 2 ä¸ªæ•ˆæœï¼ˆå¦‚ï¼šåˆåŒä¸€å¼å¤šä»½ï¼Œæ¯ä»½åˆåŒéƒ½æœ‰åŒæ–¹ç­¾åç­‰ï¼‰ã€‚\næ•°å­—ç­¾ååˆ©ç”¨äº†â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€ï¼Œç­¾åå’ŒéªŒè¯ç­¾åçš„è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼ˆå›¾ä¸­çš„â€œè®¤è¯â€éƒ¨åˆ†ä¸æ˜¯æ•°å­—ç­¾åå¿…é¡»çš„ï¼Œåœ¨â€œæ•°å­—è¯ä¹¦â€éƒ¨åˆ†ä¼šä»‹ç»ï¼‰ï¼š\nå‡è®¾â€œæå››â€è¦å‘é€ä¸€ä»½æ•°æ®ç»™â€œå¼ ä¸‰â€ï¼šå‘é€è€…â€œæå››â€å¯¹æ•°æ®ç”Ÿæˆæ‘˜è¦ä¿¡æ¯ï¼ˆæ‘˜è¦æ˜æ–‡Aï¼‰ï¼Œç„¶åä½¿ç”¨â€œæå››â€çš„â€œç§é’¥â€åŠ å¯†æ‘˜è¦ä¿¡æ¯ï¼›æ¥æ”¶è€…â€œå¼ ä¸‰â€æ”¶åˆ°åŠ å¯†çš„æ‘˜è¦ä¿¡æ¯ä¹‹åï¼š\n\nä½¿ç”¨â€œæå››â€çš„â€œå…¬é’¥â€å¯¹åŠ å¯†çš„æ‘˜è¦ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚è‹¥èƒ½è§£å¯†åˆ™è¯æ˜ç­¾åæ˜¯ç”±â€œæå››â€æ‰€ç­¾ï¼Œè¿™æ˜¯å› ä¸ºåªæœ‰â€œæå››â€çš„â€œç§é’¥â€åŠ å¯†çš„æ•°æ®æ‰èƒ½ç”±â€œæå››â€çš„â€œå…¬é’¥â€è§£å¯†ï¼Œè€Œåˆåªæœ‰â€œæå››â€æ‰æœ‰â€œæå››â€çš„â€œç§é’¥â€ã€‚\n\nå¹¶å°†æ•°æ®ä½¿ç”¨ç›¸åŒçš„æ‘˜è¦ç®—æ³•è‡ªå·±ä¹Ÿç”Ÿæˆä¸€ä»½æ‘˜è¦ä¿¡æ¯ï¼ˆæ‘˜è¦æ˜æ–‡Bï¼‰ï¼Œç„¶åæ¯”è¾ƒ A å’Œ Bã€‚è‹¥ä¸¤è€…ç›¸ç­‰ï¼Œåˆ™è¯æ˜äº†è¯¥æ•°æ®å†…å®¹æ²¡æœ‰è¢«ä»–äººç¯¡æ”¹è¿‡ã€‚\n\n\né€šè¿‡ä¸Šé¢çš„è¿‡ç¨‹æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š\n\næ•°å­—ç­¾åå…·æœ‰åˆæ³•æ€§çš„å‰ææ¡ä»¶æ˜¯ç”¨äºåŠ å¯†æ•£åˆ—å€¼çš„â€œç§é’¥â€æ²¡æœ‰è¢«æ³„éœ²ã€‚\næ•°å­—ç­¾åä¸è´Ÿè´£æ•°æ®çš„åŠ å¯†ï¼Œè‹¥è¦é˜²æ­¢æ•°æ®è¢«ä»–äººçª¥è§†ï¼Œåˆ™è¿˜è¦ç»“åˆå…¶ä»–æ‰‹æ®µï¼Œå¦‚ä½¿ç”¨æ¥æ”¶è€…çš„â€œå…¬é’¥â€å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ç­‰ã€‚\n\n\nå¦‚ä½•è·å–ç­¾åè€…çš„å…¬é’¥ï¼Ÿå¦‚ä½•ä¿è¯è·å¾—çš„å…¬é’¥å°±æ˜¯ç­¾åè€…çš„ï¼Œè€Œä¸æ˜¯ä»–äººçš„ï¼ŸåŸºäºè¿™äº›é—®é¢˜ï¼Œæ•°å­—ç­¾åéœ€è¦ç»“åˆåé¢ä»‹ç»çš„æ•°å­—è¯ä¹¦æ¥ä½¿ç”¨ï¼ˆä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„â€œè®¤è¯â€æ–‡ä»¶ï¼‰ã€‚\n\næ•°å­—è¯ä¹¦æœ‰äº†ä¸Šé¢çš„å…¬å¼€å¯†é’¥ç®—æ³•ï¼ˆä¹Ÿå°±æ˜¯â€œéå¯¹ç§°åŠ å¯†ç®—æ³•â€ï¼‰ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»–äººçš„å…¬å¼€å¯†é’¥ï¼ˆå…¬é’¥ï¼‰ä¸å…¶å®‰å…¨é€šä¿¡äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›æ‚¬è€Œæœªå†³çš„é—®é¢˜ï¼š\n\nå¦‚ä½•è·å–é‚£äº›ä»æœªè°‹é¢çš„äººçš„å…¬é’¥ï¼Ÿ\nå¦‚ä½•å­˜å‚¨å’ŒåŠé”€è¿™äº›å…¬é’¥ï¼Ÿ\nå¦‚ä½•ç¡®ä¿è·å–çš„å…¬é’¥å°±æ˜¯é‚£ä¸ªäººçš„ï¼Ÿ\n\nå…¬é’¥åŸºç¡€è®¾æ–½ï¼ˆpublic key infrastructure, ç®€ç§°KPIï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå»ºç«‹çš„ã€‚PKIçš„ç›®æ ‡å°±æ˜¯ä¸ºäº†å®ç°ä¸åŒæˆå‘˜åœ¨ä¸è§é¢çš„æƒ…å†µä¸‹è¿›è¡Œå®‰å…¨é€šä¿¡çš„ï¼Œæˆ‘ä»¬å½“å‰é‡‡ç”¨çš„ PKI æ¨¡å‹æ˜¯åŸºäºå¯ä¿¡çš„ç¬¬ä¸‰æ–¹æœºæ„ï¼Œä¹Ÿå°±æ˜¯â€œè¯ä¹¦é¢å‘æœºæ„â€ï¼ˆcertification authorityï¼Œç®€ç§°CAï¼‰ç­¾å‘çš„è¯ä¹¦ã€‚è¯ä¹¦ä¸­å­˜å‚¨äº†ä½¿ç”¨â€œè¯ä¹¦é¢å‘æœºæ„â€çš„ç§é’¥åŠ å¯†ä¹‹åçš„ç”³è¯·è€…çš„å…¬é’¥ä¿¡æ¯ã€‚\næ•°å­—è¯ä¹¦çš„ç”³è¯·æ•°å­—è¯ä¹¦éœ€è¦å‘â€œè¯ä¹¦é¢å‘æœºæ„â€æäº¤ç”³è¯·ï¼Œå¹¶é€šè¿‡å®¡æ ¸ä¹‹åæ‰èƒ½é¢å‘ã€‚å› ä¸ºæ•°å­—è¯ä¹¦ä¸­å­˜å‚¨çš„æ˜¯ç”³è¯·è€…çš„å…¬é’¥ï¼Œæ‰€ä»¥å¦‚æœç”³è¯·è€…çš„ç§é’¥ä¸¢å¤±æˆ–æ³„æ¼ï¼Œå°±éœ€è¦å‘â€œè¯ä¹¦é¢å‘æœºæ„â€ç”³è¯·æ³¨é”€è¯¥è¯ä¹¦ã€‚\nWebæœåŠ¡å™¨å‘CAç”³è¯·è¯ä¹¦çš„æµç¨‹å¤§è‡´å¦‚å›¾ï¼š\nâ€œè¯ä¹¦â€ä¸­ä¸»è¦åŒ…å«äº†ç»è¿‡â€œè¯ä¹¦é¢å‘æœºæ„â€çš„ç§é’¥åŠ å¯†è¿‡åçš„ç”³è¯·è€…çš„â€œå…¬é’¥â€ã€â€œè¯ä¹¦æœ‰æ•ˆæœŸâ€ã€â€œç”³è¯·è€…ä¿¡æ¯ï¼ˆå¦‚åŸŸåç­‰ï¼‰â€ã€‚æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒã€ŠHTTPS æƒå¨æŒ‡å—ã€‹ç¬¬ 3.3.1 ç« èŠ‚ã€‚\næ•°å­—è¯ä¹¦çš„éªŒè¯ä»¥â€œChrome æµè§ˆå™¨â€ä¸ºä¾‹ï¼šæµè§ˆå™¨ä¼šå†…ç½®å„å¤§è‘—åçš„â€œè¯ä¹¦é¢å‘æœºæ„â€çš„â€œå…¬é’¥â€ï¼Œå½“æ”¶åˆ° Web æœåŠ¡å™¨è¿”å›çš„â€œæœåŠ¡å™¨è¯ä¹¦â€åï¼ŒChrome ä¼šå°è¯•ä½¿ç”¨å†…ç½®çš„è¯¥â€œè¯ä¹¦é¢å‘æœºæ„â€çš„â€œå…¬é’¥â€æ¥è§£å¯†è¯¥è¯ä¹¦ï¼Œå¦‚æœèƒ½è§£å¯†åˆ™è¯´æ˜è¯¥è¯ä¹¦æ˜¯â€œè¯ä¹¦é¢å‘æœºæ„â€é¢å‘çš„ï¼Œä¸”æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡çš„ã€‚ç„¶åé€šè¿‡è§£å¯†æ‰€å¾—çš„â€œåŸŸåâ€ã€â€œè¯ä¹¦æœ‰æ•ˆæœŸâ€æ¥æ ¡éªŒè¯¥è¯ä¹¦æ˜¯å¦ä¸ºè¯¥ç½‘ç«™æ‰€æœ‰ï¼Œæ˜¯å¦è¿‡æœŸç­‰ã€‚\n\næœ¬æ–‡ä»‹ç»çš„åªæ˜¯â€œæ•°å­—è¯ä¹¦â€ç”³è¯·å’ŒéªŒè¯çš„åŸºæœ¬çš„æµç¨‹ï¼Œå®é™…æµç¨‹æ¯”è¿™ä¸ªå¤æ‚å¾ˆå¤šï¼Œå…³äºâ€œæ•°å­—è¯ä¹¦â€çš„ä¿¡æ¯ä»‹ç»å¯ä»¥å‚è€ƒã€ŠHTTPS æƒå¨æŒ‡å—ã€‹\n\nHTTPSåœ¨ HTTP è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹å‰æ²¡æœ‰è¿›è¡Œèº«ä»½ç¡®è®¤ï¼Œè€Œä¸”ä¼ è¾“çš„æ•°æ®éƒ½æ²¡æœ‰åŠ å¯†å¤„ç†ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è¢«åŠ«æŒå’Œç¯¡æ”¹ã€‚\nåŸºäº HTTP åè®®çš„è¿™äº›å¼Šç«¯ï¼Œåé¢å°±å‡ºç°äº†HTTPSï¼ˆä¸¥æ ¼çš„è¯´ï¼ŒHTTPS å¹¶ä¸æ˜¯ä¸€ä¸ªåè®®ï¼Œæ‰€ä»¥å‰é¢æ–‡ç« éƒ½æ²¡æœ‰ä½¿ç”¨â€œHTTPS åè®®â€ï¼‰ï¼ŒHTTPS æ˜¯åŸºäºSSL/TSLåè®®çš„ï¼Œè¯´ç™½äº†å°±æ˜¯HTTP+SSL/TSLï¼Œå¯ä»¥æŠŠ HTTPS å¤§è‡´ç†è§£ä¸ºâ€œHTTP Over SSLâ€æˆ–è€…â€œHTTP Over TSLâ€ã€‚\nHTTP, SSL&#x2F;TSL, HTTPS çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š\nSSL&#x2F;TSL åè®®SSLSSLï¼ˆè‹±æ–‡ï¼šSecure Sockets Layerçš„ç¼©å†™ï¼‰ä¸­æ–‡å«â€œå®‰å…¨å¥—æ¥å±‚â€ã€‚æœ€å¼€å§‹ç”± NetScape å…¬å¸ç ”å‘ï¼Œç”¨ä»¥ä¿éšœäº’è”ç½‘ä¸Šæ•°æ®ä¼ è¾“çš„å®‰å…¨ï¼Œåˆ©ç”¨æ•°æ®åŠ å¯†æŠ€æœ¯ç¡®ä¿æ•°æ®åœ¨ç½‘ç»œä¸Šä¹‹ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šè¢«æˆªå–åŠçªƒå¬ã€‚SSL åè®®åœ¨ TCP&#x2F;IP åè®®æ ˆä¸­ä½äºä¼ è¾“å±‚å’Œåº”ç”¨å±‚ä¹‹é—´ã€‚ä»¥HTTPSä¸ºä¾‹ï¼ŒSSL åè®®å°±ä½äº TCP å’Œ HTTP ä¹‹é—´ï¼š\nTLSTLSï¼ˆè‹±æ–‡ï¼šTransport Layer Securityçš„ç¼©å†™ï¼‰ä¸­æ–‡å«â€œä¼ è¾“å±‚å®‰å…¨åè®®â€ï¼ŒTLS 1.0æ˜¯ IETFï¼ˆInternet Engineering Task Forceï¼ŒInternet å·¥ç¨‹ä»»åŠ¡ç»„ï¼‰åˆ¶å®šçš„ä¸€ç§æ–°çš„åè®®ï¼Œå®ƒå»ºç«‹åœ¨SSL 3.0åè®®è§„èŒƒä¹‹ä¸Šï¼Œæ˜¯SSL 3.0çš„åç»­ç‰ˆæœ¬ï¼Œå¯ä»¥ç†è§£ä¸º SSL 3.1ï¼Œå®ƒå®šä¹‰åœ¨RFC5246ä¸­ã€‚\nå› ä¸º TLS æ˜¯åŸºäº SSL 3.0 çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è®¤ä¸º TLS æ˜¯ SSL çš„åŠ å¼ºç‰ˆã€‚\næˆ‘ä»¬ä¸€èˆ¬å°†äºŒè€…å¹¶ç§°ä¸ºSSL/TSLåè®®ï¼Œå› ä¸ºè¿™äºŒè€…å¯ä»¥è§†ä¸ºåŒä¸€ä¸ªäº§å“çš„ä¸åŒé˜¶æ®µã€‚\nSSL&#x2F;TSL åè®®çš„æ¡æ‰‹è¿‡ç¨‹\nåœ¨äº†è§£ SSL&#x2F;TSL åè®®çš„æ¡æ‰‹è¿‡ç¨‹ä¹‹å‰ï¼Œéœ€è¦å…ˆé˜…è¯»å…³äº HTTPS çš„å‰å‡ ç¯‡æ–‡ç« ï¼Œå¯¹ç›¸å…³é¢„å¤‡çŸ¥è¯†æœ‰æ‰€äº†è§£ã€‚\n\n\nå‚è€ƒä¸Šé¢çš„æµç¨‹å›¾ï¼Œæ¡æ‰‹è¿‡ç¨‹å¯ä»¥åˆ†ä¸º 4 ä¸ªæ­¥éª¤ï¼š\n1). å®¢æˆ·ç«¯å‘é€ Client Hello è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š\n\nSSL æˆ– TSL åè®®çš„ç‰ˆæœ¬\n\nå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºä¸²Client randomï¼›\n\nå®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³•åˆ—è¡¨ï¼Œç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŠ å¯†ç®—æ³•çš„åå•†ï¼›\n\nå®¢æˆ·ç«¯æ”¯æŒçš„ HASH ç®—æ³•ï¼›\n2). æœåŠ¡ç«¯å‘é€ Sever Hello å“åº”åˆ°å®¢æˆ·ç«¯ï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š\n\næœåŠ¡ç«¯ç”Ÿæˆçš„éšæœºä¸²Server randomï¼ˆç¬¬ 3 æ­¥ä¼šç”¨åˆ°ï¼‰ï¼›\n\nç”±â€œCA è¯ä¹¦æœºæ„â€é¢å‘çš„è¯ä¹¦çš„Public keyéƒ¨åˆ†ï¼ˆPublic keyå’ŒPrivate Keyä¸ºä¸€å¯¹ï¼Œç”¨äºéå¯¹ç§°åŠ å¯†å’Œè§£å¯†ï¼‰ï¼›\n\nä¼šè¯ ID\n\nåå•†çš„åŠ å¯†ç®—æ³•ï¼ˆå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ï¼‰å’Œ HASH ç®—æ³•ã€‚\n3). å®¢æˆ·ç«¯å‘é€ Client Key åˆ°æœåŠ¡ç«¯ï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹æˆ–æ­¥éª¤ï¼š\n\næ£€æŸ¥æœåŠ¡ç«¯è¿”å›çš„â€œè¯ä¹¦â€çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœæ— æ•ˆåˆ™åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºè­¦å‘Šã€‚\n\nå®¢æˆ·ç«¯ä½¿ç”¨å‰ 2 æ­¥ç”Ÿæˆçš„Client randomå’ŒServer randomä½œä¸ºéšæœºå› å­ï¼Œç”Ÿæˆå¦å¤–ä¸€ä¸ªéšæœºä¸²Premasterã€‚\n\nä½¿ç”¨Public keyï¼ˆç¬¬ 2 æ­¥æœåŠ¡ç«¯è¿”å›ï¼‰éå¯¹ç§°åŠ å¯†çš„éšæœºä¸²Premasterã€‚\n4). æœåŠ¡ç«¯é€šçŸ¥å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š\n\né€šè¿‡è§£å¯†å‡ºæ¥çš„Premasterç”Ÿæˆçš„æœ¬æ¬¡ä¼šè¯çš„Session keyã€‚\n\nå‰é¢æ‰€æœ‰æ¡æ‰‹å†…å®¹çš„ HASH å€¼ï¼Œä¾›å®¢æˆ·ç«¯æ ¡éªŒã€‚\n\n\n\nå‚è€ƒï¼šhttp://www.ruanyifeng.com/blog/2014/02/ssl_tls.html &gt; http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\n\n\næ–‡ç« å›¾ç‰‡å¸¦æœ‰â€œCSDNâ€æ°´å°çš„è¯´æ˜ï¼šç”±äºè¯¥æ–‡ç« å’Œå›¾ç‰‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„CSDN åšå®¢ä¸­ï¼Œå› æ­¤å›¾ç‰‡è¢« CSDN è‡ªåŠ¨æ·»åŠ äº†æ°´å°ã€‚\n\n","categories":["â‘¢ç½‘ç»œç¼–ç¨‹å…¥é—¨åˆ°å®æˆ˜"],"tags":["ç½‘ç»œåè®®"]},{"title":"Vcpkgè¸©å‘å®å½•","url":"/post/1142527271.html","content":"æœ¬æ–‡è®°å½•åœ¨ä½¿ç”¨ Vcpkg æ—¶é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œä¸æˆç« æ³•å’Œä½“ç³»ã€‚\n\n\nå®‰è£… port å†å²ç‰ˆæœ¬å¦‚ä½•åœ¨ Vcpkg å‘½ä»¤è¡Œæ¨¡å¼ä¸‹å®‰è£… port æ—¶å¦‚ä½•æŒ‡å®šç‰ˆæœ¬ã€‚\næˆªè‡³ 2023-05-22ï¼švcpkg ä»…æ”¯æŒåœ¨ manifest æ¨¡å¼ä¸‹æŒ‡å®š port çš„ç‰ˆæœ¬ï¼Œåœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ä¸æ”¯æŒæŒ‡å®š port ç‰ˆæœ¬ã€‚\nä½¿ç”¨ Git å‘½ä»¤æŸ¥çœ‹å½“å‰ Vcpkg ä»“åº“çš„ baselineï¼š\ngit rev-parse HEAD\n\nåˆ›å»ºvcpkg_jsonç›®å½•ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºvcpkg.jsonæ–‡ä»¶ï¼ˆä»¥ openssl ä¸ºä¾‹ï¼‰ï¼š\n&#123;  &quot;name&quot;: &quot;cc&quot;,  &quot;version&quot;: &quot;1.0.1&quot;,  &quot;builtin-baseline&quot;: &quot;7b30311f0a79d395bf2d933d82fec1853c6a4e77&quot;,  &quot;dependencies&quot;: [    &#123;&quot;name&quot;: &quot;openssl&quot;&#125;  ],   &quot;overrides&quot;: [        &#123; &quot;name&quot;: &quot;openssl&quot;, &quot;version-string&quot;: &quot;1.1.1n#1&quot; &#125;    ]&#125;\n\n&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š\nvcpkg install --triplet &quot;x64-windows&quot; &quot;--x-manifest-root=D:\\vcpkg_json\\\\&quot; &quot;--x-install-root=D:CODE\\vcpkg\\installed\\\\&quot;\n\nè®¿é—® Github ç§æœ‰ä»“åº“Vcpkg é»˜è®¤åªæ”¯æŒä»å…¬å…±ä»£ç ä»“åº“è¿›è¡Œä¸‹è½½ç¼–è¯‘ï¼Œæœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Vcpkg ä»ç§æœ‰ä»“åº“è¿›è¡Œæºç ä¸‹è½½&#x2F;ç¼–è¯‘&#x2F;å®‰è£…ã€‚\nåœ¨ Github ä¸­æ·»åŠ  TOKEN\n\nåœ¨vcpkg\\portsç›®å½•ä¸‹ï¼Œæ‰¾åˆ°å¯¹åº”åº“çš„ portfile.cmake æ–‡ä»¶ï¼ŒåŠ å…¥AUTHORIZATION_TOKENå‚æ•°ã€‚\nvcpkg_from_github(    OUT_SOURCE_PATH SOURCE_PATH    REPO xxx/xxx    HEAD_REF main    AUTHORIZATION_TOKEN &quot;your github token&quot;)\n\nä½¿ç”¨ä»“åº“çš„æœ€æ–°ä»£ç åœ¨å‘ Vcpkg æäº¤ port æ—¶ï¼Œæˆ‘ä»¬ä¼šä¸æ–­åœ°å¯¹ä»“åº“è¿›è¡Œä¿®æ”¹å’Œè°ƒè¯•ã€‚å¦‚æœé‡‡ç”¨REFæ–¹å¼æŒ‡å®šæºç ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦ä¸æ–­åœ°ä¿®æ”¹ REF å’Œ SHA512ï¼Œè°ƒè¯•èµ·æ¥æ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨HEAD_REFçš„æ–¹å¼æ¥ç®€åŒ–è°ƒè¯•æµç¨‹ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;åœ¨portfile.cmakeæ–‡ä»¶ä¸­æŒ‡å®šHEAD_REFï¼Œå¦‚ï¼š\nvcpkg_from_github(    OUT_SOURCE_PATH SOURCE_PATH    REPO winsoft666/ashe    HEAD_REF main    AUTHORIZATION_TOKEN $ENV&#123;GITHUB_TOKEN&#125;)\n\nå®‰è£…æ—¶æŒ‡å®š--headå‚æ•°ï¼š\nvcpkg install ashe:x64-windows-static --head\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"],"tags":["Vcpkg"]},{"title":"Modern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸‹ï¼‰","url":"/post/201509401.html","content":"CMake æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ï¼ˆBuild-system Generatorï¼‰ã€‚\næœ¬æ–‡æ˜¯ Modern CMake ç®€æ˜æ•™ç¨‹ç³»åˆ—çš„ä¸‹ç¯‡ï¼Œä¸Šç¯‡è¯·ç§»æ­¥è‡³ ã€ŠModern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸Šï¼‰ã€‹ï¼Œä¸­ç¯‡è¯·ç§»æ­¥è‡³ ã€ŠModern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸­ï¼‰ã€‹ã€‚\næœ¬æ•™ç¨‹é»˜è®¤ CMake æœ€ä½ç‰ˆæœ¬ä¸º 3.16ï¼Œå³ cmake_minimum_required(VERSION 3.16)ã€‚\n\né›†æˆç¬¬ä¸‰æ–¹åº“åœ¨é¡¹ç›®ä¸­é›†æˆç¬¬ä¸‰æ–¹åº“æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„éœ€æ±‚ï¼ŒCMake æä¾›äº†ä¸¤ç§æ–¹å¼æ¥é›†æˆç¬¬ä¸‰æ–¹åº“ã€‚\nç¬¬ä¸€ç§ï¼šç›´æ¥é›†æˆç¬¬ä¸‰æ–¹åº“çš„æºç ã€‚\nè¯´åˆ°é›†æˆç¬¬ä¸‰æ–¹åº“çš„æºç ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å¯èƒ½å°±æ˜¯å°†å…¶æºç ç›´æ¥æ‹·è´åˆ°é¡¹ç›®ç›®å½•ä¸­ï¼Œç„¶åæäº¤åˆ° git ä»“åº“ï¼Œæ›´åŠ é«˜çº§ä¸€ç‚¹å¯èƒ½ä¼šä½¿ç”¨ git submodule çš„æ–¹å¼ã€‚ä½†æˆ‘ä»¥ä¸ºè¿™ä¸¤ç§æ–¹å¼éƒ½ä¸å¤Ÿä¼˜é›…ï¼Œæ— æ³•å¾ˆå¥½çš„ç®¡ç†ã€æ›´æ–°ä¾èµ–åº“ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¹ç›®çš„ä¾èµ–åº“çš„æ¯”è¾ƒå¤šæ—¶ã€‚\nCMake æä¾›äº†ä¸¤ä¸ªæ¨¡å—ï¼ˆä¸¤ç§æ–¹å¼ï¼‰æ¥é›†æˆç¬¬ä¸‰æ–¹åº“çš„æºç ï¼š\n\nFetchContentè¯¥æ¨¡å—æ”¯æŒåœ¨ CMake ç”Ÿæˆé¡¹ç›®æ—¶å°±ä¸‹è½½ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜ä¼šè‡ªåŠ¨å°†ç¬¬ä¸‰æ–¹åº“æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ add_subdirectoryã€‚\nExternalProjectè¯¥æ¨¡æ¿æ”¯æŒåœ¨æ„å»ºï¼ˆç¼–è¯‘ï¼‰é¡¹ç›®æ—¶ä¸‹è½½ç¬¬ä¸‰æ–¹åº“ã€‚æ˜¾ç„¶ ExternalProject çš„ä¸‹è½½æ—¶æœºè¦æ™šäº FetchContent ã€‚\n\nç¬¬äºŒç§ï¼šä½¿ç”¨é¢„ç¼–è¯‘å¥½çš„ç¬¬ä¸‰æ–¹åº“ã€‚\nè¿™ç§æ–¹å¼éœ€è¦å…ˆå•ç‹¬ç¼–è¯‘å®‰è£…ç¬¬ä¸‰æ–¹åº“ï¼Œç„¶åä½¿ç”¨ find_package æŸ¥æ‰¾è¯¥åº“ï¼Œæœ€åè®¾ç½®ç›®æ ‡çš„ç›¸å…³å±æ€§ï¼Œå¦‚åŒ…å«ç›®å½•ã€ä¾èµ–åº“ç­‰ã€‚\nFetchContentFetchContent çš„ä½¿ç”¨å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ã€‚\næ­¥éª¤ä¸€ï¼š ä½¿ç”¨ FetchContent_Declare å‘½ä»¤è®°å½•è¦è·å–çš„å†…å®¹ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ FetchContent_Declare å‘½ä»¤æ¥è®°å½•è·å–å¤šä¸ªå†…å®¹ã€‚\nFetchContent_Declare çš„å®šä¹‰å¦‚ä¸‹ï¼š\nFetchContent_Declare(  &lt;name&gt;  &lt;contentOptions&gt;...  [EXCLUDE_FROM_ALL]  [SYSTEM]  [OVERRIDE_FIND_PACKAGE |   FIND_PACKAGE_ARGS args...])\n\nå…¶ä¸­ï¼Œ&lt;name&gt; å¯ä»¥æ˜¯ä»»ä½•ä¸å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¯¥åç§°ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä»…ä½¿ç”¨å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚\nä¸‹é¢ç¤ºä¾‹åˆ†åˆ«æ¼”ç¤ºäº†å¦‚ä½•ä» Git ä»“åº“ã€httpsé“¾æ¥ã€SVNä»“åº“è·å–å†…å®¹ï¼š\nFetchContent_Declare(  googletest  GIT_REPOSITORY https://github.com/google/googletest.git  GIT_TAG        703bd9caab50b139428cea1aaff9974ebee5742e # release-1.10.0)FetchContent_Declare(  myCompanyIcons  URL      https://intranet.mycompany.com/assets/iconset_1.12.tar.gz  # ä¸‹è½½å®Œåï¼Œä¼šè‡ªåŠ¨è§£å‹  URL_HASH MD5=5588a7b18261c20068beabfb4f530b87)FetchContent_Declare(  myCompanyCertificates  SVN_REPOSITORY svn+ssh://svn.mycompany.com/srv/svn/trunk/certs  SVN_REVISION   -r12345)\n\næ­¥éª¤äºŒï¼š è°ƒç”¨ FetchContent_MakeAvailable å‘½ä»¤å¼€å§‹è·å–ä¸Šé¢å£°æ˜çš„å†…å®¹ã€‚\nå¦‚ï¼š\nFetchContent_MakeAvailable(googletest myCompanyIcons myCompanyCertificates)\n\nç»“æœå¦‚æœ FetchContent æ‰§è¡ŒæˆåŠŸï¼Œä¸‹é¢å‡ ä¸ªå˜é‡ä¼šè®¾ç½®ï¼š\n\n&lt;lowercaseName&gt;_POPULATEDå§‹ç»ˆè¢«è®¾ç½®ä¸º TRUE\n&lt;lowercaseName&gt;_SOURCE_DIRç›®æ ‡å†…å®¹çš„æºç ç›®å½•\n&lt;lowercaseName&gt;_BINARY_DIRç›®æ ‡å†…å®¹çš„æ„å»ºç›®å½•\n\nä½¿ç”¨ä»£ç†é™äºå›½å†…çš„ç½‘ç»œç¯å¢ƒï¼Œåœ¨è·å–å†…å®¹æ—¶ï¼Œå¾ˆå¯èƒ½å‡ºç°ä¸‹è½½å¤±è´¥çš„æƒ…å†µï¼Œæ­¤æ—¶å¯ä»¥å°è¯•ä½¿ç”¨ http å’Œ https ä»£ç†æ¥è§£å†³è¯¥é—®é¢˜ã€‚\né€šè¿‡è®¾ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡å³å¯è®¾ç½® http(s) ä»£ç†ï¼Œå¦‚ï¼š\nset(ENV&#123;http_proxy&#125; &quot;http://127.0.0.1:7890&quot;)set(ENV&#123;https_proxy&#125; &quot;http://127.0.0.1:7890&quot;)\n\nfind_packagefind_package ç”¨äºæŸ¥æ‰¾å·²ç»å®‰è£…åˆ°æœ¬æœºçš„åŒ…ï¼Œå°†æŸ¥æ‰¾ç»“æœå­˜å‚¨åœ¨ &lt;PackageName&gt;_FOUND å˜é‡ä¸­ï¼ˆæŸ¥æ‰¾åˆ°åŒ…ï¼Œå€¼ä¸º 1ï¼Œå¦åˆ™ ä¸º 0ï¼‰ï¼ŒåŒ…çš„å®‰è£…è·¯å¾„å­˜å‚¨åœ¨ &lt;PackageName&gt;_DIR å˜é‡ä¸­ï¼Œé€šå¸¸è¿˜ä¼šå®šä¹‰ä¸€äº›å˜é‡æ¥æŒ‡æ˜åŒ…çš„ç‰ˆæœ¬ã€å¤´æ–‡ä»¶ç›®å½•çš„è·¯å¾„ã€.lib æˆ– .a æ–‡ä»¶çš„è·¯å¾„ç­‰ï¼Œè¿™äº›å˜é‡åç§°çš„æ ¼å¼ä¼šæ ¹æ®æŸ¥æ‰¾æ–¹å¼çš„ä¸åŒã€åŒ…çš„ä¸åŒè€Œä¸åŒã€‚\nfind_package ä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œé€šå¸¸æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å®ƒçš„åŸºç¡€å®šä¹‰ï¼š\nfind_package(&lt;PackageName&gt; [&lt;version&gt;] [REQUIRED] [COMPONENTS &lt;components&gt;...])\n\n\n&lt;PackageName&gt;æŒ‡å®šåŒ…çš„åç§°ï¼Œæ˜¯å”¯ä¸€çš„å¿…é€‰å‚æ•°ã€‚\n&lt;version&gt;æŒ‡å®šéœ€è¦æŸ¥æ‰¾åŒ…çš„ç‰ˆæœ¬ï¼Œmajor[.minor[.patch[.tweak]]]ï¼Œæ”¯æŒå¤šç§å½¢å¼çš„ç‰ˆæœ¬ï¼Œå¦‚ 3ã€3.1ã€3.1.2 ç­‰ï¼Œå¯ä»¥æŒ‡å®šåŒ¹é…å¤§ç‰ˆæœ¬è¿˜æ˜¯å°ç‰ˆæœ¬åŒ¹é…ç­‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š EXACT é€‰é¡¹æ¥è¦æ±‚ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å®Œå…¨çœç•¥ç‰ˆæœ¬çº¦æŸã€‚\nREQUIREDå‚æ•°ç”¨äºæŒ‡å®šè¯¥åŒ…æ˜¯å¿…é¡»æ‰¾åˆ°ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™åœæ­¢æ‰§è¡Œè¯¥ CMake è„šæœ¬ã€‚\n\n\nfind_package çš„å®Œæ•´å®šä¹‰å¯ä»¥è§ï¼šfull-signature\n\nä¸‹é¢ç¤ºä¾‹ç”¨äºæŸ¥æ‰¾å¤§ç‰ˆæœ¬ä¸º 3 çš„ OpenCV åŒ…ï¼š\nfind_package(OpenCV 3 REQUIRED)message(STATUS &quot;OpenCV_DIR = $&#123;OpenCV_DIR&#125;&quot;)message(STATUS &quot;OpenCV_INCLUDE_DIRS = $&#123;OpenCV_INCLUDE_DIRS&#125;&quot;)message(STATUS &quot;OpenCV_LIBS = $&#123;OpenCV_LIBS&#125;&quot;)\n\nä¸åŒçš„æŸ¥æ‰¾æ¨¡å¼find_package æœ‰ä¸¤ç§æŸ¥æ‰¾åŒ…çš„æ–¹å¼ï¼Œä¼˜å…ˆä½¿ç”¨ Module æ¨¡å¼ï¼Œå¦‚æœ Module æ¨¡å¼æ²¡æœ‰æŸ¥æ‰¾åˆ°ï¼Œå†ä½¿ç”¨ Config æ¨¡å¼æŸ¥æ‰¾ã€‚\nModule æ¨¡å¼find_package ä½¿ç”¨ Module æ¨¡å¼æŸ¥æ‰¾åŒ…å°±æ˜¯æŸ¥æ‰¾ Find&lt;PackageName&gt;.cmake æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œä¼šå°è¯•åœ¨ä¸‹é¢ä½ç½®ä¸­æŸ¥æ‰¾è¯¥æ–‡ä»¶ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼š\n\nCMAKE_PREFIX_PATHè¯¥å˜é‡æ˜¯ä»¥åˆ†å·åˆ†éš”çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºï¼Œç”±ç”¨æˆ·è®¾ç½®ï¼›ä¹Ÿå¯ä»¥å®šä¹‰ç¯å¢ƒå˜é‡ CMAKE_PREFIX_PATHï¼Œç¯å¢ƒå˜é‡ $ENV{CMAKE_PREFIX_PATH} å®šä¹‰çš„åˆ—è¡¨ä¼šé™„åŠ åˆ° ${CMAKE_PREFIX_PATH} å˜é‡çš„åé¢ã€‚\nCMAKE_MODULE_PATH è¯¥å˜é‡ä¹Ÿæ˜¯ä»¥åˆ†å·åˆ†éš”çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºï¼Œç”±ç”¨æˆ·è®¾ç½®ã€‚\n\nFind&lt;PackageName&gt;.cmake æ–‡ä»¶ä»ä½•è€Œæ¥ï¼Ÿ\nå¦‚æœä½ æ˜¯åº“çš„å¼€å‘è€…ï¼Œä½ æ˜¯ä¸éœ€è¦æä¾› Find&lt;PackageName&gt;.cmake æ–‡ä»¶çš„ï¼Œä½ åªéœ€è¦æŒ‰ç…§æ–‡ç«  Modern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸­ï¼‰ â€œå®‰è£…å¯¼å‡ºä¾èµ–é¡¹â€ç« èŠ‚ä»‹ç»çš„é‚£æ ·ï¼Œåœ¨å®‰è£…æ—¶ç”Ÿæˆ &lt;PackageName&gt;Config.cmakeï¼ˆæˆ– &lt;lowercasePackageName&gt;-config.cmake æ–‡ä»¶ï¼‰å³å¯ï¼Œè¯¥æ–‡ä»¶å¯ä»¥ç”¨äº find_package çš„ Config æ¨¡å¼æŸ¥æ‰¾ã€‚\nå¯¹äºé‚£äº›æ²¡æœ‰æŒ‰ç…§è§„èŒƒæä¾›ä¸Šè¿° Config æ–‡ä»¶çš„åº“ï¼Œæ‰éœ€è¦ä½¿ç”¨è€…æ¥ç¼–å†™ Find&lt;PackageName&gt;.cmakeï¼Œè¾…åŠ©æŸ¥æ‰¾åŒ…çš„å®‰è£…è·¯å¾„ã€‚\nConfig æ¨¡å¼find_package æŒ‡ä»¤åœ¨å¤§å¤šæƒ…å†µä¸‹éƒ½æ˜¯é€šè¿‡ Config æ¨¡å¼æ¥æŸ¥æ‰¾åˆ°åŒ…çš„å…·ä½“ä½ç½®çš„ã€‚\nfind_package ä½¿ç”¨ Config æ¨¡å¼æŸ¥æ‰¾åŒ…å°±æ˜¯æŸ¥æ‰¾ &lt;PackageName&gt;Config.cmakeæˆ– &lt;lowercasePackageName&gt;-config.cmake æ–‡ä»¶çš„è¿‡ç¨‹ã€‚\nåœ¨ Config æ¨¡å¼ä¸‹ï¼Œ&lt;PackageName&gt; å¯ä»¥é€šè¿‡ NAMES å‚æ•°æ¥æŒ‡å®šå¤šä¸ªéœ€è¦åŒ¹é…æŸ¥æ‰¾çš„åŒ…åï¼ˆPackageNameï¼‰ï¼Œä¾‹å¦‚ä¸‹é¢æŸ¥æ‰¾ Qt5 æˆ– Qt6 çš„æ–¹å¼ï¼š\nfind_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Widgets)\n\nè€Œä¸”åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œfind_package æŸ¥æ‰¾ config æ–‡ä»¶çš„æ­¥éª¤ä¹Ÿéå¸¸å¤æ‚ï¼Œå°¤å…¶æ˜¯å¯ä»¥æ ¹æ®ä¸åŒå¼€å…³æ¥æŸ¥æ‰¾ä¸åŒçš„è·¯å¾„ï¼Œä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æŸ¥æ‰¾ config æ–‡ä»¶çš„ä½ç½®ï¼ˆå®Œæ•´çš„è§å®˜æ–¹æ–‡æ¡£ï¼‰ï¼ŒæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼š\n\n&lt;PackageName&gt;_DIR å˜é‡æˆ–ç¯å¢ƒå˜é‡æ‰€æŒ‡å®šçš„ç›®å½•ï¼Œé»˜è®¤ä¸ºç©ºã€‚\nCMAKE_PREFIX_PATHã€CMAKE_FRAMEWORK_PATHã€CMAKE_APPBUNDLE_PATH å˜é‡æˆ–ç¯å¢ƒå˜é‡æ‰€æŒ‡å®šçš„ç›®å½•ï¼Œè¯¥å˜é‡æ˜¯ä»¥åˆ†å·åˆ†éš”çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºã€‚\nPATH ç¯å¢ƒå˜é‡æ‰€æŒ‡å®šçš„ç›®å½•ï¼Œè¯¥å˜é‡æ˜¯ä»¥åˆ†å·åˆ†éš”çš„åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç³»ç»Ÿ PATH ç¯å¢ƒå˜é‡çš„å€¼ã€‚å¦‚æœè¯¥å˜é‡ä¸­çš„è·¯å¾„ä»¥ bin æˆ– sbin ç»“å°¾ï¼Œåˆ™è‡ªåŠ¨å›é€€åˆ°ä¸Šä¸€çº§ç›®å½•è¿›è¡ŒæŸ¥æ‰¾ã€‚\n\nä¸ Module æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œåœ¨ä¸Šè¿°å‡ ä¸ªä½ç½®ä¸­ï¼Œé™¤äº†ç¬¬ 1 ä¸ªæŒ‡å®šçš„ç›®å½•æ˜¯â€œæ ¹ç›®å½•â€ï¼ŒCMake åªä¼šåœ¨è¯¥ç›®å½•çš„æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾ &lt;PackageName&gt;Config.cmakeæˆ– &lt;lowercasePackageName&gt;-config.cmake æ–‡ä»¶ï¼Œä¸ä¼šè¿›å…¥å…¶å­ç›®å½•ä¸­æŸ¥æ‰¾ï¼Œå¦‚è®¾ç½® OpenCV_DIR ä¸º /home/jackï¼ŒCMake åªä¼šæŸ¥éªŒå¦‚ä¸‹æ–‡ä»¶ï¼š\n/home/jack/OpenCVConfig.cmake/home/jack/opencv-config.cmake\n\nè€Œç¬¬ 2ã€3 æ‰€æŒ‡å®šçš„ç›®å½•éƒ½æ˜¯â€œè·¯å¾„å‰ç¼€â€ï¼ŒCMake ä¸ä»…ä¼šåœ¨æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾ &lt;PackageName&gt;Config.cmakeæˆ– &lt;lowercasePackageName&gt;-config.cmake æ–‡ä»¶ï¼Œè¿˜ä¼šè¿›å…¥å…¶å­ç›®å½•å†…æŸ¥æ‰¾ã€‚å½“ç„¶ CMake ä¸ä¼šæ— è„‘çš„éå†æ‰€æœ‰å­ç›®å½•ï¼Œè€Œä¸”åªåœ¨ç‰¹å®šçš„å­ç›®å½•å†…è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¸åŒç³»ç»Ÿç¯å¢ƒä¸‹æ‰€æŸ¥æ‰¾çš„å­ç›®å½•ä¹Ÿä¸åŒï¼Œå…·ä½“å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\n\n\næŸ¥æ‰¾è·¯å¾„\nç³»ç»Ÿç¯å¢ƒ\n\n\n\n&lt;prefix&gt;/(cmake|CMake)/\nWindows\n\n\n&lt;prefix&gt;/&lt;name&gt;*/\nWindows\n\n\n&lt;prefix&gt;/&lt;name&gt;*/(cmake|CMake)/\nWindows\n\n\n&lt;prefix&gt;/&lt;name&gt;*/(cmake|CMake)/&lt;name&gt;*/\nWindows\n\n\n&lt;prefix&gt;/(lib/&lt;arch&gt;|lib*|share)/cmake/&lt;name&gt;*/\nUninx\n\n\n&lt;prefix&gt;/(lib/&lt;arch&gt;|lib*|share)/&lt;name&gt;*/\nUninx\n\n\n&lt;prefix&gt;/(lib/&lt;arch&gt;|lib*|share)/&lt;name&gt;*/(cmake|CMake)/\nUninx\n\n\n&lt;prefix&gt;/&lt;name&gt;*/(lib/&lt;arch&gt;|lib*|share)/cmake/&lt;name&gt;*/\nWindowsã€Uninx\n\n\n&lt;prefix&gt;/&lt;name&gt;*/(lib/&lt;arch&gt;|lib*|share)/&lt;name&gt;*/\nWindowsã€Uninx\n\n\n&lt;prefix&gt;/&lt;name&gt;*/(lib/&lt;arch&gt;|lib*|share)/&lt;name&gt;*/(cmake|CMake)/\nWindowsã€Uninx\n\n\nåœ¨ä¸Šè¡¨ä¸­ï¼Œ&lt;prefix&gt;å°±æ˜¯ç¬¬ 2ã€3 é¡¹æ‰€æŒ‡å®šçš„è·¯å¾„å‰ç¼€ï¼›&lt;name&gt; ä¸ºåŒ…åï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼Œ&lt;name&gt;* çš„æ„æ€æ˜¯åŒ…ååé¢è¿˜å¯ä»¥æ¥ä¸€äº›å­—ç¬¦ï¼Œå¦‚ OpenCV-3.0ã€‚\nç»“æœè·å–æ— è®ºæ˜¯å“ªç§æŸ¥æ‰¾æ¨¡å¼ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è·å–æŸ¥æ‰¾çš„ç»“æœã€‚ç›®å‰æˆ‘èƒ½ç¡®å®šçš„æ˜¯ï¼Œè¿™ä¸¤ç§æŸ¥æ‰¾æ¨¡å¼éƒ½ä¼šå®šä¹‰ &lt;PackageName&gt;_FOUND å’Œ &lt;PackageName&gt;_DIR å˜é‡ï¼Œå¯¹äºä¸åŒçš„åº“è¿˜ä¼šå®šä¹‰ä¸åŒçš„å˜é‡ï¼Œå¦‚ä½•çŸ¥é“ä»–ä»¬åˆ°åº•å®šä¹‰äº†å“ªäº›å˜é‡å‘¢ï¼Ÿ&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æˆ‘æœ‰ä¸€ä¸ªç²—æš´ä½†å¥½ç”¨çš„æ–¹æ³•ï¼šåœ¨è°ƒè¯•æ—¶ï¼Œéå†å½“å‰ CMake ä¸­çš„æ‰€æœ‰å˜é‡ã€‚\nä¸‹é¢ dump_all_variables å‡½æ•°ä¼šè¾“å‡ºå½“å‰ CMake çš„æ‰€æœ‰å˜é‡ï¼š\nfunction(dump_all_variables)    get_cmake_property(_VARS VARIABLES)    foreach (_V $&#123;_VARS&#125;)        message(STATUS &quot;&gt;&gt;&gt;&gt;&gt;&gt; $&#123;_V&#125; = $&#123;$&#123;_V&#125;&#125;&quot;)    endforeach()endfunction()\n\nä½¿ç”¨ï¼š\ndump_all_variables()\n\né›†æˆ Qtåœ¨é¡¹ç›®ä¸­é›†æˆ Qt åº“éœ€è¦å…ˆä½¿ç”¨ find_package æŸ¥æ‰¾ Qt çš„å®‰è£…ä½ç½®ã€‚å¯¹äº Qt4ï¼Œ CMake ä½¿ç”¨ Module æ¨¡å¼è¿›è¡ŒæŸ¥æ‰¾ï¼ˆFindQt4.cmake ç”± CMake æä¾›ï¼‰ï¼Œè€Œ å¯¹äº Qt5ã€Qt6ï¼Œåˆ™æ˜¯ä½¿ç”¨ Config æ¨¡å¼è¿›è¡ŒæŸ¥æ‰¾ï¼Œç›¸åº”çš„ config æ–‡ä»¶ä½äºç±»ä¼¼ä¸‹é¢çš„ç›®å½•ä¸­ D:\\Qt\\5.15.2\\msvc2019\\lib\\cmakeã€‚\nå…·ä½“ä»å“ªäº›ä½ç½®æŸ¥æ‰¾ Qtï¼Œå‚è§ä¸Šé¢çš„â€œfind_packageâ€ç« èŠ‚ã€‚\nç¤ºä¾‹ï¼š\nfind_package(Qt6 COMPONENTS Widgets DBus REQUIRED)add_executable(publisher publisher.cpp)target_link_libraries(publisher Qt6::Widgets Qt6::DBus)find_package(Qt5 COMPONENTS Gui DBus REQUIRED)add_executable(subscriber1 subscriber1.cpp)target_link_libraries(subscriber1 Qt5::Gui Qt5::DBus)find_package(Qt4 REQUIRED)add_executable(subscriber2 subscriber2.cpp)target_link_libraries(subscriber2 Qt4::QtGui Qt4::QtDBus)\n\nä¼—æ‰€å‘¨çŸ¥ï¼Œç¼–è¯‘ Qt ä»£ç éœ€è¦ä¾èµ– Qt æä¾›çš„ä¸€äº›å·¥å…·æ¥ç”Ÿæˆç›¸å…³çš„ C++ ä»£ç ï¼Œå¦‚ï¼š\n\nmocå…ƒå¯¹è±¡ç¼–è¯‘å™¨ï¼Œå°† Qt æ‰©å±•çš„ C++ è¯­æ³•ï¼ˆå¦‚ Q_OBJECTï¼‰è½¬æ¢æˆæ ‡å‡† C++ è¯­æ³•ã€‚\nrccæŠŠ .qrc èµ„æºæ–‡ä»¶ç¼–è¯‘æˆæ ‡å‡† C++ ä»£ç ã€‚\nuicæŠŠ .ui æ–‡ä»¶ç¼–è¯‘æˆæ ‡å‡† C++ ä»£ç ã€‚\n\nåœ¨ CMake ä¸­è¦ä½¿ç”¨è¿™äº›å·¥å…·å¹¶ä¸å¤æ‚ï¼Œåªéœ€è¦æå‰å¼€å¯ç›¸å…³ç‰¹æ€§ï¼ŒCMake å°±ä¼šè‡ªåŠ¨è°ƒç”¨ç›¸å…³å·¥å…·ã€‚\nset(CMAKE_AUTOMOC ON)set(CMAKE_AUTOUIC ON)set(CMAKE_AUTORCC ON)\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ CMake Qt é¡¹ç›®ç¤ºä¾‹ï¼Œè¯¥ç¤ºä¾‹ä»…ä½¿ç”¨äº† Qt çš„ QWidget æ¨¡å—ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;æºæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š\nCMakeLists.txtmain.cppmainwindow.cppmainwindow.hmainwindow.ui\n\nCMakeLists.txt å†…å®¹å¦‚ä¸‹ï¼š\ncmake_minimum_required(VERSION 3.16)project(hello_qt)set(CMAKE_AUTOUIC ON)set(CMAKE_AUTOMOC ON)set(CMAKE_AUTORCC ON)find_package(Qt5 REQUIRED COMPONENTS Widgets)add_executable(hello_qt    main.cpp    mainwindow.cpp    mainwindow.h    mainwindow.ui)target_link_libraries(hello_qt PRIVATE Qt5::Widgets)if(MSVC)    target_compile_options(hello_qt PRIVATE /execution-charset:utf-8)    set_target_properties(hello_qt PROPERTIES        WIN32_EXECUTABLE TRUE        VS_DEBUGGER_ENVIRONMENT &quot;PATH=$&#123;Qt5_DIR&#125;/../../../bin;%PATH%&quot;    )endif()install(TARGETS hello_qt)\n\nåœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œè®¾ç½®äº†å¯æ‰§è¡Œå­—ç¬¦é›†ä¸º utf-8ï¼Œè¿™ç§æ–¹å¼å¯ä»¥é˜²æ­¢ Qt åœ¨ MSVC ç¯å¢ƒä¸‹å‡ºç°ä¸­æ–‡ä¹±ç ï¼Œè¯¦è§ä¹‹å‰çš„æ–‡ç«  æ‹¨å¼€å­—ç¬¦ç¼–ç çš„è¿·é›¾ã€‚\nè®¾ç½® WIN32_EXECUTABLE å±æ€§æ˜¯ä¸ºäº†è®©é“¾æ¥å™¨ä½¿ç”¨ /SUBSYSTEM:WINDOWS å­ç³»ç»Ÿï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nè€Œè®¾ç½® VS_DEBUGGER_ENVIRONMENT å±æ€§æ˜¯ä¸ºäº†è®¾ç½® Visual Studio çš„è°ƒè¯•ç¯å¢ƒï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œç¡®ä¿åœ¨è°ƒè¯•æ—¶èƒ½æ‰¾åˆ° Qt çš„ç›¸å…³ dll æ–‡ä»¶ã€‚\n\n\nåœ¨ä¹‹å‰çš„ Modern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸Šï¼‰ ä¸­å·²ç»ä»‹ç»äº†ç›®æ ‡å±æ€§çš„è®¾ç½®ã€‚\n\nMSVCè®¾ç½® MSVC è¿è¡Œåº“MSVC çš„è¿è¡Œåº“æœ‰ MD &#x2F; MDd å’Œ MT &#x2F; MTd ä¹‹åˆ†ï¼Œä¸‹å›¾æ˜¯ Visual Studio ä¸­è®¾ç½®è¿è¡Œåº“çš„ç•Œé¢ã€‚\n\nCMake é’ˆå¯¹ MSVC ç¯å¢ƒé»˜è®¤ä½¿ç”¨çš„æ˜¯ MD &#x2F; MDd è¿è¡Œåº“ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹å¼å¯ä»¥å°†è¿è¡Œåº“è®¾ç½®ä¸º MT &#x2F; MTdï¼š\n# éœ€è¦ CMake 3.15 åŠä»¥ä¸Šç‰ˆæœ¬set(CMAKE_MSVC_RUNTIME_LIBRARY &quot;MultiThreaded$&lt;$&lt;CONFIG:Debug&gt;:Debug&gt;&quot;)\n\né¢„ç¼–è¯‘å¤´æ–‡ä»¶CMake åœ¨ 3.16 ç‰ˆæœ¬ä¸­æä¾›äº† target_precompile_headers æŒ‡ä»¤æ¥æ·»åŠ é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\ntarget_precompile_headers(&lt;target&gt;  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [header1...]  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [header2...] ...])\n\nåœ¨ 3.16 ç‰ˆæœ¬ä¹‹å‰ï¼Œéœ€è¦æ”¯æŒé¢„ç¼–è¯‘å¤´ï¼Œå¯ä»¥å‚è€ƒç½‘ç»œä¸Šçš„è§£å†³æ–¹æ¡ˆï¼š\nå®šä¹‰ USE_MSVC_PCH å®ï¼š\nmacro(USE_MSVC_PCH PCH_TARGET PCH_HEADER_FILE PCH_SOURCE_FILE)    if(MSVC)        # è·å–é¢„ç¼–è¯‘å¤´æ–‡ä»¶çš„æ–‡ä»¶åï¼Œé€šå¸¸æ˜¯stdafx        get_filename_component(PCH_NAME $&#123;PCH_HEADER_FILE&#125; NAME_WE)                # ç”Ÿæˆé¢„ç¼–è¯‘æ–‡ä»¶çš„è·¯å¾„        if(CMAKE_CONFIGURATION_TYPES)            # å¦‚æœæœ‰é…ç½®é€‰é¡¹ï¼ˆDebug/Releaseï¼‰ï¼Œè·¯å¾„æ·»åŠ ä»¥åŠé…ç½®é€‰é¡¹            SET(PCH_DIR &quot;$&#123;CMAKE_CURRENT_BINARY_DIR&#125;/PCH/$&#123;CMAKE_CFG_INTDIR&#125;&quot;)        else()            SET(PCH_DIR &quot;$&#123;CMAKE_CURRENT_BINARY_DIR&#125;/PCH&quot;)        endif()            # åˆ›å»ºé¢„ç¼–è¯‘æ–‡ä»¶çš„è·¯å¾„        file(MAKE_DIRECTORY $&#123;CMAKE_CURRENT_BINARY_DIR&#125;/PCH)            # è®¾ç½®é¡¹ç›®å±æ€§ï¼Œä½¿ç”¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶        set_target_properties($&#123;PCH_TARGET&#125; PROPERTIES COMPILE_FLAGS             &quot;/Yu$&#123;PCH_HEADER_FILE&#125; /FI$&#123;PCH_HEADER_FILE&#125; /Fp$&#123;PCH_DIR&#125;/$&#123;PCH_NAME&#125;.pch&quot;)            # é¢„ç¼–è¯‘æºæ–‡ä»¶ï¼ˆstdafx.cppï¼‰è®¾ç½®å±æ€§ï¼Œåˆ›å»ºé¢„ç¼–è¯‘æ–‡ä»¶        set_source_files_properties($&#123;PCH_SOURCE_FILE&#125; PROPERTIES COMPILE_FLAGS            &quot;/Yc$&#123;PCH_HEADER_FILE&#125;&quot;)                # æŠŠé¢„ç¼–è¯‘æ–‡ä»¶å¯„åˆ°æ¸…é™¤åˆ—è¡¨        set_directory_properties(PROPERTIES            ADDITIONAL_MAKE_CLEAN_FILES $&#123;PCH_DIR&#125;/$&#123;PCH_NAME&#125;.pch)    endif()endmacro()\n\nç„¶åä½¿ç”¨è¯¥å®æ·»åŠ é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼š\nUSE_MSVC_PCH(test_app stdafx.h stdafx.cpp)\n\nç›¸å…³èµ„æ–™https://github.com/ttroy50/cmake-examples\nhttps://github.com/Akagi201/learning-cmake\nhttps://github.com/KDE/extra-cmake-modules\nhttps://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1\nhttps://hsf-training.github.io/hsf-training-cmake-webpage/aio/index.html\nhttps://github.com/rpavlik/cmake-modules\nhttps://github.com/onqtam/awesome-cmake\nhttps://github.com/Lectem/cpp-boilerplate\nhttps://github.com/CLIUtils/modern_cmake\nhttps://github.com/dev-cafe/cmake-cookbook\nhttps://github.com/BrightXiaoHan/CMakeTutorial\nhttps://cliutils.gitlab.io/modern-cmake/\nhttps://cgold.readthedocs.io/en/latest/\nhttps://www.siliceum.com/en/blog/post/cmake_01_cmake-basics\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"],"tags":["CMake"]},{"title":"CMakeä¾èµ–åº“æŸ¥æ‰¾ç›¸å…³é—®é¢˜","url":"/post/2291877732.html","content":"å¦‚ä½•æŸ¥æ‰¾ Vcpkg å®‰è£…çš„ä¾èµ–åº“åœ¨ CMake å·¥å…·ä¸­æŒ‡å®šè·¨å¹³å°å·¥å…·é“¾ï¼Œå¦‚å›¾ï¼š\næŒ‡å®š Toolchain æ–‡ä»¶D:/sourcecode/vcpkg/scripts/buildsystems/vcpkg.cmakeã€‚\n\n\nå¦‚ä½•æŸ¥æ‰¾æœ¬æœºå®‰è£…çš„ Qt åº“è®¾ç½®ç¯å¢ƒå˜é‡CMAKE_PREFIX_PATHï¼Œå€¼ä¸º Qt çš„å®‰è£…ç›®å½•ï¼Œå¦‚C:\\Qt\\5.15.2\\msvc2019ï¼Œç„¶åå¯åŠ¨ CMake å³å¯ã€‚\nä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰¹å¤„ç†æ¥ä¸´æ—¶è®¾ç½®å’Œå¯åŠ¨ï¼š&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\n@echo offset CMAKE_PREFIX_PATH=C:\\Qt\\5.15.2\\msvc2019start &quot;&quot; &quot;C:\\Program Files\\CMake\\bin\\cmake-gui.exe&quot;\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"],"tags":["CMake","Vcpkg"]},{"title":"Modern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸­ï¼‰","url":"/post/2304457467.html","content":"CMake æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨ï¼ˆBuild-system Generatorï¼‰ã€‚\næœ¬æ–‡æ˜¯ Modern CMake ç®€æ˜æ•™ç¨‹ç³»åˆ—çš„ä¸­ç¯‡ï¼Œä¸Šç¯‡è¯·ç§»æ­¥ ã€ŠModern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸Šï¼‰ã€‹\næœ¬æ•™ç¨‹é»˜è®¤ CMake æœ€ä½ç‰ˆæœ¬ä¸º 3.16ï¼Œå³ cmake_minimum_required(VERSION 3.16)ã€‚\n\nç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸çŸ¥ä½ æ˜¯å¦æ€è€ƒè¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬åœ¨ç¼–è¯‘é¡¹ç›®æ—¶ï¼Œé€šå¸¸æœ‰ä¸åŒçš„é…ç½®ï¼Œå¦‚ Debug å’Œ Releaseï¼Œå¦‚ä½•åœ¨ä¸åŒçš„é…ç½®ä¸­å®šä¹‰ä¸åŒçš„é¢„ç¼–è¯‘å®ã€åŒ…å«ä¸åŒçš„ç›®å½•ã€ä¾èµ–ä¸åŒçš„åº“å‘¢ï¼Ÿ\nå…¶å®è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸å›°éš¾ï¼Œåªéœ€è¦ä½¿ç”¨åˆ° CMake ä¸­çš„ ç”Ÿæˆå™¨è¡¨è¾¾å¼ã€‚æˆ‘ä»¬åœ¨å¼€æºé¡¹ç›®çš„ CMake è„šæœ¬ä¸­ç»å¸¸çœ‹åˆ°çš„ $&lt;...&gt; è¿™æ ·çš„è¡¨è¾¾å¼å°±æ˜¯ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼Œä½†é€šå¸¸éƒ½ä¼šåµŒå¥—ä½¿ç”¨ï¼Œå¦‚ $&lt;$&lt;...&gt;:...&gt;ã€‚\nç”Ÿæˆå™¨è¡¨è¾¾å¼é€šå¸¸æœ‰ä¸‹é¢å‡ ç§å½¢å¼ï¼š\n\n$&lt;condition:true_string&gt;\n$&lt;IF:condition,true_string,false_string&gt;\n$&lt;BOOL:string&gt;\nç‰¹å®šçš„è¯­æ³•å½¢å¼ï¼Œå¦‚ $&lt;CONFIG:cfgs&gt; è¡¨ç¤ºå½“å‰é…ç½®å­˜åœ¨äº cfgs åˆ—è¡¨ä¸­æ—¶ï¼Œè¡¨è¾¾å¼ç»“æœä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚\n\nå‰ä¸‰ç§å½¢å¼æ¯”è¾ƒç®€å•ï¼Œæœ€åä¸€ç§å½¢å¼è™½ç„¶æœ‰å¤šç§ç±»å‹ï¼Œä½†æˆ‘ä»¬é€šå¸¸åªéœ€è¦è®°å¿†å‡ ç§å¸¸ç”¨çš„ï¼Œæœ‰éœ€è¦æ—¶æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚\n$&lt;condition:true_string&gt;condition åªå…è®¸ä¸º 0 æˆ– 1ï¼Œå…¶ä»–ä»»ä½•å€¼éƒ½ä¼šæŠ¥é”™ã€‚\nå½“ condition ä¸º 1 æ—¶ï¼Œè¡¨è¾¾å¼è¿”å› true_stringï¼›\nå½“ condition ä¸º 0 æ—¶ï¼Œè¡¨è¾¾å¼è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\nå¦‚ï¼š\nset(ENABLE_JSONCPP 1)target_include_directories(    my_lib PUBLIC     $&lt;$&#123;ENABLE_JSONCPP&#125;:$&#123;CMAKE_SOURCE_DIR&#125;/jsoncpp/include&gt;  )\n\n$&lt;IF:condition,true_string,false_string&gt;condition åªå…è®¸ä¸º 0 æˆ– 1ï¼Œå…¶ä»–ä»»ä½•å€¼éƒ½ä¼šæŠ¥é”™ã€‚\nå½“ condition ä¸º 1 æ—¶ï¼Œè¡¨è¾¾å¼è¿”å› true_stringï¼›\nå½“ condition ä¸º 0 æ—¶ï¼Œè¡¨è¾¾å¼è¿”å› false_stringã€‚\nå¦‚ä¸‹é¢ç¤ºä¾‹ï¼Œå½“è®¾ç½®äº† ENABLE_JSONCPP ä¸º 1 æ—¶ï¼ŒåŒ…å« jsoncpp å¤´æ–‡ä»¶ï¼Œå¦åˆ™åŒ…å« rapidjson å¤´æ–‡ä»¶ï¼š\nset(ENABLE_JSONCPP 1)target_include_directories(    my_lib PUBLIC     $&lt;IF:$&#123;ENABLE_JSONCPP&#125;,$&#123;CMAKE_SOURCE_DIR&#125;/jsoncpp/include,$&#123;CMAKE_SOURCE_DIR&#125;/rapidjson/include&gt;  )\n\n$&lt;BOOL:string&gt;å‰é¢ 2 ç§å½¢å¼çš„ condition éƒ½åªå…è®¸ä¸º 0 æˆ– 1ï¼Œè¿™ç§é™åˆ¶æœªå…æœ‰äº›å‘†æ¿ï¼Œå¦‚æœ ENABLE_JSONCPP çš„å€¼ä¸æ˜¯ 1 ï¼Œè€Œæ˜¯ ON æ—¶ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\næ­¤æ—¶å¯ä»¥ä½¿ç”¨ $&lt;BOOL:string&gt; å°†å…¶è½¬æ¢æˆ 0 æˆ– 1ã€‚\nä½•æ—¶è½¬æ¢æˆ 0ï¼Œä½•æ—¶è½¬æ¢æˆ 1ï¼Ÿå¯ä»¥å‚è€ƒå‰é¢çš„ã€ŠModern CMake ç®€æ˜æ•™ç¨‹ï¼ˆä¸Šï¼‰ã€‹ çš„â€œæ¡ä»¶åˆ¤æ–­â€ç« èŠ‚ï¼Œåœ¨è¯¥ç« èŠ‚ä¸­ä»‹ç»çš„æ‰€æœ‰ä¸ºå‡çš„æƒ…å†µéƒ½ä¼šè½¬æ¢æˆ 0ï¼Œå…¶ä»–æƒ…å†µåˆ™è½¬æ¢æˆ 1ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;è¯¥è¡¨è¾¾å¼çš„ä½œç”¨æ³¨å®šäº†å…¶å•ç‹¬ä½¿ç”¨æ„ä¹‰ä¸å¤§ï¼Œé€šå¸¸éƒ½æ˜¯å’Œå…¶ä»–è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚å°†ä¸Šé¢ç¤ºä¾‹ä¸­çš„ ENABLE_JSONCPP è®¾ç½®ä¸º ONï¼š\nset(ENABLE_JSONCPP ON)target_include_directories(    my_lib PUBLIC     $&lt;IF:$&lt;BOOL:$&#123;ENABLE_JSONCPP&#125;&gt;,$&#123;CMAKE_SOURCE_DIR&#125;/jsoncpp/include,$&#123;CMAKE_SOURCE_DIR&#125;/rapidjson/include&gt;  )\n\né€»è¾‘è¿ç®—è¿ç®—ç¬¦è¡¨è¾¾å¼ä¹Ÿæ”¯æŒä¸ã€æˆ–ã€éä¸‰ç§é€»è¾‘è¿ç®—ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\n$&lt;AND:conditions&gt;$&lt;OR:conditions&gt;$&lt;NOT:condition&gt;\n\nå…¶ä¸­ï¼Œcondition éƒ½åªå…è®¸æ˜¯ 0 æˆ– 1ï¼Œconditionsï¼ˆå¤æ•°å½¢å¼ï¼‰è¡¨ç¤ºå¯ä»¥æ˜¯ç”±é€—å·åˆ†å‰²çš„å¤šä¸ªæ¡ä»¶åˆ—è¡¨ã€‚\nå…¶ä»–å¸¸è§è¡¨è¾¾å¼æ¡ä»¶CMake è¿˜æ”¯æŒå¾ˆå¤šç±»å‹çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼Œä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„è¡¨è¾¾å¼ï¼Œè¿™äº›è¡¨è¾¾å¼é€šå¸¸éƒ½æ˜¯ç”¨æ¥ä½œä¸ºä¸Šé¢ä»‹ç»çš„è¡¨è¾¾å¼ä¸­çš„æ¡ä»¶ã€‚\n# å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œstring1 ä¸ string2 ç›¸ç­‰åˆ™ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;STREQUAL:string1,string2&gt;# æ•°å€¼æ¯”è¾ƒï¼Œç›¸ç­‰ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;EQUAL:value1,value2&gt;# ç‰ˆæœ¬æ¯”è¾ƒï¼Œv1 å°äº v2 æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;VERSION_LESS:v1,v2&gt;# å…¶ä»–ç‰ˆæœ¬æ¯”è¾ƒ$&lt;VERSION_GREATER:v1,v2&gt;$&lt;VERSION_EQUAL:v1,v2&gt;$&lt;VERSION_LESS_EQUAL:v1,v2&gt;$&lt;VERSION_GREATER_EQUAL:v1,v2&gt;# string å­˜åœ¨äº liståˆ—è¡¨ä¸­æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;IN_LIST:string,list&gt;# å½“å‰é…ç½®åç§°$&lt;CONFIG&gt;# å½“å‰é…ç½®å­˜åœ¨äºcfgsåˆ—è¡¨ä¸­æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;CONFIG:cfgs&gt;# å¹³å°IDï¼Œè§ CMAKE_SYSTEM_NAME$&lt;PLATFORM_ID&gt;# å½“å‰å¹³å°IDå­˜åœ¨äº platform_ids åˆ—è¡¨ä¸­æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;PLATFORM_ID:platform_ids&gt;# C++ç¼–è¯‘å™¨ç‰ˆæœ¬$&lt;CXX_COMPILER_VERSION&gt;# C++ç¼–è¯‘å™¨ç‰ˆæœ¬ä¸ version åŒ¹é…æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0# $&lt;CXX_COMPILER_VERSION:version&gt;# å½“å‰çš„C++ç¼–è¯‘å™¨ID$&lt;CXX_COMPILER_ID&gt;# å½“å‰çš„C++ç¼–è¯‘å™¨IDå­˜åœ¨äº compiler_ids åˆ—è¡¨ä¸­æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;CXX_COMPILER_ID:compiler_ids&gt;# ç›®æ ‡å­˜åœ¨æ—¶ä¸º 1ï¼Œåä¹‹ä¸º 0$&lt;TARGET_EXISTS:tgt&gt;# è¿”å›tgtç›®æ ‡çš„propå±æ€§çš„å€¼ï¼Œå¦‚æœæœªè®¾ç½®è¯¥å±æ€§ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²$&lt;TARGET_PROPERTY:tgt,prop&gt;# è¿”å›æ­£åœ¨è®¡ç®—è¡¨è¾¾å¼çš„ç›®æ ‡ä¸Šçš„propå±æ€§çš„å€¼ï¼Œå¦‚æœæœªè®¾ç½®è¯¥å±æ€§ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²$&lt;TARGET_PROPERTY:prop&gt;# å½“ä½¿ç”¨ install(EXPORT) å¯¼å‡ºå±æ€§æ—¶ï¼Œè¿”å› ... å†…å®¹ï¼Œå¦åˆ™è¿”å›ç©º$&lt;INSTALL_INTERFACE:...&gt;# å½“ä½¿ç”¨ export()å¯¼å‡ºå±æ€§æˆ–è€…è¢«åŒä¸€æ„å»ºç³»ç»Ÿå†…çš„å¦ä¸€ä¸ªç›®æ ‡ä½¿ç”¨æ—¶ï¼Œè¿”å› ... å†…å®¹ï¼Œå¦åˆ™è¿”å›ç©º$&lt;BUILD_INTERFACE:...&gt;\n\nè½¬ä¹‰å­—ç¬¦åœ¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸­å¦‚æœéœ€è¦ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨å…¶è½¬ç§»å­—ç¬¦ã€‚\n# &gt;$&lt;ANGLE-R&gt;# ,$&lt;COMMA&gt;# ;$&lt;SEMICOLON&gt;# &quot;# éœ€è¦ CMake &gt;= 3.30$&lt;QUOTE&gt;\n\nå®‰è£…ä¾ ä¹‰çš„â€œå®‰è£…â€æ˜¯å°†ç›®æ ‡ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶æ‹·è´åˆ°æŒ‡å®šä½ç½®ï¼ŒCMake ä¸­çš„å®‰è£…åŒ…å«ä½†ä¸é™äºæ‹·è´æ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ‰§è¡Œè„šæœ¬ã€ä¿®æ”¹æƒé™ç­‰æ“ä½œã€‚\nä¸Šé¢è¿™å¥è¯ä¸­ï¼Œæ¶‰åŠåˆ°äº†2ä¸ªæœ¯è¯­ï¼Œæœ‰å¿…è¦è§£é‡Šä¸€ä¸‹ã€‚\nâ€œç›®æ ‡ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶â€åœ¨ CMake ä¸­æœ‰ä¸ªå­¦åï¼Œå« Output Artifactsï¼Œç›´è¯‘ä¸ºè¾“å‡ºå·¥ä»¶ï¼Œæˆ‘æ›´æ„¿æ„å°†å…¶ç¿»è¯‘ä¸ºâ€œè¾“å‡ºå“â€ï¼Œä¸åŒç±»å‹çš„ç›®æ ‡æœ‰ä¸åŒçš„è¾“å‡ºå“ï¼Œä¾‹å¦‚åœ¨ Windows å¹³å°ä¸Šï¼Œå¯æ‰§è¡Œç¨‹åºè¾“å‡º .exe æ–‡ä»¶ï¼ŒåŠ¨æ€åº“è¾“å‡º .dll æ–‡ä»¶ï¼ˆä¹Ÿå¯èƒ½åŒ…å« .lib æ–‡ä»¶ï¼‰ï¼Œé™æ€åº“è¾“å‡º .lib æ–‡ä»¶â€¦..\n\nè¯·ç‰¢è®° Artifacts è¿™ä¸ªå•è¯ï¼Œåœ¨åé¢çš„å¾ˆå¤šå®šä¹‰ä¸­éƒ½ä¼šå‡ºç°è¯¥è¯ã€‚\n\nâ€œæŒ‡å®šä½ç½®â€ï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªå®‰è£…ä½ç½®ã€‚CMake ä¼šä» CMAKE_INSTALL_PREFIX å˜é‡ä¸­è¯»å–å®‰è£…ä½ç½®ï¼Œè¯¥å˜é‡æœ‰é»˜è®¤å€¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹è¯¥å˜é‡æ¥æ”¹å˜å®‰è£…ä½ç½®ã€‚\nåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šï¼ŒCMAKE_INSTALL_PREFIX çš„é»˜è®¤å€¼ä¸åŒï¼š\n\nWindows ç³»ç»Ÿï¼šC:/Program Files/$&#123;PROJECT_NAME&#125;å†™å…¥è¯¥ç›®å½•éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œå› æ­¤å¦‚æœå®‰è£…å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ˜¯å¦å…·æœ‰ç®¡ç†å‘˜æƒé™ã€‚\nUNIX ç³»ç»Ÿï¼š/usr/local\n\nCMAKE_INSTALL_PREFIX æŒ‡å®šçš„ä½ç½®æ˜¯å®‰è£…ç›®å½•çš„æ ¹ç›®å½•ï¼Œä¸åŒç±»å‹çš„è¾“å‡ºå“ä¼šå­˜æ”¾åœ¨å…¶ä¸åŒçš„å­ç›®å½•ä¸­ï¼Œå¦‚ .lib æ–‡ä»¶å­˜æ”¾åœ¨ lib ç›®å½•ï¼Œ.dll å’Œ .exe æ–‡ä»¶å­˜æ”¾åœ¨ bin ç›®å½•ï¼Œå¤´æ–‡ä»¶å­˜æ”¾åœ¨ include ç›®å½•ï¼Œè¿™äº›å­ç›®å½•çš„å…·ä½“åç§°å¯ä»¥é€šè¿‡ GNUInstallDirs æä¾›çš„è‹¥å¹²å˜é‡æ¥è·å–ï¼Œå¦‚ CMAKE_INSTALL_BINDIRã€CMAKE_INSTALL_LIBDIRã€CMAKE_INSTALL_INCLUDEDIR ç­‰ã€‚\nCMake å®šä¹‰äº†ä¸‹åˆ—å¸¸ç”¨çš„è¾“å‡ºå“ç§ç±»ï¼ˆartifact-kindï¼‰ï¼Œè¿™äº›ç§ç±»åœ¨åé¢çš„ install é€‰é¡¹ä¸­ä¼šä½¿ç”¨åˆ°ï¼š\n\nARCHIVEè¿™ç§ç±»å‹çš„è¾“å‡ºå“åŒ…å«ä¸‹åˆ—æ–‡ä»¶ï¼ˆé»˜è®¤ä½äº lib ç›®å½•ï¼‰ï¼š   \né™æ€åº“ï¼ŒWindows ä¸Šæ˜¯ .lib æ–‡ä»¶ï¼ŒLinux ä¸Šæ˜¯ .a æ–‡ä»¶ï¼Œä½†åœ¨ macOS ä¸Šæ ‡è®°ä¸º FRAMEWORK çš„é™¤å¤–ã€‚\nåŠ¨æ€åº“çš„å¯¼å…¥åº“ï¼Œå¦‚ .lib æ–‡ä»¶ã€‚\nåœ¨macOSç³»ç»Ÿä¸Šï¼Œä¸ºå¯ç”¨ ENABLE_EXPORTS çš„å…±äº«åº“æ‰€åˆ›å»ºçš„é“¾æ¥å™¨å¯¼å…¥æ–‡ä»¶ï¼ˆä½†æ ‡è®°ä¸º FRAMEWORK çš„æƒ…å†µé™¤å¤–ï¼‰ã€‚\n\n\nLIBRARYè¿™ç§ç±»å‹çš„è¾“å‡ºå“å¾ˆå°‘ç”¨åˆ°ã€‚\nRUNTIMEè¿™ç§ç±»å‹çš„è¾“å‡ºå“åŒ…å«ä¸‹æ¥æ–‡ä»¶ï¼ˆé»˜è®¤ä½äº bin ç›®å½•ï¼‰ï¼š   \nå„ä¸ªç³»ç»Ÿæ‰€æ”¯æŒçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ Windows ä¸Šçš„ .exeã€‚\nåŠ¨æ€åº“ï¼Œå¦‚ .dll å’Œ .so æ–‡ä»¶ã€‚\n\n\nOBJECTSä¸å¯¹è±¡åº“ï¼ˆä½¿ç”¨add_library(&lt;name&gt; OBJECT ...)æ–¹å¼å®šä¹‰ï¼‰å…³è”çš„å¯¹è±¡æ–‡ä»¶ã€‚\nFRAMEWORKåœ¨ macOS ä¸Šï¼Œæ ‡æœ‰ FRAMEWORK å±æ€§çš„é™æ€åº“å’Œå…±äº«åº“éƒ½è¢«è§†ä¸º FRAMEWORK ç±»å‹ã€‚\nBUNDLEåœ¨ macOS ä¸Šï¼Œæ ‡æœ‰ MACOSX_BUNDLE å±æ€§çš„å¯æ‰§è¡Œæ–‡ä»¶è¢«è§†ä¸º BUNDLE ç±»å‹ã€‚\nPUBLIC_HEADER  \nPRIVATE_HEADER\n\ninstallä½¿ç”¨ install æŒ‡ä»¤å¯ä»¥å®šä¹‰åœ¨å®‰è£…æ—¶éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œinstall å¯ä»¥å®šä¹‰å¾ˆå¤šç±»å‹çš„æ“ä½œï¼ŒåŒ…å«ä½†ä¸é™äºæ‹·è´è¾“å‡ºå“åˆ°æŒ‡å®šä½ç½®ã€æ‰§è¡Œè„šæœ¬ç­‰ã€‚\nä¸‹é¢æ˜¯ install æŒ‡ä»¤æ”¯æŒçš„è°ƒç”¨å½¢å¼ï¼š\ninstall(TARGETS &lt;target&gt;... [...])install(IMPORTED_RUNTIME_ARTIFACTS &lt;target&gt;... [...])install(&#123;FILES | PROGRAMS&#125; &lt;file&gt;... [...])install(DIRECTORY &lt;dir&gt;... [...])install(SCRIPT &lt;file&gt; [...])install(CODE &lt;code&gt; [...])install(EXPORT &lt;export-name&gt; [...])install(RUNTIME_DEPENDENCY_SET &lt;set-name&gt; [...])\n\né€šè¿‡æ‰§è¡Œ make install å‘½ä»¤æˆ–è€…ç¼–è¯‘ CMake ç”Ÿæˆçš„ INSTALL é¡¹ç›®ï¼Œå°±å¯ä»¥æ‰§è¡Œ install æŒ‡ä»¤é¢„å…ˆå®šä¹‰çš„å®‰è£…æ“ä½œã€‚\nä¸åŒçš„å®‰è£…å‘½ä»¤å®‰è£… Targetæ‰€è°“å®‰è£… Target å°±æ˜¯å°†ç›®æ ‡çš„è¾“å‡ºå“åŠå…¶å…³è”æ–‡ä»¶æ‹·è´åˆ°æŒ‡å®šä½ç½®ã€‚\ninstall(TARGETS &lt;target&gt;... [EXPORT &lt;export-name&gt;]        [RUNTIME_DEPENDENCIES &lt;arg&gt;...|RUNTIME_DEPENDENCY_SET &lt;set-name&gt;]        [&lt;artifact-option&gt;...]        [&lt;artifact-kind&gt; &lt;artifact-option&gt;...]...        [INCLUDES DESTINATION [&lt;dir&gt; ...]]        )\n\n&lt;artifact-option&gt; ç”¨äºæŒ‡å®šä¸è¾“å‡ºå“ç›¸å…³çš„é€‰é¡¹ï¼Œå¯ä»¥æ˜¯ä¸‹é¢é€‰é¡¹ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆå¸¸ç”¨çš„é€‰é¡¹ä¸»è¦æ˜¯ DESTINATION å’Œ PERMISSIONSï¼‰ï¼š\n[DESTINATION &lt;dir&gt;][PERMISSIONS &lt;permission&gt;...][CONFIGURATIONS &lt;config&gt;...][COMPONENT &lt;component&gt;][NAMELINK_COMPONENT &lt;component&gt;][OPTIONAL] [EXCLUDE_FROM_ALL][NAMELINK_ONLY|NAMELINK_SKIP]\n\nç¬¬ä¸€ç»„ &lt;artifact-option&gt; æ‰€è®¾ç½®çš„é€‰é¡¹åº”ç”¨äºåœ¨æœ¬æ¬¡è°ƒç”¨ä¸­æ²¡æœ‰æŒ‡å®šè¾“å‡ºå“ç±»å‹æ—¶ã€‚\næˆ‘ä»¬é€šå¸¸ä¼šä¸ºä¸åŒç±»å‹çš„è¾“å‡ºå“æŒ‡å®šä¸åŒçš„é€‰é¡¹ï¼Œå¦‚ä¸‹é¢ç¤ºä¾‹ä¸ºä¸åŒç±»å‹çš„è¾“å‡ºå“æŒ‡å®šäº†ä¸åŒçš„å®‰è£…ä½ç½®ï¼š\nset_target_properties(hello_cmake PROPERTIES PUBLIC_HEADER include/my_lib.h)install(TARGETS hello_cmake    ARCHIVE DESTINATION $&#123;CMAKE_INSTALL_LIBDIR&#125;  # ä»…ä¸ºæ¼”ç¤ºï¼Œè¿™æ ·å†™å¤šæ­¤ä¸€ä¸¾    RUNTIME DESTINATION $&#123;CMAKE_INSTALL_BINDIR&#125;  # ä»…ä¸ºæ¼”ç¤ºï¼Œè¿™æ ·å†™å¤šæ­¤ä¸€ä¸¾    PUBLIC_HEADER DESTINATION $&#123;CMAKE_INSTALL_INCLUDEDIR&#125;/my_lib)\n\n\nåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šä½¿ç”¨ PUBLIC_HEADER æ¥å®‰è£…å¤´æ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸‹é¢ä»‹ç»çš„ install(DIRECTORY ... ) å‘½ä»¤ã€‚\n\nEXPORTé€‰é¡¹EXPORT æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é€‰é¡¹ï¼Œå½“æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦ä½œä¸ºåº“è¢«ç¬¬ä¸‰æ–¹ä½¿ç”¨æ—¶ï¼Œä¸ºäº†è®©ç¬¬ä¸‰æ–¹èƒ½å¤Ÿé€šè¿‡ find_package æ‰€æŸ¥æ‰¾åˆ°æ‰€å®‰è£…çš„åº“ï¼Œå°±éœ€è¦åœ¨å®‰è£…æ—¶ç”Ÿæˆ xxxConfig.cmake æ–‡ä»¶ã€‚\nå½“ç„¶ï¼Œä»…ä»…é€šè¿‡åœ¨æ­¤æŒ‡å®š EXPORT é€‰é¡¹è¿˜ä¸å¤Ÿï¼Œæ­¤å¤„çš„ EXPORT é€‰é¡¹ä»…ä»…è¡¨ç¤ºå°† Target æ‰€å®‰è£…çš„è¾“å‡ºå“ç»‘å®šåˆ° &lt;export-name&gt; ä¸Šï¼Œåé¢æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨å•ç‹¬çš„ install(EXPORT ...) è¯­å¥æ¥ç”Ÿæˆ xxxConfig.cmake æ–‡ä»¶ï¼Œè¯¦è§ä¸‹é¢çš„ â€œå®‰è£…å¯¼å‡ºä¾èµ–é¡¹â€ èŠ‚ã€‚\næ‹·è´ç›®å½•æ‹·è´ç›®å½•åˆ°æŒ‡å®šä½ç½®ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\ninstall(DIRECTORY dirs...        TYPE &lt;type&gt; | DESTINATION &lt;dir&gt;        [FILE_PERMISSIONS &lt;permission&gt;...]        [DIRECTORY_PERMISSIONS &lt;permission&gt;...]        [USE_SOURCE_PERMISSIONS] [OPTIONAL] [MESSAGE_NEVER]        [CONFIGURATIONS &lt;config&gt;...]        [COMPONENT &lt;component&gt;] [EXCLUDE_FROM_ALL]        [FILES_MATCHING]        [[PATTERN &lt;pattern&gt; | REGEX &lt;regex&gt;]         [EXCLUDE] [PERMISSIONS &lt;permission&gt;...]] [...])\n\nå¯ä»¥ä½¿ç”¨ TYPE æˆ– DESTINATION æ¥æŒ‡å®šç›®æ ‡è·¯å¾„ï¼Œå…¶ä¸­ TYPE çš„å–å€¼æ¥è‡ªäº GNUInstallDirs æä¾›çš„è‹¥å¹²å˜é‡ï¼Œå¦‚ BIN ç­‰åŒäº CMAKE_INSTALL_BINDIR å˜é‡ã€‚\nç¤ºä¾‹ï¼š\ninstall(DIRECTORY ./common TYPE INCLUDE)install(DIRECTORY ./common DESTINATION &quot;$&#123;CMAKE_INSTALL_PREFIX&#125;/$&#123;CMAKE_INSTALL_INCLUDEDIR&#125;&quot;)\n\næ‹·è´æ–‡ä»¶æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šä½ç½®ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\ninstall(FILES &lt;file&gt;...        TYPE &lt;type&gt; | DESTINATION &lt;dir&gt;        [PERMISSIONS &lt;permission&gt;...]        [CONFIGURATIONS &lt;config&gt;...]        [COMPONENT &lt;component&gt;]        [RENAME &lt;name&gt;] [OPTIONAL] [EXCLUDE_FROM_ALL])\n\næ‰§è¡Œè„šæœ¬åœ¨å®‰è£…æ—¶æ‰§è¡Œè„šæœ¬æ–‡ä»¶æˆ–è€…è„šæœ¬ä»£ç ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\ninstall([[SCRIPT &lt;file&gt;] [CODE &lt;code&gt;]]        [ALL_COMPONENTS | COMPONENT &lt;component&gt;]        [EXCLUDE_FROM_ALL] [...])\n\nå¦‚æœè„šæœ¬æ–‡ä»¶çš„è·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è¯¥è·¯å¾„ç›¸å¯¹äºå½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆå³ CMAKE_SOURCE_DIR å˜é‡å­˜å‚¨çš„è·¯å¾„ï¼‰ã€‚\nç¤ºä¾‹ï¼š\ninstall(SCRIPT &quot;./my_lib/helper.cmake&quot;)\n\ninstall(CODE &quot;message(\\&quot;Sample install message.\\&quot;)&quot;)\n\nå®‰è£…å¯¼å‡ºä¾èµ–é¡¹å¦‚æœåœ¨å®‰è£… Targetï¼ˆè§ä¸Šé¢çš„5.2.1èŠ‚ï¼‰ æ—¶å·²ç»æŒ‡å®šäº† EXPORT é€‰é¡¹ï¼Œåˆ™å¯ä»¥é€šè¿‡ install(EXPORT ...) çš„å½¢å¼æ¥å®‰è£…éœ€è¦å¯¼å‡ºçš„ä¾èµ–æ€§ï¼Œå³ç”Ÿæˆ xxxConfig.cmake æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥é€šè¿‡ FILE é€‰é¡¹æ¥æŒ‡å®šå…¶ä»–åç§°ï¼Œä½†å¿…é¡»æ˜¯ .cmake ç±»å‹çš„æ–‡ä»¶ã€‚&lt;åŸæ–‡å‡ºè‡ª: jiangxueqiao.comï¼Œè¯·å°Šé‡åŸåˆ›&gt;\ninstall(EXPORT &lt;export-name&gt; DESTINATION &lt;dir&gt;        [NAMESPACE &lt;namespace&gt;] [FILE &lt;name&gt;.cmake]        [PERMISSIONS &lt;permission&gt;...]        [CONFIGURATIONS &lt;config&gt;...]        [CXX_MODULES_DIRECTORY &lt;directory&gt;]        [EXPORT_LINK_INTERFACE_LIBRARIES]        [COMPONENT &lt;component&gt;]        [EXCLUDE_FROM_ALL]        [EXPORT_PACKAGE_DEPENDENCIES])\n\n&lt;export-name&gt; é€‰é¡¹æ‰€æŒ‡å®šçš„åç§°éœ€è¦ä¸åœ¨ install(TARGET ... EXPORT ...) è¯­å¥ä¸­æŒ‡å®šåç§°ä¸€è‡´ã€‚\né€šå¸¸ä¸ºäº†é˜²æ­¢å’Œå…¶ä»–åº“å‘½åå†²çªï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ NAMESPACE æ·»åŠ å‘½åç©ºé—´ã€‚\nåœ¨ç”Ÿæˆ xxxConfig.cmake æ–‡ä»¶ä»¥åï¼Œå°±å¯ä»¥ä½¿ç”¨ find_package æ¥æŸ¥æ‰¾å¹¶å¼•ç”¨ä¾èµ–åº“äº†ï¼š\nfind_package(MyLib REQUIRED)target_link_libraries(OtherApp PRIVATE my_lib::my_lib)\n\nä¸ CMake äº¤äº’CMake ä¸æ„å»ºé¡¹ç›®äº¤äº’çš„æ–¹å¼æœ‰ä¸¤ç§:\n\nä½¿ç”¨ configure_file æŒ‡ä»¤åŠ¨æ€ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥å°†æ•°æ®ä¼ é€’ç»™é¡¹ç›®ï¼Œå¦‚åœ¨ C&#x2F;C++ é¡¹ç›®ä¸­åŠ¨æ€ç”Ÿæˆ .h æ–‡ä»¶ã€‚\nä½¿ç”¨ file æŒ‡ä»¤åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œfile æŒ‡ä»¤çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼ŒåŒ…å«ä¼—å¤šä¸æ–‡ä»¶ç›¸å…³çš„æ“ä½œï¼Œå¦‚è¯»å†™æ–‡ä»¶ã€ä¸‹è½½ä¸Šä¼ æ–‡ä»¶ã€éå†ç›®å½•ç­‰ã€‚\n\næœ¬èŠ‚åªä»‹ç» configure_file æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ç”¨äºæ ¹æ®æ¨¡æ¿æ–‡ä»¶åœ¨æŒ‡å®šä½ç½®ç”Ÿæˆæ–°çš„æ–‡ä»¶ã€‚\nconfigure_file(&lt;input&gt; &lt;output&gt;               [NO_SOURCE_PERMISSIONS | USE_SOURCE_PERMISSIONS |                FILE_PERMISSIONS &lt;permissions&gt;...]               [COPYONLY] [ESCAPE_QUOTES] [@ONLY]               [NEWLINE_STYLE [UNIX|DOS|WIN32|LF|CRLF] ])\n\næˆ‘ä»¬é¦–å…ˆéœ€è¦é€šè¿‡ &lt;input&gt; é€‰é¡¹æ¥æŒ‡å®šä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œè™½ç„¶æ¨¡æ¿æ–‡ä»¶å¯ä»¥æ˜¯ä»»æ„çš„åç¼€åï¼Œä½†æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ .in åç¼€åï¼Œä¾‹å¦‚æˆ‘ä»¬éœ€è¦é€šè¿‡æ¨¡æ¿æ–‡ä»¶ç”Ÿæˆ version.h æ–‡ä»¶ï¼Œåˆ™æ¨¡æ¿æ–‡ä»¶åä¸º version.h.inã€‚\nconfigure_file æŒ‡ä»¤ä¼šå°† &lt;input&gt; æ¨¡æ¿æ–‡ä»¶ä¸­çš„è¯¸å¦‚ @VAR@ã€$&#123;VAR&#125;ã€$CACHE&#123;VAR&#125;ã€$ENV&#123;VAR&#125; å½¢å¼çš„å˜é‡éƒ½æ›¿æ¢ä¸ºå¯¹åº”å˜é‡çš„å€¼ï¼Œå¦‚æœå˜é‡æ²¡æœ‰è¢«å®šä¹‰ï¼Œåˆ™æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\næˆ‘ä»¬é€šå¸¸è¿˜ä¼šæŒ‡å®š @ONLY é€‰é¡¹ï¼ŒæŒ‡å®šè¯¥é€‰é¡¹åï¼Œå°±åªæœ‰ @VAR@ å½¢å¼çš„å˜é‡ä¼šè¢«æ›¿æ¢ï¼Œè€Œå…¶ä»–å½¢å¼çš„å˜é‡ä¼šä¿ç•™ä¸å˜ï¼Œè¿™ç§æ–¹å¼è™½ç„¶åœ¨ç”Ÿæˆ .h æ–‡ä»¶æ—¶æ²¡æœ‰ä»€ä¹ˆç”¨é€”ï¼Œä½†è°åˆè¯´ configure_file åªèƒ½ç”Ÿæˆ .h æ–‡ä»¶äº†ï¼Ÿå¦‚æœæ˜¯ç”Ÿæˆ .cmake æ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯å°±æœ‰ä½œç”¨äº†å’§ã€‚\n// version.h.in#define VERSION_MAJOR @VERSION_MAJOR@#define VERSION_MINOR @VERSION_MINOR@#define VERSION_PATCH @VERSION_PATCH@#define BUILD_TIMESTAMP &quot;@BUILD_TIMESTAMP@&quot;\n\n# CMakeLists.txtstring(TIMESTAMP BUILD_TIMESTAMP &quot;%Y-%m-%d %H:%M:%S&quot;)set(VERSION_MAJOR 1)set(VERSION_MINOR 0)set(VERSION_PATCH 1)configure_file (    &quot;$&#123;CMAKE_SOURCE_DIR&#125;/include/version.h.in&quot;    &quot;$&#123;CMAKE_SOURCE_DIR&#125;/include/version.h&quot;)\n\næ‰§è¡Œ CMake è„šæœ¬ï¼ŒåŠ¨æ€ç”Ÿæˆçš„ version.h å†…å®¹å¦‚ä¸‹ï¼š\n#define VERSION_MAJOR 1#define VERSION_MINOR 0#define VERSION_PATCH 1#define BUILD_TIMESTAMP &quot;2024-09-30 16:51:57&quot;\n\nä¸Šè¿°å˜é‡æ›¿æ¢çš„æ–¹å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼šè™½ç„¶èƒ½åŠ¨æ€æ›¿æ¢æ¨¡æ¿è¯­å¥ä¸­å˜é‡çš„å€¼ï¼Œä½†å´ä¸èƒ½æ§åˆ¶è¯­å¥æ˜¯å¦å­˜åœ¨ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸åœ¨ C&#x2F;C++ é¡¹ç›®ä¸­æ ¹æ®å®æ˜¯å¦è¢«å®šä¹‰æ¥åšåˆ¤æ–­ï¼Œè€Œä¸æ˜¯æ ¹æ®å®çš„å€¼æ¥åšåˆ¤æ–­ï¼š\n#ifdef BUILD_SHARED_LIBS#endif\n\nè¿™ä¸ªæ˜¯æ—¶å€™å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªè¯­æ³•å½¢å¼äº†ï¼š#cmakedefine VAR ...ï¼Œåœ¨è¿™ç§å½¢å¼ä¸­æ˜¯ç›´æ¥ä½¿ç”¨å˜é‡åçš„ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ @ @ è¿›è¡ŒåŒ…è£¹ã€‚\nå½“å®šä¹‰äº† VAR å˜é‡æ—¶ï¼Œå°†æ›¿æ¢ä¸ºï¼ˆâ€¦å°±æ˜¯æ¨¡æ¿æ–‡ä»¶ä¸­ VAR åé¢çš„å†…å®¹ï¼‰ï¼š\n#define VAR ...\n\nå½“æ²¡æœ‰å®šä¹‰ VAR å˜é‡æ—¶ï¼Œå°†æ›¿æ¢ä¸ºï¼š\n/* #undef VAR */\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"],"tags":["CMake"]},{"title":"Janusçš„ç¼–è¯‘éƒ¨ç½²åŠé…ç½®","url":"/post/3773107387.html","content":"Janusæ˜¯ä¸€ä¸ªå¼€æºçš„ WebRTC SFU æœåŠ¡å™¨ï¼Œå¯ä»¥ä½œä¸º WebRTC çš„ä¸€ä¸ªç«¯å°†å…¶æ”¶åˆ°çš„æ•°æ®è¿›è¡Œè½¬å‘ï¼ŒåŒæ—¶æä¾›äº†ä¸€äº›çš„æ§åˆ¶èƒ½åŠ›ã€‚Janus æ˜¯åŸºäºæ’ä»¶æ¶æ„çš„ï¼Œå…¶åŠŸèƒ½éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªä¸ªæ’ä»¶æ¥æä¾›ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º Janus å¼€å‘æ’ä»¶ï¼Œæ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚\n\n\nç¼–è¯‘éƒ¨ç½²Janus å¯ä»¥æ–¹ä¾¿çš„åœ¨ Linux å’Œ MacOS ä¸Šé¢ç¼–è¯‘éƒ¨ç½²ï¼Œæš‚æ—¶ä¸æ”¯æŒ Windows ç³»ç»Ÿï¼Œä½†å¯ä»¥åœ¨ Win10 çš„Windows Subsystem for Linuxä¸Šç¼–è¯‘éƒ¨ç½²ã€‚\nå®‰è£…ä¾èµ–é¡¹åœ¨ç¼–è¯‘ Janus ä¹‹å‰ï¼Œéœ€è¦å®‰è£…å¦‚ä¸‹ä¾èµ–é¡¹ï¼š\n\nJansson\nlibconfig\nlibnice (at least v0.1.15 suggested, master recommended)\nOpenSSL (at least v1.0.1e)\nlibsrtp (at least v1.5 suggested)\nusrsctp (only needed if you are interested in Data Channels)\nlibmicrohttpd (only needed if you are interested in REST support for the Janus API)\nlibwebsockets (only needed if you are interested in WebSockets support for the Janus API)\ncmake (only needed if you are interested in WebSockets and&#x2F;or BoringSSL support, as they make use of it)\nrabbitmq-c (only needed if you are interested in RabbitMQ support for the Janus API or events)\npaho.mqtt.c (only needed if you are interested in MQTT support for the Janus API or events)\nnanomsg (only needed if you are interested in Nanomsg support for the Janus API)\nlibcurl (only needed if you are interested in the TURN REST API support)\n\nJanus çš„æŸäº›æ’ä»¶å¯èƒ½è¿˜ä¾èµ–ä¸‹é¢çš„åº“ï¼š\n\nSofia-SIP (only needed for the SIP plugin)\nlibopus (only needed for the bridge plugin)\nlibogg (needed for the voicemail plugin and&#x2F;or post-processor)\nlibcurl (only needed if you are interested in RTSP support in the Streaming plugin or in the sample Event Handler plugin)\nLua (only needed for the Lua plugin)\n\nå¦å¤–ï¼Œè¿˜éœ€è¦å®‰è£…å¦‚ä¸‹å·¥å…·ï¼š\n\nGLib\npkg-config\ngengetopt\n\nä¸Šé¢çš„æ‰€æœ‰åº“é€šå¸¸åœ¨å¤šæ•° Linux å‘è¡Œç‰ˆä¸­éƒ½æœ‰æä¾›ï¼Œå¯ä»¥ç›´æ¥å®‰è£…ã€‚ä»¥åœ¨Fedoraä¸­å®‰è£…ä¸ºä¾‹ï¼š\nyum install libmicrohttpd-devel jansson-devel \\   openssl-devel libsrtp-devel sofia-sip-devel glib2-devel \\   opus-devel libogg-devel libcurl-devel pkgconfig gengetopt \\   libconfig-devel libtool autoconf automake\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å°è¯•åœ¨CentOSä¸Šé¢å®‰è£…è¿™äº›ä¾èµ–é¡¹ï¼Œéœ€è¦å…ˆæ‰§è¡Œyum install epel-release .\nåœ¨Ubuntuå’ŒDebianç³»ç»Ÿä¸Šï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\naptitude install libmicrohttpd-dev libjansson-dev \\\tlibssl-dev libsrtp-dev libsofia-sip-ua-dev libglib2.0-dev \\\tlibopus-dev libogg-dev libcurl4-openssl-dev liblua5.3-dev \\\tlibconfig-dev pkg-config gengetopt libtool automake\n\n\nåœ¨ä½ç‰ˆæœ¬çš„ç³»ç»Ÿä¸Š(å¦‚ä½äºUbuntu 14.04 LTSç‰ˆæœ¬)ï¼Œå¯èƒ½æ²¡æœ‰æä¾›çš„libopusçš„é¢„ç¼–è¯‘åŒ…ï¼Œå¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œéœ€è¦æ‰‹åŠ¨ç¼–è¯‘opus.\n\nlibnicelibniceè™½ç„¶åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šéƒ½æä¾›äº†é¢„ç¼–è¯‘åŒ…ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥å»ºè®®å…ˆå¸è½½è€ç‰ˆæœ¬ï¼Œç„¶åä¸‹è½½ libnice çš„masterçš„ç‰ˆæœ¬ï¼Œæ‰‹åŠ¨ç¼–è¯‘ï¼š\ngit clone https://gitlab.freedesktop.org/libnice/libnicecd libnice./autogen.sh./configure --prefix=/usrmake &amp;&amp; sudo make install\n\n\nç¡®ä¿å·²ç»ç§»é™¤è€ç‰ˆæœ¬ï¼Œå¦åˆ™ä¼šäº§ç”Ÿå†²çªã€‚å¦‚æœéœ€è¦ä¿ç•™å¤šä¸ªç‰ˆæœ¬çš„ libniceï¼Œå¯ä»¥æ‰§è¡Œpkg-config --cflags --libs niceç¡®ä¿ Janus å¯ä»¥æ‰¾åˆ°æ­£ç¡®çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ— æ³•æ‰¾åˆ°ï¼Œå¯ä»¥åœ¨ç¼–è¯‘ Janus ä¹‹å‰è®¾ç½®PKG_CONFIG_PATHç¯å¢ƒå˜é‡ï¼Œå¦‚export PKG_CONFIG_PATH=/path/to/libnice/lib/pkgconfig\n\nlibcurlå¦‚æœåæœŸéœ€è¦ç¼–è¯‘å®‰è£… Janus çš„Event Handleræ’ä»¶ï¼Œè¿˜éœ€è¦å®‰è£… libcurl åº“çš„å¼€å‘ç‰ˆæœ¬ï¼Œåœ¨ Fedora&#x2F;CentOS ä¸Šé€šå¸¸ä¸ºlibcurl-develï¼Œåœ¨ Ubuntu&#x2F;Debian ä¸Šé€šå¸¸ä¸ºlibcurl4-openssl-devã€‚\nlibsrtpå‡å¦‚å·²ç»å®‰è£…äº†libsrtp 1.5 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œéœ€è¦å…ˆå¸è½½ï¼Œç„¶åæ‰‹åŠ¨å®‰è£…1.5x æˆ– 1.6xç‰ˆæœ¬ã€‚å› ä¸º 1.4x ç‰ˆæœ¬ä¼šå¯¼è‡´ WebRTC å‡ºç°ä¸€äº›é—®é¢˜ã€‚ä»¥å®‰è£…2.2.0ç‰ˆæœ¬ä¸ºä¾‹ï¼š\nwget https://github.com/cisco/libsrtp/archive/v2.2.0.tar.gztar xfv v2.2.0.tar.gzcd libsrtp-2.2.0./configure --prefix=/usr --enable-opensslmake shared_library &amp;&amp; sudo make install\n\nJanus çš„ configure è„šæœ¬å¯ä»¥è‡ªåŠ¨æ£€æµ‹åˆ°ä½¿ç”¨çš„ libsrtp çš„ç‰ˆæœ¬ï¼Œå¦‚æœåŒæ—¶å®‰è£…äº† 1.5x å’Œ 2.x ç‰ˆæœ¬ï¼Œä¼šä¼˜å…ˆä½¿ç”¨ 2.x ç‰ˆæœ¬ï¼Œå¦‚æœæƒ³å¼ºåˆ¶ä½¿ç”¨ 1.5 æˆ–è€… 1.6 ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ configure å‘½ä»¤ä¼ å…¥--disable-libsrtp2 å‚æ•°ã€‚\n\nå‡å¦‚å®‰è£…çš„æ˜¯ x86&#x2F;x64 ç‰ˆæœ¬çš„ libsrtpï¼Œéœ€è¦åœ¨ configure å‘½ä»¤ä¼ å…¥--libdir=/usr/lib64å‚æ•°ã€‚\n\nBoringSSLå¦‚æœéœ€è¦ä½¿ç”¨BoringSSLä»£æ›¿OpenSSL ï¼ˆå› ä¸ºä½¿ç”¨BoringSSLå¯ä»¥ä½¿ç”¨--enable-dtls-settimeoutåŠŸèƒ½ï¼‰ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ‰‹åŠ¨å®‰è£…ï¼Œå¹¶ä¸”åœ¨ configure å‘½ä»¤ä¼ å…¥--enable-boringsslå‚æ•°ï¼š\ngit clone https://boringssl.googlesource.com/boringsslcd boringssl# Don&#x27;t barf on errorssed -i s/&quot; -Werror&quot;//g CMakeLists.txt# Buildmkdir -p buildcd buildcmake -DCMAKE_CXX_FLAGS=&quot;-lrt&quot; ..makecd ..# Installsudo mkdir -p /opt/boringsslsudo cp -R include /opt/boringssl/sudo mkdir -p /opt/boringssl/libsudo cp build/ssl/libssl.a /opt/boringssl/lib/sudo cp build/crypto/libcrypto.a /opt/boringssl/lib/\n\nJanus é»˜è®¤ BoringSSL å®‰è£…åœ¨/opt/boringsslï¼Œå¦‚æœä¸æ˜¯ï¼Œå¯ä»¥é€šè¿‡--enable-boringssl=/path/to/boringsslæŒ‡å®šã€‚\nusrcstpgit clone https://github.com/sctplab/ccd usrsctp./bootstrap./configure --prefix=/usr &amp;&amp; make &amp;&amp; sudo make install\n\n\nNote: å‡å¦‚å®‰è£…çš„æ˜¯ x8&#x2F;x64 ç‰ˆæœ¬çš„ usrcstpï¼Œéœ€è¦åœ¨ configure å‘½ä»¤ä¼ å…¥ --libdir=/usr/lib64 å‚æ•°ã€‚\n\nlibwebsocketså¦‚æœéœ€è¦æä¾› websockets ä¿¡ä»¤æ”¯æŒï¼Œè¿˜éœ€è¦å®‰è£… libwebsockets åº“ï¼š\ngit clone https://libwebsockets.org/repo/libwebsocketscd libwebsockets# If you want the stable version of libwebsockets, uncomment the next line# git checkout v2.4-stablemkdir buildcd build# See https://github.com/meetecho/janus-gateway/issues/732 re: LWS_MAX_SMPcmake -DLWS_MAX_SMP=1 -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_C_FLAGS=&quot;-fpic&quot; ..make &amp;&amp; sudo make install\n\n\nå‡å¦‚ libwebsockets.org æ— æ³•è®¿é—®, å¯ä»¥å°†ç¬¬ä¸€è¡Œæ›¿æ¢ä¸º:git clone https://github.com/warmcat/libwebsockets.git\n\næ–‡æ¡£å¦‚æœéœ€è¦ç¼–è¯‘ Janus æ–‡æ¡£ï¼Œéœ€è¦å®‰è£…å¦‚ä¸‹å·¥å…·ï¼š\n\nDoxygen\nGraphviz\n\nFedora:\nyum install doxygen graphviz\n\nUbuntu&#x2F;Debian:\naptitude install doxygen graphviz\n\nç¼–è¯‘åœ¨å®‰è£…å®Œä¾èµ–é¡¹ä¹‹åï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤è·å– Janus ä»£ç ï¼š\n- [ ] git clone https://github.com/meetecho/janus-gateway.git cd      janus-gateway\n\nç„¶åä½¿ç”¨sh autogen.shå‘½ä»¤ç”Ÿæˆ configure æ–‡ä»¶ã€‚æœ€åï¼Œæ‰§è¡Œ configure å’Œç¼–è¯‘å‘½ä»¤å¼€å§‹ç¼–è¯‘ï¼š\n./configure --prefix=/opt/janus --enable-boringsslmakemake install\n\nç¼–è¯‘å®Œæˆä¹‹åï¼Œä½¿ç”¨make configså‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä½äº/opt/janus/etc/janus/janus.jcfgã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡æ‰§è¡Œmake configså‘½ä»¤éƒ½ä¼šå°†/opt/janus/etc/janus/janus.jcfgæ–‡ä»¶è¿˜åŸä¸ºé»˜è®¤é…ç½®ã€‚\nè¿è¡Œä¸æµ‹è¯•æˆ‘ä»¬å¯ä»¥å…ˆä¸ä¿®æ”¹ä»»ä½•é…ç½®ï¼Œå°† Janus è¿è¡Œèµ·æ¥ï¼Œç„¶åä½¿ç”¨æµ‹è¯• htmlï¼Œæµ‹è¯•ä¸€ä¸‹æ•ˆæœã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œè¿è¡Œ Janusï¼š\n/opt/janus/bin/janus\n\nJanus å¯åŠ¨å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¦å¯»ä¸€å°å®¢æˆ·æœºï¼Œå°† Janus æºç ä¸‹è½½ä¸‹æ¥ï¼Œä¿®æ”¹janus-gateway\\html\\echotest.jsæ–‡ä»¶ä¸­serverå˜é‡ä¸ºï¼š&quot;ws://47.93.47.150:8188&quot;ï¼Œå¦‚ï¼š\nvar server = null;if(window.location.protocol === &#x27;http:&#x27;)\tserver = &quot;http://&quot; + window.location.hostname + &quot;:8088/janus&quot;;else\tserver = &quot;https://&quot; + window.location.hostname + &quot;:8089/janus&quot;;server = &quot;ws://47.93.47.150:8188&quot;;\n\nåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€echotest.htmlï¼Œç‚¹å‡»â€œStartâ€å³å¯çœ‹åˆ°æ•ˆæœã€‚\nå¦‚æœæ— æ³•è¿æ¥æˆåŠŸï¼Œå¯èƒ½æ˜¯å› ä¸ºiceServersé»˜è®¤ä½¿ç”¨çš„æ˜¯ google çš„ turn æœåŠ¡å™¨ï¼Œå›½å†…æ— æ³•è®¿é—®å¯¼è‡´ï¼Œå¯ä»¥å‚è€ƒ å¦‚ä½•æ­å»ºWebRTCçš„TURNæœåŠ¡å™¨ æ­å»ºè‡ªå·±çš„ TURN æœåŠ¡å™¨ã€‚\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"P2PåŠNATç©¿é€æŠ€æœ¯ä»‹ç»","url":"/post/2441416675.html","content":"P2PP2Pï¼ˆpeer to peerï¼‰æ˜¯ä¸€ä¸ªâ€œç‚¹å¯¹ç‚¹ä¼ è¾“æŠ€æœ¯â€ï¼Œä¹Ÿå°±æ˜¯ä¸¤å°è®¡ç®—æœºä¹‹é—´ä¸éœ€è¦ç¬¬ä¸‰å°æœºå™¨ä½œä¸ºæœåŠ¡ç«¯å°±èƒ½å®ç°æ•°æ®çš„ä¼ è¾“ï¼Œæ¯å°è®¡ç®—æœºå³æ˜¯å®¢æˆ·ç«¯åˆæ˜¯æœåŠ¡ç«¯ã€‚\nå¦‚æœæ¯å°è®¡ç®—æœºéƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹çš„å…¬ç½‘ IPï¼Œé‚£ä¹ˆ P2P æŠ€æœ¯å°±æ¯”è¾ƒå¥½å®ç°äº†ï¼Œä½†æ˜¯ç°å®ä¸­ç”±äº NATï¼ˆNetwork Address Translationï¼‰ çš„å­˜åœ¨ï¼Œä½¿å¾— P2P æŠ€æœ¯æœ€å¤§çš„éš¾ç‚¹å°±åœ¨äºç©¿è¶Š NAT çš„é™åˆ¶ï¼Œä¿—ç§°â€œæ‰“æ´â€ã€‚\n\n\nNATNAT çš„äº§ç”ŸèƒŒæ™¯å¦‚æœæˆ‘ä»¬æŠŠ Internet æ¯”ä½œä¸€ä¸ªé‚®æ”¿ç³»ç»Ÿï¼Œé‚£ä¹ˆ IP åœ°å€çš„ä½œç”¨å°±ç­‰åŒäºåŒ…å«åŸå¸‚ã€è¡—åŒºã€é—¨ç‰Œç¼–å·åœ¨å†…çš„ç²¾ç¡®åœ°å€ï¼Œé€šè¿‡ IP åœ°å€å¯ä»¥å‡†ç¡®çš„å®šä½åˆ°å…·ä½“çš„ä¸€å°è®¡ç®—æœºã€‚\nIPv4 ä½¿ç”¨ 32bits æ•´æ•°è¡¨è¾¾ä¸€ä¸ªåœ°å€ï¼Œåœ°å€æœ€å¤§èŒƒå›´å°±æ˜¯ 232 çº¦ä¸º 43 äº¿ã€‚ä»¥ IP åˆ›å§‹æ—¶æœŸå¯ä»¥è”ç½‘çš„è®¾å¤‡æ•°é‡æ¥çœ‹ï¼Œè¿™æ ·çš„ä¸€ä¸ªç©ºé—´å·²ç»å¾ˆå¤§ï¼Œå¾ˆéš¾è¢«çŸ­æ—¶é—´ç”¨å®Œã€‚ç„¶è€Œï¼Œäº‹å®è¿œè¿œè¶…å‡ºäººä»¬çš„è®¾æƒ³ï¼Œè®¡ç®—æœºç½‘ç»œåœ¨æ­¤åçš„å‡ åå¹´é‡Œè¿…é€Ÿå£®å¤§ï¼Œç½‘ç»œç»ˆç«¯æ•°é‡ä¹Ÿå‘ˆçˆ†ç‚¸æ€§å¢é•¿ã€‚\næ›´ä¸ºç³Ÿç³•çš„æ˜¯ï¼Œä¸ºäº†è·¯ç”±å’Œç®¡ç†æ–¹ä¾¿ï¼Œ43 äº¿çš„åœ°å€ç©ºé—´è¢«æŒ‰ç…§ä¸åŒå‰ç¼€é•¿åº¦åˆ’åˆ†ä¸º A,B,C,D ç±»åœ°å€ç½‘ç»œå’Œä¿ç•™åœ°å€ã€‚IANA å‘è¶…å¤§å‹ä¼ä¸š&#x2F;ç»„ç»‡åˆ†é… A ç±»ç½‘ç»œåœ°å€ï¼Œä¸€æ¬¡ä¸€æ®µã€‚å‘ä¸­å‹ä¼ä¸šæˆ–æ•™è‚²æœºæ„åˆ†é… B ç±»ç½‘ç»œåœ°å€ï¼Œä¸€æ¬¡ä¸€æ®µã€‚è¿™æ ·ä¸€ç§åˆ†é…ç­–ç•¥ä½¿å¾— IP åœ°å€æµªè´¹å¾ˆä¸¥é‡ï¼Œå¾ˆå¤šè¢«åˆ†é…å‡ºå»çš„åœ°å€æ²¡æœ‰çœŸå®è¢«åˆ©ç”¨ï¼Œåœ°å€æ¶ˆè€—å¾ˆå¿«ã€‚ä»¥è‡³äºäºŒåä¸–çºª 90 å¹´ä»£åˆï¼Œç½‘ç»œä¸“å®¶ä»¬æ„è¯†åˆ°ï¼Œè¿™æ ·å¤§æ‰‹å¤§è„šä¸‹å»ï¼ŒIPv4 åœ°å€å¾ˆå¿«å°±è¦è€—å…‰äº†ã€‚äºæ˜¯ï¼Œäººä»¬å¼€å§‹è€ƒè™‘ IPv4 çš„æ›¿ä»£æ–¹æ¡ˆï¼ŒåŒæ—¶é‡‡å–ä¸€ç³»åˆ—çš„æªæ–½æ¥å‡ç¼“ IPv4 åœ°å€çš„æ¶ˆè€—ã€‚æ­£æ˜¯åœ¨è¿™æ ·ä¸€ä¸ªèƒŒæ™¯ä¹‹ä¸‹ï¼ŒNAT åº”è¿è€Œç”Ÿã€‚\n\nIPv4 å³ç½‘é™…ç½‘åè®®ç¬¬ 4 ç‰ˆâ€”â€”Internet Protocol Version 4 çš„ç¼©å†™ã€‚\n\nNATNATï¼ˆNetwork Address Translationï¼‰ç½‘ç»œåœ°å€è½¬æ¢ï¼Œå°±æ˜¯åœ¨å†…ç½‘ IP å’Œå…¬ç½‘ IP ä¹‹å‰ç›¸äº’è½¬æ¢ã€‚NAT é€šå¸¸éƒ¨ç½²åœ¨ä¸€ä¸ªç»„ç»‡çš„ç½‘ç»œå‡ºå£ä½ç½®ã€‚\nå†…éƒ¨ç½‘ç»œåœ°å€å†…éƒ¨ç½‘ç»œåœ°å€å³å†…ç½‘ IPã€‚\nRFC1918 è§„å®šäº†ä¸‰ä¸ªä¿ç•™åœ°å€æ®µè½ï¼Œè¿™ä¸‰ä¸ªèŒƒå›´åˆ†åˆ«å¤„äº A,B,C ç±»çš„åœ°å€æ®µï¼Œä¸å‘ç‰¹å®šçš„ç”¨æˆ·åˆ†é…ï¼Œè¢« IANA ä½œä¸ºç§æœ‰åœ°å€ä¿ç•™ï¼Œè¿™äº›åœ°å€å¯ä»¥åœ¨ä»»ä½•ç»„ç»‡æˆ–ä¼ä¸šå†…éƒ¨ä½¿ç”¨ã€‚\nå’Œå…¶ä»– IPv4 åœ°å€çš„åŒºåˆ«å°±æ˜¯ï¼Œå…¶ä»…èƒ½åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä¸èƒ½ä½œä¸ºå…¬ç½‘ IPã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ºäº†ç»„ç»‡çš„ç®¡ç†èŒƒå›´è¿™äº›åœ°å€å°±ä¸å†æœ‰æ„ä¹‰ï¼Œæ— è®ºæ˜¯ä½œä¸ºæºåœ°å€ï¼Œè¿˜æ˜¯ç›®çš„åœ°å€ã€‚å¯¹äºä¸€ä¸ªå°é—­çš„ç»„ç»‡ï¼Œå¦‚æœå…¶ç½‘ç»œä¸è¿æ¥åˆ°å¤–éƒ¨ Internetï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›åœ°å€è€Œä¸ç”¨å‘ IANA æå‡ºç”³è¯·ï¼Œåœ¨å†…ç½‘ä½¿ç”¨ç§æœ‰IPåœ°å€è¿›è¡Œè·¯ç”±ç®¡ç†å’ŒæŠ¥æ–‡ä¼ é€’çš„æ–¹å¼ä¸å…¶ä»–ç½‘ç»œæ²¡æœ‰å·®å¼‚ã€‚\nä¸‰ç±»åœ°å€æ®µä¸­çš„ç§æœ‰IPåœ°å€æ®µåˆ†åˆ«å¦‚ä¸‹ï¼š\n10.0.0.0 ~ 10.255.255.255      å³ 10.0.0.0/8172.16.0.0 ~ 172.31.255.255    å³ 172.16.0.0/12192.168.0.0 ~ 192.168.255.255  å³ 192.168.0.0/16\n\nå¯¹äºæœ‰ Internet è®¿é—®éœ€æ±‚è€Œåœ¨å†…éƒ¨å´ä½¿ç”¨ç§æœ‰åœ°å€çš„ç½‘ç»œï¼ˆç›®å‰ç»å¤§å¤šæ•°ç½‘ç»œéƒ½æ˜¯è¿™æ ·ï¼‰ï¼Œå°±è¦åœ¨ç»„ç»‡çš„å‡ºå£ä½ç½®éƒ¨ç½² NAT ç½‘å…³ï¼Œåœ¨æŠ¥æ–‡ç¦»å¼€ç§ç½‘è¿›å…¥ Internet æ—¶ï¼Œå°†æº IP æ›¿æ¢ä¸ºå…¬ç½‘åœ°å€ï¼Œé€šå¸¸æ˜¯å‡ºå£è®¾å¤‡çš„æ¥å£åœ°å€ã€‚\nä¸€ä¸ªå¯¹å¤–çš„è®¿é—®è¯·æ±‚åœ¨åˆ°è¾¾ç›®æ ‡ä»¥åï¼Œåœ¨ç›®æ ‡çœ‹æ¥æ˜¯ç”±æœ¬ç»„ç»‡çš„å‡ºå£ç½‘å…³æ‰€å‘èµ·ï¼Œå› æ­¤è¢«è¯·æ±‚çš„ç›®æ ‡å°†å“åº”å†…å®¹ç”± Internet å‘å›åˆ°å‡ºå£ç½‘å…³ã€‚å‡ºå£ç½‘å…³å†å°†ç›®çš„åœ°å€æ›¿æ¢ä¸ºç§ç½‘çš„æºä¸»æœºåœ°å€å’Œç«¯å£ï¼Œå‘å›å†…éƒ¨ï¼ˆç½‘å…³æ˜¯å¦‚ä½•å°†ä¸åŒçš„å“åº”æ›¿æ¢æˆå“åº”çš„ç§æœ‰IPå’Œç«¯å£çš„å‘¢ï¼Ÿè¯·çœ‹ä¸‹ä¸€èŠ‚ï¼‰ã€‚è¿™æ ·ä¸€æ¬¡ç”±ç§ç½‘ä¸»æœºå‘å…¬ç½‘æœåŠ¡ç«¯çš„è¯·æ±‚å’Œå“åº”å°±åœ¨é€šä¿¡ä¸¤ç«¯å‡æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹å®Œæˆäº†ã€‚ä¾æ®è¿™ç§æ¨¡å‹ï¼Œæ•°é‡åºå¤§çš„å†…ç½‘ä¸»æœºå°±ä¸å†éœ€è¦å…¬æœ‰ IP åœ°å€äº†ã€‚\néœ€è¦æ³¨æ„ï¼Œåœ¨ä¸€ä¸ªç½‘ç»œä¸­å¯ä»¥æœ‰å¤šä¸ªNATç½‘å…³ï¼Œä¹Ÿå¯ä»¥å‡ºç°ç½‘å…³å¥—ç½‘å…³çš„æƒ…å†µï¼Œå†…å±‚ç½‘å…³å¯ä»¥æ²¡æœ‰å…¬ç½‘IPã€‚\nNAT åˆ†ç±»\nå…¨é”¥å½¢ NATï¼ˆFull Cone NATï¼‰  ä¸€æ—¦å†…éƒ¨ä¸»æœºç«¯å£å¯¹(iAddr:iPort)è¢« NAT ç½‘å…³æ˜ å°„åˆ°(eAddr:ePort)ï¼Œæ‰€æœ‰åç»­çš„(iAddr:iPort)æŠ¥æ–‡éƒ½ä¼šè¢«è½¬æ¢ä¸º(eAddr:ePort)ï¼›ä»»ä½•ä¸€ä¸ªå¤–éƒ¨ä¸»æœºå‘é€åˆ°(eAddr:ePort)çš„æŠ¥æ–‡ä¹Ÿå°†ä¼šè¢«è½¬æ¢åå‘åˆ°(iAddr:iPort)ã€‚\n\né™åˆ¶é”¥å½¢ NATï¼ˆRestricted Cone NATï¼‰  ä¸€æ—¦å†…éƒ¨ä¸»æœºç«¯å£å¯¹(iAddr:iPort)è¢«æ˜ å°„åˆ°(eAddr:ePort)ï¼Œæ‰€æœ‰åç»­çš„(iAddr:iPort)æŠ¥æ–‡éƒ½ä¼šè¢«è½¬æ¢ä¸º(eAddr:ePort)ï¼›ä½†åªæœ‰ (iAddr:iPort)å‘ç‰¹å®šçš„å¤–éƒ¨ä¸»æœº hAddr å‘é€è¿‡æ•°æ®åï¼Œä¸»æœº hAddr ä»ä»»æ„ç«¯å£å‘é€åˆ°(eAddr:ePort)çš„æŠ¥æ–‡å°†ä¼šè¢«è½¬å‘åˆ°(iAddr:iPort)ã€‚\n\nç«¯å£é™åˆ¶é”¥å½¢ NATï¼ˆPort Restricted Cone NATï¼‰  ä¸€æ—¦å†…éƒ¨ä¸»æœºç«¯å£å¯¹(iAddr:iPort)è¢«æ˜ å°„åˆ°(eAddr:ePort)ï¼Œæ‰€æœ‰åç»­çš„(iAddr:iPort)æŠ¥æ–‡éƒ½ä¼šè¢«è½¬æ¢ä¸º(eAddr:ePort)ï¼›ä½†åªæœ‰(iAddr:iPort)å‘ç‰¹å®šçš„å¤–éƒ¨ä¸»æœºç«¯å£å¯¹(hAddr:hPort)å‘é€è¿‡æ•°æ®åï¼Œç”± (hAddr:hPort)å‘é€åˆ°(eAddr:ePort)çš„æŠ¥æ–‡æ‰ä¼šè¢«è½¬å‘åˆ°(iAddr:iPort)ã€‚\n\nå¯¹ç§°å‹ NATï¼ˆSymmetric NATï¼‰  å†…éƒ¨ä¸»æœºâ€œåœ°å€ç«¯å£å¯¹â€(iAddr:iPort)è¯·æ±‚ç‰¹å®šå¤–éƒ¨ä¸»æœºâ€œåœ°å€ç«¯å£å¯¹â€(iAddr:iPort)æ—¶ï¼ŒNAT ç½‘å…³éƒ½ä¼šæ˜ å°„ä¸€ä¸ªç‰¹æœ‰çš„(eAddr:ePort)ã€‚åªæœ‰æ”¶åˆ°æŠ¥æ–‡çš„å¤–éƒ¨ä¸»æœºä»å¯¹åº”çš„ç«¯å£å¯¹å‘é€å›åº”çš„æŠ¥æ–‡ï¼Œæ‰èƒ½è¢«è½¬æ¢ã€‚å³ä½¿å†…éƒ¨ä¸»æœºä½¿ç”¨ä¹‹å‰ç”¨è¿‡çš„â€œåœ°å€ç«¯å£å¯¹â€å»è¿æ¥ä¸åŒå¤–éƒ¨ä¸»æœº(æˆ–ç«¯å£)æ—¶ï¼ŒNAT ç½‘å…³ä¹Ÿä¼šå»ºç«‹æ–°çš„æ˜ å°„å…³ç³»ã€‚\n\n\nä»ä¸Šé¢æè¿°å¯ä»¥çœ‹å‡ºï¼Œä¸åŒçš„NATç±»å‹çš„å®‰å…¨æ€§ç³»æ•°ä¾æ¬¡ä¸º å¯¹ç§°å‹ &gt; ç«¯å£å—é™é”¥å‹ &gt; å—é™é”¥å‹ &gt; å…¨é”¥å‹ï¼ŒåŒæ ·NATç©¿è¶Šçš„éš¾åº¦ä¹Ÿæ˜¯ä¾æ¬¡é™ä½ã€‚\nNAT ç©¿è¶ŠæŠ€æœ¯å¸¸è§çš„ NAT ç©¿è¶ŠæŠ€æœ¯æœ‰ï¼šSTUNã€TURNã€ICEã€‚\nSTUNè™½ç„¶åœ¨RFC3489å’ŒRFC5389ä¸­çš„åç§°éƒ½æ˜¯ STUNï¼Œä½†å…¶å…¨ç§°æ˜¯ä¸åŒçš„ã€‚\nåœ¨ RFC3489 é‡Œï¼ŒSTUN çš„å…¨ç§°æ˜¯ Simple Traversal of User Datagram Protocol (UDP) Through Network Address Translators (NATs)ï¼Œ å³ç©¿è¶Š NAT çš„ç®€å• UDP ä¼ è¾“ï¼Œæ˜¯ä¸€ä¸ªè½»é‡çº§çš„åè®®ï¼Œå…è®¸åº”ç”¨ç¨‹åºå‘ç°è‡ªå·±å’Œå…¬ç½‘ä¹‹é—´çš„ NAT ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½å…è®¸åº”ç”¨ç¨‹åºå‘ç°è‡ªå·±è¢« NAT åˆ†é…çš„å…¬ç½‘ IPã€‚è¿™ä¸ªåè®®åœ¨ 2003 å¹´ 3 æœˆè¢«æå‡ºï¼Œç›®å‰å·²ç»è¢« STUN&#x2F;RFC5389 æ‰€æ›¿ä»£ã€‚\nåœ¨ RFC5389 ä¸­ï¼ŒSTUN çš„å…¨ç§°å˜ä¸º Session Traversal Utilities for NATï¼Œå³ NAT ç¯å¢ƒä¸‹çš„ä¼šè¯ä¼ è¾“å·¥å…·ï¼Œæ˜¯ä¸€ç§å¤„ç† NAT ä¼ è¾“çš„åè®®ï¼Œä½†ä¸»è¦ä½œä¸ºä¸€ä¸ªå·¥å…·æ¥æœåŠ¡äºå…¶ä»–åè®®ã€‚å’Œ STUN&#x2F;RFC3489 ç±»ä¼¼ï¼Œå¯ä»¥è¢«ç»ˆç«¯ç”¨æ¥å‘ç°å…¶å…¬ç½‘ IP å’Œç«¯å£ï¼ŒåŒæ—¶å¯ä»¥æ£€æµ‹ç«¯ç‚¹é—´çš„è¿æ¥æ€§ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§ä¿æ´»ï¼ˆkeep-aliveï¼‰åè®®æ¥ç»´æŒ NAT çš„ç»‘å®šã€‚å’Œ RFC3489 æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºï¼ŒSTUN æœ¬èº«ä¸å†æ˜¯ä¸€ä¸ª å®Œæ•´çš„ NAT ä¼ è¾“è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯åœ¨ NAT ä¼ è¾“ç¯å¢ƒä¸­ä½œä¸ºä¸€ä¸ªè¾…åŠ©çš„è§£å†³æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº† TCP çš„æ”¯æŒã€‚RFC5389 åºŸå¼ƒäº† RFC3489ï¼ˆå› æ­¤RFC3489é€šå¸¸ç§°ä¸º classic STUNï¼‰ï¼Œä½†ä¾æ—§æ˜¯åå‘å…¼å®¹çš„ã€‚STUN æ˜¯ä¸€ç§ Client&#x2F;Server çš„åè®®ï¼Œä¹Ÿæ˜¯ä¸€ç§ Request&#x2F;Response çš„åè®®ï¼Œé»˜è®¤ç«¯å£å·æ˜¯ 3478ã€‚\nSTUN å®Œæ•´çš„å®šä¹‰å‚è€ƒï¼šRFC5398\nTURNTURN æ˜¯ Traversal Using Relay NAT çš„ç¼©å†™ï¼Œå³ä½¿ç”¨ä¸­ç»§ç©¿é€ NATï¼ŒSTUN çš„ä¸­ç»§æ‰©å±•ã€‚ç®€å•çš„è¯´ï¼ŒTURN ä¸ STUN çš„å…±åŒç‚¹éƒ½æ˜¯é€šè¿‡ä¿®æ”¹åº”ç”¨å±‚ä¸­çš„ç§ç½‘åœ°å€è¾¾åˆ° NAT ç©¿é€çš„æ•ˆæœï¼Œä¸åŒç‚¹æ˜¯ TURN æ˜¯é€šè¿‡ä¸¤æ–¹é€šè®¯çš„â€œä¸­é—´äººâ€æ–¹å¼å®ç°ç©¿é€ã€‚\nTURN å®Œæ•´çš„å®šä¹‰å‚è€ƒï¼šRFC5766\nICEICE æ˜¯ Interactive Connectivity Establishment çš„ç¼©å†™ï¼Œå³äº’åŠ¨å¼è¿æ¥å»ºç«‹ï¼Œç”± IETF çš„ MMUSIC å·¥ä½œç»„å¼€å‘å‡ºæ¥çš„ï¼Œå®ƒæ‰€æä¾›çš„æ˜¯ä¸€ç§æ¡†æ¶ï¼Œä½¿å„ç§ NAT ç©¿é€æŠ€æœ¯å¯ä»¥å®ç°ç»Ÿä¸€ã€‚\nICE è·Ÿ STUN å’Œ TURN ä¸ä¸€æ ·ï¼ŒICE ä¸æ˜¯ä¸€ç§åè®®ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼ˆFrameworkï¼‰ï¼Œå®ƒæ•´åˆäº† STUN å’Œ TURNã€‚\nICE å®Œæ•´çš„å®šä¹‰å‚è€ƒï¼šRFC5245\n\nå‚è€ƒï¼šP2P æŠ€æœ¯è¯¦è§£(ä¸€)ï¼šNAT è¯¦è§£â€”â€”è¯¦ç»†åŸç†ã€P2P ç®€ä»‹P2P æŠ€æœ¯è¯¦è§£(äºŒ)ï¼šP2P ä¸­çš„ NAT ç©¿è¶Š(æ‰“æ´)æ–¹æ¡ˆè¯¦è§£P2P æŠ€æœ¯è¯¦è§£(ä¸‰)ï¼šP2P æŠ€æœ¯ä¹‹ STUNã€TURNã€ICE è¯¦è§£\n\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"WavéŸ³é¢‘ç¼–ç ","url":"/post/3666885372.html","content":"WAVæ ¼å¼æ˜¯å¾®è½¯å…¬å¸ï¼ˆMicrosoftï¼‰å¼€å‘çš„ä¸€ç§å£°éŸ³æ–‡ä»¶æ ¼å¼ï¼Œå®ƒç¬¦åˆ RIFF(Resource Interchange File Format)æ–‡ä»¶è§„èŒƒï¼Œç”¨äºä¿å­˜ Windows å¹³å°çš„éŸ³é¢‘ä¿¡æ¯èµ„æºï¼Œè¢« Windows å¹³å°åŠå…¶åº”ç”¨ç¨‹åºæ‰€å¹¿æ³›æ”¯æŒã€‚\nWAVE æ˜¯å½•éŸ³æ—¶ç”¨çš„æ ‡å‡†çš„ WINDOWS æ–‡ä»¶æ ¼å¼ï¼Œæ–‡ä»¶çš„æ‰©å±•åä¸ºâ€œWAVâ€ï¼Œæ•°æ®æœ¬èº«çš„æ ¼å¼ä¸º PCM æˆ–å…¶ä»–å‹ç¼©æ•°æ®ï¼Œå±äºæ— æŸéŸ³ä¹æ ¼å¼çš„ä¸€ç§ã€‚\næ‰€æœ‰çš„ WAV éƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶å¤´ï¼Œè¿™ä¸ªæ–‡ä»¶å¤´è®°å½•äº†éŸ³é¢‘æµçš„ç¼–ç å‚æ•°ã€‚WAVæ–‡ä»¶ = WAVå¤´ + PCMæ•°æ®ã€‚\n\n\néŸ³é¢‘ç¼–ç å‚æ•°åœ¨ä»‹ç» WAVE æ–‡ä»¶å¤´ä¹‹å‰ï¼Œéœ€è¦äº†è§£ä¸‹éŸ³é¢‘ç¼–ç çš„å„ä¸ªå‚æ•°çš„å«ä¹‰ï¼š\n\nå£°é“æ•°é‡(NumChannels)å£°é“æ•°æ˜¯æŒ‡æ”¯æŒèƒ½ä¸åŒå‘å£°çš„éŸ³å“çš„ä¸ªæ•°ï¼Œå®ƒæ˜¯è¡¡é‡éŸ³å“è®¾å¤‡çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ã€‚æˆ‘ä»¬æˆ´çš„è€³æœºå› ä¸ºåªæœ‰å·¦å³ 2 ä¸ªå–‡å­ï¼Œæ‰€ä»¥æœ€å¤šåªèƒ½æ”¯æŒ 2 ä¸ªå£°é“æ•°é‡ã€‚å•å£°é“ï¼ˆmonoï¼‰çš„å£°é“æ•°ä¸º 1ï¼›ç«‹ä½“å£°é“ï¼ˆstereoï¼‰çš„å£°é“æ•°é»˜è®¤ä¸º 2ï¼Œå³å·¦å³å£°é“ï¼›å››å£°é“å³å‰å·¦ã€å‰å³ï¼Œåå·¦ã€åå³ä¾› 4 ä¸ªå‘éŸ³ç‚¹ï¼›ç›®å‰è¿˜æœ‰ 5.1 å£°é“ã€7.1 å£°é“ã€‚\nå¯¹äºéŸ³é¢‘ç¼–ç å­˜å‚¨æ¥è¯´ï¼Œæ¯å¤šä¸€ä¸ªå£°é“ï¼Œå°±è¦å¤šå­˜å‚¨ä¸€ä»½æ•°æ®ã€‚\n\né‡‡æ ·ç‡(SampleRate)è¡¨ç¤ºæ¯ç§’é‡‡æ ·çš„æ¬¡æ•°ï¼Œå¸¸è§çš„æœ‰ 8000, 16000, 32000, 44100, 48000ã€‚\n\né‡‡æ ·ç²¾åº¦(BitPerSample)è¡¨ç¤ºæ¯æ¬¡ä»æ¯ä¸ªå£°é“é‡‡æ ·çš„æ•°æ®çš„å¤§å°ï¼Œä»¥æ¯”ç‰¹ä½å•ä½ã€‚ä¸€èˆ¬ä¸º 16,32ã€‚16 å³ 16 æ¯”ç‰¹ï¼Œä¹Ÿå°±æ˜¯ 2 ä¸ªå­—èŠ‚ã€‚\n\næ¯”ç‰¹ç‡(ByteRate)è¡¨ç¤ºæ¯ç§’çš„éŸ³é¢‘æ•°æ®å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå¯ä»¥æ ¹æ®ä¸Šé¢å‡ ä¸ªå‚æ•°æ±‚å¾—ã€‚ByteRate = SampleRate * NumChannels * BitPerSample  / 8\n\n\nWAVE æ–‡ä»¶å¤´\n\n\n\nåç§»\nå­—æ®µå­—èŠ‚æ•°\nå­—æ®µå\nè§£é‡Š\n\n\n\n0\n4\nChunkID\nâ€œRIFFâ€ä¸² åè¿›åˆ¶å¤§ç«¯è¡¨ç¤ºä¸º 0x52494646\n\n\n4\n4\nChunkSize\næ•´ä¸ªæ–‡ä»¶çš„å¤§å°å‡å» 8 å­—èŠ‚(ChunkID+ChunkSize)ã€‚36 + SubChunk2Sizeæˆ–è€… 4 + (8 + SubChunk1Size) + (8 + SubChunk2Size)\n\n\n8\n4\nFormat\nâ€œWAVEâ€ä¸²ï¼Œåå…­è¿›åˆ¶å¤§ç«¯è¡¨ç¤ºä¸º 0x57415645\n\n\n12\n4\nSubchunk1ID\nâ€œfmt â€œä¸²ï¼Œåå…­è¿›åˆ¶å¤§ç«¯è¡¨ç¤ºä¸º 0x666d7420\n\n\n16\n4\nSubchunk1Size\næ•´ä¸ª Subchunk1 çš„å¤§å°å‡å»è¯¥å­—æ®µæœ¬èº«æ‰€å çš„ 4 å­—èŠ‚ï¼Œå¯¹äº PCM æ¥è¯´å›ºå®šä¸º 16\n\n\n20\n2\nAudioFormat\nPCM æ ¼å¼ä¸º 1ï¼Œå¤§äº 1 è¡¨ç¤ºå…¶ä»–å‹ç¼©æ ¼å¼\n\n\n22\n2\nNumChannels\nå£°é“æ•°é‡ï¼Œå¦‚ Mono &#x3D; 1, Stereo &#x3D; 2\n\n\n24\n4\nSampleRate\né‡‡æ ·ç‡ï¼Œå¦‚ 8000, 44100 ç­‰\n\n\n28\n4\nByteRate\næ¯”ç‰¹ç‡ï¼Œ ç­‰äºSampleRate * NumChannels * BitsPerSample/8\n\n\n32\n2\nBlockAlign\næ¯ä¸ª Sample çš„å¤§å°ï¼Œç­‰äºNumChannels * BitsPerSample/8\n\n\n34\n2\nBitsPerSample\né‡‡æ ·ç²¾åº¦ï¼Œå¦‚ 8,16,32\n\n\n36\n4\nSubchunk2ID\nâ€œdataâ€ä¸²ï¼Œåå…­è¿›åˆ¶å¤§ç«¯è¡¨ç¤ºä¸º 0x64617461\n\n\n40\n4\nSubchunk2Size\nå®é™…éŸ³é¢‘æ•°æ®çš„å¤§å°ï¼Œä¸åŒ…å« Subchunk2ID å’Œ Subchunk2Size è¿™ 2 ä¸ªå­—æ®µçš„å¤§å°\n\n\n44\n*\nData\nå®é™…çš„éŸ³é¢‘æ•°æ®\n\n\nä¸‹å›¾æ˜¯ä»¥åå…­è¿›åˆ¶æ˜¾ç¤ºçš„ä¸€ä¸ª WAV æ–‡ä»¶çš„å‰ 72 å­—èŠ‚ï¼š\nä»å…¶ä»–ç¼–ç è½¬ WAVEæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ffmpeg.exe å°†éŸ³é¢‘ä»å…¶ä»–ç¼–ç è½¬ä¸º wave ç¼–ç ï¼Œå‘½ä»¤å¦‚ä¸‹:\nffmpeg.exe -i input.mp3  output.wav\n\næˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼Œå¦‚é‡‡ç”¨ç‡ï¼Œé‡‡æ ·ç²¾åº¦ï¼Œå£°é“æ•°ï¼Œå¦‚ï¼š\nffmpeg.exe  -f u16le -ar 44100 -ac 1 -i input.mp3 output.wav\n\nffmpeg å‚æ•°è§£é‡Šè§ï¼šhttp://trac.ffmpeg.org/wiki/audio%20types\nffmpeg ç”Ÿæˆçš„ wav æ–‡ä»¶çš„æ–‡ä»¶å¤´å¯èƒ½å’Œæˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„ä¸å¤ªä¸€æ ·ï¼Œå®ƒå¯èƒ½ä¼šåŒ…å«LISTå’ŒINFOæ•°æ®å—ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å°±éœ€è¦é€šè¿‡ 2 ä¸ªæ­¥éª¤æ¥ç”Ÿæˆä¸åŒ…å«LISTå’ŒINFOæ•°æ®å—çš„ WAV æ–‡ä»¶äº†ï¼šé¦–å…ˆé€šè¿‡ ffmpeg.exe å°†éŸ³é¢‘æ–‡ä»¶è½¬æˆ pcm è£¸æ•°æ®æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å…¶ä»–å·¥å…·ï¼ˆå¦‚audacityï¼‰ä¸ºè¯¥ pcm è£¸æ•°æ®åŠ ä¸Š wav å¤´ã€‚\nffmpeg å°†éŸ³é¢‘è½¬æˆ pcm è£¸æ•°æ®å‘½ä»¤å¦‚ä¸‹ï¼š\nffmpeg.exe -f s16le -c:a pcm_u16le  -i input.mp3 output.raw\n\nWebRTC å¯¹ Wav æ ¼å¼æ”¯æŒWebRTC æºç src\\common_audioç›®å½•ä¸­çš„wav_header.hå’Œwav_file.hæä¾›äº†å¯¹ wav çš„è¯»å†™åŠŸèƒ½ã€‚\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"]},{"title":"SDPæ ¼å¼è§£æ","url":"/post/2172509399.html","content":"ä¼šè¯æè¿°åè®®ï¼ˆSession Description Protocol æˆ–ç®€å†™ SDPï¼‰æè¿°çš„æ˜¯æµåª’ä½“çš„åˆå§‹åŒ–å‚æ•°ã€‚æ­¤åè®®ç”± IETF å‘è¡¨ä¸º RFC 2327ã€‚\nSDP å®Œå…¨æ˜¯ä¸€ç§ä¼šè¯æè¿°æ ¼å¼ï¼Œå®ƒä¸å±äºä¼ è¾“åè®®ã€‚\nSDP ç”¨äºæè¿°å¤šåª’ä½“é€šä¿¡ä¼šè¯ï¼ŒåŒ…æ‹¬ä¼šè¯å»ºç«‹ã€ä¼šè¯è¯·æ±‚å’Œå‚æ•°åå•†ã€‚SDP ä¸ç”¨äºä¼ è¾“åª’ä½“æ•°æ®ï¼Œåªèƒ½ç”¨äºä¸¤ä¸ªé€šä¿¡ç»ˆç«¯çš„å‚æ•°åå•†ï¼ŒåŒ…æ‹¬åª’ä½“ç±»å‹ã€æ ¼å¼ä»¥åŠæ‰€æœ‰å…¶ä»–å’Œä¼šè¯ç›¸å…³çš„å±æ€§ã€‚SDP ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æè¿°ä¸Šè¿°åˆå§‹åŒ–å‚æ•°ã€‚\n\n\nSDP ç»„æˆSDP æ˜¯ç”±å¤šè¡Œæ–‡æœ¬ç»„æˆçš„ä¸€ä¸ªçº¯æ–‡æœ¬åè®®ï¼Œå¦‚æœå°†SDPä»è¯­ä¹‰ä¸Šåˆ†è§£æˆä¸åŒç»„ä»¶æ¥æè¿°ä¸€ä¸ªå¤šåª’ä½“ä¼šè¯ä¿¡æ¯ï¼Œé‚£ä¹ˆSDPç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š\n\nä¼šè¯ä¿¡æ¯\nç½‘ç»œä¿¡æ¯\nåª’ä½“ä¿¡æ¯\nå®‰å…¨ä¿¡æ¯\næœåŠ¡è´¨é‡å’Œåˆ†ç»„ä¿¡æ¯\n\n                                                +---------------------+                                                |        v=           |                                                +---------------------+                +---------------------+         +---------------------+        ====    |   Session Metadata  |  =====  |        o=           |        |       +---------------------+         +----------------------        |                                       +---------------------+        |                                       |        t=           |        |                                       +---------------------+        |        |        |                                       +---------------------+        |                                       |        c=           |        |                                       +---------------------+        |       +---------------------+        ====    | Network Description |   =====        |       +---------------------+        |                                       +---------------------+        |                                       |    a=candidate      |        |                                       +---------------------+        |        |        |                                       +---------------------+        |                                       |        m=           |        |                                       +---------------------+        |        +---------------------+        +---------------------+        ====     | Stream Description  |  ===== |      a=rtpmap       |        |        +---------------------+        +----------------------        |                                       +---------------------+        |                                       |      a=fmtp         |        |                                       +---------------------+        |                                       +---------------------+        |                                       |      a=sendrecv..   |        |                                       +---------------------++---------------+|    SEMANTIC   || COMPONENTS OF ||     SDP       |+---------------+        |                                       +---------------------+        |                                       |      a=crypto       |        |                                       +---------------------+        |         +---------------------+       +---------------------+        ====      |Security Descriptions|  =====|      a=ice-frag     |        |         +---------------------+       +----------------------        |                                       +---------------------+        |                                       |      a=ice-pwd      |        |                                       +---------------------+        |                                       +---------------------+        |                                       |     a=fingerprint   |        |                                       +---------------------+        |        |        |        |                                       +---------------------+        |                                       |      a=rtcp-fb      |        |                                       +---------------------+        |         +---------------------+       +---------------------+        ====      |   Qos,Grouping      |       |                     |                  |   Descriptions      |  =====|       a=group       |                  +---------------------+       +----------------------                                                +---------------------+                                                |       a=rtcpmux     |                                                +---------------------+\n\nSDP æ ¼å¼SDP ç”±å¤šè¡Œç»„æˆï¼Œæ¯è¡Œçš„çš„æ ¼å¼å¦‚ä¸‹ï¼š\n&lt;type&gt;=&lt;value&gt;\n\n\n&lt;type&gt;: åŒºåˆ†å¤§å°å†™ï¼Œä»£è¡¨ç‰¹å®šçš„å±æ€§ï¼Œä¾‹å¦‚vä»£è¡¨ SDP ç‰ˆæœ¬ã€‚\n&lt;value&gt;ï¼šUTF8 ç¼–ç çš„æ–‡æœ¬ï¼Œå…·ä½“æ ¼å¼ä¸ç±»å‹æœ‰å…³ã€‚\n=ä¸¤è¾¹ä¸å…è®¸å­˜åœ¨ç©ºæ ¼ã€‚\n=*è¡¨ç¤ºè¯¥é¡¹æ˜¯å¯é€‰çš„ã€‚\n\nä¸‹é¢æ˜¯ WebRTCï¼ˆbranch_76ï¼‰çš„ä¸€ä¸ªçœŸå® SDP æ ·æœ¬:\n// -------------------------------- ã€Session Metadataéƒ¨åˆ†ã€‘ --------------------------------// sdpç‰ˆæœ¬å·v=0// o=&lt;username&gt; &lt;sess-id&gt; &lt;sess-version&gt; &lt;nettype&gt; &lt;addrtype&gt; &lt;unicast-address&gt;// usernameå¦‚ä½•æ²¡æœ‰ä½¿ç”¨-ä»£æ›¿ï¼Œ3967017503571418851æ˜¯æ•´ä¸ªä¼šè¯çš„ç¼–å·ï¼Œ2ä»£è¡¨ä¼šè¯ç‰ˆæœ¬ï¼Œå¦‚æœåœ¨ä¼šè¯è¿‡ç¨‹ä¸­æœ‰æ”¹å˜ç¼–ç ä¹‹ç±»çš„æ“ä½œï¼Œé‡æ–°ç”Ÿæˆsdpæ—¶,sess-idä¸å˜ï¼Œsess-versionåŠ 1o=- 3967017503571418851 2 IN IP4 127.0.0.1//ä¼šè¯ås=-// ä¼šè¯çš„èµ·å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œ0ä»£è¡¨æ²¡æœ‰é™åˆ¶t=0 0// è¡¨ç¤ºéœ€è¦å…±ç”¨ä¸€ä¸ªä¼ è¾“é€šé“ä¼ è¾“çš„åª’ä½“ï¼Œé€šè¿‡ssrcè¿›è¡ŒåŒºåˆ†ä¸åŒçš„æµã€‚å¦‚æœæ²¡æœ‰è¿™ä¸€è¡Œï¼ŒéŸ³è§†é¢‘æ•°æ®å°±ä¼šåˆ†åˆ«ç”¨å•ç‹¬udpç«¯å£æ¥å‘é€.a=group:BUNDLE audio video// WMSæ˜¯WebRTC Media Streamç®€ç§°;// è¿™ä¸€è¡Œå®šä¹‰äº†æœ¬å®¢æˆ·ç«¯æ”¯æŒåŒæ—¶ä¼ è¾“å¤šä¸ªæµï¼Œä¸€ä¸ªæµå¯ä»¥åŒ…æ‹¬å¤šä¸ªtrack.// ä¸€èˆ¬å®šä¹‰äº†è¿™ä¸ªï¼Œåé¢a=ssrcè¿™ä¸€è¡Œå°±ä¼šæœ‰msid,mslabelç­‰å±æ€§.a=msid-semantic: WMS stream_id// -------------------------------- ã€Stream Descriptionéƒ¨åˆ†ã€‘ --------------------------------// ------------ audioéƒ¨åˆ† -------------// mæ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªåª’ä½“è¡Œ.// m=audioè¯´æ˜æœ¬ä¼šè¯åŒ…å«éŸ³é¢‘ï¼Œ9ä»£è¡¨éŸ³é¢‘ä½¿ç”¨ç«¯å£9æ¥ä¼ è¾“ï¼Œä½†æ˜¯åœ¨webrtcä¸­ç°åœ¨ä¸€èˆ¬ä¸ä½¿ç”¨ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œä»£è¡¨ä¸ä¼ è¾“éŸ³é¢‘,// UDP/TLS/RTP/SAVPFæ˜¯è¡¨ç¤ºç”¨æˆ·æ”¯æŒæ¥ä¼ è¾“éŸ³é¢‘çš„åè®®ï¼Œudp,tls,rtpä»£è¡¨ä½¿ç”¨udpæ¥ä¼ è¾“rtpåŒ…ï¼Œå¹¶ä½¿ç”¨tlsåŠ å¯†// SAVPFä»£è¡¨ä½¿ç”¨srtcpçš„åé¦ˆæœºåˆ¶æ¥æ§åˆ¶é€šä¿¡è¿‡ç¨‹// åé¢çš„111 103 104 9 102 0 8 106 105 13 110 112 113 126è¡¨ç¤ºæœ¬ä¼šè¯éŸ³é¢‘æ”¯æŒçš„ç¼–ç ï¼Œåé¢å‡ è¡Œä¼šæœ‰è¯¦ç»†è¡¥å……è¯´æ˜.m=audio 9 UDP/TLS/RTP/SAVPF 111 103 104 9 102 0 8 106 105 13 110 112 113 126// è¡¨ç¤ºä½ è¦ç”¨æ¥æ¥æ”¶æˆ–è€…å‘é€éŸ³é¢‘ä½¿ç”¨çš„IPåœ°å€.// webrtcä½¿ç”¨iceä¼ è¾“ï¼Œä¸ä½¿ç”¨è¿™ä¸ªåœ°å€c=IN IP4 0.0.0.0// ç”¨æ¥ä¼ è¾“rtcpçš„åœ°å€å’Œç«¯å£ï¼Œwebrtcä¸­ä¸ä½¿ç”¨a=rtcp:9 IN IP4 0.0.0.0// ä¸‹é¢2è¡Œæ˜¯iceåå•†è¿‡ç¨‹ä¸­çš„å®‰å…¨éªŒè¯ä¿¡æ¯a=ice-ufrag:kSq0a=ice-pwd:pWLGrCTwFNq6rm249ZEasHPY// é€šçŸ¥å¯¹ç«¯æ”¯æŒtrickleï¼Œå³sdpé‡Œé¢æè¿°åª’ä½“ä¿¡æ¯å’Œiceå€™é€‰é¡¹çš„ä¿¡æ¯å¯ä»¥åˆ†å¼€ä¼ è¾“a=ice-options:trickle// dtlsåå•†è¿‡ç¨‹ä¸­éœ€è¦çš„è®¤è¯ä¿¡æ¯a=fingerprint:sha-256 A0:D6:B2:63:1B:69:0E:91:01:C3:88:A9:92:6F:E7:EF:5B:36:52:66:08:DF:94:A0:FE:0C:C9:06:BF:2C:38:A2// ä»£è¡¨æœ¬å®¢æˆ·ç«¯åœ¨dtlsåå•†è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åšå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥åšæœåŠ¡ç«¯, å‚è€ƒrfc4145 rfc4572a=setup:actpass// å‰é¢BUNDLEè¡Œä¸­ç”¨åˆ°çš„åª’ä½“æ ‡è¯†a=mid:audio// æŒ‡å‡ºè¦åœ¨rtpå¤´éƒ¨ä¸­åŠ å…¥éŸ³é‡ä¿¡æ¯ï¼Œå‚è€ƒ rfc6464a=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level// æŒ‡å‡ºæ˜¯åŒå‘é€šä¿¡ï¼Œå¦å¤–å‡ ç§ç±»å‹æ˜¯recvonly,sendonly,inactivea=sendrecv// æŒ‡å‡ºrtp,rtcpåŒ…ä½¿ç”¨åŒä¸€ä¸ªç«¯å£æ¥ä¼ è¾“a=rtcp-mux// ä¸‹é¢åå‡ è¡Œéƒ½æ˜¯å¯¹m=audioè¿™ä¸€è¡Œçš„åª’ä½“ç¼–ç è¡¥å……è¯´æ˜ï¼ŒæŒ‡å‡ºäº†ç¼–ç é‡‡ç”¨çš„ç¼–å·ï¼Œé‡‡æ ·ç‡ï¼Œå£°é“ç­‰a=rtpmap:111 opus/48000/2a=rtcp-fb:111 transport-cc// ä¸‹é¢ä¸€è¡Œå¯¹opusç¼–ç å¯é€‰çš„è¡¥å……è¯´æ˜,minptimeä»£è¡¨æœ€å°æ‰“åŒ…æ—¶é•¿æ˜¯10msï¼Œuseinbandfec=1ä»£è¡¨ä½¿ç”¨opusç¼–ç å†…ç½®fecç‰¹æ€§a=fmtp:111 minptime=10;useinbandfec=1a=rtpmap:103 ISAC/16000a=rtpmap:104 ISAC/32000a=rtpmap:9 G722/8000a=rtpmap:102 ILBC/8000a=rtpmap:0 PCMU/8000a=rtpmap:8 PCMA/8000a=rtpmap:106 CN/32000a=rtpmap:105 CN/16000a=rtpmap:13 CN/8000a=rtpmap:110 telephone-event/48000a=rtpmap:112 telephone-event/32000a=rtpmap:113 telephone-event/16000a=rtpmap:126 telephone-event/8000// cnameç”¨æ¥æ ‡è¯†ä¸€ä¸ªæ•°æ®æºï¼Œssrcå½“å‘ç”Ÿå†²çªæ—¶å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯cnameä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šå‡ºç°åœ¨rtcpåŒ…ä¸­SDECä¸­ï¼Œç”¨äºéŸ³è§†é¢‘åŒæ­¥a=ssrc:2603526440 cname:AyMDWB+q6ApWdpfUa=ssrc:2603526440 msid:stream_id audio_labela=ssrc:2603526440 mslabel:stream_ida=ssrc:2603526440 label:audio_label// ------------ videoéƒ¨åˆ† -------------m=video 9 UDP/TLS/RTP/SAVPF 96 97 98 99 100 101 127c=IN IP4 0.0.0.0a=rtcp:9 IN IP4 0.0.0.0a=ice-ufrag:kSq0a=ice-pwd:pWLGrCTwFNq6rm249ZEasHPYa=ice-options:tricklea=fingerprint:sha-256 A0:D6:B2:63:1B:69:0E:91:01:C3:88:A9:92:6F:E7:EF:5B:36:52:66:08:DF:94:A0:FE:0C:C9:06:BF:2C:38:A2a=setup:actpassa=mid:videoa=extmap:2 urn:ietf:params:rtp-hdrext:toffseta=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-timea=extmap:4 urn:3gpp:video-orientationa=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01a=extmap:6 http://www.webrtc.org/experiments/rtp-hdrext/playout-delaya=extmap:7 http://www.webrtc.org/experiments/rtp-hdrext/video-content-typea=extmap:8 http://www.webrtc.org/experiments/rtp-hdrext/video-timinga=sendrecva=rtcp-muxa=rtcp-rsizea=rtpmap:96 VP8/90000a=rtcp-fb:96 goog-remba=rtcp-fb:96 transport-cca=rtcp-fb:96 ccm fira=rtcp-fb:96 nacka=rtcp-fb:96 nack plia=rtpmap:97 rtx/90000a=fmtp:97 apt=96a=rtpmap:98 VP9/90000a=rtcp-fb:98 goog-remba=rtcp-fb:98 transport-cca=rtcp-fb:98 ccm fira=rtcp-fb:98 nacka=rtcp-fb:98 nack plia=rtpmap:99 rtx/90000a=fmtp:99 apt=98a=rtpmap:100 red/90000a=rtpmap:101 rtx/90000a=fmtp:101 apt=100a=rtpmap:127 ulpfec/90000a=ssrc-group:FID 1563406656 4103641903a=ssrc:1563406656 cname:AyMDWB+q6ApWdpfUa=ssrc:1563406656 msid:stream_id video_labela=ssrc:1563406656 mslabel:stream_ida=ssrc:1563406656 label:video_labela=ssrc:4103641903 cname:AyMDWB+q6ApWdpfUa=ssrc:4103641903 msid:stream_id video_labela=ssrc:4103641903 mslabel:stream_ida=ssrc:4103641903 label:video_label\n\nåè®®ç‰ˆæœ¬ç¬¬ä¸€è¡Œv=0å®šä¹‰äº† sdp åè®®çš„ç‰ˆæœ¬å·ã€‚\nä¼šè¯å‘èµ·è€…ç¬¬äºŒè¡Œ\no=- 3967017503571418851 2 IN IP4 127.0.0.1\n\nå®šä¹‰äº†ä¼šè¯å‘èµ·è€…çš„ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\no=&lt;username&gt; &lt;sess-id&gt; &lt;sess-version&gt; &lt;nettype&gt; &lt;addrtype&gt; &lt;unicast-address&gt;\n\n\nusernameï¼šå‘èµ·è€…çš„ç”¨æˆ·åï¼Œä¸å…è®¸å­˜åœ¨ç©ºæ ¼ï¼Œå¦‚æœåº”ç”¨ä¸æ”¯æŒç”¨æˆ·åï¼Œåˆ™ä¸º-ã€‚\nsess-idï¼šä¼šè¯ idï¼Œç”±åº”ç”¨è‡ªè¡Œå®šä¹‰ï¼ŒSDP è§„èŒƒå»ºè®®ä½¿ç”¨ NTP(Network Time Protocol)æ—¶é—´æˆ³ã€‚\nsess-versionï¼šä¼šè¯ç‰ˆæœ¬ï¼Œç”¨é€”ç”±åº”ç”¨è‡ªè¡Œå®šä¹‰ï¼Œåªè¦ä¼šè¯æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæ¯”å¦‚ç¼–ç ï¼‰sess-version éšç€é€’å¢å³å¯ã€‚SDP è§„èŒƒå»ºè®®ä½¿ç”¨ NTP æ—¶é—´æˆ³ã€‚\nnettypeï¼šç½‘ç»œç±»å‹ï¼Œæ¯”å¦‚ IN è¡¨ç¤º Internetã€‚\naddrtypeï¼šåœ°å€ç±»å‹ï¼Œæ¯”å¦‚ IP4ã€IV6\nunicast-addressï¼šåŸŸåï¼Œæˆ–è€… IP åœ°å€ã€‚\n\nä¼šè¯ås=&lt;session name&gt;\n\nå¿…é€‰ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªs=å­—æ®µï¼Œä¸”ä¸èƒ½ä¸ºç©ºã€‚å¯ä»¥èµ‹ä¸€ä¸ªç©ºæ ¼ï¼ˆå³s= ï¼‰ï¼Œæˆ–è€…-ã€‚\nè¿æ¥ä¿¡æ¯c=&lt;nettype&gt; &lt;addrtype&gt; &lt;connection-address&gt;\n\næ¯ä¸ª SDP è‡³å°‘éœ€è¦åŒ…å«ä¸€ä¸ªä¼šè¯çº§åˆ«çš„c=å­—æ®µï¼Œæˆ–è€…åœ¨æ¯ä¸ªåª’ä½“æè¿°åé¢å„åŒ…å«ä¸€ä¸ªc=å­—æ®µï¼Œï¼ˆåª’ä½“æè¿°åçš„c=ä¼šè¦†ç›–ä¼šè¯çº§åˆ«çš„c=ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ SDP æ ·æœ¬ä¸­ï¼Œå°±ä¸å­˜åœ¨ä¼šè¯çº§åˆ«çš„è¿æ¥ä¿¡æ¯ã€‚\n\nnettypeï¼šç½‘ç»œç±»å‹ï¼Œæ¯”å¦‚ INï¼Œè¡¨ç¤º Internetã€‚\naddrtypeï¼šåœ°å€ç±»å‹ï¼Œæ¯”å¦‚ IP4ã€IP6ã€‚\nconnection-addressï¼šå¦‚æœæ˜¯å¹¿æ’­ï¼Œåˆ™ä¸ºå¹¿æ’­åœ°å€ç»„ï¼›å¦‚æœæ˜¯å•æ’­ï¼Œåˆ™ä¸ºå•æ’­åœ°å€ï¼›\n\nä¼šè¯çº§åˆ«å’Œåª’ä½“çº§åˆ«ä¼šè¯çº§éƒ¨åˆ†ä»¥v =è¡Œå¼€å§‹ï¼Œåˆ°ç¬¬ä¸€ä¸ªåª’ä½“çº§éƒ¨åˆ†ç»“æŸã€‚æ¯ä¸ªåª’ä½“çº§éƒ¨åˆ†ä»¥m =è¡Œå¼€å§‹ï¼ŒæŒç»­åˆ°ä¸‹ä¸€ä¸ªåª’ä½“çº§ï¼ˆå³ä¸‹ä¸€ä¸ªm=ï¼‰ã€‚\nåª’ä½“æè¿°ä¿¡æ¯SDP å¯ä»¥åŒæ—¶åŒ…å«å¤šä¸ªåª’ä½“æè¿°ä¿¡æ¯ï¼ˆå¦‚éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\nm=&lt;media&gt; &lt;port&gt; &lt;proto&gt; &lt;fmt&gt; ...\n\nç¤ºä¾‹ï¼š\nm=audio 9 UDP/TLS/RTP/SAVPF 111 103 104 9 102 0 8 106 105 13 110 112 113 126c=IN IP4 0.0.0.0\n\n\nmediaï¼šåª’ä½“ç±»å‹ï¼ŒåŒ…æ‹¬ videoã€audioã€textã€applicationã€message ç­‰ã€‚\nportï¼šä¼ è¾“åª’ä½“æµä½¿ç”¨çš„ç«¯å£ï¼Œå…·ä½“å«ä¹‰å–å†³äºä½¿ç”¨çš„ç½‘ç»œç±»å‹ï¼ˆåœ¨c=ä¸­å£°æ˜ï¼‰å’Œä½¿ç”¨çš„ä¼ è¾“åè®®(proto)ã€‚\nprotoï¼šä¼ è¾“åè®®ï¼Œå…·ä½“å«ä¹‰å–å†³äºc=ä¸­å®šä¹‰çš„åœ°å€ç±»å‹ï¼Œæ¯”å¦‚c=IP4ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ä¼ è¾“åè®®è¿è¡Œåœ¨ IP4 ä¹‹ä¸Šã€‚\nfmtï¼šåª’ä½“æ ¼å¼çš„æè¿°ï¼Œå¯èƒ½æœ‰å¤šä¸ªã€‚æ ¹æ®protoçš„ä¸åŒï¼Œfmtçš„å«ä¹‰ä¹Ÿä¸åŒã€‚æ¯”å¦‚protoä¸º RTP&#x2F;SAVP æ—¶ï¼Œfmt è¡¨ç¤º RTP payload çš„ç±»å‹ã€‚å¦‚æœæœ‰å¤šä¸ªï¼Œè¡¨ç¤ºåœ¨è¿™æ¬¡ä¼šè¯ä¸­ï¼Œå¤šç§ payload ç±»å‹å¯èƒ½ä¼šç”¨åˆ°ï¼Œä¸”ç¬¬ä¸€ä¸ªä¸ºé»˜è®¤çš„ payload ç±»å‹ã€‚æ•°å­—0~95æ˜¯é™æ€è´Ÿè½½ç±»å‹ï¼›96~127æ˜¯åŠ¨æ€è´Ÿè½½ç±»å‹ï¼Œéœ€è¦åœ¨åé¢ä½¿ç”¨é™„è¿‘å±æ€§a = rtpmap:æŒ‡å®šå…·ä½“çš„æ ¼å¼å‚æ•°ã€‚å…·ä½“çš„æ¯ä¸ªæ•°å­—ä»£è¡¨çš„è´Ÿè½½ç±»å‹å’Œå«ä¹‰å¯ä»¥å‚è€ƒï¼šReal-Time Transport Protocol (RTP) Parameterså¦‚ä¸Šä¾‹ä¸­çš„ audio ç±»å‹çš„111è¡¨ç¤ºä½¿ç”¨ opus ç¼–ç ã€‚\n\né™„åŠ å±æ€§é™„åŠ å±æ€§ç”¨äºæ‰©å±• SDPï¼Œæœ‰ 2 ç§ä½œç”¨èŒƒå›´ï¼šä¼šè¯çº§åˆ«ã€åª’ä½“çº§åˆ«ï¼š\n\nåª’ä½“çº§åˆ«ï¼šåª’ä½“æè¿°ï¼ˆm&#x3D;ï¼‰åé¢å¯ä»¥è·Ÿä»»æ„æ•°é‡çš„ a&#x3D; å­—æ®µï¼Œå¯¹åª’ä½“æè¿°è¿›è¡Œæ‰©å±•ã€‚\nä¼šè¯çº§åˆ«ï¼šåœ¨ç¬¬ä¸€ä¸ªåª’ä½“å­—æ®µ(media field)å‰ï¼Œæ·»åŠ çš„ a&#x3D; å­—æ®µæ˜¯ä¼šè¯çº§åˆ«çš„ã€‚\n\næœ‰ä¸‹é¢ 2 ç§æ ¼å¼ï¼š\na=&lt;attribute&gt;a=&lt;attribute&gt;:&lt;value&gt;\n\næ—¶é—´ç”¨äºå£°æ˜ä¼šè¯çš„å¼€å§‹ã€ç»“æŸæ—¶é—´ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\nt=&lt;start-time&gt; &lt;stop-time&gt;\n\nå¦‚æœ&lt;stop-time&gt;æ˜¯ 0ï¼Œè¡¨ç¤ºä¼šè¯æ²¡æœ‰ç»“æŸçš„è¾¹ç•Œï¼Œä½†æ˜¯éœ€è¦åœ¨&lt;start-time&gt;ä¹‹åä¼šè¯æ‰æ˜¯æ´»è·ƒ(active)çš„ï¼›å¦‚æœ&lt;start-time&gt;æ˜¯ 0ï¼Œè¡¨ç¤ºä¼šè¯æ˜¯æ°¸ä¹…çš„ã€‚\n\nSDP for the WebRTC &gt; WebRTCï¼šä¼šè¯æè¿°åè®® SDP &gt; WebRTC ä¸­çš„ SDP åè®®\n\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"ç¼–è¯‘å™¨åŸºç¡€æ¦‚å¿µ","url":"/post/3064318708.html","content":"C++ä»£ç ç¼–è¯‘æµç¨‹ä»¥ä¸‹é¢ C++ä»£ç ä¸ºä¾‹ï¼š\n#include &lt;stdio.h&gt;â€‹int main()&#123;    printf(&quot;Hello World&quot;);    return 0;&#125;\n\nç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶éœ€è¦ç»è¿‡å¦‚ä¸‹ 4 ä¸ªè¿‡ç¨‹ï¼š\n\né¢„ç¼–è¯‘ï¼šå°† hello.c å’Œ stdio.h é¢„ç¼–è¯‘ä¸º hello.i\nç¼–è¯‘ï¼šå°† hello.i ç¼–è¯‘ä¸º hello.s\næ±‡ç¼–ï¼šå°† hello.s ç¿»è¯‘ä¸ºæœºå™¨æŒ‡ä»¤ hello.oï¼ˆ.o ç›®æ ‡æ–‡ä»¶ï¼‰\né“¾æ¥ï¼šé“¾æ¥å„ç§éœ€è¦çš„åº“å’Œå…¶ä»–ç›®æ ‡æ–‡ä»¶ï¼ˆè¯¥ hello ç¨‹åºä¸éœ€è¦ï¼‰å¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶ hello.outï¼ˆç›¸å½“äº windows çš„.exeï¼‰ã€‚\n\n\n\nç¼–è¯‘å™¨æ¶æ„ç¼–è¯‘å™¨é€šå¸¸åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\nå‰ç«¯ï¼ˆFrontEndï¼‰\nä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰\nåç«¯ï¼ˆBackEndï¼‰\n\nåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå‰ç«¯ä¸»è¦è´Ÿè´£è¯æ³•å’Œè¯­æ³•åˆ†æï¼Œå°†æºä»£ç è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼›ä¼˜åŒ–å™¨åˆ™æ˜¯åœ¨å‰ç«¯çš„åŸºç¡€ä¸Šï¼Œå¯¹å¾—åˆ°çš„ä¸­é—´ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä½¿ä»£ç æ›´åŠ é«˜æ•ˆï¼›åç«¯åˆ™æ˜¯å°†å·²ç»ä¼˜åŒ–çš„ä¸­é—´ä»£ç è½¬åŒ–ä¸ºé’ˆå¯¹å„è‡ªå¹³å°çš„æœºå™¨ä»£ç ã€‚\nGCCGCC(GNU Compiler Collectionï¼ŒGNU ç¼–è¯‘å™¨é›†åˆ)æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¼–è¯‘å™¨ï¼ŒåŒ…å« FrontEndã€Optimizer å’Œ BackEndã€‚\nLLVM æ¶æ„Clangæ˜¯ LLVM ç¼–è¯‘å™¨æ¶æ„çš„å‰ç«¯ï¼Œå¯ä»¥ç”¨æ¥ç¼–è¯‘ Cï¼ŒC++ï¼ŒObjectiveC ç­‰è¯­è¨€ï¼›\nLLVMæ˜¯è¯¥æ¶æ„çš„ä¼˜åŒ–å™¨å’Œåç«¯ï¼›\näºŒè€…ç»Ÿç§°ä¸º LLVM æ¶æ„ã€‚\n\nç¼–è¯‘ç‰ˆæœ¬é€‰æ‹©x86ã€x86-64ã€AMD64x86 æ˜¯æŒ‡ Intel çš„å¼€å‘çš„ä¸€ç§ 32 ä½æŒ‡ä»¤é›†ï¼Œä» 386 æ—¶ä»£å¼€å§‹ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šï¼Œæ‰€æœ‰ Intel æ—©æœŸçš„ cpuï¼Œä»¥åŠ amd æ—©æœŸçš„ cpu éƒ½æ”¯æŒè¿™ç§æŒ‡ä»¤é›†ã€‚\nç”±äºAMD é¢†å…ˆ Intel åˆ¶é€ å‡ºå…¼å®¹ x86 çš„å•†ç”¨ CPUï¼ŒAMD ç§°ä¹‹ä¸º AMD64ï¼Œä¸”å¾—åˆ°ç”¨æˆ·çš„è®¤åŒã€‚Intel åé¢æ‰å†³å®šè®¾è®¡ä¸€ç§ä¸å…¼å®¹ x86 çš„å…¨æ–° 64 ä½æŒ‡ä»¤é›†ï¼Œç§°ä¹‹ä¸º IA-64ï¼Œç”±äºæ˜¯å…¨æ–°è®¾è®¡çš„ CPUï¼Œæ²¡æœ‰ç¼–è¯‘å™¨ã€ä¸æ”¯æŒ Windowsï¼Œåæ¥è¿˜ä¸å¾—ä¸åœ¨æ—¶æœºè½åçš„æƒ…å†µä¸‹å¼€å§‹æ”¯æŒ AMD64 æŒ‡ä»¤é›†ï¼Œå› æ­¤ Intel å°† IA-64 æ¢äº†ä¸ªåå­—ï¼Œå« x86_64ï¼Œè¡¨ç¤º x86 æŒ‡ä»¤é›†çš„ 64 ä½æ‰©å±•ã€‚\nx86_64ã€x64ã€AMD64 å®é™…ä¸Šæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨çš„ intel&#x2F;amd çš„æ¡Œé¢çº§ CPU åŸºæœ¬ä¸Šéƒ½æ˜¯ x86_64ã€‚\ni386i386 å³ Intel 80386ã€‚ å…¶å® i386 é€šå¸¸è¢«ç”¨æ¥ä½œä¸ºå¯¹ Intelï¼ˆè‹±ç‰¹å°”ï¼‰32 ä½å¾®å¤„ç†å™¨çš„ç»Ÿç§°ã€‚\nä½†æ˜¯ç›®å‰æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¬è®¤ i386 ä¸º 32 ä½ç³»ç»Ÿï¼Œå…¶å®å°±æ˜¯ x86ã€‚\ni686i686 ä»ç„¶å±äº i386 ä½“ç³»ï¼Œä¸è¿‡ç›¸å¯¹äº 386 CPU çš„ç‰¹æ€§ä½œäº†æŒ‡ä»¤ä¼˜åŒ–ã€‚\nMSVC ç¼–è¯‘å™¨ç‰ˆæœ¬æè¿°\nx86ï¼šç¼–è¯‘å™¨ä¸º x86 ç‰ˆæœ¬ï¼Œè¾“å‡ºæ–‡ä»¶ä¸º x86ã€‚\namd64_x86ï¼šç¼–è¯‘å™¨ä¸º amd64 ç‰ˆæœ¬ï¼Œè¾“å‡ºæ–‡ä»¶ä¸º x86ã€‚\namd64ï¼šç¼–è¯‘å™¨ä¸º amd64 ç‰ˆæœ¬ï¼Œè¾“å‡ºæ–‡ä»¶ä¸º amd64ã€‚\nx86_amd64ï¼šç¼–è¯‘å™¨ä¸º x86 ç‰ˆæœ¬ï¼Œè¾“å‡ºæ–‡ä»¶ä¸º amd64ã€‚\n\n","categories":["â‘¡è·¨å¹³å°ç¼–è¯‘ä¸éƒ¨ç½²"]},{"title":"WebRTCåœ¨ç›´æ’­é¢†åŸŸåº”ç”¨çš„å¯è¡Œæ€§åˆ†æ","url":"/post/2016855525.html","content":"ç›®å‰æµè¡Œçš„ç›´æ’­æŠ€æœ¯æ¶æ„ç›®å‰ä¸»æµçš„ç›´æ’­æ–¹æ¡ˆä¸€èˆ¬é‡‡ç”¨RTMPæ¶æ„ï¼Œé¦–å…ˆå®¢æˆ·ç«¯é‡‡é›†éŸ³è§†é¢‘æµï¼ˆå¦‚obs studioå®¢æˆ·ç«¯ï¼‰ï¼Œç„¶åé€šè¿‡ RTMP åè®®å°†æµæ¨åˆ°æµåª’ä½“æœåŠ¡å™¨ï¼Œæœ€åæµåª’ä½“æœåŠ¡å™¨å°†æµå¤„ç†ååˆ†å‘ç»™å„ä¸ªç›´æ’­å®¢æˆ·ç«¯ã€‚\n\n\n\nä¼˜ç‚¹ï¼šè‰¯å¥½çš„ CDN æ”¯æŒï¼Œç›®å‰ä¸»æµçš„ CDN å‚å•†éƒ½æœ‰æ¯”è¾ƒæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œå¦å¤–ä¹Ÿæœ‰å¯ç”¨çš„å•†ç”¨ SDK æ–¹ä¾¿é›†æˆï¼Œä¾‹å¦‚å£°ç½‘ç­‰ï¼Œåªè¦é›†æˆå¯¹åº”å¹³å°çš„ SDK å³å¯ã€‚ç”±äºæœ‰ CDN çš„æ”¯æŒï¼Œç›¸è¾ƒäºç«¯å¯¹ç«¯çš„ webrtc æ–¹å¼ï¼Œå…¶å¹¶å‘åº¦é«˜ï¼Œé€‚åˆå¤šäººç›´æ’­åœºæ™¯ã€‚\n\nç¼ºç‚¹ï¼š\n\nç”±äº RTMP åè®®åŸºäºæ˜¯ TCP çš„ï¼Œç›¸å¯¹äºåŸºäº UDP åè®®çš„ WebRTC æ–¹å¼å»¶æ—¶è¾ƒå¤§ï¼Œæ‰€ä»¥å¯¹äºæŸäº›ä½å»¶æ—¶åœºæ™¯ä½“éªŒè¾ƒå·®ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨ç›´æ’­åº”ç”¨ä¸­åªèƒ½é€šè¿‡å¼¹å¹•çš„æ–¹å¼ä¸ä¸»æ’­äº’åŠ¨ï¼Œä¸èƒ½å®æ—¶è¿éº¦äº’åŠ¨äº†ï¼Œå› ä¸ºå»¶è¿Ÿå¤ªå¤§ï¼Œä½“éªŒå¤ªå·®ã€‚\n\næµè§ˆå™¨æ²¡æœ‰é›†æˆå¯¹ RTMP åè®®çš„æ”¯æŒï¼Œæ‰€ä»¥ä¸æ”¯æŒæµè§ˆå™¨æ¨æµç­‰ï¼Œéœ€è¦ä¸»æ’­ç«¯å®‰è£…ç‰¹å®šçš„å®¢æˆ·ç«¯è½¯ä»¶ã€‚\n\n\nåŸºäºç«¯å¯¹ç«¯çš„ WebRTC ç›´æ’­æ–¹æ¡ˆä¸¥æ ¼çš„è®²ï¼ŒåŸºäºç«¯å¯¹ç«¯çš„ WebRTC ç›´æ’­æ–¹å¼ä¸å±äº WebRTC å¸¸è§„åº”ç”¨åœºæ™¯ï¼ŒWebRTC è®¾è®¡ä¹‹åˆæ˜¯ç”¨æ¥è¿›è¡Œå¤šäººå®æ—¶é€šä¿¡çš„ï¼Œæ‰€ä»¥ WebRTC ä»£ç ä¸­é›†æˆäº†å¾ˆå¤šè¯­éŸ³æ–¹é¢çš„ç®—æ³•ï¼Œå¦‚äººå£°æ£€æµ‹ç­‰ã€‚è‹¥å°† WebRTC åº”ç”¨åœ¨ç›´æ’­æ–¹æ¡ˆä¸­ï¼Œåˆ™ä¸»è¦å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nä¼˜ç‚¹ï¼š\n\n\nå•çº¯ä½¿ç”¨ Javascript åœ¨ Web ç«¯å³å¯å®ç°æ¨æµï¼Œè¿™å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œç®€åŒ–äº†éŸ³è§†é¢‘é€šä¿¡çš„å¼€å‘å·¥ä½œï¼Œé™ä½äº†é—¨æ§›ä½ï¼Œä¸å¿…ç†Ÿæ‚‰æµåª’ä½“ç­‰æŠ€æœ¯ç»†èŠ‚ï¼›å¯¹äºä¸»æ’­æ¥è¯´ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘é¡µå³å¯è¿›è¡Œç›´æ’­ï¼Œæ–¹ä¾¿å¿«æ·ã€‚\n\nå¦‚æœç‚¹å¯¹ç‚¹è¿æ¥æˆåŠŸå°±å¯ä»¥ä¸é€šè¿‡æœåŠ¡å™¨ä¸­è½¬ï¼Œå¯ä»¥èŠ‚çœæœåŠ¡å™¨å¸¦å®½è´¹ç”¨ã€‚\n\nç›¸å¯¹äºåŸºäº TCP çš„ RTMP æ¨æ‹‰æµæ–¹å¼ï¼ŒåŸºäº UDP çš„ webrtc æ–¹å¼å»¶æ—¶æ›´ä½ã€‚\n\n\n\nç¼ºç‚¹ï¼š\nPC ç«¯æµè§ˆå™¨çš„æ€§èƒ½æœ‰å±€é™ï¼Œå¦‚æœæ˜¯ 1v1 æ–¹å¼çš„ç›´æ’­è¿éº¦ï¼Œæµè§ˆå™¨å°šèƒ½æ”¯æ’‘ï¼›å¦‚æœåŒæ—¶è¿›è¡Œå¤šäººç›´æ’­è¿éº¦ï¼Œåˆ™æµè§ˆå™¨éœ€è¦åŒæ—¶ç»™å¤šäººæ¨æµï¼Œè¿™å¯¹äºæµè§ˆå™¨æ¥è¯´æéš¾æ”¯æ’‘ã€‚\nè™½ç„¶ç›®å‰æµè§ˆå™¨æä¾›çš„ WebRTC Javascript API è¶Šæ¥è¶Šå¤šï¼Œä½†ä¸€æ—¦ç°æœ‰ API æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œåˆ™å•çº¯çš„ä¾é  JavaScript æéš¾ä¸ºåŠ›ï¼ˆå¯ä»¥ä¿®æ”¹ WebRTC C++æºç ï¼Œå¦å¤–å¼€å‘æµè§ˆå™¨å®¢æˆ·ç«¯æä¾› Javascript æ¥å£ï¼Œä½†è¿™å°±å¤±å»äº†ä¸»æµæµè§ˆå™¨æ”¯æŒ WebRTC çš„å¤©ç„¶ä¼˜åŠ¿ï¼‰ã€‚\néŸ³è§†é¢‘çš„ä¼ è¾“è´¨é‡éš¾ä»¥ä¿éšœï¼Œå°¤å…¶åœ¨è·¨åœ°åŒºã€è·¨è¿è¥å•†çš„æƒ…å†µä¸‹ï¼Œå³ä¾¿å¯ä»¥ç«¯å¯¹ç«¯è¿æ¥æˆåŠŸï¼Œä½†è´¨é‡ä¹Ÿéš¾ä¿éšœã€‚\nç”±äºç«¯å¯¹ç«¯è¿æ¥æ²¡æœ‰ç»è¿‡æœåŠ¡å™¨ï¼Œæ‰€ä»¥æ— æ³•åœ¨æœåŠ¡å™¨ç«¯å¯¹ç›´æ’­æµè¿›è¡Œå®¡å½•åˆ¶å›æ”¾ç­‰ã€‚\n\nåŸºäºæœåŠ¡å™¨è½¬å‘çš„ WebRTC ç›´æ’­æ–¹æ¡ˆåŸºäºç«¯å¯¹ç«¯çš„ WebRTC ç›´æ’­æ–¹å¼å—é™äºæµè§ˆå™¨æ€§èƒ½ã€è¿æ¥äººæ•°ç­‰é™åˆ¶ï¼Œå¾ˆéš¾é€‚ç”¨äºç›´æ’­åœºæ™¯ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œä»è€Œå¼•å…¥åª’ä½“æœåŠ¡å™¨ï¼Œä¸»æ’­å®¢æˆ·ç«¯ä»…ä¼ è¾“ä¸€è·¯éŸ³è§†é¢‘æµåˆ°åª’ä½“æœåŠ¡å™¨ï¼Œå…¶ä½™å®¢æˆ·ç«¯é€šè¿‡ä¸åª’ä½“æœåŠ¡å™¨å»ºç«‹è¿æ¥è·å–éŸ³è§†é¢‘æµã€‚\nç›®å‰é€‚ç”¨äº WebRTC çš„åª’ä½“æœåŠ¡å™¨æœ‰ SFU å’Œ MUC ä¸¤ç§ç±»å‹ï¼Œä¸¤ç§çš„å·®åˆ«å¯ä»¥å‚è€ƒï¼š\nWebRTCçš„ä¸‰ç§æ¶æ„\n\nè™½ç„¶ä¸¤ç§ç±»å‹çš„ WebRTC æœåŠ¡å™¨æ¶æ„éƒ½æœ‰å¼€æºçš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå­˜åœ¨ä¸€äº›å•†ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œä½†ç»ˆç©¶æ²¡æœ‰åŸºäºRTMP+CDNæ–¹å¼çš„ç›´æ’­æ–¹æ¡ˆæˆç†Ÿï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä¸€æ—¦é‡‡ç”¨æ­¤æ–¹æ¡ˆéœ€è¦æŠ•å…¥æ›´å¤§çš„ç ”å‘åŠ›åº¦ã€‚\nåŸºäºæœåŠ¡å™¨è½¬å‘çš„ WebRTC ç›´æ’­æ–¹æ¡ˆè™½ç„¶çœ‹èµ·æ¥å’Œå½“å‰æµè¡Œçš„RTMP+CDNæ–¹å¼ç±»ä¼¼ï¼Œéƒ½ç»è¿‡äº†æœåŠ¡å™¨çš„è½¬å‘ï¼Œä½† WebRTC åŸºäº UDP æ–¹å¼å»¶è¿Ÿå¯ä»¥åšåˆ°æ›´ä½ï¼Œä¸” WebRTC å†…ç½®äº†å¾ˆå¤šéŸ³è§†é¢‘æ–¹é¢çš„ç®—æ³•ï¼Œå¦‚ AEC, VAD, VP9 ç­‰ï¼Œå¹¶ä¸”åœ¨ç½‘ç»œä¼ è¾“æ–¹é¢åšäº†å¾ˆå¤šä¼˜åŒ–å·¥ä½œã€‚\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"WebRTCå®˜æ–¹ç¤ºä¾‹apprtcæ­å»º","url":"/post/201024982.html","content":"æœ¬æ–‡è®²è¿°å¦‚ä½•æ­å»ºWebRTCå®˜æ–¹çš„apprtcç¤ºä¾‹ï¼Œç³»ç»Ÿç¯å¢ƒ Ubuntu 16.04ï¼Œåœ¨æ­å»ºä¹‹å‰å»ºè®®å…³é—­ç³»ç»Ÿé˜²ç«å¢™ã€‚\n\næˆ¿é—´æœåŠ¡å™¨æ­å»ºå®‰è£…ä¾èµ–ç¨‹åºapt-get install git unzip  lrzsz  nodejs npm automake autoconf libtool nodejs-legacy python-webtest golang â€“y\n\nå®‰è£…jdk8ä¸‹è½½jdk8ä»æ­¤å¤„ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬åˆ°/usr/lib/jvmç›®å½•ï¼Œç„¶åè§£å‹åˆ°å½“å‰ç›®å½•ï¼š\ntar zxf jdk-8u151-linux-x64.tar.gz\n\nè®¾ç½®ç¯å¢ƒå˜é‡ç¼–è¾‘/etc/sourceæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å°¾æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ˆå› ä¸ºjdkç‰ˆæœ¬ä¸åŒï¼Œæ–‡ä»¶å¤¹åç§°å¯èƒ½ä¼šæœ‰å·®åˆ«ï¼‰ï¼š\nexport JAVA_HOME=/usr/lib/jvm/jdk1.8.0_151export PATH=$JAVA_HOME/bin:$PATH export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n\næ‰§è¡Œsource /etc/profileå‘½ä»¤è®©è®¾ç½®ç”Ÿæ•ˆã€‚\napprtcè·å–å’Œå®‰è£…è·å–apprtcæºç cd ~git clone https://github.com/webrtc/apprtc.git\n\nå®‰è£…apprtccd apprtcnpm -g install grunt-clinpm installgrunt build --force\n\nä¿®æ”¹æºç ä½¿ç”¨ifconfigå‘½ä»¤æŸ¥çœ‹æœ¬æœºIPä¿¡æ¯ï¼š\n\næˆ‘ä½¿ç”¨çš„é˜¿é‡Œäº‘çš„äº‘æœå™¨ï¼ŒæœåŠ¡å™¨åœ¨NATä¹‹åï¼Œæ‰€ä»¥172.18.163.203æ˜¯æœ¬åœ°IPï¼Œå³å†…ç½‘IPï¼›ä»äº‘æœåŠ¡å™¨çš„ç®¡ç†é¡µé¢å¯ä»¥çœ‹åˆ°è¯¥æœåŠ¡å™¨çš„å¤–ç½‘IPï¼Œå¦‚120.79.164.111ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘ç­‰æœåŠ¡å™¨è¿˜éœ€è¦åœ¨å®‰å…¨ç­–ç•¥ä¸­è®¾ç½®å°†æ‰€æœ‰è¿›&#x2F;å‡ºç«¯å£éƒ½æ˜ å°„åˆ°172.18.163.203ã€‚\nä¸‹é¢ä»¥å¤–ç½‘IP 120.79.164.111ä¸ºä¾‹ï¼Œæ ¹æ®å®é™…å¤–ç½‘IPè¿›è¡Œå¯¹åº”ä¿®æ”¹ã€‚\nä¿®æ”¹constants.pyconstants.pyè·¯å¾„ï¼šapprtc&#x2F;out&#x2F;app_engine&#x2F;constants.py\nè®¾ç½®ICEæœåŠ¡å™¨çš„IPç«¯å£ã€ä¿¡ä»¤æœåŠ¡å™¨(collider)çš„IPç«¯å£ï¼Œä¿®æ”¹ä¹‹åçš„constants.pyæ–‡ä»¶å®Œæ•´å†…å®¹å¦‚ä¸‹ï¼š\n# Copyright 2015 Google Inc. All Rights Reserved.&quot;&quot;&quot;AppRTC Constants.This module contains the constants used in AppRTC Python modules.&quot;&quot;&quot;import os# Deprecated domains which we should to redirect to REDIRECT_URL.REDIRECT_DOMAINS =  [  &#x27;apprtc.appspot.com&#x27;, &#x27;apprtc.webrtc.org&#x27;, &#x27;www.appr.tc&#x27;]# URL which we should redirect to if matching in REDIRECT_DOMAINS.REDIRECT_URL = &#x27;https://appr.tc&#x27;ROOM_MEMCACHE_EXPIRATION_SEC = 60 * 60 * 24MEMCACHE_RETRY_LIMIT = 100LOOPBACK_CLIENT_ID = &#x27;LOOPBACK_CLIENT_ID&#x27;# Turn/Stun server override. This allows AppRTC to connect to turn servers# directly rather than retrieving them from an ICE server provider.ICE_SERVER_OVERRIDE = None# Enable by uncomment below and comment out above, then specify turn and stun# ICE_SERVER_OVERRIDE  = [#   &#123;#     &quot;urls&quot;: [#       &quot;turn:hostname/IpToTurnServer:19305?transport=udp&quot;,#       &quot;turn:hostname/IpToTurnServer:19305?transport=tcp&quot;#     ],#     &quot;username&quot;: &quot;TurnServerUsername&quot;,#     &quot;credential&quot;: &quot;TurnServerCredentials&quot;#   &#125;,#   &#123;#     &quot;urls&quot;: [#       &quot;stun:hostname/IpToStunServer:19302&quot;#     ]#   &#125;# ]ICE_SERVER_BASE_URL = &#x27;http://120.79.164.111:3033&#x27;ICE_SERVER_URL_TEMPLATE = &#x27;%s/v1alpha/iceconfig?key=%s&#x27;ICE_SERVER_API_KEY = os.environ.get(&#x27;ICE_SERVER_API_KEY&#x27;)# Dictionary keys in the collider instance info constant.WSS_INSTANCE_HOST_KEY = &#x27;host_port_pair&#x27;WSS_INSTANCE_NAME_KEY = &#x27;vm_name&#x27;WSS_INSTANCE_ZONE_KEY = &#x27;zone&#x27;WSS_INSTANCES = [&#123;    WSS_INSTANCE_HOST_KEY: &#x27;120.79.164.111:8089&#x27;,    WSS_INSTANCE_NAME_KEY: &#x27;wsserver-std&#x27;,    WSS_INSTANCE_ZONE_KEY: &#x27;us-central1-a&#x27;&#125;, &#123;    WSS_INSTANCE_HOST_KEY: &#x27;120.79.164.111:8089&#x27;,    WSS_INSTANCE_NAME_KEY: &#x27;wsserver-std-2&#x27;,    WSS_INSTANCE_ZONE_KEY: &#x27;us-central1-f&#x27;&#125;]WSS_HOST_PORT_PAIRS = [ins[WSS_INSTANCE_HOST_KEY] for ins in WSS_INSTANCES]# memcache key for the active collider host.WSS_HOST_ACTIVE_HOST_KEY = &#x27;wss_host_active_host&#x27;# Dictionary keys in the collider probing result.WSS_HOST_IS_UP_KEY = &#x27;is_up&#x27;WSS_HOST_STATUS_CODE_KEY = &#x27;status_code&#x27;WSS_HOST_ERROR_MESSAGE_KEY = &#x27;error_message&#x27;RESPONSE_ERROR = &#x27;ERROR&#x27;RESPONSE_ROOM_FULL = &#x27;FULL&#x27;RESPONSE_UNKNOWN_ROOM = &#x27;UNKNOWN_ROOM&#x27;RESPONSE_UNKNOWN_CLIENT = &#x27;UNKNOWN_CLIENT&#x27;RESPONSE_DUPLICATE_CLIENT = &#x27;DUPLICATE_CLIENT&#x27;RESPONSE_SUCCESS = &#x27;SUCCESS&#x27;RESPONSE_INVALID_REQUEST = &#x27;INVALID_REQUEST&#x27;IS_DEV_SERVER = os.environ.get(&#x27;APPLICATION_ID&#x27;, &#x27;&#x27;).startswith(&#x27;dev&#x27;)BIGQUERY_URL = &#x27;https://www.googleapis.com/auth/bigquery&#x27;# Dataset used in production.BIGQUERY_DATASET_PROD = &#x27;prod&#x27;# Dataset used when running locally.BIGQUERY_DATASET_LOCAL = &#x27;dev&#x27;# BigQuery table within the dataset.BIGQUERY_TABLE = &#x27;analytics&#x27;\n\nä¿®æ”¹apprtc.pyapprtc.pyè·¯å¾„ï¼šapprtc&#x2F;out&#x2F;app_engine&#x2F;apprtc.py\nå°†ä¿®æ”¹ä¸ºï¼ˆå¤§çº¦ä½äº146è¡Œå·¦å³ï¼‰\nä¿®æ”¹index_template.htmlindex_template.htmlè·¯å¾„ï¼šapprtc&#x2F;out&#x2F;app_engine&#x2F;index_template.html\nè®¾ç½®TURNæœåŠ¡å™¨ä¿¡æ¯ï¼Œåœ¨javascriptè„šæœ¬ä¸­æ·»åŠ serverså˜é‡ï¼š\nvar servers=[&#123;        credential:&quot;helloword&quot;,        username:&quot;helloword&quot;,        urls:[        &quot;turn:120.79.164.111:3478?transport=udp&quot;,        &quot;turn:120.79.164.111:3478?transport=tcp&quot;        ]        &#125;];\n\nå¹¶å°†peerConnectionConfig: &#123;&#123; pc_config | safe &#125;&#125;ä¿®æ”¹ä¸ºä½¿ç”¨ä¸Šé¢å£°æ˜çš„serverså˜é‡ï¼›\npeerConnectionConfig: &#123; &quot;rtcpMuxPolicy&quot;:&quot;require&quot;,&quot;iceServers&quot;:servers,&quot;bundlePolicy&quot;:&quot;max-bundle&quot;&#125;,iceServerRequestUrl: &#x27;&#123;&#123; ice_server_url &#125;&#125;&#x27;,//      peerConnectionConfig: &#123;&#123; pc_config | safe &#125;&#125;,\n\n\n##1.4 è·å–google_appengineä»https://download.csdn.net/download/china_jeffery&#x2F;10375696ä¸‹è½½google_appengine.tarï¼Œå¹¶ä½¿ç”¨tarå‘½ä»¤è§£å‹ï¼š\ncd ~unzip  google_appengine.tar\n\nå¯åŠ¨æˆ¿é—´æœåŠ¡å™¨cd ~./google_appengine/dev_appserver.py  --host 172.18.163.203  ./apprtc/out/app_engine --skip_sdk_update_check\n\n\n172.18.163.203ä¸ºå†…ç½‘IPã€‚\n\nä¿¡ä»¤æœåŠ¡å™¨æ­å»ºcollideræºç Webrtcä¿¡ä»¤æœåŠ¡å¯ä»¥ä½¿ç”¨çš„apprtcè‡ªå¸¦çš„colliderï¼Œè¿™ä¸ªæœåŠ¡æ˜¯ä½¿ç”¨goè¯­è¨€å¼€å‘ã€‚colliderå·²ç»ä½äºapprtc/srcç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°†å…¶æ‹·è´åˆ°~/collider/srcç›®å½•ä¸­ï¼š\ncd ~mkdir collider/src -pcp apprtc/src/collider/ collider/src/ -r\n\nç¼–è¾‘~/collider/src/collidermain/main.goæ–‡ä»¶ï¼Œå°†room-serverä¿®æ”¹ä¸ºæœåŠ¡å™¨çš„å¤–ç½‘IPå’Œç«¯å£8080:\nvar roomSrv = flag.String(&quot;room-server&quot;, &quot;http://120.79.164.111:8080&quot;, &quot;The origin of the room server&quot;)\n\nå®‰è£…goåœ¨å®‰è£…goä¹‹å‰æœ€å¥½å…ˆå¸è½½æ‰ç³»ç»Ÿä¸Šå·²ç»å®‰è£…çš„goç‰ˆæœ¬ï¼š\napt-get remove golangapt-get remove golang*apt-get autoremove\n\nç„¶åä½¿ç”¨wgetå‘½ä»¤ä¸‹è½½goï¼š\nwget https://storage.googleapis.com/golang/go1.5.1.linux-amd64.tar.gz\næˆ–è€…ä»https://download.csdn.net/download/china_jeffery&#x2F;10375936ä¸‹è½½ã€‚ç„¶åè§£å‹tar zxf go1.5.1.linux-amd64.tar.gzã€‚\næ·»åŠ å¦‚ä¸‹ç¯å¢ƒå˜é‡åˆ°/etc/sourceæ–‡ä»¶å°¾ï¼Œå¹¶ä½¿ç”¨source /etc/sourceæ˜¯ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š\nexport GOROOT=/root/goexport PATH=$PATH:$GOROOT/binexport GOPATH=/root/collider/\n\ncolliderå®‰è£…ä½¿ç”¨goå‘½ä»¤è¿›è¡Œcolliderå®‰è£…ï¼š\ncd ~/collidergo get collidermaingo install collidermain\n\nå¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨cd ~./collider/bin/collidermain -port=8089 -tls=false\n\nTURNæœåŠ¡å™¨æ­å»ºwebrtcçš„turnæœåŠ¡æ˜¯ä¸ºæä¾›NATç©¿é€æˆ–è€…ä¸­è½¬ä½¿ç”¨çš„ï¼Œå› ä¸ºwebrtcå®¢æˆ·ç«¯å¯èƒ½ä¼šåœ¨ä¸åŒçš„è·¯ç”±å™¨åé¢æˆ–è€…å¤šå±‚è·¯ç”±å™¨åé¢ï¼Œé‚£ä¹ˆä»–ä»¬å¦‚ä½•é€šè®¯å‘¢ï¼Ÿéƒ½éœ€è¦ç©¿é€ï¼Œç©¿é€çš„æœåŠ¡å°±æ˜¯turnæœåŠ¡ï¼Œwebrtcæ¨èä½¿ç”¨çš„coturnï¼ˆä»¥å‰ä¹Ÿå«turnserverï¼‰,å®ƒæ”¯STUNå’ŒRelayã€‚\nå®‰è£…ä¾èµ–sudo apt-get install libssl-devsudo apt-get install libevent-dev\n\nä¸‹è½½å¹¶ç¼–è¯‘æºç cd ~git clone https://github.com/coturn/coturn.gitcd coturnconfigure &amp;&amp; make &amp;&amp; make install\n\nå¯åŠ¨TURNæœåŠ¡./coturn/bin/turnserver --syslog -a -X 120.79.164.111 -E 172.18.163.203 -f --min-port=32355 --max-port=65535 --user=helloword:helloword -r helloword --cert=turn_server_cert.pem --pkey=turn_server_pkey.pem --log-file=stdout -v\n\n\n120.79.164.111ä¸ºå¤–ç½‘IPï¼Œ172.18.163.203ä¸ºæœ¬åœ°IPã€‚turnserverçš„å‚æ•°è§ï¼š\nhttps://github.com/coturn/coturn/wiki/turnserver\næœ¬æ–‡æœ€åˆå‘å¸ƒåœ¨æˆ‘çš„CSDNåšå®¢ï¼šã€ŠWebRTC â€“ å®˜æ–¹apprtcç¤ºä¾‹æ­å»ºã€‹\n\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"WebRTCæ·»åŠ é€‰æ‹©éŸ³é¢‘è¾“å…¥è¾“å‡ºè®¾å¤‡åŠŸèƒ½","url":"/post/2143630083.html","content":"æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ WebRTC ä¸­æä¾›éŸ³é¢‘è®¾å¤‡è¾“å…¥è¾“å‡ºåŠŸèƒ½çš„ç±»ç»“æ„ï¼š\n\n\nä»ä¸Šå›¾ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼š\n\nAudioDeviceModuleæ¥å£ç±»æ˜¯éŸ³é¢‘è®¾å¤‡æ¨¡å‹çš„åŸºç±»ï¼Œè¯¥æ¥å£ç±»åŠå…¶å­ç±»å¹¶ä¸æä¾›ä»»ä½•é’ˆå¯¹éŸ³é¢‘çš„å®é™…æ“ä½œï¼Œå®é™…æ“ä½œéƒ½æ˜¯ç”±AudioDeviceGenericæ¥å£ç±»çš„å­ç±»æ¥æä¾›ã€‚\n\nAudioDeviceGenericæ¥å£ç±»æ˜¯éŸ³é¢‘è®¾å¤‡å®é™…æ“ä½œï¼ˆå¦‚å½•éŸ³ã€æ’­æ”¾ã€å£°éŸ³æ§åˆ¶ç­‰ï¼‰çš„åŸºç±»ï¼Œç„¶åæ ¹æ®å¹³å°ä¸åŒç”±ä¸åŒçš„ç±»æ¥å®ç°å…·ä½“æ“ä½œï¼Œå¦‚ windows å¹³å°ç”±AudioDeviceWindowsCoreæ¥è´Ÿè´£å®ç°ã€‚\n\n\né€šè¿‡ä»£ç è¿½è¸ªï¼Œæˆ‘ä»¬å¯ä»¥å‘ç° WebRTC é»˜è®¤ä½¿ç”¨çš„æ˜¯è®¡ç®—æœºä¸Šçš„ç³»ç»Ÿé»˜è®¤éŸ³é¢‘è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼Œä»¥åŠé»˜è®¤çš„è§†é¢‘é‡‡é›†è®¾å¤‡ï¼Œè¿™äº›æˆ‘ä»¬é€šè¿‡adm_helpers.cc::Initå‡½æ•°æ¥éªŒè¯ï¼ˆç¬”è€…è¿™é‡Œä½¿ç”¨çš„æ˜¯m77åˆ†æ”¯ï¼‰ï¼š\nif (adm-&gt;SetPlayoutDevice(AUDIO_DEVICE_ID) != 0) &#123;  RTC_LOG(LS_ERROR) &lt;&lt; &quot;Unable to set playout device.&quot;;  return;&#125;if (adm-&gt;SetRecordingDevice(AUDIO_DEVICE_ID) != 0) &#123;  RTC_LOG(LS_ERROR) &lt;&lt; &quot;Unable to set recording device.&quot;;  return;&#125;\n\næ‰€ä»¥å³ä¾¿æˆ‘ä»¬è°ƒç”¨äº†SetPlayoutDeviceå’ŒSetRecordingDeviceä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸ºåœ¨æ­¤å¤„ä»ç„¶ä¼šè¢«è¦†ç›–ä¸ºä½¿ç”¨é»˜è®¤è®¾å¤‡ã€‚å› æ­¤æˆ‘ä»¬åªéœ€è¦é’ˆå¯¹æ­¤å¤„è¿›è¡Œä¿®æ”¹å³å¯ï¼Œå¦‚ï¼š\nuint16_t playout_index = 0;// å…ˆè·å–è®¾å¤‡indexï¼Œå¦‚æœèƒ½å¤Ÿè·å–åˆ°ï¼Œè¡¨ç¤ºå¤–éƒ¨å·²ç»è®¾å¤‡è®¾å¤‡indexï¼Œæ”¾å¼ƒä½¿ç”¨é»˜è®¤è®¾å¤‡// AudioDeviceModuleæ²¡æœ‰æä¾›Getæ¥å£ï¼Œéœ€è¦è‡ªå·±æ·»åŠ //if (adm-&gt;GetPlayoutDevice(&amp;playout_index) == 0) &#123;  RTC_LOG(LS_INFO) &lt;&lt; &quot;Playout device index: &quot; &lt;&lt; playout_index;&#125; else &#123;  if (adm-&gt;SetPlayoutDevice(AUDIO_DEVICE_ID) != 0) &#123;    RTC_LOG(LS_ERROR) &lt;&lt; &quot;Unable to set playout device.&quot;;    return;  &#125;&#125;uint16_t recording_index = 0;if (adm-&gt;GetRecordingDevice(&amp;recording_index) == 0) &#123;  RTC_LOG(LS_INFO) &lt;&lt; &quot;Recording device index: &quot; &lt;&lt; recording_index;&#125; else &#123;  if (adm-&gt;SetRecordingDevice(AUDIO_DEVICE_ID) != 0) &#123;    RTC_LOG(LS_ERROR) &lt;&lt; &quot;Unable to set recording device.&quot;;    return;  &#125;&#125;\n\nç»†å¿ƒçš„è¯»è€…å¯èƒ½å‘ç°ï¼ŒAudioDeviceModuleæ¥å£ç±»åªå®šä¹‰äº† Playout&#x2F;Recoding è®¾å¤‡çš„Setæ¥å£ï¼Œä½†æ²¡æœ‰æä¾›Getæ¥å£ï¼Œå› ä¸º WebRTC é»˜è®¤ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿè®¾å¤‡ï¼Œæ‰€ä»¥å¤–ç•Œä¸éœ€è¦çŸ¥é“å…·ä½“è®¾å¤‡ indexï¼Œæ•…æ²¡æœ‰æä¾›ï¼ˆç¬”è€…ä½¿ç”¨çš„æ˜¯ webrtc m77åˆ†æ”¯ï¼Œä¹Ÿè®¸ webrtc çš„åç»­ç‰ˆæœ¬ä¼šåŠ å…¥è¯¥æ¥å£ï¼‰ã€‚æˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨ AudioDeviceModule ä¸­åŠ å…¥Getæ¥å£ã€‚\nä¸Šé¢çš„ä¸€åˆ‡ä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ª admï¼Œä½œä¸ºå‚æ•°ä¼ å…¥åˆ°webrtc::CreatePeerConnectionFactoryå‡½æ•°å³å¯ï¼š\nm_adm = webrtc::AudioDeviceModule::Create(            webrtc::AudioDeviceModule::kPlatformDefaultAudio, webrtc::CreateDefaultTaskQueueFactory().get());int32_t ret = m_adm-&gt;Init();Q_ASSERT(ret == 0);if (m_connParameter.audioInputDeviceIndex == -1) &#123;    m_adm-&gt;SetEnableRecording(false);&#125; else &#123;    ret = m_adm-&gt;SetRecordingDevice(m_connParameter.audioInputDeviceIndex);    Q_ASSERT(ret == 0);&#125;if (m_connParameter.audioOutputDeviceIndex == -1) &#123;    m_adm-&gt;SetEnablePlayout(false);&#125; else &#123;    ret = m_adm-&gt;SetPlayoutDevice(m_connParameter.audioOutputDeviceIndex);    Q_ASSERT(ret == 0);&#125;\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"Windowså¹³å°ç¼–è¯‘WebRTCæºç ","url":"/post/2910781705.html","content":"\nå†™ä½œæœ¬æ–‡æ—¶ä½¿ç”¨çš„ webrtc ç‰ˆæœ¬ä¸ºï¼šbranch heads/67\n\nå‡†å¤‡å·¥ä½œè¯·ç¡®ä¿å¯ä»¥è®¿é—®å›½å¤–ç½‘ç«™ç³»ç»Ÿè¯­è¨€åˆ‡æ¢åˆ°è‹±æ–‡ç³»ç»Ÿ Windows 7&#x2F;10 éƒ½å¯ä»¥ï¼Œåœ¨â€œæ§åˆ¶é¢æ¿â€â€“&gt;â€åŒºåŸŸå’Œè¯­è¨€â€â€“&gt;â€ç®¡ç†â€â€“&gt;â€æ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®â€ä¸­åˆ‡æ¢åˆ°â€œè‹±è¯­ï¼ˆç¾å›½ï¼‰â€ï¼Œç„¶åé‡å¯ç³»ç»Ÿã€‚\n\n\nå¸è½½éƒ¨åˆ†è½¯ä»¶æ— \nå®‰è£… VS2017Visual Studio 2017 ç°åœ¨åªæä¾›åœ¨çº¿å®‰è£…åŒ…ï¼Œä¸ºäº†åŠ å¿«åœ¨çº¿å®‰è£…çš„é€Ÿåº¦ï¼Œå¯ä»¥åªé€‰æ‹©å¦‚ä¸‹å‡ ä¸ªå®‰è£…é¡¹ï¼š\n\nDesktop development with C++\nMFC and ATL support\n\nå®‰è£… Windows 10 SDKè™½ç„¶å®˜æ–¹æŒ‡å—ä¸Šé¢å†™çš„æ˜¯æ”¯æŒ 10.0.15063 åŠä»¥åçš„ç‰ˆæœ¬ï¼Œä½†ç¼–è¯‘é€‰é¡¹ä¸­é»˜è®¤æŒ‡å®šçš„æ˜¯ 10.0.15063 ç‰ˆæœ¬ï¼Œæ‰€ä»¥å»ºè®®å®‰è£… 10.0.15063 ç‰ˆæœ¬ã€‚å¦‚æœè¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬çš„ SDKï¼Œå¯ä»¥åœ¨ä¸‰ã€ ç”Ÿæˆvsè§£å†³æ–¹æ¡ˆ è¿™ä¸€æ­¥ä¸­æŒ‡å®š--winsdk=&lt;sdk_version&gt;å‚æ•°ã€‚\n10.0.15063 ä¸‹è½½åœ°å€ï¼š\nhttps://download.microsoft.com/download/0/1/1/01111605-8CDF-4A88-BB06-C20E97E8B3D5/iso_windowssdk/15063.468.170612-1856.rs2_release_svc_sec_WindowsSDK.iso\n\nå®‰è£… DirectX SDkä¸‹è½½åœ°å€ï¼š\nhttp://download.microsoft.com/download/A/E/7/AE743F1F-632B-4809-87A9-AA1BB3458E31/DXSDK_Jun10.exe\n\nå®‰è£… DirectX SDK June 2010ï¼Œå®‰è£…å®Œæˆåå¯èƒ½ä¼šæç¤ºâ€œs1023â€è¿™æ ·çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºä¸ç³»ç»Ÿå·²æœ‰çš„ visual c++ redistributable packages ç‰ˆæœ¬å†²çªï¼Œå¯ä»¥å¿½ç•¥ä¸ç®¡ã€‚\næºç è·å–é…ç½® depot_toolsdepot_tools æ˜¯ webrtc æˆ– chromium ä½¿ç”¨çš„æºç ç®¡ç†å·¥å…·ï¼Œä»æ­¤å¤„ä¸‹è½½ï¼š\nhttps://storage.googleapis.com/chrome-infra/depot_tools.zip\n\nè§£å‹åˆ° D:\\webrtc\\depot_tools ä¸­ï¼Œæ·»åŠ è¯¥ç›®å½•åˆ°åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ PATHã€‚\n\nå› ä¸º webrtc æˆ– chromium ä½¿ç”¨çš„ç¼–è¯‘ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹è½½ä¸ä¹‹åŒ¹é…çš„ Python å’Œ Gitï¼Œä¸ºäº†é˜²æ­¢ç¼–è¯‘ç³»ç»Ÿé”™è¯¯ä½¿ç”¨åŸæœ‰çš„ç‰ˆæœ¬ï¼Œéœ€è¦å°†D:\\webrtc\\depot_toolsè·¯å¾„æ”¾åˆ° PATH çš„æœ€å‰é¢ï¼Œè‡³å°‘ä¹Ÿè¦æ”¾åˆ° Python å’Œ Git çš„å‰é¢ã€‚\n\nç¯å¢ƒåˆå§‹åŒ–å…ˆè®¾ç½®å¦‚ä¸‹ç¯å¢ƒå˜é‡ï¼š\nDEPOT_TOOLS_WIN_TOOLCHAIN = 0GYP_GENERATORS = ninja,msvs-ninja\n\nç„¶åä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œç³»ç»Ÿ cmd å‘½ä»¤è¡Œï¼ˆä¸è¦ä½¿ç”¨å…¶ä»–å‘½ä»¤è¡Œå·¥å…·ï¼Œå¦‚ cmderï¼‰ï¼Œä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\nd:cd D:\\webrtc   # ç”¨æ¥è¿›å…¥webrtcç›®å½•ï¼Œç›®å½•åä¸ä¸€æ ·ï¼Œå‘½ä»¤ä¹Ÿä¸ä¸€æ ·gclient        # éœ€è¦ä½¿ç”¨ç½‘ç»œä»£ç†ï¼Œè€—æ—¶è¾ƒé•¿\n\nä¸‹è½½æºç å’Œä¾èµ–é¡¹æ–°å»º webrtc-checkout ç›®å½•ï¼Œä¸‹è½½æºç åˆ°è¯¥ç›®å½•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\nmkdir webrtc-checkout      # ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ–°å»ºcd webrtc-checkoutfetch --nohooks webrtc    # è·å–æºç gclient sync              # æ›´æ–°æºç gclient runhooks          # è·å–DEPSæ–‡ä»¶ä¸­æŒ‡å®šçš„ä¾èµ–é¡¹\n\nç”Ÿæˆ vs è§£å†³æ–¹æ¡ˆè¿›å…¥ webrtc-checkout\\src ç›®å½•ï¼ˆ2.3 æ­¥éª¤ä¸­ä¸‹è½½çš„æºç ä¼šè‡ªåŠ¨å­˜å‚¨åˆ°è¯¥ç›®å½•ï¼‰,æ‰§è¡Œï¼š\ngn gen --ide=vs out/Debug\n\næˆ–è€…åŠ å…¥è¯¦ç»†çš„é…ç½®å‚æ•°ï¼š\ngn gen out/x64/Debug --ide=vs --args=&quot;is_debug=true target_cpu=\\&quot;x64\\&quot;&quot;\n\næ‰§è¡ŒæˆåŠŸä¹‹åï¼Œåœ¨ out&#x2F;Debug ç›®å½•ä¸­ä¼šç”Ÿæˆ all.sln è§£å†³æ–¹æ¡ˆæ–‡ä»¶ã€‚\nå¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨gn gen --helpæŸ¥çœ‹å¸®åŠ©ï¼ŒèŠ‚é€‰å¦‚ä¸‹ï¼š\nIDE options  GN optionally generates files for IDE. Possibilities for &lt;ide options&gt;  --ide=&lt;ide_name&gt;      Generate files for an IDE. Currently supported values:      &quot;eclipse&quot; - Eclipse CDT settings file.      &quot;vs&quot; - Visual Studio project/solution files.             (default Visual Studio version: 2017)      &quot;vs2013&quot; - Visual Studio 2013 project/solution files.      &quot;vs2015&quot; - Visual Studio 2015 project/solution files.      &quot;vs2017&quot; - Visual Studio 2017 project/solution files.      &quot;xcode&quot; - Xcode workspace/solution files.      &quot;qtcreator&quot; - QtCreator project files.      &quot;json&quot; - JSON file containing target information  --filters=&lt;path_prefixes&gt;      Semicolon-separated list of label patterns used to limit the set of      generated projects (see &quot;gn help label_pattern&quot;). Only matching targets      and their dependencies will be included in the solution. Only used for      Visual Studio, Xcode and JSON.Visual Studio Flags  --sln=&lt;file_name&gt;      Override default sln file name (&quot;all&quot;). Solution file is written to the      root build directory.  --no-deps      Don&#x27;t include targets dependencies to the solution. Changes the way how      --filters option works. Only directly matching targets are included.  --winsdk=&lt;sdk_version&gt;      Use the specified Windows 10 SDK version to generate project files.      As an example, &quot;10.0.15063.0&quot; can be specified to use Creators Update SDK      instead of the default one.  --ninja-extra-args=&lt;string&gt;      This string is passed without any quoting to the ninja invocation      command-line. Can be used to configure ninja flags, like &quot;-j&quot;.\n\nåœ¨ç¼–è¯‘è§£å†³æ–¹æ¡ˆä¸­çš„æŸäº›å·¥ç¨‹ï¼ˆå¦‚freetype_source, harfbuzz_sourceï¼‰æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°è¯¸å¦‚ä¸‹é¢çš„é”™è¯¯æç¤ºï¼š\nerror C2220: è­¦å‘Šè¢«è§†ä¸ºé”™è¯¯ - æ²¡æœ‰ç”Ÿæˆâ€œobjectâ€æ–‡ä»¶\n\nè¿™æ—¶æˆ‘ä»¬éœ€è¦è°ƒä½è­¦å‘Šç­‰çº§ï¼Œç¼–è¯‘å¯¹åº”çš„ ninja æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„/WXæ”¹æˆ/W3å³å¯ã€‚\n\nå‚è€ƒï¼šhttps://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md\n\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"åˆè¯†WebRTC","url":"/post/3298681169.html","content":"WebRTC ï¼ˆWeb Real-Time Communicationsï¼‰ æ˜¯ä¸€é¡¹å®æ—¶é€šè®¯æŠ€æœ¯ï¼Œå®ƒå…è®¸ç½‘ç»œåº”ç”¨æˆ–è€…ç«™ç‚¹åœ¨ä¸å€ŸåŠ©ä¸­é—´åª’ä»‹çš„æƒ…å†µä¸‹ï¼Œå»ºç«‹æµè§ˆå™¨ä¹‹é—´ç‚¹å¯¹ç‚¹ï¼ˆPeer-to-Peerï¼‰çš„è¿æ¥ï¼Œå®ç°è§†é¢‘æµå’Œï¼ˆæˆ–ï¼‰éŸ³é¢‘æµæˆ–è€…å…¶ä»–ä»»æ„æ•°æ®çš„ä¼ è¾“ã€‚WebRTCåŒ…å«çš„è¿™äº›æ ‡å‡†ä½¿ç”¨æˆ·åœ¨æ— éœ€å®‰è£…ä»»ä½•æ’ä»¶æˆ–è€…ç¬¬ä¸‰æ–¹çš„è½¯ä»¶çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºç‚¹å¯¹ç‚¹ï¼ˆPeer-to-Peerï¼‰çš„æ•°æ®åˆ†äº«å’Œç”µè¯ä¼šè®®æˆä¸ºå¯èƒ½ã€‚\nå®ƒå¹¶ä¸æ˜¯å•ä¸€çš„åè®®ï¼ŒåŒ…å«äº†åª’ä½“ã€åŠ å¯†ã€ä¼ è¾“å±‚ç­‰åœ¨å†…çš„å¤šä¸ªåè®®æ ‡å‡†ä»¥åŠä¸€å¥—åŸºäº JavaScript çš„ APIã€‚é€šè¿‡ç®€å•æ˜“ç”¨çš„ JavaScript API ï¼Œåœ¨ä¸å®‰è£…ä»»ä½•æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œè®©æµè§ˆå™¨æ‹¥æœ‰äº† P2PéŸ³è§†é¢‘å’Œæ•°æ®åˆ†äº«çš„èƒ½åŠ›ã€‚åŒæ—¶WebRTC å¹¶ä¸æ˜¯ä¸€ä¸ªå­¤ç«‹çš„åè®®ï¼Œå®ƒæ‹¥æœ‰çµæ´»çš„ä¿¡ä»¤ï¼Œå¯ä»¥ä¾¿æ·çš„å¯¹æ¥ç°æœ‰çš„SIP å’Œç”µè¯ç½‘ç»œçš„ç³»ç»Ÿã€‚\nä¸åŒæŠ€æœ¯é¢†åŸŸçš„äººéƒ½å¯ä»¥ä»WebRTCä¸­è·å–åˆ°éœ€è¦çš„ä¸œè¥¿ã€‚\n\n\næ”¯æŒçš„æµè§ˆå™¨å’Œå¹³å°ç›®å‰åŸºæœ¬ä¸Šæ‰€æœ‰çš„æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒWebRTC\n\nWebRTC å†…éƒ¨ç»“æ„\næ¶æ„å›¾é¢œè‰²æ ‡è¯†è¯´æ˜ï¼š\n\nç´«è‰²éƒ¨åˆ†æ˜¯Webå¼€å‘è€…APIå±‚\nè“è‰²å®çº¿éƒ¨åˆ†æ˜¯é¢å‘æµè§ˆå™¨å‚å•†çš„APIå±‚\nè“è‰²è™šçº¿éƒ¨åˆ†æµè§ˆå™¨å‚å•†å¯ä»¥è‡ªå®šä¹‰å®ç°\n\nWebRTCæœ‰ä¸‰ä¸ªæ¨¡å—ï¼š\n\nVoice Engineï¼ˆéŸ³é¢‘å¼•æ“ï¼‰  \n\nVoice EngineåŒ…å«iSAC&#x2F;iLBC Codecï¼ˆéŸ³é¢‘ç¼–è§£ç å™¨ï¼Œå‰è€…æ˜¯é’ˆå¯¹å®½å¸¦å’Œè¶…å®½å¸¦ï¼Œåè€…æ˜¯é’ˆå¯¹çª„å¸¦ï¼‰  \nNetEQ for voiceï¼ˆå¤„ç†ç½‘ç»œæŠ–åŠ¨å’Œè¯­éŸ³åŒ…ä¸¢å¤±ï¼‰  \nEcho Cancelerï¼ˆå›å£°æ¶ˆé™¤å™¨ï¼‰&#x2F; Noise Reductionï¼ˆå™ªå£°æŠ‘åˆ¶ï¼‰\n\n\nVideo Engineï¼ˆè§†é¢‘å¼•æ“ï¼‰  \n\nVP8 Codecï¼ˆè§†é¢‘å›¾åƒç¼–è§£ç å™¨ï¼‰  \nVideo jitter bufferï¼ˆè§†é¢‘æŠ–åŠ¨ç¼“å†²å™¨ï¼Œå¤„ç†è§†é¢‘æŠ–åŠ¨å’Œè§†é¢‘ä¿¡æ¯åŒ…ä¸¢å¤±ï¼‰  \nImage enhancementsï¼ˆå›¾åƒè´¨é‡å¢å¼ºï¼‰\n\n\nTransport   \n\nSRTPï¼ˆå®‰å…¨çš„å®æ—¶ä¼ è¾“åè®®ï¼Œç”¨ä»¥éŸ³è§†é¢‘æµä¼ è¾“ï¼‰  \nMultiplexingï¼ˆå¤šè·¯å¤ç”¨ï¼‰  \nP2Pï¼ŒSTUN+TURN+ICEï¼ˆç”¨äºNATç½‘ç»œå’Œé˜²ç«å¢™ç©¿è¶Šçš„ï¼‰  \né™¤æ­¤ä¹‹å¤–ï¼Œå®‰å…¨ä¼ è¾“å¯èƒ½è¿˜ä¼šç”¨åˆ°DTLSï¼ˆæ•°æ®æŠ¥å®‰å…¨ä¼ è¾“ï¼‰ï¼Œç”¨äºåŠ å¯†ä¼ è¾“å’Œå¯†é’¥åå•†   \næ•´ä¸ªWebRTCé€šä¿¡æ˜¯åŸºäºUDPçš„\n\n\n\nWebRTC çš„æ ¸å¿ƒç»„ä»¶\néŸ³è§†é¢‘å¼•æ“ï¼šOPUSã€VP8 &#x2F; VP9ã€H264\n\nä¼ è¾“å±‚åè®®ï¼šåº•å±‚ä¼ è¾“åè®®ä¸º UDP\n\nåª’ä½“åè®®ï¼šSRTP &#x2F; SRTCP\n\næ•°æ®åè®®ï¼šDTLS &#x2F; SCTP\n\nP2P å†…ç½‘ç©¿é€ï¼šSTUN &#x2F; TURN &#x2F; ICE &#x2F; Trickle ICE\n\nä¿¡ä»¤ä¸ SDP åå•†ï¼šHTTP &#x2F; WebSocket &#x2F; SIPã€ Offer &#x2F; Answer æ¨¡å‹\n\n\nWebRTC éŸ³é¢‘å’Œè§†é¢‘å¼•æ“\n\næœ€åº•å±‚æ˜¯ç¡¬ä»¶è®¾å¤‡ï¼Œä¸Šé¢æ˜¯éŸ³é¢‘æ•è·æ¨¡å—å’Œè§†é¢‘æ•è·æ¨¡å—\n\nä¸­é—´éƒ¨åˆ†ä¸ºéŸ³è§†é¢‘å¼•æ“ã€‚éŸ³é¢‘å¼•æ“è´Ÿè´£éŸ³é¢‘é‡‡é›†å’Œä¼ è¾“ï¼Œå…·æœ‰é™å™ªã€å›å£°æ¶ˆé™¤ç­‰åŠŸèƒ½ã€‚è§†é¢‘å¼•æ“è´Ÿè´£ç½‘ç»œæŠ–åŠ¨ä¼˜åŒ–ï¼Œäº’è”ç½‘ä¼ è¾“ç¼–è§£ç ä¼˜åŒ–\n\nåœ¨éŸ³è§†é¢‘å¼•æ“ä¹‹ä¸Šæ˜¯ ä¸€å¥— C++ APIï¼Œåœ¨ C++ çš„ API ä¹‹ä¸Šæ˜¯æä¾›ç»™æµè§ˆå™¨çš„Javascript API.\n\n\nWebRTC åè®®æ ˆ\n\nWebRTC æ ¸å¿ƒçš„åè®®éƒ½æ˜¯åœ¨å³ä¾§åŸºäº UDP åŸºç¡€ä¸Šæ­å»ºèµ·æ¥çš„ã€‚\n\nå…¶ä¸­ï¼ŒICEã€STUNã€TURN ç”¨äºå†…ç½‘ç©¿é€ã€‚\n\nDTLS ç”¨äºå¯¹ä¼ è¾“å†…å®¹è¿›è¡ŒåŠ å¯†ï¼Œå¯ä»¥çœ‹åšæ˜¯ UDP ç‰ˆçš„ TLSã€‚ç”±äº WebRTC å¯¹å®‰å…¨æ¯”è¾ƒé‡è§†ï¼Œæ‰€ä»¥è¿™ä¸€å±‚æ˜¯å¿…é¡»çš„ã€‚æ‰€æœ‰WebRTCç»„ä»¶éƒ½å¿…é¡»åŠ å¯†ï¼Œå¹¶ä¸”å…¶JavaScript APIåªèƒ½ç”¨äºå®‰å…¨æºï¼ˆHTTPSæˆ–æœ¬åœ°ä¸»æœºï¼‰ã€‚ä¿¡ä»¤æœºåˆ¶å¹¶ä¸æ˜¯ç”±WebRTCæ ‡å‡†å®šä¹‰çš„ï¼Œæ‰€ä»¥æ‚¨å¿…é¡»ç¡®ä¿ä½¿ç”¨å®‰å…¨åè®®ã€‚  \n\nSRTP ä¸ SRTCP æ˜¯å¯¹åª’ä½“æ•°æ®çš„å°è£…ä¸ä¼ è¾“æ§åˆ¶åè®®  \n\nSCTP æ˜¯æµæ§åˆ¶ä¼ è¾“åè®®ï¼Œæä¾›ç±»ä¼¼ TCP çš„ç‰¹æ€§ï¼ŒSCTP å¯ä»¥åŸºäº UDP ä¸Šæ„å»ºï¼Œåœ¨ WebRTC é‡Œæ˜¯åœ¨ DTLS åè®®ä¹‹ä¸Šã€‚\n\nRTCPeerConnection ç”¨æ¥å»ºç«‹å’Œç»´æŠ¤ç«¯åˆ°ç«¯è¿æ¥ï¼Œå¹¶æä¾›é«˜æ•ˆçš„éŸ³è§†é¢‘æµä¼ è¾“ã€‚\n\nRTCDataChannel ç”¨æ¥æ”¯æŒç«¯åˆ°ç«¯çš„ä»»æ„äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“ã€‚\n\nWebRTC åè®®æ ˆè§£é‡Š  \n\nICEï¼ŒSTUNï¼ŒTURNï¼šç”¨äºNATç©¿é€ï¼Œå‚è€ƒ WebRTCçš„ä¸‰ç§æ¶æ„\nSDPï¼šä¼šè¯æè¿°åè®®ï¼ˆRFC 4566ï¼‰  \nDTLSï¼šæ•°æ®æŠ¥ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆRFC 6347ï¼‰  \nSCTPï¼šæµæ§åˆ¶ä¼ è¾“åè®®ï¼ˆRFC 4960ï¼‰  \nSRTPï¼šå®‰å…¨å®æ—¶ä¼ è¾“åè®®ï¼ˆRFC 3711ï¼‰\n\n\n\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"WebRTCçš„ä¸‰ç§æ¶æ„","url":"/post/2114040426.html","content":"WebRTC æ˜¯åŸºäº P2P çš„å®æ—¶é€šä¿¡æŠ€æœ¯ï¼Œï¼ˆå¦‚æœ P2P æ‰“æ´å¤±è´¥ï¼Œåˆ™ä¼šä½¿ç”¨ TURN æœåŠ¡å™¨è¿›è¡Œæ•°æ®è½¬å‘ï¼‰ï¼Œåœ¨æœ‰ 2 å°å®¢æˆ·ç«¯å‚ä¸çš„æƒ…å†µä¸‹ï¼Œç½‘ç»œæ‹“æ‰‘ç»“æ„å¦‚å›¾ï¼š\n\n\nMesh æ¶æ„åœ¨åªæœ‰ 2 ä¸ªå®¢æˆ·ç«¯å‚ä¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šå›¾çš„è¿™ç§æ‹“æ‰‘ç»“æ„ã€‚ä½†å‡å¦‚åŒæ—¶æœ‰ 3 ä¸ªå®¢æˆ·ç«¯å‚ä¸ï¼ˆå¦‚å¤šäººè§†é¢‘ä¼šè®®ï¼‰ï¼Œå¦‚æœè¿˜æ˜¯æŒ‰ç…§ä¸Šé¢çš„æ–¹å¼ï¼Œæ‹“æ‰‘ç»“æ„å°±ä¼šå˜æˆï¼š\nä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ 3 äººå‚ä¸çš„å®æ—¶é€šä¿¡ä¸­ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯è¦ç»´æŒ 4 ä¸ªè¿æ¥ï¼ˆ2 ä¸ªä¸Šè¡Œï¼Œ2 ä¸ªä¸‹è¡Œï¼‰ï¼›åŒç†ï¼Œå¦‚æœæœ‰ N ä¸ªå®¢æˆ·ç«¯å‚ä¸ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å°±è¦ç»´æŒN-1ä¸Šè¡Œï¼ŒN-1ä¸ªä¸‹è¡Œï¼Œè¿™æ ·ä¼šæå¤§çš„å ç”¨å®¢æˆ·ç«¯çš„ä¸Šè¡Œå¸¦å®½å’Œä¸‹è¡Œå¸¦å®½ï¼›\nè¿™ç§æ¯ä¸ªç«¯ä¹‹å‰å®Œå…¨ä½¿ç”¨ P2P æ–¹å¼æ¶æ„ç§°ä¹‹ä¸º Mesh æ¶æ„ã€‚\nSFU (Selective Forwarding Unit)æ¶æ„SFU æ¶æ„æœ€æ ¸å¿ƒçš„ç‰¹ç‚¹æ˜¯æŠŠè‡ªå·± â€œä¼ªè£…â€ æˆäº†ä¸€ä¸ª WebRTC çš„å®¢æˆ·ç«¯ï¼ŒWebRTC çš„å…¶ä»–å®¢æˆ·ç«¯å…¶å®å¹¶ä¸çŸ¥é“è‡ªå·±é€šè¿‡ P2P è¿æ¥è¿‡å»çš„æ˜¯ä¸€å°çœŸå®çš„å®¢æˆ·ç«¯è¿˜æ˜¯ä¸€å°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠè¿™ç§è¿æ¥ç§°ä¹‹ä¸º P2Sï¼Œå³ï¼šPeer to Serverã€‚é™¤äº† â€œä¼ªè£…â€ æˆä¸€ä¸ª WebRTC çš„å®¢æˆ·ç«¯å¤–ï¼ŒSFU æœåŠ¡å™¨è¿˜æœ‰ä¸€ä¸ªæœ€é‡è¦çš„èƒ½åŠ›å°±æ˜¯å…·å¤‡one-to-manyçš„èƒ½åŠ›ï¼Œå³å¯ä»¥å°†ä¸€ä¸ªå®¢æˆ·ç«¯çš„æ•°æ®è½¬å‘åˆ°å…¶ä»–å¤šä¸ªå®¢æˆ·ç«¯ã€‚\nè¿™ç§ç½‘ç»œæ‹“æ‰‘ç»“æ„ä¸­ï¼Œæ— è®ºå¤šå°‘äººåŒæ—¶è¿›è¡Œè§†é¢‘é€šè¯ï¼Œæ¯ä¸ª WebRTC çš„å®¢æˆ·ç«¯åªéœ€è¦è¿æ¥ä¸€ä¸ª SFU æœåŠ¡å™¨ï¼Œä¸Šè¡Œä¸€è·¯æ•°æ®å³å¯ï¼Œå¯ä»¥æå¤§çš„å‡å°‘å¤šäººè§†é¢‘é€šè¯åœºæ™¯ä¸‹ Mesh æ¨¡å‹ç»™å®¢æˆ·ç«¯å¸¦æ¥çš„ä¸Šè¡Œå¸¦å®½å‹åŠ›ã€‚\nSFU æœåŠ¡å™¨è·Ÿ TURN æœåŠ¡å™¨æœ€å¤§çš„ä¸åŒæ˜¯ï¼ŒTURN æœåŠ¡å™¨ä»…ä»…æ˜¯ä¸º WebRTC å®¢æˆ·ç«¯æä¾›çš„ä¸€ç§è¾…åŠ©çš„æ•°æ®è½¬å‘é€šé“ï¼Œåœ¨ P2P ä¸é€šçš„æ—¶å€™è¿›è¡Œé€æ˜çš„æ•°æ®è½¬å‘ã€‚è€Œ SFU æ˜¯ â€œæ‡‚ä¸šåŠ¡â€ çš„ï¼Œ å®ƒè·Ÿ WebRTC å®¢æˆ·ç«¯æ˜¯å¹³ç­‰çš„å…³ç³»ï¼Œç”šè‡³ â€œæ¥ç®¡äº†â€ WebRTC å®¢æˆ·ç«¯çš„æ•°æ®è½¬å‘çš„ç”³è¯·å’Œæ§åˆ¶ã€‚\nMCU (MultiPoint Control Unit)æ¶æ„ä»ä¸Šè¿° SFU çš„å®šä¹‰å¯ä»¥çœ‹åˆ°ï¼ŒSFU è¿™ç§ç½‘ç»œæ‹“æ‰‘æ¨¡å‹ï¼Œé€šè¿‡ç”± SFU Server æ¥å®ç° one-to-many ï¼Œå‡è½»äº†å¤šäººè§†é¢‘é€šè¯åœºæ™¯ä¸‹æ¯ä¸ªå®¢æˆ·ç«¯çš„ä¸Šè¡Œå¸¦å®½å‹åŠ›ï¼Œä½†æ˜¯ä¸‹è¡Œä¾ç„¶æ˜¯å¤šè·¯æµï¼Œéšç€é€šè¯äººæ•°çš„å¢å¤§ï¼Œä¸‹è¡Œå¸¦å®½çš„å‹åŠ›ä¾ç„¶ä¼šæˆæ¯”ä¾‹çš„å¢å¤§ï¼Œé‚£èƒ½å¦è®©ä¸‹è¡Œä¹Ÿåªå‰©ä¸€è·¯æµå‘¢ï¼Ÿâ€”â€” å¯ä»¥ï¼Œé€šè¿‡åœ¨æœåŠ¡å™¨ç«¯åˆæµåå†ä¸‹å‘å³å¯è§£å†³ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nç›®å‰ï¼Œéšç€ 5G æŠ€æœ¯çš„æ¨å¹¿ï¼Œå¯ä»¥é¢„è§å¸¦å®½è¶Šæ¥è¶Šä¸æ˜¯é—®é¢˜ï¼Œæ‰€ä»¥ SFU åœ¨æœªæ¥ï¼Œå¯èƒ½ä¼šæ›´æœ‰ä¼˜åŠ¿ã€‚å¸¸è§çš„å¼€æº SFU æœåŠ¡å™¨æœ‰ï¼šLicodeï¼ŒJanusï¼ŒJitsiï¼Œmediasoupï¼ŒMedooze ç­‰ç­‰ã€‚\n\næ–‡ç« å‚è€ƒï¼šWebRTC å¼€å‘å®è·µï¼šä¸ºä»€ä¹ˆä½ éœ€è¦ SFU æœåŠ¡å™¨ &gt; webrtc ç¬”è®°(3): å¤šäººè§†é¢‘é€šè®¯å¸¸ç”¨æ¶æ„ Mesh&#x2F;MCU&#x2F;SFU\n\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"å¦‚ä½•æ­å»ºWebRTCçš„TURNæœåŠ¡å™¨","url":"/post/2256138363.html","content":"æœ¬æ–‡è®²è§£å¦‚ä½•åœ¨ Ubuntu ç³»ç»Ÿä¸Šé‡‡ç”¨coturnæ­å»º p2p æ‰“æ´æœåŠ¡å™¨ï¼Œcoturn æ˜¯ä¸€ä¸ªå¼€æºçš„ stun å’Œ turn æœåŠ¡å™¨å®ç°ã€‚\n\n\nå®‰è£…ä¾èµ–é¡¹sudo apt-get install opensslsudo apt-get install libsslsudo apt-get install libevent-dev\n\nä¸‹è½½ coturn æºç ç¼–è¯‘å®‰è£…git clone https://github.com/coturn/coturn.git./configure &amp;&amp; make &amp;&amp; make install\n\nç¼–è¾‘é…ç½®å®‰è£…å®Œä¹‹åï¼Œç¼–è¾‘\\usr\\local\\etc\\turnserver.confé…ç½®æ–‡ä»¶ï¼š\nlistening-device=eth0listening-port=3478external-ip=47.93.42.10     #å…¬ç½‘IPuser=jeff:123456                #ç”¨æˆ·åå¯†ç realm=rtctest\n\nå¯åŠ¨ coturnturnserver -a -f -v -r rtctest\n\nå®¢æˆ·ç«¯è¿æ¥ coturn æœåŠ¡å™¨webrtc::PeerConnectionFactoryInterface::CreatePeerConnectionå‡½æ•°ä¼ å…¥çš„RTCConfiguration å‚æ•°å¦‚ä¸‹ï¼š\nwebrtc::PeerConnectionInterface::RTCConfiguration config;config.sdp_semantics = webrtc::SdpSemantics::kUnifiedPlan;config.enable_dtls_srtp = true;webrtc::PeerConnectionInterface::IceServer server;server.urls.push_back(&quot;stun://47.93.42.10:3478&quot;);server.urls.push_back(&quot;turn://47.93.42.10:3478&quot;);server.username = &quot;jeff&quot;;server.password = &quot;123456&quot;;config.servers.push_back(server);\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"WebRTCçº¿ç¨‹æ¨¡å‹","url":"/post/795351407.html","content":"åœ¨ä»‹ç»WebRTCçš„çº¿ç¨‹æ¨¡å‹ä¹‹å‰ï¼Œå…ˆä»‹ç»Webrtcçº¿ç¨‹æ¨¡å‹ä¸­ç”¨åˆ°çš„å‡ ä¸ªç®€å•ã€å¸¸ç”¨çš„æ¨¡å—æˆ–å‡½æ•°ã€‚\n\nè®¾ç½®çº¿ç¨‹å//platform_thread.ccvoid SetCurrentThreadName(const char* name) &#123;#if defined(WEBRTC_WIN)  struct &#123;    DWORD dwType;    LPCSTR szName;    DWORD dwThreadID;    DWORD dwFlags;  &#125; threadname_info = &#123;0x1000, name, static_cast&lt;DWORD&gt;(-1), 0&#125;;  __try &#123;    ::RaiseException(0x406D1388, 0, sizeof(threadname_info) / sizeof(DWORD),                     reinterpret_cast&lt;ULONG_PTR*&gt;(&amp;threadname_info));  &#125; __except (EXCEPTION_EXECUTE_HANDLER) &#123;  &#125;#elif defined(WEBRTC_LINUX) || defined(WEBRTC_ANDROID)  prctl(PR_SET_NAME, reinterpret_cast&lt;unsigned long&gt;(name));#elif defined(WEBRTC_MAC) || defined(WEBRTC_IOS)  pthread_setname_np(name);#endif&#125;\n\n\nåŸå­æ“ä½œ//atomicops.hclass AtomicOps &#123; public:#if defined(WEBRTC_WIN)  // Assumes sizeof(int) == sizeof(LONG), which it is on Win32 and Win64.  static int Increment(volatile int* i) &#123;    return ::InterlockedIncrement(reinterpret_cast&lt;volatile LONG*&gt;(i));  &#125;  static int Decrement(volatile int* i) &#123;    return ::InterlockedDecrement(reinterpret_cast&lt;volatile LONG*&gt;(i));  &#125;  static int AcquireLoad(volatile const int* i) &#123;    return *i;  &#125;  static void ReleaseStore(volatile int* i, int value) &#123;    *i = value;  &#125;  static int CompareAndSwap(volatile int* i, int old_value, int new_value) &#123;    return ::InterlockedCompareExchange(reinterpret_cast&lt;volatile LONG*&gt;(i),                                        new_value,                                        old_value);  &#125;  // Pointer variants.  template &lt;typename T&gt;  static T* AcquireLoadPtr(T* volatile* ptr) &#123;    return *ptr;  &#125;  template &lt;typename T&gt;  static T* CompareAndSwapPtr(T* volatile* ptr, T* old_value, T* new_value) &#123;    return static_cast&lt;T*&gt;(::InterlockedCompareExchangePointer(        reinterpret_cast&lt;PVOID volatile*&gt;(ptr), new_value, old_value));  &#125;#else  static int Increment(volatile int* i) &#123;    return __sync_add_and_fetch(i, 1);  &#125;  static int Decrement(volatile int* i) &#123;    return __sync_sub_and_fetch(i, 1);  &#125;  static int AcquireLoad(volatile const int* i) &#123;    return __atomic_load_n(i, __ATOMIC_ACQUIRE);  &#125;  static void ReleaseStore(volatile int* i, int value) &#123;    __atomic_store_n(i, value, __ATOMIC_RELEASE);  &#125;  static int CompareAndSwap(volatile int* i, int old_value, int new_value) &#123;    return __sync_val_compare_and_swap(i, old_value, new_value);  &#125;  // Pointer variants.  template &lt;typename T&gt;  static T* AcquireLoadPtr(T* volatile* ptr) &#123;    return __atomic_load_n(ptr, __ATOMIC_ACQUIRE);  &#125;  template &lt;typename T&gt;  static T* CompareAndSwapPtr(T* volatile* ptr, T* old_value, T* new_value) &#123;    return __sync_val_compare_and_swap(ptr, old_value, new_value);  &#125;#endif&#125;;\n\nä½¿ç”¨ç¤ºä¾‹\nbool MessageQueue::IsQuitting() &#123;  return AtomicOps::AcquireLoad(&amp;stop_) != 0;&#125;\n\nçº¿ç¨‹æ¨¡å‹åŸç†WebRTCçš„çº¿ç¨‹åŠŸèƒ½ç”±Threadç±»æä¾›ã€‚Threadç»§æ‰¿äºæ¶ˆæ¯é˜Ÿåˆ—MessageQueueï¼Œè¿™æ ·WebRTCä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰äº†è‡ªå·±çš„æ¶ˆæ¯å¾ªç¯ï¼Œå¤–éƒ¨å¯ä»¥å‘è¯¥çº¿ç¨‹çš„æ¶ˆæ¯å¾ªç¯Postæ¶ˆæ¯Messageï¼Œç„¶åè¯¥çº¿ç¨‹è½®è¯¢ä»æ¶ˆæ¯å¾ªç¯Getåˆ°æ¶ˆæ¯åå¤„ç†æ¶ˆæ¯ã€‚\nUMLå¦‚ä¸‹ï¼š\n\n\n\nMessageå’ŒMessageQueueMessageç”¨äºå®šä¹‰å•ä¸ªæ¶ˆæ¯ï¼š\n\nposted_fromæ ‡è®°æ”¹æ¡æ¶ˆæ¯å‘é€è‡ªå“ªä¸ªå‡½æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯ç›´æ¥ç”¨RTC_FROM_HEREå®æ¥èµ‹å€¼ï¼›\nmessage_id32ä½æ•´æ•°ï¼Œæ¶ˆæ¯IDï¼›\npdataæ¶ˆæ¯æºå¸¦çš„æ•°æ®æŒ‡é’ˆï¼Œè™½ç„¶å®šä¹‰MessageData*ç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥ç­‰åŒäºvoid*ã€‚\nts_sensitiveæ¶ˆæ¯çš„æ•æ„Ÿæ—¶é—´ç‚¹ã€‚åœ¨ä½¿ç”¨MessageQueue::Postç­‰æ–¹æ³•å‘é€æ¶ˆæ¯æ—¶ï¼Œè‹¥time_sensitive == trueåˆ™è®¾ç½®ts_sensitive = TimeMillis() + kMaxMsgLatency å³å½“å‰æ—¶é—´ + æœ€å¤§æ¶ˆæ¯å»¶è¿Ÿæ—¶é—´ã€‚å½“æ¶ˆæ¯è¢«ä»é˜Ÿåˆ—ä¸­å–å‡ºçš„æ—¶é—´å¤§äºè¯¥æ—¶é—´ï¼Œåˆ™ä¼šæ‰“å°è­¦å‘Šæ—¥å¿—ã€‚\nphandleræ¶ˆæ¯å¤„ç†å™¨ï¼ŒMessageHandleræ¥å£çš„æŒ‡é’ˆã€‚ç”¨æˆ·éœ€è¦ç»§æ‰¿è¯¥ç±»ï¼Œå¹¶é‡å†™å…¶OnMessageè™šå‡½æ•°ã€‚\n\nMessageQueueå®ç°äº†WebRTCä¸­æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œå¦‚Postæ–¹æ³•ç”¨äºæ·»åŠ æ¶ˆæ¯ï¼›Getæ–¹æ³•ç”¨äºä»é˜Ÿåˆ—å–å‡ºæ¶ˆæ¯ï¼Œè‹¥é˜Ÿåˆ—æ²¡æœ‰æ¶ˆæ¯åˆ™ä¸€ç›´ç­‰å¾…ï¼Œå…·ä½“çš„ç­‰å¾…å’Œå”¤é†’çš„æ–¹å¼é€šè¿‡SocketServerçš„Waitå’ŒWakeUpæ¥å®ç°ã€‚\nSocketServeræ˜¯ä¸€ä¸ªçº¯æŠ½è±¡ç±»ï¼ŒNullSocketServerå’ŒPhysicalSocketServeréƒ½æ´¾ç”Ÿè‡ªè¯¥ç±»ã€‚NullSocketServeræ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰åˆ›å»ºSOCKETï¼Œåªå¤„ç†æœ¬åœ°äº‹ä»¶ï¼ˆCreateEventç³»åˆ—å‡½æ•°ï¼‰ï¼›PhysicalSocketServerä¼šåˆ›å»ºSOCKETï¼Œå¹¶å¯ä»¥å¤„ç†ç½‘ç»œäº‹ä»¶ï¼ˆWSACreateEventç³»åˆ—å‡½æ•°ï¼‰ã€‚åœ¨å•çº¯çš„çº¿ç¨‹æ¨¡å‹ä¸­ï¼ŒSocketServeråªç”¨äºå¤„ç†ç­‰å¾…å’Œå”¤é†’æ“ä½œã€‚\nThreadThreadç±»æä¾›äº†2ä¸ªé™æ€å‡½æ•°ï¼ˆCreate, CreateWithSocketServerï¼‰æ¥æ„é€ Threadå®ä¾‹ã€‚\nä¸å»ºè®®ä½¿ç”¨new Thread()è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°çš„æ–¹å¼ï¼Œä»£ç æ³¨é‡Šä¸­å·²ç»ç»™å‡ºäº†è§£é‡Šï¼š\n// DEPRECATED.// The default constructor should not be used because it hides whether or// not a socket server will be associated with the thread. Most instances// of Thread do actually not need one, so please use either of the Create*// methods to construct an instance of Thread.Thread();\n\n\nä¸‹é¢æ˜¯Threadç±»æ„é€ çš„å¤§è‡´è¿‡ç¨‹ï¼š\n+-----------------------------+|                             ||  new Thread(SocketServer*)  ||                             |+---+-------------------------+    |    |    |         +-----------------------------------+    |         |                                   |    +---------&gt;  new MessageQueue(SocketServer*)  |              |                                   |              +-----------------------------------+\n\n\næ„é€ å®ŒThreadå®ä¾‹ä¹‹åï¼Œè°ƒç”¨Startæ¥å¯åŠ¨çº¿ç¨‹ï¼Œæ¡†æ¶ä¼šæ ¹æ®Startå‡½æ•°çš„Runnableå‚æ•°æ˜¯å¦ä¸ºNULLæ¥åˆ¤æ–­æ˜¯éœ€è¦è¿è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„Runnable-&gt;Run(), è¿˜æ˜¯è¿è¡Œé»˜è®¤ProcessMessageå»å¾ªç¯ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯æ¥å¤„ç†ã€‚\n\nè‹¥è¿è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„Runnable-&gt;Run()ï¼Œåˆ™ç”¨æˆ·éœ€è¦ç»§æ‰¿rtc::Runnableå»é‡è½½Run()ï¼›\nè‹¥è¿è¡Œé»˜è®¤çš„ProcessMessageï¼Œåˆ™ç”¨æˆ·åˆ™éœ€è¦å®šä¹‰Messageï¼Œå‘çº¿ç¨‹ä¸­Postè¯¥Messageï¼Œè®©çº¿ç¨‹æ¥æ‰§è¡Œã€‚\n\næµç¨‹å¦‚ä¸‹ï¼š\n+---------------------------+|                           || Thread-&gt;Start(Runnable*)  ||                           |+-+-------------------------+  |  |       +-------------------------+  |       |                         |  +-------&gt; CreateThrad(PreRun)     |          |                         |          +-------------------------+            |Runnable* is NULL?            |            |           +------------------+            |           |                  |            +-----------&gt;  Runnable-&gt;Run() |            |           |                  |            |           +------------------+            |            |            |           +------------------+            |           |                  |            +-----------&gt;  Thread-&gt;Run()   |                        |                  |                        +-+----------------+                          |                          |                          |    +--------------------------+                          |    |                          |                          +----&gt; Thread-&gt;ProcessMessage() |                               |                          |                               +--+-----------------------+                                  |                                  |     +--------------------------------+                                  |     |                                |                                  +-----&gt; Loop call MessageQueue-&gt;Get()  |                                        |                                |                                        +--------------------------------+\n\nç¤ºä¾‹å®ç°Runnbale#include &quot;rtc_base/thread.h&quot;class MyTask : public rtc::Runnable &#123;public:\tMyTask(const std::string &amp;name) : name_(name) &#123;\t&#125;protected:\tvoid Run(Thread* thread) &#123;\t\tstd::cout &lt;&lt; &quot;task name: &quot; &lt;&lt; name_ &lt;&lt; std::endl;\t\tstd::cout &lt;&lt; &quot;my thread id: &quot; &lt;&lt; thread-&gt;GetId() &lt;&lt; std::endl;\t&#125;private:\tstd::string name_;&#125;;int main()&#123;\tstd::unique_ptr&lt;rtc::Thread&gt; thread = rtc::Thread::Create();\tthread-&gt;Start(new MyTask(&quot;task1&quot;));\tgetchar();    return 0;&#125;\n\nå‘é€Messageclass MyTaskHandler : public rtc::MessageHandler &#123;public:\tMyTaskHandler(const std::string &amp;name) : name_(name) &#123;\t&#125;protected:\tvoid OnMessage(Message* msg) &#123;\t\tstd::cout &lt;&lt; &quot;task name: &quot; &lt;&lt; name_ &lt;&lt; std::endl;\t\tstd::cout &lt;&lt; &quot;my thread id: &quot; &lt;&lt; Thread::Current()-&gt;GetId() &lt;&lt; std::endl;\t&#125;private:\tstd::string name_;&#125;;int main()&#123;\tstd::unique_ptr&lt;rtc::Thread&gt; thread = rtc::Thread::Create();\tthread-&gt;Start(nullptr);\tthread-&gt;Post(RTC_FROM_HERE, new MyTaskHandler(&quot;task2&quot;), 0, nullptr, false);\tgetchar();    return 0;&#125;\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"],"tags":["WebRTC"]},{"title":"æµåª’ä½“åŸºç¡€æ¦‚å¿µ","url":"/post/737279469.html","content":"æµåª’ä½“åè®®RTP (Real-time Transport Protocol)RTP ç‰¹å¾å®æ—¶ä¼ è¾“åè®®ï¼ˆReal-time Transport Protocolï¼‰æ˜¯ä¸€ä¸ªç½‘ç»œä¼ è¾“å±‚åè®®ï¼Œå®ƒæ˜¯ç”± IETF çš„å¤šåª’ä½“ä¼ è¾“å·¥ä½œå°ç»„ 1996 å¹´åœ¨ RFC 1889 ä¸­å…¬å¸ƒçš„ï¼Œå®ƒä½œä¸ºå› ç‰¹ç½‘æ ‡å‡†åœ¨ RFC 3550ï¼ˆè¯¥æ–‡æ¡£çš„æ—§ç‰ˆæœ¬æ˜¯ RFC 1889ï¼‰æœ‰è¯¦ç»†è¯´æ˜ï¼ŒRTP æ ‡å‡†å®šä¹‰äº†ä¸¤ä¸ªå­åè®®ï¼šRTP å’Œ RTCPã€‚\n\nRTP åè®®æ˜¯å»ºç«‹åœ¨ UDP åè®®ä¸Šçš„ã€‚ RTP åè®®è¯¦ç»†è¯´æ˜äº†åœ¨äº’è”ç½‘ä¸Šä¼ é€’éŸ³é¢‘å’Œè§†é¢‘çš„æ ‡å‡†æ•°æ®åŒ…æ ¼å¼ã€‚RTP åè®®å¸¸ç”¨äºæµåª’ä½“ç³»ç»Ÿï¼ˆé…åˆ RTCP åè®®ï¼‰ã€è§†é¢‘ä¼šè®®å’Œè§†é¢‘ç”µè¯ç³»ç»Ÿï¼ˆé…åˆ H.263 æˆ– SIPï¼‰ã€‚\nRTP æ ‡å‡†ç”±ä¸¤ä¸ªç´§å¯†é“¾æ¥éƒ¨åˆ†ç»„æˆï¼š\n\nRTP â€”- ä¼ é€å…·æœ‰å®æ—¶å±æ€§çš„æ•°æ®ï¼›\nRTP æ§åˆ¶åè®®ï¼ˆRTCPï¼‰â€”-ç›‘æ§æœåŠ¡è´¨é‡å¹¶ä¼ é€æ­£åœ¨è¿›è¡Œçš„ä¼šè¯å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯ã€‚\n\nRTP æœ¬èº«å¹¶æ²¡æœ‰æä¾›æŒ‰æ—¶å‘é€æœºåˆ¶æˆ–å…¶ä»–æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ä¿è¯ï¼Œå®ƒä¾èµ–äºåº•å±‚æœåŠ¡å»å®ç°è¿™ä¸€è¿‡ç¨‹ã€‚RTP å¹¶ä¸ä¿è¯ä¼ é€æˆ–é˜²æ­¢æ— åºä¼ é€ï¼Œä¹Ÿä¸ç¡®å®šåº•å±‚ç½‘ç»œçš„å¯é æ€§ã€‚RTP å®è¡Œæœ‰åºä¼ é€ï¼ŒRTP ä¸­çš„åºåˆ—å·å…è®¸æ¥æ”¶æ–¹é‡ç»„å‘é€æ–¹çš„åŒ…åºåˆ—ï¼ŒåŒæ—¶åºåˆ—å·ä¹Ÿèƒ½ç”¨äºå†³å®šé€‚å½“çš„åŒ…ä½ç½®ï¼Œä¾‹å¦‚ï¼šåœ¨è§†é¢‘è§£ç ä¸­ï¼Œå°±ä¸éœ€è¦é¡ºåºè§£ç ã€‚\nRTP æŠ¥å¤´RTP æŠ¥å¤´æ ¼å¼å¦‚ä¸‹ï¼š\n\nVï¼šRTP åè®®çš„ç‰ˆæœ¬å·ï¼Œå  2 ä½ï¼Œå½“å‰åè®®ç‰ˆæœ¬å·ä¸º 2ã€‚\nPï¼šå¡«å……æ ‡å¿—ï¼Œå  1 ä½ï¼Œå¦‚æœ P&#x3D;1ï¼Œåˆ™åœ¨è¯¥æŠ¥æ–‡çš„å°¾éƒ¨å¡«å……ä¸€ä¸ªæˆ–å¤šä¸ªé¢å¤–çš„å…«ä½ç»„ï¼Œå®ƒä»¬ä¸æ˜¯æœ‰æ•ˆè½½è·çš„ä¸€éƒ¨åˆ†ã€‚\nXï¼šæ‰©å±•æ ‡å¿—ï¼Œå  1 ä½ï¼Œå¦‚æœ X&#x3D;1ï¼Œåˆ™åœ¨ RTP æŠ¥å¤´åè·Ÿæœ‰ä¸€ä¸ªæ‰©å±•æŠ¥å¤´ã€‚\nCCï¼šCSRC è®¡æ•°å™¨ï¼Œå  4 ä½ï¼ŒæŒ‡ç¤º CSRC æ ‡è¯†ç¬¦çš„ä¸ªæ•°ã€‚\nM: æ ‡è®°ï¼Œå  1 ä½ï¼Œä¸åŒçš„æœ‰æ•ˆè½½è·æœ‰ä¸åŒçš„å«ä¹‰ï¼Œå¯¹äºè§†é¢‘ï¼Œæ ‡è®°ä¸€å¸§çš„ç»“æŸï¼›å¯¹äºéŸ³é¢‘ï¼Œæ ‡è®°ä¼šè¯çš„å¼€å§‹ã€‚\nPT: æœ‰æ•ˆè½½è·ç±»å‹ï¼Œå  7 ä½ï¼Œç”¨äºè¯´æ˜ RTP æŠ¥æ–‡ä¸­æœ‰æ•ˆè½½è·çš„ç±»å‹ï¼Œå¦‚ GSM éŸ³é¢‘ã€JPEM å›¾åƒç­‰ã€‚\nåºåˆ—å·ï¼šå  16 ä½ï¼Œç”¨äºæ ‡è¯†å‘é€è€…æ‰€å‘é€çš„ RTP æŠ¥æ–‡çš„åºåˆ—å·ï¼Œæ¯å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œåºåˆ—å·å¢ 1ã€‚æ¥æ”¶è€…é€šè¿‡åºåˆ—å·æ¥æ£€æµ‹æŠ¥æ–‡ä¸¢å¤±æƒ…å†µï¼Œé‡æ–°æ’åºæŠ¥æ–‡ï¼Œæ¢å¤æ•°æ®ã€‚\næ—¶æˆ³(Timestamp)ï¼šå  32 ä½ï¼Œæ—¶æˆ³åæ˜ äº†è¯¥ RTP æŠ¥æ–‡çš„ç¬¬ä¸€ä¸ªå…«ä½ç»„çš„é‡‡æ ·æ—¶åˆ»ã€‚æ¥æ”¶è€…ä½¿ç”¨æ—¶æˆ³æ¥è®¡ç®—å»¶è¿Ÿå’Œå»¶è¿ŸæŠ–åŠ¨ï¼Œå¹¶è¿›è¡ŒåŒæ­¥æ§åˆ¶ã€‚\nåŒæ­¥ä¿¡æº(SSRC)æ ‡è¯†ç¬¦ï¼šå  32 ä½ï¼Œç”¨äºæ ‡è¯†åŒæ­¥ä¿¡æºã€‚è¯¥æ ‡è¯†ç¬¦æ˜¯éšæœºé€‰æ‹©çš„ï¼Œå‚åŠ åŒä¸€è§†é¢‘ä¼šè®®çš„ä¸¤ä¸ªåŒæ­¥ä¿¡æºä¸èƒ½æœ‰ç›¸åŒçš„ SSRCã€‚\nç‰¹çº¦ä¿¡æº(CSRC)æ ‡è¯†ç¬¦ï¼šæ¯ä¸ª CSRC æ ‡è¯†ç¬¦å  32 ä½ï¼Œå¯ä»¥æœ‰ 0 ï½ 15 ä¸ªã€‚æ¯ä¸ª CSRC æ ‡è¯†äº†åŒ…å«åœ¨è¯¥ RTP æŠ¥æ–‡æœ‰æ•ˆè½½è·ä¸­çš„æ‰€æœ‰ç‰¹çº¦ä¿¡æºã€‚\n\nè¿™é‡Œçš„åŒæ­¥ä¿¡æºæ˜¯æŒ‡äº§ç”Ÿåª’ä½“æµçš„ä¿¡æºï¼Œå®ƒé€šè¿‡ RTP æŠ¥å¤´ä¸­çš„ä¸€ä¸ª 32 ä½æ•°å­— SSRC æ ‡è¯†ç¬¦æ¥æ ‡è¯†ï¼Œè€Œä¸ä¾èµ–äºç½‘ç»œåœ°å€ï¼Œæ¥æ”¶è€…å°†æ ¹æ® SSRC æ ‡è¯†ç¬¦æ¥åŒºåˆ†ä¸åŒçš„ä¿¡æºï¼Œè¿›è¡Œ RTP æŠ¥æ–‡çš„åˆ†ç»„ã€‚ç‰¹çº¦ä¿¡æºæ˜¯æŒ‡å½“æ··åˆå™¨æ¥æ”¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªåŒæ­¥ä¿¡æºçš„ RTP æŠ¥æ–‡åï¼Œç»è¿‡æ··åˆå¤„ç†äº§ç”Ÿä¸€ä¸ªæ–°çš„ç»„åˆ RTP æŠ¥æ–‡ï¼Œå¹¶æŠŠæ··åˆå™¨ä½œä¸ºç»„åˆ RTP æŠ¥æ–‡çš„ SSRCï¼Œè€Œå°†åŸæ¥æ‰€æœ‰çš„ SSRC éƒ½ä½œä¸º CSRC ä¼ é€ç»™æ¥æ”¶è€…ï¼Œä½¿æ¥æ”¶è€…çŸ¥é“ç»„æˆç»„åˆæŠ¥æ–‡çš„å„ä¸ª SSRCã€‚\nRTCP (Real-time Transport Control Protocol)å®æ—¶ä¼ è¾“æ§åˆ¶åè®®ï¼ˆReal-time Transport Control Protocol,RTCPï¼‰æ˜¯å®æ—¶ä¼ è¾“åè®®ï¼ˆRTPï¼‰çš„ä¸€ä¸ªå§å¦¹åè®®ã€‚\nRTCP ä¸º RTP åª’ä½“æµæä¾›ä¿¡é“å¤–æ§åˆ¶ã€‚RTCP å®šæœŸåœ¨å¤šåª’ä½“æµä¼šè¯å‚åŠ è€…ä¹‹é—´ä¼ è¾“æ§åˆ¶æ•°æ®ã€‚RTCP çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¸º RTP æ‰€æä¾›çš„æœåŠ¡è´¨é‡æä¾›åé¦ˆã€‚\nRTCP æ”¶é›†ç›¸å…³åª’ä½“è¿æ¥çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šä¼ è¾“å­—èŠ‚æ•°ï¼Œä¼ è¾“åˆ†ç»„æ•°ï¼Œä¸¢å¤±åˆ†ç»„æ•°ï¼Œæ—¶å»¶æŠ–åŠ¨ï¼Œå•å‘å’ŒåŒå‘ç½‘ç»œå»¶è¿Ÿç­‰ç­‰ã€‚ç½‘ç»œåº”ç”¨ç¨‹åºå¯ä»¥åˆ©ç”¨ RTCP æ‰€æä¾›çš„ä¿¡æ¯è¯•å›¾æé«˜æœåŠ¡è´¨é‡ï¼Œæ¯”å¦‚é™åˆ¶ä¿¡æ¯æµé‡æˆ–æ”¹ç”¨å‹ç¼©æ¯”è¾ƒå°çš„ç¼–è§£ç å™¨ã€‚RTCP æœ¬èº«ä¸æä¾›æ•°æ®åŠ å¯†æˆ–èº«ä»½è®¤è¯ï¼Œå…¶ä¼´ç”Ÿåè®®SRTCPï¼ˆå®‰å…¨å®æ—¶ä¼ è¾“æ§åˆ¶åè®®ï¼‰åˆ™å¯ç”¨äºæ­¤ç±»ç”¨é€”ã€‚\n\nWebRTC å†…éƒ¨é‡‡ç”¨çš„æ˜¯ RTC+RTCP\n\nSRTP &amp; SRTCPSRTP &#x3D; Secure Real-time Transport ProtocolSRTCP &#x3D; Secure Real-time Transport Control ProtocolSRTP æ˜¯åœ¨å®æ—¶ä¼ è¾“åè®® RTP åŸºç¡€ä¸Šæ‰€å®šä¹‰çš„ä¸€ä¸ªåè®®ï¼Œæ—¨åœ¨ä¸ºå•æ’­å’Œå¤šæ’­åº”ç”¨ç¨‹åºä¸­çš„å®æ—¶ä¼ è¾“åè®®çš„æ•°æ®æä¾›åŠ å¯†ã€æ¶ˆæ¯è®¤è¯ã€å®Œæ•´æ€§ä¿è¯å’Œé‡æ”¾ä¿æŠ¤ã€‚å®ƒæ˜¯ç”± David Oranï¼ˆæ€ç§‘ï¼‰å’Œ Rolf Blomï¼ˆçˆ±ç«‹ä¿¡ï¼‰å¼€å‘çš„ï¼Œå¹¶æœ€æ—©ç”± IETF äº 2004 å¹´ 3 æœˆä½œä¸º RFC 3711 å‘å¸ƒã€‚\nRTSP (Real-time Transport Streaming Protocol)RTSPï¼ˆReal Time Streaming Protocolï¼‰ï¼ŒRFC2326ï¼Œå®æ—¶æµä¼ è¾“åè®®ã€‚RTSP åœ¨ä½“ç³»ç»“æ„ä¸Šä½äº RTP å’Œ RTCP ä¹‹ä¸Šï¼Œå®ƒä½¿ç”¨ TCP æˆ– UDP å®Œæˆæ•°æ®ä¼ è¾“ã€‚\nRTSP æ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„åº”ç”¨å±‚åè®®ï¼Œåœ¨è¯­æ³•åŠä¸€äº›æ¶ˆæ¯å‚æ•°ç­‰æ–¹é¢ä¸ HTTP åè®®ç±»ä¼¼ã€‚\nRTSP è¢«ç”¨äºå»ºç«‹çš„æ§åˆ¶åª’ä½“æµçš„ä¼ è¾“ï¼Œå®ƒä¸ºå¤šåª’ä½“æœåŠ¡æ‰®æ¼”â€œç½‘ç»œè¿œç¨‹æ§åˆ¶â€çš„è§’è‰²ã€‚å°½ç®¡æœ‰æ—¶å¯ä»¥æŠŠ RTSP æ§åˆ¶ä¿¡æ¯å’Œåª’ä½“æ•°æ®æµäº¤ç»‡åœ¨ä¸€èµ·ä¼ é€ï¼Œä½†ä¸€èˆ¬æƒ…å†µ RTSP æœ¬èº«å¹¶ä¸ç”¨äºä¼ é€åª’ä½“æµæ•°æ®ï¼Œåª’ä½“æ•°æ®çš„ä¼ é€å¯é€šè¿‡ RTP&#x2F;RTCP ç­‰åè®®æ¥å®Œæˆã€‚\nSDP (Session Description Protocol)ä¼šè¯æè¿°åè®®ï¼ˆSession Description Protocol æˆ–ç®€å†™ SDPï¼‰æè¿°çš„æ˜¯æµåª’ä½“çš„åˆå§‹åŒ–å‚æ•°ã€‚æ­¤åè®®ç”± IETF å‘è¡¨ä¸º RFC 2327ã€‚\nSDP å®Œå…¨æ˜¯ä¸€ç§ä¼šè¯æè¿°æ ¼å¼ï¼Œå®ƒä¸å±äºä¼ è¾“åè®®ã€‚\nSDP ç”¨äºæè¿°å¤šåª’ä½“é€šä¿¡ä¼šè¯ï¼ŒåŒ…æ‹¬ä¼šè¯å»ºç«‹ã€ä¼šè¯è¯·æ±‚å’Œå‚æ•°åå•†ã€‚SDP ä¸ç”¨äºä¼ è¾“åª’ä½“æ•°æ®ï¼Œåªèƒ½ç”¨äºä¸¤ä¸ªé€šä¿¡ç»ˆç«¯çš„å‚æ•°åå•†ï¼ŒåŒ…æ‹¬åª’ä½“ç±»å‹ã€æ ¼å¼ä»¥åŠæ‰€æœ‰å…¶ä»–å’Œä¼šè¯ç›¸å…³çš„å±æ€§ã€‚SDP ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æè¿°ä¸Šè¿°åˆå§‹åŒ–å‚æ•°ã€‚\n\nå¯ä»¥å‚è€ƒ SDPæ ¼å¼è§£æ\n\nSIP (Session Initiation Protocol)SIP(Session Initiation Protocol)æ˜¯ä¸€ä¸ªåº”ç”¨å±‚çš„ä¿¡ä»¤æ§åˆ¶åè®®ã€‚\nSIP ç”¨äºåˆå§‹åŒ–ä¸€ä¸ª Sessionï¼Œå¹¶è´Ÿè´£ä¼ è¾“ SDP åŒ…ï¼›è€Œ SDP åŒ…ä¸­æè¿°äº†ä¸€ä¸ª Session ä¸­åŒ…å«å“ªäº›åª’ä½“æ•°æ®ï¼Œé‚€è¯·çš„äººç­‰ç­‰ï¼›å½“éœ€è¦è¢«é‚€è¯·çš„äººéƒ½é€šè¿‡å„è‡ªçš„ç»ˆç«¯è®¾å¤‡è¢«é€šçŸ¥åˆ°åï¼Œå°±å¯ä»¥ä½¿ç”¨ RTSP æ¥æ§åˆ¶ç‰¹å®š Media çš„é€šä¿¡ï¼Œæ¯”å¦‚ RTSP æ§åˆ¶ä¿¡æ¯è¦æ±‚å¼€å§‹ Video çš„æ’­æ”¾ï¼Œé‚£ä¹ˆå°±å¼€å§‹ä½¿ç”¨ RTPï¼ˆæˆ–è€… TCPï¼‰å®æ—¶ä¼ è¾“æ•°æ®ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼ŒRTCP è¦è´Ÿè´£ QoS ç­‰ã€‚\nRTMP (Real Time Messaging Protocol)RTMP(Real-Time Messaging Protocol å®æ—¶æ¶ˆæ¯ä¼ é€åè®®)çš„ç¼©å†™ï¼Œå®ƒæ˜¯ Adobe Systems å…¬å¸ä¸º Flash æ’­æ”¾å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´éŸ³é¢‘ã€è§†é¢‘å’Œæ•°æ®ä¼ è¾“å¼€å‘çš„ä¸€ä¸ªåŸºäºTCPçš„åº”ç”¨å±‚ä¼ è¾“åè®®ã€‚è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ã€æœªåŠ å¯†çš„å®æ—¶æ¶ˆæ¯ä¼ é€’åè®®ï¼Œé»˜è®¤ç«¯å£æ˜¯ 1935ã€‚\nRTMP æ˜¯ä¸€ç§æœ‰çŠ¶æ€åè®®ã€‚\nRTMP åè®®æœ‰æ•ˆçš„ä¿è¯äº†åª’ä½“ä¼ è¾“è´¨é‡ï¼Œä½¿ç”¨æˆ·å¯ä»¥è§‚çœ‹åˆ°é«˜è´¨é‡çš„å¤šåª’ä½“ã€‚RTMP é‡‡ç”¨ TCP åè®®ä½œä¸ºå…¶åœ¨ä¼ è¾“å±‚çš„åè®®ï¼Œé¿å…äº†å¤šåª’ä½“æ•°æ®åœ¨å¹¿åŸŸç½‘ä¼ è¾“è¿‡ç¨‹ä¸­çš„ä¸¢åŒ…å¯¹è´¨é‡é€ æˆçš„æŸå¤±ã€‚æ­¤å¤– RTMP åè®®ä¼ è¾“çš„ FLV å°è£…æ ¼å¼æ”¯æŒçš„ Hï¼264 è§†é¢‘ç¼–ç æ–¹å¼å¯ä»¥åœ¨å¾ˆä½çš„ç ç‡ä¸‹æ˜¾ç¤ºè´¨é‡è¿˜ä¸é”™çš„ç”»é¢ï¼Œéå¸¸é€‚åˆç½‘ç»œå¸¦å®½ä¸è¶³çš„æƒ…å†µä¸‹æ”¶çœ‹æµåª’ä½“ã€‚\nå½“ç„¶ RTMP åè®®ä¹Ÿæœ‰ä¸€äº›å±€é™ï¼ŒRTMP åŸºäº TCP åè®®ï¼Œè€Œ TCP åè®®å®æ—¶æ€§ä¸å¦‚ UDPï¼Œä¹Ÿéå¸¸å ç”¨å¸¦å®½ã€‚ç›®å‰åŸºäº UDP çš„ RTMFP åè®®èƒ½å¾ˆå¥½çš„è§£å†³è¿™äº›é—®é¢˜ã€‚\n\nRTMPT å°è£…åœ¨ HTTP è¯·æ±‚ä¹‹ä¸­ï¼Œå¯ç©¿è¶Šé˜²ç«å¢™;RTMPS ç±»ä¼¼ RTMPTï¼Œä½†ä½¿ç”¨çš„æ˜¯ HTTPS è¿æ¥;\n\nRTMFP (Real Time Media Flow Protocol)RTMFP æ˜¯ Adobe å…¬å¸å¼€å‘çš„ä¸€å¥—æ–°çš„é€šä¿¡åè®®ã€‚\nRTMFP æ˜¯åŸºäº UDP çš„ï¼ŒRTMP æ˜¯åŸºäº TCP çš„ã€‚UDP åœ¨ä¼ é€ç›´æ’­æ•°æ®æ–¹é¢æ¯” TCP è¿˜æ˜¯æœ‰è¾ƒå¤šä¼˜åŠ¿çš„ï¼Œæ¯”å¦‚å‡å°‘å»¶æ—¶ï¼Œå¯¹ä¸¢åŒ…çš„å®¹å¿ï¼Œè™½ç„¶åœ¨å¯é æ€§ä¸Šæœ‰æ‰€æŸå¤±ã€‚ä¸ RTMP ä¸åŒ, RTMFP æ”¯æŒ Flash Player ç›´æ¥å‘é€æ•°æ®ç»™å¦ä¸€ä¸ªï¼Œè€Œä¸ç»è¿‡ Serverã€‚\nRSVP (Resource ReSerVation Protocol)ä½¿ç”¨ RSVP é¢„ç•™ä¸€éƒ¨åˆ†ç½‘ç»œèµ„æºï¼ˆå³å¸¦å®½ï¼‰ï¼Œèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¸ºæµåª’ä½“çš„ä¼ è¾“æä¾› QoSã€‚é€šå¸¸ RSVP è¯·æ±‚å°†ä¼šå¼•èµ·æ¯ä¸ªèŠ‚ç‚¹æ•°æ®è·¯å¾„ä¸Šçš„èµ„æºé¢„ç•™ã€‚\nRSVP åªåœ¨å•æ–¹å‘ä¸Šè¿›è¡Œèµ„æºè¯·æ±‚ï¼Œå› æ­¤ï¼Œå°½ç®¡ç›¸åŒçš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶å¯èƒ½æ—¢æ‹…å½“å‘é€è€…ä¹Ÿæ‹…å½“æ¥å—è€…ï¼Œä½† RSVP å¯¹å‘é€è€…ä¸æ¥å—è€…åœ¨é€»è¾‘ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ã€‚ RSVP å±äºç½‘ç»œå±‚åè®®ã€‚ RSVP ä¸ä¼ è¾“åº”ç”¨æ•°æ®ï¼Œä½†æ”¯æŒå› ç‰¹ç½‘æ§åˆ¶åè®®ï¼Œå¦‚ ICMPã€IGMP æˆ–è€…è·¯ç”±é€‰æ‹©åè®®ã€‚\nMMS (Microsoft Media Server Protocol)MMS(Microsoft Media Server Protocol)ï¼Œå¾®è½¯åª’ä½“æœåŠ¡å™¨åè®®ï¼Œç”¨æ¥è®¿é—®æ¥æ”¶ Windows Media æœåŠ¡å™¨ä¸­ .asf æ–‡ä»¶çš„ä¸€ç§åè®®ã€‚MMS åè®®ç”¨äºè®¿é—® Windows Media å‘å¸ƒç‚¹ä¸Šçš„å•æ’­å†…å®¹ã€‚\nMMS çš„é»˜è®¤ç«¯å£æ˜¯ 1755.\nHLS (HTTP Live Streaming)HTTP Live Streamingï¼ˆç¼©å†™æ˜¯ HLSï¼‰æ˜¯ä¸€ä¸ªç”±è‹¹æœå…¬å¸æå‡ºçš„åŸºäºHTTPçš„æµåª’ä½“ç½‘ç»œä¼ è¾“åè®®ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯æŠŠæ•´ä¸ªæµåˆ†æˆä¸€ä¸ªä¸ªå°çš„åŸºäº HTTP çš„æ–‡ä»¶æ¥ä¸‹è½½ï¼Œæ¯æ¬¡åªä¸‹è½½ä¸€äº›ã€‚å½“åª’ä½“æµæ­£åœ¨æ’­æ”¾æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»è®¸å¤šä¸åŒçš„å¤‡ç”¨æºä¸­ä»¥ä¸åŒçš„é€Ÿç‡ä¸‹è½½åŒæ ·çš„èµ„æºï¼Œå…è®¸æµåª’ä½“ä¼šè¯é€‚åº”ä¸åŒçš„æ•°æ®é€Ÿç‡ã€‚åœ¨å¼€å§‹ä¸€ä¸ªæµåª’ä½“ä¼šè¯æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä¸‹è½½ä¸€ä¸ªåŒ…å«å…ƒæ•°æ®çš„ extended M3U (m3u8)playlist æ–‡ä»¶ï¼Œç”¨äºå¯»æ‰¾å¯ç”¨çš„åª’ä½“æµã€‚\nHLS åªè¯·æ±‚åŸºæœ¬çš„ HTTP æŠ¥æ–‡ï¼Œä¸å®æ—¶ä¼ è¾“åè®®ï¼ˆRTP)ä¸åŒï¼ŒHLS å¯ä»¥ç©¿è¿‡ä»»ä½•å…è®¸ HTTP æ•°æ®é€šè¿‡çš„é˜²ç«å¢™æˆ–è€…ä»£ç†æœåŠ¡å™¨ã€‚å®ƒä¹Ÿå¾ˆå®¹æ˜“ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œæ¥ä¼ è¾“åª’ä½“æµã€‚\nHLS åè®®è§„å®šï¼š\n\nè§†é¢‘çš„å°è£…æ ¼å¼æ˜¯ TSã€‚\nè§†é¢‘çš„ç¼–ç æ ¼å¼ä¸º H264,éŸ³é¢‘ç¼–ç æ ¼å¼ä¸º MP3ã€AAC æˆ–è€… AC-3ã€‚\né™¤äº† TS è§†é¢‘æ–‡ä»¶æœ¬èº«ï¼Œè¿˜å®šä¹‰äº†ç”¨æ¥æ§åˆ¶æ’­æ”¾çš„ m3u8 æ–‡ä»¶ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰ã€‚\n\nå°è£…æ ¼å¼\n\n\nåç§°\næ¨å‡ºæœºæ„\næµåª’ä½“æ”¯æŒ\næ”¯æŒçš„è§†é¢‘ç¼–ç \næ”¯æŒçš„éŸ³é¢‘ç¼–ç \n\n\n\nAVI\nMicrosoft Inc.\nå¦\nå‡ ä¹æ‰€æœ‰æ ¼å¼\nå‡ ä¹æ‰€æœ‰æ ¼å¼\n\n\nMP4\nMPEG\næ˜¯\nMPEG-2, MPEG-4, H.264, H.263 ç­‰\nAAC, MPEG-1 Layers I, II, III, AC-3 ç­‰\n\n\nTS\nMPEG\næ˜¯\nMPEG-1, MPEG-2, MPEG-4, H.264\nMPEG-1 Layers I, II, III, AAC\n\n\nFLV\nAdobe Inc.\næ˜¯\nSorenson, VP6, H.264\nMP3, ADPCM, Linear PCM, AAC ç­‰\n\n\nMKV\nCoreCodec Inc.\næ˜¯\nå‡ ä¹æ‰€æœ‰æ ¼å¼\nå‡ ä¹æ‰€æœ‰æ ¼å¼\n\n\nRMVB\nReal Network Inc.\næ˜¯\nRealVideo 8, 9, 10\nAAC, Cook Codec, RealAudio Lossless\n\n\nè§†é¢‘ç¼–ç æ ¼å¼\n\n\nåç§°\næ¨å‡ºæœºæ„\næ¨å‡ºæ—¶é—´\n\n\n\nHEVC(h.265)\nMPEG&#x2F;ITU-T\n2013\n\n\nH.264\nMPEG&#x2F;ITU-T\n2003\n\n\nMPEG4\nMPEG\n2001\n\n\nMPEG2\nMPEG\n1994\n\n\nVP9\nGoogle\n2013\n\n\nVP8\nGoogle\n2008\n\n\nVC-1\nMicrosoft Inc.\n2006\n\n\néŸ³é¢‘ç¼–ç æ ¼å¼\n\n\nåç§°\næ¨å‡ºæœºæ„\næ¨å‡ºæ—¶é—´\n\n\n\nAAC\nMPEG\n1997\n\n\nAC-3\nDolby Inc.\n1992\n\n\nMP3\nMPEG\n1993\n\n\nWMA\nMicrosoft Inc.\n1999\n\n\n\nç›®å‰ï¼Œç›´æ’­æœåŠ¡æ™®é€šé‡‡ç”¨RTMPä½œä¸ºæµåª’ä½“åè®®ï¼ŒFLVä½œä¸ºå°è£…æ ¼å¼ï¼ŒH.264ä½œä¸ºè§†é¢‘ç¼–ç æ ¼å¼ï¼ŒAACä½œä¸ºéŸ³é¢‘ç¼–ç æ ¼å¼åŒ–ã€‚ç‚¹æ’­æœåŠ¡æ™®é€šé‡‡ç”¨HTTPä½œä¸ºæµåª’ä½“åè®®ï¼ŒH.264ä½œä¸ºè§†é¢‘ç¼–ç æ ¼å¼ï¼ŒAACä½œä¸ºéŸ³é¢‘ç¼–ç æ ¼å¼ï¼Œè€Œå°è£…æ ¼å¼æœ‰å¤šç§ï¼Œå¦‚MP4ï¼ŒFLVï¼ŒF4Vç­‰ã€‚\n","categories":["â‘¥éŸ³è§†é¢‘åŠæµåª’ä½“æŠ€æœ¯"]}]